<!DOCTYPE html>
<!-- Created with https://studio.penguinmod.com/PenguinMod-Packager/ -->
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <!-- We only include this to explicitly loosen the CSP of various packager environments. It does not provide any security. -->
  <meta http-equiv="Content-Security-Policy" content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: blob:">
  <title>ToonPool Main Site</title>
  <style>
    body {
      color: #eeeeee;
      font-family: sans-serif;
      overflow: hidden;
      margin: 0;
      padding: 0;
    }
    :root, body.is-fullscreen {
      background-color: #ffffff;
    }
    [hidden] {
      display: none !important;
    }
    h1 {
      font-weight: normal;
    }
    a {
      color: inherit;
      text-decoration: underline;
      cursor: pointer;
    }

    #app, #loading, #error, #launch {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
    .screen {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      cursor: default;
      user-select: none;
      -webkit-user-select: none;
      background-color: #ffffff;
    }
    #launch {
      background-color: rgba(0, 0, 0, 0.7);
      cursor: pointer;
    }
    
    #loading {
      
    }
    .progress-bar-outer {
      border: 1px solid currentColor;
      height: 10px;
      width: 200px;
      max-width: 200px;
    }
    .progress-bar-inner {
      height: 100%;
      width: 0;
      background-color: currentColor;
    }
    .loading-text, noscript {
      font-weight: normal;
      font-size: 36px;
      margin: 0 0 16px;
    }
    .loading-image {
      margin: 0 0 16px;
    }
    #error-message, #error-stack {
      font-family: monospace;
      max-width: 600px;
      white-space: pre-wrap;
      user-select: text;
      -webkit-user-select: text;
    }
    #error-stack {
      text-align: left;
      max-height: 200px;
      overflow: auto;
    }
    
    
    .sc-canvas {
      cursor: auto;
    }
    .sc-monitor-root[data-opcode^="data_"] .sc-monitor-value-color {
      background-color: #ff8c1a;
    }
    .sc-monitor-row-value-outer {
      background-color: #fc662c;
    }
    .sc-monitor-row-value-editing .sc-monitor-row-value-outer {
      background-color: #e25b27;
    }
    
  </style>
  <meta name="theme-color" content="#ffffff">
  <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAQAElEQVR4AbSZ+a9dV3XHv2e4832D5ynv2YkTE9txbBLAhRCGQlKoEFV/qapKVX9pf+2fUKlSf6hUAT9UVaWWtipQEBWEDiq00EADmUhiJwxOQnBsx86E4/jZb3733aGf77r33Nz3bGfmaH/PGvbaa6+99nDOuTf9v7O93q8D9+E3cK7X++EIfgQfeL7XuyqlvrC/D974dcRX+Ez1Ll8J/gLcEuAOIEq5GdYZobfO9iP0ijrqi3aw73pxHO+KUwcZwGNqMKgMmM8GsuutMwp+lJoPYH81m0LnJBnvRuB09c7cMEbZiWkBy4blgpoPcKPIAxhSGMu2NRAV4GY95DWZcIcy/Dst7u9t+XBgxWx5loc80Q15vAePzqvACBm9Z9NyUNeD8DOoM+8629vO1DBf6C0bNH1bY3AjujN5a3CHVwCFnUVA8JT+yoAJHV3Ahs52TqDlUWq9YV1Q2gwpxgXvekStoVZg/1aLfb7pNu7Dg/HsBEVxNeoZ8kzZzrxtLAdPj0M9fKErqOtsH6D+Crno03XmC2oeOClvekAY0pz7myj41hVAQZE7DYqf16VUukMDNlbDKDVvePD2WdhZNwQMRa8HwnjTxX28obE7i6CwNg0MeM+s5eEMYmx5COwKm6HONuhDHqH2YVg/SqN9Yee2oKi37dXgBL7hwDDALffXKfQlOzNsbGpd8LQb8jDWOZhRG+uokvXBI7jefKErqPWBgd/gbY9se1iZ2t686y2bhozdeorqdYvbX9PAztyZEZ2gMP9G8Oxcbda8n6POfuh5vR/XWee2AduBJOkpUU/WqddRt71KzF0lva66HfhuR/YdwN4+jCJmjK9ZCEP69uM/1TcfOaZ7wLfAPY8c17cePa5/A9Z9A903Hj6mfwVff+gxGV8z//Bxfe0h45i++uAx/YvxABR85f5j+rIB/2XwJQP5SwP86tIsQfXUI/jW6oqWl5e0MDenC+d/pVPPntTTTz2pZ06d1PFzL+i+p07q3hPP6vs/e0bfeuyEvvTAE/rivT/W3937kL5y/3H91+NP6cenTuvUC2c1e/ly+CQPJE0Bvc4VCXj87Fk9ce5c4LHnntMjp0/p0TNn9Aj8o2fO6tFTZ6ID08eeO6fHCOrRM8/r4VPPYXtWj8D/+PQ5GQ+dOqsHTvfxoOmz8Cef0wO/BKbID546p0tLS/rRww/p8//9I33u2w/oC997WH/53Yf0uR88rr9/7Jf64vHT+pv7T+gf//cRff3hn+meR3+qex77ub7/5Ekdw+9Pn39RJ158WU+cfUE/OPEL3fPAT/TVh07onx48ru89/hNdvPArBt+TV4LhhFwtD5EAV/S4dVlmEGVZpoz1k+FCPdckLLFUCWssGeh6Xaypc63iYpFaBur2sMISexxJXrugRyS9VOoliS4t9/Tc+VmdnZnXqQuXdPqVS3r50rxenV8ES5pbaanV6aqNvx4QbUy78L1EiAnd9NTDZ5pl2HU1s7Cgc6/O6N5fPKdv/OQZnTnVIXzHIok2uspFOFKaMVQ6cH3CzcokgUtonCVK6MQOesgd9QeOWZQuieh0OnTUVZIkSrNMTqAScdEemqSSkWaZ0iyT8NfuJkpKZeV5rjTv69wmTUTOEkwSKUkofXTY70rT0KfQBMO8VFJPEr0LQ8l62lh38qXz+uKj39Gxk6e1srJEu76J1l2p5Wa1rMl6TfVaXVVopVZVtWrUVKvW1EDXbNQ11miogZxmNCMAUwefVkqqYTPWrKvZqKnRqGoc+4lmQxP1usZrNY1VKxqvVDWO34l6TSUG3qC/Mn56rBhxJQwgBoF/zzZrRRnJyUu5ygy2BK1UKqqXy6qBSpapii6HprRN7ItE9TgolUrtbkv/8fgJ/ZAzbonV4WzRzZqCmfTx/TfrEwf36z1TB3Tz9C06MAX2HNSh6w/q8A0HdQT6XuhtN1A/db3Gm00CYzayPsoE8Z5du3Tn/gP62M379fEDB/TJgwf0CeRPDPi7bzmouw7t193081tg+2RTFdpl+EhAygCkRDkDniRxWyYntL1e0a68o+lyor21kg5vntTRqR364O5pfWzfPn0E3D41rZs2bdBkJVWplCpNvRJ7SpKueEywjVp68MXzeviXZ9XutNFrzRUJuIXgj0xNae+2Kd1obJ/STQO6b8eUbh7gwM4pXb9lqxrlirI8UQqStKeMrbGLgA/tvE7vnZ7S+/B12/R1et/0Ln1gz3VgCkzrN/ZAr5/SUXQbWRFNBugtIK7+KuhpevNGfebAXv3++w/pj+/6hP7kd35Xf/Tbn9EffOrT+tSH7tSd771NR285pFtvukmHb9ynDx46rLuP3qlPHzmqgzt2qVlrKkszEpEpY5VleUYSOvrhqVM69vyr6gxWG11GSePOjdWj3ePSHrB7Uto9oT6PfB2YGpN2jUlbalI5F5lM6SSls1R5lqqEg1ImTVSkzXVpM3abjCq8UZc2Aus31qRN8FObx1jCSZwfXrIJPioEfDPJm962RZNjFdXoq1lNNFaWxmvSZEWy3220396UriMmx3Zg91Z9+vb36qM37tXWSklpmrHiEw5KNhIH51JrRT/42c/1FE8rjVzDBFjn4LbgeGtNMdBNVWkjHW6EbgDmxypJLDXbe9a8Vw3LGbcqt2ZJKtCAD+RSA9RHsHWsqry7rISD1gdslwP2wsJ8JLNKZO5vS0NsBWlbU31aVyRgkng2EJsT46Q7KVPjmT55ZJ8+feigdjgJWSqRVEFTsLC6oIfPvaKLC20i7RcspERSwu1asA/D9eRTBg8giTbi6vEkEMHneKOf6NP2V8WIjXij681eYrYSpVmmhMaXeT9g8lQiUbWSVMnk+Nf6xId9J4lCX1Drytjftv963XXrfjXLlQgxniAYJUgz7QU9ceplLXcUF66CivVCtQIaXAnUgEQxn+IoBBp45rsMnhWmlIezndnGJldDSmVhY77EoCtZziCosFOUq3GK92LpFrauHQKGEnGOUjc3rEvp/Mje3bpzejurKcM2UZqmQq25xTm9cumyXpyPIdO3FBWuHEKKikJOEw1l83mWyodLFjRVnmcgoROJ1Ry2thvFUJ8q7FzXaNbUYJOnVGb4yEhIkiSaX1lUJimxbaLwlyS6glpXwP6MQs6I7aMH97FtSirzyMzZElmlHOdNl0fx5WVpmZ2Q9jRyWTCsKuh6PhkomPaE0z+j14y1n5Bh4nWlwgTOtABi6C3bzrTE7DdqNVVqZaWs3VKJdc/KOvvqZVZAb2hftA3a812v1Vk2NLjMG4gVBnr0xt1sJw7DdhufHaXEOt+e0+JqRwt8R6WRMYyDEpVpOqAQWQ4MbFIEQyxVL6KU2bNTJk8pIzMwUUrjgprHLHTmjQxbz3IZprOyovbikloLi+p1enp5bl5Z1h+FbUdR+DQ1ijrzxlB2vGDn2KTUaqtHvD0+vHweXJy/qE67pVZXIgysXPr9mVuLEX1CTZIkqlTLmpgc09hEQ569ErOX0nNKvZFA1wCBIkwU9QgU5aVMeZIqTTLnUjBKMJpbXlbC2cKnAJ4Uk6DBlSR9xsToS9Ior5FrjJeoCm+E7oBjSuVyiYGvKE0zzS7LXUp2ugbSlboEnaQsS+QEVFm2HoAdd/kWSMlwmiraMYZwvIZSFzIUFzJq7MlKlUNQCQGlygnK/pZaq9RzEErhx7FF20RYDmB+FFK/blQHX+XVWTyh2FlxUHdZ+m1WRJ7l8tOQcDS82NayoSc9+KLGCniTTrurhfkFzcxc0hxfcssLLa0stVhSrCdsrlaIY6g2H+CWZanqZCLxGyWjTLNMpVJJMzwKeyTVsbghR43JlXBA67XWGQP9QretdHJSOclOyGLCm2A1rxAvW6CjSHCYJtyJQU6jaUCyqCGPkZ2UWEZjjaYmJ8bjA6nGYZNxinsF0Icw6wMm2kKtX4+cBFSWF5TzaEpo3OagWlluaZ7DScya27qNaUDSUIYvdAm8OwwZISg6WM0uLKnDimotLauz2mbgHZWSTKnrewoKqyLZwYdAZV+42r3Hl9aqVnyQ8IHBdlXiDbZuESQ0NSBRzAe4UaLzSFyJM6CUqsRXaIVvhHkORR9YjmMYxpCRx6qrXthQ3GxY/ZOTz6qNMucJk5KZlERvqY0rK1WUkIXU3hxMwo1iUcEPhYEvZIoMtruYINkuyyWf2CkPVHwrwdz6NUCXgkKXYmRbY/uWTWrWqxKVXb7gsmpJPYx7bAVxoXbVEKiiWG/GNIAwpPCij5fOv6zTiytqs+wTVmiAZNd8yLL1/NqeOl0kiMeE+qCx97/hugA6U9t1me5OqxOPqxJ7tl6vqTnRVD4I2Ka2NezDsM5tTQMIiYGwY9NGNVgAKXu1lGaxTNv08fzMbARe+MGUAOMet6Ff/JiHRPxRya3VaunbJ8+IF20lxJYy3RnxVktV1Sc3yxO4sSZWYSInq48Bb8HZlC90Jkaw9NRl2S9zUM1dntMcP27Ozc7zWh8b12Zye8M+ApJF+QofvgEKvy00VCK4Loded3VVXfZpe3lFL756iW1FZzSyD4iGTiQVOtOANNT1yMh9xx7lp7aLWppb4B1jWaskpM23R61U1tYdN4iRa6xkQh8U+TI1IutWGKEwI6uVcE/p0Y+XDZPj2soMbuIwLLHH+lbYDdoQR8yKRYOmLn0dClYm2ydXtVFXbWxMaZ6qyq9KY/g7NbvICuiC1/xFY/Uv+zZnarzG9/QkP4P9dD4VPzsqY8nz/BMhBxqzs0pZEbweKKqUyEW+YPs8DMUq9RWKK3R4yvJMlUolwDQxoK6SJGrla4S1OITPScYd4zDtUpPnubwcxQrwb4stVpZ/Ip/hx1Gq+b2Pe+G6oKg04KOvAe+f13/ML9Xf5vfAlxZn5E/sSr2iGklNy7k21Sd02+2fVJaS6JLikz119hxMgJtlDSiEwcliH6FAxmiFk3qWpb/AYyYhGp+ubN2w98xiEnw04VbobGM+QAZKLEmx7Fssf/uplCsklkORM6FHxnhvURdjo2c/A95yF0WH18VVfkH+BT/h//Oxn+ubT5/Uef5fwDU57WiJhLZWW9rYnNTR3YeV0J/rJsqSk5cmGrksGFYN6IBYI1kwCERcKa2935yMVQaBaljCxLZogjeFoUQyGUdMfJ5z6vO1lmYJepY854uY9xb284sLuvDKBb3w0kt68cUXdP6V8zr30gs6Q/3Lc7M6Nzun7zxzWn/+gwf0t8ef0hP8XzHLEp/lz5FVElr3D7JsrTqPvDH2f15h1JImKtJ1TRgKDy/ujsoESlIJxLOMgoIKoc+4TmTB+31srK7x8QazVSbTBN7uxoCcXdsZMUgcXEExKnRpxsl/+bwqfF+UKrmynO74aHmFl5fvnn5JX3vqjP7hyef010+e0eePP60vPP6M/urf79Wf/c/9+ovv3q//PPG0Li4uapVfgsu8Q4yPj2uCN79mc0wR0GpXE7ypHpw+rKxUU5VH7E2TEsOQok5DhwAACMFJREFUL0TIYKbgVFRo9HK9gc5LvVopqUqwJQ6tsl9goBzk0R/jxeq1UsimVwAFRf7JvMRqKrM8/XjstjuaX1rRfafP6MSFCzpzaU6z7IUZ3uEvseVaJKfHy0i5nMUEiKvnjLIdOqygVX7/89tfg1V5cNMOvf/QHZwDE3xfSM2KOANoMCj9M4AoPGOQ/r6FCXlA7duwTqyPDjO0wr7zY8X7qFTKJDKwZn/TNtqMzLZl2/DFy6+zLHRsiFl7tvBcZp92CNjv6r0w6qjDq7F80dD7vIs+zegLXQK/wsz7cZyyfWoNZpdVWSnnqpCcXVlZR6+/VTdOH1SVwy/Hxr8hTo/RmOKxGOnrzTjxYTpSEskHzyoztLKyqiXe21vMxioz02UkjJX06DXggNKXYShX8rjfvW276pVavEv0kkRlzoQKy7lcKcEDKGrlWaqcx22FV+bxyUlNTm7QBN8kzVJVVerGmZjNJGt/Y4Nu33dEG7fuFAuLn/El/3o8PaHXZj9RXP0VABvBcXNWhkAfgxrRi0hKea5SnslLdXFhmX92W2rzws2kxMy6PXGQLK0Fzkb15Czqt05MsDwTBldSqVJWxiwmRL6JQ+x6Bjk9PqabNm3W/m2b+e1/szbNvKotl2e0pycdqI/rYHWD3pPVdGB8m+48+CHdevjDqo9tUJ5IG2rSHgbuX7hxqf4MQGhLUar1F43WqwrZDRi/+o56iqWKstfrN2J8YYqq6KdPUVDijLBN8NwokYAqg07Z/BnLNGMm/VW4yvLf0Wvrzq2bdce2bbpj+07dufMGsFefveM39akP36WPvO8O3b7/sG675bDed+So9t10UPVGI/5L8M/mO1ju2xsSR0XE5ZtDNcwbkYBiVhxQj9tQhl8vi9acecrJQs6R7dWQ5ynqJN7airaj1Ht+KJOBYua9YqxP0lRdnvvcYmXFmeLK+Xnt2DGtabCLJGxsNrVhbEzbtmzRprGGxqsljddKzHKqjdUESFtr0raGtKspec9nzI378DjWY5gAM9cCORhWmU9j4Cl7KZF5zxq7QXJHkscg2xWIzq1HEQHAw8p6chG0lOb8Q1RSyvJq885ezpE5A2xvm0queHZ7VjcxQP/D5H+W4k+cuuSPGtf5z5uJquQ/YnAVcWhwMW8yBqIcg/nUNyM6Q+vAIGEQPAIlZNu0OQBbBCk05VKqKvu1UikpSTyL/ZPd7TyBQWk8SteshkFdkqZqs6ftt8XTZXWlTUiJVnmk8XpBT2LF9eEZJdcqgKFDkWNzP6PU/LUQ7biloF/ssc/FndiC+ma+QJpl/P1d1yQvQeP8Dd7wC0yaRZAedGEXlBslgjP1bDqgCBTHBRXJazLjXtrNJnu4VpHPBT/23Kaws48hzODDxICNUvCmo4hKboUONkoad24OrEB0iKXpeihJVC7lsVer0BoJqPDYShiE93bMMFGPtrPOdU6QedeFTB8FncTHMv8L5jkzweG3wmvw6tbtWl3t9c+WwmdBaWt/jtn+ChSyqWF9QQue4Q5LOuRg8BkzWVBUIZsWjD8+ZueXNDO7oFcvL+jipXkt8tbWxrsXbtF2SGEcACSeAuYxDXdDSgeHdu9Wg82+ykdWzjof56Vmy9atDL4T54Tbu+0aSruQX4dSFX2ZGrY3LbAmAVZGJ1iZRoDwpiQ+AmlxBlyeW9bFmUXNXF7UpblFzfNG1uItzjPCV23YBV+0vQpdsxJwPsXJXuFxKA5E9TJeirq6cHFG/rjxORAxDPw4NmNUZ77QmRYIPQMzNWDXlCsTMKimr+BGqXk7jr3JCGP54rXNM9srg3FEtsOO1mFraqC8QrZ+gCqP1EW++PwVN8c/Q/6MXcLv4sICf2Sov3oGtuv7QT08Z4LnRncRC+yQml+PKxJgA8YUDk0D9Mh4Q+dBpGzTFLflTKqxbBv1ilIGwBuxPLNOjGnR1nwB+3G960ZpXq6qUa1qy4Zxbdk8Gajw6dat1LXE3iIX4dvtoy0jNC1kx1XwoS/qTR0/1GNbj3S9opBtb1gepXUOq33btur9N+7VrTfcpL0792jnxh18ldVilvivgdRoLXBAWaNzkNYV1AMok9Fud1UtvuVb7KUeHtN6w3/t8bmLTxowlr4feLeB9CeGQIO/CkV1zXLtBODNwa3HRLWh26Zu1JFd79GOsb3aNr5POydvVqM8yYEl8T0yPAM8I5758EHkhTzUjfThQWficcoZs8rn7AIHbd6uxI+k/hsb075fGPsJn+avgkgM+iG95vCl9HXqogo//YwjhUNT4KfVWEWaLIOqNA4dh5YyDWeEMQ/bmjfCB07NxyDwZZqXK/rDj9+tP73jY/q92+/WZ4/cpQ9cf5sq5Sa//+ATO5oN/b0VnqbXLG+cAHpygAU8e967rFbt4DXUX1q7x6Tpcek63sFref9t0HbRhpHafsjjL+rQF7qCWu8Tn9UvHir9ww/7OkkdznrRDn20W0+LeqiTfc2RDyreMAEDuzefeQKixCqIAHFgeZR3YMTXX9LUD+tsiLxnUjq0VTq8RTq0WbLMR2LY28TtA9iuoVRSom9Tqt+wvPkE4NGBRocD3vIoPIPGcLYGdqEb8OvrhjIZsa81tkWba9FBG7cbBeZvOPDC4E0noGgQCUBwJwFulH7WYShrVwuK0TbEzNnOnrZ+1A+861CHLw/IvHXBI1CirXXmh4ChRL+4eUvlrScA9w7IM1fsbdPRmTNvXdgQme0tG9YZhc0otd6wrmhj2XyAkY/KQ7tBH4T2lstbTkDRA31GxokpaCHHbCNQYrYsO3jLhu0N6y2PUuuN0NPRKLXeCB23wqcppm+7vO0EFD16AA6imJliVkI3CHTIM4IhT11ha2oUdV4phuXQu51BG+sKuO8ijrdL33ECio6J7bVTGqWDM4g7VkgEvV5Po6iHUmLvu03w2EbdCLXefkxRvyvlXUtAEY0H4CA9c4ZXRjGbV+gZSdRDbWN7o9AFJQtuZ9h30U9B3yn9fwAAAP//z3BKlQAAAAZJREFUAwCTGiJuBZ4J/QAAAABJRU5ErkJggg==">
</head>
<body>
  <div id="app"></div>

  

  <div id="loading" class="screen">
    <noscript>Enable JavaScript</noscript>
    
    
    
  </div>

  <div id="error" class="screen" hidden>
    <h1>Error</h1>
    <details>
      <summary id="error-message"></summary>
      <p id="error-stack"></p>
    </details>
  </div>

  <script src="script.js"></script>
  <script>
    const appElement = document.getElementById('app');
    const launchScreen = document.getElementById('launch');
    const loadingScreen = document.getElementById('loading');
    const loadingInner = document.getElementById('loading-inner');
    const errorScreen = document.getElementById('error');
    const errorScreenMessage = document.getElementById('error-message');
    const errorScreenStack = document.getElementById('error-stack');

    const handleError = (error) => {
      console.error(error);
      if (!errorScreen.hidden) return;
      errorScreen.hidden = false;
      errorScreenMessage.textContent = '' + error;
      let debug = error && error.stack || 'no stack';
      debug += '\nUser agent: ' + navigator.userAgent;
      errorScreenStack.textContent = debug;
    };
    const setProgress = (progress) => {
      if (loadingInner) loadingInner.style.width = progress * 100 + '%';
    };
    const interpolate = (a, b, t) => a + t * (b - a);

    try {
      setProgress(0.1);

      const scaffolding = new Scaffolding.Scaffolding();
      scaffolding.width = 480;
      scaffolding.height = 360;
      scaffolding.resizeMode = "preserve-ratio";
      scaffolding.editableLists = false;
      scaffolding.usePackagedRuntime = true;
      scaffolding.setup();
      scaffolding.appendTo(appElement);

      const vm = scaffolding.vm;
      window.scaffolding = scaffolding;
      window.vm = scaffolding.vm;
      window.Scratch = {
        vm,
        renderer: vm.renderer,
        audioEngine: vm.runtime.audioEngine,
        bitmapAdapter: vm.runtime.v2BitmapAdapter,
        videoProvider: vm.runtime.ioDevices.video.provider
      };

      vm.runtime.isPackagedProject = true;
      scaffolding.setUsername("player####".replace(/#/g, () => Math.floor(Math.random() * 10)));
      scaffolding.setAccentColor("#00c3ff");

      try {
        scaffolding.addCloudProvider(new Scaffolding.Cloud.WebSocketProvider(["wss://clouddata.turbowarp.org","wss://clouddata.turbowarp.xyz"], "p4-@tpeerb.pmp"));
      } catch (error) {
        console.error(error);
      }

      vm.setTurboMode(false);
      if (vm.setInterpolation) vm.setInterpolation(false);
      if (vm.setFramerate) vm.setFramerate(30);
      if (vm.renderer.setUseHighQualityRender) vm.renderer.setUseHighQualityRender(false);
      if (vm.setRuntimeOptions) vm.setRuntimeOptions({
        fencing: false,
        miscLimits: false,
        maxClones: 9999999999,
        dangerousOptimizations: false
      });
      if (vm.setCompilerOptions) vm.setCompilerOptions({
        enabled: true,
        warpTimer: false
      });
      if (vm.renderer.setMaxTextureDimension) vm.renderer.setMaxTextureDimension(2048);

      if (typeof ScaffoldingAddons !== 'undefined') {
        ScaffoldingAddons.run(scaffolding, {"gamepad":false,"pointerlock":false,"specialCloudBehaviors":false,"unsafeCloudBehaviors":false,"pause":false});
      }

      scaffolding.setExtensionSecurityManager({
        getSandboxMode: () => 'unsandboxed',
        canLoadExtensionFromProject: () => true
      });
      for (const extension of ["data:application/javascript,%2F%2F%20Name%3A%20Lazy%20Collisions%0A%2F%2F%20ID%3A%20LZcollisionsSP%0A%2F%2F%20Description%3A%20Easy%20and%20Simple%20To%20Use%20Collision%20System%20for%20Sprites%0A%2F%2F%20By%3A%20SharkPool%2C%20food%0A%0A%2F%2F%20Version%20V.2.0.11%0A%0A(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20throw%20new%20Error(%22Lazy%20Collisions%20must%20run%20unsandboxed%22)%3B%0A%0A%20%20const%20menuIconURI%20%3D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDMuMjU1IiBoZWlnaHQ9IjE0My4yNTUiIHZpZXdCb3g9IjAgMCAxNDMuMjU1IDE0My4yNTUiPjxwYXRoIGQ9Ik0wIDcxLjYyOEMwIDMyLjA2OSAzMi4wNyAwIDcxLjYyOCAwczcxLjYyOCAzMi4wNyA3MS42MjggNzEuNjI4LTMyLjA3IDcxLjYyOC03MS42MjggNzEuNjI4UzAgMTExLjE4NiAwIDcxLjYyOCIgZmlsbD0iIzNlOGViMyIvPjxwYXRoIGQ9Ik03Ljk3OCA3MS42MjhjMC0zNS4xNTMgMjguNDk3LTYzLjY1IDYzLjY1LTYzLjY1czYzLjY1IDI4LjQ5NyA2My42NSA2My42NS0yOC40OTcgNjMuNjUtNjMuNjUgNjMuNjUtNjMuNjUtMjguNDk3LTYzLjY1LTYzLjY1IiBmaWxsPSIjNWNiMWQ2Ii8%2BPHBhdGggZD0iTTM1LjU2NCA4OC4wM2E0LjIyNCA0LjIyNCAwIDAgMS00LjIyNC00LjIyNFYzNy42NTRhNC4yMjQgNC4yMjQgMCAwIDEgNC4yMjQtNC4yMjVoNDYuMTUzYTQuMjI0IDQuMjI0IDAgMCAxIDQuMjI0IDQuMjI1djQ2LjE1MmE0LjIyNCA0LjIyNCAwIDAgMS00LjIyNCA0LjIyNHoiIGZpbGw9IiM1Y2IxZDYiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI1Ii8%2BPHBhdGggZD0iTTYxLjUzOSAxMDkuODI3YTQuMjI0IDQuMjI0IDAgMCAxLTQuMjI0LTQuMjI1VjU5LjQ1YTQuMjI0IDQuMjI0IDAgMCAxIDQuMjI0LTQuMjI0aDQ2LjE1M2E0LjIyNCA0LjIyNCAwIDAgMSA0LjIyNCA0LjIyNHY0Ni4xNTJhNC4yMjQgNC4yMjQgMCAwIDEtNC4yMjQgNC4yMjV6IiBmaWxsPSIjNWNiMWQ2IiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iNSIvPjxwYXRoIGQ9Ik02MS41MDggODguMjVhNC4yMjQgNC4yMjQgMCAwIDEtNC4yMjUtNC4yMjRWNTkuNDczYTQuMjI0IDQuMjI0IDAgMCAxIDQuMjI0LTQuMjI0SDgxLjg2YTQuMjI0IDQuMjI0IDAgMCAxIDQuMjI0IDQuMjI0djI0LjU1M2E0LjIyNCA0LjIyNCAwIDAgMS00LjIyNCA0LjIyNHoiIGZpbGw9IiM1MzlmYzEiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI1Ii8%2BPHBhdGggZD0iTTU0LjY1OCA4NS40OTl2LTUuMzg0aDM0LjA1MXYyLjU0M2MwIC45MjEtLjEyMyAyLjg0MS0uMzE0IDIuODQxeiIgZmlsbD0iIzUzOWZjMSIvPjxwYXRoIGQ9Ik01OS44MjIgNTIuNjM2aDQuN3YzOC4xNDFoLTQuN3ptMTguOTU2IDBoNC43djM4LjE0MWgtNC43em0tOS40NSAwaDQuN3YzOC4xNDFoLTQuN3oiIGZpbGw9IiM1MzlmYzEiLz48cGF0aCBkPSJNNTQuNjU4IDc0LjE5MnYtNS4zODVoMzQuMDUxdjUuMzg0em0wLTExLjA3N3YtMi42ODRjMC0uODk5LjA5Ni0yLjcwMS4zNzMtMi43MDFIODguNzF2NS4zODV6IiBmaWxsPSIjNTM5ZmMxIi8%2BPC9zdmc%2B%22%3B%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0A%0A%20%20let%20patched%20%3D%20false%3B%0A%20%20const%20patchGetTarget%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20const%20ogFunc%20%3D%20runtime.getSpriteTargetByName%3B%0A%20%20%20%20runtime.constructor.prototype.getSpriteTargetByName%20%3D%20function%20(spriteName)%20%7B%0A%20%20%20%20%20%20const%20value%20%3D%20ogFunc.call(this%2C%20spriteName)%3B%0A%20%20%20%20%20%20if%20(value)%20return%20value%3B%0A%20%20%20%20%20%20return%20runtime.getTargetById(spriteName)%3B%0A%20%20%20%20%7D%0A%20%20%20%20patched%20%3D%20true%3B%0A%20%20%7D%3B%0A%0A%20%20class%20LZcollisionsSP%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22LZcollisionsSP%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22Lazy%20Collisions%22%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%235cb1d6%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%23539fc1%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%234a8eab%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22isOnSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22is%20%5BSPRITE2%5D%20on%20%5BSIDE%5D%20of%20%5BSPRITE1%5D%20offset%20%5BOFFSET%5D%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SIDE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22POSITION2%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20OFFSET%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22isOnSpriteSide%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22is%20%5BSPRITE2%5D%20near%20the%20%5BSIDE%5D%20of%20%5BSPRITE1%5D%20offset%20%5BOFFSET%5D%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SIDE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22POSITION2%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20OFFSET%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22isSpriteLocation%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22is%20%5BSPRITE2%5D%20%5BSIDE%5D%20%5BSPRITE1%5D%20offset%20%5BOFFSET%5D%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SIDE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22POSITION3%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20OFFSET%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setOnSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22put%20%5BSPRITE2%5D%20on%20%5BSIDE%5D%20of%20%5BSPRITE1%5D%20offset%20%5BOFFSET%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SIDE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22POSITION%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20OFFSET%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Clone%20Target%20Finder%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22findID%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22ID%20of%20clone%20%5BINDEX%5D%20of%20%5BTARGET%5D%20with%20%5BVAR%5D%20set%20to%20%5BVAL%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAR%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22my%20variable%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAL%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INDEX%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%201%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20TARGETS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%22_getTargets%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20POSITION%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22top%22%2C%20%22bottom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22left%20side%22%2C%20%22right%20side%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22same%20top%20level%22%2C%20%22same%20bottom%20level%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22same%20left%20level%22%2C%20%22same%20right%20level%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20POSITION2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22top%22%2C%20%22bottom%22%2C%20%22left%20side%22%2C%20%22right%20side%22%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20POSITION3%3A%20%5B%22above%22%2C%20%22below%22%2C%20%22beside%20left%22%2C%20%22beside%20right%22%5D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Helpers%0A%20%20%20%20_getTargets()%20%7B%0A%20%20%20%20%20%20const%20spriteNames%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20spriteNames.push(%7B%20text%3A%20%22myself%22%2C%20value%3A%20%22_myself_%22%20%7D)%0A%20%20%20%20%20%20const%20targets%20%3D%20Scratch.vm.runtime.targets%3B%0A%20%20%20%20%20%20for%20(let%20index%20%3D%201%3B%20index%20%3C%20targets.length%3B%20index%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20targets%5Bindex%5D%3B%0A%20%20%20%20%20%20%20%20const%20targetName%20%3D%20target.getName()%3B%0A%20%20%20%20%20%20%20%20if%20(target.isOriginal)%20spriteNames.push(%7B%20text%3A%20targetName%2C%20value%3A%20targetName%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20spriteNames.length%20%3E%200%20%3F%20spriteNames%20%3A%20%5B%22%22%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getArgBounds(target1%2C%20target2%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20thisTarget%20%3D%20target2%20%3D%3D%3D%20%22_myself_%22%20%3F%20util.target%20%3A%20runtime.getSpriteTargetByName(target2)%3B%0A%20%20%20%20%20%20let%20target%20%3D%20target1%20%3D%3D%3D%20%22_myself_%22%20%3F%20util.target%20%3A%20runtime.getSpriteTargetByName(target1)%3B%0A%20%20%20%20%20%20if%20(!thisTarget)%20thisTarget%20%3D%20runtime.getTargetById(target2)%3B%0A%20%20%20%20%20%20if%20(!target)%20target%20%3D%20runtime.getTargetById(target1)%3B%0A%20%20%20%20%20%20if%20(!target%20%7C%7C%20!thisTarget)%20return%20undefined%3B%0A%20%20%20%20%20%20return%20%7B%20thisTarget%2C%20target%2C%20aabb%20%3A%20thisTarget.getBounds()%2C%20aabb2%20%3A%20target.getBounds()%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Block%20Funcs%0A%20%20%20%20isOnSprite(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20caller%20%3D%20this.getArgBounds(args.SPRITE1%2C%20args.SPRITE2%2C%20util)%3B%0A%20%20%20%20%20%20if%20(caller%20%3D%3D%3D%20undefined)%20return%20false%3B%0A%20%20%20%20%20%20const%20thisTarget%20%3D%20caller.thisTarget%3B%20const%20target%20%3D%20caller.target%3B%0A%20%20%20%20%20%20const%20aabb%20%3D%20caller.aabb%3B%20let%20aabb2%20%3D%20caller.aabb2%3B%0A%20%20%20%20%20%20aabb2%20%3D%20%7B%0A%20%20%20%20%20%20%20%20top%20%3A%20aabb2.top%20%2B%20(aabb.height%20%2F%202)%2C%20bottom%20%3A%20aabb2.bottom%20-%20(aabb.height%20%2F%202)%2C%0A%20%20%20%20%20%20%20%20left%20%3A%20aabb2.left%20-%20(aabb.width%20%2F%202)%2C%20right%20%3A%20aabb2.right%20%2B%20(aabb.width%20%2F%202)%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20const%20baseCheck%20%3D%20this.isOnSpriteSide(args%2C%20util)%3B%0A%20%20%20%20%20%20switch%20(args.SIDE)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22top%22%3A%0A%20%20%20%20%20%20%20%20case%20%22bottom%22%3A%20return%20baseCheck%20%26%26%20aabb2.left%20%3C%20thisTarget.x%20%26%26%20thisTarget.x%20%3C%20aabb2.right%3B%0A%20%20%20%20%20%20%20%20case%20%22left%20side%22%3A%0A%20%20%20%20%20%20%20%20case%20%22right%20side%22%3A%20return%20baseCheck%20%26%26%20aabb2.bottom%20%3C%20thisTarget.y%20%26%26%20thisTarget.y%20%3C%20aabb2.top%3B%0A%20%20%20%20%20%20%20%20default%3A%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20isOnSpriteSide(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20offset%20%3D%20Scratch.Cast.toNumber(args.OFFSET)%3B%0A%20%20%20%20%20%20const%20caller%20%3D%20this.getArgBounds(args.SPRITE1%2C%20args.SPRITE2%2C%20util)%3B%0A%20%20%20%20%20%20if%20(caller%20%3D%3D%3D%20undefined)%20return%20false%3B%0A%20%20%20%20%20%20const%20thisTarget%20%3D%20caller.thisTarget%3B%20const%20target%20%3D%20caller.target%3B%0A%20%20%20%20%20%20const%20aabb%20%3D%20caller.aabb%3B%20let%20aabb2%20%3D%20caller.aabb2%3B%0A%20%20%20%20%20%20aabb2%20%3D%20%7B%0A%20%20%20%20%20%20%20%20top%20%3A%20aabb2.top%20%2B%20(aabb.height%20%2F%202)%2C%20bottom%20%3A%20aabb2.bottom%20-%20(aabb.height%20%2F%202)%2C%0A%20%20%20%20%20%20%20%20left%20%3A%20aabb2.left%20-%20(aabb.width%20%2F%202)%2C%20right%20%3A%20aabb2.right%20%2B%20(aabb.width%20%2F%202)%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20switch%20(args.SIDE)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22top%22%3A%20return%20Math.round(thisTarget.y%20%2B%20offset)%20%3D%3D%3D%20Math.round(aabb2.top)%3B%0A%20%20%20%20%20%20%20%20case%20%22bottom%22%3A%20return%20Math.round(thisTarget.y%20-%20offset)%20%3D%3D%3D%20Math.round(aabb2.bottom)%3B%0A%20%20%20%20%20%20%20%20case%20%22left%20side%22%3A%20return%20Math.round(thisTarget.x%20-%20offset)%20%3D%3D%3D%20Math.round(aabb2.left)%3B%0A%20%20%20%20%20%20%20%20case%20%22right%20side%22%3A%20return%20Math.round(thisTarget.x%20%2B%20offset)%20%3D%3D%3D%20Math.round(aabb2.right)%3B%0A%20%20%20%20%20%20%20%20default%3A%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20isSpriteLocation(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20offset%20%3D%20Scratch.Cast.toNumber(args.OFFSET)%3B%0A%20%20%20%20%20%20const%20caller%20%3D%20this.getArgBounds(args.SPRITE2%2C%20args.SPRITE1%2C%20util)%3B%0A%20%20%20%20%20%20if%20(caller%20%3D%3D%3D%20undefined)%20return%20false%3B%0A%20%20%20%20%20%20const%20aabb%20%3D%20caller.aabb%3B%0A%20%20%20%20%20%20const%20aabb2%20%3D%20caller.aabb2%3B%0A%20%20%20%20%20%20switch%20(args.SIDE)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22above%22%3A%20return%20aabb2.bottom%20%2B%20offset%20%3E%20aabb.top%3B%0A%20%20%20%20%20%20%20%20case%20%22below%22%3A%20return%20aabb.bottom%20%3E%20aabb2.top%20-%20offset%3B%0A%20%20%20%20%20%20%20%20case%20%22beside%20left%22%3A%20return%20aabb.left%20%3E%20aabb2.right%20-%20offset%3B%0A%20%20%20%20%20%20%20%20case%20%22beside%20right%22%3A%20return%20aabb2.left%20%2B%20offset%20%3E%20aabb.right%3B%0A%20%20%20%20%20%20%20%20default%3A%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setOnSprite(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20offset%20%3D%20Scratch.Cast.toNumber(args.OFFSET)%3B%0A%20%20%20%20%20%20const%20caller%20%3D%20this.getArgBounds(args.SPRITE1%2C%20args.SPRITE2%2C%20util)%3B%0A%20%20%20%20%20%20if%20(caller%20%3D%3D%3D%20undefined)%20return%3B%0A%20%20%20%20%20%20const%20thisTarget%20%3D%20caller.thisTarget%3B%20const%20target%20%3D%20caller.target%3B%0A%20%20%20%20%20%20const%20aabb%20%3D%20caller.aabb%3B%20let%20aabb2%20%3D%20caller.aabb2%3B%0A%20%20%20%20%20%20let%20x%20%3D%20aabb2.left%20%2B%20(aabb2.width%20%2F%202)%3B%20let%20y%20%3D%20aabb2.top%20-%20(aabb2.height%20%2F%202)%3B%0A%20%20%20%20%20%20aabb2%20%3D%20%7B%0A%20%20%20%20%20%20%20%20top%20%3A%20aabb2.top%20%2B%20(aabb.height%20%2F%202)%2C%20bottom%20%3A%20aabb2.bottom%20-%20(aabb.height%20%2F%202)%2C%0A%20%20%20%20%20%20%20%20left%20%3A%20aabb2.left%20-%20(aabb.width%20%2F%202)%2C%20right%20%3A%20aabb2.right%20%2B%20(aabb.width%20%2F%202)%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20switch%20(args.SIDE)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22top%22%3A%20return%20thisTarget.setXY(x%2C%20aabb2.top%20%2B%20offset)%3B%0A%20%20%20%20%20%20%20%20case%20%22bottom%22%3A%20return%20thisTarget.setXY(x%2C%20aabb2.bottom%20-%20offset)%3B%0A%20%20%20%20%20%20%20%20case%20%22left%20side%22%3A%20return%20thisTarget.setXY(aabb2.left%20-%20offset%2C%20y)%3B%0A%20%20%20%20%20%20%20%20case%20%22right%20side%22%3A%20return%20thisTarget.setXY(aabb2.right%20%2B%20offset%2C%20y)%3B%0A%20%20%20%20%20%20%20%20case%20%22same%20top%20level%22%3A%20return%20thisTarget.setXY(thisTarget.x%2C%20aabb2.top%20%2B%20offset)%3B%0A%20%20%20%20%20%20%20%20case%20%22same%20bottom%20level%22%3A%20return%20thisTarget.setXY(thisTarget.x%2C%20aabb2.bottom%20-%20offset)%3B%0A%20%20%20%20%20%20%20%20case%20%22same%20left%20level%22%3A%20return%20thisTarget.setXY(aabb2.left%20-%20offset%2C%20thisTarget.y)%3B%0A%20%20%20%20%20%20%20%20case%20%22same%20right%20level%22%3A%20return%20thisTarget.setXY(aabb2.right%20%2B%20offset%2C%20thisTarget.y)%3B%0A%20%20%20%20%20%20%20%20default%3A%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20findID(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(!patched)%20patchGetTarget()%3B%0A%20%20%20%20%20%20const%20target%20%3D%20args.TARGET%20%3D%3D%3D%20%22_myself_%22%20%3F%20util.target%20%3A%20runtime.getSpriteTargetByName(args.TARGET)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%20%22%22%3B%0A%20%20%20%20%20%20const%20clones%20%3D%20target.sprite.clones%3B%0A%20%20%20%20%20%20let%20newTarget%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20clones.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20if%20(clones%5Bi%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20variable%20%3D%20clones%5Bi%5D.lookupVariableByNameAndType(args.VAR%2C%20%22%22%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20value%20%3D%20Scratch.Cast.toString(args.VAL)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(variable%20%26%26%20Scratch.Cast.toString(variable.value)%20%3D%3D%3D%20value)%20newTarget.push(clones%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20newTarget%5BScratch.Cast.toNumber(args.INDEX)%20-%201%5D%3F.id%20%3F%3F%20%22%22%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20LZcollisionsSP())%3B%0A%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Project%20Interfaces%0A%2F%2F%20ID%3A%20lordcatprojectinterfaces%0A%2F%2F%20Description%3A%20Easily%20create%20more%20interactive%20projects!%0A%2F%2F%20By%3A%20LordCat0%0A%2F%2F%20Licence%3A%20MIT%0A(function(Scratch)%7B%0A%20%20%20%20if(!Scratch.extensions.unsandboxed)%7Balert(%22This%20extension%20must%20run%20unsandboxed!%22)%3B%20return%7D%0A%20%20%20%20const%20lookup%20%3D%20%7BLabel%3A%20%22span%22%2C%20Video%3A%20%22video%22%2C%20Image%3A%20%22img%22%2C%20Input%3A%20%22input%22%2C%20Box%3A%20%22div%22%2C%20Button%3A%20%22button%22%7D%0A%20%20%20%20const%20extIcon%20%3D%20'data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB3aWR0aD0iOTMxIiBoZWlnaHQ9IjkzMSIgdmlld0JveD0iMCAwIDkzMSA5MzEiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI%2BCjxjaXJjbGUgY3g9IjQ2NS41IiBjeT0iNDY1LjUiIHI9IjQ0MyIgZmlsbD0iIzcwN0VGRiIgc3Ryb2tlPSIjNjA2REU0IiBzdHJva2Utd2lkdGg9IjQ1Ii8%2BCjxwYXRoIGQ9Ik0zMSAzOTZDMzEgMzgyLjE5MyA0Mi4xOTI5IDM3MSA1NiAzNzFINTEyQzUyNS44MDcgMzcxIDUzNyAzODIuMTkzIDUzNyAzOTZWNTM2QzUzNyA1NDkuODA3IDUyNS44MDcgNTYxIDUxMiA1NjFINTZDNDIuMTkyOSA1NjEgMzEgNTQ5LjgwNyAzMSA1MzZWMzk2WiIgZmlsbD0iIzYwNkRFNCIvPgo8cGF0aCBkPSJNMjYwIDY3N0MyNjAgNjYzLjE5MyAyNzEuMTkzIDY1MiAyODUgNjUySDgxOS45NTJDODM5LjE0IDY1MiA4NTEuMTc1IDY3Mi43MjMgODQxLjY2NiA2ODkuMzlMNzczLjE5NSA4MDkuMzlDNzY4Ljc0NiA4MTcuMTg3IDc2MC40NTggODIyIDc1MS40ODEgODIySDI4NUMyNzEuMTkzIDgyMiAyNjAgODEwLjgwNyAyNjAgNzk3VjY3N1oiIGZpbGw9IiM2MDZERTQiLz4KPHBhdGggZD0iTTI4MSAyNzVDMjgxIDI4OC44MDcgMjkyLjE5MyAzMDAgMzA2IDMwMEg4NDAuOTUyQzg2MC4xNCAzMDAgODcyLjE3NSAyNzkuMjc3IDg2Mi42NjYgMjYyLjYxTDc5NC4xOTUgMTQyLjYxQzc4OS43NDYgMTM0LjgxMyA3ODEuNDU4IDEzMCA3NzIuNDgxIDEzMEgzMDZDMjkyLjE5MyAxMzAgMjgxIDE0MS4xOTMgMjgxIDE1NVYyNzVaIiBmaWxsPSIjNjA2REU0Ii8%2BCjxyZWN0IHg9IjE4NyIgeT0iMjAyIiB3aWR0aD0iNTQ5IiBoZWlnaHQ9IjI5NSIgcng9IjQ2IiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjQyIi8%2BCjxyZWN0IHg9IjE4NyIgeT0iNTY2IiB3aWR0aD0iMTc5IiBoZWlnaHQ9IjE2NCIgcng9IjQ2IiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjQyIi8%2BCjxyZWN0IHg9IjQzMSIgeT0iNTY2IiB3aWR0aD0iMzE0IiBoZWlnaHQ9IjE2NCIgcng9IjQ2IiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjQyIi8%2BCjwvc3ZnPgo%3D'%0A%20%20%20%20const%20textIcon%20%3D%20'data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAZQTFRFAAAA%2F%2F%2F%2Fpdmf3QAAAAJ0Uk5TAP9bkSK1AAADbElEQVR4nO3dQW7bMBCFYbkp0O7aG0S7HKMFcrDEN0tuEt0g2TVAHVeQ6THJkYaiJw6D4tfGBi18kjgkTW%2F8Nl1%2BXP09vL5%2Bjxqvnw6vj7%2Fz0zcK%2BPHcqZOPaPfyswz8eghvdl%2Bl7e5ety0Ce3kntyA3MHO%2BbniTt9ILxx4Yj%2B19lx4KiK4mH8oTzPSiAr79Ob0PZ8fm0JcAKUInfT7TZADR8x77XOrSZaOjCIRP91FLGYgvd%2BiEuAv0QLCB6YnjLlgBRCULN5w81P5LFTCdrltMYK8%2B1i0VwNiLSR9WA0OfDM16YCxDUoRqYKxaUtdqYOz0pAjVwPi5aqgDttu3tKEWeLxNq1gNDDdpFauBl%2Bu0itXA682TD9jdPviAfb6OF4Fs3Ci%2Fbj1oAmRzJz8qF9VzgGQJ1Uf5eyFbP%2FKj%2FNWWrWD5MfQXB7JFOD%2FK%2B4N8LJfO14A5ktQ4mgHMOqoqzgBmLw59GTA7QZ8%2BA8zeiL50CUgnhd6hloHkFhZvwACSvlg%2BzQCiZ1h%2BAguI5qXe5a8Bolmhf2esAaJ9u9qjrwJOs0LPgHXA3G%2BXKkCmlZ5C6wApg1EEE5AyGEW4LCB1NKpoAjIbzKtYQBgI1jCwgTAQrGFgA2EgWMPgwkAYSdY4ujAQlsWhPxcIQ9EaiB8DWCPZBsJkaAiE2WRf5JMD03w2Z%2FP%2FD0xLkrkgAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8NqD9v1y3B9r%2F27kXaP%2Bf8%2B6%2FzW%2F%2Fz%2F%2Fu8IL2%2BQvtMyimBamwJJmAO8jDGyXiDjNpn8fijpRxh9qEYWAPBAvwBvu4o4Xc4UbueCXpQ7MXDcAbMeUOuYqewHqGRcAR9OWNGnOHnbnj1tyBb97IOXfoXfvcPnf0oDv8MJkC%2BlCT4v2B9hmWbsAdBPreUaTuMFR3HKs7ENYdSesOxfXG8rqDgXfeaGJ3OPLgjWd2B0Rv8pYPCMl2x3QnVTsnKDwBzokqd4elF%2BLay99M7sB4d2R9dLaULCpteX8Q7dGlw6J%2BUft2a4sjVzvd1Zo90tzvFOO3iwakz6PHlVvQ%2B%2F6ZrWfohGTIHHtB%2F3T5Bx4eQT0z7Oa2AAAAAElFTkSuQmCC'%0A%20%20%20%20const%20imageIcon%20%3D%20'data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAAXNSR0IB2cksfwAAAAlwSFlzAAANsAAADbABfWVZ%2BgAAAAZQTFRFAAAA%2F%2F%2F%2Fpdmf3QAAAAJ0Uk5TAP9bkSK1AAAG4ElEQVR4nO2dXXLkNBDHx7MBQhXFhguw5iJsuAlH4BGqKDJZqII3uAHcZBNOsuYEG4oHAkyM9emWutWW1BSzm2rtPjnyz4r7L1nd6baHnbANClCAAhSgAAUoQAEKUIACFKCAxw548k%2FnybeXDjBLLr%2F8f%2B%2FPbsA0GsDzm27A8cwA%2Bn8D8wss%2Fx4EgOvDILkF5iYMu6evBYC7i2H37JUAcH8%2BSIxgzDDsrg4CwLwfRFZc7DiIrLjYceieSa7dDiIZLEKQA0Q6WpQ0iHS0KEkOEAlxkeIbABBNhWUyvAEA2WRcpqMCFBAA14e%2Bcx8UoAAFKEABClCAAhSgANfm3d2FBGA87Rh%2B6wEYJ9FE0HoB9pT7836AjRXM%2B36A89RD9w6A85PDTegAOOciGLId4CM%2B4S62A3y8JdzFdkCItwy9gBAu8f3bASFY4c3QDgihgmnsBAQX0duxGRDjdt6O%2Fz8gBv6OZ32AGLfzSmoGrHG74USANW7nThAAnBSbAWvYTQyYxi7AGjUTA9xkaAas4ZYTAUAQ3c2mtw8AwvhuPiugHQD%2BEuHWtEcNGP4%2BkwGe38S9YB9gXveCXYDF4HEv2AUwDxDivtYDzPpP3IR6gFm%2Bp1EAMKvv6hV0AMwhwgzVAHv8iKVUDbDTlrBjNcB1xHkFYD3gAW4fwQL4BSX1KroBWEnVALcNmMZugHuKYyVVP5lm0KcH4PthJdUC%2FK9KSLFyf5A5Rt0AQkmVgLChxUqq3KWF%2FShWUiUgbCddpx3xk42dauZZtQMyzwq0ut167hg1A3LHCLQ6hyMCsJLqfKZ15UNKqgPk4wStzu3L7xRodY5nbmzYqnznXK%2BwVXnv%2BZSDrSp%2BsALKSuIiGGjdgq0mhoLWbthqojjoCQpbtlySAJhZU1rU2EgWTIwpLWrTyABgWgpWUkU0jwekT34SALNKwlDXZu9itA4JmEF3YqeWbOAoANARuVMzNyH2pgBJihfxeFzOWbEUIMnQonbcT1%2Bv6qAASYYWBciGwwO2UkgpQJqhteFLUYA0P4pyfDYAaXbSNDYD5qQHoaQNQKKjHkCWKkj5bk0AQoobgCxVcENJBCBPFeSVRADyTD9eSQQgz7PjlUQA8iy3ZsCcdZlGIYBXEgZkQtxSEgagnFVeSRiAUk55JWEASjltBeCMUVaKGIDzNVkpYgDOlmSVVAOYxiZArqMNJSEA0lErgMh9ZqWIAETqMitFBCBSl1klIQCVecwpqQrAKQkBqMThJgCVtstJEQGwjngp5gBCR7yScgCZQ88pKQeQKfCckv5zAJlDz0kxB9Ap8IwUcwCdgM4oKQfQ6d9ISVdflfIPKB1hJS3GLvgLpI4wYLlT4VAdIJficqcKTlehmCOX4lx0%2Bwq1GJmSzEkFx7NQi5EpyY6Tdn1LpRSpkuw4aee7VMiQAuw4p5EClMoIiIgtHcEoAVIp2nHSMRRaiLmS7GXIKE5BR7mS7GXIOFKxKChRkr8MFQor1vQkSvKXoYJxxZqeBOAvQ8UTiyU5iRT9ZaaxAZAoyfeiorrlihoiUEYF58v1LFBJvhf1F46SjlIlhV4DAhR1lABir3UNCwCmuAxIMfayv1YCYGrDgBRjLzuqBMDUhgElxV52VLUAoKQoFjuqBMDVhq1KimKxo0oAXGXWCohisaNKAFxdFBVeiEtIAJR1lKcDrscggNERUBIQizkGAWyRYlQSEIs5Vg2ISgK2NscggC1SjABga2NHCGCLFKMUga2NHSGArTGMUoS2HlIAX%2BEXlARtHZYAD%2BDr6yinbBECBHA6ikpKTLXYsRmQmGoxDQBcc0KMUkxMZYqtV8C3fLWsl2JiqsU0APA9X%2BzqlZSaaoCAH%2FliV6%2Bk1FR%2BBjrAz6%2FQSbB5JaV3%2BvYSAF7eoJMwIJvy01gPcFLMZuzdBQDMBx5AbWXvzwHgij%2FfKSmbsfN%2BBbz4ZgMwjTu8gxhWwHdfbwCskvIZ6%2FRrAT98WQNAscLPIuCnLzYAVoooVvhJPSCugMmwPoqAXz7fABgloYX7%2Fv0IuLncAJAvaji%2BEwHbjdoAzE%2FaAHjh3jcAFinihfvXT%2BsB00hsAH77uB6wKAl3%2FP3DeoCfemn76916wPGMeH4%2F7OsB8770%2FK4GlJ7flYBd8R0BtYDislkLuH15kAGmZ4Uf1AKsaCSAPz4QAopNAQpQgAIUoAAFKEABClCAAhSgAAUoQAEKUIACFKAABSjgLQSc%2Fv3KYsDp33ItBpz%2BXePi16Wf%2Fo3v4pfWsxlp2%2B1a%2FuJ%2B%2BacDxB8vEH8%2BQfwBB%2FEnJER2NB%2BxEH9GQ%2F4hD%2FGnRMQfM%2Bm%2FjTZVtPvq6yAUoAAFKEABClCAAhSgAAUoQAGPF%2FAvmke%2BioossUIAAAAASUVORK5CYII%3D'%0A%20%20%20%20const%20videoIcon%20%3D%20'data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAZQTFRFAAAA%2F%2F%2F%2Fpdmf3QAAAAJ0Uk5TAP9bkSK1AAAKYUlEQVR4nO3dwXLeNBAAYDuFaW7tkVv9Bly5NY8Cj8CNC5M%2FNx6DN6G58RLMVDcuDM2JZGjzI2lX0u5KlnftpMN05AOkqf8v9npXliVHnaeD2zyAAQxgAAMYwAAGMIABPC8wPyo%2FcnNqA9enSbedL5rAy3vl56fJLS3gzXs18HDZAs7qz%2FPIp69ffDQAt1c18OqDAbh7XQNv3xmAT1%2FVgCUELAj4pTqLYCO5hIAhC8LmFgmYYsiiiIAhjcJGUgkB00VglwEBdSXBRuoJAdtVZK0A%2FNd2Fel1BMBUCWEr1QCAMQ1oIgBgTAOaCAAY04AmAgDGNKCJ8ESAMY9oJgFgzSOSSU8DmBORpGIEzIlIUvFpAHMmk1x%2BGsBcCqQYngaAWoK49FKCRDxXUwEwvTcBKJwGgAe1DcQT5kA08cpuA%2FEccjkWAJNzG4iJ3wAUDTzZhQOhOUgVrgDo7gVIpAIIB1wDKawKIFy0GkippQDCdeRA%2BJARyE1SBtyiBmLxVkBqIRRAzKT%2FIZCaWQUQc3kAzwFouu10nwEMYAADGMAABvDlA9ZtAAMYwAAGMIABfPnAZ%2B6huG%2FvDgFyqswMuOUgMIvvWYGPcs7VCnyQs75W4P1yEDidDgLV9wbwTMD563r2ygTcva4nIU3AzamePDIBc2MGzgL4JqOeRLQAYb6imki1AGG6oZpMtgBuaUwCFuDtb9UMhwDCYH8VxQz48KRx6DUg%2Fr3Mygz4YwuHuAnIVMqAj06aFVoD4h9lKmXAy2mapwvIKGYgXGAMwgoAvkylDISdcE6lC8hUyjfUAOPEVB8QUUz70BnHFQD%2FVkSRAfinPiBSKe0DwYUo9gGRShxwiwLgUUz7wJlBKm0AvCDTPvBd2GcD4KnEAfjjBsBTKe2DVzdGcQPgURRAzMUtgKVS2gdD6xYFwFKp0extAiyVGg3vJsCiOPPvqQCWSgKIO20CNJVmflo6gEZRALHmNwEaRdwnpacOoKk0i4OaVQBJpX0AiaKIgRIgBVn3ITQASSVRC0qApJJoD7RAiSJvE6FBUAAllXizrgZKKrFbm%2F4USirRu7MFyFHMAJ6VFsipRHsoFiCnEu0jWQCWuvSstABLXXJWynKeSioVIEZRD6RUKkA8Kw7wjQOkIN1Sfg5vE3sAKcgEhLPizXoPIAXp74ff%2FzpBFA1AaZU88NMvE5wVv7V1gVKQvgAfL%2FCsDECJogdg%2BMGflVvUAK3o%2BTH2C3wUDUC%2BDP7Sz4%2Fx0P1Z8Q5GFyiPoxf%2BaOJf%2BoPiXZw%2BkK6j%2F%2F7L%2BzNG0QKkaogAfPL6xHtpOsDnjj95t0whNyxAyiQAYgq%2B%2FOdiB%2BAvgP8SovivBUip6A8%2BWPFTH3lXVw2EcMQM%2BO73HYD%2FZLii3pmmy%2Fv9gHz1fhsgt9Ows3xzXg%2FMuLN48d0CQF2JF9%2FVQCzG8IV4b90CQNMg3hpXA1BL%2BXNHAP7OtjoPoJbC5pZdgI9doXYCWJf1a6Z9AD%2FmlupOvRtIqWQDsJbCllLJ1iYSYGMUp92sz%2BSHbYzibAMbozjtO9NM%2Bxr9UZz2vXGmt1kTgB9jgOkUSgmynoIeKJ3rAszkf5tA6d4H6s9vzEB5wAjATBtmFZCu3TzBnTEcUB5l0QCkUfeffbgMlWECyGOeB%2B5eh%2FMw1QJ50Iy9u3BEJoA8L2SgKmflE8s55HD4hgWgj%2FsZcIseyM%2B%2BcGe8OQWgatIUz414Y4OJAwNA%2B7kF2Bgap0CuH7ixIWMA8tOGv%2FQFqO4L60COIdwZ83GogdyM5l6mDSiNGAD5OLRAaYPcArVkBMoTWwbI9IICYM%2BM8KgVGwUtQJ5a%2FaXPAP%2BFqB5ARvOgm5qPQwmQ8USoJSvABvOgGPE4lEDpO5QctgAkhhnA49ABZOyhWYybABmObBbjJkBi2CzGTYD0v3IOWwA6KNwsxi2ADks7UktqgA6M%2B0tfF%2BMWQIfmaTE2HnmaAJscgBy2AWySp1mMG4CYIGkU4xrQmu3LwLn53NgEaDcec%2Fj2ChkNwGZo%2FFkVoPHoywH4I4shPvJB7yDXUh9gU3X4yOcWHYAjPS2A1dIqEKPEHoXwkS928pQAnzClAJ1%2BWAHcIqds3YLjoKwYV4GQ7HzSGIoResqtMRQB1G9ApEe%2B0FeXCyg0gDxWkTccf8nHtwH4P4upewq4ZRu4vRKvYMzkkDTAwyUPATsnspbHKsBevJqmMv6iBsSGxQibXEhDCdBHvpk8Q%2BiAMv7yBECIxycJbG1l%2FGUn4JYChHg87ABor9sOkOGTGI%2FqDUkLEOLhrIAoxmOA8%2FG4tQKiGM2ALMbrGzvAaskMsFrKMzV7gRAPKyCL8RAQ42EFZDGaASeK8X4HwIrRDMhi%2FHAEiPGwArIYzcA88WJ8Zwd4MVqBqhhPdoAV43kyAlUxHgJiPIxAVYxWoMxMpHjYAVpLdsCRWoJ4HAAgHkagKsYa6HcwqmK0AlUxWoGqGO0AqyUzIHuZPh4HAIiHDaiL8QgA8bABdTEagboY7QC%2FsVkBVxXjAQDjYQPqYjQCMBgKG8bDDIhiNALVje0IgPEwAY1iPABgPExAoxhtAAxClk%2FsAWgt2QHRyzwGhOETM%2BB4MR4DwuCKGRDFaAdEMe4C2PiLGZDjL4eAMHzSBDoLLMliNK%2FQJIvRDMhiNAOyGPcArBjNgCzGNtBZbEwWo3m1MieK0QzgYGjcQi21V2zzP6YDsFpqA51F5%2BRgaL1q3cayd7IY20Bn4T3RTV1ZeC%2BNNbeBHMQQ6%2FbSf%2BuLD4a%2FyZkYgHrxwf7yh2HfXAshYcMufNq4vwBj2Dc3KKmWGsDqEpBxX%2FIeR2MJyP4ilHFfjGKOh2UZzLgvRjEA8WAawOpCnHFfbNPy6DIH%2BkuBwrmdEwAXxLKWKOwLUcyNEwf6y6HCvnCaudvuFj0A%2B%2BYjB4kD%2FSVhYV9IJZcaJ8uasvjDzh2gvywuAildIZp85rv%2F9I1ADF4GUoumAfBo43nmxkkA3cWJ0zt0cDuB05WLE3eXR769muMPgC42AGLiegt48ccyxVRae1O2%2Fq1eAfyF78pnQC4R3S2Gm9OLB3xXvq4lBLq5HF6hwvtP7im4hQPdVAwA%2FsJALka5UHc3FQMQf%2BKb97mW5FLh3UwKALwrf5%2BBnEfpq14m3ZzyLww4rKV6ufReIgQA72A%2FICDnXPuJEAGI4s2VaJMz0EuECMCvXfyI3fZ60fpeIkQAfmHg51NuVwTQu44RyK9kPsK3JNC7jhHIr6U%2B0k%2BRLzuXAQA8an5nJUAnigBg4CPQ%2BucTOtUA7yPS90Ja%2F4BDJwgA0MInIShfr6cSAvBj6RumHFjPBATKLdItLWC9nhCAnwsNYxNYzSUE4HMeWPunRDobXCL%2BwR0AvXi7AJo%2BuwD5KroZaO9rAZpRtABuOQg0o%2FhZAbccBA4H8ehl5FW4A2DtyB7ALQeBw9XY3lUPtIvRALSbAwPgloNAu0nUA%2B00MgDtNDIAbjkA8DcSdwJrO2qBlTRSAr7zsJJGWuD61K4kNVAm%2B3cCr%2F5eSSMtAA9NB4DONoABDGAAAxjAAAYwgAE8C%2FAfD5f7ahCSZfsAAAAASUVORK5CYII%3D'%0A%20%20%20%20const%20buttonicon%20%3D%20'data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAZQTFRFAAAA%2F%2F%2F%2Fpdmf3QAAAAJ0Uk5TAP9bkSK1AAABP0lEQVR4nNXUv06DQBwH8N8BCbdxo4uBxNnEzaUVEp%2FDd7C7SUvi7iv4CuyaevV2527tpgNpOzTWBIrHcdyfhDLUaCKBHJ%2BF3%2B%2B%2Bxx0CALRfRiAuxB9%2F94W1wkXlaMUvYpAaTyCdKFUoTpNWqHRCGrVyt9j%2FIEo54Xcrfx6hT9ytIEug8JRGU3p3rzVOC1P06S%2BVxXSgOvPn4ewSd8vNA3ZOuoVWATtVKcE6YKVKEG4f2LNO9%2BKNDXXyZPV6pQUVTY6UngPXbOgYYgO8waa2niGS9%2BmMRoauM%2FKrerwxBaXW%2BwlU6aiVmNzmZ0J7U%2F7OVLA2FS5M8Z1zUHwfHVRT%2FL%2Bpb0Z9SdiZ2bLTtWWvg1sILSNzxTol2%2BabQqhplJ9pQk1rtpD8y0Vr9ckoJMqXnpQoz1uRR2XVlJOqP1O%2FfQP8FOtlz7%2FhIQAAAABJRU5ErkJggg%3D%3D'%0A%20%20%20%20const%20inputIcon%20%3D%20'data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAQMAAADOtka5AAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAZQTFRFAAAA%2F%2F%2F%2Fpdmf3QAAAAJ0Uk5TAP9bkSK1AAAFbElEQVR4nO3az24jRRAGcDte5JU4BIkrUizxEpxIEAeOPAIvguSs4LVWa%2FbEK%2BwtlniAcAtSsJnpP9VV3RX7KxIktPv1IXJmyj%2FH01%2FGM9VeLp45lgQIECBAgAABAgQIECBAgACBTxu43k0%2F%2Fn5FgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQ%2BceCb3wfgqz8iwM%2B%2FDsC37yPA4WIAtm8CwPKwHIDjm1scWD3magUsD7%2Fd4MD6IVcrYPW43%2BDA5X2uVsD64c8vcODqLlcr4PL%2Br9c4cL3L1Qq4uvMD5QPb21ytgOvd8QIHjotcrYDtrV%2FrbzyUHQo4LhZuEFxg9ViqGzCbbhBcYP1Qqhswm%2FsNClzel%2BoGzKYbBBe4uivVDZhNNwguMD8vVTdgNt0guMA0Zbm6AfMjNwgucFyU6gbMplvsbjvUPQ2YTTcIHjBPWa4WIJteEDxgnrJcLUA29xsMmKcsVwuQTS8IHjBPWa4WIJteEDwgPS1VC5BNLwgekKYsVQuQTS8IHnBc1GoBsulVe5sOskuAbHpBcIA8Zam6AtV0guAAecpSdQWqud9EgKm6AmoTANSXm4JQgRwD9C3UNzwFoQI5BuhBrId8emIFcgzQaayTPgWhAm0LBLTXq0D7myCgveMCqKMCAe2YF0DNCwS0WS%2FAiRicOKXNL1iAEzE4cVKd33IBTsSgAUf1N8pBL4CNQX5D9YkuINNeABsDAJBXLICNAQDIe36XgM9sDABAjvo2AWsbAwCQef8pAZ%2FbGACABOHHBHxpYwAAEoQfEvD1Xf61xAAAJAjf7%2BRnq0WAOvHfJeCX8tsFDtQg3CRgVf6eVzhQg7C7Wcjdi5wNEKAGwYx6NkCAGgQz7M7TQA2CGfVsgAA1CGbUswEC1CCYUUshoARBD%2FlQgIAaBDXkQwECahDUkA8FCHCCIB8KEOAEodt3BnCCIB8KEOAEQT4UIMAJglRiwBCEdm2AAUMQ2rUBBgxBaNcGGDAEoV0bYMAQhH7XOWAIQrs2wIAhCO3aAAOGILQrERDogqAuEUGgC4K6RASBLgjqEhEEuiCoS0QQ6IIw7DkLdEFQl4gg0AVBXSKCQBcEdUGKAiYI%2Bk4BBUwQ9J0CCpgg6DsFFDBB0HcKKGCCMO44D5gg6DsFFDBB0HcKKGCCoO9LYEAFwdwwwoAKgrlhhAEVBHPDCAMqCOaGEQZUEJztAKCCYG4YYUAFwdwwwoAKgrk9xQEJgu0b4IAEwfYNcECCYPsGOCBBsH0DHJAgeJsRQIJg%2BwY4IEGwfQMckCCYGEQAv30UAEoQuvZRAChB6NpHAaAEoWsfBYASBHcrBJQgdO2jAFCC0LWPAkAJgo1BCEhB6LuIEcBdc40AKQh9FzECpCD0XcQIkGrdjSCQgtB3ESNACkLfRYwAaWsXgxgwBWFoJoeAKQhDMzkETEEYmskhYArC0EwOAVOxtw0HpiAMzeQQMAVhaCaHgGlzH4MgsN0Oawox4PrtsKYQA64%2BDGsKMeByP6wpxID1h3FTCFi9vXkesBz7ejHAGQQIECBAgAABAgQIECBA4N8BgUGAwH8DON%2F%2FOTWkx%2FcxAc5XmE4NaVO%2BHNB94%2BHckD7n%2Fwhwv4739JBO68sB3Zc2zo39pgfc7%2FM9PaRV%2B3KA%2B4XAp4f0egUInhCWw4PnA6F%2Fx7Zm0IDQf1NbM2hAKMttzaABoSi2NYMGhKK434xAKEltzaABoSS1NYMGhIKwdB5F5lGt%2FCggMI9q5UcBgWnYbzwgMA1q4UYBgaO4dB%2FiB0EvfmkAPgj7jQ%2Bg%2F9Fm%2FW%2F5ZBk4CBAgQIAAAQIECBAgQIAAAQIfPfAPpGv2PQM1OP4AAAAASUVORK5CYII%3D'%0A%20%20%20%20const%20vm%20%3D%20Scratch.vm%0A%20%20%20%20const%20elementbox%20%3D%20document.createElement('div')%0A%20%20%20%20elementbox.classList.add('LordCatInterfaces')%0A%20%20%20%20vm.renderer.addOverlay(elementbox%2C%20%22scale%22)%0A%20%20%20%20let%20elements%20%3D%20%7B%7D%0A%20%20%20%20let%20metadata%20%3D%20%7B%7D%0A%20%20%20%20let%20inputhold%20%3D%20%7B%7D%0A%20%20%20%20let%20lastValues%20%3D%20%7B%7D%0A%20%20%20%20const%20css%20%3D%20document.createElement('style')%0A%20%20%20%20css.textContent%20%3D%20%60%0A%20%20%20%20%20%20%20%20.LordCatInterfaces%20svg%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20vertical-align%3A%20top%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20.LordCatInterfaces%5Bhidden%5D%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20display%3A%20none%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%60%0A%20%20%20%20css.classList.add('LordCatInterfaces-Style')%0A%20%20%20%20document.head.append(css)%0A%20%20%20%20%0A%20%20%20%20const%20datauri%20%3D%20(file)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20Promise((resolve%2C%20reject)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(!(file%20instanceof%20File))%20resolve('')%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20reader%20%3D%20new%20FileReader()%0A%20%20%20%20%20%20%20%20%20%20%20%20reader.readAsDataURL(file)%0A%20%20%20%20%20%20%20%20%20%20%20%20reader.onload%20%3D%20()%20%3D%3E%20resolve(reader.result)%0A%20%20%20%20%20%20%20%20%20%20%20%20reader.onerror%20%3D%20()%20%3D%3E%20reject(reader.error)%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%20%20%20%20const%20datauriFromCostume%20%3D%20(costume%2C%20target)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20let%20costumeIndex%20%3D%20target.getCostumeIndexByName(costume)%0A%20%20%20%20%20%20%20%20if(costumeIndex%20%3D%3D%3D%20-1)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20switch(costume)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20'next%20costume'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20costumeIndex%20%3D%20target.currentCostume%3D%3D%3Dtarget.sprite.costumes_.length-1%3F0%3A(target.currentCostume%2B1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20'previous%20costume'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20costumeIndex%20%3D%20target.currentCostume%3D%3D%3D0%3F(target.sprite.costumes_.length-1)%3A(target.currentCostume-1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20case%20'random%20costume'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20costumeIndex%20%3D%20Math.floor(Math.random()%20*%20target.sprite.costumes_.length)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20target.sprite.costumes%5BcostumeIndex%5D.asset.encodeDataURI()%0A%20%20%20%20%7D%0A%20%20%20%20const%20replaceElement%20%3D%20(oldElement%2C%20newElement%2C%20id)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20newElement.dataset.id%20%3D%20id%0A%20%20%20%20%20%20%20%20newElement.setAttribute(%22style%22%2C%20oldElement.getAttribute(%22style%22))%0A%20%20%20%20%20%20%20%20newElement.addEventListener(%22mouseover%22%2C%20()%20%3D%3E%20metadata%5Bid%5D.hovered%20%3D%20true)%0A%20%20%20%20%20%20%20%20newElement.addEventListener(%22mouseout%22%2C%20()%20%3D%3E%20metadata%5Bid%5D.hovered%20%3D%20false)%0A%20%20%20%20%20%20%20%20newElement.addEventListener(%22click%22%2C%20()%20%3D%3E%20metadata%5Bid%5D.clicked%20%3D%20true)%0A%20%20%20%20%20%20%20%20if(oldElement.tagName%3D%3D%3D%22INPUT%22%20%7C%7C%20oldElement.tagName%3D%3D%3D%22TEXTAREA%22)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newElement.value%20%3D%20oldElement.value%0A%20%20%20%20%20%20%20%20%20%20%20%20newElement.addEventListener('input'%2C%20()%20%3D%3E%20metadata%5Bid%5D.inputdirty%20%3D%20true)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20oldElement.replaceWith(newElement)%0A%20%20%20%20%20%20%20%20return%20newElement%0A%20%20%20%20%7D%0A%20%20%20%20const%20fonts%20%3D%20%5B%5D%0A%20%20%20%20document.fonts.ready.then(()%20%3D%3E%20%7Bdocument.fonts.forEach(font%20%3D%3E%20fonts.push(font.family))%3B%7D)%3B%0A%20%20%20%20class%20lordcatprojectinterfaces%7B%0A%20%20%20%20getInfo()%7Breturn%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22lordcatprojectinterfaces%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22Project%20interfaces%22%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%23707eff%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%236675fa%22%2C%0A%20%20%20%20%20%20%20%20docsURI%3A%20%22https%3A%2F%2Fextensions.penguinmod.com%2Fdocs%2FProjectInterfaces%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%3A%20extIcon%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22ClearAll%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Clear%20all%20elements%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22Create%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Create%20%5Btype%5D%20element%20with%20ID%20%5Bid%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Btype%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20'ElementType'%7D%2C%20id%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22My%20element%22%7D%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22Delete%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Delete%20element%20with%20ID%20%5Bid%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22My%20element%22%7D%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22Visibility%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5Bmenu%5D%20element%20with%20ID%20%5Bid%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22My%20element%22%7D%2C%20menu%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22Visibility%22%7D%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22ElementVisibility%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22element%20with%20ID%20%5Bid%5D%20is%20%5Bstatus%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22My%20element%22%7D%2C%20status%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22VisibilityStatus%22%7D%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22AllElements%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22All%20elements%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7BblockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Styling%22%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22Position%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20position%20of%20ID%20%5Bid%5D%20to%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20'My%20element'%7D%2C%20x%3A%20%7Btype%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%7D%2C%20y%3A%20%7Btype%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%7D%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22Direction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20direction%20of%20ID%20%5Bid%5D%20to%20%5Bdir%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20'My%20element'%7D%2C%20dir%3A%20%7Btype%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2090%7D%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22Scale%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20scale%20of%20ID%20%5Bid%5D%20to%20width%3A%20%5Bwidth%5Dpx%20height%3A%20%5Bheight%5Dpx%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20'My%20element'%7D%2C%20width%3A%20%7Btype%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%7D%2C%20height%3A%20%7Btype%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%7D%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22Layer%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20layer%20of%20ID%20%5Bid%5D%20to%20%5Blayer%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20'My%20element'%7D%2C%20layer%3A%20%7Btype%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%201%7D%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22Cursor%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20hover%20cursor%20of%20ID%20%5Bid%5D%20to%20%5Bcursor%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20'My%20element'%7D%2C%20cursor%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20'Cursors'%7D%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22Color%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20color%20of%20ID%20%5Bid%5D%20to%20%5Bcolor%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20'My%20element'%7D%2C%20color%3A%20%7Btype%3A%20Scratch.ArgumentType.COLOR%7D%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22BackgroundColor%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20background%20color%20of%20ID%20%5Bid%5D%20to%20%5Bcolor%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20'My%20element'%7D%2C%20color%3A%20%7Btype%3A%20Scratch.ArgumentType.COLOR%7D%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22CustomCSS%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20custom%20CSS%20of%20%5Bid%5D%20to%20%5Bcss%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20'My%20element'%7D%2C%20css%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20'background-color%3A%20red'%7D%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22HtmlElement%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Create%20html%20element%20%5Bhtmltag%5D%20with%20ID%20%5Bid%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20'My%20element'%7D%2C%20htmltag%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20'h1'%7D%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%22---%22%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22WhenClicked%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22When%20ID%20%5Bid%5D%20is%20clicked%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.HAT%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22My%20element%22%7D%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22Attribute%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5Battr%5D%20of%20ID%20%5Bid%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Battr%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22Attributes%22%7D%2C%20id%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22My%20element%22%7D%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22IsHovered%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5Bid%5D%20hovered%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22My%20element%22%7D%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2Ctext%3A%20%22Labels%22%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22LabelText%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20label%20text%20with%20ID%20%5Bid%5D%20to%20%5Btext%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Btext%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22Hello%20world!%22%7D%2C%20id%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22My%20element%22%7D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20textIcon%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22LabelAlign%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20label%20alignment%20with%20ID%20%5Bid%5D%20to%20%5Balign%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Balign%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22Alignment%22%7D%2C%20id%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22My%20element%22%7D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20textIcon%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22LabelFontSize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20label%20font%20size%20with%20ID%20%5Bid%5D%20to%20%5Bsize%5Dpx%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22My%20element%22%7D%2C%20size%3A%20%7Btype%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2040%7D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20textIcon%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22LabelFont%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20label%20font%20with%20ID%20%5Bid%5D%20to%20%5Bfont%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22My%20element%22%7D%2C%20font%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20'Fonts'%7D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20textIcon%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7BblockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Images%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22ImageUrl%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20image%20with%20ID%20%5Bid%5D%20to%20url%20%5Burl%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20'My%20element'%7D%2C%20url%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20'https%3A%2F%2Fextensions.turbowarp.org%2Fdango.png'%7D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20imageIcon%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22ImageCostume%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20image%20with%20ID%20%5Bid%5D%20to%20costume%20%5Bcostume%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20'My%20element'%7D%2C%20costume%3A%20%7Btype%3A%20Scratch.ArgumentType.COSTUME%7D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20imageIcon%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7BblockType%3A%20Scratch.BlockType.LABEL%2Ctext%3A%20%22Videos%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22VideoSource%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20video%20with%20ID%20%5Bid%5D%20to%20url%20%5Burl%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20'My%20element'%7D%2C%20url%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20'https%3A%2F%2Fextensions.turbowarp.org%2Fdango.png'%7D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20videoIcon%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22VideoControl%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22%5Bcontrol%5D%20video%20with%20ID%20%5Bid%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bcontrol%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20'VideoControls'%7D%2C%20id%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20'My%20element'%7D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20videoIcon%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22VideoVolume%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20volume%20of%20video%20%5Bid%5D%20to%20%5Bvolume%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bvolume%3A%20%7Btype%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%7D%2C%20id%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20'My%20element'%7D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20videoIcon%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22VideoLoop%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20loop%20of%20video%20%5Bid%5D%20to%20%5Btoggle%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22My%20element%22%7D%2C%20toggle%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22EnableDisable%22%7D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20videoIcon%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22VideoHtmlControls%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20video%20controls%20of%20ID%20%5Bid%5D%20to%20%5Btoggle%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22My%20element%22%7D%2C%20toggle%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22EnableDisable%22%7D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20videoIcon%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7BblockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Inputs%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22InputType%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20input%20type%20of%20ID%20%5Bid%5D%20to%20%5Binput%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22My%20element%22%7D%2C%20input%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20'Inputs'%7D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20inputIcon%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22InputAccent%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20input%20accent%20color%20of%20ID%20%5Bid%5D%20to%20%5Bcolor%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22My%20element%22%7D%2C%20color%3A%20%7Btype%3A%20Scratch.ArgumentType.COLOR%7D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20inputIcon%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22InputPlaceholder%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20placeholder%20of%20ID%20%5Bid%5D%20to%20%5Bplaceholder%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22My%20element%22%7D%2C%20placeholder%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22Hello%20world!%22%7D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20inputIcon%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22InputSetValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20value%20of%20ID%20%5Bid%5D%20to%20%5Bvalue%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22My%20element%22%7D%2C%20value%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22Hello%20world!%22%7D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20inputIcon%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22InputValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Value%20of%20input%20with%20ID%20%5Bid%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22My%20element%22%7D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20inputIcon%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22WhenInputChanged%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22When%20input%20with%20ID%20%5Bid%5D%20changed%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.HAT%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22My%20element%22%7D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20inputIcon%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Buttons%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22ButtonText%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Set%20text%20of%20button%20%5Bid%5D%20to%20%5Btext%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7Bid%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22My%20element%22%7D%2C%20text%3A%20%7Btype%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22Hello%20world!%22%7D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20buttonicon%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7BElementType%3A%20%7BacceptReporters%3A%20false%2Citems%3A%20%5B%22Label%22%2C%20%22Image%22%2C%20%22Video%22%2C%20%22Input%22%2C%20%22Box%22%2C%20%22Button%22%5D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Inputs%3A%20%7BacceptReporters%3A%20false%2Citems%3A%20%5B%22Text%22%2C%20%22Text%20Area%22%2C%20%22Number%22%2C%20%22Color%22%2C%20%22Checkbox%22%2C%20%22File%22%2C%20%22Email%22%2C%20%22Range%22%2C%20%22Image%22%5D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Cursors%3A%20%7BacceptReporters%3A%20false%2Citems%3A%20%5B%22default%22%2C%20%22pointer%22%2C%20%22text%22%2C%20%22wait%22%2C%20%22move%22%2C%20%22not-allowed%22%2C%20%22crosshair%22%2C%22help%22%2C%20%22progress%22%2C%20%22grab%22%2C%20%22grabbing%22%5D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Fonts%3A%20%7BacceptReporters%3A%20true%2C%20items%3A%20fonts%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Attributes%3A%20%7BacceptReporters%3A%20false%2C%20items%3A%20%5B'X'%2C%20%22Y%22%2C%20%22Direction%22%2C%20%22Width%22%2C%20%22Height%22%2C%20%22Cursor%22%2C%20%22Source%22%5D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20VideoControls%3A%20%7BacceptReporters%3A%20false%2C%20items%3A%20%5B%22Play%22%2C%20%22Stop%22%2C%20%22Pause%22%5D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20EnableDisable%3A%20%7BacceptReporters%3A%20false%2C%20items%3A%20%5B%22Enabled%22%2C%20%22Disabled%22%5D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Alignment%3A%20%7BacceptReporters%3A%20false%2C%20items%3A%20%5B%22Left%22%2C%20%22Right%22%2C%20%22Center%22%5D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Visibility%3A%20%7BacceptReporters%3A%20false%2C%20items%3A%20%5B%22Show%22%2C%20%22Hide%22%5D%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20VisibilityStatus%3A%20%7BacceptReporters%3A%20false%2C%20items%3A%20%5B%22Shown%22%2C%20%22Hidden%22%5D%7D%7D%2C%0A%20%20%20%20%7D%7D%0A%20%20%20%20tutorial()%7Bwindow.open(%22https%3A%2F%2Fdiscord.com%2Fchannels%2F1033551490331197462%2F1390741725705797642%2F1390741725705797642%22)%7D%0A%20%20%20%20FixPos(elementid)%7B%0A%20%20%20%20%20%20%20%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(!elements%5Belementid%5D)%7Breturn%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.Position(%7Bid%3A%20elementid%2C%20x%3A%20metadata%5Belementid%5D.x%2C%20y%3A%20metadata%5Belementid%5D.y%7D)%0A%20%20%20%20%20%20%20%20%7D%2C%201)%20%2F%2F%20Timeout%20needed%20because%20for%20some%20reason%20it%20wont%20run%20otherwise..%0A%20%20%20%20%7D%0A%20%20%20%20FixTransform(elementid)%7B%0A%20%20%20%20%20%20%20%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20elements%5Belementid%5D.style.transform%20%3D%20elements%5Belementid%5D.tagName%3D%3D%3D'SVG'%3F%60translate(-50%25%2C%20-50%25)%20rotate(%24%7Bmetadata%5Belementid%5D-90%7Ddeg)%60%3A%60rotate(%24%7Bmetadata%5Belementid%5D-90%7Ddeg)%60%0A%20%20%20%20%20%20%20%20%7D%2C%201)%20%2F%2F%20Timeout%20needed%20because%20for%20some%20reason%20it%20wont%20run%20otherwise..%0A%20%20%20%20%7D%0A%20%20%20%20ClearAll()%7B%0A%20%20%20%20%20%20%20%20Object.entries(elements).forEach((%5Bid%2C%20element%5D)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if((element.tagName%3D%3D%3D%22INPUT%22%7C%7Celement.tagName%3D%3D%3D%22TEXTAREA%22))%20inputhold%5Bid%5D%20%3D%20element.type%3D%3D%3D%22checkbox%22%3Felement.checked%3Aelement.value%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20elements%20%3D%20%7B%7D%0A%20%20%20%20%20%20%20%20metadata%20%3D%20%7B%7D%0A%20%20%20%20%20%20%20%20elementbox.innerHTML%20%3D%20''%0A%20%20%20%20%7D%0A%20%20%20%20Create(args)%7B%0A%20%20%20%20%20%20%20%20if(elements%5Bargs.id%5D)%20return%0A%20%20%20%20%20%20%20%20const%20element%20%3D%20document.createElement(lookup%5Bargs.type%5D)%0A%20%20%20%20%20%20%20%20if(lookup%5Bargs.type%5D%20%3D%3D%3D%20'button')%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20element.append(document.createElement('span'))%0A%20%20%20%20%20%20%20%20%20%20%20%20element.append(document.createElement('img'))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20boundingRect%20%3D%20element.getBoundingClientRect()%0A%20%20%20%20%20%20%20%20element.dataset.id%20%3D%20args.id%0A%20%20%20%20%20%20%20%20element.style.position%20%3D%20'absolute'%0A%20%20%20%20%20%20%20%20element.style.pointerEvents%20%3D%20'auto'%0A%20%20%20%20%20%20%20%20element.style.userSelect%20%3D%20'none'%0A%20%20%20%20%20%20%20%20element.style.color%20%3D%20'black'%0A%20%20%20%20%20%20%20%20if(args.type%20%3D%3D%20'Image')%7Belement.draggable%20%3D%20false%7D%0A%20%20%20%20%20%20%20%20elements%5Bargs.id%5D%20%3D%20element%0A%20%20%20%20%20%20%20%20elementbox.append(element)%0A%20%20%20%20%20%20%20%20metadata%5Bargs.id%5D%20%3D%20%7Bx%3A%200%2C%20y%3A%200%2C%20direction%3A%2090%2C%20width%3A%20boundingRect.width%2C%20height%3A%20boundingRect.height%2C%20hovered%3A%20false%2C%20clicked%3A%20false%7D%0A%20%20%20%20%20%20%20%20this.FixPos(args.id)%0A%20%20%20%20%20%20%20%20if(args.type%20%3D%3D%3D%20'Input')%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20metadata%5Bargs.id%5D.inputdirty%20%3D%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20element.addEventListener(%22input%22%2C%20()%20%3D%3E%20metadata%5Bargs.id%5D.inputdirty%20%3D%20true)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20element.addEventListener(%22mouseover%22%2C%20()%20%3D%3E%20metadata%5Bargs.id%5D.hovered%20%3D%20true)%0A%20%20%20%20%20%20%20%20element.addEventListener(%22mouseout%22%2C%20()%20%3D%3E%20metadata%5Bargs.id%5D.hovered%20%3D%20false)%0A%20%20%20%20%20%20%20%20element.addEventListener(%22click%22%2C%20()%20%3D%3E%20metadata%5Bargs.id%5D.clicked%20%3D%20true)%0A%20%20%20%20%7D%0A%20%20%20%20Position(args)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D)%7Breturn%7D%0A%20%20%20%20%20%20%20%20const%20element%20%3D%20elements%5Bargs.id%5D%0A%20%20%20%20%20%20%20%20if(element.tagName%3D%3D%3D'svg')%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20bbox%20%3D%20element.getBBox()%0A%20%20%20%20%20%20%20%20%20%20%20%20element.style.left%20%3D%20%60%24%7B(vm.runtime.stageWidth%2F2)%20%2B%20args.x%20-%20(bbox.width%2F2)%7Dpx%60%0A%20%20%20%20%20%20%20%20%20%20%20%20element.style.top%20%3D%20%60%24%7B(vm.runtime.stageHeight%2F2)%20-%20args.y%20-%20(bbox.height%2F2)%7Dpx%60%0A%20%20%20%20%20%20%20%20%7Delse%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20element.style.left%20%3D%20%60%24%7B(vm.runtime.stageWidth%2F2)%20%2B%20args.x%20-%20(element.offsetWidth%2F2)%7Dpx%60%0A%20%20%20%20%20%20%20%20%20%20%20%20element.style.top%20%3D%20%60%24%7B(vm.runtime.stageHeight%2F2)%20-%20args.y%20-%20(element.offsetHeight%2F2)%7Dpx%60%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20metadata%5Bargs.id%5D.x%20%3D%20args.x%0A%20%20%20%20%20%20%20%20metadata%5Bargs.id%5D.y%20%3D%20args.y%0A%20%20%20%20%7D%0A%20%20%20%20Direction(args)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D)%7Breturn%7D%0A%20%20%20%20%20%20%20%20const%20element%20%3D%20elements%5Bargs.id%5D%0A%20%20%20%20%20%20%20%20metadata%5Bargs.id%5D.direction%20%3D%20args.dir%0A%20%20%20%20%20%20%20%20element.style.transform%20%3D%20%60rotate(%24%7Bargs.dir%20-%2090%7Ddeg)%60%0A%20%20%20%20%7D%0A%20%20%20%20Scale(args)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D)%7Breturn%7D%0A%20%20%20%20%20%20%20%20const%20element%20%3D%20elements%5Bargs.id%5D%0A%20%20%20%20%20%20%20%20element.style.width%20%3D%20%60%24%7Bargs.width%7Dpx%60%0A%20%20%20%20%20%20%20%20element.style.height%20%3D%20%60%24%7Bargs.height%7Dpx%60%0A%20%20%20%20%20%20%20%20metadata%5Bargs.id%5D.width%20%3D%20args.width%20%2B%20'px'%0A%20%20%20%20%20%20%20%20metadata%5Bargs.id%5D.height%20%3D%20args.height%20%2B%20'px'%0A%20%20%20%20%20%20%20%20element.style.objectFit%20%3D%20'fill'%0A%20%20%20%20%20%20%20%20this.FixPos(args.id)%0A%20%20%20%20%7D%0A%20%20%20%20Layer(args)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D)%7Breturn%7D%0A%20%20%20%20%20%20%20%20const%20element%20%3D%20elements%5Bargs.id%5D%0A%20%20%20%20%20%20%20%20element.style.zIndex%20%3D%20args.layer%0A%20%20%20%20%7D%0A%20%20%20%20Cursor(args)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D)%7Breturn%7D%0A%20%20%20%20%20%20%20%20const%20element%20%3D%20elements%5Bargs.id%5D%0A%20%20%20%20%20%20%20%20element.style.cursor%20%3D%20args.cursor%0A%20%20%20%20%7D%0A%20%20%20%20Color(args)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D)%7Breturn%7D%0A%20%20%20%20%20%20%20%20if(elements%5Bargs.id%5D.tagName%20%3D%3D%20'DIV')%7Belements%5Bargs.id%5D.style.backgroundColor%20%3D%20args.color%3B%20return%7D%20%2F%2F%20for%20people%20who%20are%20confused%20why%20'color'%20doesnt%20work%20with%20div%2Fbox%20elements%0A%20%20%20%20%20%20%20%20elements%5Bargs.id%5D.style.color%20%3D%20args.color%0A%20%20%20%20%7D%0A%20%20%20%20BackgroundColor(args)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D)%7Breturn%7D%0A%20%20%20%20%20%20%20%20elements%5Bargs.id%5D.style.backgroundColor%20%3D%20args.color%0A%20%20%20%20%7D%0A%20%20%20%20CustomCSS(args)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D)%7Breturn%7D%0A%20%20%20%20%20%20%20%20const%20element%20%3D%20elements%5Bargs.id%5D%0A%20%20%20%20%20%20%20%20let%20style%20%3D%20document.getElementById(%60LCGuiStyle_%24%7Bargs.id%7D%60)%0A%20%20%20%20%20%20%20%20let%20lines%20%3D%20args.css.split(%22%3B%22)%0A%20%20%20%20%20%20%20%20if(!style)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20style%20%3D%20document.createElement('style')%0A%20%20%20%20%20%20%20%20%20%20%20%20style.id%20%3D%20%60LCGuiStyle_%24%7Bargs.id%7D%60%0A%20%20%20%20%20%20%20%20%20%20%20%20document.head.append(style)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20style.textContent%20%3D%20%60%5Bdata-id%3D'%24%7Bargs.id%7D'%5D%7B%5Cn%24%7Blines.join(%22%20!important%3B%5Cn%22)%20%2B%20%22%20!important%22%7D%5Cn%7D%60%0A%20%20%20%20%7D%0A%20%20%20%20HtmlElement(args)%7B%0A%20%20%20%20%20%20%20%20if(elements%5Bargs.id%5D)%20return%0A%20%20%20%20%20%20%20%20const%20element%20%3D%20document.createElement(args.htmltag.toLowerCase())%0A%20%20%20%20%20%20%20%20const%20boundingRect%20%3D%20element.getBoundingClientRect()%0A%20%20%20%20%20%20%20%20element.dataset.id%20%3D%20args.id%0A%20%20%20%20%20%20%20%20element.style.position%20%3D%20'absolute'%0A%20%20%20%20%20%20%20%20element.style.pointerEvents%20%3D%20'auto'%0A%20%20%20%20%20%20%20%20element.style.userSelect%20%3D%20'none'%0A%20%20%20%20%20%20%20%20element.style.color%20%3D%20'black'%0A%20%20%20%20%20%20%20%20elements%5Bargs.id%5D%20%3D%20element%0A%20%20%20%20%20%20%20%20elementbox.append(element)%0A%20%20%20%20%20%20%20%20metadata%5Bargs.id%5D%20%3D%20%7Bx%3A%200%2C%20y%3A%200%2C%20direction%3A%2090%2C%20width%3A%20boundingRect.width%2C%20height%3A%20boundingRect.height%2C%20hovered%3A%20false%2C%20clicked%3A%20false%7D%0A%20%20%20%20%20%20%20%20this.FixPos(args.id)%0A%20%20%20%20%20%20%20%20element.addEventListener(%22mouseover%22%2C%20()%20%3D%3E%20metadata%5Bargs.id%5D.hovered%20%3D%20true)%0A%20%20%20%20%20%20%20%20element.addEventListener(%22mouseout%22%2C%20()%20%3D%3E%20metadata%5Bargs.id%5D.hovered%20%3D%20false)%0A%20%20%20%20%20%20%20%20element.addEventListener(%22click%22%2C%20()%20%3D%3E%20metadata%5Bargs.id%5D.clicked%20%3D%20true)%0A%20%20%20%20%7D%0A%20%20%20%20Attribute(args)%7B%0A%20%20%20%20%20%20%20%20const%20element%20%3D%20elements%5Bargs.id%5D%0A%20%20%20%20%20%20%20%20if(!element)%20return%0A%20%20%20%20%20%20%20%20const%20meta%20%3D%20metadata%5Bargs.id%5D%0A%20%20%20%20%20%20%20%20switch(args.attr)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20'Cursor'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20element.style.cursor%3D%3D%3D%22%22%3F%22default%22%3Aelement.style.cursor%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20'Source'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if(element.tagName%20!%3D%20'IMG'%20%26%26%20element.tagName%20!%3D%20'VIDEO'%20%26%26%20element.tagName%20!%3D%20%22svg%22)%20return%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20element.tagName%3D%3D%3D'svg'%3Felement.outerHTML%3Aelement.src%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20'Width'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20element.getBBox().width%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20'Height'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20element.getBBox().height%0A%20%20%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20meta%5Bargs.attr.toLowerCase()%5D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20IsHovered(args)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D)%7Breturn%20''%7D%0A%20%20%20%20%20%20%20%20return%20metadata%5Bargs.id%5D.hovered%0A%20%20%20%20%7D%0A%20%20%20%20Delete(args)%7B%0A%20%20%20%20%20%20%20%20const%20element%20%3D%20elements%5Bargs.id%5D%0A%20%20%20%20%20%20%20%20if(!element)%7Breturn%7D%0A%20%20%20%20%20%20%20%20if((element.tagName%3D%3D%3D%22INPUT%22%7C%7Celement.tagName%3D%3D%3D%22TEXTAREA%22))%20inputhold%5Bargs.id%5D%20%3D%20element.type%3D%3D%3D%22checkbox%22%3Felement.checked%3Aelement.value%0A%20%20%20%20%20%20%20%20if(document.getElementById(%60LCGuiStyle_%24%7Bargs.id%7D%60))%20document.getElementById(%60LCGuiStyle_%24%7Bargs.id%7D%60).remove()%0A%20%20%20%20%20%20%20%20element.remove()%0A%20%20%20%20%20%20%20%20delete%20elements%5Bargs.id%5D%0A%20%20%20%20%20%20%20%20delete%20metadata%5Bargs.id%5D%0A%20%20%20%20%7D%0A%20%20%20%20Visibility(args)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D)%7Breturn%7D%0A%20%20%20%20%20%20%20%20elements%5Bargs.id%5D.hidden%20%3D%20(args.menu%3D%3D%3D%22Hide%22)%0A%20%20%20%20%7D%0A%20%20%20%20ElementVisibility(args)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D)%20return%0A%20%20%20%20%20%20%20%20return%20args.status%3D%3D%3D'Shown'%3F!elements%5Bargs.id%5D.hidden%3A!!elements%5Bargs.id%5D.hidden%0A%20%20%20%20%7D%0A%20%20%20%20AllElements()%7Breturn%20JSON.stringify(Object.keys(elements))%7D%0A%20%20%20%20LabelText(args)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D%20%7C%7C%20elements%5Bargs.id%5D.tagName%20!%3D%20%22SPAN%22)%7Breturn%7D%0A%20%20%20%20%20%20%20%20elements%5Bargs.id%5D.textContent%20%3D%20args.text%0A%20%20%20%20%20%20%20%20this.FixPos(args.id)%0A%20%20%20%20%7D%0A%20%20%20%20LabelAlign(args)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D%20%7C%7C%20elements%5Bargs.id%5D.tagName%20!%3D%20%22SPAN%22)%7Breturn%7D%0A%20%20%20%20%20%20%20%20elements%5Bargs.id%5D.style.textAlign%20%3D%20args.align.toLowerCase()%0A%20%20%20%20%20%20%20%20this.FixPos(args.id)%0A%20%20%20%20%7D%0A%20%20%20%20LabelFontSize(args)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D%20%7C%7C%20elements%5Bargs.id%5D.tagName%20!%3D%20%22SPAN%22)%7Breturn%7D%0A%20%20%20%20%20%20%20%20elements%5Bargs.id%5D.style.fontSize%20%3D%20%60%24%7Bargs.size%7Dpx%60%0A%20%20%20%20%20%20%20%20this.FixPos(args.id)%0A%20%20%20%20%7D%0A%20%20%20%20LabelFont(args)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D%20%7C%7C%20elements%5Bargs.id%5D.tagName%20!%3D%20%22SPAN%22)%7Breturn%7D%0A%20%20%20%20%20%20%20%20elements%5Bargs.id%5D.style.fontFamily%20%3D%20args.font%20%0A%20%20%20%20%20%20%20%20this.FixPos(args.id)%0A%20%20%20%20%7D%0A%20%20%20%20ImageUrl(args)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D%20%7C%7C%20(elements%5Bargs.id%5D.tagName%20!%3D%20%22IMG%22%20%26%26%20elements%5Bargs.id%5D.tagName%20!%3D%20%22svg%22))%7Breturn%7D%0A%20%20%20%20%20%20%20%20if(elements%5Bargs.id%5D.tagName%3D%3D%3D'svg')%20elements%5Bargs.id%5D%20%3D%20replaceElement(elements%5Bargs.id%5D%2C%20document.createElement('img')%2C%20args.id)%0A%20%20%20%20%20%20%20%20elements%5Bargs.id%5D.src%20%3D%20args.url%0A%20%20%20%20%20%20%20%20this.FixPos(args.id)%0A%20%20%20%20%7D%0A%20%20%20%20ImageCostume(args%2C%20util)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D%20%7C%7C%20(elements%5Bargs.id%5D.tagName%20!%3D%20%22IMG%22%20%26%26%20elements%5Bargs.id%5D.tagName%20!%3D%20%22svg%22))%7Breturn%7D%0A%20%20%20%20%20%20%20%20if(util.target.getCostumes().find(costume%20%3D%3E%20costume.name%20%3D%3D%3D%20args.costume).dataFormat%20%3D%3D%3D%20%22svg%22)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20decoder%20%3D%20new%20TextDecoder('utf-8')%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20htmlparser%20%3D%20new%20DOMParser()%0A%20%20%20%20%20%20%20%20%20%20%20%20elements%5Bargs.id%5D%20%3D%20replaceElement(elements%5Bargs.id%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20htmlparser.parseFromString(decoder.decode(util.target.getCostumes().find(costume%20%3D%3E%20costume.name%20%3D%3D%3D%20args.costume).asset.data)%2C%20'image%2Fsvg%2Bxml')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.documentElement%2C%20args.id)%20%2F%2Fdamn%0A%20%20%20%20%20%20%20%20%7Delse%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(elements%5Bargs.id%5D.tagName%3D%3D%3D'svg')%20elements%5Bargs.id%5D%20%3D%20replaceElement(elements%5Bargs.id%5D%2C%20document.createElement('img')%2C%20args.id)%0A%20%20%20%20%20%20%20%20%20%20%20%20elements%5Bargs.id%5D.src%20%3D%20datauriFromCostume(args.costume%2C%20util.target)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.FixPos(args.id)%0A%20%20%20%20%20%20%20%20this.FixTransform(args.id)%0A%20%20%20%20%7D%0A%20%20%20%20InputType(args)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D%20%7C%7C%20(elements%5Bargs.id%5D.tagName%20!%3D%20%22INPUT%22%20%26%26%20elements%5Bargs.id%5D.tagName%20!%3D%20%22TEXTAREA%22))%7Breturn%7D%0A%20%20%20%20%20%20%20%20if(args.input%20%3D%3D%3D%20'Text%20Area')%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20elements%5Bargs.id%5D%20%3D%20replaceElement(elements%5Bargs.id%5D%2C%20document.createElement('textarea')%2C%20args.id)%0A%20%20%20%20%20%20%20%20%20%20%20%20elements%5Bargs.id%5D.style.resize%20%3D%20'none'%0A%20%20%20%20%20%20%20%20%7Delse%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if(elements%5Bargs.id%5D.tagName%20%3D%3D%20%22TEXTAREA%22)%20elements%5Bargs.id%5D%20%3D%20replaceElement(elements%5Bargs.id%5D%2C%20document.createElement('input')%2C%20args.id)%0A%20%20%20%20%20%20%20%20%20%20%20%20elements%5Bargs.id%5D.type%20%3D%20args.input%0A%20%20%20%20%20%20%20%20%20%20%20%20if(args.input%20%3D%3D%20'File')%7Belements%5Bargs.id%5D.value%20%3D%20null%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.FixPos(args.id)%0A%20%20%20%20%7D%0A%20%20%20%20InputAccent(args)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D%20%7C%7C%20(elements%5Bargs.id%5D.tagName%20!%3D%20%22INPUT%22%20%26%26%20elements%5Bargs.id%5D.tagName%20!%3D%20%22TEXTAREA%22))%7Breturn%7D%0A%20%20%20%20%20%20%20%20elements%5Bargs.id%5D.style.accentColor%20%3D%20args.color%0A%20%20%20%20%7D%0A%20%20%20%20InputPlaceholder(args)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D%20%7C%7C%20(elements%5Bargs.id%5D.tagName%20!%3D%20%22INPUT%22%20%26%26%20elements%5Bargs.id%5D.tagName%20!%3D%20%22TEXTAREA%22))%7Breturn%7D%0A%20%20%20%20%20%20%20%20elements%5Bargs.id%5D.setAttribute('placeholder'%2C%20args.placeholder)%0A%20%20%20%20%7D%0A%20%20%20%20InputSetValue(args)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D%20%7C%7C%20(elements%5Bargs.id%5D.tagName%20!%3D%20%22INPUT%22%20%26%26%20elements%5Bargs.id%5D.tagName%20!%3D%20%22TEXTAREA%22))%7Breturn%7D%0A%20%20%20%20%20%20%20%20if(elements%5Bargs.id%5D.type%20%3D%3D%3D%20'checkbox')%20elements%5Bargs.id%5D.checked%20%3D%20Scratch.Cast.toBoolean(args.value)%0A%20%20%20%20%20%20%20%20elements%5Bargs.id%5D.value%20%3D%20args.value%0A%20%20%20%20%7D%0A%20%20%20%20async%20InputValue(args)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D%20%26%26%20inputhold%5Bargs.id%5D)%20return%20inputhold%5Bargs.id%5D%0A%20%20%20%20%20%20%20%20const%20element%20%3D%20elements%5Bargs.id%5D%0A%20%20%20%20%20%20%20%20if((!element)%20%7C%7C%20(element.tagName%20!%3D%20%22INPUT%22%20%26%26%20element.tagName%20!%3D%20%22TEXTAREA%22))%20return%20%22%22%0A%20%20%20%20%20%20%20%20if(!element%20%26%26%20inputhold%5Bargs.id%5D)%20return%20inputhold%5Bargs.id%5D%0A%20%20%20%20%20%20%20%20if(element.type%20%3D%3D%3D%20'checkbox')%20return%20element.checked%0A%20%20%20%20%20%20%20%20return%20(element.type%20%3D%3D%3D%20'file'%20%3F%20await%20datauri(element.files%5B0%5D)%20%3A%20element.value)%0A%20%20%20%20%7D%0A%20%20%20%20WhenInputChanged(args%2C%20util)%7B%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D%20%7C%7C%20(elements%5Bargs.id%5D.tagName!%3D%22INPUT%22%26%26elements%5Bargs.id%5D.tagName!%3D%22TEXTAREA%22))%20return%20false%0A%20%20%20%20%20%20%20%20const%20element%20%3D%20elements%5Bargs.id%5D%0A%20%20%20%20%20%20%20%20const%20value%20%3D%20element.type%3D%3D%3D'checkbox'%3Felement.checked%3Aelement.value%0A%20%20%20%20%20%20%20%20const%20blockId%20%3D%20util.thread.peekStack()%0A%20%20%20%20%20%20%20%20if(!lastValues%5BblockId%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20lastValues%5BblockId%5D%20%3D%20value.toString()%0A%20%20%20%20%20%20%20%20if(lastValues%5BblockId%5D%20!%3D%3D%20value.toString())%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastValues%5BblockId%5D%20%3D%20value.toString()%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F*%0A%20%20%20%20%20%20%20%20if(!elements%5Bargs.id%5D%20%7C%7C%20(elements%5Bargs.id%5D.tagName!%3D%22INPUT%22%26%26elements%5Bargs.id%5D.tagName!%3D%22TEXTAREA%22))%20return%20false%0A%20%20%20%20%20%20%20%20if(metadata%5Bargs.id%5D.inputdirty)%7Bmetadata%5Bargs.id%5D.inputdirty%20%3D%20false%3B%20return%20true%7D%0A%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%20%20%20%20*%2F%0A%0A%20%20%20%20%7D%0A%20%20%20%20WhenClicked(args)%7B%0A%20%20%20%20%20%20%20%20%2F%2FThis%20isnt%20ideal%2C%20but%20its%20basically%20the%20only%20option%20we%20have%0A%20%20%20%20%20%20%20%20if(!metadata%5Bargs.id%5D)%20return%20false%0A%20%20%20%20%20%20%20%20if(metadata%5Bargs.id%5D.clicked)%7Breturn%20new%20Promise((res%2C%20rej)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20setTimeout(()%20%3D%3E%20%7Bmetadata%5Bargs.id%5D.clicked%20%3D%20false%3B%20res(true)%7D%2C%201)%0A%20%20%20%20%20%20%20%20%7D)%7D%0A%20%20%20%20%20%20%20%20return%20false%0A%20%20%20%20%7D%0A%20%20%20%20VideoSource(args)%7B%0A%20%20%20%20%20%20%20%20const%20element%20%3D%20elements%5Bargs.id%5D%0A%20%20%20%20%20%20%20%20if(!element%20%7C%7C%20element.tagName%20!%3D%20%22VIDEO%22)%20return%0A%20%20%20%20%20%20%20%20element.src%20%3D%20args.url%0A%20%20%20%20%20%20%20%20this.FixPos(args.id)%0A%20%20%20%20%7D%0A%20%20%20%20VideoControl(args)%7B%0A%20%20%20%20%20%20%20%20const%20element%20%3D%20elements%5Bargs.id%5D%0A%20%20%20%20%20%20%20%20if(!element%20%7C%7C%20element.tagName%20!%3D%20%22VIDEO%22)%20return%0A%20%20%20%20%20%20%20%20switch(args.control)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20'Play'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element.play()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20'Stop'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element.pause()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element.currentTime%20%3D%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20'Pause'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element.pause()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20VideoVolume(args)%7B%0A%20%20%20%20%20%20%20%20const%20element%20%3D%20elements%5Bargs.id%5D%0A%20%20%20%20%20%20%20%20if(!element%20%7C%7C%20element.tagName%20!%3D%20%22VIDEO%22)%20return%0A%20%20%20%20%20%20%20%20element.volume%20%3D%20(args.volume%20%2F%20100)%0A%20%20%20%20%7D%0A%20%20%20%20VideoHtmlControls(args)%7B%0A%20%20%20%20%20%20%20%20const%20element%20%3D%20elements%5Bargs.id%5D%0A%20%20%20%20%20%20%20%20if(!element%20%7C%7C%20element.tagName%20!%3D%20%22VIDEO%22)%20return%0A%20%20%20%20%20%20%20%20switch(args.toggle)%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20'Enabled'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element.setAttribute(%22controls%22%2C%20%22true%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20'Disabled'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20element.removeAttribute(%22controls%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20VideoLoop(args)%7B%0A%20%20%20%20%20%20%20%20const%20element%20%3D%20elements%5Bargs.id%5D%0A%20%20%20%20%20%20%20%20if(!element%20%7C%7C%20element.tagName%20!%3D%20%22VIDEO%22)%20return%0A%20%20%20%20%20%20%20%20element.loop%20%3D%20(args.toggle%20%3D%3D%20%22Enabled%22)%0A%20%20%20%20%7D%0A%20%20%20%20ButtonText(args)%7B%0A%20%20%20%20%20%20%20%20const%20element%20%3D%20elements%5Bargs.id%5D%0A%20%20%20%20%20%20%20%20if(!element%20%7C%7C%20element.tagName%20!%3D%20%22BUTTON%22)%20return%0A%20%20%20%20%20%20%20%20document.querySelector(%60.LordCatInterfaces%20button%5Bdata-id%3D%22%24%7Bargs.id%7D%22%5D%20span%60).textContent%20%3D%20args.text%0A%20%20%20%20%20%20%20%20this.FixPos(args.id)%0A%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20Scratch.extensions.register(new%20lordcatprojectinterfaces())%0A%7D)(Scratch)%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Box2D%20Physics%0A%2F%2F%20ID%3A%20griffpatch%0A%2F%2F%20Description%3A%20Two%20dimensional%20physics.%0A%2F%2F%20Original%3A%20griffpatch%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2Fgriffpatch%2F%3E%0A%2F%2F%20License%3A%20BSD-3-Clause%20AND%20MIT%20AND%20Zlib%0A%0A%2F*!%0A%20*%20This%20is%20based%20on%20https%3A%2F%2Fgithub.com%2Fgriffpatch%2Fscratch-vm%2Ftree%2Fbox2d%2Fsrc%2Fextensions%2Fscratch3_griffpatch%0A%20*%20by%20griffpatch%2C%20which%20has%20this%20license%20attached%3A%0A%20*%0A%20*%20Copyright%20(c)%202016%2C%20Massachusetts%20Institute%20of%20Technology%0A%20*%20All%20rights%20reserved.%0A%20*%0A%20*%20Redistribution%20and%20use%20in%20source%20and%20binary%20forms%2C%20with%20or%20without%20modification%2C%20are%20permitted%20provided%20that%20the%20following%20conditions%20are%20met%3A%0A%20*%0A%20*%201.%20Redistributions%20of%20source%20code%20must%20retain%20the%20above%20copyright%20notice%2C%20this%20list%20of%20conditions%20and%20the%20following%20disclaimer.%0A%20*%0A%20*%202.%20Redistributions%20in%20binary%20form%20must%20reproduce%20the%20above%20copyright%20notice%2C%20this%20list%20of%20conditions%20and%20the%20following%20disclaimer%20in%20the%20documentation%20and%2For%20other%20materials%20provided%20with%20the%20distribution.%0A%20*%0A%20*%203.%20Neither%20the%20name%20of%20the%20copyright%20holder%20nor%20the%20names%20of%20its%20contributors%20may%20be%20used%20to%20endorse%20or%20promote%20products%20derived%20from%20this%20software%20without%20specific%20prior%20written%20permission.%0A%20*%0A%20*%20THIS%20SOFTWARE%20IS%20PROVIDED%20BY%20THE%20COPYRIGHT%20HOLDERS%20AND%20CONTRIBUTORS%20%22AS%20IS%22%20AND%20ANY%20EXPRESS%20OR%20IMPLIED%20WARRANTIES%2C%20INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20THE%20IMPLIED%20WARRANTIES%20OF%20MERCHANTABILITY%20AND%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE%20ARE%20DISCLAIMED.%20IN%20NO%20EVENT%20SHALL%20THE%20COPYRIGHT%20HOLDER%20OR%20CONTRIBUTORS%20BE%20LIABLE%20FOR%20ANY%20DIRECT%2C%20INDIRECT%2C%20INCIDENTAL%2C%20SPECIAL%2C%20EXEMPLARY%2C%20OR%20CONSEQUENTIAL%20DAMAGES%20(INCLUDING%2C%20BUT%20NOT%20LIMITED%20TO%2C%20PROCUREMENT%20OF%20SUBSTITUTE%20GOODS%20OR%20SERVICES%3B%20LOSS%20OF%20USE%2C%20DATA%2C%20OR%20PROFITS%3B%20OR%20BUSINESS%20INTERRUPTION)%20HOWEVER%20CAUSED%20AND%20ON%20ANY%20THEORY%20OF%20LIABILITY%2C%20WHETHER%20IN%20CONTRACT%2C%20STRICT%20LIABILITY%2C%20OR%20TORT%20(INCLUDING%20NEGLIGENCE%20OR%20OTHERWISE)%20ARISING%20IN%20ANY%20WAY%20OUT%20OF%20THE%20USE%20OF%20THIS%20SOFTWARE%2C%20EVEN%20IF%20ADVISED%20OF%20THE%20POSSIBILITY%20OF%20SUCH%20DAMAGE.%0A%20*%2F%0A%0A%2F*%20generated%20l10n%20code%20*%2FScratch.translate.setup(%7B%22fi%22%3A%7B%22griffpatch.applyAngForce%22%3A%22py%C3%B6ri%20voimalla%20%5Bforce%5D%22%2C%22griffpatch.applyForce%22%3A%22ty%C3%B6nn%C3%A4%20voimalla%20%5Bforce%5D%20suuntaan%20%5Bdir%5D%22%2C%22griffpatch.categoryName%22%3A%22Fysiikka%22%2C%22griffpatch.changeScroll%22%3A%22muuta%20vierityst%C3%A4%20arvoilla%20x%3A%20%5Box%5D%20y%3A%20%5Boy%5D%22%2C%22griffpatch.changeVelocity%22%3A%22muuta%20nopeutta%20arvoilla%20sx%3A%20%5Bsx%5D%20sy%3A%20%5Bsy%5D%22%2C%22griffpatch.disablePhysics%22%3A%22poista%20fysiikka%20k%C3%A4yt%C3%B6st%C3%A4%20t%C3%A4ss%C3%A4%20hahmossa%22%2C%22griffpatch.doTick%22%3A%22vaiheittainen%20simulaatio%22%2C%22griffpatch.getAngVelocity%22%3A%22kulmanopeus%22%2C%22griffpatch.getDensity%22%3A%22tiheys%22%2C%22griffpatch.getFriction%22%3A%22kitka%22%2C%22griffpatch.getGravityX%22%3A%22x-painovoima%22%2C%22griffpatch.getGravityY%22%3A%22y-painovoima%22%2C%22griffpatch.getRestitution%22%3A%22kimmoisuus%22%2C%22griffpatch.getScrollX%22%3A%22x-vieritys%22%2C%22griffpatch.getScrollY%22%3A%22y-vieritys%22%2C%22griffpatch.getStatic%22%3A%22onko%20kiintonainen%3F%22%2C%22griffpatch.getTickRate%22%3A%22simulaation%20nopeus%22%2C%22griffpatch.getTouching%22%3A%22luettelo%20%5Bwhere%5D%20koskettavista%20hahmoista%22%2C%22griffpatch.getVelocityX%22%3A%22x-nopeus%22%2C%22griffpatch.getVelocityY%22%3A%22y-nopeus%22%2C%22griffpatch.setAngVelocity%22%3A%22aseta%20kulmanopeudeksi%20%5Bforce%5D%22%2C%22griffpatch.setDensity%22%3A%22aseta%20tiheydeksi%20%5Bdensity%5D%22%2C%22griffpatch.setDensityValue%22%3A%22aseta%20tiheydeksi%20%5Bdensity%5D%22%2C%22griffpatch.setFriction%22%3A%22aseta%20kitkaksi%20%5Bfriction%5D%22%2C%22griffpatch.setFrictionValue%22%3A%22aseta%20kitkaksi%20%5Bfriction%5D%22%2C%22griffpatch.setGravity%22%3A%22siirr%C3%A4%20painovoima%20sijaintiin%20x%3A%20%5Bgx%5D%20y%3A%20%5Bgy%5D%22%2C%22griffpatch.setPhysics%22%3A%22ota%20%5Bmode%5D%20tila%20k%C3%A4ytt%C3%B6%C3%B6n%20%5Bshape%5D%20%20%22%2C%22griffpatch.setPosition%22%3A%22mene%20sijaintiin%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%20%5Bspace%5D%22%2C%22griffpatch.setProperties%22%3A%22aseta%20tiheydeksi%20%5Bdensity%5D%2C%20karkeudeksi%20%5Bfriction%5D%20ja%20kimmoisuudeksi%20%5Brestitution%5D%22%2C%22griffpatch.setRestitution%22%3A%22aseta%20kimmoisuudeksi%20%5Brestitution%5D%22%2C%22griffpatch.setRestitutionValue%22%3A%22aseta%20kimmoisuudeksi%20%5Brestitution%5D%22%2C%22griffpatch.setScroll%22%3A%22aseta%20vieritykseksi%20x%3A%20%5Box%5D%20y%3A%20%5Boy%5D%22%2C%22griffpatch.setStage%22%3A%22aseta%20esiintymislavan%20rajoiksi%20%5BstageType%5D%22%2C%22griffpatch.setStatic%22%3A%22aseta%20kiintonaisuus%20%5Bstatic%5D%22%2C%22griffpatch.setTickRate%22%3A%22aseta%20simulaation%20nopeudeksi%20%5Brate%5D%20%2Fs%22%2C%22griffpatch.setVelocity%22%3A%22aseta%20nopeudeksi%20sx%3A%20%5Bsx%5D%20sy%3A%20%5Bsy%5D%22%7D%2C%22it%22%3A%7B%22griffpatch.applyAngForce%22%3A%22ruota%20con%20forza%20%5Bforce%5D%22%2C%22griffpatch.applyForce%22%3A%22spingi%20con%20forza%20%5Bforce%5D%20in%20direzione%20%5Bdir%5D%22%2C%22griffpatch.categoryName%22%3A%22Fisica%22%2C%22griffpatch.changeScroll%22%3A%22cambia%20scorrimento%20di%20x%3A%20%5Box%5D%20y%3A%20%5Boy%5D%22%2C%22griffpatch.changeVelocity%22%3A%22cambia%20velocit%C3%A0%20di%20vx%3A%20%5Bsx%5D%20vy%3A%20%5Bsy%5D%22%2C%22griffpatch.disablePhysics%22%3A%22disattiva%20gestione%20della%20fisica%20per%20questo%20sprite%22%2C%22griffpatch.doTick%22%3A%22esegui%20un%20passo%20della%20simulazione%22%2C%22griffpatch.getAngVelocity%22%3A%22velocit%C3%A0%20angolare%22%2C%22griffpatch.getDensity%22%3A%22densit%C3%A0%22%2C%22griffpatch.getFriction%22%3A%22attrito%22%2C%22griffpatch.getGravityX%22%3A%22gravit%C3%A0%20x%22%2C%22griffpatch.getGravityY%22%3A%22gravit%C3%A0%20y%22%2C%22griffpatch.getRestitution%22%3A%22elasticit%C3%A0%22%2C%22griffpatch.getScrollX%22%3A%22scorrimento%20x%22%2C%22griffpatch.getScrollY%22%3A%22scorrimento%20y%22%2C%22griffpatch.getStatic%22%3A%22fisso%22%2C%22griffpatch.getTickRate%22%3A%22passi%20simulazione%22%2C%22griffpatch.getTouching%22%3A%22sprite%20a%20contatto%20con%20%5Bwhere%5D%22%2C%22griffpatch.getVelocityX%22%3A%22velocit%C3%A0%20x%22%2C%22griffpatch.getVelocityY%22%3A%22velocit%C3%A0%20y%22%2C%22griffpatch.setAngVelocity%22%3A%22porta%20velocit%C3%A0%20angolare%20a%20%5Bforce%5D%22%2C%22griffpatch.setDensity%22%3A%22imposta%20densit%C3%A0%20a%20%5Bdensity%5D%22%2C%22griffpatch.setDensityValue%22%3A%22imposta%20densit%C3%A0%20a%20%5Bdensity%5D%22%2C%22griffpatch.setFriction%22%3A%22imposta%20attrito%20a%20%5Bfriction%5D%22%2C%22griffpatch.setFrictionValue%22%3A%22imposta%20attrito%20a%20%5Bfriction%5D%22%2C%22griffpatch.setGravity%22%3A%22imposta%20gravit%C3%A0%20a%20x%3A%20%5Bgx%5D%20y%3A%20%5Bgy%5D%22%2C%22griffpatch.setPhysics%22%3A%22abilita%20modalit%C3%A0%20%5Bmode%5D%20per%20le%20forme%20%5Bshape%5D%22%2C%22griffpatch.setPosition%22%3A%22vai%20a%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%20di%20%5Bspace%5D%22%2C%22griffpatch.setProperties%22%3A%22imposta%20densit%C3%A0%20%5Bdensity%5D%20attrito%20%5Bfriction%5D%20elasticit%C3%A0%20%5Brestitution%5D%22%2C%22griffpatch.setRestitution%22%3A%22imposta%20elasticit%C3%A0%20a%20%5Brestitution%5D%22%2C%22griffpatch.setRestitutionValue%22%3A%22imposta%20elasticit%C3%A0%20a%20%5Brestitution%5D%22%2C%22griffpatch.setScroll%22%3A%22imposta%20scorrimento%20a%20x%3A%20%5Box%5D%20y%3A%20%5Boy%5D%22%2C%22griffpatch.setStage%22%3A%22imposta%20i%20bordi%20dello%20stage%20a%20%5BstageType%5D%22%2C%22griffpatch.setStatic%22%3A%22usa%20modalit%C3%A0%20%5Bstatic%5D%22%2C%22griffpatch.setTickRate%22%3A%22imposta%20passi%20simulazione%20a%20%5Brate%5D%2Fs%22%2C%22griffpatch.setVelocity%22%3A%22porta%20velocit%C3%A0%20a%20vx%3A%20%5Bsx%5D%20vy%3A%20%5Bsy%5D%22%7D%2C%22ja%22%3A%7B%22griffpatch.categoryName%22%3A%22%E7%89%A9%E7%90%86%22%2C%22griffpatch.disablePhysics%22%3A%22%E3%81%93%E3%81%AE%E3%82%B9%E3%83%97%E3%83%A9%E3%82%A4%E3%83%88%E3%81%AE%E7%89%A9%E7%90%86%E6%BC%94%E7%AE%97%E3%82%92%E7%84%A1%E5%8A%B9%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22griffpatch.getGravityX%22%3A%22x%E5%BA%A7%E6%A8%99%E6%96%B9%E5%90%91%E3%81%AE%E9%87%8D%E5%8A%9B%22%2C%22griffpatch.getGravityY%22%3A%22y%E5%BA%A7%E6%A8%99%E6%96%B9%E5%90%91%E3%81%AE%E9%87%8D%E5%8A%9B%22%2C%22griffpatch.getRestitution%22%3A%22%E3%83%90%E3%82%A6%E3%83%B3%E3%83%89%22%7D%2C%22ko%22%3A%7B%22griffpatch.applyAngForce%22%3A%22%ED%9E%98%20%5Bforce%5D%20%EB%A7%8C%ED%81%BC%20%ED%9A%8C%EC%A0%84%ED%95%98%EA%B8%B0%22%2C%22griffpatch.applyForce%22%3A%22%ED%9E%98%EC%9D%84%20%5Bforce%5D%20%EB%A7%8C%ED%81%BC%20%5Bdir%5D%20%EB%B0%A9%ED%96%A5%EC%9C%BC%EB%A1%9C%20%EA%B0%80%ED%95%98%EA%B8%B0%20%22%2C%22griffpatch.categoryName%22%3A%22%EB%AC%BC%EB%A6%AC%22%2C%22griffpatch.changeScroll%22%3A%22%ED%99%94%EB%A9%B4%20%EC%8A%A4%ED%81%AC%EB%A1%A4%EC%9D%84%20x%3A%20%5Box%5D%20y%3A%20%5Boy%5D%20%EB%A7%8C%ED%81%BC%20%EB%B0%94%EA%BE%B8%EA%B8%B0%22%2C%22griffpatch.changeVelocity%22%3A%22%EC%86%8D%EB%8F%84%EB%A5%BC%20x%3A%5Bsx%5D%20y%3A%5Bsy%5D%20%EB%A7%8C%ED%81%BC%20%EB%B0%94%EA%BE%B8%EA%B8%B0%22%2C%22griffpatch.disablePhysics%22%3A%22%EC%9D%B4%20%EC%8A%A4%ED%94%84%EB%9D%BC%EC%9D%B4%ED%8A%B8%EC%97%90%20%EB%AC%BC%EB%A6%AC%20%ED%95%B4%EC%A0%9C%ED%95%98%EA%B8%B0%22%2C%22griffpatch.doTick%22%3A%22%EB%AC%BC%EB%A6%AC%20%EC%97%B0%EC%82%B0%ED%95%98%EA%B8%B0%22%2C%22griffpatch.getAngVelocity%22%3A%22%EA%B0%81%EC%86%8D%EB%8F%84%22%2C%22griffpatch.getDensity%22%3A%22%EB%B0%80%EB%8F%84%22%2C%22griffpatch.getFriction%22%3A%22%EB%A7%88%EC%B0%B0%EB%A0%A5%22%2C%22griffpatch.getGravityX%22%3A%22%EC%A4%91%EB%A0%A5%20x%22%2C%22griffpatch.getGravityY%22%3A%22%EC%A4%91%EB%A0%A5%20y%22%2C%22griffpatch.getRestitution%22%3A%22%ED%83%84%EC%84%B1%EB%A0%A5%22%2C%22griffpatch.getScrollX%22%3A%22%ED%99%94%EB%A9%B4%20%EC%8A%A4%ED%81%AC%EB%A1%A4%20x%22%2C%22griffpatch.getScrollY%22%3A%22%ED%99%94%EB%A9%B4%20%EC%8A%A4%ED%81%AC%EB%A1%A4%20y%22%2C%22griffpatch.getStatic%22%3A%22%EA%B3%A0%EC%A0%95%EB%90%98%EC%97%88%EB%8A%94%EA%B0%80%3F%22%2C%22griffpatch.getTickRate%22%3A%22%EB%AC%BC%EB%A6%AC%20%EC%97%B0%EC%82%B0%20%EC%86%8D%EB%8F%84%22%2C%22griffpatch.getTouching%22%3A%22%5Bwhere%5D%EC%97%90%20%EB%8B%BF%EC%9D%80%20%EC%8A%A4%ED%94%84%EB%9D%BC%EC%9D%B4%ED%8A%B8%20%EB%AA%A9%EB%A1%9D%22%2C%22griffpatch.getVelocityX%22%3A%22%EC%86%8D%EB%8F%84%20x%22%2C%22griffpatch.getVelocityY%22%3A%22%EC%86%8D%EB%8F%84%20y%22%2C%22griffpatch.setAngVelocity%22%3A%22%EA%B0%81%EC%86%8D%EB%8F%84%EB%A5%BC%20%5Bforce%5D(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22griffpatch.setDensity%22%3A%22%EB%B0%80%EB%8F%84%EB%A5%BC%20%5Bdensity%5D(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22griffpatch.setDensityValue%22%3A%22%EB%B0%80%EB%8F%84%EB%A5%BC%20%5Bdensity%5D(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22griffpatch.setFriction%22%3A%22%EB%A7%88%EC%B0%B0%EB%A0%A5%EC%9D%84%20%5Bfriction%5D(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22griffpatch.setFrictionValue%22%3A%22%EB%A7%88%EC%B0%B0%EB%A0%A5%EC%9D%84%20%5Bfriction%5D(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22griffpatch.setGravity%22%3A%22%EC%A4%91%EB%A0%A5%EC%9D%84%20x%3A%5Bgx%5D%20y%3A%5Bgy%5D%20(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22griffpatch.setPhysics%22%3A%22%5Bshape%5D%EC%97%90%20%5Bmode%5D%EB%AA%A8%EB%93%9C%20%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22griffpatch.setPosition%22%3A%22x%3A%20%5Bx%5D%20y%3A%20%5By%5D%20%5Bspace%5D(%EC%9C%BC)%EB%A1%9C%20%EC%9D%B4%EB%8F%99%ED%95%98%EA%B8%B0%22%2C%22griffpatch.setProperties%22%3A%22%EB%B0%80%EB%8F%84%20%5Bdensity%5D%20%EB%A7%88%EC%B0%B0%EB%A0%A5%20%5Bfriction%5D%20%ED%83%84%EC%84%B1%EB%A0%A5%20%5Brestitution%5D(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22griffpatch.setRestitution%22%3A%22%ED%83%84%EC%84%B1%EB%A0%A5%EC%9D%84%20%5Brestitution%5D(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22griffpatch.setRestitutionValue%22%3A%22%ED%83%84%EC%84%B1%EB%A0%A5%EC%9D%84%20%5Brestitution%5D(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22griffpatch.setScroll%22%3A%22%ED%99%94%EB%A9%B4%20%EC%8A%A4%ED%81%AC%EB%A1%A4%EC%9D%84%20x%3A%20%5Box%5D%20y%3A%20%5Boy%5D(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22griffpatch.setStage%22%3A%22%EB%AC%B4%EB%8C%80%20%EB%B2%94%EC%9C%84%EB%A5%BC%20%5BstageType%5D(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22griffpatch.setStatic%22%3A%22%5Bstatic%5D%ED%95%98%EA%B8%B0%22%2C%22griffpatch.setTickRate%22%3A%22%EB%AC%BC%EB%A6%AC%20%EC%97%B0%EC%82%B0%20%EC%86%8D%EB%8F%84%EB%A5%BC%20%5Brate%5D%2Fs%20%EC%9C%BC%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22griffpatch.setVelocity%22%3A%22%EC%86%8D%EB%8F%84%EB%A5%BC%20x%3A%5Bsx%5D%20y%3A%5Bsy%5D%20(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%7D%2C%22nb%22%3A%7B%22griffpatch.applyAngForce%22%3A%22spinn%20med%20kraft%20%5Bforce%5D%22%2C%22griffpatch.applyForce%22%3A%22skyv%20med%20kraft%20%5Bforce%5D%20i%20retning%20%5Bdir%5D%22%2C%22griffpatch.categoryName%22%3A%22Fysikk%22%2C%22griffpatch.changeScroll%22%3A%22endre%20rulling%20med%20x%3A%20%5Box%5D%20y%3A%20%5Boy%5D%22%2C%22griffpatch.changeVelocity%22%3A%22endre%20hastighet%20med%20sx%3A%20%5Bsx%5D%20sy%3A%20%5Bsy%5D%22%2C%22griffpatch.disablePhysics%22%3A%22deaktiver%20fysikk%20for%20denne%20figuren%22%2C%22griffpatch.doTick%22%3A%22trinn%20simulering%22%2C%22griffpatch.getAngVelocity%22%3A%22vinkelhastighet%22%2C%22griffpatch.getDensity%22%3A%22tetthet%22%2C%22griffpatch.getFriction%22%3A%22friksjon%22%2C%22griffpatch.getGravityX%22%3A%22tyngdekraft%20x%22%2C%22griffpatch.getGravityY%22%3A%22tyngdekraft%20y%22%2C%22griffpatch.getRestitution%22%3A%22sprette%22%2C%22griffpatch.getScrollX%22%3A%22x%20rulle%22%2C%22griffpatch.getScrollY%22%3A%22y%20rulle%22%2C%22griffpatch.getStatic%22%3A%22fikset%3F%22%2C%22griffpatch.getTickRate%22%3A%22simuleringshastighet%22%2C%22griffpatch.getVelocityX%22%3A%22x%20hastighet%22%2C%22griffpatch.getVelocityY%22%3A%22y%20hastighet%22%2C%22griffpatch.setAngVelocity%22%3A%22sett%20angul%C3%A6r%20hastighet%20til%20%5Bforce%5D%22%2C%22griffpatch.setDensity%22%3A%22sett%20tettheten%20til%20%5Bdensity%5D%22%2C%22griffpatch.setDensityValue%22%3A%22sett%20tettheten%20til%20%5Bdensity%5D%22%2C%22griffpatch.setFriction%22%3A%22sett%20friksjon%20til%20%5Bfriction%5D%22%2C%22griffpatch.setFrictionValue%22%3A%22sett%20friksjon%20til%20%5Bfriction%5D%22%2C%22griffpatch.setGravity%22%3A%22sett%20tyngdekraften%20til%20x%3A%20%5Bgx%5D%20y%3A%20%5Bgy%5D%22%2C%22griffpatch.setPhysics%22%3A%22aktiver%20for%20%5Bshape%5D%20modus%20%5Bmode%5D%22%2C%22griffpatch.setPosition%22%3A%22g%C3%A5%20til%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%20%5Bspace%5D%22%2C%22griffpatch.setProperties%22%3A%22sett%20tetthet%20%5Bdensity%5D%20ruhet%20%5Bfriction%5D%20sprett%20%5Brestitution%5D%22%2C%22griffpatch.setRestitution%22%3A%22sett%20sprett%20til%20%5Brestitution%5D%22%2C%22griffpatch.setRestitutionValue%22%3A%22sett%20sprett%20til%20%5Brestitution%5D%22%2C%22griffpatch.setScroll%22%3A%22sett%20rulle%20til%20x%3A%20%5Box%5D%20y%3A%20%5Boy%5D%22%2C%22griffpatch.setStage%22%3A%22sett%20scenegrensene%20til%20%5BstageType%5D%22%2C%22griffpatch.setStatic%22%3A%22set%20fikset%20til%20%5Bstatic%5D%22%2C%22griffpatch.setTickRate%22%3A%22sett%20simuleringstakten%20til%20%5Brate%5D%2Fs%22%2C%22griffpatch.setVelocity%22%3A%22sett%20hastighet%20til%20sx%3A%20%5Bsx%5D%20sy%3A%20%5Bsy%5D%22%7D%2C%22nl%22%3A%7B%22griffpatch.applyAngForce%22%3A%22draai%20met%20kracht%20%5Bforce%5D%22%2C%22griffpatch.applyForce%22%3A%22duw%20met%20kracht%20%5Bforce%5D%20in%20richting%20%5Bdir%5D%22%2C%22griffpatch.categoryName%22%3A%22Fysica-simulatie%22%2C%22griffpatch.changeScroll%22%3A%22verander%20scroll%20met%20x%3A%20%5Box%5D%20y%3A%20%5Boy%5D%22%2C%22griffpatch.changeVelocity%22%3A%22verander%20snelheid%20met%20sx%3A%20%5Bsx%5D%20sy%3A%20%5Bsy%5D%22%2C%22griffpatch.disablePhysics%22%3A%22zet%20simulatie%20uit%20voor%20deze%20sprite%22%2C%22griffpatch.doTick%22%3A%22voer%20simulatie%20%C3%A9%C3%A9n%20keer%20uit%22%2C%22griffpatch.getAngVelocity%22%3A%22hoeksnelheid%22%2C%22griffpatch.getDensity%22%3A%22dichtheid%22%2C%22griffpatch.getFriction%22%3A%22wrijving%22%2C%22griffpatch.getGravityX%22%3A%22zwaartekracht%20x%22%2C%22griffpatch.getGravityY%22%3A%22zwaartekracht%20y%22%2C%22griffpatch.getRestitution%22%3A%22stuiterkracht%22%2C%22griffpatch.getScrollX%22%3A%22x-scroll%22%2C%22griffpatch.getScrollY%22%3A%22y-scroll%22%2C%22griffpatch.getStatic%22%3A%22vastgezet%3F%22%2C%22griffpatch.getTickRate%22%3A%22simulatiefrequentie%22%2C%22griffpatch.getTouching%22%3A%22alle%20sprites%20die%20%5Bwhere%5D%20aanraken%22%2C%22griffpatch.getVelocityX%22%3A%22snelheid%20x%22%2C%22griffpatch.getVelocityY%22%3A%22snelheid%20y%22%2C%22griffpatch.setAngVelocity%22%3A%22maak%20hoeksnelheid%20%5Bforce%5D%22%2C%22griffpatch.setDensity%22%3A%22maak%20dichtheid%20%5Bdensity%5D%22%2C%22griffpatch.setDensityValue%22%3A%22maak%20dichtheid%20%5Bdensity%5D%22%2C%22griffpatch.setFriction%22%3A%22maak%20wrijving%20%5Bfriction%5D%22%2C%22griffpatch.setFrictionValue%22%3A%22maak%20wrijving%20%5Bfriction%5D%22%2C%22griffpatch.setGravity%22%3A%22stel%20zwaartekracht%20in%20op%20x%3A%20%5Bgx%5D%20y%3A%20%5Bgy%5D%22%2C%22griffpatch.setPhysics%22%3A%22schakel%20voor%20%5Bshape%5D%20de%20stand%20%5Bmode%5D%20in%22%2C%22griffpatch.setPosition%22%3A%22ga%20naar%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%20%5Bspace%5D%22%2C%22griffpatch.setProperties%22%3A%22maak%20dichtheid%20%5Bdensity%5D%2C%20wrijving%20%5Bfriction%5D%20en%20stuiterkracht%20%5Brestitution%5D%22%2C%22griffpatch.setRestitution%22%3A%22maak%20stuiterkracht%20%5Brestitution%5D%22%2C%22griffpatch.setRestitutionValue%22%3A%22maak%20stuiterkracht%20%5Brestitution%5D%22%2C%22griffpatch.setScroll%22%3A%22stel%20scroll%20in%20op%20x%3A%20%5Box%5D%20y%3A%20%5Boy%5D%22%2C%22griffpatch.setStage%22%3A%22maak%20grenstype%20%5BstageType%5D%22%2C%22griffpatch.setStatic%22%3A%22maak%20vastzettype%20%5Bstatic%5D%22%2C%22griffpatch.setTickRate%22%3A%22maak%20simulatiefrequentie%20%5Brate%5D%20%2F%20sec%22%2C%22griffpatch.setVelocity%22%3A%22stel%20snelheid%20in%20op%20sx%3A%20%5Bsx%5D%20sy%3A%20%5Bsy%5D%22%7D%2C%22pl%22%3A%7B%22griffpatch.getDensity%22%3A%22g%C4%99sto%C5%9B%C4%87%22%7D%2C%22ru%22%3A%7B%22griffpatch.applyAngForce%22%3A%22%D0%BA%D1%80%D1%83%D1%82%D0%B8%D1%82%D1%8C%20%D1%81%20%D1%81%D0%B8%D0%BB%D0%BE%D0%B9%20%5Bforce%5D%22%2C%22griffpatch.applyForce%22%3A%22%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B8%D1%82%D1%8C%20%D1%81%D0%B8%D0%BB%D1%83%20%5Bforce%5D%20%D0%B2%20%D0%BD%D0%B0%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B8%20%5Bdir%5D%22%2C%22griffpatch.categoryName%22%3A%22%D0%A4%D0%B8%D0%B7%D0%B8%D0%BA%D0%B0%22%2C%22griffpatch.changeScroll%22%3A%22%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20%D1%81%D0%BA%D1%80%D0%BE%D0%BB%D0%BB%20%D0%BD%D0%B0%20x%3A%5Box%5D%20y%3A%5Boy%5D%22%2C%22griffpatch.changeVelocity%22%3A%22%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D1%8C%20%D0%BD%D0%B0%20sx%3A%5Bsx%5Dsy%3A%5Bsy%5D%20%22%2C%22griffpatch.disablePhysics%22%3A%22%D0%B2%D1%8B%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D1%8C%20%D1%84%D0%B8%D0%B7%D0%B8%D0%BA%D1%83%20%D0%B4%D0%BB%D1%8F%20%D1%8D%D1%82%D0%BE%D0%B3%D0%BE%20%D1%81%D0%BF%D1%80%D0%B0%D0%B9%D1%82%D0%B0%22%2C%22griffpatch.doTick%22%3A%22%D1%88%D0%B0%D0%B3%D0%BD%D1%83%D1%82%D1%8C%20%D1%81%D0%B8%D0%BC%D1%83%D0%BB%D1%8F%D1%86%D0%B8%D1%8E%22%2C%22griffpatch.getAngVelocity%22%3A%22%D1%83%D0%B3%D0%BB%D0%BE%D0%B2%D0%B0%D1%8F%20%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D1%8C%22%2C%22griffpatch.getDensity%22%3A%22%D0%BF%D0%BB%D0%BE%D1%82%D0%BD%D0%BE%D1%81%D1%82%D1%8C%22%2C%22griffpatch.getFriction%22%3A%22%D1%82%D1%80%D0%B5%D0%BD%D0%B8%D0%B5%22%2C%22griffpatch.getGravityX%22%3A%22%D0%B3%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D0%B0%D1%86%D0%B8%D1%8F%20x%22%2C%22griffpatch.getGravityY%22%3A%22%D0%B3%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D0%B0%D1%86%D0%B8%D1%8F%20y%22%2C%22griffpatch.getRestitution%22%3A%22%D1%83%D0%BF%D1%80%D1%83%D0%B3%D0%BE%D1%81%D1%82%D1%8C%22%2C%22griffpatch.getScrollX%22%3A%22%D1%81%D0%BA%D1%80%D0%BE%D0%BB%D0%BB%20x%22%2C%22griffpatch.getScrollY%22%3A%22%D1%81%D0%BA%D1%80%D0%BE%D0%BB%D0%BB%20y%22%2C%22griffpatch.getStatic%22%3A%22%D0%B7%D0%B0%D1%84%D0%B8%D0%BA%D1%81%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%3F%22%2C%22griffpatch.getTickRate%22%3A%22%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D1%8C%20%D1%81%D0%B8%D0%BC%D1%83%D0%BB%D1%8F%D1%86%D0%B8%D0%B8%22%2C%22griffpatch.getTouching%22%3A%22%D1%81%D0%BF%D0%B8%D1%81%D0%BE%D0%BA%20%D1%81%D0%BF%D1%80%D0%B0%D0%B9%D1%82%D0%BE%D0%B2%20%D0%BA%D0%B0%D1%81%D0%B0%D1%8E%D1%89%D0%B8%D1%85%D1%81%D1%8F%20%5Bwhere%5D%22%2C%22griffpatch.getVelocityX%22%3A%22%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D1%8C%20x%22%2C%22griffpatch.getVelocityY%22%3A%22%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D1%8C%20y%22%2C%22griffpatch.setAngVelocity%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%83%D0%B3%D0%BB%D0%BE%D0%B2%D1%83%D1%8E%20%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D1%8C%20%D0%B2%20%5Bforce%5D%22%2C%22griffpatch.setDensity%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D0%BF%D0%BB%D0%BE%D1%82%D0%BD%D0%BE%D1%81%D1%82%D1%8C%20%D0%B2%20%5Bdensity%5D%22%2C%22griffpatch.setDensityValue%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D0%BF%D0%BB%D0%BE%D1%82%D0%BD%D0%BE%D1%81%D1%82%D1%8C%20%D0%B2%20%5Bdensity%5D%22%2C%22griffpatch.setFriction%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%82%D1%80%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%B2%20%5Bfriction%5D%22%2C%22griffpatch.setFrictionValue%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%82%D1%80%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%B2%20%5Bfriction%5D%22%2C%22griffpatch.setGravity%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D0%B3%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D0%B0%D1%86%D0%B8%D1%8E%20%D0%B2%20x%3A%5Bgx%5D%20y%3A%5Bgy%5D%22%2C%22griffpatch.setPhysics%22%3A%22%D0%B2%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D1%8C%20%D0%B4%D0%BB%D1%8F%20%5Bshape%5D%20%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%20%5Bmode%5D%22%2C%22griffpatch.setPosition%22%3A%22%D0%BF%D0%B5%D1%80%D0%B5%D0%B9%D1%82%D0%B8%20%D0%B2%20x%3A%5Bx%5D%20y%3A%5By%5D%20%5Bspace%5D%22%2C%22griffpatch.setProperties%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D0%BF%D0%BB%D0%BE%D1%82%D0%BD%D0%BE%D1%81%D1%82%D1%8C%20%5Bdensity%5D%20%D1%82%D1%80%D0%B5%D0%BD%D0%B8%D0%B5%20%5Bfriction%5D%20%D1%83%D0%BF%D1%80%D1%83%D0%B3%D0%BE%D1%81%D1%82%D1%8C%20%5Brestitution%5D%22%2C%22griffpatch.setRestitution%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%83%D0%BF%D1%80%D1%83%D0%B3%D0%BE%D1%81%D1%82%D1%8C%20%D0%B2%20%5Brestitution%5D%22%2C%22griffpatch.setRestitutionValue%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%83%D0%BF%D1%80%D1%83%D0%B3%D0%BE%D1%81%D1%82%D1%8C%20%D0%B2%20%5Brestitution%5D%22%2C%22griffpatch.setScroll%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%81%D0%BA%D1%80%D0%BE%D0%BB%D0%BB%20%D0%B2%20x%3A%5Box%5D%20y%3A%5Boy%5D%22%2C%22griffpatch.setStage%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D0%B3%D1%80%D0%B0%D0%BD%D0%B8%D1%86%D1%8B%20%D1%81%D1%86%D0%B5%D0%BD%D1%8B%20%D0%BA%D0%B0%D0%BA%20%5BstageType%5D%22%2C%22griffpatch.setStatic%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%82%D0%B8%D0%BF%20%D1%84%D0%B8%D0%BA%D1%81%D0%B0%D1%86%D0%B8%D0%B8%20%D0%BA%D0%B0%D0%BA%20%5Bstatic%5D%22%2C%22griffpatch.setTickRate%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D1%8C%20%D1%81%D0%B8%D0%BC%D1%83%D0%BB%D1%8F%D1%86%D0%B8%D0%B8%20%D0%B2%20%5Brate%5D%2F%D1%81%D0%B5%D0%BA%22%2C%22griffpatch.setVelocity%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D1%8C%20%D0%B2%20sx%3A%5Bsx%5Dsy%3A%5Bsy%5D%22%7D%2C%22zh-cn%22%3A%7B%22griffpatch.applyAngForce%22%3A%22%E6%97%8B%E8%BD%AC%5Bforce%5D%E5%BA%A6%22%2C%22griffpatch.applyForce%22%3A%22%E5%9C%A8%E6%96%B9%E5%90%91%5Bdir%5D%E5%A2%9E%E5%8A%A0%E4%B8%80%E4%B8%AA%E5%A4%A7%E5%B0%8F%E4%B8%BA%5Bforce%5D%E7%9A%84%E5%8A%9B%22%2C%22griffpatch.categoryName%22%3A%22%E7%89%A9%E7%90%86%E5%BC%95%E6%93%8E%22%2C%22griffpatch.changeScroll%22%3A%22%E8%BE%B9%E7%95%8Cx%E5%A2%9E%E5%8A%A0%5Box%5D%20y%E5%A2%9E%E5%8A%A0%5Boy%5D%22%2C%22griffpatch.changeVelocity%22%3A%22%E8%A7%92%E8%89%B2%E9%87%8D%E5%8A%9B%E6%96%B9%E5%90%91%E5%A2%9E%E5%8A%A0%20sx%5Bsx%5D%20sy%5Bsy%5D%22%2C%22griffpatch.disablePhysics%22%3A%22%E5%8F%96%E6%B6%88%E8%BF%99%E4%B8%AA%E8%A7%92%E8%89%B2%E7%9A%84%E7%89%A9%E7%90%86%E6%95%88%E6%9E%9C%22%2C%22griffpatch.doTick%22%3A%22%E9%80%90%E6%AD%A5%E6%A8%A1%E6%8B%9F%22%2C%22griffpatch.getAngVelocity%22%3A%22%E8%A7%92%E9%80%9F%E5%BA%A6%22%2C%22griffpatch.getDensity%22%3A%22%E5%AF%86%E5%BA%A6%22%2C%22griffpatch.getFriction%22%3A%22%E6%91%A9%E6%93%A6%E5%8A%9B%22%2C%22griffpatch.getGravityX%22%3A%22%E9%87%8D%E5%8A%9B%E6%96%B9%E5%90%91x%E5%9D%90%E6%A0%87%22%2C%22griffpatch.getGravityY%22%3A%22%E9%87%8D%E5%8A%9B%E6%96%B9%E5%90%91y%E5%9D%90%E6%A0%87%22%2C%22griffpatch.getRestitution%22%3A%22%E5%BC%B9%E6%80%A7%22%2C%22griffpatch.getScrollX%22%3A%22x%E8%BE%B9%E7%95%8C%22%2C%22griffpatch.getScrollY%22%3A%22y%E8%BE%B9%E7%95%8C%22%2C%22griffpatch.getStatic%22%3A%22%E4%B8%8D%E8%83%BD%E7%A7%BB%E5%8A%A8%EF%BC%9F%22%2C%22griffpatch.getTickRate%22%3A%22%E6%AF%8F%E7%A7%92%E6%A8%A1%E6%8B%9F%E6%AC%A1%E6%95%B0%22%2C%22griffpatch.getTouching%22%3A%22%E8%A7%92%E8%89%B2%5Bwhere%5D%E6%89%80%E6%8E%A5%E8%A7%A6%E7%9A%84%E5%85%B6%E4%BB%96%E8%A7%92%E8%89%B2%22%2C%22griffpatch.getVelocityX%22%3A%22%E8%A7%92%E8%89%B2%E9%87%8D%E5%8A%9Bx%E6%96%B9%E5%90%91%22%2C%22griffpatch.getVelocityY%22%3A%22%E8%A7%92%E8%89%B2%E9%87%8D%E5%8A%9By%E6%96%B9%E5%90%91%22%2C%22griffpatch.setAngVelocity%22%3A%22%E5%B0%86%E8%A7%92%E8%89%B2%E8%A7%92%E9%80%9F%E5%BA%A6%E8%AE%BE%E4%B8%BA%5Bforce%5D%22%2C%22griffpatch.setDensity%22%3A%22%E5%B0%86%E5%AF%86%E5%BA%A6%E8%AE%BE%E4%B8%BA%5Bdensity%5D%22%2C%22griffpatch.setDensityValue%22%3A%22%E5%B0%86%E5%AF%86%E5%BA%A6%E8%AE%BE%E4%B8%BA%5Bdensity%5D%20%22%2C%22griffpatch.setFriction%22%3A%22%E5%B0%86%E6%91%A9%E6%93%A6%E5%8A%9B%E8%AE%BE%E4%B8%BA%5Bfriction%5D%22%2C%22griffpatch.setFrictionValue%22%3A%22%E5%B0%86%E6%91%A9%E6%93%A6%E5%8A%9B%E8%AE%BE%E4%B8%BA%5Bfriction%5D%20%22%2C%22griffpatch.setGravity%22%3A%22%E5%B0%86%E9%87%8D%E5%8A%9B%E6%96%B9%E5%90%91%E8%AE%BE%E4%B8%BAx%EF%BC%9A%5Bgx%5D%20y%EF%BC%9A%5Bgy%5D%22%2C%22griffpatch.setPhysics%22%3A%22%E5%B0%86%5Bshape%5D%E7%9A%84%E7%89%A9%E7%90%86%E6%A8%A1%E5%BC%8F%E8%AE%BE%E4%B8%BA%5Bmode%5D%22%2C%22griffpatch.setPosition%22%3A%22%E5%9C%A8%5Bspace%5D%E5%89%8D%E5%BE%80x%5Bx%5D%20y%5By%5D%22%2C%22griffpatch.setProperties%22%3A%22%E5%B0%86%E5%AF%86%E5%BA%A6%E8%AE%BE%E4%B8%BA%5Bdensity%5D%20%E6%91%A9%E6%93%A6%E5%8A%9B%5Bfriction%5D%20%E5%BC%B9%E6%80%A7%5Brestitution%5D%22%2C%22griffpatch.setRestitution%22%3A%22%E5%B0%86%E5%BC%B9%E6%80%A7%E8%AE%BE%E4%B8%BA%5Brestitution%5D%22%2C%22griffpatch.setRestitutionValue%22%3A%22%E5%B0%86%E5%BC%B9%E6%80%A7%E8%AE%BE%E4%B8%BA%5Brestitution%5D%20%22%2C%22griffpatch.setScroll%22%3A%22%E5%B0%86%E8%BE%B9%E7%95%8C%E8%AE%BE%E4%B8%BAx%EF%BC%9A%5Box%5Dy%EF%BC%9A%5Boy%5D%22%2C%22griffpatch.setStage%22%3A%22%E5%B0%86%E8%88%9E%E5%8F%B0%E7%B1%BB%E5%9E%8B%E8%AE%BE%E4%B8%BA%5BstageType%5D%22%2C%22griffpatch.setStatic%22%3A%22%E5%B0%86%E7%A7%BB%E5%8A%A8%E6%A8%A1%E5%BC%8F%E8%AE%BE%E4%B8%BA%5Bstatic%5D%22%2C%22griffpatch.setTickRate%22%3A%22%E5%B0%86%E6%AF%8F%E7%A7%92%E6%A8%A1%E6%8B%9F%E6%AC%A1%E6%95%B0%E8%AE%BE%E4%B8%BA%5Brate%5D%22%2C%22griffpatch.setVelocity%22%3A%22%E5%B0%86%E8%A7%92%E8%89%B2%E9%87%8D%E5%8A%9B%E6%96%B9%E5%90%91%E8%AE%BE%E4%B8%BAsx%EF%BC%9A%5Bsx%5Dsy%EF%BC%9A%20%5Bsy%5D%22%7D%7D)%3B%2F*%20end%20generated%20l10n%20code%20*%2F(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20%7B%0A%20%20%20%20throw%20new%20Error(%22Box2D%20must%20be%20run%20unsandboxed%22)%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20First%20we%20need%20to%20load%20the%20Box2D%20physics%20library%20that%20this%20extension%20uses.%0A%20%20%2F%2F%20Scratch.external%20needs%20the%20library%20to%20have%20an%20established%20external%20presence%20that%20isn't%20going%20away%20but%20this%0A%20%20%2F%2F%20library%20is%20very%20old%20and%20seems%20to%20be%20abandoned.%20We%20might%20have%20to%20give%20it%20a%20home%20ourselves.%0A%0A%20%20%2F*%20eslint-disable%20*%2F%0A%0A%20%20%2F*!%0A%20%20%20*%20Copyright%20(c)%202006-2007%20Erin%20Catto%20http%3A%2F%2Fwww.gphysics.com%0A%20%20%20*%0A%20%20%20*%20This%20software%20is%20provided%20'as-is'%2C%20without%20any%20express%20or%20implied%0A%20%20%20*%20warranty.%20%20In%20no%20event%20will%20the%20authors%20be%20held%20liable%20for%20any%20damages%0A%20%20%20*%20arising%20from%20the%20use%20of%20this%20software.%0A%20%20%20*%20Permission%20is%20granted%20to%20anyone%20to%20use%20this%20software%20for%20any%20purpose%2C%0A%20%20%20*%20including%20commercial%20applications%2C%20and%20to%20alter%20it%20and%20redistribute%20it%0A%20%20%20*%20freely%2C%20subject%20to%20the%20following%20restrictions%3A%0A%20%20%20*%201.%20The%20origin%20of%20this%20software%20must%20not%20be%20misrepresented%3B%20you%20must%20not%0A%20%20%20*%20claim%20that%20you%20wrote%20the%20original%20software.%20If%20you%20use%20this%20software%0A%20%20%20*%20in%20a%20product%2C%20an%20acknowledgment%20in%20the%20product%20documentation%20would%20be%0A%20%20%20*%20appreciated%20but%20is%20not%20required.%0A%20%20%20*%202.%20Altered%20source%20versions%20must%20be%20plainly%20marked%20as%20such%2C%20and%20must%20not%20be%0A%20%20%20*%20misrepresented%20as%20being%20the%20original%20software.%0A%20%20%20*%203.%20This%20notice%20may%20not%20be%20removed%20or%20altered%20from%20any%20source%20distribution.%0A%20%20%20*%2F%0A%0A%20%20var%20Box2D%20%3D%20%7B%7D%3B%0A%20%20(function%20(a2j%2C%20undefined)%20%7B%0A%20%20%20%20function%20emptyFn()%20%7B%7D%0A%20%20%20%20a2j.inherit%20%3D%20function%20(cls%2C%20base)%20%7B%0A%20%20%20%20%20%20var%20tmpCtr%20%3D%20cls%3B%0A%20%20%20%20%20%20emptyFn.prototype%20%3D%20base.prototype%3B%0A%20%20%20%20%20%20cls.prototype%20%3D%20new%20emptyFn()%3B%0A%20%20%20%20%20%20cls.prototype.constructor%20%3D%20tmpCtr%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20a2j.generateCallback%20%3D%20function%20generateCallback(context%2C%20cb)%20%7B%0A%20%20%20%20%20%20return%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20cb.apply(context%2C%20arguments)%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20a2j.NVector%20%3D%20function%20NVector(length)%20%7B%0A%20%20%20%20%20%20if%20(length%20%3D%3D%3D%20undefined)%20length%20%3D%200%3B%0A%20%20%20%20%20%20var%20tmp%20%3D%20new%20Array(length%20%7C%7C%200)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20length%3B%20%2B%2Bi)%20tmp%5Bi%5D%20%3D%200%3B%0A%20%20%20%20%20%20return%20tmp%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20a2j.is%20%3D%20function%20is(o1%2C%20o2)%20%7B%0A%20%20%20%20%20%20if%20(o1%20%3D%3D%3D%20null)%20return%20false%3B%0A%20%20%20%20%20%20if%20(o2%20instanceof%20Function%20%26%26%20o1%20instanceof%20o2)%20return%20true%3B%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20o1.constructor.__implements%20!%3D%20undefined%20%26%26%0A%20%20%20%20%20%20%20%20o1.constructor.__implements%5Bo2%5D%0A%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20a2j.parseUInt%20%3D%20function%20(v)%20%7B%0A%20%20%20%20%20%20return%20Math.abs(parseInt(v))%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D)(Box2D)%3B%0A%0A%20%20%2F%2F%23TODO%20remove%20assignments%20from%20global%20namespace%0A%20%20var%20Vector%20%3D%20Array%3B%0A%20%20var%20Vector_a2j_Number%20%3D%20Box2D.NVector%3B%0A%20%20%2F%2Fpackage%20structure%0A%20%20if%20(typeof%20Box2D%20%3D%3D%3D%20%22undefined%22)%20Box2D%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20Box2D.Collision%20%3D%3D%3D%20%22undefined%22)%20Box2D.Collision%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20Box2D.Collision.Shapes%20%3D%3D%3D%20%22undefined%22)%0A%20%20%20%20Box2D.Collision.Shapes%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20Box2D.Common%20%3D%3D%3D%20%22undefined%22)%20Box2D.Common%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20Box2D.Common.Math%20%3D%3D%3D%20%22undefined%22)%20Box2D.Common.Math%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20Box2D.Dynamics%20%3D%3D%3D%20%22undefined%22)%20Box2D.Dynamics%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20Box2D.Dynamics.Contacts%20%3D%3D%3D%20%22undefined%22)%0A%20%20%20%20Box2D.Dynamics.Contacts%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20Box2D.Dynamics.Controllers%20%3D%3D%3D%20%22undefined%22)%0A%20%20%20%20Box2D.Dynamics.Controllers%20%3D%20%7B%7D%3B%0A%20%20if%20(typeof%20Box2D.Dynamics.Joints%20%3D%3D%3D%20%22undefined%22)%20Box2D.Dynamics.Joints%20%3D%20%7B%7D%3B%0A%20%20%2F%2Fpre-definitions%0A%20%20(function%20()%20%7B%0A%20%20%20%20Box2D.Collision.IBroadPhase%20%3D%20%22Box2D.Collision.IBroadPhase%22%3B%0A%0A%20%20%20%20function%20b2AABB()%20%7B%0A%20%20%20%20%20%20b2AABB.b2AABB.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2AABB%20%3D%20b2AABB%3B%0A%0A%20%20%20%20function%20b2Bound()%20%7B%0A%20%20%20%20%20%20b2Bound.b2Bound.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2Bound%20%3D%20b2Bound%3B%0A%0A%20%20%20%20function%20b2BoundValues()%20%7B%0A%20%20%20%20%20%20b2BoundValues.b2BoundValues.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2BoundValues)%0A%20%20%20%20%20%20%20%20this.b2BoundValues.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2BoundValues%20%3D%20b2BoundValues%3B%0A%0A%20%20%20%20function%20b2Collision()%20%7B%0A%20%20%20%20%20%20b2Collision.b2Collision.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2Collision%20%3D%20b2Collision%3B%0A%0A%20%20%20%20function%20b2ContactID()%20%7B%0A%20%20%20%20%20%20b2ContactID.b2ContactID.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2ContactID)%0A%20%20%20%20%20%20%20%20this.b2ContactID.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2ContactID%20%3D%20b2ContactID%3B%0A%0A%20%20%20%20function%20b2ContactPoint()%20%7B%0A%20%20%20%20%20%20b2ContactPoint.b2ContactPoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2ContactPoint%20%3D%20b2ContactPoint%3B%0A%0A%20%20%20%20function%20b2Distance()%20%7B%0A%20%20%20%20%20%20b2Distance.b2Distance.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2Distance%20%3D%20b2Distance%3B%0A%0A%20%20%20%20function%20b2DistanceInput()%20%7B%0A%20%20%20%20%20%20b2DistanceInput.b2DistanceInput.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2DistanceInput%20%3D%20b2DistanceInput%3B%0A%0A%20%20%20%20function%20b2DistanceOutput()%20%7B%0A%20%20%20%20%20%20b2DistanceOutput.b2DistanceOutput.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2DistanceOutput%20%3D%20b2DistanceOutput%3B%0A%0A%20%20%20%20function%20b2DistanceProxy()%20%7B%0A%20%20%20%20%20%20b2DistanceProxy.b2DistanceProxy.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2DistanceProxy%20%3D%20b2DistanceProxy%3B%0A%0A%20%20%20%20function%20b2DynamicTree()%20%7B%0A%20%20%20%20%20%20b2DynamicTree.b2DynamicTree.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2DynamicTree)%0A%20%20%20%20%20%20%20%20this.b2DynamicTree.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2DynamicTree%20%3D%20b2DynamicTree%3B%0A%0A%20%20%20%20function%20b2DynamicTreeBroadPhase()%20%7B%0A%20%20%20%20%20%20b2DynamicTreeBroadPhase.b2DynamicTreeBroadPhase.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2DynamicTreeBroadPhase%20%3D%20b2DynamicTreeBroadPhase%3B%0A%0A%20%20%20%20function%20b2DynamicTreeNode()%20%7B%0A%20%20%20%20%20%20b2DynamicTreeNode.b2DynamicTreeNode.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2DynamicTreeNode%20%3D%20b2DynamicTreeNode%3B%0A%0A%20%20%20%20function%20b2DynamicTreePair()%20%7B%0A%20%20%20%20%20%20b2DynamicTreePair.b2DynamicTreePair.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2DynamicTreePair%20%3D%20b2DynamicTreePair%3B%0A%0A%20%20%20%20function%20b2Manifold()%20%7B%0A%20%20%20%20%20%20b2Manifold.b2Manifold.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Manifold)%0A%20%20%20%20%20%20%20%20this.b2Manifold.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2Manifold%20%3D%20b2Manifold%3B%0A%0A%20%20%20%20function%20b2ManifoldPoint()%20%7B%0A%20%20%20%20%20%20b2ManifoldPoint.b2ManifoldPoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2ManifoldPoint)%0A%20%20%20%20%20%20%20%20this.b2ManifoldPoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2ManifoldPoint%20%3D%20b2ManifoldPoint%3B%0A%0A%20%20%20%20function%20b2Point()%20%7B%0A%20%20%20%20%20%20b2Point.b2Point.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2Point%20%3D%20b2Point%3B%0A%0A%20%20%20%20function%20b2RayCastInput()%20%7B%0A%20%20%20%20%20%20b2RayCastInput.b2RayCastInput.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2RayCastInput)%0A%20%20%20%20%20%20%20%20this.b2RayCastInput.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2RayCastInput%20%3D%20b2RayCastInput%3B%0A%0A%20%20%20%20function%20b2RayCastOutput()%20%7B%0A%20%20%20%20%20%20b2RayCastOutput.b2RayCastOutput.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2RayCastOutput%20%3D%20b2RayCastOutput%3B%0A%0A%20%20%20%20function%20b2Segment()%20%7B%0A%20%20%20%20%20%20b2Segment.b2Segment.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2Segment%20%3D%20b2Segment%3B%0A%0A%20%20%20%20function%20b2SeparationFunction()%20%7B%0A%20%20%20%20%20%20b2SeparationFunction.b2SeparationFunction.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2SeparationFunction%20%3D%20b2SeparationFunction%3B%0A%0A%20%20%20%20function%20b2Simplex()%20%7B%0A%20%20%20%20%20%20b2Simplex.b2Simplex.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Simplex)%20this.b2Simplex.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2Simplex%20%3D%20b2Simplex%3B%0A%0A%20%20%20%20function%20b2SimplexCache()%20%7B%0A%20%20%20%20%20%20b2SimplexCache.b2SimplexCache.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2SimplexCache%20%3D%20b2SimplexCache%3B%0A%0A%20%20%20%20function%20b2SimplexVertex()%20%7B%0A%20%20%20%20%20%20b2SimplexVertex.b2SimplexVertex.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2SimplexVertex%20%3D%20b2SimplexVertex%3B%0A%0A%20%20%20%20function%20b2TimeOfImpact()%20%7B%0A%20%20%20%20%20%20b2TimeOfImpact.b2TimeOfImpact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2TimeOfImpact%20%3D%20b2TimeOfImpact%3B%0A%0A%20%20%20%20function%20b2TOIInput()%20%7B%0A%20%20%20%20%20%20b2TOIInput.b2TOIInput.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2TOIInput%20%3D%20b2TOIInput%3B%0A%0A%20%20%20%20function%20b2WorldManifold()%20%7B%0A%20%20%20%20%20%20b2WorldManifold.b2WorldManifold.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2WorldManifold)%0A%20%20%20%20%20%20%20%20this.b2WorldManifold.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.b2WorldManifold%20%3D%20b2WorldManifold%3B%0A%0A%20%20%20%20function%20ClipVertex()%20%7B%0A%20%20%20%20%20%20ClipVertex.ClipVertex.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.ClipVertex%20%3D%20ClipVertex%3B%0A%0A%20%20%20%20function%20Features()%20%7B%0A%20%20%20%20%20%20Features.Features.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.Features%20%3D%20Features%3B%0A%0A%20%20%20%20function%20b2CircleShape()%20%7B%0A%20%20%20%20%20%20b2CircleShape.b2CircleShape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2CircleShape)%0A%20%20%20%20%20%20%20%20this.b2CircleShape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.Shapes.b2CircleShape%20%3D%20b2CircleShape%3B%0A%0A%20%20%20%20function%20b2EdgeChainDef()%20%7B%0A%20%20%20%20%20%20b2EdgeChainDef.b2EdgeChainDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2EdgeChainDef)%0A%20%20%20%20%20%20%20%20this.b2EdgeChainDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.Shapes.b2EdgeChainDef%20%3D%20b2EdgeChainDef%3B%0A%0A%20%20%20%20function%20b2EdgeShape()%20%7B%0A%20%20%20%20%20%20b2EdgeShape.b2EdgeShape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2EdgeShape)%0A%20%20%20%20%20%20%20%20this.b2EdgeShape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.Shapes.b2EdgeShape%20%3D%20b2EdgeShape%3B%0A%0A%20%20%20%20function%20b2MassData()%20%7B%0A%20%20%20%20%20%20b2MassData.b2MassData.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.Shapes.b2MassData%20%3D%20b2MassData%3B%0A%0A%20%20%20%20function%20b2PolygonShape()%20%7B%0A%20%20%20%20%20%20b2PolygonShape.b2PolygonShape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2PolygonShape)%0A%20%20%20%20%20%20%20%20this.b2PolygonShape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.Shapes.b2PolygonShape%20%3D%20b2PolygonShape%3B%0A%0A%20%20%20%20function%20b2Shape()%20%7B%0A%20%20%20%20%20%20b2Shape.b2Shape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Shape)%20this.b2Shape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Collision.Shapes.b2Shape%20%3D%20b2Shape%3B%0A%20%20%20%20Box2D.Common.b2internal%20%3D%20%22Box2D.Common.b2internal%22%3B%0A%0A%20%20%20%20function%20b2Color()%20%7B%0A%20%20%20%20%20%20b2Color.b2Color.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Color)%20this.b2Color.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Common.b2Color%20%3D%20b2Color%3B%0A%0A%20%20%20%20function%20b2Settings()%20%7B%0A%20%20%20%20%20%20b2Settings.b2Settings.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Common.b2Settings%20%3D%20b2Settings%3B%0A%0A%20%20%20%20function%20b2Mat22()%20%7B%0A%20%20%20%20%20%20b2Mat22.b2Mat22.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Mat22)%20this.b2Mat22.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Common.Math.b2Mat22%20%3D%20b2Mat22%3B%0A%0A%20%20%20%20function%20b2Mat33()%20%7B%0A%20%20%20%20%20%20b2Mat33.b2Mat33.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Mat33)%20this.b2Mat33.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Common.Math.b2Mat33%20%3D%20b2Mat33%3B%0A%0A%20%20%20%20function%20b2Math()%20%7B%0A%20%20%20%20%20%20b2Math.b2Math.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Common.Math.b2Math%20%3D%20b2Math%3B%0A%0A%20%20%20%20function%20b2Sweep()%20%7B%0A%20%20%20%20%20%20b2Sweep.b2Sweep.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Common.Math.b2Sweep%20%3D%20b2Sweep%3B%0A%0A%20%20%20%20function%20b2Transform()%20%7B%0A%20%20%20%20%20%20b2Transform.b2Transform.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Transform)%0A%20%20%20%20%20%20%20%20this.b2Transform.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Common.Math.b2Transform%20%3D%20b2Transform%3B%0A%0A%20%20%20%20function%20b2Vec2()%20%7B%0A%20%20%20%20%20%20b2Vec2.b2Vec2.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Vec2)%20this.b2Vec2.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Common.Math.b2Vec2%20%3D%20b2Vec2%3B%0A%0A%20%20%20%20function%20b2Vec3()%20%7B%0A%20%20%20%20%20%20b2Vec3.b2Vec3.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Vec3)%20this.b2Vec3.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Common.Math.b2Vec3%20%3D%20b2Vec3%3B%0A%0A%20%20%20%20function%20b2Body()%20%7B%0A%20%20%20%20%20%20b2Body.b2Body.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Body)%20this.b2Body.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2Body%20%3D%20b2Body%3B%0A%0A%20%20%20%20function%20b2BodyDef()%20%7B%0A%20%20%20%20%20%20b2BodyDef.b2BodyDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2BodyDef)%20this.b2BodyDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2BodyDef%20%3D%20b2BodyDef%3B%0A%0A%20%20%20%20function%20b2ContactFilter()%20%7B%0A%20%20%20%20%20%20b2ContactFilter.b2ContactFilter.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2ContactFilter%20%3D%20b2ContactFilter%3B%0A%0A%20%20%20%20function%20b2ContactImpulse()%20%7B%0A%20%20%20%20%20%20b2ContactImpulse.b2ContactImpulse.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2ContactImpulse%20%3D%20b2ContactImpulse%3B%0A%0A%20%20%20%20function%20b2ContactListener()%20%7B%0A%20%20%20%20%20%20b2ContactListener.b2ContactListener.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2ContactListener%20%3D%20b2ContactListener%3B%0A%0A%20%20%20%20function%20b2ContactManager()%20%7B%0A%20%20%20%20%20%20b2ContactManager.b2ContactManager.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2ContactManager)%0A%20%20%20%20%20%20%20%20this.b2ContactManager.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2ContactManager%20%3D%20b2ContactManager%3B%0A%0A%20%20%20%20function%20b2DebugDraw()%20%7B%0A%20%20%20%20%20%20b2DebugDraw.b2DebugDraw.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2DebugDraw)%0A%20%20%20%20%20%20%20%20this.b2DebugDraw.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2DebugDraw%20%3D%20b2DebugDraw%3B%0A%0A%20%20%20%20function%20b2DestructionListener()%20%7B%0A%20%20%20%20%20%20b2DestructionListener.b2DestructionListener.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2DestructionListener%20%3D%20b2DestructionListener%3B%0A%0A%20%20%20%20function%20b2FilterData()%20%7B%0A%20%20%20%20%20%20b2FilterData.b2FilterData.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2FilterData%20%3D%20b2FilterData%3B%0A%0A%20%20%20%20function%20b2Fixture()%20%7B%0A%20%20%20%20%20%20b2Fixture.b2Fixture.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Fixture)%20this.b2Fixture.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2Fixture%20%3D%20b2Fixture%3B%0A%0A%20%20%20%20function%20b2FixtureDef()%20%7B%0A%20%20%20%20%20%20b2FixtureDef.b2FixtureDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2FixtureDef)%0A%20%20%20%20%20%20%20%20this.b2FixtureDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2FixtureDef%20%3D%20b2FixtureDef%3B%0A%0A%20%20%20%20function%20b2Island()%20%7B%0A%20%20%20%20%20%20b2Island.b2Island.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Island)%20this.b2Island.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2Island%20%3D%20b2Island%3B%0A%0A%20%20%20%20function%20b2TimeStep()%20%7B%0A%20%20%20%20%20%20b2TimeStep.b2TimeStep.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2TimeStep%20%3D%20b2TimeStep%3B%0A%0A%20%20%20%20function%20b2World()%20%7B%0A%20%20%20%20%20%20b2World.b2World.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2World)%20this.b2World.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.b2World%20%3D%20b2World%3B%0A%0A%20%20%20%20function%20b2CircleContact()%20%7B%0A%20%20%20%20%20%20b2CircleContact.b2CircleContact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2CircleContact%20%3D%20b2CircleContact%3B%0A%0A%20%20%20%20function%20b2Contact()%20%7B%0A%20%20%20%20%20%20b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Contact)%20this.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2Contact%20%3D%20b2Contact%3B%0A%0A%20%20%20%20function%20b2ContactConstraint()%20%7B%0A%20%20%20%20%20%20b2ContactConstraint.b2ContactConstraint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2ContactConstraint)%0A%20%20%20%20%20%20%20%20this.b2ContactConstraint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2ContactConstraint%20%3D%20b2ContactConstraint%3B%0A%0A%20%20%20%20function%20b2ContactConstraintPoint()%20%7B%0A%20%20%20%20%20%20b2ContactConstraintPoint.b2ContactConstraintPoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2ContactConstraintPoint%20%3D%20b2ContactConstraintPoint%3B%0A%0A%20%20%20%20function%20b2ContactEdge()%20%7B%0A%20%20%20%20%20%20b2ContactEdge.b2ContactEdge.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2ContactEdge%20%3D%20b2ContactEdge%3B%0A%0A%20%20%20%20function%20b2ContactFactory()%20%7B%0A%20%20%20%20%20%20b2ContactFactory.b2ContactFactory.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2ContactFactory)%0A%20%20%20%20%20%20%20%20this.b2ContactFactory.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2ContactFactory%20%3D%20b2ContactFactory%3B%0A%0A%20%20%20%20function%20b2ContactRegister()%20%7B%0A%20%20%20%20%20%20b2ContactRegister.b2ContactRegister.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2ContactRegister%20%3D%20b2ContactRegister%3B%0A%0A%20%20%20%20function%20b2ContactResult()%20%7B%0A%20%20%20%20%20%20b2ContactResult.b2ContactResult.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2ContactResult%20%3D%20b2ContactResult%3B%0A%0A%20%20%20%20function%20b2ContactSolver()%20%7B%0A%20%20%20%20%20%20b2ContactSolver.b2ContactSolver.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2ContactSolver)%0A%20%20%20%20%20%20%20%20this.b2ContactSolver.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2ContactSolver%20%3D%20b2ContactSolver%3B%0A%0A%20%20%20%20function%20b2EdgeAndCircleContact()%20%7B%0A%20%20%20%20%20%20b2EdgeAndCircleContact.b2EdgeAndCircleContact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2EdgeAndCircleContact%20%3D%20b2EdgeAndCircleContact%3B%0A%0A%20%20%20%20function%20b2NullContact()%20%7B%0A%20%20%20%20%20%20b2NullContact.b2NullContact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2NullContact)%0A%20%20%20%20%20%20%20%20this.b2NullContact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2NullContact%20%3D%20b2NullContact%3B%0A%0A%20%20%20%20function%20b2PolyAndCircleContact()%20%7B%0A%20%20%20%20%20%20b2PolyAndCircleContact.b2PolyAndCircleContact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2PolyAndCircleContact%20%3D%20b2PolyAndCircleContact%3B%0A%0A%20%20%20%20function%20b2PolyAndEdgeContact()%20%7B%0A%20%20%20%20%20%20b2PolyAndEdgeContact.b2PolyAndEdgeContact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2PolyAndEdgeContact%20%3D%20b2PolyAndEdgeContact%3B%0A%0A%20%20%20%20function%20b2PolygonContact()%20%7B%0A%20%20%20%20%20%20b2PolygonContact.b2PolygonContact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2PolygonContact%20%3D%20b2PolygonContact%3B%0A%0A%20%20%20%20function%20b2PositionSolverManifold()%20%7B%0A%20%20%20%20%20%20b2PositionSolverManifold.b2PositionSolverManifold.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2PositionSolverManifold)%0A%20%20%20%20%20%20%20%20this.b2PositionSolverManifold.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Contacts.b2PositionSolverManifold%20%3D%20b2PositionSolverManifold%3B%0A%0A%20%20%20%20function%20b2BuoyancyController()%20%7B%0A%20%20%20%20%20%20b2BuoyancyController.b2BuoyancyController.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Controllers.b2BuoyancyController%20%3D%20b2BuoyancyController%3B%0A%0A%20%20%20%20function%20b2ConstantAccelController()%20%7B%0A%20%20%20%20%20%20b2ConstantAccelController.b2ConstantAccelController.apply(%0A%20%20%20%20%20%20%20%20this%2C%0A%20%20%20%20%20%20%20%20arguments%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Controllers.b2ConstantAccelController%20%3D%0A%20%20%20%20%20%20b2ConstantAccelController%3B%0A%0A%20%20%20%20function%20b2ConstantForceController()%20%7B%0A%20%20%20%20%20%20b2ConstantForceController.b2ConstantForceController.apply(%0A%20%20%20%20%20%20%20%20this%2C%0A%20%20%20%20%20%20%20%20arguments%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Controllers.b2ConstantForceController%20%3D%0A%20%20%20%20%20%20b2ConstantForceController%3B%0A%0A%20%20%20%20function%20b2Controller()%20%7B%0A%20%20%20%20%20%20b2Controller.b2Controller.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Controllers.b2Controller%20%3D%20b2Controller%3B%0A%0A%20%20%20%20function%20b2ControllerEdge()%20%7B%0A%20%20%20%20%20%20b2ControllerEdge.b2ControllerEdge.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Controllers.b2ControllerEdge%20%3D%20b2ControllerEdge%3B%0A%0A%20%20%20%20function%20b2GravityController()%20%7B%0A%20%20%20%20%20%20b2GravityController.b2GravityController.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Controllers.b2GravityController%20%3D%20b2GravityController%3B%0A%0A%20%20%20%20function%20b2TensorDampingController()%20%7B%0A%20%20%20%20%20%20b2TensorDampingController.b2TensorDampingController.apply(%0A%20%20%20%20%20%20%20%20this%2C%0A%20%20%20%20%20%20%20%20arguments%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Controllers.b2TensorDampingController%20%3D%0A%20%20%20%20%20%20b2TensorDampingController%3B%0A%0A%20%20%20%20function%20b2DistanceJoint()%20%7B%0A%20%20%20%20%20%20b2DistanceJoint.b2DistanceJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2DistanceJoint)%0A%20%20%20%20%20%20%20%20this.b2DistanceJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2DistanceJoint%20%3D%20b2DistanceJoint%3B%0A%0A%20%20%20%20function%20b2DistanceJointDef()%20%7B%0A%20%20%20%20%20%20b2DistanceJointDef.b2DistanceJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2DistanceJointDef)%0A%20%20%20%20%20%20%20%20this.b2DistanceJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2DistanceJointDef%20%3D%20b2DistanceJointDef%3B%0A%0A%20%20%20%20function%20b2FrictionJoint()%20%7B%0A%20%20%20%20%20%20b2FrictionJoint.b2FrictionJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2FrictionJoint)%0A%20%20%20%20%20%20%20%20this.b2FrictionJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2FrictionJoint%20%3D%20b2FrictionJoint%3B%0A%0A%20%20%20%20function%20b2FrictionJointDef()%20%7B%0A%20%20%20%20%20%20b2FrictionJointDef.b2FrictionJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2FrictionJointDef)%0A%20%20%20%20%20%20%20%20this.b2FrictionJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2FrictionJointDef%20%3D%20b2FrictionJointDef%3B%0A%0A%20%20%20%20function%20b2GearJoint()%20%7B%0A%20%20%20%20%20%20b2GearJoint.b2GearJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2GearJoint)%0A%20%20%20%20%20%20%20%20this.b2GearJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2GearJoint%20%3D%20b2GearJoint%3B%0A%0A%20%20%20%20function%20b2GearJointDef()%20%7B%0A%20%20%20%20%20%20b2GearJointDef.b2GearJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2GearJointDef)%0A%20%20%20%20%20%20%20%20this.b2GearJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2GearJointDef%20%3D%20b2GearJointDef%3B%0A%0A%20%20%20%20function%20b2Jacobian()%20%7B%0A%20%20%20%20%20%20b2Jacobian.b2Jacobian.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2Jacobian%20%3D%20b2Jacobian%3B%0A%0A%20%20%20%20function%20b2Joint()%20%7B%0A%20%20%20%20%20%20b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2Joint)%20this.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2Joint%20%3D%20b2Joint%3B%0A%0A%20%20%20%20function%20b2JointDef()%20%7B%0A%20%20%20%20%20%20b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2JointDef)%0A%20%20%20%20%20%20%20%20this.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2JointDef%20%3D%20b2JointDef%3B%0A%0A%20%20%20%20function%20b2JointEdge()%20%7B%0A%20%20%20%20%20%20b2JointEdge.b2JointEdge.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2JointEdge%20%3D%20b2JointEdge%3B%0A%0A%20%20%20%20function%20b2LineJoint()%20%7B%0A%20%20%20%20%20%20b2LineJoint.b2LineJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2LineJoint)%0A%20%20%20%20%20%20%20%20this.b2LineJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2LineJoint%20%3D%20b2LineJoint%3B%0A%0A%20%20%20%20function%20b2LineJointDef()%20%7B%0A%20%20%20%20%20%20b2LineJointDef.b2LineJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2LineJointDef)%0A%20%20%20%20%20%20%20%20this.b2LineJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2LineJointDef%20%3D%20b2LineJointDef%3B%0A%0A%20%20%20%20function%20b2MouseJoint()%20%7B%0A%20%20%20%20%20%20b2MouseJoint.b2MouseJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2MouseJoint)%0A%20%20%20%20%20%20%20%20this.b2MouseJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2MouseJoint%20%3D%20b2MouseJoint%3B%0A%0A%20%20%20%20function%20b2MouseJointDef()%20%7B%0A%20%20%20%20%20%20b2MouseJointDef.b2MouseJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2MouseJointDef)%0A%20%20%20%20%20%20%20%20this.b2MouseJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2MouseJointDef%20%3D%20b2MouseJointDef%3B%0A%0A%20%20%20%20function%20b2PrismaticJoint()%20%7B%0A%20%20%20%20%20%20b2PrismaticJoint.b2PrismaticJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2PrismaticJoint)%0A%20%20%20%20%20%20%20%20this.b2PrismaticJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2PrismaticJoint%20%3D%20b2PrismaticJoint%3B%0A%0A%20%20%20%20function%20b2PrismaticJointDef()%20%7B%0A%20%20%20%20%20%20b2PrismaticJointDef.b2PrismaticJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2PrismaticJointDef)%0A%20%20%20%20%20%20%20%20this.b2PrismaticJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2PrismaticJointDef%20%3D%20b2PrismaticJointDef%3B%0A%0A%20%20%20%20function%20b2PulleyJoint()%20%7B%0A%20%20%20%20%20%20b2PulleyJoint.b2PulleyJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2PulleyJoint)%0A%20%20%20%20%20%20%20%20this.b2PulleyJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2PulleyJoint%20%3D%20b2PulleyJoint%3B%0A%0A%20%20%20%20function%20b2PulleyJointDef()%20%7B%0A%20%20%20%20%20%20b2PulleyJointDef.b2PulleyJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2PulleyJointDef)%0A%20%20%20%20%20%20%20%20this.b2PulleyJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2PulleyJointDef%20%3D%20b2PulleyJointDef%3B%0A%0A%20%20%20%20function%20b2RevoluteJoint()%20%7B%0A%20%20%20%20%20%20b2RevoluteJoint.b2RevoluteJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2RevoluteJoint)%0A%20%20%20%20%20%20%20%20this.b2RevoluteJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2RevoluteJoint%20%3D%20b2RevoluteJoint%3B%0A%0A%20%20%20%20function%20b2RevoluteJointDef()%20%7B%0A%20%20%20%20%20%20b2RevoluteJointDef.b2RevoluteJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2RevoluteJointDef)%0A%20%20%20%20%20%20%20%20this.b2RevoluteJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2RevoluteJointDef%20%3D%20b2RevoluteJointDef%3B%0A%0A%20%20%20%20function%20b2WeldJoint()%20%7B%0A%20%20%20%20%20%20b2WeldJoint.b2WeldJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2WeldJoint)%0A%20%20%20%20%20%20%20%20this.b2WeldJoint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2WeldJoint%20%3D%20b2WeldJoint%3B%0A%0A%20%20%20%20function%20b2WeldJointDef()%20%7B%0A%20%20%20%20%20%20b2WeldJointDef.b2WeldJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20if%20(this.constructor%20%3D%3D%3D%20b2WeldJointDef)%0A%20%20%20%20%20%20%20%20this.b2WeldJointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%0A%20%20%20%20Box2D.Dynamics.Joints.b2WeldJointDef%20%3D%20b2WeldJointDef%3B%0A%20%20%7D)()%3B%20%2F%2Fdefinitions%0A%20%20Box2D.postDefs%20%3D%20%5B%5D%3B%0A%20%20(function%20()%20%7B%0A%20%20%20%20var%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%2C%0A%20%20%20%20%20%20b2EdgeChainDef%20%3D%20Box2D.Collision.Shapes.b2EdgeChainDef%2C%0A%20%20%20%20%20%20b2EdgeShape%20%3D%20Box2D.Collision.Shapes.b2EdgeShape%2C%0A%20%20%20%20%20%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%2C%0A%20%20%20%20%20%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%2C%0A%20%20%20%20%20%20b2Shape%20%3D%20Box2D.Collision.Shapes.b2Shape%2C%0A%20%20%20%20%20%20b2Color%20%3D%20Box2D.Common.b2Color%2C%0A%20%20%20%20%20%20b2internal%20%3D%20Box2D.Common.b2internal%2C%0A%20%20%20%20%20%20b2Settings%20%3D%20Box2D.Common.b2Settings%2C%0A%20%20%20%20%20%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%2C%0A%20%20%20%20%20%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%2C%0A%20%20%20%20%20%20b2Math%20%3D%20Box2D.Common.Math.b2Math%2C%0A%20%20%20%20%20%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%2C%0A%20%20%20%20%20%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%2C%0A%20%20%20%20%20%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%2C%0A%20%20%20%20%20%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%2C%0A%20%20%20%20%20%20b2AABB%20%3D%20Box2D.Collision.b2AABB%2C%0A%20%20%20%20%20%20b2Bound%20%3D%20Box2D.Collision.b2Bound%2C%0A%20%20%20%20%20%20b2BoundValues%20%3D%20Box2D.Collision.b2BoundValues%2C%0A%20%20%20%20%20%20b2Collision%20%3D%20Box2D.Collision.b2Collision%2C%0A%20%20%20%20%20%20b2ContactID%20%3D%20Box2D.Collision.b2ContactID%2C%0A%20%20%20%20%20%20b2ContactPoint%20%3D%20Box2D.Collision.b2ContactPoint%2C%0A%20%20%20%20%20%20b2Distance%20%3D%20Box2D.Collision.b2Distance%2C%0A%20%20%20%20%20%20b2DistanceInput%20%3D%20Box2D.Collision.b2DistanceInput%2C%0A%20%20%20%20%20%20b2DistanceOutput%20%3D%20Box2D.Collision.b2DistanceOutput%2C%0A%20%20%20%20%20%20b2DistanceProxy%20%3D%20Box2D.Collision.b2DistanceProxy%2C%0A%20%20%20%20%20%20b2DynamicTree%20%3D%20Box2D.Collision.b2DynamicTree%2C%0A%20%20%20%20%20%20b2DynamicTreeBroadPhase%20%3D%20Box2D.Collision.b2DynamicTreeBroadPhase%2C%0A%20%20%20%20%20%20b2DynamicTreeNode%20%3D%20Box2D.Collision.b2DynamicTreeNode%2C%0A%20%20%20%20%20%20b2DynamicTreePair%20%3D%20Box2D.Collision.b2DynamicTreePair%2C%0A%20%20%20%20%20%20b2Manifold%20%3D%20Box2D.Collision.b2Manifold%2C%0A%20%20%20%20%20%20b2ManifoldPoint%20%3D%20Box2D.Collision.b2ManifoldPoint%2C%0A%20%20%20%20%20%20b2Point%20%3D%20Box2D.Collision.b2Point%2C%0A%20%20%20%20%20%20b2RayCastInput%20%3D%20Box2D.Collision.b2RayCastInput%2C%0A%20%20%20%20%20%20b2RayCastOutput%20%3D%20Box2D.Collision.b2RayCastOutput%2C%0A%20%20%20%20%20%20b2Segment%20%3D%20Box2D.Collision.b2Segment%2C%0A%20%20%20%20%20%20b2SeparationFunction%20%3D%20Box2D.Collision.b2SeparationFunction%2C%0A%20%20%20%20%20%20b2Simplex%20%3D%20Box2D.Collision.b2Simplex%2C%0A%20%20%20%20%20%20b2SimplexCache%20%3D%20Box2D.Collision.b2SimplexCache%2C%0A%20%20%20%20%20%20b2SimplexVertex%20%3D%20Box2D.Collision.b2SimplexVertex%2C%0A%20%20%20%20%20%20b2TimeOfImpact%20%3D%20Box2D.Collision.b2TimeOfImpact%2C%0A%20%20%20%20%20%20b2TOIInput%20%3D%20Box2D.Collision.b2TOIInput%2C%0A%20%20%20%20%20%20b2WorldManifold%20%3D%20Box2D.Collision.b2WorldManifold%2C%0A%20%20%20%20%20%20ClipVertex%20%3D%20Box2D.Collision.ClipVertex%2C%0A%20%20%20%20%20%20Features%20%3D%20Box2D.Collision.Features%2C%0A%20%20%20%20%20%20IBroadPhase%20%3D%20Box2D.Collision.IBroadPhase%3B%0A%0A%20%20%20%20b2AABB.b2AABB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.lowerBound%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.upperBound%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2AABB.prototype.IsValid%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20dX%20%3D%20this.upperBound.x%20-%20this.lowerBound.x%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20this.upperBound.y%20-%20this.lowerBound.y%3B%0A%20%20%20%20%20%20var%20valid%20%3D%20dX%20%3E%3D%200.0%20%26%26%20dY%20%3E%3D%200.0%3B%0A%20%20%20%20%20%20valid%20%3D%20valid%20%26%26%20this.lowerBound.IsValid()%20%26%26%20this.upperBound.IsValid()%3B%0A%20%20%20%20%20%20return%20valid%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2AABB.prototype.GetCenter%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20(this.lowerBound.x%20%2B%20this.upperBound.x)%20%2F%202%2C%0A%20%20%20%20%20%20%20%20(this.lowerBound.y%20%2B%20this.upperBound.y)%20%2F%202%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2AABB.prototype.GetExtents%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20(this.upperBound.x%20-%20this.lowerBound.x)%20%2F%202%2C%0A%20%20%20%20%20%20%20%20(this.upperBound.y%20-%20this.lowerBound.y)%20%2F%202%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2AABB.prototype.Contains%20%3D%20function%20(aabb)%20%7B%0A%20%20%20%20%20%20var%20result%20%3D%20true%3B%0A%20%20%20%20%20%20result%20%3D%20result%20%26%26%20this.lowerBound.x%20%3C%3D%20aabb.lowerBound.x%3B%0A%20%20%20%20%20%20result%20%3D%20result%20%26%26%20this.lowerBound.y%20%3C%3D%20aabb.lowerBound.y%3B%0A%20%20%20%20%20%20result%20%3D%20result%20%26%26%20aabb.upperBound.x%20%3C%3D%20this.upperBound.x%3B%0A%20%20%20%20%20%20result%20%3D%20result%20%26%26%20aabb.upperBound.y%20%3C%3D%20this.upperBound.y%3B%0A%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2AABB.prototype.RayCast%20%3D%20function%20(output%2C%20input)%20%7B%0A%20%20%20%20%20%20var%20tmin%20%3D%20-Number.MAX_VALUE%3B%0A%20%20%20%20%20%20var%20tmax%20%3D%20Number.MAX_VALUE%3B%0A%20%20%20%20%20%20var%20pX%20%3D%20input.p1.x%3B%0A%20%20%20%20%20%20var%20pY%20%3D%20input.p1.y%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20input.p2.x%20-%20input.p1.x%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20input.p2.y%20-%20input.p1.y%3B%0A%20%20%20%20%20%20var%20absDX%20%3D%20Math.abs(dX)%3B%0A%20%20%20%20%20%20var%20absDY%20%3D%20Math.abs(dY)%3B%0A%20%20%20%20%20%20var%20normal%20%3D%20output.normal%3B%0A%20%20%20%20%20%20var%20inv_d%20%3D%200%3B%0A%20%20%20%20%20%20var%20t1%20%3D%200%3B%0A%20%20%20%20%20%20var%20t2%20%3D%200%3B%0A%20%20%20%20%20%20var%20t3%20%3D%200%3B%0A%20%20%20%20%20%20var%20s%20%3D%200%3B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20(absDX%20%3C%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(pX%20%3C%20this.lowerBound.x%20%7C%7C%20this.upperBound.x%20%3C%20pX)%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20inv_d%20%3D%201.0%20%2F%20dX%3B%0A%20%20%20%20%20%20%20%20%20%20t1%20%3D%20(this.lowerBound.x%20-%20pX)%20*%20inv_d%3B%0A%20%20%20%20%20%20%20%20%20%20t2%20%3D%20(this.upperBound.x%20-%20pX)%20*%20inv_d%3B%0A%20%20%20%20%20%20%20%20%20%20s%20%3D%20-1.0%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(t1%20%3E%20t2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20t3%20%3D%20t1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20t1%20%3D%20t2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20t2%20%3D%20t3%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20s%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(t1%20%3E%20tmin)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20normal.x%20%3D%20s%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20normal.y%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tmin%20%3D%20t1%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20tmax%20%3D%20Math.min(tmax%2C%20t2)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(tmin%20%3E%20tmax)%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20(absDY%20%3C%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(pY%20%3C%20this.lowerBound.y%20%7C%7C%20this.upperBound.y%20%3C%20pY)%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20inv_d%20%3D%201.0%20%2F%20dY%3B%0A%20%20%20%20%20%20%20%20%20%20t1%20%3D%20(this.lowerBound.y%20-%20pY)%20*%20inv_d%3B%0A%20%20%20%20%20%20%20%20%20%20t2%20%3D%20(this.upperBound.y%20-%20pY)%20*%20inv_d%3B%0A%20%20%20%20%20%20%20%20%20%20s%20%3D%20-1.0%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(t1%20%3E%20t2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20t3%20%3D%20t1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20t1%20%3D%20t2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20t2%20%3D%20t3%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20s%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(t1%20%3E%20tmin)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20normal.y%20%3D%20s%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20normal.x%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tmin%20%3D%20t1%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20tmax%20%3D%20Math.min(tmax%2C%20t2)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(tmin%20%3E%20tmax)%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20output.fraction%20%3D%20tmin%3B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2AABB.prototype.TestOverlap%20%3D%20function%20(other)%20%7B%0A%20%20%20%20%20%20var%20d1X%20%3D%20other.lowerBound.x%20-%20this.upperBound.x%3B%0A%20%20%20%20%20%20var%20d1Y%20%3D%20other.lowerBound.y%20-%20this.upperBound.y%3B%0A%20%20%20%20%20%20var%20d2X%20%3D%20this.lowerBound.x%20-%20other.upperBound.x%3B%0A%20%20%20%20%20%20var%20d2Y%20%3D%20this.lowerBound.y%20-%20other.upperBound.y%3B%0A%20%20%20%20%20%20if%20(d1X%20%3E%200.0%20%7C%7C%20d1Y%20%3E%200.0)%20return%20false%3B%0A%20%20%20%20%20%20if%20(d2X%20%3E%200.0%20%7C%7C%20d2Y%20%3E%200.0)%20return%20false%3B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2AABB.Combine%20%3D%20function%20(aabb1%2C%20aabb2)%20%7B%0A%20%20%20%20%20%20var%20aabb%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20aabb.Combine(aabb1%2C%20aabb2)%3B%0A%20%20%20%20%20%20return%20aabb%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2AABB.prototype.Combine%20%3D%20function%20(aabb1%2C%20aabb2)%20%7B%0A%20%20%20%20%20%20this.lowerBound.x%20%3D%20Math.min(aabb1.lowerBound.x%2C%20aabb2.lowerBound.x)%3B%0A%20%20%20%20%20%20this.lowerBound.y%20%3D%20Math.min(aabb1.lowerBound.y%2C%20aabb2.lowerBound.y)%3B%0A%20%20%20%20%20%20this.upperBound.x%20%3D%20Math.max(aabb1.upperBound.x%2C%20aabb2.upperBound.x)%3B%0A%20%20%20%20%20%20this.upperBound.y%20%3D%20Math.max(aabb1.upperBound.y%2C%20aabb2.upperBound.y)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Bound.b2Bound%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Bound.prototype.IsLower%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(this.value%20%26%201)%20%3D%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Bound.prototype.IsUpper%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(this.value%20%26%201)%20%3D%3D%201%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Bound.prototype.Swap%20%3D%20function%20(b)%20%7B%0A%20%20%20%20%20%20var%20tempValue%20%3D%20this.value%3B%0A%20%20%20%20%20%20var%20tempProxy%20%3D%20this.proxy%3B%0A%20%20%20%20%20%20var%20tempStabbingCount%20%3D%20this.stabbingCount%3B%0A%20%20%20%20%20%20this.value%20%3D%20b.value%3B%0A%20%20%20%20%20%20this.proxy%20%3D%20b.proxy%3B%0A%20%20%20%20%20%20this.stabbingCount%20%3D%20b.stabbingCount%3B%0A%20%20%20%20%20%20b.value%20%3D%20tempValue%3B%0A%20%20%20%20%20%20b.proxy%20%3D%20tempProxy%3B%0A%20%20%20%20%20%20b.stabbingCount%20%3D%20tempStabbingCount%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2BoundValues.b2BoundValues%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2BoundValues.prototype.b2BoundValues%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.lowerValues%20%3D%20new%20Vector_a2j_Number()%3B%0A%20%20%20%20%20%20this.lowerValues%5B0%5D%20%3D%200.0%3B%0A%20%20%20%20%20%20this.lowerValues%5B1%5D%20%3D%200.0%3B%0A%20%20%20%20%20%20this.upperValues%20%3D%20new%20Vector_a2j_Number()%3B%0A%20%20%20%20%20%20this.upperValues%5B0%5D%20%3D%200.0%3B%0A%20%20%20%20%20%20this.upperValues%5B1%5D%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.b2Collision%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Collision.ClipSegmentToLine%20%3D%20function%20(vOut%2C%20vIn%2C%20normal%2C%20offset)%20%7B%0A%20%20%20%20%20%20if%20(offset%20%3D%3D%3D%20undefined)%20offset%20%3D%200%3B%0A%20%20%20%20%20%20var%20cv%3B%0A%20%20%20%20%20%20var%20numOut%20%3D%200%3B%0A%20%20%20%20%20%20cv%20%3D%20vIn%5B0%5D%3B%0A%20%20%20%20%20%20var%20vIn0%20%3D%20cv.v%3B%0A%20%20%20%20%20%20cv%20%3D%20vIn%5B1%5D%3B%0A%20%20%20%20%20%20var%20vIn1%20%3D%20cv.v%3B%0A%20%20%20%20%20%20var%20distance0%20%3D%20normal.x%20*%20vIn0.x%20%2B%20normal.y%20*%20vIn0.y%20-%20offset%3B%0A%20%20%20%20%20%20var%20distance1%20%3D%20normal.x%20*%20vIn1.x%20%2B%20normal.y%20*%20vIn1.y%20-%20offset%3B%0A%20%20%20%20%20%20if%20(distance0%20%3C%3D%200.0)%20vOut%5BnumOut%2B%2B%5D.Set(vIn%5B0%5D)%3B%0A%20%20%20%20%20%20if%20(distance1%20%3C%3D%200.0)%20vOut%5BnumOut%2B%2B%5D.Set(vIn%5B1%5D)%3B%0A%20%20%20%20%20%20if%20(distance0%20*%20distance1%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20var%20interp%20%3D%20distance0%20%2F%20(distance0%20-%20distance1)%3B%0A%20%20%20%20%20%20%20%20cv%20%3D%20vOut%5BnumOut%5D%3B%0A%20%20%20%20%20%20%20%20var%20tVec%20%3D%20cv.v%3B%0A%20%20%20%20%20%20%20%20tVec.x%20%3D%20vIn0.x%20%2B%20interp%20*%20(vIn1.x%20-%20vIn0.x)%3B%0A%20%20%20%20%20%20%20%20tVec.y%20%3D%20vIn0.y%20%2B%20interp%20*%20(vIn1.y%20-%20vIn0.y)%3B%0A%20%20%20%20%20%20%20%20cv%20%3D%20vOut%5BnumOut%5D%3B%0A%20%20%20%20%20%20%20%20var%20cv2%3B%0A%20%20%20%20%20%20%20%20if%20(distance0%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20cv2%20%3D%20vIn%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20cv.id%20%3D%20cv2.id%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20cv2%20%3D%20vIn%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20cv.id%20%3D%20cv2.id%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2B%2BnumOut%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20numOut%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.EdgeSeparation%20%3D%20function%20(poly1%2C%20xf1%2C%20edge1%2C%20poly2%2C%20xf2)%20%7B%0A%20%20%20%20%20%20if%20(edge1%20%3D%3D%3D%20undefined)%20edge1%20%3D%200%3B%0A%20%20%20%20%20%20var%20count1%20%3D%20parseInt(poly1.m_vertexCount)%3B%0A%20%20%20%20%20%20var%20vertices1%20%3D%20poly1.m_vertices%3B%0A%20%20%20%20%20%20var%20normals1%20%3D%20poly1.m_normals%3B%0A%20%20%20%20%20%20var%20count2%20%3D%20parseInt(poly2.m_vertexCount)%3B%0A%20%20%20%20%20%20var%20vertices2%20%3D%20poly2.m_vertices%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20tVec%20%3D%20normals1%5Bedge1%5D%3B%0A%20%20%20%20%20%20var%20normal1WorldX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20var%20normal1WorldY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20var%20normal1X%20%3D%20tMat.col1.x%20*%20normal1WorldX%20%2B%20tMat.col1.y%20*%20normal1WorldY%3B%0A%20%20%20%20%20%20var%20normal1Y%20%3D%20tMat.col2.x%20*%20normal1WorldX%20%2B%20tMat.col2.y%20*%20normal1WorldY%3B%0A%20%20%20%20%20%20var%20index%20%3D%200%3B%0A%20%20%20%20%20%20var%20minDot%20%3D%20Number.MAX_VALUE%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20count2%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20vertices2%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20dot%20%3D%20tVec.x%20*%20normal1X%20%2B%20tVec.y%20*%20normal1Y%3B%0A%20%20%20%20%20%20%20%20if%20(dot%20%3C%20minDot)%20%7B%0A%20%20%20%20%20%20%20%20%20%20minDot%20%3D%20dot%3B%0A%20%20%20%20%20%20%20%20%20%20index%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20tVec%20%3D%20vertices1%5Bedge1%5D%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20var%20v1X%20%3D%20xf1.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20v1Y%20%3D%20xf1.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tVec%20%3D%20vertices2%5Bindex%5D%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20var%20v2X%20%3D%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20v2Y%20%3D%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20v2X%20-%3D%20v1X%3B%0A%20%20%20%20%20%20v2Y%20-%3D%20v1Y%3B%0A%20%20%20%20%20%20var%20separation%20%3D%20v2X%20*%20normal1WorldX%20%2B%20v2Y%20*%20normal1WorldY%3B%0A%20%20%20%20%20%20return%20separation%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.FindMaxSeparation%20%3D%20function%20(%0A%20%20%20%20%20%20edgeIndex%2C%0A%20%20%20%20%20%20poly1%2C%0A%20%20%20%20%20%20xf1%2C%0A%20%20%20%20%20%20poly2%2C%0A%20%20%20%20%20%20xf2%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20var%20count1%20%3D%20parseInt(poly1.m_vertexCount)%3B%0A%20%20%20%20%20%20var%20normals1%20%3D%20poly1.m_normals%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20tVec%20%3D%20poly2.m_centroid%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20tVec%20%3D%20poly1.m_centroid%3B%0A%20%20%20%20%20%20dX%20-%3D%20xf1.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20dY%20-%3D%20xf1.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20dLocal1X%20%3D%20dX%20*%20xf1.R.col1.x%20%2B%20dY%20*%20xf1.R.col1.y%3B%0A%20%20%20%20%20%20var%20dLocal1Y%20%3D%20dX%20*%20xf1.R.col2.x%20%2B%20dY%20*%20xf1.R.col2.y%3B%0A%20%20%20%20%20%20var%20edge%20%3D%200%3B%0A%20%20%20%20%20%20var%20maxDot%20%3D%20-Number.MAX_VALUE%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20count1%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20normals1%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20dot%20%3D%20tVec.x%20*%20dLocal1X%20%2B%20tVec.y%20*%20dLocal1Y%3B%0A%20%20%20%20%20%20%20%20if%20(dot%20%3E%20maxDot)%20%7B%0A%20%20%20%20%20%20%20%20%20%20maxDot%20%3D%20dot%3B%0A%20%20%20%20%20%20%20%20%20%20edge%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20s%20%3D%20b2Collision.EdgeSeparation(poly1%2C%20xf1%2C%20edge%2C%20poly2%2C%20xf2)%3B%0A%20%20%20%20%20%20var%20prevEdge%20%3D%20parseInt(edge%20-%201%20%3E%3D%200%20%3F%20edge%20-%201%20%3A%20count1%20-%201)%3B%0A%20%20%20%20%20%20var%20sPrev%20%3D%20b2Collision.EdgeSeparation(poly1%2C%20xf1%2C%20prevEdge%2C%20poly2%2C%20xf2)%3B%0A%20%20%20%20%20%20var%20nextEdge%20%3D%20parseInt(edge%20%2B%201%20%3C%20count1%20%3F%20edge%20%2B%201%20%3A%200)%3B%0A%20%20%20%20%20%20var%20sNext%20%3D%20b2Collision.EdgeSeparation(poly1%2C%20xf1%2C%20nextEdge%2C%20poly2%2C%20xf2)%3B%0A%20%20%20%20%20%20var%20bestEdge%20%3D%200%3B%0A%20%20%20%20%20%20var%20bestSeparation%20%3D%200%3B%0A%20%20%20%20%20%20var%20increment%20%3D%200%3B%0A%20%20%20%20%20%20if%20(sPrev%20%3E%20s%20%26%26%20sPrev%20%3E%20sNext)%20%7B%0A%20%20%20%20%20%20%20%20increment%20%3D%20-1%3B%0A%20%20%20%20%20%20%20%20bestEdge%20%3D%20prevEdge%3B%0A%20%20%20%20%20%20%20%20bestSeparation%20%3D%20sPrev%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(sNext%20%3E%20s)%20%7B%0A%20%20%20%20%20%20%20%20increment%20%3D%201%3B%0A%20%20%20%20%20%20%20%20bestEdge%20%3D%20nextEdge%3B%0A%20%20%20%20%20%20%20%20bestSeparation%20%3D%20sNext%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20edgeIndex%5B0%5D%20%3D%20edge%3B%0A%20%20%20%20%20%20%20%20return%20s%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20while%20(true)%20%7B%0A%20%20%20%20%20%20%20%20if%20(increment%20%3D%3D%20-1)%0A%20%20%20%20%20%20%20%20%20%20edge%20%3D%20bestEdge%20-%201%20%3E%3D%200%20%3F%20bestEdge%20-%201%20%3A%20count1%20-%201%3B%0A%20%20%20%20%20%20%20%20else%20edge%20%3D%20bestEdge%20%2B%201%20%3C%20count1%20%3F%20bestEdge%20%2B%201%20%3A%200%3B%0A%20%20%20%20%20%20%20%20s%20%3D%20b2Collision.EdgeSeparation(poly1%2C%20xf1%2C%20edge%2C%20poly2%2C%20xf2)%3B%0A%20%20%20%20%20%20%20%20if%20(s%20%3E%20bestSeparation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bestEdge%20%3D%20edge%3B%0A%20%20%20%20%20%20%20%20%20%20bestSeparation%20%3D%20s%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20edgeIndex%5B0%5D%20%3D%20bestEdge%3B%0A%20%20%20%20%20%20return%20bestSeparation%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.FindIncidentEdge%20%3D%20function%20(c%2C%20poly1%2C%20xf1%2C%20edge1%2C%20poly2%2C%20xf2)%20%7B%0A%20%20%20%20%20%20if%20(edge1%20%3D%3D%3D%20undefined)%20edge1%20%3D%200%3B%0A%20%20%20%20%20%20var%20count1%20%3D%20parseInt(poly1.m_vertexCount)%3B%0A%20%20%20%20%20%20var%20normals1%20%3D%20poly1.m_normals%3B%0A%20%20%20%20%20%20var%20count2%20%3D%20parseInt(poly2.m_vertexCount)%3B%0A%20%20%20%20%20%20var%20vertices2%20%3D%20poly2.m_vertices%3B%0A%20%20%20%20%20%20var%20normals2%20%3D%20poly2.m_normals%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20tVec%20%3D%20normals1%5Bedge1%5D%3B%0A%20%20%20%20%20%20var%20normal1X%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20var%20normal1Y%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20tMat.col1.x%20*%20normal1X%20%2B%20tMat.col1.y%20*%20normal1Y%3B%0A%20%20%20%20%20%20normal1Y%20%3D%20tMat.col2.x%20*%20normal1X%20%2B%20tMat.col2.y%20*%20normal1Y%3B%0A%20%20%20%20%20%20normal1X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20index%20%3D%200%3B%0A%20%20%20%20%20%20var%20minDot%20%3D%20Number.MAX_VALUE%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20count2%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20normals2%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20dot%20%3D%20normal1X%20*%20tVec.x%20%2B%20normal1Y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20if%20(dot%20%3C%20minDot)%20%7B%0A%20%20%20%20%20%20%20%20%20%20minDot%20%3D%20dot%3B%0A%20%20%20%20%20%20%20%20%20%20index%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20tClip%3B%0A%20%20%20%20%20%20var%20i1%20%3D%20parseInt(index)%3B%0A%20%20%20%20%20%20var%20i2%20%3D%20parseInt(i1%20%2B%201%20%3C%20count2%20%3F%20i1%20%2B%201%20%3A%200)%3B%0A%20%20%20%20%20%20tClip%20%3D%20c%5B0%5D%3B%0A%20%20%20%20%20%20tVec%20%3D%20vertices2%5Bi1%5D%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20tClip.v.x%20%3D%0A%20%20%20%20%20%20%20%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tClip.v.y%20%3D%0A%20%20%20%20%20%20%20%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tClip.id.features.referenceEdge%20%3D%20edge1%3B%0A%20%20%20%20%20%20tClip.id.features.incidentEdge%20%3D%20i1%3B%0A%20%20%20%20%20%20tClip.id.features.incidentVertex%20%3D%200%3B%0A%20%20%20%20%20%20tClip%20%3D%20c%5B1%5D%3B%0A%20%20%20%20%20%20tVec%20%3D%20vertices2%5Bi2%5D%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20tClip.v.x%20%3D%0A%20%20%20%20%20%20%20%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tClip.v.y%20%3D%0A%20%20%20%20%20%20%20%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tClip.id.features.referenceEdge%20%3D%20edge1%3B%0A%20%20%20%20%20%20tClip.id.features.incidentEdge%20%3D%20i2%3B%0A%20%20%20%20%20%20tClip.id.features.incidentVertex%20%3D%201%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.MakeClipPointVector%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20r%20%3D%20new%20Vector(2)%3B%0A%20%20%20%20%20%20r%5B0%5D%20%3D%20new%20ClipVertex()%3B%0A%20%20%20%20%20%20r%5B1%5D%20%3D%20new%20ClipVertex()%3B%0A%20%20%20%20%20%20return%20r%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.CollidePolygons%20%3D%20function%20(manifold%2C%20polyA%2C%20xfA%2C%20polyB%2C%20xfB)%20%7B%0A%20%20%20%20%20%20var%20cv%3B%0A%20%20%20%20%20%20manifold.m_pointCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20totalRadius%20%3D%20polyA.m_radius%20%2B%20polyB.m_radius%3B%0A%20%20%20%20%20%20var%20edgeA%20%3D%200%3B%0A%20%20%20%20%20%20b2Collision.s_edgeAO%5B0%5D%20%3D%20edgeA%3B%0A%20%20%20%20%20%20var%20separationA%20%3D%20b2Collision.FindMaxSeparation(%0A%20%20%20%20%20%20%20%20b2Collision.s_edgeAO%2C%0A%20%20%20%20%20%20%20%20polyA%2C%0A%20%20%20%20%20%20%20%20xfA%2C%0A%20%20%20%20%20%20%20%20polyB%2C%0A%20%20%20%20%20%20%20%20xfB%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20edgeA%20%3D%20b2Collision.s_edgeAO%5B0%5D%3B%0A%20%20%20%20%20%20if%20(separationA%20%3E%20totalRadius)%20return%3B%0A%20%20%20%20%20%20var%20edgeB%20%3D%200%3B%0A%20%20%20%20%20%20b2Collision.s_edgeBO%5B0%5D%20%3D%20edgeB%3B%0A%20%20%20%20%20%20var%20separationB%20%3D%20b2Collision.FindMaxSeparation(%0A%20%20%20%20%20%20%20%20b2Collision.s_edgeBO%2C%0A%20%20%20%20%20%20%20%20polyB%2C%0A%20%20%20%20%20%20%20%20xfB%2C%0A%20%20%20%20%20%20%20%20polyA%2C%0A%20%20%20%20%20%20%20%20xfA%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20edgeB%20%3D%20b2Collision.s_edgeBO%5B0%5D%3B%0A%20%20%20%20%20%20if%20(separationB%20%3E%20totalRadius)%20return%3B%0A%20%20%20%20%20%20var%20poly1%3B%0A%20%20%20%20%20%20var%20poly2%3B%0A%20%20%20%20%20%20var%20xf1%3B%0A%20%20%20%20%20%20var%20xf2%3B%0A%20%20%20%20%20%20var%20edge1%20%3D%200%3B%0A%20%20%20%20%20%20var%20flip%20%3D%200%3B%0A%20%20%20%20%20%20var%20k_relativeTol%20%3D%200.98%3B%0A%20%20%20%20%20%20var%20k_absoluteTol%20%3D%200.001%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20if%20(separationB%20%3E%20k_relativeTol%20*%20separationA%20%2B%20k_absoluteTol)%20%7B%0A%20%20%20%20%20%20%20%20poly1%20%3D%20polyB%3B%0A%20%20%20%20%20%20%20%20poly2%20%3D%20polyA%3B%0A%20%20%20%20%20%20%20%20xf1%20%3D%20xfB%3B%0A%20%20%20%20%20%20%20%20xf2%20%3D%20xfA%3B%0A%20%20%20%20%20%20%20%20edge1%20%3D%20edgeB%3B%0A%20%20%20%20%20%20%20%20manifold.m_type%20%3D%20b2Manifold.e_faceB%3B%0A%20%20%20%20%20%20%20%20flip%20%3D%201%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20poly1%20%3D%20polyA%3B%0A%20%20%20%20%20%20%20%20poly2%20%3D%20polyB%3B%0A%20%20%20%20%20%20%20%20xf1%20%3D%20xfA%3B%0A%20%20%20%20%20%20%20%20xf2%20%3D%20xfB%3B%0A%20%20%20%20%20%20%20%20edge1%20%3D%20edgeA%3B%0A%20%20%20%20%20%20%20%20manifold.m_type%20%3D%20b2Manifold.e_faceA%3B%0A%20%20%20%20%20%20%20%20flip%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20incidentEdge%20%3D%20b2Collision.s_incidentEdge%3B%0A%20%20%20%20%20%20b2Collision.FindIncidentEdge(incidentEdge%2C%20poly1%2C%20xf1%2C%20edge1%2C%20poly2%2C%20xf2)%3B%0A%20%20%20%20%20%20var%20count1%20%3D%20parseInt(poly1.m_vertexCount)%3B%0A%20%20%20%20%20%20var%20vertices1%20%3D%20poly1.m_vertices%3B%0A%20%20%20%20%20%20var%20local_v11%20%3D%20vertices1%5Bedge1%5D%3B%0A%20%20%20%20%20%20var%20local_v12%3B%0A%20%20%20%20%20%20if%20(edge1%20%2B%201%20%3C%20count1)%20%7B%0A%20%20%20%20%20%20%20%20local_v12%20%3D%20vertices1%5BparseInt(edge1%20%2B%201)%5D%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20local_v12%20%3D%20vertices1%5B0%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20localTangent%20%3D%20b2Collision.s_localTangent%3B%0A%20%20%20%20%20%20localTangent.Set(local_v12.x%20-%20local_v11.x%2C%20local_v12.y%20-%20local_v11.y)%3B%0A%20%20%20%20%20%20localTangent.Normalize()%3B%0A%20%20%20%20%20%20var%20localNormal%20%3D%20b2Collision.s_localNormal%3B%0A%20%20%20%20%20%20localNormal.x%20%3D%20localTangent.y%3B%0A%20%20%20%20%20%20localNormal.y%20%3D%20-localTangent.x%3B%0A%20%20%20%20%20%20var%20planePoint%20%3D%20b2Collision.s_planePoint%3B%0A%20%20%20%20%20%20planePoint.Set(%0A%20%20%20%20%20%20%20%200.5%20*%20(local_v11.x%20%2B%20local_v12.x)%2C%0A%20%20%20%20%20%20%20%200.5%20*%20(local_v11.y%20%2B%20local_v12.y)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20tangent%20%3D%20b2Collision.s_tangent%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20tangent.x%20%3D%20tMat.col1.x%20*%20localTangent.x%20%2B%20tMat.col2.x%20*%20localTangent.y%3B%0A%20%20%20%20%20%20tangent.y%20%3D%20tMat.col1.y%20*%20localTangent.x%20%2B%20tMat.col2.y%20*%20localTangent.y%3B%0A%20%20%20%20%20%20var%20tangent2%20%3D%20b2Collision.s_tangent2%3B%0A%20%20%20%20%20%20tangent2.x%20%3D%20-tangent.x%3B%0A%20%20%20%20%20%20tangent2.y%20%3D%20-tangent.y%3B%0A%20%20%20%20%20%20var%20normal%20%3D%20b2Collision.s_normal%3B%0A%20%20%20%20%20%20normal.x%20%3D%20tangent.y%3B%0A%20%20%20%20%20%20normal.y%20%3D%20-tangent.x%3B%0A%20%20%20%20%20%20var%20v11%20%3D%20b2Collision.s_v11%3B%0A%20%20%20%20%20%20var%20v12%20%3D%20b2Collision.s_v12%3B%0A%20%20%20%20%20%20v11.x%20%3D%0A%20%20%20%20%20%20%20%20xf1.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20local_v11.x%20%2B%20tMat.col2.x%20*%20local_v11.y)%3B%0A%20%20%20%20%20%20v11.y%20%3D%0A%20%20%20%20%20%20%20%20xf1.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20local_v11.x%20%2B%20tMat.col2.y%20*%20local_v11.y)%3B%0A%20%20%20%20%20%20v12.x%20%3D%0A%20%20%20%20%20%20%20%20xf1.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20local_v12.x%20%2B%20tMat.col2.x%20*%20local_v12.y)%3B%0A%20%20%20%20%20%20v12.y%20%3D%0A%20%20%20%20%20%20%20%20xf1.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20local_v12.x%20%2B%20tMat.col2.y%20*%20local_v12.y)%3B%0A%20%20%20%20%20%20var%20frontOffset%20%3D%20normal.x%20*%20v11.x%20%2B%20normal.y%20*%20v11.y%3B%0A%20%20%20%20%20%20var%20sideOffset1%20%3D%20-tangent.x%20*%20v11.x%20-%20tangent.y%20*%20v11.y%20%2B%20totalRadius%3B%0A%20%20%20%20%20%20var%20sideOffset2%20%3D%20tangent.x%20*%20v12.x%20%2B%20tangent.y%20*%20v12.y%20%2B%20totalRadius%3B%0A%20%20%20%20%20%20var%20clipPoints1%20%3D%20b2Collision.s_clipPoints1%3B%0A%20%20%20%20%20%20var%20clipPoints2%20%3D%20b2Collision.s_clipPoints2%3B%0A%20%20%20%20%20%20var%20np%20%3D%200%3B%0A%20%20%20%20%20%20np%20%3D%20b2Collision.ClipSegmentToLine(%0A%20%20%20%20%20%20%20%20clipPoints1%2C%0A%20%20%20%20%20%20%20%20incidentEdge%2C%0A%20%20%20%20%20%20%20%20tangent2%2C%0A%20%20%20%20%20%20%20%20sideOffset1%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20if%20(np%20%3C%202)%20return%3B%0A%20%20%20%20%20%20np%20%3D%20b2Collision.ClipSegmentToLine(%0A%20%20%20%20%20%20%20%20clipPoints2%2C%0A%20%20%20%20%20%20%20%20clipPoints1%2C%0A%20%20%20%20%20%20%20%20tangent%2C%0A%20%20%20%20%20%20%20%20sideOffset2%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20if%20(np%20%3C%202)%20return%3B%0A%20%20%20%20%20%20manifold.m_localPlaneNormal.SetV(localNormal)%3B%0A%20%20%20%20%20%20manifold.m_localPoint.SetV(planePoint)%3B%0A%20%20%20%20%20%20var%20pointCount%20%3D%200%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20cv%20%3D%20clipPoints2%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20separation%20%3D%20normal.x%20*%20cv.v.x%20%2B%20normal.y%20*%20cv.v.y%20-%20frontOffset%3B%0A%20%20%20%20%20%20%20%20if%20(separation%20%3C%3D%20totalRadius)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20cp%20%3D%20manifold.m_points%5BpointCount%5D%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20%20%20%20%20var%20tX%20%3D%20cv.v.x%20-%20xf2.position.x%3B%0A%20%20%20%20%20%20%20%20%20%20var%20tY%20%3D%20cv.v.y%20-%20xf2.position.y%3B%0A%20%20%20%20%20%20%20%20%20%20cp.m_localPoint.x%20%3D%20tX%20*%20tMat.col1.x%20%2B%20tY%20*%20tMat.col1.y%3B%0A%20%20%20%20%20%20%20%20%20%20cp.m_localPoint.y%20%3D%20tX%20*%20tMat.col2.x%20%2B%20tY%20*%20tMat.col2.y%3B%0A%20%20%20%20%20%20%20%20%20%20cp.m_id.Set(cv.id)%3B%0A%20%20%20%20%20%20%20%20%20%20cp.m_id.features.flip%20%3D%20flip%3B%0A%20%20%20%20%20%20%20%20%20%20%2B%2BpointCount%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20manifold.m_pointCount%20%3D%20pointCount%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.CollideCircles%20%3D%20function%20(%0A%20%20%20%20%20%20manifold%2C%0A%20%20%20%20%20%20circle1%2C%0A%20%20%20%20%20%20xf1%2C%0A%20%20%20%20%20%20circle2%2C%0A%20%20%20%20%20%20xf2%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20manifold.m_pointCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20tVec%20%3D%20circle1.m_p%3B%0A%20%20%20%20%20%20var%20p1X%20%3D%20xf1.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20p1Y%20%3D%20xf1.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20tVec%20%3D%20circle2.m_p%3B%0A%20%20%20%20%20%20var%20p2X%20%3D%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20p2Y%20%3D%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20p2X%20-%20p1X%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20p2Y%20-%20p1Y%3B%0A%20%20%20%20%20%20var%20distSqr%20%3D%20dX%20*%20dX%20%2B%20dY%20*%20dY%3B%0A%20%20%20%20%20%20var%20radius%20%3D%20circle1.m_radius%20%2B%20circle2.m_radius%3B%0A%20%20%20%20%20%20if%20(distSqr%20%3E%20radius%20*%20radius)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20manifold.m_type%20%3D%20b2Manifold.e_circles%3B%0A%20%20%20%20%20%20manifold.m_localPoint.SetV(circle1.m_p)%3B%0A%20%20%20%20%20%20manifold.m_localPlaneNormal.SetZero()%3B%0A%20%20%20%20%20%20manifold.m_pointCount%20%3D%201%3B%0A%20%20%20%20%20%20manifold.m_points%5B0%5D.m_localPoint.SetV(circle2.m_p)%3B%0A%20%20%20%20%20%20manifold.m_points%5B0%5D.m_id.key%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.CollidePolygonAndCircle%20%3D%20function%20(%0A%20%20%20%20%20%20manifold%2C%0A%20%20%20%20%20%20polygon%2C%0A%20%20%20%20%20%20xf1%2C%0A%20%20%20%20%20%20circle%2C%0A%20%20%20%20%20%20xf2%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20manifold.m_pointCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20tPoint%3B%0A%20%20%20%20%20%20var%20dX%20%3D%200%3B%0A%20%20%20%20%20%20var%20dY%20%3D%200%3B%0A%20%20%20%20%20%20var%20positionX%20%3D%200%3B%0A%20%20%20%20%20%20var%20positionY%20%3D%200%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf2.R%3B%0A%20%20%20%20%20%20tVec%20%3D%20circle.m_p%3B%0A%20%20%20%20%20%20var%20cX%20%3D%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20cY%20%3D%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20dX%20%3D%20cX%20-%20xf1.position.x%3B%0A%20%20%20%20%20%20dY%20%3D%20cY%20-%20xf1.position.y%3B%0A%20%20%20%20%20%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20var%20cLocalX%20%3D%20dX%20*%20tMat.col1.x%20%2B%20dY%20*%20tMat.col1.y%3B%0A%20%20%20%20%20%20var%20cLocalY%20%3D%20dX%20*%20tMat.col2.x%20%2B%20dY%20*%20tMat.col2.y%3B%0A%20%20%20%20%20%20var%20dist%20%3D%200%3B%0A%20%20%20%20%20%20var%20normalIndex%20%3D%200%3B%0A%20%20%20%20%20%20var%20separation%20%3D%20-Number.MAX_VALUE%3B%0A%20%20%20%20%20%20var%20radius%20%3D%20polygon.m_radius%20%2B%20circle.m_radius%3B%0A%20%20%20%20%20%20var%20vertexCount%20%3D%20parseInt(polygon.m_vertexCount)%3B%0A%20%20%20%20%20%20var%20vertices%20%3D%20polygon.m_vertices%3B%0A%20%20%20%20%20%20var%20normals%20%3D%20polygon.m_normals%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20dX%20%3D%20cLocalX%20-%20tVec.x%3B%0A%20%20%20%20%20%20%20%20dY%20%3D%20cLocalY%20-%20tVec.y%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20normals%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20s%20%3D%20tVec.x%20*%20dX%20%2B%20tVec.y%20*%20dY%3B%0A%20%20%20%20%20%20%20%20if%20(s%20%3E%20radius)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(s%20%3E%20separation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20separation%20%3D%20s%3B%0A%20%20%20%20%20%20%20%20%20%20normalIndex%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20vertIndex1%20%3D%20parseInt(normalIndex)%3B%0A%20%20%20%20%20%20var%20vertIndex2%20%3D%20parseInt(%0A%20%20%20%20%20%20%20%20vertIndex1%20%2B%201%20%3C%20vertexCount%20%3F%20vertIndex1%20%2B%201%20%3A%200%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20v1%20%3D%20vertices%5BvertIndex1%5D%3B%0A%20%20%20%20%20%20var%20v2%20%3D%20vertices%5BvertIndex2%5D%3B%0A%20%20%20%20%20%20if%20(separation%20%3C%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20manifold.m_pointCount%20%3D%201%3B%0A%20%20%20%20%20%20%20%20manifold.m_type%20%3D%20b2Manifold.e_faceA%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.SetV(normals%5BnormalIndex%5D)%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPoint.x%20%3D%200.5%20*%20(v1.x%20%2B%20v2.x)%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPoint.y%20%3D%200.5%20*%20(v1.y%20%2B%20v2.y)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_localPoint.SetV(circle.m_p)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_id.key%20%3D%200%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20u1%20%3D%0A%20%20%20%20%20%20%20%20(cLocalX%20-%20v1.x)%20*%20(v2.x%20-%20v1.x)%20%2B%20(cLocalY%20-%20v1.y)%20*%20(v2.y%20-%20v1.y)%3B%0A%20%20%20%20%20%20var%20u2%20%3D%0A%20%20%20%20%20%20%20%20(cLocalX%20-%20v2.x)%20*%20(v1.x%20-%20v2.x)%20%2B%20(cLocalY%20-%20v2.y)%20*%20(v1.y%20-%20v2.y)%3B%0A%20%20%20%20%20%20if%20(u1%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20(cLocalX%20-%20v1.x)%20*%20(cLocalX%20-%20v1.x)%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(cLocalY%20-%20v1.y)%20*%20(cLocalY%20-%20v1.y)%20%3E%0A%20%20%20%20%20%20%20%20%20%20radius%20*%20radius%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20manifold.m_pointCount%20%3D%201%3B%0A%20%20%20%20%20%20%20%20manifold.m_type%20%3D%20b2Manifold.e_faceA%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.x%20%3D%20cLocalX%20-%20v1.x%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.y%20%3D%20cLocalY%20-%20v1.y%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.Normalize()%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPoint.SetV(v1)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_localPoint.SetV(circle.m_p)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_id.key%20%3D%200%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(u2%20%3C%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20(cLocalX%20-%20v2.x)%20*%20(cLocalX%20-%20v2.x)%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(cLocalY%20-%20v2.y)%20*%20(cLocalY%20-%20v2.y)%20%3E%0A%20%20%20%20%20%20%20%20%20%20radius%20*%20radius%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20manifold.m_pointCount%20%3D%201%3B%0A%20%20%20%20%20%20%20%20manifold.m_type%20%3D%20b2Manifold.e_faceA%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.x%20%3D%20cLocalX%20-%20v2.x%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.y%20%3D%20cLocalY%20-%20v2.y%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.Normalize()%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPoint.SetV(v2)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_localPoint.SetV(circle.m_p)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_id.key%20%3D%200%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20var%20faceCenterX%20%3D%200.5%20*%20(v1.x%20%2B%20v2.x)%3B%0A%20%20%20%20%20%20%20%20var%20faceCenterY%20%3D%200.5%20*%20(v1.y%20%2B%20v2.y)%3B%0A%20%20%20%20%20%20%20%20separation%20%3D%0A%20%20%20%20%20%20%20%20%20%20(cLocalX%20-%20faceCenterX)%20*%20normals%5BvertIndex1%5D.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20(cLocalY%20-%20faceCenterY)%20*%20normals%5BvertIndex1%5D.y%3B%0A%20%20%20%20%20%20%20%20if%20(separation%20%3E%20radius)%20return%3B%0A%20%20%20%20%20%20%20%20manifold.m_pointCount%20%3D%201%3B%0A%20%20%20%20%20%20%20%20manifold.m_type%20%3D%20b2Manifold.e_faceA%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.x%20%3D%20normals%5BvertIndex1%5D.x%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.y%20%3D%20normals%5BvertIndex1%5D.y%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPlaneNormal.Normalize()%3B%0A%20%20%20%20%20%20%20%20manifold.m_localPoint.Set(faceCenterX%2C%20faceCenterY)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_localPoint.SetV(circle.m_p)%3B%0A%20%20%20%20%20%20%20%20manifold.m_points%5B0%5D.m_id.key%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Collision.TestOverlap%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20var%20t1%20%3D%20b.lowerBound%3B%0A%20%20%20%20%20%20var%20t2%20%3D%20a.upperBound%3B%0A%20%20%20%20%20%20var%20d1X%20%3D%20t1.x%20-%20t2.x%3B%0A%20%20%20%20%20%20var%20d1Y%20%3D%20t1.y%20-%20t2.y%3B%0A%20%20%20%20%20%20t1%20%3D%20a.lowerBound%3B%0A%20%20%20%20%20%20t2%20%3D%20b.upperBound%3B%0A%20%20%20%20%20%20var%20d2X%20%3D%20t1.x%20-%20t2.x%3B%0A%20%20%20%20%20%20var%20d2Y%20%3D%20t1.y%20-%20t2.y%3B%0A%20%20%20%20%20%20if%20(d1X%20%3E%200.0%20%7C%7C%20d1Y%20%3E%200.0)%20return%20false%3B%0A%20%20%20%20%20%20if%20(d2X%20%3E%200.0%20%7C%7C%20d2Y%20%3E%200.0)%20return%20false%3B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_incidentEdge%20%3D%0A%20%20%20%20%20%20%20%20b2Collision.MakeClipPointVector()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_clipPoints1%20%3D%0A%20%20%20%20%20%20%20%20b2Collision.MakeClipPointVector()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_clipPoints2%20%3D%0A%20%20%20%20%20%20%20%20b2Collision.MakeClipPointVector()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_edgeAO%20%3D%20new%20Vector_a2j_Number(1)%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_edgeBO%20%3D%20new%20Vector_a2j_Number(1)%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_localTangent%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_localNormal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_planePoint%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_tangent%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_tangent2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_v11%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.s_v12%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.b2CollidePolyTempVec%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Collision.b2_nullFeature%20%3D%200x000000ff%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2ContactID.b2ContactID%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.features%20%3D%20new%20Features()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactID.prototype.b2ContactID%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.features._m_id%20%3D%20this%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactID.prototype.Set%20%3D%20function%20(id)%20%7B%0A%20%20%20%20%20%20this.key%20%3D%20id._key%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactID.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20id%20%3D%20new%20b2ContactID()%3B%0A%20%20%20%20%20%20id.key%20%3D%20this.key%3B%0A%20%20%20%20%20%20return%20id%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Object.defineProperty(b2ContactID.prototype%2C%20%22key%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20get%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20return%20this._key%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(b2ContactID.prototype%2C%20%22key%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20set%3A%20function%20(value)%20%7B%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20value%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._key%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20this.features._referenceEdge%20%3D%20this._key%20%26%200x000000ff%3B%0A%20%20%20%20%20%20%20%20this.features._incidentEdge%20%3D%0A%20%20%20%20%20%20%20%20%20%20((this._key%20%26%200x0000ff00)%20%3E%3E%208)%20%26%200x000000ff%3B%0A%20%20%20%20%20%20%20%20this.features._incidentVertex%20%3D%0A%20%20%20%20%20%20%20%20%20%20((this._key%20%26%200x00ff0000)%20%3E%3E%2016)%20%26%200x000000ff%3B%0A%20%20%20%20%20%20%20%20this.features._flip%20%3D%20((this._key%20%26%200xff000000)%20%3E%3E%2024)%20%26%200x000000ff%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2ContactPoint.b2ContactPoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.position%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.velocity%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.id%20%3D%20new%20b2ContactID()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Distance.b2Distance%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Distance.Distance%20%3D%20function%20(output%2C%20cache%2C%20input)%20%7B%0A%20%20%20%20%20%20%2B%2Bb2Distance.b2_gjkCalls%3B%0A%20%20%20%20%20%20var%20proxyA%20%3D%20input.proxyA%3B%0A%20%20%20%20%20%20var%20proxyB%20%3D%20input.proxyB%3B%0A%20%20%20%20%20%20var%20transformA%20%3D%20input.transformA%3B%0A%20%20%20%20%20%20var%20transformB%20%3D%20input.transformB%3B%0A%20%20%20%20%20%20var%20simplex%20%3D%20b2Distance.s_simplex%3B%0A%20%20%20%20%20%20simplex.ReadCache(cache%2C%20proxyA%2C%20transformA%2C%20proxyB%2C%20transformB)%3B%0A%20%20%20%20%20%20var%20vertices%20%3D%20simplex.m_vertices%3B%0A%20%20%20%20%20%20var%20k_maxIters%20%3D%2020%3B%0A%20%20%20%20%20%20var%20saveA%20%3D%20b2Distance.s_saveA%3B%0A%20%20%20%20%20%20var%20saveB%20%3D%20b2Distance.s_saveB%3B%0A%20%20%20%20%20%20var%20saveCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20closestPoint%20%3D%20simplex.GetClosestPoint()%3B%0A%20%20%20%20%20%20var%20distanceSqr1%20%3D%20closestPoint.LengthSquared()%3B%0A%20%20%20%20%20%20var%20distanceSqr2%20%3D%20distanceSqr1%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20var%20p%3B%0A%20%20%20%20%20%20var%20iter%20%3D%200%3B%0A%20%20%20%20%20%20while%20(iter%20%3C%20k_maxIters)%20%7B%0A%20%20%20%20%20%20%20%20saveCount%20%3D%20simplex.m_count%3B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20saveCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20saveA%5Bi%5D%20%3D%20vertices%5Bi%5D.indexA%3B%0A%20%20%20%20%20%20%20%20%20%20saveB%5Bi%5D%20%3D%20vertices%5Bi%5D.indexB%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20switch%20(simplex.m_count)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%202%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20simplex.Solve2()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%203%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20simplex.Solve3()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(simplex.m_count%20%3D%3D%203)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20p%20%3D%20simplex.GetClosestPoint()%3B%0A%20%20%20%20%20%20%20%20distanceSqr2%20%3D%20p.LengthSquared()%3B%0A%20%20%20%20%20%20%20%20if%20(distanceSqr2%20%3E%20distanceSqr1)%20%7B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20distanceSqr1%20%3D%20distanceSqr2%3B%0A%20%20%20%20%20%20%20%20var%20d%20%3D%20simplex.GetSearchDirection()%3B%0A%20%20%20%20%20%20%20%20if%20(d.LengthSquared()%20%3C%20Number.MIN_VALUE%20*%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20vertex%20%3D%20vertices%5Bsimplex.m_count%5D%3B%0A%20%20%20%20%20%20%20%20vertex.indexA%20%3D%20proxyA.GetSupport(%0A%20%20%20%20%20%20%20%20%20%20b2Math.MulTMV(transformA.R%2C%20d.GetNegative())%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20vertex.wA%20%3D%20b2Math.MulX(transformA%2C%20proxyA.GetVertex(vertex.indexA))%3B%0A%20%20%20%20%20%20%20%20vertex.indexB%20%3D%20proxyB.GetSupport(b2Math.MulTMV(transformB.R%2C%20d))%3B%0A%20%20%20%20%20%20%20%20vertex.wB%20%3D%20b2Math.MulX(transformB%2C%20proxyB.GetVertex(vertex.indexB))%3B%0A%20%20%20%20%20%20%20%20vertex.w%20%3D%20b2Math.SubtractVV(vertex.wB%2C%20vertex.wA)%3B%0A%20%20%20%20%20%20%20%20%2B%2Biter%3B%0A%20%20%20%20%20%20%20%20%2B%2Bb2Distance.b2_gjkIters%3B%0A%20%20%20%20%20%20%20%20var%20duplicate%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20saveCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(vertex.indexA%20%3D%3D%20saveA%5Bi%5D%20%26%26%20vertex.indexB%20%3D%3D%20saveB%5Bi%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20duplicate%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(duplicate)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2B%2Bsimplex.m_count%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20b2Distance.b2_gjkMaxIters%20%3D%20b2Math.Max(b2Distance.b2_gjkMaxIters%2C%20iter)%3B%0A%20%20%20%20%20%20simplex.GetWitnessPoints(output.pointA%2C%20output.pointB)%3B%0A%20%20%20%20%20%20output.distance%20%3D%20b2Math%0A%20%20%20%20%20%20%20%20.SubtractVV(output.pointA%2C%20output.pointB)%0A%20%20%20%20%20%20%20%20.Length()%3B%0A%20%20%20%20%20%20output.iterations%20%3D%20iter%3B%0A%20%20%20%20%20%20simplex.WriteCache(cache)%3B%0A%20%20%20%20%20%20if%20(input.useRadii)%20%7B%0A%20%20%20%20%20%20%20%20var%20rA%20%3D%20proxyA.m_radius%3B%0A%20%20%20%20%20%20%20%20var%20rB%20%3D%20proxyB.m_radius%3B%0A%20%20%20%20%20%20%20%20if%20(output.distance%20%3E%20rA%20%2B%20rB%20%26%26%20output.distance%20%3E%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20output.distance%20-%3D%20rA%20%2B%20rB%3B%0A%20%20%20%20%20%20%20%20%20%20var%20normal%20%3D%20b2Math.SubtractVV(output.pointB%2C%20output.pointA)%3B%0A%20%20%20%20%20%20%20%20%20%20normal.Normalize()%3B%0A%20%20%20%20%20%20%20%20%20%20output.pointA.x%20%2B%3D%20rA%20*%20normal.x%3B%0A%20%20%20%20%20%20%20%20%20%20output.pointA.y%20%2B%3D%20rA%20*%20normal.y%3B%0A%20%20%20%20%20%20%20%20%20%20output.pointB.x%20-%3D%20rB%20*%20normal.x%3B%0A%20%20%20%20%20%20%20%20%20%20output.pointB.y%20-%3D%20rB%20*%20normal.y%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20p%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20%20%20p.x%20%3D%200.5%20*%20(output.pointA.x%20%2B%20output.pointB.x)%3B%0A%20%20%20%20%20%20%20%20%20%20p.y%20%3D%200.5%20*%20(output.pointA.y%20%2B%20output.pointB.y)%3B%0A%20%20%20%20%20%20%20%20%20%20output.pointA.x%20%3D%20output.pointB.x%20%3D%20p.x%3B%0A%20%20%20%20%20%20%20%20%20%20output.pointA.y%20%3D%20output.pointB.y%20%3D%20p.y%3B%0A%20%20%20%20%20%20%20%20%20%20output.distance%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Collision.b2Distance.s_simplex%20%3D%20new%20b2Simplex()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Distance.s_saveA%20%3D%20new%20Vector_a2j_Number(3)%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Distance.s_saveB%20%3D%20new%20Vector_a2j_Number(3)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2DistanceInput.b2DistanceInput%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DistanceOutput.b2DistanceOutput%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.pointA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.pointB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceProxy.b2DistanceProxy%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DistanceProxy.prototype.Set%20%3D%20function%20(shape)%20%7B%0A%20%20%20%20%20%20switch%20(shape.GetType())%20%7B%0A%20%20%20%20%20%20%20%20case%20b2Shape.e_circleShape%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20circle%20%3D%20shape%20instanceof%20b2CircleShape%20%3F%20shape%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_vertices%20%3D%20new%20Vector(1%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_vertices%5B0%5D%20%3D%20circle.m_p%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_count%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_radius%20%3D%20circle.m_radius%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Shape.e_polygonShape%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20polygon%20%3D%20shape%20instanceof%20b2PolygonShape%20%3F%20shape%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_vertices%20%3D%20polygon.m_vertices%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_count%20%3D%20polygon.m_vertexCount%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_radius%20%3D%20polygon.m_radius%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceProxy.prototype.GetSupport%20%3D%20function%20(d)%20%7B%0A%20%20%20%20%20%20var%20bestIndex%20%3D%200%3B%0A%20%20%20%20%20%20var%20bestValue%20%3D%20this.m_vertices%5B0%5D.x%20*%20d.x%20%2B%20this.m_vertices%5B0%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%201%3B%20i%20%3C%20this.m_count%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20value%20%3D%20this.m_vertices%5Bi%5D.x%20*%20d.x%20%2B%20this.m_vertices%5Bi%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20%20%20if%20(value%20%3E%20bestValue)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bestIndex%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%20%20bestValue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20bestIndex%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceProxy.prototype.GetSupportVertex%20%3D%20function%20(d)%20%7B%0A%20%20%20%20%20%20var%20bestIndex%20%3D%200%3B%0A%20%20%20%20%20%20var%20bestValue%20%3D%20this.m_vertices%5B0%5D.x%20*%20d.x%20%2B%20this.m_vertices%5B0%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%201%3B%20i%20%3C%20this.m_count%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20value%20%3D%20this.m_vertices%5Bi%5D.x%20*%20d.x%20%2B%20this.m_vertices%5Bi%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20%20%20if%20(value%20%3E%20bestValue)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bestIndex%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%20%20bestValue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20this.m_vertices%5BbestIndex%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceProxy.prototype.GetVertexCount%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_count%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceProxy.prototype.GetVertex%20%3D%20function%20(index)%20%7B%0A%20%20%20%20%20%20if%20(index%20%3D%3D%3D%20undefined)%20index%20%3D%200%3B%0A%20%20%20%20%20%20b2Settings.b2Assert(0%20%3C%3D%20index%20%26%26%20index%20%3C%20this.m_count)%3B%0A%20%20%20%20%20%20return%20this.m_vertices%5Bindex%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.b2DynamicTree%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.b2DynamicTree%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_root%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_freeList%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_path%20%3D%200%3B%0A%20%20%20%20%20%20this.m_insertionCount%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.CreateProxy%20%3D%20function%20(aabb%2C%20userData)%20%7B%0A%20%20%20%20%20%20var%20node%20%3D%20this.AllocateNode()%3B%0A%20%20%20%20%20%20var%20extendX%20%3D%20b2Settings.b2_aabbExtension%3B%0A%20%20%20%20%20%20var%20extendY%20%3D%20b2Settings.b2_aabbExtension%3B%0A%20%20%20%20%20%20node.aabb.lowerBound.x%20%3D%20aabb.lowerBound.x%20-%20extendX%3B%0A%20%20%20%20%20%20node.aabb.lowerBound.y%20%3D%20aabb.lowerBound.y%20-%20extendY%3B%0A%20%20%20%20%20%20node.aabb.upperBound.x%20%3D%20aabb.upperBound.x%20%2B%20extendX%3B%0A%20%20%20%20%20%20node.aabb.upperBound.y%20%3D%20aabb.upperBound.y%20%2B%20extendY%3B%0A%20%20%20%20%20%20node.userData%20%3D%20userData%3B%0A%20%20%20%20%20%20this.InsertLeaf(node)%3B%0A%20%20%20%20%20%20return%20node%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.DestroyProxy%20%3D%20function%20(proxy)%20%7B%0A%20%20%20%20%20%20this.RemoveLeaf(proxy)%3B%0A%20%20%20%20%20%20this.FreeNode(proxy)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.MoveProxy%20%3D%20function%20(proxy%2C%20aabb%2C%20displacement)%20%7B%0A%20%20%20%20%20%20b2Settings.b2Assert(proxy.IsLeaf())%3B%0A%20%20%20%20%20%20if%20(proxy.aabb.Contains(aabb))%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.RemoveLeaf(proxy)%3B%0A%20%20%20%20%20%20var%20extendX%20%3D%0A%20%20%20%20%20%20%20%20b2Settings.b2_aabbExtension%20%2B%0A%20%20%20%20%20%20%20%20b2Settings.b2_aabbMultiplier%20*%0A%20%20%20%20%20%20%20%20%20%20(displacement.x%20%3E%200%20%3F%20displacement.x%20%3A%20-displacement.x)%3B%0A%20%20%20%20%20%20var%20extendY%20%3D%0A%20%20%20%20%20%20%20%20b2Settings.b2_aabbExtension%20%2B%0A%20%20%20%20%20%20%20%20b2Settings.b2_aabbMultiplier%20*%0A%20%20%20%20%20%20%20%20%20%20(displacement.y%20%3E%200%20%3F%20displacement.y%20%3A%20-displacement.y)%3B%0A%20%20%20%20%20%20proxy.aabb.lowerBound.x%20%3D%20aabb.lowerBound.x%20-%20extendX%3B%0A%20%20%20%20%20%20proxy.aabb.lowerBound.y%20%3D%20aabb.lowerBound.y%20-%20extendY%3B%0A%20%20%20%20%20%20proxy.aabb.upperBound.x%20%3D%20aabb.upperBound.x%20%2B%20extendX%3B%0A%20%20%20%20%20%20proxy.aabb.upperBound.y%20%3D%20aabb.upperBound.y%20%2B%20extendY%3B%0A%20%20%20%20%20%20this.InsertLeaf(proxy)%3B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.Rebalance%20%3D%20function%20(iterations)%20%7B%0A%20%20%20%20%20%20if%20(iterations%20%3D%3D%3D%20undefined)%20iterations%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_root%20%3D%3D%20null)%20return%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20iterations%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20var%20node%20%3D%20this.m_root%3B%0A%20%20%20%20%20%20%20%20var%20bit%20%3D%200%3B%0A%20%20%20%20%20%20%20%20while%20(node.IsLeaf()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20node%20%3D%20(this.m_path%20%3E%3E%20bit)%20%26%201%20%3F%20node.child2%20%3A%20node.child1%3B%0A%20%20%20%20%20%20%20%20%20%20bit%20%3D%20(bit%20%2B%201)%20%26%2031%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2B%2Bthis.m_path%3B%0A%20%20%20%20%20%20%20%20this.RemoveLeaf(node)%3B%0A%20%20%20%20%20%20%20%20this.InsertLeaf(node)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.GetFatAABB%20%3D%20function%20(proxy)%20%7B%0A%20%20%20%20%20%20return%20proxy.aabb%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.GetUserData%20%3D%20function%20(proxy)%20%7B%0A%20%20%20%20%20%20return%20proxy.userData%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.Query%20%3D%20function%20(callback%2C%20aabb)%20%7B%0A%20%20%20%20%20%20if%20(this.m_root%20%3D%3D%20null)%20return%3B%0A%20%20%20%20%20%20var%20stack%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20var%20count%20%3D%200%3B%0A%20%20%20%20%20%20stack%5Bcount%2B%2B%5D%20%3D%20this.m_root%3B%0A%20%20%20%20%20%20while%20(count%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20var%20node%20%3D%20stack%5B--count%5D%3B%0A%20%20%20%20%20%20%20%20if%20(node.aabb.TestOverlap(aabb))%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(node.IsLeaf())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20proceed%20%3D%20callback(node)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!proceed)%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20stack%5Bcount%2B%2B%5D%20%3D%20node.child1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20stack%5Bcount%2B%2B%5D%20%3D%20node.child2%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.RayCast%20%3D%20function%20(callback%2C%20input)%20%7B%0A%20%20%20%20%20%20if%20(this.m_root%20%3D%3D%20null)%20return%3B%0A%20%20%20%20%20%20var%20p1%20%3D%20input.p1%3B%0A%20%20%20%20%20%20var%20p2%20%3D%20input.p2%3B%0A%20%20%20%20%20%20var%20r%20%3D%20b2Math.SubtractVV(p1%2C%20p2)%3B%0A%20%20%20%20%20%20r.Normalize()%3B%0A%20%20%20%20%20%20var%20v%20%3D%20b2Math.CrossFV(1.0%2C%20r)%3B%0A%20%20%20%20%20%20var%20abs_v%20%3D%20b2Math.AbsV(v)%3B%0A%20%20%20%20%20%20var%20maxFraction%20%3D%20input.maxFraction%3B%0A%20%20%20%20%20%20var%20segmentAABB%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20tY%20%3D%200%3B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20tX%20%3D%20p1.x%20%2B%20maxFraction%20*%20(p2.x%20-%20p1.x)%3B%0A%20%20%20%20%20%20%20%20tY%20%3D%20p1.y%20%2B%20maxFraction%20*%20(p2.y%20-%20p1.y)%3B%0A%20%20%20%20%20%20%20%20segmentAABB.lowerBound.x%20%3D%20Math.min(p1.x%2C%20tX)%3B%0A%20%20%20%20%20%20%20%20segmentAABB.lowerBound.y%20%3D%20Math.min(p1.y%2C%20tY)%3B%0A%20%20%20%20%20%20%20%20segmentAABB.upperBound.x%20%3D%20Math.max(p1.x%2C%20tX)%3B%0A%20%20%20%20%20%20%20%20segmentAABB.upperBound.y%20%3D%20Math.max(p1.y%2C%20tY)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20stack%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20var%20count%20%3D%200%3B%0A%20%20%20%20%20%20stack%5Bcount%2B%2B%5D%20%3D%20this.m_root%3B%0A%20%20%20%20%20%20while%20(count%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20var%20node%20%3D%20stack%5B--count%5D%3B%0A%20%20%20%20%20%20%20%20if%20(node.aabb.TestOverlap(segmentAABB)%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20node.aabb.GetCenter()%3B%0A%20%20%20%20%20%20%20%20var%20h%20%3D%20node.aabb.GetExtents()%3B%0A%20%20%20%20%20%20%20%20var%20separation%20%3D%0A%20%20%20%20%20%20%20%20%20%20Math.abs(v.x%20*%20(p1.x%20-%20c.x)%20%2B%20v.y%20*%20(p1.y%20-%20c.y))%20-%0A%20%20%20%20%20%20%20%20%20%20abs_v.x%20*%20h.x%20-%0A%20%20%20%20%20%20%20%20%20%20abs_v.y%20*%20h.y%3B%0A%20%20%20%20%20%20%20%20if%20(separation%20%3E%200.0)%20continue%3B%0A%20%20%20%20%20%20%20%20if%20(node.IsLeaf())%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20subInput%20%3D%20new%20b2RayCastInput()%3B%0A%20%20%20%20%20%20%20%20%20%20subInput.p1%20%3D%20input.p1%3B%0A%20%20%20%20%20%20%20%20%20%20subInput.p2%20%3D%20input.p2%3B%0A%20%20%20%20%20%20%20%20%20%20subInput.maxFraction%20%3D%20input.maxFraction%3B%0A%20%20%20%20%20%20%20%20%20%20maxFraction%20%3D%20callback(subInput%2C%20node)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(maxFraction%20%3D%3D%200.0)%20return%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(maxFraction%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tX%20%3D%20p1.x%20%2B%20maxFraction%20*%20(p2.x%20-%20p1.x)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tY%20%3D%20p1.y%20%2B%20maxFraction%20*%20(p2.y%20-%20p1.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20segmentAABB.lowerBound.x%20%3D%20Math.min(p1.x%2C%20tX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20segmentAABB.lowerBound.y%20%3D%20Math.min(p1.y%2C%20tY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20segmentAABB.upperBound.x%20%3D%20Math.max(p1.x%2C%20tX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20segmentAABB.upperBound.y%20%3D%20Math.max(p1.y%2C%20tY)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20stack%5Bcount%2B%2B%5D%20%3D%20node.child1%3B%0A%20%20%20%20%20%20%20%20%20%20stack%5Bcount%2B%2B%5D%20%3D%20node.child2%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.AllocateNode%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20if%20(this.m_freeList)%20%7B%0A%20%20%20%20%20%20%20%20var%20node%20%3D%20this.m_freeList%3B%0A%20%20%20%20%20%20%20%20this.m_freeList%20%3D%20node.parent%3B%0A%20%20%20%20%20%20%20%20node.parent%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20node.child1%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20node.child2%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20return%20node%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20new%20b2DynamicTreeNode()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.FreeNode%20%3D%20function%20(node)%20%7B%0A%20%20%20%20%20%20node.parent%20%3D%20this.m_freeList%3B%0A%20%20%20%20%20%20this.m_freeList%20%3D%20node%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.InsertLeaf%20%3D%20function%20(leaf)%20%7B%0A%20%20%20%20%20%20%2B%2Bthis.m_insertionCount%3B%0A%20%20%20%20%20%20if%20(this.m_root%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20this.m_root%20%3D%20leaf%3B%0A%20%20%20%20%20%20%20%20this.m_root.parent%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20center%20%3D%20leaf.aabb.GetCenter()%3B%0A%20%20%20%20%20%20var%20sibling%20%3D%20this.m_root%3B%0A%20%20%20%20%20%20if%20(sibling.IsLeaf()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20child1%20%3D%20sibling.child1%3B%0A%20%20%20%20%20%20%20%20%20%20var%20child2%20%3D%20sibling.child2%3B%0A%20%20%20%20%20%20%20%20%20%20var%20norm1%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20Math.abs(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(child1.aabb.lowerBound.x%20%2B%20child1.aabb.upperBound.x)%20%2F%202%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20center.x%0A%20%20%20%20%20%20%20%20%20%20%20%20)%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20Math.abs(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(child1.aabb.lowerBound.y%20%2B%20child1.aabb.upperBound.y)%20%2F%202%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20center.y%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20norm2%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20Math.abs(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(child2.aabb.lowerBound.x%20%2B%20child2.aabb.upperBound.x)%20%2F%202%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20center.x%0A%20%20%20%20%20%20%20%20%20%20%20%20)%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20Math.abs(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(child2.aabb.lowerBound.y%20%2B%20child2.aabb.upperBound.y)%20%2F%202%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20center.y%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(norm1%20%3C%20norm2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sibling%20%3D%20child1%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20sibling%20%3D%20child2%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20while%20(sibling.IsLeaf()%20%3D%3D%20false)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20node1%20%3D%20sibling.parent%3B%0A%20%20%20%20%20%20var%20node2%20%3D%20this.AllocateNode()%3B%0A%20%20%20%20%20%20node2.parent%20%3D%20node1%3B%0A%20%20%20%20%20%20node2.userData%20%3D%20null%3B%0A%20%20%20%20%20%20node2.aabb.Combine(leaf.aabb%2C%20sibling.aabb)%3B%0A%20%20%20%20%20%20if%20(node1)%20%7B%0A%20%20%20%20%20%20%20%20if%20(sibling.parent.child1%20%3D%3D%20sibling)%20%7B%0A%20%20%20%20%20%20%20%20%20%20node1.child1%20%3D%20node2%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20node1.child2%20%3D%20node2%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20node2.child1%20%3D%20sibling%3B%0A%20%20%20%20%20%20%20%20node2.child2%20%3D%20leaf%3B%0A%20%20%20%20%20%20%20%20sibling.parent%20%3D%20node2%3B%0A%20%20%20%20%20%20%20%20leaf.parent%20%3D%20node2%3B%0A%20%20%20%20%20%20%20%20do%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(node1.aabb.Contains(node2.aabb))%20break%3B%0A%20%20%20%20%20%20%20%20%20%20node1.aabb.Combine(node1.child1.aabb%2C%20node1.child2.aabb)%3B%0A%20%20%20%20%20%20%20%20%20%20node2%20%3D%20node1%3B%0A%20%20%20%20%20%20%20%20%20%20node1%20%3D%20node1.parent%3B%0A%20%20%20%20%20%20%20%20%7D%20while%20(node1)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20node2.child1%20%3D%20sibling%3B%0A%20%20%20%20%20%20%20%20node2.child2%20%3D%20leaf%3B%0A%20%20%20%20%20%20%20%20sibling.parent%20%3D%20node2%3B%0A%20%20%20%20%20%20%20%20leaf.parent%20%3D%20node2%3B%0A%20%20%20%20%20%20%20%20this.m_root%20%3D%20node2%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTree.prototype.RemoveLeaf%20%3D%20function%20(leaf)%20%7B%0A%20%20%20%20%20%20if%20(leaf%20%3D%3D%20this.m_root)%20%7B%0A%20%20%20%20%20%20%20%20this.m_root%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20node2%20%3D%20leaf.parent%3B%0A%20%20%20%20%20%20var%20node1%20%3D%20node2.parent%3B%0A%20%20%20%20%20%20var%20sibling%3B%0A%20%20%20%20%20%20if%20(node2.child1%20%3D%3D%20leaf)%20%7B%0A%20%20%20%20%20%20%20%20sibling%20%3D%20node2.child2%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20sibling%20%3D%20node2.child1%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(node1)%20%7B%0A%20%20%20%20%20%20%20%20if%20(node1.child1%20%3D%3D%20node2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20node1.child1%20%3D%20sibling%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20node1.child2%20%3D%20sibling%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20sibling.parent%20%3D%20node1%3B%0A%20%20%20%20%20%20%20%20this.FreeNode(node2)%3B%0A%20%20%20%20%20%20%20%20while%20(node1)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20oldAABB%20%3D%20node1.aabb%3B%0A%20%20%20%20%20%20%20%20%20%20node1.aabb%20%3D%20b2AABB.Combine(node1.child1.aabb%2C%20node1.child2.aabb)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(oldAABB.Contains(node1.aabb))%20break%3B%0A%20%20%20%20%20%20%20%20%20%20node1%20%3D%20node1.parent%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_root%20%3D%20sibling%3B%0A%20%20%20%20%20%20%20%20sibling.parent%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.FreeNode(node2)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.b2DynamicTreeBroadPhase%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_tree%20%3D%20new%20b2DynamicTree()%3B%0A%20%20%20%20%20%20this.m_moveBuffer%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20this.m_pairBuffer%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20this.m_pairCount%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.CreateProxy%20%3D%20function%20(aabb%2C%20userData)%20%7B%0A%20%20%20%20%20%20var%20proxy%20%3D%20this.m_tree.CreateProxy(aabb%2C%20userData)%3B%0A%20%20%20%20%20%20%2B%2Bthis.m_proxyCount%3B%0A%20%20%20%20%20%20this.BufferMove(proxy)%3B%0A%20%20%20%20%20%20return%20proxy%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.DestroyProxy%20%3D%20function%20(proxy)%20%7B%0A%20%20%20%20%20%20this.UnBufferMove(proxy)%3B%0A%20%20%20%20%20%20--this.m_proxyCount%3B%0A%20%20%20%20%20%20this.m_tree.DestroyProxy(proxy)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.MoveProxy%20%3D%20function%20(%0A%20%20%20%20%20%20proxy%2C%0A%20%20%20%20%20%20aabb%2C%0A%20%20%20%20%20%20displacement%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20var%20buffer%20%3D%20this.m_tree.MoveProxy(proxy%2C%20aabb%2C%20displacement)%3B%0A%20%20%20%20%20%20if%20(buffer)%20%7B%0A%20%20%20%20%20%20%20%20this.BufferMove(proxy)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.TestOverlap%20%3D%20function%20(proxyA%2C%20proxyB)%20%7B%0A%20%20%20%20%20%20var%20aabbA%20%3D%20this.m_tree.GetFatAABB(proxyA)%3B%0A%20%20%20%20%20%20var%20aabbB%20%3D%20this.m_tree.GetFatAABB(proxyB)%3B%0A%20%20%20%20%20%20return%20aabbA.TestOverlap(aabbB)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.GetUserData%20%3D%20function%20(proxy)%20%7B%0A%20%20%20%20%20%20return%20this.m_tree.GetUserData(proxy)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.GetFatAABB%20%3D%20function%20(proxy)%20%7B%0A%20%20%20%20%20%20return%20this.m_tree.GetFatAABB(proxy)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.GetProxyCount%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_proxyCount%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.UpdatePairs%20%3D%20function%20(callback)%20%7B%0A%20%20%20%20%20%20var%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20__this.m_pairCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%2C%0A%20%20%20%20%20%20%20%20queryProxy%3B%0A%20%20%20%20%20%20function%20QueryCallback(proxy)%20%7B%0A%20%20%20%20%20%20%20%20if%20(proxy%20%3D%3D%20queryProxy)%20return%20true%3B%0A%20%20%20%20%20%20%20%20if%20(__this.m_pairCount%20%3D%3D%20__this.m_pairBuffer.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20__this.m_pairBuffer%5B__this.m_pairCount%5D%20%3D%20new%20b2DynamicTreePair()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20pair%20%3D%20__this.m_pairBuffer%5B__this.m_pairCount%5D%3B%0A%20%20%20%20%20%20%20%20pair.proxyA%20%3D%20proxy%20%3C%20queryProxy%20%3F%20proxy%20%3A%20queryProxy%3B%0A%20%20%20%20%20%20%20%20pair.proxyB%20%3D%20proxy%20%3E%3D%20queryProxy%20%3F%20proxy%20%3A%20queryProxy%3B%0A%20%20%20%20%20%20%20%20%2B%2B__this.m_pairCount%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20__this.m_moveBuffer.length%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20queryProxy%20%3D%20__this.m_moveBuffer%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20fatAABB%20%3D%20__this.m_tree.GetFatAABB(queryProxy)%3B%0A%20%20%20%20%20%20%20%20__this.m_tree.Query(QueryCallback%2C%20fatAABB)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20__this.m_moveBuffer.length%20%3D%200%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20__this.m_pairCount%3B%20)%20%7B%0A%20%20%20%20%20%20%20%20var%20primaryPair%20%3D%20__this.m_pairBuffer%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20userDataA%20%3D%20__this.m_tree.GetUserData(primaryPair.proxyA)%3B%0A%20%20%20%20%20%20%20%20var%20userDataB%20%3D%20__this.m_tree.GetUserData(primaryPair.proxyB)%3B%0A%20%20%20%20%20%20%20%20callback(userDataA%2C%20userDataB)%3B%0A%20%20%20%20%20%20%20%20%2B%2Bi%3B%0A%20%20%20%20%20%20%20%20while%20(i%20%3C%20__this.m_pairCount)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20pair%20%3D%20__this.m_pairBuffer%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20pair.proxyA%20!%3D%20primaryPair.proxyA%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20pair.proxyB%20!%3D%20primaryPair.proxyB%0A%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%2B%2Bi%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.Query%20%3D%20function%20(callback%2C%20aabb)%20%7B%0A%20%20%20%20%20%20this.m_tree.Query(callback%2C%20aabb)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.RayCast%20%3D%20function%20(callback%2C%20input)%20%7B%0A%20%20%20%20%20%20this.m_tree.RayCast(callback%2C%20input)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.Validate%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.Rebalance%20%3D%20function%20(iterations)%20%7B%0A%20%20%20%20%20%20if%20(iterations%20%3D%3D%3D%20undefined)%20iterations%20%3D%200%3B%0A%20%20%20%20%20%20this.m_tree.Rebalance(iterations)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.BufferMove%20%3D%20function%20(proxy)%20%7B%0A%20%20%20%20%20%20this.m_moveBuffer%5Bthis.m_moveBuffer.length%5D%20%3D%20proxy%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.UnBufferMove%20%3D%20function%20(proxy)%20%7B%0A%20%20%20%20%20%20var%20i%20%3D%20parseInt(this.m_moveBuffer.indexOf(proxy))%3B%0A%20%20%20%20%20%20this.m_moveBuffer.splice(i%2C%201)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.prototype.ComparePairs%20%3D%20function%20(pair1%2C%20pair2)%20%7B%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.__implements%20%3D%20%7B%7D%3B%0A%20%20%20%20b2DynamicTreeBroadPhase.__implements%5BIBroadPhase%5D%20%3D%20true%3B%0A%20%20%20%20b2DynamicTreeNode.b2DynamicTreeNode%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.aabb%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreeNode.prototype.IsLeaf%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.child1%20%3D%3D%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DynamicTreePair.b2DynamicTreePair%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Manifold.b2Manifold%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_pointCount%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Manifold.prototype.b2Manifold%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_points%20%3D%20new%20Vector(b2Settings.b2_maxManifoldPoints)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20this.m_points%5Bi%5D%20%3D%20new%20b2ManifoldPoint()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_localPlaneNormal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localPoint%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Manifold.prototype.Reset%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20(this.m_points%5Bi%5D%20instanceof%20b2ManifoldPoint%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_points%5Bi%5D%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%0A%20%20%20%20%20%20%20%20).Reset()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_localPlaneNormal.SetZero()%3B%0A%20%20%20%20%20%20this.m_localPoint.SetZero()%3B%0A%20%20%20%20%20%20this.m_type%20%3D%200%3B%0A%20%20%20%20%20%20this.m_pointCount%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Manifold.prototype.Set%20%3D%20function%20(m)%20%7B%0A%20%20%20%20%20%20this.m_pointCount%20%3D%20m.m_pointCount%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20(this.m_points%5Bi%5D%20instanceof%20b2ManifoldPoint%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_points%5Bi%5D%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%0A%20%20%20%20%20%20%20%20).Set(m.m_points%5Bi%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_localPlaneNormal.SetV(m.m_localPlaneNormal)%3B%0A%20%20%20%20%20%20this.m_localPoint.SetV(m.m_localPoint)%3B%0A%20%20%20%20%20%20this.m_type%20%3D%20m.m_type%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Manifold.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20copy%20%3D%20new%20b2Manifold()%3B%0A%20%20%20%20%20%20copy.Set(this)%3B%0A%20%20%20%20%20%20return%20copy%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Collision.b2Manifold.e_circles%20%3D%200x0001%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Manifold.e_faceA%20%3D%200x0002%3B%0A%20%20%20%20%20%20Box2D.Collision.b2Manifold.e_faceB%20%3D%200x0004%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2ManifoldPoint.b2ManifoldPoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_localPoint%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_id%20%3D%20new%20b2ContactID()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ManifoldPoint.prototype.b2ManifoldPoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.Reset()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ManifoldPoint.prototype.Reset%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_localPoint.SetZero()%3B%0A%20%20%20%20%20%20this.m_normalImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_tangentImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_id.key%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ManifoldPoint.prototype.Set%20%3D%20function%20(m)%20%7B%0A%20%20%20%20%20%20this.m_localPoint.SetV(m.m_localPoint)%3B%0A%20%20%20%20%20%20this.m_normalImpulse%20%3D%20m.m_normalImpulse%3B%0A%20%20%20%20%20%20this.m_tangentImpulse%20%3D%20m.m_tangentImpulse%3B%0A%20%20%20%20%20%20this.m_id.Set(m.m_id)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Point.b2Point%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.p%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Point.prototype.Support%20%3D%20function%20(xf%2C%20vX%2C%20vY)%20%7B%0A%20%20%20%20%20%20if%20(vX%20%3D%3D%3D%20undefined)%20vX%20%3D%200%3B%0A%20%20%20%20%20%20if%20(vY%20%3D%3D%3D%20undefined)%20vY%20%3D%200%3B%0A%20%20%20%20%20%20return%20this.p%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Point.prototype.GetFirstVertex%20%3D%20function%20(xf)%20%7B%0A%20%20%20%20%20%20return%20this.p%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RayCastInput.b2RayCastInput%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.p1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.p2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RayCastInput.prototype.b2RayCastInput%20%3D%20function%20(p1%2C%20p2%2C%20maxFraction)%20%7B%0A%20%20%20%20%20%20if%20(p1%20%3D%3D%3D%20undefined)%20p1%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(p2%20%3D%3D%3D%20undefined)%20p2%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(maxFraction%20%3D%3D%3D%20undefined)%20maxFraction%20%3D%201%3B%0A%20%20%20%20%20%20if%20(p1)%20this.p1.SetV(p1)%3B%0A%20%20%20%20%20%20if%20(p2)%20this.p2.SetV(p2)%3B%0A%20%20%20%20%20%20this.maxFraction%20%3D%20maxFraction%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RayCastOutput.b2RayCastOutput%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Segment.b2Segment%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.p1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.p2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Segment.prototype.TestSegment%20%3D%20function%20(%0A%20%20%20%20%20%20lambda%2C%0A%20%20%20%20%20%20normal%2C%0A%20%20%20%20%20%20segment%2C%0A%20%20%20%20%20%20maxLambda%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(maxLambda%20%3D%3D%3D%20undefined)%20maxLambda%20%3D%200%3B%0A%20%20%20%20%20%20var%20s%20%3D%20segment.p1%3B%0A%20%20%20%20%20%20var%20rX%20%3D%20segment.p2.x%20-%20s.x%3B%0A%20%20%20%20%20%20var%20rY%20%3D%20segment.p2.y%20-%20s.y%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20this.p2.x%20-%20this.p1.x%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20this.p2.y%20-%20this.p1.y%3B%0A%20%20%20%20%20%20var%20nX%20%3D%20dY%3B%0A%20%20%20%20%20%20var%20nY%20%3D%20-dX%3B%0A%20%20%20%20%20%20var%20k_slop%20%3D%20100.0%20*%20Number.MIN_VALUE%3B%0A%20%20%20%20%20%20var%20denom%20%3D%20-(rX%20*%20nX%20%2B%20rY%20*%20nY)%3B%0A%20%20%20%20%20%20if%20(denom%20%3E%20k_slop)%20%7B%0A%20%20%20%20%20%20%20%20var%20bX%20%3D%20s.x%20-%20this.p1.x%3B%0A%20%20%20%20%20%20%20%20var%20bY%20%3D%20s.y%20-%20this.p1.y%3B%0A%20%20%20%20%20%20%20%20var%20a%20%3D%20bX%20*%20nX%20%2B%20bY%20*%20nY%3B%0A%20%20%20%20%20%20%20%20if%20(0.0%20%3C%3D%20a%20%26%26%20a%20%3C%3D%20maxLambda%20*%20denom)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20mu2%20%3D%20-rX%20*%20bY%20%2B%20rY%20*%20bX%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(-k_slop%20*%20denom%20%3C%3D%20mu2%20%26%26%20mu2%20%3C%3D%20denom%20*%20(1.0%20%2B%20k_slop))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20a%20%2F%3D%20denom%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20nLen%20%3D%20Math.sqrt(nX%20*%20nX%20%2B%20nY%20*%20nY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20nX%20%2F%3D%20nLen%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20nY%20%2F%3D%20nLen%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20lambda%5B0%5D%20%3D%20a%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20normal.Set(nX%2C%20nY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Segment.prototype.Extend%20%3D%20function%20(aabb)%20%7B%0A%20%20%20%20%20%20this.ExtendForward(aabb)%3B%0A%20%20%20%20%20%20this.ExtendBackward(aabb)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Segment.prototype.ExtendForward%20%3D%20function%20(aabb)%20%7B%0A%20%20%20%20%20%20var%20dX%20%3D%20this.p2.x%20-%20this.p1.x%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20this.p2.y%20-%20this.p1.y%3B%0A%20%20%20%20%20%20var%20lambda%20%3D%20Math.min(%0A%20%20%20%20%20%20%20%20dX%20%3E%200%0A%20%20%20%20%20%20%20%20%20%20%3F%20(aabb.upperBound.x%20-%20this.p1.x)%20%2F%20dX%0A%20%20%20%20%20%20%20%20%20%20%3A%20dX%20%3C%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%20(aabb.lowerBound.x%20-%20this.p1.x)%20%2F%20dX%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20Number.POSITIVE_INFINITY%2C%0A%20%20%20%20%20%20%20%20dY%20%3E%200%0A%20%20%20%20%20%20%20%20%20%20%3F%20(aabb.upperBound.y%20-%20this.p1.y)%20%2F%20dY%0A%20%20%20%20%20%20%20%20%20%20%3A%20dY%20%3C%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%20(aabb.lowerBound.y%20-%20this.p1.y)%20%2F%20dY%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20Number.POSITIVE_INFINITY%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.p2.x%20%3D%20this.p1.x%20%2B%20dX%20*%20lambda%3B%0A%20%20%20%20%20%20this.p2.y%20%3D%20this.p1.y%20%2B%20dY%20*%20lambda%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Segment.prototype.ExtendBackward%20%3D%20function%20(aabb)%20%7B%0A%20%20%20%20%20%20var%20dX%20%3D%20-this.p2.x%20%2B%20this.p1.x%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20-this.p2.y%20%2B%20this.p1.y%3B%0A%20%20%20%20%20%20var%20lambda%20%3D%20Math.min(%0A%20%20%20%20%20%20%20%20dX%20%3E%200%0A%20%20%20%20%20%20%20%20%20%20%3F%20(aabb.upperBound.x%20-%20this.p2.x)%20%2F%20dX%0A%20%20%20%20%20%20%20%20%20%20%3A%20dX%20%3C%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%20(aabb.lowerBound.x%20-%20this.p2.x)%20%2F%20dX%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20Number.POSITIVE_INFINITY%2C%0A%20%20%20%20%20%20%20%20dY%20%3E%200%0A%20%20%20%20%20%20%20%20%20%20%3F%20(aabb.upperBound.y%20-%20this.p2.y)%20%2F%20dY%0A%20%20%20%20%20%20%20%20%20%20%3A%20dY%20%3C%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%20(aabb.lowerBound.y%20-%20this.p2.y)%20%2F%20dY%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20Number.POSITIVE_INFINITY%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.p1.x%20%3D%20this.p2.x%20%2B%20dX%20*%20lambda%3B%0A%20%20%20%20%20%20this.p1.y%20%3D%20this.p2.y%20%2B%20dY%20*%20lambda%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2SeparationFunction.b2SeparationFunction%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_localPoint%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_axis%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2SeparationFunction.prototype.Initialize%20%3D%20function%20(%0A%20%20%20%20%20%20cache%2C%0A%20%20%20%20%20%20proxyA%2C%0A%20%20%20%20%20%20transformA%2C%0A%20%20%20%20%20%20proxyB%2C%0A%20%20%20%20%20%20transformB%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20this.m_proxyA%20%3D%20proxyA%3B%0A%20%20%20%20%20%20this.m_proxyB%20%3D%20proxyB%3B%0A%20%20%20%20%20%20var%20count%20%3D%20parseInt(cache.count)%3B%0A%20%20%20%20%20%20b2Settings.b2Assert(0%20%3C%20count%20%26%26%20count%20%3C%203)%3B%0A%20%20%20%20%20%20var%20localPointA%3B%0A%20%20%20%20%20%20var%20localPointA1%3B%0A%20%20%20%20%20%20var%20localPointA2%3B%0A%20%20%20%20%20%20var%20localPointB%3B%0A%20%20%20%20%20%20var%20localPointB1%3B%0A%20%20%20%20%20%20var%20localPointB2%3B%0A%20%20%20%20%20%20var%20pointAX%20%3D%200%3B%0A%20%20%20%20%20%20var%20pointAY%20%3D%200%3B%0A%20%20%20%20%20%20var%20pointBX%20%3D%200%3B%0A%20%20%20%20%20%20var%20pointBY%20%3D%200%3B%0A%20%20%20%20%20%20var%20normalX%20%3D%200%3B%0A%20%20%20%20%20%20var%20normalY%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20var%20s%20%3D%200%3B%0A%20%20%20%20%20%20var%20sgn%20%3D%200%3B%0A%20%20%20%20%20%20if%20(count%20%3D%3D%201)%20%7B%0A%20%20%20%20%20%20%20%20this.m_type%20%3D%20b2SeparationFunction.e_points%3B%0A%20%20%20%20%20%20%20%20localPointA%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20localPointB%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20localPointA%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20transformA.R%3B%0A%20%20%20%20%20%20%20%20pointAX%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformA.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20pointAY%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformA.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20localPointB%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20transformB.R%3B%0A%20%20%20%20%20%20%20%20pointBX%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformB.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20pointBY%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformB.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20this.m_axis.x%20%3D%20pointBX%20-%20pointAX%3B%0A%20%20%20%20%20%20%20%20this.m_axis.y%20%3D%20pointBY%20-%20pointAY%3B%0A%20%20%20%20%20%20%20%20this.m_axis.Normalize()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(cache.indexB%5B0%5D%20%3D%3D%20cache.indexB%5B1%5D)%20%7B%0A%20%20%20%20%20%20%20%20this.m_type%20%3D%20b2SeparationFunction.e_faceA%3B%0A%20%20%20%20%20%20%20%20localPointA1%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20localPointA2%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20localPointB%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20this.m_localPoint.x%20%3D%200.5%20*%20(localPointA1.x%20%2B%20localPointA2.x)%3B%0A%20%20%20%20%20%20%20%20this.m_localPoint.y%20%3D%200.5%20*%20(localPointA1.y%20%2B%20localPointA2.y)%3B%0A%20%20%20%20%20%20%20%20this.m_axis%20%3D%20b2Math.CrossVF(%0A%20%20%20%20%20%20%20%20%20%20b2Math.SubtractVV(localPointA2%2C%20localPointA1)%2C%0A%20%20%20%20%20%20%20%20%20%201.0%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20this.m_axis.Normalize()%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_axis%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20transformA.R%3B%0A%20%20%20%20%20%20%20%20normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_localPoint%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20transformA.R%3B%0A%20%20%20%20%20%20%20%20pointAX%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformA.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20pointAY%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformA.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20localPointB%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20transformB.R%3B%0A%20%20%20%20%20%20%20%20pointBX%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformB.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20pointBY%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformB.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20s%20%3D%20(pointBX%20-%20pointAX)%20*%20normalX%20%2B%20(pointBY%20-%20pointAY)%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20if%20(s%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.NegativeSelf()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20if%20(cache.indexA%5B0%5D%20%3D%3D%20cache.indexA%5B0%5D)%20%7B%0A%20%20%20%20%20%20%20%20this.m_type%20%3D%20b2SeparationFunction.e_faceB%3B%0A%20%20%20%20%20%20%20%20localPointB1%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20localPointB2%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20localPointA%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20this.m_localPoint.x%20%3D%200.5%20*%20(localPointB1.x%20%2B%20localPointB2.x)%3B%0A%20%20%20%20%20%20%20%20this.m_localPoint.y%20%3D%200.5%20*%20(localPointB1.y%20%2B%20localPointB2.y)%3B%0A%20%20%20%20%20%20%20%20this.m_axis%20%3D%20b2Math.CrossVF(%0A%20%20%20%20%20%20%20%20%20%20b2Math.SubtractVV(localPointB2%2C%20localPointB1)%2C%0A%20%20%20%20%20%20%20%20%20%201.0%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20this.m_axis.Normalize()%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_axis%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20transformB.R%3B%0A%20%20%20%20%20%20%20%20normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_localPoint%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20transformB.R%3B%0A%20%20%20%20%20%20%20%20pointBX%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformB.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20pointBY%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformB.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20localPointA%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20transformA.R%3B%0A%20%20%20%20%20%20%20%20pointAX%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformA.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20pointAY%20%3D%0A%20%20%20%20%20%20%20%20%20%20transformA.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20s%20%3D%20(pointAX%20-%20pointBX)%20*%20normalX%20%2B%20(pointAY%20-%20pointBY)%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20if%20(s%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.NegativeSelf()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20localPointA1%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20localPointA2%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20localPointB1%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20localPointB2%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20var%20pA%20%3D%20b2Math.MulX(transformA%2C%20localPointA)%3B%0A%20%20%20%20%20%20%20%20var%20dA%20%3D%20b2Math.MulMV(%0A%20%20%20%20%20%20%20%20%20%20transformA.R%2C%0A%20%20%20%20%20%20%20%20%20%20b2Math.SubtractVV(localPointA2%2C%20localPointA1)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20var%20pB%20%3D%20b2Math.MulX(transformB%2C%20localPointB)%3B%0A%20%20%20%20%20%20%20%20var%20dB%20%3D%20b2Math.MulMV(%0A%20%20%20%20%20%20%20%20%20%20transformB.R%2C%0A%20%20%20%20%20%20%20%20%20%20b2Math.SubtractVV(localPointB2%2C%20localPointB1)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20var%20a%20%3D%20dA.x%20*%20dA.x%20%2B%20dA.y%20*%20dA.y%3B%0A%20%20%20%20%20%20%20%20var%20e%20%3D%20dB.x%20*%20dB.x%20%2B%20dB.y%20*%20dB.y%3B%0A%20%20%20%20%20%20%20%20var%20r%20%3D%20b2Math.SubtractVV(dB%2C%20dA)%3B%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20dA.x%20*%20r.x%20%2B%20dA.y%20*%20r.y%3B%0A%20%20%20%20%20%20%20%20var%20f%20%3D%20dB.x%20*%20r.x%20%2B%20dB.y%20*%20r.y%3B%0A%20%20%20%20%20%20%20%20var%20b%20%3D%20dA.x%20*%20dB.x%20%2B%20dA.y%20*%20dB.y%3B%0A%20%20%20%20%20%20%20%20var%20denom%20%3D%20a%20*%20e%20-%20b%20*%20b%3B%0A%20%20%20%20%20%20%20%20s%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20if%20(denom%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20s%20%3D%20b2Math.Clamp((b%20*%20f%20-%20c%20*%20e)%20%2F%20denom%2C%200.0%2C%201.0)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20t%20%3D%20(b%20*%20s%20%2B%20f)%20%2F%20e%3B%0A%20%20%20%20%20%20%20%20if%20(t%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20t%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20s%20%3D%20b2Math.Clamp((b%20-%20c)%20%2F%20a%2C%200.0%2C%201.0)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20localPointA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20localPointA.x%20%3D%20localPointA1.x%20%2B%20s%20*%20(localPointA2.x%20-%20localPointA1.x)%3B%0A%20%20%20%20%20%20%20%20localPointA.y%20%3D%20localPointA1.y%20%2B%20s%20*%20(localPointA2.y%20-%20localPointA1.y)%3B%0A%20%20%20%20%20%20%20%20localPointB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20localPointB.x%20%3D%20localPointB1.x%20%2B%20s%20*%20(localPointB2.x%20-%20localPointB1.x)%3B%0A%20%20%20%20%20%20%20%20localPointB.y%20%3D%20localPointB1.y%20%2B%20s%20*%20(localPointB2.y%20-%20localPointB1.y)%3B%0A%20%20%20%20%20%20%20%20if%20(s%20%3D%3D%200.0%20%7C%7C%20s%20%3D%3D%201.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_type%20%3D%20b2SeparationFunction.e_faceB%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis%20%3D%20b2Math.CrossVF(%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Math.SubtractVV(localPointB2%2C%20localPointB1)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%201.0%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.Normalize()%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_localPoint%20%3D%20localPointB%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_axis%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformB.R%3B%0A%20%20%20%20%20%20%20%20%20%20normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformB.R%3B%0A%20%20%20%20%20%20%20%20%20%20pointBX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20transformB.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20pointBY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20transformB.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20localPointA%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformA.R%3B%0A%20%20%20%20%20%20%20%20%20%20pointAX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20transformA.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20pointAY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20transformA.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20sgn%20%3D%20(pointAX%20-%20pointBX)%20*%20normalX%20%2B%20(pointAY%20-%20pointBY)%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(s%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_axis.NegativeSelf()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_type%20%3D%20b2SeparationFunction.e_faceA%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis%20%3D%20b2Math.CrossVF(%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Math.SubtractVV(localPointA2%2C%20localPointA1)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%201.0%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_localPoint%20%3D%20localPointA%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_axis%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformA.R%3B%0A%20%20%20%20%20%20%20%20%20%20normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformA.R%3B%0A%20%20%20%20%20%20%20%20%20%20pointAX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20transformA.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20pointAY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20transformA.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20localPointB%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20transformB.R%3B%0A%20%20%20%20%20%20%20%20%20%20pointBX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20transformB.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20pointBY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20transformB.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20sgn%20%3D%20(pointBX%20-%20pointAX)%20*%20normalX%20%2B%20(pointBY%20-%20pointAY)%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(s%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_axis.NegativeSelf()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2SeparationFunction.prototype.Evaluate%20%3D%20function%20(%0A%20%20%20%20%20%20transformA%2C%0A%20%20%20%20%20%20transformB%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20var%20axisA%3B%0A%20%20%20%20%20%20var%20axisB%3B%0A%20%20%20%20%20%20var%20localPointA%3B%0A%20%20%20%20%20%20var%20localPointB%3B%0A%20%20%20%20%20%20var%20pointA%3B%0A%20%20%20%20%20%20var%20pointB%3B%0A%20%20%20%20%20%20var%20seperation%20%3D%200%3B%0A%20%20%20%20%20%20var%20normal%3B%0A%20%20%20%20%20%20switch%20(this.m_type)%20%7B%0A%20%20%20%20%20%20%20%20case%20b2SeparationFunction.e_points%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20axisA%20%3D%20b2Math.MulTMV(transformA.R%2C%20this.m_axis)%3B%0A%20%20%20%20%20%20%20%20%20%20axisB%20%3D%20b2Math.MulTMV(transformB.R%2C%20this.m_axis.GetNegative())%3B%0A%20%20%20%20%20%20%20%20%20%20localPointA%20%3D%20this.m_proxyA.GetSupportVertex(axisA)%3B%0A%20%20%20%20%20%20%20%20%20%20localPointB%20%3D%20this.m_proxyB.GetSupportVertex(axisB)%3B%0A%20%20%20%20%20%20%20%20%20%20pointA%20%3D%20b2Math.MulX(transformA%2C%20localPointA)%3B%0A%20%20%20%20%20%20%20%20%20%20pointB%20%3D%20b2Math.MulX(transformB%2C%20localPointB)%3B%0A%20%20%20%20%20%20%20%20%20%20seperation%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20(pointB.x%20-%20pointA.x)%20*%20this.m_axis.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(pointB.y%20-%20pointA.y)%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20%20%20return%20seperation%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20case%20b2SeparationFunction.e_faceA%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20normal%20%3D%20b2Math.MulMV(transformA.R%2C%20this.m_axis)%3B%0A%20%20%20%20%20%20%20%20%20%20pointA%20%3D%20b2Math.MulX(transformA%2C%20this.m_localPoint)%3B%0A%20%20%20%20%20%20%20%20%20%20axisB%20%3D%20b2Math.MulTMV(transformB.R%2C%20normal.GetNegative())%3B%0A%20%20%20%20%20%20%20%20%20%20localPointB%20%3D%20this.m_proxyB.GetSupportVertex(axisB)%3B%0A%20%20%20%20%20%20%20%20%20%20pointB%20%3D%20b2Math.MulX(transformB%2C%20localPointB)%3B%0A%20%20%20%20%20%20%20%20%20%20seperation%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20(pointB.x%20-%20pointA.x)%20*%20normal.x%20%2B%20(pointB.y%20-%20pointA.y)%20*%20normal.y%3B%0A%20%20%20%20%20%20%20%20%20%20return%20seperation%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20case%20b2SeparationFunction.e_faceB%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20normal%20%3D%20b2Math.MulMV(transformB.R%2C%20this.m_axis)%3B%0A%20%20%20%20%20%20%20%20%20%20pointB%20%3D%20b2Math.MulX(transformB%2C%20this.m_localPoint)%3B%0A%20%20%20%20%20%20%20%20%20%20axisA%20%3D%20b2Math.MulTMV(transformA.R%2C%20normal.GetNegative())%3B%0A%20%20%20%20%20%20%20%20%20%20localPointA%20%3D%20this.m_proxyA.GetSupportVertex(axisA)%3B%0A%20%20%20%20%20%20%20%20%20%20pointA%20%3D%20b2Math.MulX(transformA%2C%20localPointA)%3B%0A%20%20%20%20%20%20%20%20%20%20seperation%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20(pointA.x%20-%20pointB.x)%20*%20normal.x%20%2B%20(pointA.y%20-%20pointB.y)%20*%20normal.y%3B%0A%20%20%20%20%20%20%20%20%20%20return%20seperation%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Collision.b2SeparationFunction.e_points%20%3D%200x01%3B%0A%20%20%20%20%20%20Box2D.Collision.b2SeparationFunction.e_faceA%20%3D%200x02%3B%0A%20%20%20%20%20%20Box2D.Collision.b2SeparationFunction.e_faceB%20%3D%200x04%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2Simplex.b2Simplex%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_v1%20%3D%20new%20b2SimplexVertex()%3B%0A%20%20%20%20%20%20this.m_v2%20%3D%20new%20b2SimplexVertex()%3B%0A%20%20%20%20%20%20this.m_v3%20%3D%20new%20b2SimplexVertex()%3B%0A%20%20%20%20%20%20this.m_vertices%20%3D%20new%20Vector(3)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Simplex.prototype.b2Simplex%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_vertices%5B0%5D%20%3D%20this.m_v1%3B%0A%20%20%20%20%20%20this.m_vertices%5B1%5D%20%3D%20this.m_v2%3B%0A%20%20%20%20%20%20this.m_vertices%5B2%5D%20%3D%20this.m_v3%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Simplex.prototype.ReadCache%20%3D%20function%20(%0A%20%20%20%20%20%20cache%2C%0A%20%20%20%20%20%20proxyA%2C%0A%20%20%20%20%20%20transformA%2C%0A%20%20%20%20%20%20proxyB%2C%0A%20%20%20%20%20%20transformB%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20b2Settings.b2Assert(0%20%3C%3D%20cache.count%20%26%26%20cache.count%20%3C%3D%203)%3B%0A%20%20%20%20%20%20var%20wALocal%3B%0A%20%20%20%20%20%20var%20wBLocal%3B%0A%20%20%20%20%20%20this.m_count%20%3D%20cache.count%3B%0A%20%20%20%20%20%20var%20vertices%20%3D%20this.m_vertices%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_count%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20var%20v%20%3D%20vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20v.indexA%20%3D%20cache.indexA%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20v.indexB%20%3D%20cache.indexB%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20wALocal%20%3D%20proxyA.GetVertex(v.indexA)%3B%0A%20%20%20%20%20%20%20%20wBLocal%20%3D%20proxyB.GetVertex(v.indexB)%3B%0A%20%20%20%20%20%20%20%20v.wA%20%3D%20b2Math.MulX(transformA%2C%20wALocal)%3B%0A%20%20%20%20%20%20%20%20v.wB%20%3D%20b2Math.MulX(transformB%2C%20wBLocal)%3B%0A%20%20%20%20%20%20%20%20v.w%20%3D%20b2Math.SubtractVV(v.wB%2C%20v.wA)%3B%0A%20%20%20%20%20%20%20%20v.a%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_count%20%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20var%20metric1%20%3D%20cache.metric%3B%0A%20%20%20%20%20%20%20%20var%20metric2%20%3D%20this.GetMetric()%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20metric2%20%3C%200.5%20*%20metric1%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%202.0%20*%20metric1%20%3C%20metric2%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20metric2%20%3C%20Number.MIN_VALUE%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_count%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_count%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20v%20%3D%20vertices%5B0%5D%3B%0A%20%20%20%20%20%20%20%20v.indexA%20%3D%200%3B%0A%20%20%20%20%20%20%20%20v.indexB%20%3D%200%3B%0A%20%20%20%20%20%20%20%20wALocal%20%3D%20proxyA.GetVertex(0)%3B%0A%20%20%20%20%20%20%20%20wBLocal%20%3D%20proxyB.GetVertex(0)%3B%0A%20%20%20%20%20%20%20%20v.wA%20%3D%20b2Math.MulX(transformA%2C%20wALocal)%3B%0A%20%20%20%20%20%20%20%20v.wB%20%3D%20b2Math.MulX(transformB%2C%20wBLocal)%3B%0A%20%20%20%20%20%20%20%20v.w%20%3D%20b2Math.SubtractVV(v.wB%2C%20v.wA)%3B%0A%20%20%20%20%20%20%20%20this.m_count%20%3D%201%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Simplex.prototype.WriteCache%20%3D%20function%20(cache)%20%7B%0A%20%20%20%20%20%20cache.metric%20%3D%20this.GetMetric()%3B%0A%20%20%20%20%20%20cache.count%20%3D%20Box2D.parseUInt(this.m_count)%3B%0A%20%20%20%20%20%20var%20vertices%20%3D%20this.m_vertices%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_count%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20cache.indexA%5Bi%5D%20%3D%20Box2D.parseUInt(vertices%5Bi%5D.indexA)%3B%0A%20%20%20%20%20%20%20%20cache.indexB%5Bi%5D%20%3D%20Box2D.parseUInt(vertices%5Bi%5D.indexB)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Simplex.prototype.GetSearchDirection%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20switch%20(this.m_count)%20%7B%0A%20%20%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20%20%20return%20this.m_v1.w.GetNegative()%3B%0A%20%20%20%20%20%20%20%20case%202%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20e12%20%3D%20b2Math.SubtractVV(this.m_v2.w%2C%20this.m_v1.w)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20sgn%20%3D%20b2Math.CrossVV(e12%2C%20this.m_v1.w.GetNegative())%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(sgn%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20b2Math.CrossFV(1.0%2C%20e12)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20b2Math.CrossVF(e12%2C%201.0)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Simplex.prototype.GetClosestPoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20switch%20(this.m_count)%20%7B%0A%20%20%20%20%20%20%20%20case%200%3A%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20%20%20return%20this.m_v1.w%3B%0A%20%20%20%20%20%20%20%20case%202%3A%0A%20%20%20%20%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_v1.a%20*%20this.m_v1.w.x%20%2B%20this.m_v2.a%20*%20this.m_v2.w.x%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_v1.a%20*%20this.m_v1.w.y%20%2B%20this.m_v2.a%20*%20this.m_v2.w.y%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Simplex.prototype.GetWitnessPoints%20%3D%20function%20(pA%2C%20pB)%20%7B%0A%20%20%20%20%20%20switch%20(this.m_count)%20%7B%0A%20%20%20%20%20%20%20%20case%200%3A%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20%20%20pA.SetV(this.m_v1.wA)%3B%0A%20%20%20%20%20%20%20%20%20%20pB.SetV(this.m_v1.wB)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%202%3A%0A%20%20%20%20%20%20%20%20%20%20pA.x%20%3D%20this.m_v1.a%20*%20this.m_v1.wA.x%20%2B%20this.m_v2.a%20*%20this.m_v2.wA.x%3B%0A%20%20%20%20%20%20%20%20%20%20pA.y%20%3D%20this.m_v1.a%20*%20this.m_v1.wA.y%20%2B%20this.m_v2.a%20*%20this.m_v2.wA.y%3B%0A%20%20%20%20%20%20%20%20%20%20pB.x%20%3D%20this.m_v1.a%20*%20this.m_v1.wB.x%20%2B%20this.m_v2.a%20*%20this.m_v2.wB.x%3B%0A%20%20%20%20%20%20%20%20%20%20pB.y%20%3D%20this.m_v1.a%20*%20this.m_v1.wB.y%20%2B%20this.m_v2.a%20*%20this.m_v2.wB.y%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%203%3A%0A%20%20%20%20%20%20%20%20%20%20pB.x%20%3D%20pA.x%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_v1.a%20*%20this.m_v1.wA.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_v2.a%20*%20this.m_v2.wA.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_v3.a%20*%20this.m_v3.wA.x%3B%0A%20%20%20%20%20%20%20%20%20%20pB.y%20%3D%20pA.y%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_v1.a%20*%20this.m_v1.wA.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_v2.a%20*%20this.m_v2.wA.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_v3.a%20*%20this.m_v3.wA.y%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Simplex.prototype.GetMetric%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20switch%20(this.m_count)%20%7B%0A%20%20%20%20%20%20%20%20case%200%3A%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%20%20%20%20case%202%3A%0A%20%20%20%20%20%20%20%20%20%20return%20b2Math.SubtractVV(this.m_v1.w%2C%20this.m_v2.w).Length()%3B%0A%20%20%20%20%20%20%20%20case%203%3A%0A%20%20%20%20%20%20%20%20%20%20return%20b2Math.CrossVV(%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Math.SubtractVV(this.m_v2.w%2C%20this.m_v1.w)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Math.SubtractVV(this.m_v3.w%2C%20this.m_v1.w)%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(false)%3B%0A%20%20%20%20%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Simplex.prototype.Solve2%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20w1%20%3D%20this.m_v1.w%3B%0A%20%20%20%20%20%20var%20w2%20%3D%20this.m_v2.w%3B%0A%20%20%20%20%20%20var%20e12%20%3D%20b2Math.SubtractVV(w2%2C%20w1)%3B%0A%20%20%20%20%20%20var%20d12_2%20%3D%20-(w1.x%20*%20e12.x%20%2B%20w1.y%20*%20e12.y)%3B%0A%20%20%20%20%20%20if%20(d12_2%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.m_v1.a%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.m_count%20%3D%201%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20d12_1%20%3D%20w2.x%20*%20e12.x%20%2B%20w2.y%20*%20e12.y%3B%0A%20%20%20%20%20%20if%20(d12_1%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.m_v2.a%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.m_count%20%3D%201%3B%0A%20%20%20%20%20%20%20%20this.m_v1.Set(this.m_v2)%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20inv_d12%20%3D%201.0%20%2F%20(d12_1%20%2B%20d12_2)%3B%0A%20%20%20%20%20%20this.m_v1.a%20%3D%20d12_1%20*%20inv_d12%3B%0A%20%20%20%20%20%20this.m_v2.a%20%3D%20d12_2%20*%20inv_d12%3B%0A%20%20%20%20%20%20this.m_count%20%3D%202%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Simplex.prototype.Solve3%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20w1%20%3D%20this.m_v1.w%3B%0A%20%20%20%20%20%20var%20w2%20%3D%20this.m_v2.w%3B%0A%20%20%20%20%20%20var%20w3%20%3D%20this.m_v3.w%3B%0A%20%20%20%20%20%20var%20e12%20%3D%20b2Math.SubtractVV(w2%2C%20w1)%3B%0A%20%20%20%20%20%20var%20w1e12%20%3D%20b2Math.Dot(w1%2C%20e12)%3B%0A%20%20%20%20%20%20var%20w2e12%20%3D%20b2Math.Dot(w2%2C%20e12)%3B%0A%20%20%20%20%20%20var%20d12_1%20%3D%20w2e12%3B%0A%20%20%20%20%20%20var%20d12_2%20%3D%20-w1e12%3B%0A%20%20%20%20%20%20var%20e13%20%3D%20b2Math.SubtractVV(w3%2C%20w1)%3B%0A%20%20%20%20%20%20var%20w1e13%20%3D%20b2Math.Dot(w1%2C%20e13)%3B%0A%20%20%20%20%20%20var%20w3e13%20%3D%20b2Math.Dot(w3%2C%20e13)%3B%0A%20%20%20%20%20%20var%20d13_1%20%3D%20w3e13%3B%0A%20%20%20%20%20%20var%20d13_2%20%3D%20-w1e13%3B%0A%20%20%20%20%20%20var%20e23%20%3D%20b2Math.SubtractVV(w3%2C%20w2)%3B%0A%20%20%20%20%20%20var%20w2e23%20%3D%20b2Math.Dot(w2%2C%20e23)%3B%0A%20%20%20%20%20%20var%20w3e23%20%3D%20b2Math.Dot(w3%2C%20e23)%3B%0A%20%20%20%20%20%20var%20d23_1%20%3D%20w3e23%3B%0A%20%20%20%20%20%20var%20d23_2%20%3D%20-w2e23%3B%0A%20%20%20%20%20%20var%20n123%20%3D%20b2Math.CrossVV(e12%2C%20e13)%3B%0A%20%20%20%20%20%20var%20d123_1%20%3D%20n123%20*%20b2Math.CrossVV(w2%2C%20w3)%3B%0A%20%20%20%20%20%20var%20d123_2%20%3D%20n123%20*%20b2Math.CrossVV(w3%2C%20w1)%3B%0A%20%20%20%20%20%20var%20d123_3%20%3D%20n123%20*%20b2Math.CrossVV(w1%2C%20w2)%3B%0A%20%20%20%20%20%20if%20(d12_2%20%3C%3D%200.0%20%26%26%20d13_2%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.m_v1.a%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.m_count%20%3D%201%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(d12_1%20%3E%200.0%20%26%26%20d12_2%20%3E%200.0%20%26%26%20d123_3%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20var%20inv_d12%20%3D%201.0%20%2F%20(d12_1%20%2B%20d12_2)%3B%0A%20%20%20%20%20%20%20%20this.m_v1.a%20%3D%20d12_1%20*%20inv_d12%3B%0A%20%20%20%20%20%20%20%20this.m_v2.a%20%3D%20d12_2%20*%20inv_d12%3B%0A%20%20%20%20%20%20%20%20this.m_count%20%3D%202%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(d13_1%20%3E%200.0%20%26%26%20d13_2%20%3E%200.0%20%26%26%20d123_2%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20var%20inv_d13%20%3D%201.0%20%2F%20(d13_1%20%2B%20d13_2)%3B%0A%20%20%20%20%20%20%20%20this.m_v1.a%20%3D%20d13_1%20*%20inv_d13%3B%0A%20%20%20%20%20%20%20%20this.m_v3.a%20%3D%20d13_2%20*%20inv_d13%3B%0A%20%20%20%20%20%20%20%20this.m_count%20%3D%202%3B%0A%20%20%20%20%20%20%20%20this.m_v2.Set(this.m_v3)%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(d12_1%20%3C%3D%200.0%20%26%26%20d23_2%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.m_v2.a%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.m_count%20%3D%201%3B%0A%20%20%20%20%20%20%20%20this.m_v1.Set(this.m_v2)%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(d13_1%20%3C%3D%200.0%20%26%26%20d23_1%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.m_v3.a%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.m_count%20%3D%201%3B%0A%20%20%20%20%20%20%20%20this.m_v1.Set(this.m_v3)%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(d23_1%20%3E%200.0%20%26%26%20d23_2%20%3E%200.0%20%26%26%20d123_1%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20var%20inv_d23%20%3D%201.0%20%2F%20(d23_1%20%2B%20d23_2)%3B%0A%20%20%20%20%20%20%20%20this.m_v2.a%20%3D%20d23_1%20*%20inv_d23%3B%0A%20%20%20%20%20%20%20%20this.m_v3.a%20%3D%20d23_2%20*%20inv_d23%3B%0A%20%20%20%20%20%20%20%20this.m_count%20%3D%202%3B%0A%20%20%20%20%20%20%20%20this.m_v1.Set(this.m_v3)%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20inv_d123%20%3D%201.0%20%2F%20(d123_1%20%2B%20d123_2%20%2B%20d123_3)%3B%0A%20%20%20%20%20%20this.m_v1.a%20%3D%20d123_1%20*%20inv_d123%3B%0A%20%20%20%20%20%20this.m_v2.a%20%3D%20d123_2%20*%20inv_d123%3B%0A%20%20%20%20%20%20this.m_v3.a%20%3D%20d123_3%20*%20inv_d123%3B%0A%20%20%20%20%20%20this.m_count%20%3D%203%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2SimplexCache.b2SimplexCache%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.indexA%20%3D%20new%20Vector_a2j_Number(3)%3B%0A%20%20%20%20%20%20this.indexB%20%3D%20new%20Vector_a2j_Number(3)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2SimplexVertex.b2SimplexVertex%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2SimplexVertex.prototype.Set%20%3D%20function%20(other)%20%7B%0A%20%20%20%20%20%20this.wA.SetV(other.wA)%3B%0A%20%20%20%20%20%20this.wB.SetV(other.wB)%3B%0A%20%20%20%20%20%20this.w.SetV(other.w)%3B%0A%20%20%20%20%20%20this.a%20%3D%20other.a%3B%0A%20%20%20%20%20%20this.indexA%20%3D%20other.indexA%3B%0A%20%20%20%20%20%20this.indexB%20%3D%20other.indexB%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2TimeOfImpact.b2TimeOfImpact%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2TimeOfImpact.TimeOfImpact%20%3D%20function%20(input)%20%7B%0A%20%20%20%20%20%20%2B%2Bb2TimeOfImpact.b2_toiCalls%3B%0A%20%20%20%20%20%20var%20proxyA%20%3D%20input.proxyA%3B%0A%20%20%20%20%20%20var%20proxyB%20%3D%20input.proxyB%3B%0A%20%20%20%20%20%20var%20sweepA%20%3D%20input.sweepA%3B%0A%20%20%20%20%20%20var%20sweepB%20%3D%20input.sweepB%3B%0A%20%20%20%20%20%20b2Settings.b2Assert(sweepA.t0%20%3D%3D%20sweepB.t0)%3B%0A%20%20%20%20%20%20b2Settings.b2Assert(1.0%20-%20sweepA.t0%20%3E%20Number.MIN_VALUE)%3B%0A%20%20%20%20%20%20var%20radius%20%3D%20proxyA.m_radius%20%2B%20proxyB.m_radius%3B%0A%20%20%20%20%20%20var%20tolerance%20%3D%20input.tolerance%3B%0A%20%20%20%20%20%20var%20alpha%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20k_maxIterations%20%3D%201000%3B%0A%20%20%20%20%20%20var%20iter%20%3D%200%3B%0A%20%20%20%20%20%20var%20target%20%3D%200.0%3B%0A%20%20%20%20%20%20b2TimeOfImpact.s_cache.count%20%3D%200%3B%0A%20%20%20%20%20%20b2TimeOfImpact.s_distanceInput.useRadii%20%3D%20false%3B%0A%20%20%20%20%20%20for%20(%3B%3B)%20%7B%0A%20%20%20%20%20%20%20%20sweepA.GetTransform(b2TimeOfImpact.s_xfA%2C%20alpha)%3B%0A%20%20%20%20%20%20%20%20sweepB.GetTransform(b2TimeOfImpact.s_xfB%2C%20alpha)%3B%0A%20%20%20%20%20%20%20%20b2TimeOfImpact.s_distanceInput.proxyA%20%3D%20proxyA%3B%0A%20%20%20%20%20%20%20%20b2TimeOfImpact.s_distanceInput.proxyB%20%3D%20proxyB%3B%0A%20%20%20%20%20%20%20%20b2TimeOfImpact.s_distanceInput.transformA%20%3D%20b2TimeOfImpact.s_xfA%3B%0A%20%20%20%20%20%20%20%20b2TimeOfImpact.s_distanceInput.transformB%20%3D%20b2TimeOfImpact.s_xfB%3B%0A%20%20%20%20%20%20%20%20b2Distance.Distance(%0A%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_distanceOutput%2C%0A%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_cache%2C%0A%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_distanceInput%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20if%20(b2TimeOfImpact.s_distanceOutput.distance%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20alpha%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20b2TimeOfImpact.s_fcn.Initialize(%0A%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_cache%2C%0A%20%20%20%20%20%20%20%20%20%20proxyA%2C%0A%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_xfA%2C%0A%20%20%20%20%20%20%20%20%20%20proxyB%2C%0A%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_xfB%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20var%20separation%20%3D%20b2TimeOfImpact.s_fcn.Evaluate(%0A%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_xfA%2C%0A%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_xfB%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20if%20(separation%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20alpha%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(iter%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(separation%20%3E%20radius)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20target%20%3D%20b2Math.Max(radius%20-%20tolerance%2C%200.75%20*%20radius)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20target%20%3D%20b2Math.Max(separation%20-%20tolerance%2C%200.02%20*%20radius)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(separation%20-%20target%20%3C%200.5%20*%20tolerance)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(iter%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alpha%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20newAlpha%20%3D%20alpha%3B%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20x1%20%3D%20alpha%3B%0A%20%20%20%20%20%20%20%20%20%20var%20x2%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20var%20f1%20%3D%20separation%3B%0A%20%20%20%20%20%20%20%20%20%20sweepA.GetTransform(b2TimeOfImpact.s_xfA%2C%20x2)%3B%0A%20%20%20%20%20%20%20%20%20%20sweepB.GetTransform(b2TimeOfImpact.s_xfB%2C%20x2)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20f2%20%3D%20b2TimeOfImpact.s_fcn.Evaluate(%0A%20%20%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_xfA%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_xfB%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(f2%20%3E%3D%20target)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20alpha%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20var%20rootIterCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(%3B%3B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20x%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(rootIterCount%20%26%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%20%3D%20x1%20%2B%20((target%20-%20f1)%20*%20(x2%20-%20x1))%20%2F%20(f2%20-%20f1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%20%3D%200.5%20*%20(x1%20%2B%20x2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20sweepA.GetTransform(b2TimeOfImpact.s_xfA%2C%20x)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20sweepB.GetTransform(b2TimeOfImpact.s_xfB%2C%20x)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20f%20%3D%20b2TimeOfImpact.s_fcn.Evaluate(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_xfA%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.s_xfB%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(b2Math.Abs(f%20-%20target)%20%3C%200.025%20*%20tolerance)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20newAlpha%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(f%20%3E%20target)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x1%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20f1%20%3D%20f%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x2%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20f2%20%3D%20f%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2B%2BrootIterCount%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2B%2Bb2TimeOfImpact.b2_toiRootIters%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(rootIterCount%20%3D%3D%2050)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.b2_toiMaxRootIters%20%3D%20b2Math.Max(%0A%20%20%20%20%20%20%20%20%20%20%20%20b2TimeOfImpact.b2_toiMaxRootIters%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20rootIterCount%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(newAlpha%20%3C%20(1.0%20%2B%20100.0%20*%20Number.MIN_VALUE)%20*%20alpha)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20alpha%20%3D%20newAlpha%3B%0A%20%20%20%20%20%20%20%20iter%2B%2B%3B%0A%20%20%20%20%20%20%20%20%2B%2Bb2TimeOfImpact.b2_toiIters%3B%0A%20%20%20%20%20%20%20%20if%20(iter%20%3D%3D%20k_maxIterations)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20b2TimeOfImpact.b2_toiMaxIters%20%3D%20b2Math.Max(%0A%20%20%20%20%20%20%20%20b2TimeOfImpact.b2_toiMaxIters%2C%0A%20%20%20%20%20%20%20%20iter%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20return%20alpha%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.b2_toiCalls%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.b2_toiIters%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.b2_toiMaxIters%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.b2_toiRootIters%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.b2_toiMaxRootIters%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.s_cache%20%3D%20new%20b2SimplexCache()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.s_distanceInput%20%3D%20new%20b2DistanceInput()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.s_xfA%20%3D%20new%20b2Transform()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.s_xfB%20%3D%20new%20b2Transform()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.s_fcn%20%3D%20new%20b2SeparationFunction()%3B%0A%20%20%20%20%20%20Box2D.Collision.b2TimeOfImpact.s_distanceOutput%20%3D%20new%20b2DistanceOutput()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2TOIInput.b2TOIInput%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.proxyA%20%3D%20new%20b2DistanceProxy()%3B%0A%20%20%20%20%20%20this.proxyB%20%3D%20new%20b2DistanceProxy()%3B%0A%20%20%20%20%20%20this.sweepA%20%3D%20new%20b2Sweep()%3B%0A%20%20%20%20%20%20this.sweepB%20%3D%20new%20b2Sweep()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WorldManifold.b2WorldManifold%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WorldManifold.prototype.b2WorldManifold%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_points%20%3D%20new%20Vector(b2Settings.b2_maxManifoldPoints)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20this.m_points%5Bi%5D%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WorldManifold.prototype.Initialize%20%3D%20function%20(%0A%20%20%20%20%20%20manifold%2C%0A%20%20%20%20%20%20xfA%2C%0A%20%20%20%20%20%20radiusA%2C%0A%20%20%20%20%20%20xfB%2C%0A%20%20%20%20%20%20radiusB%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(radiusA%20%3D%3D%3D%20undefined)%20radiusA%20%3D%200%3B%0A%20%20%20%20%20%20if%20(radiusB%20%3D%3D%3D%20undefined)%20radiusB%20%3D%200%3B%0A%20%20%20%20%20%20if%20(manifold.m_pointCount%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20normalX%20%3D%200%3B%0A%20%20%20%20%20%20var%20normalY%20%3D%200%3B%0A%20%20%20%20%20%20var%20planePointX%20%3D%200%3B%0A%20%20%20%20%20%20var%20planePointY%20%3D%200%3B%0A%20%20%20%20%20%20var%20clipPointX%20%3D%200%3B%0A%20%20%20%20%20%20var%20clipPointY%20%3D%200%3B%0A%20%20%20%20%20%20switch%20(manifold.m_type)%20%7B%0A%20%20%20%20%20%20%20%20case%20b2Manifold.e_circles%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfA.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20pointAX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfA.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20pointAY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfA.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfB.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_points%5B0%5D.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20pointBX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfB.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20pointBY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfB.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dX%20%3D%20pointBX%20-%20pointAX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dY%20%3D%20pointBY%20-%20pointAY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20d2%20%3D%20dX%20*%20dX%20%2B%20dY%20*%20dY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(d2%20%3E%20Number.MIN_VALUE%20*%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20d%20%3D%20Math.sqrt(d2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%20dX%20%2F%20d%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%20dY%20%2F%20d%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20cAX%20%3D%20pointAX%20%2B%20radiusA%20*%20this.m_normal.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20cAY%20%3D%20pointAY%20%2B%20radiusA%20*%20this.m_normal.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20cBX%20%3D%20pointBX%20-%20radiusB%20*%20this.m_normal.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20cBY%20%3D%20pointBY%20-%20radiusB%20*%20this.m_normal.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5B0%5D.x%20%3D%200.5%20*%20(cAX%20%2B%20cBX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5B0%5D.y%20%3D%200.5%20*%20(cAY%20%2B%20cBY)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Manifold.e_faceA%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfA.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_localPlaneNormal%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfA.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20planePointX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfA.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20planePointY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfA.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20manifold.m_pointCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfB.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_points%5Bi%5D.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfB.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfB.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D.x%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointX%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200.5%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(radiusA%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointX%20-%20planePointX)%20*%20normalX%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointY%20-%20planePointY)%20*%20normalY%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20radiusB)%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D.y%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointY%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200.5%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(radiusA%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointX%20-%20planePointX)%20*%20normalX%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointY%20-%20planePointY)%20*%20normalY%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20radiusB)%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Manifold.e_faceB%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfB.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_localPlaneNormal%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfB.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20planePointX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfB.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20planePointY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfB.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%20-normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%20-normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20manifold.m_pointCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20xfA.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20manifold.m_points%5Bi%5D.m_localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfA.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xfA.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D.x%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointX%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200.5%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(radiusB%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointX%20-%20planePointX)%20*%20normalX%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointY%20-%20planePointY)%20*%20normalY%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20radiusA)%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D.y%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointY%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200.5%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(radiusB%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointX%20-%20planePointX)%20*%20normalX%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointY%20-%20planePointY)%20*%20normalY%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20radiusA)%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20ClipVertex.ClipVertex%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.v%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.id%20%3D%20new%20b2ContactID()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20ClipVertex.prototype.Set%20%3D%20function%20(other)%20%7B%0A%20%20%20%20%20%20this.v.SetV(other.v)%3B%0A%20%20%20%20%20%20this.id.Set(other.id)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Features.Features%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20Object.defineProperty(Features.prototype%2C%20%22referenceEdge%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20get%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20return%20this._referenceEdge%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(Features.prototype%2C%20%22referenceEdge%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20set%3A%20function%20(value)%20%7B%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20value%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._referenceEdge%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20this._m_id._key%20%3D%0A%20%20%20%20%20%20%20%20%20%20(this._m_id._key%20%26%200xffffff00)%20%7C%20(this._referenceEdge%20%26%200x000000ff)%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(Features.prototype%2C%20%22incidentEdge%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20get%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20return%20this._incidentEdge%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(Features.prototype%2C%20%22incidentEdge%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20set%3A%20function%20(value)%20%7B%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20value%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._incidentEdge%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20this._m_id._key%20%3D%0A%20%20%20%20%20%20%20%20%20%20(this._m_id._key%20%26%200xffff00ff)%20%7C%0A%20%20%20%20%20%20%20%20%20%20((this._incidentEdge%20%3C%3C%208)%20%26%200x0000ff00)%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(Features.prototype%2C%20%22incidentVertex%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20get%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20return%20this._incidentVertex%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(Features.prototype%2C%20%22incidentVertex%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20set%3A%20function%20(value)%20%7B%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20value%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._incidentVertex%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20this._m_id._key%20%3D%0A%20%20%20%20%20%20%20%20%20%20(this._m_id._key%20%26%200xff00ffff)%20%7C%0A%20%20%20%20%20%20%20%20%20%20((this._incidentVertex%20%3C%3C%2016)%20%26%200x00ff0000)%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(Features.prototype%2C%20%22flip%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20get%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20return%20this._flip%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(Features.prototype%2C%20%22flip%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20set%3A%20function%20(value)%20%7B%0A%20%20%20%20%20%20%20%20if%20(value%20%3D%3D%3D%20undefined)%20value%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._flip%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20this._m_id._key%20%3D%0A%20%20%20%20%20%20%20%20%20%20(this._m_id._key%20%26%200x00ffffff)%20%7C%20((this._flip%20%3C%3C%2024)%20%26%200xff000000)%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%7D)()%3B%0A%20%20(function%20()%20%7B%0A%20%20%20%20var%20b2Color%20%3D%20Box2D.Common.b2Color%2C%0A%20%20%20%20%20%20b2internal%20%3D%20Box2D.Common.b2internal%2C%0A%20%20%20%20%20%20b2Settings%20%3D%20Box2D.Common.b2Settings%2C%0A%20%20%20%20%20%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%2C%0A%20%20%20%20%20%20b2EdgeChainDef%20%3D%20Box2D.Collision.Shapes.b2EdgeChainDef%2C%0A%20%20%20%20%20%20b2EdgeShape%20%3D%20Box2D.Collision.Shapes.b2EdgeShape%2C%0A%20%20%20%20%20%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%2C%0A%20%20%20%20%20%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%2C%0A%20%20%20%20%20%20b2Shape%20%3D%20Box2D.Collision.Shapes.b2Shape%2C%0A%20%20%20%20%20%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%2C%0A%20%20%20%20%20%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%2C%0A%20%20%20%20%20%20b2Math%20%3D%20Box2D.Common.Math.b2Math%2C%0A%20%20%20%20%20%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%2C%0A%20%20%20%20%20%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%2C%0A%20%20%20%20%20%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%2C%0A%20%20%20%20%20%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%2C%0A%20%20%20%20%20%20b2Body%20%3D%20Box2D.Dynamics.b2Body%2C%0A%20%20%20%20%20%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%2C%0A%20%20%20%20%20%20b2ContactFilter%20%3D%20Box2D.Dynamics.b2ContactFilter%2C%0A%20%20%20%20%20%20b2ContactImpulse%20%3D%20Box2D.Dynamics.b2ContactImpulse%2C%0A%20%20%20%20%20%20b2ContactListener%20%3D%20Box2D.Dynamics.b2ContactListener%2C%0A%20%20%20%20%20%20b2ContactManager%20%3D%20Box2D.Dynamics.b2ContactManager%2C%0A%20%20%20%20%20%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%2C%0A%20%20%20%20%20%20b2DestructionListener%20%3D%20Box2D.Dynamics.b2DestructionListener%2C%0A%20%20%20%20%20%20b2FilterData%20%3D%20Box2D.Dynamics.b2FilterData%2C%0A%20%20%20%20%20%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%2C%0A%20%20%20%20%20%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%2C%0A%20%20%20%20%20%20b2Island%20%3D%20Box2D.Dynamics.b2Island%2C%0A%20%20%20%20%20%20b2TimeStep%20%3D%20Box2D.Dynamics.b2TimeStep%2C%0A%20%20%20%20%20%20b2World%20%3D%20Box2D.Dynamics.b2World%2C%0A%20%20%20%20%20%20b2AABB%20%3D%20Box2D.Collision.b2AABB%2C%0A%20%20%20%20%20%20b2Bound%20%3D%20Box2D.Collision.b2Bound%2C%0A%20%20%20%20%20%20b2BoundValues%20%3D%20Box2D.Collision.b2BoundValues%2C%0A%20%20%20%20%20%20b2Collision%20%3D%20Box2D.Collision.b2Collision%2C%0A%20%20%20%20%20%20b2ContactID%20%3D%20Box2D.Collision.b2ContactID%2C%0A%20%20%20%20%20%20b2ContactPoint%20%3D%20Box2D.Collision.b2ContactPoint%2C%0A%20%20%20%20%20%20b2Distance%20%3D%20Box2D.Collision.b2Distance%2C%0A%20%20%20%20%20%20b2DistanceInput%20%3D%20Box2D.Collision.b2DistanceInput%2C%0A%20%20%20%20%20%20b2DistanceOutput%20%3D%20Box2D.Collision.b2DistanceOutput%2C%0A%20%20%20%20%20%20b2DistanceProxy%20%3D%20Box2D.Collision.b2DistanceProxy%2C%0A%20%20%20%20%20%20b2DynamicTree%20%3D%20Box2D.Collision.b2DynamicTree%2C%0A%20%20%20%20%20%20b2DynamicTreeBroadPhase%20%3D%20Box2D.Collision.b2DynamicTreeBroadPhase%2C%0A%20%20%20%20%20%20b2DynamicTreeNode%20%3D%20Box2D.Collision.b2DynamicTreeNode%2C%0A%20%20%20%20%20%20b2DynamicTreePair%20%3D%20Box2D.Collision.b2DynamicTreePair%2C%0A%20%20%20%20%20%20b2Manifold%20%3D%20Box2D.Collision.b2Manifold%2C%0A%20%20%20%20%20%20b2ManifoldPoint%20%3D%20Box2D.Collision.b2ManifoldPoint%2C%0A%20%20%20%20%20%20b2Point%20%3D%20Box2D.Collision.b2Point%2C%0A%20%20%20%20%20%20b2RayCastInput%20%3D%20Box2D.Collision.b2RayCastInput%2C%0A%20%20%20%20%20%20b2RayCastOutput%20%3D%20Box2D.Collision.b2RayCastOutput%2C%0A%20%20%20%20%20%20b2Segment%20%3D%20Box2D.Collision.b2Segment%2C%0A%20%20%20%20%20%20b2SeparationFunction%20%3D%20Box2D.Collision.b2SeparationFunction%2C%0A%20%20%20%20%20%20b2Simplex%20%3D%20Box2D.Collision.b2Simplex%2C%0A%20%20%20%20%20%20b2SimplexCache%20%3D%20Box2D.Collision.b2SimplexCache%2C%0A%20%20%20%20%20%20b2SimplexVertex%20%3D%20Box2D.Collision.b2SimplexVertex%2C%0A%20%20%20%20%20%20b2TimeOfImpact%20%3D%20Box2D.Collision.b2TimeOfImpact%2C%0A%20%20%20%20%20%20b2TOIInput%20%3D%20Box2D.Collision.b2TOIInput%2C%0A%20%20%20%20%20%20b2WorldManifold%20%3D%20Box2D.Collision.b2WorldManifold%2C%0A%20%20%20%20%20%20ClipVertex%20%3D%20Box2D.Collision.ClipVertex%2C%0A%20%20%20%20%20%20Features%20%3D%20Box2D.Collision.Features%2C%0A%20%20%20%20%20%20IBroadPhase%20%3D%20Box2D.Collision.IBroadPhase%3B%0A%0A%20%20%20%20Box2D.inherit(b2CircleShape%2C%20Box2D.Collision.Shapes.b2Shape)%3B%0A%20%20%20%20b2CircleShape.prototype.__super%20%3D%20Box2D.Collision.Shapes.b2Shape.prototype%3B%0A%20%20%20%20b2CircleShape.b2CircleShape%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.m_p%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20s%20%3D%20new%20b2CircleShape()%3B%0A%20%20%20%20%20%20s.Set(this)%3B%0A%20%20%20%20%20%20return%20s%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.Set%20%3D%20function%20(other)%20%7B%0A%20%20%20%20%20%20this.__super.Set.call(this%2C%20other)%3B%0A%20%20%20%20%20%20if%20(Box2D.is(other%2C%20b2CircleShape))%20%7B%0A%20%20%20%20%20%20%20%20var%20other2%20%3D%20other%20instanceof%20b2CircleShape%20%3F%20other%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20this.m_p.SetV(other2.m_p)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.TestPoint%20%3D%20function%20(transform%2C%20p)%20%7B%0A%20%20%20%20%20%20var%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20var%20dX%20%3D%0A%20%20%20%20%20%20%20%20transform.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20this.m_p.x%20%2B%20tMat.col2.x%20*%20this.m_p.y)%3B%0A%20%20%20%20%20%20var%20dY%20%3D%0A%20%20%20%20%20%20%20%20transform.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20this.m_p.x%20%2B%20tMat.col2.y%20*%20this.m_p.y)%3B%0A%20%20%20%20%20%20dX%20%3D%20p.x%20-%20dX%3B%0A%20%20%20%20%20%20dY%20%3D%20p.y%20-%20dY%3B%0A%20%20%20%20%20%20return%20dX%20*%20dX%20%2B%20dY%20*%20dY%20%3C%3D%20this.m_radius%20*%20this.m_radius%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.RayCast%20%3D%20function%20(output%2C%20input%2C%20transform)%20%7B%0A%20%20%20%20%20%20var%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20var%20positionX%20%3D%0A%20%20%20%20%20%20%20%20transform.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20this.m_p.x%20%2B%20tMat.col2.x%20*%20this.m_p.y)%3B%0A%20%20%20%20%20%20var%20positionY%20%3D%0A%20%20%20%20%20%20%20%20transform.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20this.m_p.x%20%2B%20tMat.col2.y%20*%20this.m_p.y)%3B%0A%20%20%20%20%20%20var%20sX%20%3D%20input.p1.x%20-%20positionX%3B%0A%20%20%20%20%20%20var%20sY%20%3D%20input.p1.y%20-%20positionY%3B%0A%20%20%20%20%20%20var%20b%20%3D%20sX%20*%20sX%20%2B%20sY%20*%20sY%20-%20this.m_radius%20*%20this.m_radius%3B%0A%20%20%20%20%20%20var%20rX%20%3D%20input.p2.x%20-%20input.p1.x%3B%0A%20%20%20%20%20%20var%20rY%20%3D%20input.p2.y%20-%20input.p1.y%3B%0A%20%20%20%20%20%20var%20c%20%3D%20sX%20*%20rX%20%2B%20sY%20*%20rY%3B%0A%20%20%20%20%20%20var%20rr%20%3D%20rX%20*%20rX%20%2B%20rY%20*%20rY%3B%0A%20%20%20%20%20%20var%20sigma%20%3D%20c%20*%20c%20-%20rr%20*%20b%3B%0A%20%20%20%20%20%20if%20(sigma%20%3C%200.0%20%7C%7C%20rr%20%3C%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20a%20%3D%20-(c%20%2B%20Math.sqrt(sigma))%3B%0A%20%20%20%20%20%20if%20(0.0%20%3C%3D%20a%20%26%26%20a%20%3C%3D%20input.maxFraction%20*%20rr)%20%7B%0A%20%20%20%20%20%20%20%20a%20%2F%3D%20rr%3B%0A%20%20%20%20%20%20%20%20output.fraction%20%3D%20a%3B%0A%20%20%20%20%20%20%20%20output.normal.x%20%3D%20sX%20%2B%20a%20*%20rX%3B%0A%20%20%20%20%20%20%20%20output.normal.y%20%3D%20sY%20%2B%20a%20*%20rY%3B%0A%20%20%20%20%20%20%20%20output.normal.Normalize()%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.ComputeAABB%20%3D%20function%20(aabb%2C%20transform)%20%7B%0A%20%20%20%20%20%20var%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20var%20pX%20%3D%0A%20%20%20%20%20%20%20%20transform.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20this.m_p.x%20%2B%20tMat.col2.x%20*%20this.m_p.y)%3B%0A%20%20%20%20%20%20var%20pY%20%3D%0A%20%20%20%20%20%20%20%20transform.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20this.m_p.x%20%2B%20tMat.col2.y%20*%20this.m_p.y)%3B%0A%20%20%20%20%20%20aabb.lowerBound.Set(pX%20-%20this.m_radius%2C%20pY%20-%20this.m_radius)%3B%0A%20%20%20%20%20%20aabb.upperBound.Set(pX%20%2B%20this.m_radius%2C%20pY%20%2B%20this.m_radius)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.ComputeMass%20%3D%20function%20(massData%2C%20density)%20%7B%0A%20%20%20%20%20%20if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200%3B%0A%20%20%20%20%20%20massData.mass%20%3D%0A%20%20%20%20%20%20%20%20density%20*%20b2Settings.b2_pi%20*%20this.m_radius%20*%20this.m_radius%3B%0A%20%20%20%20%20%20massData.center.SetV(this.m_p)%3B%0A%20%20%20%20%20%20massData.I%20%3D%0A%20%20%20%20%20%20%20%20massData.mass%20*%0A%20%20%20%20%20%20%20%20(0.5%20*%20this.m_radius%20*%20this.m_radius%20%2B%0A%20%20%20%20%20%20%20%20%20%20(this.m_p.x%20*%20this.m_p.x%20%2B%20this.m_p.y%20*%20this.m_p.y))%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.ComputeSubmergedArea%20%3D%20function%20(%0A%20%20%20%20%20%20normal%2C%0A%20%20%20%20%20%20offset%2C%0A%20%20%20%20%20%20xf%2C%0A%20%20%20%20%20%20c%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(offset%20%3D%3D%3D%20undefined)%20offset%20%3D%200%3B%0A%20%20%20%20%20%20var%20p%20%3D%20b2Math.MulX(xf%2C%20this.m_p)%3B%0A%20%20%20%20%20%20var%20l%20%3D%20-(b2Math.Dot(normal%2C%20p)%20-%20offset)%3B%0A%20%20%20%20%20%20if%20(l%20%3C%20-this.m_radius%20%2B%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(l%20%3E%20this.m_radius)%20%7B%0A%20%20%20%20%20%20%20%20c.SetV(p)%3B%0A%20%20%20%20%20%20%20%20return%20Math.PI%20*%20this.m_radius%20*%20this.m_radius%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20r2%20%3D%20this.m_radius%20*%20this.m_radius%3B%0A%20%20%20%20%20%20var%20l2%20%3D%20l%20*%20l%3B%0A%20%20%20%20%20%20var%20area%20%3D%0A%20%20%20%20%20%20%20%20r2%20*%20(Math.asin(l%20%2F%20this.m_radius)%20%2B%20Math.PI%20%2F%202)%20%2B%0A%20%20%20%20%20%20%20%20l%20*%20Math.sqrt(r2%20-%20l2)%3B%0A%20%20%20%20%20%20var%20com%20%3D%20((-2%20%2F%203)%20*%20Math.pow(r2%20-%20l2%2C%201.5))%20%2F%20area%3B%0A%20%20%20%20%20%20c.x%20%3D%20p.x%20%2B%20normal.x%20*%20com%3B%0A%20%20%20%20%20%20c.y%20%3D%20p.y%20%2B%20normal.y%20*%20com%3B%0A%20%20%20%20%20%20return%20area%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.GetLocalPosition%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_p%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.SetLocalPosition%20%3D%20function%20(position)%20%7B%0A%20%20%20%20%20%20this.m_p.SetV(position)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.GetRadius%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_radius%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.SetRadius%20%3D%20function%20(radius)%20%7B%0A%20%20%20%20%20%20if%20(radius%20%3D%3D%3D%20undefined)%20radius%20%3D%200%3B%0A%20%20%20%20%20%20this.m_radius%20%3D%20radius%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleShape.prototype.b2CircleShape%20%3D%20function%20(radius)%20%7B%0A%20%20%20%20%20%20if%20(radius%20%3D%3D%3D%20undefined)%20radius%20%3D%200%3B%0A%20%20%20%20%20%20this.__super.b2Shape.call(this)%3B%0A%20%20%20%20%20%20this.m_type%20%3D%20b2Shape.e_circleShape%3B%0A%20%20%20%20%20%20this.m_radius%20%3D%20radius%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeChainDef.b2EdgeChainDef%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2EdgeChainDef.prototype.b2EdgeChainDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.vertexCount%20%3D%200%3B%0A%20%20%20%20%20%20this.isALoop%20%3D%20true%3B%0A%20%20%20%20%20%20this.vertices%20%3D%20%5B%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2EdgeShape%2C%20Box2D.Collision.Shapes.b2Shape)%3B%0A%20%20%20%20b2EdgeShape.prototype.__super%20%3D%20Box2D.Collision.Shapes.b2Shape.prototype%3B%0A%20%20%20%20b2EdgeShape.b2EdgeShape%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.s_supportVec%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_v1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_v2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_coreV1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_coreV2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_direction%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_cornerDir1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_cornerDir2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.TestPoint%20%3D%20function%20(transform%2C%20p)%20%7B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.RayCast%20%3D%20function%20(output%2C%20input%2C%20transform)%20%7B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20rX%20%3D%20input.p2.x%20-%20input.p1.x%3B%0A%20%20%20%20%20%20var%20rY%20%3D%20input.p2.y%20-%20input.p1.y%3B%0A%20%20%20%20%20%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20var%20v1X%20%3D%0A%20%20%20%20%20%20%20%20transform.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20this.m_v1.x%20%2B%20tMat.col2.x%20*%20this.m_v1.y)%3B%0A%20%20%20%20%20%20var%20v1Y%20%3D%0A%20%20%20%20%20%20%20%20transform.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20this.m_v1.x%20%2B%20tMat.col2.y%20*%20this.m_v1.y)%3B%0A%20%20%20%20%20%20var%20nX%20%3D%0A%20%20%20%20%20%20%20%20transform.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20this.m_v2.x%20%2B%20tMat.col2.y%20*%20this.m_v2.y)%20-%0A%20%20%20%20%20%20%20%20v1Y%3B%0A%20%20%20%20%20%20var%20nY%20%3D%20-(%0A%20%20%20%20%20%20%20%20transform.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20this.m_v2.x%20%2B%20tMat.col2.x%20*%20this.m_v2.y)%20-%0A%20%20%20%20%20%20%20%20v1X%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20k_slop%20%3D%20100.0%20*%20Number.MIN_VALUE%3B%0A%20%20%20%20%20%20var%20denom%20%3D%20-(rX%20*%20nX%20%2B%20rY%20*%20nY)%3B%0A%20%20%20%20%20%20if%20(denom%20%3E%20k_slop)%20%7B%0A%20%20%20%20%20%20%20%20var%20bX%20%3D%20input.p1.x%20-%20v1X%3B%0A%20%20%20%20%20%20%20%20var%20bY%20%3D%20input.p1.y%20-%20v1Y%3B%0A%20%20%20%20%20%20%20%20var%20a%20%3D%20bX%20*%20nX%20%2B%20bY%20*%20nY%3B%0A%20%20%20%20%20%20%20%20if%20(0.0%20%3C%3D%20a%20%26%26%20a%20%3C%3D%20input.maxFraction%20*%20denom)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20mu2%20%3D%20-rX%20*%20bY%20%2B%20rY%20*%20bX%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(-k_slop%20*%20denom%20%3C%3D%20mu2%20%26%26%20mu2%20%3C%3D%20denom%20*%20(1.0%20%2B%20k_slop))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20a%20%2F%3D%20denom%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20output.fraction%20%3D%20a%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20nLen%20%3D%20Math.sqrt(nX%20*%20nX%20%2B%20nY%20*%20nY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20output.normal.x%20%3D%20nX%20%2F%20nLen%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20output.normal.y%20%3D%20nY%20%2F%20nLen%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.ComputeAABB%20%3D%20function%20(aabb%2C%20transform)%20%7B%0A%20%20%20%20%20%20var%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20var%20v1X%20%3D%0A%20%20%20%20%20%20%20%20transform.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20this.m_v1.x%20%2B%20tMat.col2.x%20*%20this.m_v1.y)%3B%0A%20%20%20%20%20%20var%20v1Y%20%3D%0A%20%20%20%20%20%20%20%20transform.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20this.m_v1.x%20%2B%20tMat.col2.y%20*%20this.m_v1.y)%3B%0A%20%20%20%20%20%20var%20v2X%20%3D%0A%20%20%20%20%20%20%20%20transform.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20this.m_v2.x%20%2B%20tMat.col2.x%20*%20this.m_v2.y)%3B%0A%20%20%20%20%20%20var%20v2Y%20%3D%0A%20%20%20%20%20%20%20%20transform.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20this.m_v2.x%20%2B%20tMat.col2.y%20*%20this.m_v2.y)%3B%0A%20%20%20%20%20%20if%20(v1X%20%3C%20v2X)%20%7B%0A%20%20%20%20%20%20%20%20aabb.lowerBound.x%20%3D%20v1X%3B%0A%20%20%20%20%20%20%20%20aabb.upperBound.x%20%3D%20v2X%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20aabb.lowerBound.x%20%3D%20v2X%3B%0A%20%20%20%20%20%20%20%20aabb.upperBound.x%20%3D%20v1X%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(v1Y%20%3C%20v2Y)%20%7B%0A%20%20%20%20%20%20%20%20aabb.lowerBound.y%20%3D%20v1Y%3B%0A%20%20%20%20%20%20%20%20aabb.upperBound.y%20%3D%20v2Y%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20aabb.lowerBound.y%20%3D%20v2Y%3B%0A%20%20%20%20%20%20%20%20aabb.upperBound.y%20%3D%20v1Y%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.ComputeMass%20%3D%20function%20(massData%2C%20density)%20%7B%0A%20%20%20%20%20%20if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200%3B%0A%20%20%20%20%20%20massData.mass%20%3D%200%3B%0A%20%20%20%20%20%20massData.center.SetV(this.m_v1)%3B%0A%20%20%20%20%20%20massData.I%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.ComputeSubmergedArea%20%3D%20function%20(%0A%20%20%20%20%20%20normal%2C%0A%20%20%20%20%20%20offset%2C%0A%20%20%20%20%20%20xf%2C%0A%20%20%20%20%20%20c%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(offset%20%3D%3D%3D%20undefined)%20offset%20%3D%200%3B%0A%20%20%20%20%20%20var%20v0%20%3D%20new%20b2Vec2(normal.x%20*%20offset%2C%20normal.y%20*%20offset)%3B%0A%20%20%20%20%20%20var%20v1%20%3D%20b2Math.MulX(xf%2C%20this.m_v1)%3B%0A%20%20%20%20%20%20var%20v2%20%3D%20b2Math.MulX(xf%2C%20this.m_v2)%3B%0A%20%20%20%20%20%20var%20d1%20%3D%20b2Math.Dot(normal%2C%20v1)%20-%20offset%3B%0A%20%20%20%20%20%20var%20d2%20%3D%20b2Math.Dot(normal%2C%20v2)%20-%20offset%3B%0A%20%20%20%20%20%20if%20(d1%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20if%20(d2%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20v1.x%20%3D%20(-d2%20%2F%20(d1%20-%20d2))%20*%20v1.x%20%2B%20(d1%20%2F%20(d1%20-%20d2))%20*%20v2.x%3B%0A%20%20%20%20%20%20%20%20%20%20v1.y%20%3D%20(-d2%20%2F%20(d1%20-%20d2))%20*%20v1.y%20%2B%20(d1%20%2F%20(d1%20-%20d2))%20*%20v2.y%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(d2%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20v2.x%20%3D%20(-d2%20%2F%20(d1%20-%20d2))%20*%20v1.x%20%2B%20(d1%20%2F%20(d1%20-%20d2))%20*%20v2.x%3B%0A%20%20%20%20%20%20%20%20%20%20v2.y%20%3D%20(-d2%20%2F%20(d1%20-%20d2))%20*%20v1.y%20%2B%20(d1%20%2F%20(d1%20-%20d2))%20*%20v2.y%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20c.x%20%3D%20(v0.x%20%2B%20v1.x%20%2B%20v2.x)%20%2F%203%3B%0A%20%20%20%20%20%20c.y%20%3D%20(v0.y%20%2B%20v1.y%20%2B%20v2.y)%20%2F%203%3B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%200.5%20*%20((v1.x%20-%20v0.x)%20*%20(v2.y%20-%20v0.y)%20-%20(v1.y%20-%20v0.y)%20*%20(v2.x%20-%20v0.x))%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetLength%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_length%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetVertex1%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_v1%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetVertex2%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_v2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetCoreVertex1%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_coreV1%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetCoreVertex2%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_coreV2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetNormalVector%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_normal%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetDirectionVector%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_direction%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetCorner1Vector%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_cornerDir1%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetCorner2Vector%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_cornerDir2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.Corner1IsConvex%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_cornerConvex1%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.Corner2IsConvex%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_cornerConvex2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetFirstVertex%20%3D%20function%20(xf)%20%7B%0A%20%20%20%20%20%20var%20tMat%20%3D%20xf.R%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20xf.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20this.m_coreV1.x%20%2B%20tMat.col2.x%20*%20this.m_coreV1.y)%2C%0A%20%20%20%20%20%20%20%20xf.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20this.m_coreV1.x%20%2B%20tMat.col2.y%20*%20this.m_coreV1.y)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetNextEdge%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_nextEdge%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.GetPrevEdge%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_prevEdge%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.Support%20%3D%20function%20(xf%2C%20dX%2C%20dY)%20%7B%0A%20%20%20%20%20%20if%20(dX%20%3D%3D%3D%20undefined)%20dX%20%3D%200%3B%0A%20%20%20%20%20%20if%20(dY%20%3D%3D%3D%20undefined)%20dY%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%20%3D%20xf.R%3B%0A%20%20%20%20%20%20var%20v1X%20%3D%0A%20%20%20%20%20%20%20%20xf.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20this.m_coreV1.x%20%2B%20tMat.col2.x%20*%20this.m_coreV1.y)%3B%0A%20%20%20%20%20%20var%20v1Y%20%3D%0A%20%20%20%20%20%20%20%20xf.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20this.m_coreV1.x%20%2B%20tMat.col2.y%20*%20this.m_coreV1.y)%3B%0A%20%20%20%20%20%20var%20v2X%20%3D%0A%20%20%20%20%20%20%20%20xf.position.x%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20this.m_coreV2.x%20%2B%20tMat.col2.x%20*%20this.m_coreV2.y)%3B%0A%20%20%20%20%20%20var%20v2Y%20%3D%0A%20%20%20%20%20%20%20%20xf.position.y%20%2B%0A%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20this.m_coreV2.x%20%2B%20tMat.col2.y%20*%20this.m_coreV2.y)%3B%0A%20%20%20%20%20%20if%20(v1X%20*%20dX%20%2B%20v1Y%20*%20dY%20%3E%20v2X%20*%20dX%20%2B%20v2Y%20*%20dY)%20%7B%0A%20%20%20%20%20%20%20%20this.s_supportVec.x%20%3D%20v1X%3B%0A%20%20%20%20%20%20%20%20this.s_supportVec.y%20%3D%20v1Y%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.s_supportVec.x%20%3D%20v2X%3B%0A%20%20%20%20%20%20%20%20this.s_supportVec.y%20%3D%20v2Y%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20this.s_supportVec%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.b2EdgeShape%20%3D%20function%20(v1%2C%20v2)%20%7B%0A%20%20%20%20%20%20this.__super.b2Shape.call(this)%3B%0A%20%20%20%20%20%20this.m_type%20%3D%20b2Shape.e_edgeShape%3B%0A%20%20%20%20%20%20this.m_prevEdge%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_nextEdge%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_v1%20%3D%20v1%3B%0A%20%20%20%20%20%20this.m_v2%20%3D%20v2%3B%0A%20%20%20%20%20%20this.m_direction.Set(%0A%20%20%20%20%20%20%20%20this.m_v2.x%20-%20this.m_v1.x%2C%0A%20%20%20%20%20%20%20%20this.m_v2.y%20-%20this.m_v1.y%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.m_length%20%3D%20this.m_direction.Normalize()%3B%0A%20%20%20%20%20%20this.m_normal.Set(this.m_direction.y%2C%20-this.m_direction.x)%3B%0A%20%20%20%20%20%20this.m_coreV1.Set(%0A%20%20%20%20%20%20%20%20-b2Settings.b2_toiSlop%20*%20(this.m_normal.x%20-%20this.m_direction.x)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_v1.x%2C%0A%20%20%20%20%20%20%20%20-b2Settings.b2_toiSlop%20*%20(this.m_normal.y%20-%20this.m_direction.y)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_v1.y%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.m_coreV2.Set(%0A%20%20%20%20%20%20%20%20-b2Settings.b2_toiSlop%20*%20(this.m_normal.x%20%2B%20this.m_direction.x)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_v2.x%2C%0A%20%20%20%20%20%20%20%20-b2Settings.b2_toiSlop%20*%20(this.m_normal.y%20%2B%20this.m_direction.y)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_v2.y%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.m_cornerDir1%20%3D%20this.m_normal%3B%0A%20%20%20%20%20%20this.m_cornerDir2.Set(-this.m_normal.x%2C%20-this.m_normal.y)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.SetPrevEdge%20%3D%20function%20(%0A%20%20%20%20%20%20edge%2C%0A%20%20%20%20%20%20core%2C%0A%20%20%20%20%20%20cornerDir%2C%0A%20%20%20%20%20%20convex%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20this.m_prevEdge%20%3D%20edge%3B%0A%20%20%20%20%20%20this.m_coreV1%20%3D%20core%3B%0A%20%20%20%20%20%20this.m_cornerDir1%20%3D%20cornerDir%3B%0A%20%20%20%20%20%20this.m_cornerConvex1%20%3D%20convex%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeShape.prototype.SetNextEdge%20%3D%20function%20(%0A%20%20%20%20%20%20edge%2C%0A%20%20%20%20%20%20core%2C%0A%20%20%20%20%20%20cornerDir%2C%0A%20%20%20%20%20%20convex%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20this.m_nextEdge%20%3D%20edge%3B%0A%20%20%20%20%20%20this.m_coreV2%20%3D%20core%3B%0A%20%20%20%20%20%20this.m_cornerDir2%20%3D%20cornerDir%3B%0A%20%20%20%20%20%20this.m_cornerConvex2%20%3D%20convex%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MassData.b2MassData%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.mass%20%3D%200.0%3B%0A%20%20%20%20%20%20this.center%20%3D%20new%20b2Vec2(0%2C%200)%3B%0A%20%20%20%20%20%20this.I%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2PolygonShape%2C%20Box2D.Collision.Shapes.b2Shape)%3B%0A%20%20%20%20b2PolygonShape.prototype.__super%20%3D%20Box2D.Collision.Shapes.b2Shape.prototype%3B%0A%20%20%20%20b2PolygonShape.b2PolygonShape%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20s%20%3D%20new%20b2PolygonShape()%3B%0A%20%20%20%20%20%20s.Set(this)%3B%0A%20%20%20%20%20%20return%20s%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.Set%20%3D%20function%20(other)%20%7B%0A%20%20%20%20%20%20this.__super.Set.call(this%2C%20other)%3B%0A%20%20%20%20%20%20if%20(Box2D.is(other%2C%20b2PolygonShape))%20%7B%0A%20%20%20%20%20%20%20%20var%20other2%20%3D%20other%20instanceof%20b2PolygonShape%20%3F%20other%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20this.m_centroid.SetV(other2.m_centroid)%3B%0A%20%20%20%20%20%20%20%20this.m_vertexCount%20%3D%20other2.m_vertexCount%3B%0A%20%20%20%20%20%20%20%20this.Reserve(this.m_vertexCount)%3B%0A%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_vertices%5Bi%5D.SetV(other2.m_vertices%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_normals%5Bi%5D.SetV(other2.m_normals%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.SetAsArray%20%3D%20function%20(vertices%2C%20vertexCount)%20%7B%0A%20%20%20%20%20%20if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20v%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%2C%0A%20%20%20%20%20%20%20%20tVec%3B%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20vertices.length%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20v.push(tVec)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.SetAsVector(v%2C%20vertexCount)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.AsArray%20%3D%20function%20(vertices%2C%20vertexCount)%20%7B%0A%20%20%20%20%20%20if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20polygonShape%20%3D%20new%20b2PolygonShape()%3B%0A%20%20%20%20%20%20polygonShape.SetAsArray(vertices%2C%20vertexCount)%3B%0A%20%20%20%20%20%20return%20polygonShape%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.SetAsVector%20%3D%20function%20(vertices%2C%20vertexCount)%20%7B%0A%20%20%20%20%20%20if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%20%20%20%20%20%20if%20(vertexCount%20%3D%3D%200)%20vertexCount%20%3D%20vertices.length%3B%0A%20%20%20%20%20%20b2Settings.b2Assert(2%20%3C%3D%20vertexCount)%3B%0A%20%20%20%20%20%20this.m_vertexCount%20%3D%20vertexCount%3B%0A%20%20%20%20%20%20this.Reserve(vertexCount)%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20this.m_vertices%5Bi%5D.SetV(vertices%5Bi%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20i1%20%3D%20parseInt(i)%3B%0A%20%20%20%20%20%20%20%20var%20i2%20%3D%20parseInt(i%20%2B%201%20%3C%20this.m_vertexCount%20%3F%20i%20%2B%201%20%3A%200)%3B%0A%20%20%20%20%20%20%20%20var%20edge%20%3D%20b2Math.SubtractVV(this.m_vertices%5Bi2%5D%2C%20this.m_vertices%5Bi1%5D)%3B%0A%20%20%20%20%20%20%20%20b2Settings.b2Assert(edge.LengthSquared()%20%3E%20Number.MIN_VALUE)%3B%0A%20%20%20%20%20%20%20%20this.m_normals%5Bi%5D.SetV(b2Math.CrossVF(edge%2C%201.0))%3B%0A%20%20%20%20%20%20%20%20this.m_normals%5Bi%5D.Normalize()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_centroid%20%3D%20b2PolygonShape.ComputeCentroid(%0A%20%20%20%20%20%20%20%20this.m_vertices%2C%0A%20%20%20%20%20%20%20%20this.m_vertexCount%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.AsVector%20%3D%20function%20(vertices%2C%20vertexCount)%20%7B%0A%20%20%20%20%20%20if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20polygonShape%20%3D%20new%20b2PolygonShape()%3B%0A%20%20%20%20%20%20polygonShape.SetAsVector(vertices%2C%20vertexCount)%3B%0A%20%20%20%20%20%20return%20polygonShape%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.SetAsBox%20%3D%20function%20(hx%2C%20hy)%20%7B%0A%20%20%20%20%20%20if%20(hx%20%3D%3D%3D%20undefined)%20hx%20%3D%200%3B%0A%20%20%20%20%20%20if%20(hy%20%3D%3D%3D%20undefined)%20hy%20%3D%200%3B%0A%20%20%20%20%20%20this.m_vertexCount%20%3D%204%3B%0A%20%20%20%20%20%20this.Reserve(4)%3B%0A%20%20%20%20%20%20this.m_vertices%5B0%5D.Set(-hx%2C%20-hy)%3B%0A%20%20%20%20%20%20this.m_vertices%5B1%5D.Set(hx%2C%20-hy)%3B%0A%20%20%20%20%20%20this.m_vertices%5B2%5D.Set(hx%2C%20hy)%3B%0A%20%20%20%20%20%20this.m_vertices%5B3%5D.Set(-hx%2C%20hy)%3B%0A%20%20%20%20%20%20this.m_normals%5B0%5D.Set(0.0%2C%20-1.0)%3B%0A%20%20%20%20%20%20this.m_normals%5B1%5D.Set(1.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.m_normals%5B2%5D.Set(0.0%2C%201.0)%3B%0A%20%20%20%20%20%20this.m_normals%5B3%5D.Set(-1.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.m_centroid.SetZero()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.AsBox%20%3D%20function%20(hx%2C%20hy)%20%7B%0A%20%20%20%20%20%20if%20(hx%20%3D%3D%3D%20undefined)%20hx%20%3D%200%3B%0A%20%20%20%20%20%20if%20(hy%20%3D%3D%3D%20undefined)%20hy%20%3D%200%3B%0A%20%20%20%20%20%20var%20polygonShape%20%3D%20new%20b2PolygonShape()%3B%0A%20%20%20%20%20%20polygonShape.SetAsBox(hx%2C%20hy)%3B%0A%20%20%20%20%20%20return%20polygonShape%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.SetAsOrientedBox%20%3D%20function%20(%0A%20%20%20%20%20%20hx%2C%0A%20%20%20%20%20%20hy%2C%0A%20%20%20%20%20%20center%2C%0A%20%20%20%20%20%20angle%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(hx%20%3D%3D%3D%20undefined)%20hx%20%3D%200%3B%0A%20%20%20%20%20%20if%20(hy%20%3D%3D%3D%20undefined)%20hy%20%3D%200%3B%0A%20%20%20%20%20%20if%20(center%20%3D%3D%3D%20undefined)%20center%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_vertexCount%20%3D%204%3B%0A%20%20%20%20%20%20this.Reserve(4)%3B%0A%20%20%20%20%20%20this.m_vertices%5B0%5D.Set(-hx%2C%20-hy)%3B%0A%20%20%20%20%20%20this.m_vertices%5B1%5D.Set(hx%2C%20-hy)%3B%0A%20%20%20%20%20%20this.m_vertices%5B2%5D.Set(hx%2C%20hy)%3B%0A%20%20%20%20%20%20this.m_vertices%5B3%5D.Set(-hx%2C%20hy)%3B%0A%20%20%20%20%20%20this.m_normals%5B0%5D.Set(0.0%2C%20-1.0)%3B%0A%20%20%20%20%20%20this.m_normals%5B1%5D.Set(1.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.m_normals%5B2%5D.Set(0.0%2C%201.0)%3B%0A%20%20%20%20%20%20this.m_normals%5B3%5D.Set(-1.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.m_centroid%20%3D%20center%3B%0A%20%20%20%20%20%20var%20xf%20%3D%20new%20b2Transform()%3B%0A%20%20%20%20%20%20xf.position%20%3D%20center%3B%0A%20%20%20%20%20%20xf.R.Set(angle)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20this.m_vertices%5Bi%5D%20%3D%20b2Math.MulX(xf%2C%20this.m_vertices%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20this.m_normals%5Bi%5D%20%3D%20b2Math.MulMV(xf.R%2C%20this.m_normals%5Bi%5D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.AsOrientedBox%20%3D%20function%20(hx%2C%20hy%2C%20center%2C%20angle)%20%7B%0A%20%20%20%20%20%20if%20(hx%20%3D%3D%3D%20undefined)%20hx%20%3D%200%3B%0A%20%20%20%20%20%20if%20(hy%20%3D%3D%3D%20undefined)%20hy%20%3D%200%3B%0A%20%20%20%20%20%20if%20(center%20%3D%3D%3D%20undefined)%20center%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20polygonShape%20%3D%20new%20b2PolygonShape()%3B%0A%20%20%20%20%20%20polygonShape.SetAsOrientedBox(hx%2C%20hy%2C%20center%2C%20angle)%3B%0A%20%20%20%20%20%20return%20polygonShape%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.SetAsEdge%20%3D%20function%20(v1%2C%20v2)%20%7B%0A%20%20%20%20%20%20this.m_vertexCount%20%3D%202%3B%0A%20%20%20%20%20%20this.Reserve(2)%3B%0A%20%20%20%20%20%20this.m_vertices%5B0%5D.SetV(v1)%3B%0A%20%20%20%20%20%20this.m_vertices%5B1%5D.SetV(v2)%3B%0A%20%20%20%20%20%20this.m_centroid.x%20%3D%200.5%20*%20(v1.x%20%2B%20v2.x)%3B%0A%20%20%20%20%20%20this.m_centroid.y%20%3D%200.5%20*%20(v1.y%20%2B%20v2.y)%3B%0A%20%20%20%20%20%20this.m_normals%5B0%5D%20%3D%20b2Math.CrossVF(b2Math.SubtractVV(v2%2C%20v1)%2C%201.0)%3B%0A%20%20%20%20%20%20this.m_normals%5B0%5D.Normalize()%3B%0A%20%20%20%20%20%20this.m_normals%5B1%5D.x%20%3D%20-this.m_normals%5B0%5D.x%3B%0A%20%20%20%20%20%20this.m_normals%5B1%5D.y%20%3D%20-this.m_normals%5B0%5D.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.AsEdge%20%3D%20function%20(v1%2C%20v2)%20%7B%0A%20%20%20%20%20%20var%20polygonShape%20%3D%20new%20b2PolygonShape()%3B%0A%20%20%20%20%20%20polygonShape.SetAsEdge(v1%2C%20v2)%3B%0A%20%20%20%20%20%20return%20polygonShape%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.TestPoint%20%3D%20function%20(xf%2C%20p)%20%7B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20var%20tMat%20%3D%20xf.R%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20p.x%20-%20xf.position.x%3B%0A%20%20%20%20%20%20var%20tY%20%3D%20p.y%20-%20xf.position.y%3B%0A%20%20%20%20%20%20var%20pLocalX%20%3D%20tX%20*%20tMat.col1.x%20%2B%20tY%20*%20tMat.col1.y%3B%0A%20%20%20%20%20%20var%20pLocalY%20%3D%20tX%20*%20tMat.col2.x%20%2B%20tY%20*%20tMat.col2.y%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20pLocalX%20-%20tVec.x%3B%0A%20%20%20%20%20%20%20%20tY%20%3D%20pLocalY%20-%20tVec.y%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_normals%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20dot%20%3D%20tVec.x%20*%20tX%20%2B%20tVec.y%20*%20tY%3B%0A%20%20%20%20%20%20%20%20if%20(dot%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.RayCast%20%3D%20function%20(output%2C%20input%2C%20transform)%20%7B%0A%20%20%20%20%20%20var%20lower%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20upper%20%3D%20input.maxFraction%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20tY%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20tX%20%3D%20input.p1.x%20-%20transform.position.x%3B%0A%20%20%20%20%20%20tY%20%3D%20input.p1.y%20-%20transform.position.y%3B%0A%20%20%20%20%20%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20var%20p1X%20%3D%20tX%20*%20tMat.col1.x%20%2B%20tY%20*%20tMat.col1.y%3B%0A%20%20%20%20%20%20var%20p1Y%20%3D%20tX%20*%20tMat.col2.x%20%2B%20tY%20*%20tMat.col2.y%3B%0A%20%20%20%20%20%20tX%20%3D%20input.p2.x%20-%20transform.position.x%3B%0A%20%20%20%20%20%20tY%20%3D%20input.p2.y%20-%20transform.position.y%3B%0A%20%20%20%20%20%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20var%20p2X%20%3D%20tX%20*%20tMat.col1.x%20%2B%20tY%20*%20tMat.col1.y%3B%0A%20%20%20%20%20%20var%20p2Y%20%3D%20tX%20*%20tMat.col2.x%20%2B%20tY%20*%20tMat.col2.y%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20p2X%20-%20p1X%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20p2Y%20-%20p1Y%3B%0A%20%20%20%20%20%20var%20index%20%3D%20parseInt(-1)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tVec.x%20-%20p1X%3B%0A%20%20%20%20%20%20%20%20tY%20%3D%20tVec.y%20-%20p1Y%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_normals%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20numerator%20%3D%20tVec.x%20*%20tX%20%2B%20tVec.y%20*%20tY%3B%0A%20%20%20%20%20%20%20%20var%20denominator%20%3D%20tVec.x%20*%20dX%20%2B%20tVec.y%20*%20dY%3B%0A%20%20%20%20%20%20%20%20if%20(denominator%20%3D%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(numerator%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(denominator%20%3C%200.0%20%26%26%20numerator%20%3C%20lower%20*%20denominator)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lower%20%3D%20numerator%20%2F%20denominator%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20index%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(denominator%20%3E%200.0%20%26%26%20numerator%20%3C%20upper%20*%20denominator)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20upper%20%3D%20numerator%20%2F%20denominator%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(upper%20%3C%20lower%20-%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(index%20%3E%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20output.fraction%20%3D%20lower%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20transform.R%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_normals%5Bindex%5D%3B%0A%20%20%20%20%20%20%20%20output.normal.x%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20output.normal.y%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.ComputeAABB%20%3D%20function%20(aabb%2C%20xf)%20%7B%0A%20%20%20%20%20%20var%20tMat%20%3D%20xf.R%3B%0A%20%20%20%20%20%20var%20tVec%20%3D%20this.m_vertices%5B0%5D%3B%0A%20%20%20%20%20%20var%20lowerX%20%3D%0A%20%20%20%20%20%20%20%20xf.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20lowerY%20%3D%0A%20%20%20%20%20%20%20%20xf.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20upperX%20%3D%20lowerX%3B%0A%20%20%20%20%20%20var%20upperY%20%3D%20lowerY%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%201%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20vX%20%3D%20xf.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20var%20vY%20%3D%20xf.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20lowerX%20%3D%20lowerX%20%3C%20vX%20%3F%20lowerX%20%3A%20vX%3B%0A%20%20%20%20%20%20%20%20lowerY%20%3D%20lowerY%20%3C%20vY%20%3F%20lowerY%20%3A%20vY%3B%0A%20%20%20%20%20%20%20%20upperX%20%3D%20upperX%20%3E%20vX%20%3F%20upperX%20%3A%20vX%3B%0A%20%20%20%20%20%20%20%20upperY%20%3D%20upperY%20%3E%20vY%20%3F%20upperY%20%3A%20vY%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20aabb.lowerBound.x%20%3D%20lowerX%20-%20this.m_radius%3B%0A%20%20%20%20%20%20aabb.lowerBound.y%20%3D%20lowerY%20-%20this.m_radius%3B%0A%20%20%20%20%20%20aabb.upperBound.x%20%3D%20upperX%20%2B%20this.m_radius%3B%0A%20%20%20%20%20%20aabb.upperBound.y%20%3D%20upperY%20%2B%20this.m_radius%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.ComputeMass%20%3D%20function%20(massData%2C%20density)%20%7B%0A%20%20%20%20%20%20if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_vertexCount%20%3D%3D%202)%20%7B%0A%20%20%20%20%20%20%20%20massData.center.x%20%3D%200.5%20*%20(this.m_vertices%5B0%5D.x%20%2B%20this.m_vertices%5B1%5D.x)%3B%0A%20%20%20%20%20%20%20%20massData.center.y%20%3D%200.5%20*%20(this.m_vertices%5B0%5D.y%20%2B%20this.m_vertices%5B1%5D.y)%3B%0A%20%20%20%20%20%20%20%20massData.mass%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20massData.I%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20centerX%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20centerY%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20area%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20I%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20p1X%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20p1Y%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20k_inv3%20%3D%201.0%20%2F%203.0%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20p2%20%3D%20this.m_vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20p3%20%3D%0A%20%20%20%20%20%20%20%20%20%20i%20%2B%201%20%3C%20this.m_vertexCount%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%20this.m_vertices%5BparseInt(i%20%2B%201)%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20this.m_vertices%5B0%5D%3B%0A%20%20%20%20%20%20%20%20var%20e1X%20%3D%20p2.x%20-%20p1X%3B%0A%20%20%20%20%20%20%20%20var%20e1Y%20%3D%20p2.y%20-%20p1Y%3B%0A%20%20%20%20%20%20%20%20var%20e2X%20%3D%20p3.x%20-%20p1X%3B%0A%20%20%20%20%20%20%20%20var%20e2Y%20%3D%20p3.y%20-%20p1Y%3B%0A%20%20%20%20%20%20%20%20var%20D%20%3D%20e1X%20*%20e2Y%20-%20e1Y%20*%20e2X%3B%0A%20%20%20%20%20%20%20%20var%20triangleArea%20%3D%200.5%20*%20D%3B%0A%20%20%20%20%20%20%20%20area%20%2B%3D%20triangleArea%3B%0A%20%20%20%20%20%20%20%20centerX%20%2B%3D%20triangleArea%20*%20k_inv3%20*%20(p1X%20%2B%20p2.x%20%2B%20p3.x)%3B%0A%20%20%20%20%20%20%20%20centerY%20%2B%3D%20triangleArea%20*%20k_inv3%20*%20(p1Y%20%2B%20p2.y%20%2B%20p3.y)%3B%0A%20%20%20%20%20%20%20%20var%20px%20%3D%20p1X%3B%0A%20%20%20%20%20%20%20%20var%20py%20%3D%20p1Y%3B%0A%20%20%20%20%20%20%20%20var%20ex1%20%3D%20e1X%3B%0A%20%20%20%20%20%20%20%20var%20ey1%20%3D%20e1Y%3B%0A%20%20%20%20%20%20%20%20var%20ex2%20%3D%20e2X%3B%0A%20%20%20%20%20%20%20%20var%20ey2%20%3D%20e2Y%3B%0A%20%20%20%20%20%20%20%20var%20intx2%20%3D%0A%20%20%20%20%20%20%20%20%20%20k_inv3%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20(0.25%20*%20(ex1%20*%20ex1%20%2B%20ex2%20*%20ex1%20%2B%20ex2%20*%20ex2)%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(px%20*%20ex1%20%2B%20px%20*%20ex2))%20%2B%0A%20%20%20%20%20%20%20%20%20%200.5%20*%20px%20*%20px%3B%0A%20%20%20%20%20%20%20%20var%20inty2%20%3D%0A%20%20%20%20%20%20%20%20%20%20k_inv3%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20(0.25%20*%20(ey1%20*%20ey1%20%2B%20ey2%20*%20ey1%20%2B%20ey2%20*%20ey2)%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(py%20*%20ey1%20%2B%20py%20*%20ey2))%20%2B%0A%20%20%20%20%20%20%20%20%20%200.5%20*%20py%20*%20py%3B%0A%20%20%20%20%20%20%20%20I%20%2B%3D%20D%20*%20(intx2%20%2B%20inty2)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20massData.mass%20%3D%20density%20*%20area%3B%0A%20%20%20%20%20%20centerX%20*%3D%201.0%20%2F%20area%3B%0A%20%20%20%20%20%20centerY%20*%3D%201.0%20%2F%20area%3B%0A%20%20%20%20%20%20massData.center.Set(centerX%2C%20centerY)%3B%0A%20%20%20%20%20%20massData.I%20%3D%20density%20*%20I%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.ComputeSubmergedArea%20%3D%20function%20(%0A%20%20%20%20%20%20normal%2C%0A%20%20%20%20%20%20offset%2C%0A%20%20%20%20%20%20xf%2C%0A%20%20%20%20%20%20c%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(offset%20%3D%3D%3D%20undefined)%20offset%20%3D%200%3B%0A%20%20%20%20%20%20var%20normalL%20%3D%20b2Math.MulTMV(xf.R%2C%20normal)%3B%0A%20%20%20%20%20%20var%20offsetL%20%3D%20offset%20-%20b2Math.Dot(normal%2C%20xf.position)%3B%0A%20%20%20%20%20%20var%20depths%20%3D%20new%20Vector_a2j_Number()%3B%0A%20%20%20%20%20%20var%20diveCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20intoIndex%20%3D%20parseInt(-1)%3B%0A%20%20%20%20%20%20var%20outoIndex%20%3D%20parseInt(-1)%3B%0A%20%20%20%20%20%20var%20lastSubmerged%20%3D%20false%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20depths%5Bi%5D%20%3D%20b2Math.Dot(normalL%2C%20this.m_vertices%5Bi%5D)%20-%20offsetL%3B%0A%20%20%20%20%20%20%20%20var%20isSubmerged%20%3D%20depths%5Bi%5D%20%3C%20-Number.MIN_VALUE%3B%0A%20%20%20%20%20%20%20%20if%20(i%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(isSubmerged)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!lastSubmerged)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20intoIndex%20%3D%20i%20-%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20diveCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(lastSubmerged)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20outoIndex%20%3D%20i%20-%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20diveCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20lastSubmerged%20%3D%20isSubmerged%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20switch%20(diveCount)%20%7B%0A%20%20%20%20%20%20%20%20case%200%3A%0A%20%20%20%20%20%20%20%20%20%20if%20(lastSubmerged)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20md%20%3D%20new%20b2MassData()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.ComputeMass(md%2C%201)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20c.SetV(b2Math.MulX(xf%2C%20md.center))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20md.mass%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20%20%20if%20(intoIndex%20%3D%3D%20-1)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20intoIndex%20%3D%20this.m_vertexCount%20-%201%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20outoIndex%20%3D%20this.m_vertexCount%20-%201%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20intoIndex2%20%3D%20parseInt((intoIndex%20%2B%201)%20%25%20this.m_vertexCount)%3B%0A%20%20%20%20%20%20var%20outoIndex2%20%3D%20parseInt((outoIndex%20%2B%201)%20%25%20this.m_vertexCount)%3B%0A%20%20%20%20%20%20var%20intoLamdda%20%3D%0A%20%20%20%20%20%20%20%20(0%20-%20depths%5BintoIndex%5D)%20%2F%20(depths%5BintoIndex2%5D%20-%20depths%5BintoIndex%5D)%3B%0A%20%20%20%20%20%20var%20outoLamdda%20%3D%0A%20%20%20%20%20%20%20%20(0%20-%20depths%5BoutoIndex%5D)%20%2F%20(depths%5BoutoIndex2%5D%20-%20depths%5BoutoIndex%5D)%3B%0A%20%20%20%20%20%20var%20intoVec%20%3D%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20this.m_vertices%5BintoIndex%5D.x%20*%20(1%20-%20intoLamdda)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_vertices%5BintoIndex2%5D.x%20*%20intoLamdda%2C%0A%20%20%20%20%20%20%20%20this.m_vertices%5BintoIndex%5D.y%20*%20(1%20-%20intoLamdda)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_vertices%5BintoIndex2%5D.y%20*%20intoLamdda%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20outoVec%20%3D%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20this.m_vertices%5BoutoIndex%5D.x%20*%20(1%20-%20outoLamdda)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_vertices%5BoutoIndex2%5D.x%20*%20outoLamdda%2C%0A%20%20%20%20%20%20%20%20this.m_vertices%5BoutoIndex%5D.y%20*%20(1%20-%20outoLamdda)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_vertices%5BoutoIndex2%5D.y%20*%20outoLamdda%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20area%20%3D%200%3B%0A%20%20%20%20%20%20var%20center%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20var%20p2%20%3D%20this.m_vertices%5BintoIndex2%5D%3B%0A%20%20%20%20%20%20var%20p3%3B%0A%20%20%20%20%20%20i%20%3D%20intoIndex2%3B%0A%20%20%20%20%20%20while%20(i%20!%3D%20outoIndex2)%20%7B%0A%20%20%20%20%20%20%20%20i%20%3D%20(i%20%2B%201)%20%25%20this.m_vertexCount%3B%0A%20%20%20%20%20%20%20%20if%20(i%20%3D%3D%20outoIndex2)%20p3%20%3D%20outoVec%3B%0A%20%20%20%20%20%20%20%20else%20p3%20%3D%20this.m_vertices%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20triangleArea%20%3D%0A%20%20%20%20%20%20%20%20%20%200.5%20*%0A%20%20%20%20%20%20%20%20%20%20((p2.x%20-%20intoVec.x)%20*%20(p3.y%20-%20intoVec.y)%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20(p2.y%20-%20intoVec.y)%20*%20(p3.x%20-%20intoVec.x))%3B%0A%20%20%20%20%20%20%20%20area%20%2B%3D%20triangleArea%3B%0A%20%20%20%20%20%20%20%20center.x%20%2B%3D%20(triangleArea%20*%20(intoVec.x%20%2B%20p2.x%20%2B%20p3.x))%20%2F%203%3B%0A%20%20%20%20%20%20%20%20center.y%20%2B%3D%20(triangleArea%20*%20(intoVec.y%20%2B%20p2.y%20%2B%20p3.y))%20%2F%203%3B%0A%20%20%20%20%20%20%20%20p2%20%3D%20p3%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20center.Multiply(1%20%2F%20area)%3B%0A%20%20%20%20%20%20c.SetV(b2Math.MulX(xf%2C%20center))%3B%0A%20%20%20%20%20%20return%20area%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.GetVertexCount%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_vertexCount%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.GetVertices%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_vertices%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.GetNormals%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_normals%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.GetSupport%20%3D%20function%20(d)%20%7B%0A%20%20%20%20%20%20var%20bestIndex%20%3D%200%3B%0A%20%20%20%20%20%20var%20bestValue%20%3D%20this.m_vertices%5B0%5D.x%20*%20d.x%20%2B%20this.m_vertices%5B0%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%201%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20value%20%3D%20this.m_vertices%5Bi%5D.x%20*%20d.x%20%2B%20this.m_vertices%5Bi%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20%20%20if%20(value%20%3E%20bestValue)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bestIndex%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%20%20bestValue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20bestIndex%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.GetSupportVertex%20%3D%20function%20(d)%20%7B%0A%20%20%20%20%20%20var%20bestIndex%20%3D%200%3B%0A%20%20%20%20%20%20var%20bestValue%20%3D%20this.m_vertices%5B0%5D.x%20*%20d.x%20%2B%20this.m_vertices%5B0%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%201%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20value%20%3D%20this.m_vertices%5Bi%5D.x%20*%20d.x%20%2B%20this.m_vertices%5Bi%5D.y%20*%20d.y%3B%0A%20%20%20%20%20%20%20%20if%20(value%20%3E%20bestValue)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bestIndex%20%3D%20i%3B%0A%20%20%20%20%20%20%20%20%20%20bestValue%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20this.m_vertices%5BbestIndex%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.Validate%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.b2PolygonShape%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2Shape.call(this)%3B%0A%20%20%20%20%20%20this.m_type%20%3D%20b2Shape.e_polygonShape%3B%0A%20%20%20%20%20%20this.m_centroid%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_vertices%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20this.m_normals%20%3D%20new%20Vector()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.prototype.Reserve%20%3D%20function%20(count)%20%7B%0A%20%20%20%20%20%20if%20(count%20%3D%3D%3D%20undefined)%20count%20%3D%200%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%20parseInt(this.m_vertices.length)%3B%20i%20%3C%20count%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20this.m_vertices%5Bi%5D%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20this.m_normals%5Bi%5D%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.ComputeCentroid%20%3D%20function%20(vs%2C%20count)%20%7B%0A%20%20%20%20%20%20if%20(count%20%3D%3D%3D%20undefined)%20count%20%3D%200%3B%0A%20%20%20%20%20%20var%20c%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20var%20area%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20p1X%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20p1Y%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20inv3%20%3D%201.0%20%2F%203.0%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20count%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20p2%20%3D%20vs%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20p3%20%3D%20i%20%2B%201%20%3C%20count%20%3F%20vs%5BparseInt(i%20%2B%201)%5D%20%3A%20vs%5B0%5D%3B%0A%20%20%20%20%20%20%20%20var%20e1X%20%3D%20p2.x%20-%20p1X%3B%0A%20%20%20%20%20%20%20%20var%20e1Y%20%3D%20p2.y%20-%20p1Y%3B%0A%20%20%20%20%20%20%20%20var%20e2X%20%3D%20p3.x%20-%20p1X%3B%0A%20%20%20%20%20%20%20%20var%20e2Y%20%3D%20p3.y%20-%20p1Y%3B%0A%20%20%20%20%20%20%20%20var%20D%20%3D%20e1X%20*%20e2Y%20-%20e1Y%20*%20e2X%3B%0A%20%20%20%20%20%20%20%20var%20triangleArea%20%3D%200.5%20*%20D%3B%0A%20%20%20%20%20%20%20%20area%20%2B%3D%20triangleArea%3B%0A%20%20%20%20%20%20%20%20c.x%20%2B%3D%20triangleArea%20*%20inv3%20*%20(p1X%20%2B%20p2.x%20%2B%20p3.x)%3B%0A%20%20%20%20%20%20%20%20c.y%20%2B%3D%20triangleArea%20*%20inv3%20*%20(p1Y%20%2B%20p2.y%20%2B%20p3.y)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20c.x%20*%3D%201.0%20%2F%20area%3B%0A%20%20%20%20%20%20c.y%20*%3D%201.0%20%2F%20area%3B%0A%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonShape.ComputeOBB%20%3D%20function%20(obb%2C%20vs%2C%20count)%20%7B%0A%20%20%20%20%20%20if%20(count%20%3D%3D%3D%20undefined)%20count%20%3D%200%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20var%20p%20%3D%20new%20Vector(count%20%2B%201)%3B%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20count%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20p%5Bi%5D%20%3D%20vs%5Bi%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20p%5Bcount%5D%20%3D%20p%5B0%5D%3B%0A%20%20%20%20%20%20var%20minArea%20%3D%20Number.MAX_VALUE%3B%0A%20%20%20%20%20%20for%20(i%20%3D%201%3B%20i%20%3C%3D%20count%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20root%20%3D%20p%5BparseInt(i%20-%201)%5D%3B%0A%20%20%20%20%20%20%20%20var%20uxX%20%3D%20p%5Bi%5D.x%20-%20root.x%3B%0A%20%20%20%20%20%20%20%20var%20uxY%20%3D%20p%5Bi%5D.y%20-%20root.y%3B%0A%20%20%20%20%20%20%20%20var%20length%20%3D%20Math.sqrt(uxX%20*%20uxX%20%2B%20uxY%20*%20uxY)%3B%0A%20%20%20%20%20%20%20%20uxX%20%2F%3D%20length%3B%0A%20%20%20%20%20%20%20%20uxY%20%2F%3D%20length%3B%0A%20%20%20%20%20%20%20%20var%20uyX%20%3D%20-uxY%3B%0A%20%20%20%20%20%20%20%20var%20uyY%20%3D%20uxX%3B%0A%20%20%20%20%20%20%20%20var%20lowerX%20%3D%20Number.MAX_VALUE%3B%0A%20%20%20%20%20%20%20%20var%20lowerY%20%3D%20Number.MAX_VALUE%3B%0A%20%20%20%20%20%20%20%20var%20upperX%20%3D%20-Number.MAX_VALUE%3B%0A%20%20%20%20%20%20%20%20var%20upperY%20%3D%20-Number.MAX_VALUE%3B%0A%20%20%20%20%20%20%20%20for%20(var%20j%20%3D%200%3B%20j%20%3C%20count%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20dX%20%3D%20p%5Bj%5D.x%20-%20root.x%3B%0A%20%20%20%20%20%20%20%20%20%20var%20dY%20%3D%20p%5Bj%5D.y%20-%20root.y%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rX%20%3D%20uxX%20*%20dX%20%2B%20uxY%20*%20dY%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rY%20%3D%20uyX%20*%20dX%20%2B%20uyY%20*%20dY%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(rX%20%3C%20lowerX)%20lowerX%20%3D%20rX%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(rY%20%3C%20lowerY)%20lowerY%20%3D%20rY%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(rX%20%3E%20upperX)%20upperX%20%3D%20rX%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(rY%20%3E%20upperY)%20upperY%20%3D%20rY%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20area%20%3D%20(upperX%20-%20lowerX)%20*%20(upperY%20-%20lowerY)%3B%0A%20%20%20%20%20%20%20%20if%20(area%20%3C%200.95%20*%20minArea)%20%7B%0A%20%20%20%20%20%20%20%20%20%20minArea%20%3D%20area%3B%0A%20%20%20%20%20%20%20%20%20%20obb.R.col1.x%20%3D%20uxX%3B%0A%20%20%20%20%20%20%20%20%20%20obb.R.col1.y%20%3D%20uxY%3B%0A%20%20%20%20%20%20%20%20%20%20obb.R.col2.x%20%3D%20uyX%3B%0A%20%20%20%20%20%20%20%20%20%20obb.R.col2.y%20%3D%20uyY%3B%0A%20%20%20%20%20%20%20%20%20%20var%20centerX%20%3D%200.5%20*%20(lowerX%20%2B%20upperX)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20centerY%20%3D%200.5%20*%20(lowerY%20%2B%20upperY)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20tMat%20%3D%20obb.R%3B%0A%20%20%20%20%20%20%20%20%20%20obb.center.x%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20root.x%20%2B%20(tMat.col1.x%20*%20centerX%20%2B%20tMat.col2.x%20*%20centerY)%3B%0A%20%20%20%20%20%20%20%20%20%20obb.center.y%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20root.y%20%2B%20(tMat.col1.y%20*%20centerX%20%2B%20tMat.col2.y%20*%20centerY)%3B%0A%20%20%20%20%20%20%20%20%20%20obb.extents.x%20%3D%200.5%20*%20(upperX%20-%20lowerX)%3B%0A%20%20%20%20%20%20%20%20%20%20obb.extents.y%20%3D%200.5%20*%20(upperY%20-%20lowerY)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2PolygonShape.s_mat%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2Shape.b2Shape%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Shape.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Shape.prototype.Set%20%3D%20function%20(other)%20%7B%0A%20%20%20%20%20%20this.m_radius%20%3D%20other.m_radius%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Shape.prototype.GetType%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_type%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Shape.prototype.TestPoint%20%3D%20function%20(xf%2C%20p)%20%7B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Shape.prototype.RayCast%20%3D%20function%20(output%2C%20input%2C%20transform)%20%7B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Shape.prototype.ComputeAABB%20%3D%20function%20(aabb%2C%20xf)%20%7B%7D%3B%0A%20%20%20%20b2Shape.prototype.ComputeMass%20%3D%20function%20(massData%2C%20density)%20%7B%0A%20%20%20%20%20%20if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Shape.prototype.ComputeSubmergedArea%20%3D%20function%20(normal%2C%20offset%2C%20xf%2C%20c)%20%7B%0A%20%20%20%20%20%20if%20(offset%20%3D%3D%3D%20undefined)%20offset%20%3D%200%3B%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Shape.TestOverlap%20%3D%20function%20(shape1%2C%20transform1%2C%20shape2%2C%20transform2)%20%7B%0A%20%20%20%20%20%20var%20input%20%3D%20new%20b2DistanceInput()%3B%0A%20%20%20%20%20%20input.proxyA%20%3D%20new%20b2DistanceProxy()%3B%0A%20%20%20%20%20%20input.proxyA.Set(shape1)%3B%0A%20%20%20%20%20%20input.proxyB%20%3D%20new%20b2DistanceProxy()%3B%0A%20%20%20%20%20%20input.proxyB.Set(shape2)%3B%0A%20%20%20%20%20%20input.transformA%20%3D%20transform1%3B%0A%20%20%20%20%20%20input.transformB%20%3D%20transform2%3B%0A%20%20%20%20%20%20input.useRadii%20%3D%20true%3B%0A%20%20%20%20%20%20var%20simplexCache%20%3D%20new%20b2SimplexCache()%3B%0A%20%20%20%20%20%20simplexCache.count%20%3D%200%3B%0A%20%20%20%20%20%20var%20output%20%3D%20new%20b2DistanceOutput()%3B%0A%20%20%20%20%20%20b2Distance.Distance(output%2C%20simplexCache%2C%20input)%3B%0A%20%20%20%20%20%20return%20output.distance%20%3C%2010.0%20*%20Number.MIN_VALUE%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Shape.prototype.b2Shape%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_type%20%3D%20b2Shape.e_unknownShape%3B%0A%20%20%20%20%20%20this.m_radius%20%3D%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_unknownShape%20%3D%20parseInt(-1)%3B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_circleShape%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_polygonShape%20%3D%201%3B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_edgeShape%20%3D%202%3B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_shapeTypeCount%20%3D%203%3B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_hitCollide%20%3D%201%3B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_missCollide%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Collision.Shapes.b2Shape.e_startsInsideCollide%20%3D%20parseInt(-1)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D)()%3B%0A%20%20(function%20()%20%7B%0A%20%20%20%20var%20b2Color%20%3D%20Box2D.Common.b2Color%2C%0A%20%20%20%20%20%20b2internal%20%3D%20Box2D.Common.b2internal%2C%0A%20%20%20%20%20%20b2Settings%20%3D%20Box2D.Common.b2Settings%2C%0A%20%20%20%20%20%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%2C%0A%20%20%20%20%20%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%2C%0A%20%20%20%20%20%20b2Math%20%3D%20Box2D.Common.Math.b2Math%2C%0A%20%20%20%20%20%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%2C%0A%20%20%20%20%20%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%2C%0A%20%20%20%20%20%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%2C%0A%20%20%20%20%20%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%3B%0A%0A%20%20%20%20b2Color.b2Color%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this._r%20%3D%200%3B%0A%20%20%20%20%20%20this._g%20%3D%200%3B%0A%20%20%20%20%20%20this._b%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Color.prototype.b2Color%20%3D%20function%20(rr%2C%20gg%2C%20bb)%20%7B%0A%20%20%20%20%20%20if%20(rr%20%3D%3D%3D%20undefined)%20rr%20%3D%200%3B%0A%20%20%20%20%20%20if%20(gg%20%3D%3D%3D%20undefined)%20gg%20%3D%200%3B%0A%20%20%20%20%20%20if%20(bb%20%3D%3D%3D%20undefined)%20bb%20%3D%200%3B%0A%20%20%20%20%20%20this._r%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(rr%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20this._g%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(gg%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20this._b%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(bb%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Color.prototype.Set%20%3D%20function%20(rr%2C%20gg%2C%20bb)%20%7B%0A%20%20%20%20%20%20if%20(rr%20%3D%3D%3D%20undefined)%20rr%20%3D%200%3B%0A%20%20%20%20%20%20if%20(gg%20%3D%3D%3D%20undefined)%20gg%20%3D%200%3B%0A%20%20%20%20%20%20if%20(bb%20%3D%3D%3D%20undefined)%20bb%20%3D%200%3B%0A%20%20%20%20%20%20this._r%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(rr%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20this._g%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(gg%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20this._b%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(bb%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Object.defineProperty(b2Color.prototype%2C%20%22r%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20set%3A%20function%20(rr)%20%7B%0A%20%20%20%20%20%20%20%20if%20(rr%20%3D%3D%3D%20undefined)%20rr%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._r%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(rr%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(b2Color.prototype%2C%20%22g%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20set%3A%20function%20(gg)%20%7B%0A%20%20%20%20%20%20%20%20if%20(gg%20%3D%3D%3D%20undefined)%20gg%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._g%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(gg%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(b2Color.prototype%2C%20%22b%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20set%3A%20function%20(bb)%20%7B%0A%20%20%20%20%20%20%20%20if%20(bb%20%3D%3D%3D%20undefined)%20bb%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this._b%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(bb%2C%200.0%2C%201.0))%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Object.defineProperty(b2Color.prototype%2C%20%22color%22%2C%20%7B%0A%20%20%20%20%20%20enumerable%3A%20false%2C%0A%20%20%20%20%20%20configurable%3A%20true%2C%0A%20%20%20%20%20%20get%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20return%20(this._r%20%3C%3C%2016)%20%7C%20(this._g%20%3C%3C%208)%20%7C%20this._b%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2Settings.b2Settings%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Settings.b2MixFriction%20%3D%20function%20(friction1%2C%20friction2)%20%7B%0A%20%20%20%20%20%20if%20(friction1%20%3D%3D%3D%20undefined)%20friction1%20%3D%200%3B%0A%20%20%20%20%20%20if%20(friction2%20%3D%3D%3D%20undefined)%20friction2%20%3D%200%3B%0A%20%20%20%20%20%20return%20Math.sqrt(friction1%20*%20friction2)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Settings.b2MixRestitution%20%3D%20function%20(restitution1%2C%20restitution2)%20%7B%0A%20%20%20%20%20%20if%20(restitution1%20%3D%3D%3D%20undefined)%20restitution1%20%3D%200%3B%0A%20%20%20%20%20%20if%20(restitution2%20%3D%3D%3D%20undefined)%20restitution2%20%3D%200%3B%0A%20%20%20%20%20%20return%20restitution1%20%3E%20restitution2%20%3F%20restitution1%20%3A%20restitution2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Settings.b2Assert%20%3D%20function%20(a)%20%7B%0A%20%20%20%20%20%20if%20(!a)%20%7B%0A%20%20%20%20%20%20%20%20throw%20%22Assertion%20Failed%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.VERSION%20%3D%20%222.1alpha%22%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.USHRT_MAX%20%3D%200x0000ffff%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_pi%20%3D%20Math.PI%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxManifoldPoints%20%3D%202%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_aabbExtension%20%3D%200.1%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_aabbMultiplier%20%3D%202.0%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_polygonRadius%20%3D%202.0%20*%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_linearSlop%20%3D%200.005%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_angularSlop%20%3D%20(2.0%20%2F%20180.0)%20*%20b2Settings.b2_pi%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_toiSlop%20%3D%208.0%20*%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxTOIContactsPerIsland%20%3D%2032%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxTOIJointsPerIsland%20%3D%2032%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_velocityThreshold%20%3D%201.0%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxLinearCorrection%20%3D%200.2%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxAngularCorrection%20%3D%0A%20%20%20%20%20%20%20%20(8.0%20%2F%20180.0)%20*%20b2Settings.b2_pi%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxTranslation%20%3D%202.0%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxTranslationSquared%20%3D%0A%20%20%20%20%20%20%20%20b2Settings.b2_maxTranslation%20*%20b2Settings.b2_maxTranslation%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxRotation%20%3D%200.5%20*%20b2Settings.b2_pi%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_maxRotationSquared%20%3D%0A%20%20%20%20%20%20%20%20b2Settings.b2_maxRotation%20*%20b2Settings.b2_maxRotation%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_contactBaumgarte%20%3D%200.2%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_timeToSleep%20%3D%200.5%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_linearSleepTolerance%20%3D%200.01%3B%0A%20%20%20%20%20%20Box2D.Common.b2Settings.b2_angularSleepTolerance%20%3D%0A%20%20%20%20%20%20%20%20(2.0%20%2F%20180.0)%20*%20b2Settings.b2_pi%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D)()%3B%0A%20%20(function%20()%20%7B%0A%20%20%20%20var%20b2AABB%20%3D%20Box2D.Collision.b2AABB%2C%0A%20%20%20%20%20%20b2Color%20%3D%20Box2D.Common.b2Color%2C%0A%20%20%20%20%20%20b2internal%20%3D%20Box2D.Common.b2internal%2C%0A%20%20%20%20%20%20b2Settings%20%3D%20Box2D.Common.b2Settings%2C%0A%20%20%20%20%20%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%2C%0A%20%20%20%20%20%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%2C%0A%20%20%20%20%20%20b2Math%20%3D%20Box2D.Common.Math.b2Math%2C%0A%20%20%20%20%20%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%2C%0A%20%20%20%20%20%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%2C%0A%20%20%20%20%20%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%2C%0A%20%20%20%20%20%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%3B%0A%0A%20%20%20%20b2Mat22.b2Mat22%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.col1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.col2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.b2Mat22%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.SetIdentity()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.FromAngle%20%3D%20function%20(angle)%20%7B%0A%20%20%20%20%20%20if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200%3B%0A%20%20%20%20%20%20var%20mat%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20mat.Set(angle)%3B%0A%20%20%20%20%20%20return%20mat%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.FromVV%20%3D%20function%20(c1%2C%20c2)%20%7B%0A%20%20%20%20%20%20var%20mat%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20mat.SetVV(c1%2C%20c2)%3B%0A%20%20%20%20%20%20return%20mat%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.Set%20%3D%20function%20(angle)%20%7B%0A%20%20%20%20%20%20if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200%3B%0A%20%20%20%20%20%20var%20c%20%3D%20Math.cos(angle)%3B%0A%20%20%20%20%20%20var%20s%20%3D%20Math.sin(angle)%3B%0A%20%20%20%20%20%20this.col1.x%20%3D%20c%3B%0A%20%20%20%20%20%20this.col2.x%20%3D%20-s%3B%0A%20%20%20%20%20%20this.col1.y%20%3D%20s%3B%0A%20%20%20%20%20%20this.col2.y%20%3D%20c%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.SetVV%20%3D%20function%20(c1%2C%20c2)%20%7B%0A%20%20%20%20%20%20this.col1.SetV(c1)%3B%0A%20%20%20%20%20%20this.col2.SetV(c2)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20mat%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20mat.SetM(this)%3B%0A%20%20%20%20%20%20return%20mat%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.SetM%20%3D%20function%20(m)%20%7B%0A%20%20%20%20%20%20this.col1.SetV(m.col1)%3B%0A%20%20%20%20%20%20this.col2.SetV(m.col2)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.AddM%20%3D%20function%20(m)%20%7B%0A%20%20%20%20%20%20this.col1.x%20%2B%3D%20m.col1.x%3B%0A%20%20%20%20%20%20this.col1.y%20%2B%3D%20m.col1.y%3B%0A%20%20%20%20%20%20this.col2.x%20%2B%3D%20m.col2.x%3B%0A%20%20%20%20%20%20this.col2.y%20%2B%3D%20m.col2.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.SetIdentity%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.col1.x%20%3D%201.0%3B%0A%20%20%20%20%20%20this.col2.x%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col1.y%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col2.y%20%3D%201.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.SetZero%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.col1.x%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col2.x%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col1.y%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col2.y%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.GetAngle%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20Math.atan2(this.col1.y%2C%20this.col1.x)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.GetInverse%20%3D%20function%20(out)%20%7B%0A%20%20%20%20%20%20var%20a%20%3D%20this.col1.x%3B%0A%20%20%20%20%20%20var%20b%20%3D%20this.col2.x%3B%0A%20%20%20%20%20%20var%20c%20%3D%20this.col1.y%3B%0A%20%20%20%20%20%20var%20d%20%3D%20this.col2.y%3B%0A%20%20%20%20%20%20var%20det%20%3D%20a%20*%20d%20-%20b%20*%20c%3B%0A%20%20%20%20%20%20if%20(det%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20det%20%3D%201.0%20%2F%20det%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20out.col1.x%20%3D%20det%20*%20d%3B%0A%20%20%20%20%20%20out.col2.x%20%3D%20-det%20*%20b%3B%0A%20%20%20%20%20%20out.col1.y%20%3D%20-det%20*%20c%3B%0A%20%20%20%20%20%20out.col2.y%20%3D%20det%20*%20a%3B%0A%20%20%20%20%20%20return%20out%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.Solve%20%3D%20function%20(out%2C%20bX%2C%20bY)%20%7B%0A%20%20%20%20%20%20if%20(bX%20%3D%3D%3D%20undefined)%20bX%20%3D%200%3B%0A%20%20%20%20%20%20if%20(bY%20%3D%3D%3D%20undefined)%20bY%20%3D%200%3B%0A%20%20%20%20%20%20var%20a11%20%3D%20this.col1.x%3B%0A%20%20%20%20%20%20var%20a12%20%3D%20this.col2.x%3B%0A%20%20%20%20%20%20var%20a21%20%3D%20this.col1.y%3B%0A%20%20%20%20%20%20var%20a22%20%3D%20this.col2.y%3B%0A%20%20%20%20%20%20var%20det%20%3D%20a11%20*%20a22%20-%20a12%20*%20a21%3B%0A%20%20%20%20%20%20if%20(det%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20det%20%3D%201.0%20%2F%20det%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20out.x%20%3D%20det%20*%20(a22%20*%20bX%20-%20a12%20*%20bY)%3B%0A%20%20%20%20%20%20out.y%20%3D%20det%20*%20(a11%20*%20bY%20-%20a21%20*%20bX)%3B%0A%20%20%20%20%20%20return%20out%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat22.prototype.Abs%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.col1.Abs()%3B%0A%20%20%20%20%20%20this.col2.Abs()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat33.b2Mat33%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.col1%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20this.col2%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20this.col3%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat33.prototype.b2Mat33%20%3D%20function%20(c1%2C%20c2%2C%20c3)%20%7B%0A%20%20%20%20%20%20if%20(c1%20%3D%3D%3D%20undefined)%20c1%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(c2%20%3D%3D%3D%20undefined)%20c2%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(c3%20%3D%3D%3D%20undefined)%20c3%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(!c1%20%26%26%20!c2%20%26%26%20!c3)%20%7B%0A%20%20%20%20%20%20%20%20this.col1.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.col2.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.col3.SetZero()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.col1.SetV(c1)%3B%0A%20%20%20%20%20%20%20%20this.col2.SetV(c2)%3B%0A%20%20%20%20%20%20%20%20this.col3.SetV(c3)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat33.prototype.SetVVV%20%3D%20function%20(c1%2C%20c2%2C%20c3)%20%7B%0A%20%20%20%20%20%20this.col1.SetV(c1)%3B%0A%20%20%20%20%20%20this.col2.SetV(c2)%3B%0A%20%20%20%20%20%20this.col3.SetV(c3)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat33.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20new%20b2Mat33(this.col1%2C%20this.col2%2C%20this.col3)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat33.prototype.SetM%20%3D%20function%20(m)%20%7B%0A%20%20%20%20%20%20this.col1.SetV(m.col1)%3B%0A%20%20%20%20%20%20this.col2.SetV(m.col2)%3B%0A%20%20%20%20%20%20this.col3.SetV(m.col3)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat33.prototype.AddM%20%3D%20function%20(m)%20%7B%0A%20%20%20%20%20%20this.col1.x%20%2B%3D%20m.col1.x%3B%0A%20%20%20%20%20%20this.col1.y%20%2B%3D%20m.col1.y%3B%0A%20%20%20%20%20%20this.col1.z%20%2B%3D%20m.col1.z%3B%0A%20%20%20%20%20%20this.col2.x%20%2B%3D%20m.col2.x%3B%0A%20%20%20%20%20%20this.col2.y%20%2B%3D%20m.col2.y%3B%0A%20%20%20%20%20%20this.col2.z%20%2B%3D%20m.col2.z%3B%0A%20%20%20%20%20%20this.col3.x%20%2B%3D%20m.col3.x%3B%0A%20%20%20%20%20%20this.col3.y%20%2B%3D%20m.col3.y%3B%0A%20%20%20%20%20%20this.col3.z%20%2B%3D%20m.col3.z%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat33.prototype.SetIdentity%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.col1.x%20%3D%201.0%3B%0A%20%20%20%20%20%20this.col2.x%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col3.x%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col1.y%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col2.y%20%3D%201.0%3B%0A%20%20%20%20%20%20this.col3.y%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col1.z%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col2.z%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col3.z%20%3D%201.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat33.prototype.SetZero%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.col1.x%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col2.x%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col3.x%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col1.y%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col2.y%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col3.y%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col1.z%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col2.z%20%3D%200.0%3B%0A%20%20%20%20%20%20this.col3.z%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat33.prototype.Solve22%20%3D%20function%20(out%2C%20bX%2C%20bY)%20%7B%0A%20%20%20%20%20%20if%20(bX%20%3D%3D%3D%20undefined)%20bX%20%3D%200%3B%0A%20%20%20%20%20%20if%20(bY%20%3D%3D%3D%20undefined)%20bY%20%3D%200%3B%0A%20%20%20%20%20%20var%20a11%20%3D%20this.col1.x%3B%0A%20%20%20%20%20%20var%20a12%20%3D%20this.col2.x%3B%0A%20%20%20%20%20%20var%20a21%20%3D%20this.col1.y%3B%0A%20%20%20%20%20%20var%20a22%20%3D%20this.col2.y%3B%0A%20%20%20%20%20%20var%20det%20%3D%20a11%20*%20a22%20-%20a12%20*%20a21%3B%0A%20%20%20%20%20%20if%20(det%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20det%20%3D%201.0%20%2F%20det%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20out.x%20%3D%20det%20*%20(a22%20*%20bX%20-%20a12%20*%20bY)%3B%0A%20%20%20%20%20%20out.y%20%3D%20det%20*%20(a11%20*%20bY%20-%20a21%20*%20bX)%3B%0A%20%20%20%20%20%20return%20out%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Mat33.prototype.Solve33%20%3D%20function%20(out%2C%20bX%2C%20bY%2C%20bZ)%20%7B%0A%20%20%20%20%20%20if%20(bX%20%3D%3D%3D%20undefined)%20bX%20%3D%200%3B%0A%20%20%20%20%20%20if%20(bY%20%3D%3D%3D%20undefined)%20bY%20%3D%200%3B%0A%20%20%20%20%20%20if%20(bZ%20%3D%3D%3D%20undefined)%20bZ%20%3D%200%3B%0A%20%20%20%20%20%20var%20a11%20%3D%20this.col1.x%3B%0A%20%20%20%20%20%20var%20a21%20%3D%20this.col1.y%3B%0A%20%20%20%20%20%20var%20a31%20%3D%20this.col1.z%3B%0A%20%20%20%20%20%20var%20a12%20%3D%20this.col2.x%3B%0A%20%20%20%20%20%20var%20a22%20%3D%20this.col2.y%3B%0A%20%20%20%20%20%20var%20a32%20%3D%20this.col2.z%3B%0A%20%20%20%20%20%20var%20a13%20%3D%20this.col3.x%3B%0A%20%20%20%20%20%20var%20a23%20%3D%20this.col3.y%3B%0A%20%20%20%20%20%20var%20a33%20%3D%20this.col3.z%3B%0A%20%20%20%20%20%20var%20det%20%3D%0A%20%20%20%20%20%20%20%20a11%20*%20(a22%20*%20a33%20-%20a32%20*%20a23)%20%2B%0A%20%20%20%20%20%20%20%20a21%20*%20(a32%20*%20a13%20-%20a12%20*%20a33)%20%2B%0A%20%20%20%20%20%20%20%20a31%20*%20(a12%20*%20a23%20-%20a22%20*%20a13)%3B%0A%20%20%20%20%20%20if%20(det%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20det%20%3D%201.0%20%2F%20det%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20out.x%20%3D%0A%20%20%20%20%20%20%20%20det%20*%0A%20%20%20%20%20%20%20%20(bX%20*%20(a22%20*%20a33%20-%20a32%20*%20a23)%20%2B%0A%20%20%20%20%20%20%20%20%20%20bY%20*%20(a32%20*%20a13%20-%20a12%20*%20a33)%20%2B%0A%20%20%20%20%20%20%20%20%20%20bZ%20*%20(a12%20*%20a23%20-%20a22%20*%20a13))%3B%0A%20%20%20%20%20%20out.y%20%3D%0A%20%20%20%20%20%20%20%20det%20*%0A%20%20%20%20%20%20%20%20(a11%20*%20(bY%20*%20a33%20-%20bZ%20*%20a23)%20%2B%0A%20%20%20%20%20%20%20%20%20%20a21%20*%20(bZ%20*%20a13%20-%20bX%20*%20a33)%20%2B%0A%20%20%20%20%20%20%20%20%20%20a31%20*%20(bX%20*%20a23%20-%20bY%20*%20a13))%3B%0A%20%20%20%20%20%20out.z%20%3D%0A%20%20%20%20%20%20%20%20det%20*%0A%20%20%20%20%20%20%20%20(a11%20*%20(a22%20*%20bZ%20-%20a32%20*%20bY)%20%2B%0A%20%20%20%20%20%20%20%20%20%20a21%20*%20(a32%20*%20bX%20-%20a12%20*%20bZ)%20%2B%0A%20%20%20%20%20%20%20%20%20%20a31%20*%20(a12%20*%20bY%20-%20a22%20*%20bX))%3B%0A%20%20%20%20%20%20return%20out%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.b2Math%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Math.IsValid%20%3D%20function%20(x)%20%7B%0A%20%20%20%20%20%20if%20(x%20%3D%3D%3D%20undefined)%20x%20%3D%200%3B%0A%20%20%20%20%20%20return%20isFinite(x)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Dot%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20return%20a.x%20*%20b.x%20%2B%20a.y%20*%20b.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.CrossVV%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20return%20a.x%20*%20b.y%20-%20a.y%20*%20b.x%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.CrossVF%20%3D%20function%20(a%2C%20s)%20%7B%0A%20%20%20%20%20%20if%20(s%20%3D%3D%3D%20undefined)%20s%20%3D%200%3B%0A%20%20%20%20%20%20var%20v%20%3D%20new%20b2Vec2(s%20*%20a.y%2C%20-s%20*%20a.x)%3B%0A%20%20%20%20%20%20return%20v%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.CrossFV%20%3D%20function%20(s%2C%20a)%20%7B%0A%20%20%20%20%20%20if%20(s%20%3D%3D%3D%20undefined)%20s%20%3D%200%3B%0A%20%20%20%20%20%20var%20v%20%3D%20new%20b2Vec2(-s%20*%20a.y%2C%20s%20*%20a.x)%3B%0A%20%20%20%20%20%20return%20v%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MulMV%20%3D%20function%20(A%2C%20v)%20%7B%0A%20%20%20%20%20%20var%20u%20%3D%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20A.col1.x%20*%20v.x%20%2B%20A.col2.x%20*%20v.y%2C%0A%20%20%20%20%20%20%20%20A.col1.y%20*%20v.x%20%2B%20A.col2.y%20*%20v.y%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20return%20u%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MulTMV%20%3D%20function%20(A%2C%20v)%20%7B%0A%20%20%20%20%20%20var%20u%20%3D%20new%20b2Vec2(b2Math.Dot(v%2C%20A.col1)%2C%20b2Math.Dot(v%2C%20A.col2))%3B%0A%20%20%20%20%20%20return%20u%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MulX%20%3D%20function%20(T%2C%20v)%20%7B%0A%20%20%20%20%20%20var%20a%20%3D%20b2Math.MulMV(T.R%2C%20v)%3B%0A%20%20%20%20%20%20a.x%20%2B%3D%20T.position.x%3B%0A%20%20%20%20%20%20a.y%20%2B%3D%20T.position.y%3B%0A%20%20%20%20%20%20return%20a%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MulXT%20%3D%20function%20(T%2C%20v)%20%7B%0A%20%20%20%20%20%20var%20a%20%3D%20b2Math.SubtractVV(v%2C%20T.position)%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20a.x%20*%20T.R.col1.x%20%2B%20a.y%20*%20T.R.col1.y%3B%0A%20%20%20%20%20%20a.y%20%3D%20a.x%20*%20T.R.col2.x%20%2B%20a.y%20*%20T.R.col2.y%3B%0A%20%20%20%20%20%20a.x%20%3D%20tX%3B%0A%20%20%20%20%20%20return%20a%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.AddVV%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20var%20v%20%3D%20new%20b2Vec2(a.x%20%2B%20b.x%2C%20a.y%20%2B%20b.y)%3B%0A%20%20%20%20%20%20return%20v%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.SubtractVV%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20var%20v%20%3D%20new%20b2Vec2(a.x%20-%20b.x%2C%20a.y%20-%20b.y)%3B%0A%20%20%20%20%20%20return%20v%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Distance%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20var%20cX%20%3D%20a.x%20-%20b.x%3B%0A%20%20%20%20%20%20var%20cY%20%3D%20a.y%20-%20b.y%3B%0A%20%20%20%20%20%20return%20Math.sqrt(cX%20*%20cX%20%2B%20cY%20*%20cY)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.DistanceSquared%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20var%20cX%20%3D%20a.x%20-%20b.x%3B%0A%20%20%20%20%20%20var%20cY%20%3D%20a.y%20-%20b.y%3B%0A%20%20%20%20%20%20return%20cX%20*%20cX%20%2B%20cY%20*%20cY%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MulFV%20%3D%20function%20(s%2C%20a)%20%7B%0A%20%20%20%20%20%20if%20(s%20%3D%3D%3D%20undefined)%20s%20%3D%200%3B%0A%20%20%20%20%20%20var%20v%20%3D%20new%20b2Vec2(s%20*%20a.x%2C%20s%20*%20a.y)%3B%0A%20%20%20%20%20%20return%20v%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.AddMM%20%3D%20function%20(A%2C%20B)%20%7B%0A%20%20%20%20%20%20var%20C%20%3D%20b2Mat22.FromVV(%0A%20%20%20%20%20%20%20%20b2Math.AddVV(A.col1%2C%20B.col1)%2C%0A%20%20%20%20%20%20%20%20b2Math.AddVV(A.col2%2C%20B.col2)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20return%20C%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MulMM%20%3D%20function%20(A%2C%20B)%20%7B%0A%20%20%20%20%20%20var%20C%20%3D%20b2Mat22.FromVV(b2Math.MulMV(A%2C%20B.col1)%2C%20b2Math.MulMV(A%2C%20B.col2))%3B%0A%20%20%20%20%20%20return%20C%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MulTMM%20%3D%20function%20(A%2C%20B)%20%7B%0A%20%20%20%20%20%20var%20c1%20%3D%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20b2Math.Dot(A.col1%2C%20B.col1)%2C%0A%20%20%20%20%20%20%20%20b2Math.Dot(A.col2%2C%20B.col1)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20c2%20%3D%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20b2Math.Dot(A.col1%2C%20B.col2)%2C%0A%20%20%20%20%20%20%20%20b2Math.Dot(A.col2%2C%20B.col2)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20C%20%3D%20b2Mat22.FromVV(c1%2C%20c2)%3B%0A%20%20%20%20%20%20return%20C%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Abs%20%3D%20function%20(a)%20%7B%0A%20%20%20%20%20%20if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%20%20%20%20%20%20return%20a%20%3E%200.0%20%3F%20a%20%3A%20-a%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.AbsV%20%3D%20function%20(a)%20%7B%0A%20%20%20%20%20%20var%20b%20%3D%20new%20b2Vec2(b2Math.Abs(a.x)%2C%20b2Math.Abs(a.y))%3B%0A%20%20%20%20%20%20return%20b%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.AbsM%20%3D%20function%20(A)%20%7B%0A%20%20%20%20%20%20var%20B%20%3D%20b2Mat22.FromVV(b2Math.AbsV(A.col1)%2C%20b2Math.AbsV(A.col2))%3B%0A%20%20%20%20%20%20return%20B%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Min%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%20%20%20%20%20%20if%20(b%20%3D%3D%3D%20undefined)%20b%20%3D%200%3B%0A%20%20%20%20%20%20return%20a%20%3C%20b%20%3F%20a%20%3A%20b%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MinV%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20var%20c%20%3D%20new%20b2Vec2(b2Math.Min(a.x%2C%20b.x)%2C%20b2Math.Min(a.y%2C%20b.y))%3B%0A%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Max%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%20%20%20%20%20%20if%20(b%20%3D%3D%3D%20undefined)%20b%20%3D%200%3B%0A%20%20%20%20%20%20return%20a%20%3E%20b%20%3F%20a%20%3A%20b%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.MaxV%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20var%20c%20%3D%20new%20b2Vec2(b2Math.Max(a.x%2C%20b.x)%2C%20b2Math.Max(a.y%2C%20b.y))%3B%0A%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Clamp%20%3D%20function%20(a%2C%20low%2C%20high)%20%7B%0A%20%20%20%20%20%20if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%20%20%20%20%20%20if%20(low%20%3D%3D%3D%20undefined)%20low%20%3D%200%3B%0A%20%20%20%20%20%20if%20(high%20%3D%3D%3D%20undefined)%20high%20%3D%200%3B%0A%20%20%20%20%20%20return%20a%20%3C%20low%20%3F%20low%20%3A%20a%20%3E%20high%20%3F%20high%20%3A%20a%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.ClampV%20%3D%20function%20(a%2C%20low%2C%20high)%20%7B%0A%20%20%20%20%20%20return%20b2Math.MaxV(low%2C%20b2Math.MinV(a%2C%20high))%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Swap%20%3D%20function%20(a%2C%20b)%20%7B%0A%20%20%20%20%20%20var%20tmp%20%3D%20a%5B0%5D%3B%0A%20%20%20%20%20%20a%5B0%5D%20%3D%20b%5B0%5D%3B%0A%20%20%20%20%20%20b%5B0%5D%20%3D%20tmp%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.Random%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20Math.random()%20*%202%20-%201%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.RandomRange%20%3D%20function%20(lo%2C%20hi)%20%7B%0A%20%20%20%20%20%20if%20(lo%20%3D%3D%3D%20undefined)%20lo%20%3D%200%3B%0A%20%20%20%20%20%20if%20(hi%20%3D%3D%3D%20undefined)%20hi%20%3D%200%3B%0A%20%20%20%20%20%20var%20r%20%3D%20Math.random()%3B%0A%20%20%20%20%20%20r%20%3D%20(hi%20-%20lo)%20*%20r%20%2B%20lo%3B%0A%20%20%20%20%20%20return%20r%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.NextPowerOfTwo%20%3D%20function%20(x)%20%7B%0A%20%20%20%20%20%20if%20(x%20%3D%3D%3D%20undefined)%20x%20%3D%200%3B%0A%20%20%20%20%20%20x%20%7C%3D%20(x%20%3E%3E%201)%20%26%200x7fffffff%3B%0A%20%20%20%20%20%20x%20%7C%3D%20(x%20%3E%3E%202)%20%26%200x3fffffff%3B%0A%20%20%20%20%20%20x%20%7C%3D%20(x%20%3E%3E%204)%20%26%200x0fffffff%3B%0A%20%20%20%20%20%20x%20%7C%3D%20(x%20%3E%3E%208)%20%26%200x00ffffff%3B%0A%20%20%20%20%20%20x%20%7C%3D%20(x%20%3E%3E%2016)%20%26%200x0000ffff%3B%0A%20%20%20%20%20%20return%20x%20%2B%201%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Math.IsPowerOfTwo%20%3D%20function%20(x)%20%7B%0A%20%20%20%20%20%20if%20(x%20%3D%3D%3D%20undefined)%20x%20%3D%200%3B%0A%20%20%20%20%20%20var%20result%20%3D%20x%20%3E%200%20%26%26%20(x%20%26%20(x%20-%201))%20%3D%3D%200%3B%0A%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Common.Math.b2Math.b2Vec2_zero%20%3D%20new%20b2Vec2(0.0%2C%200.0)%3B%0A%20%20%20%20%20%20Box2D.Common.Math.b2Math.b2Mat22_identity%20%3D%20b2Mat22.FromVV(%0A%20%20%20%20%20%20%20%20new%20b2Vec2(1.0%2C%200.0)%2C%0A%20%20%20%20%20%20%20%20new%20b2Vec2(0.0%2C%201.0)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20Box2D.Common.Math.b2Math.b2Transform_identity%20%3D%20new%20b2Transform(%0A%20%20%20%20%20%20%20%20b2Math.b2Vec2_zero%2C%0A%20%20%20%20%20%20%20%20b2Math.b2Mat22_identity%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2Sweep.b2Sweep%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.localCenter%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.c0%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.c%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Sweep.prototype.Set%20%3D%20function%20(other)%20%7B%0A%20%20%20%20%20%20this.localCenter.SetV(other.localCenter)%3B%0A%20%20%20%20%20%20this.c0.SetV(other.c0)%3B%0A%20%20%20%20%20%20this.c.SetV(other.c)%3B%0A%20%20%20%20%20%20this.a0%20%3D%20other.a0%3B%0A%20%20%20%20%20%20this.a%20%3D%20other.a%3B%0A%20%20%20%20%20%20this.t0%20%3D%20other.t0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Sweep.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20copy%20%3D%20new%20b2Sweep()%3B%0A%20%20%20%20%20%20copy.localCenter.SetV(this.localCenter)%3B%0A%20%20%20%20%20%20copy.c0.SetV(this.c0)%3B%0A%20%20%20%20%20%20copy.c.SetV(this.c)%3B%0A%20%20%20%20%20%20copy.a0%20%3D%20this.a0%3B%0A%20%20%20%20%20%20copy.a%20%3D%20this.a%3B%0A%20%20%20%20%20%20copy.t0%20%3D%20this.t0%3B%0A%20%20%20%20%20%20return%20copy%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Sweep.prototype.GetTransform%20%3D%20function%20(xf%2C%20alpha)%20%7B%0A%20%20%20%20%20%20if%20(alpha%20%3D%3D%3D%20undefined)%20alpha%20%3D%200%3B%0A%20%20%20%20%20%20xf.position.x%20%3D%20(1.0%20-%20alpha)%20*%20this.c0.x%20%2B%20alpha%20*%20this.c.x%3B%0A%20%20%20%20%20%20xf.position.y%20%3D%20(1.0%20-%20alpha)%20*%20this.c0.y%20%2B%20alpha%20*%20this.c.y%3B%0A%20%20%20%20%20%20var%20angle%20%3D%20(1.0%20-%20alpha)%20*%20this.a0%20%2B%20alpha%20*%20this.a%3B%0A%20%20%20%20%20%20xf.R.Set(angle)%3B%0A%20%20%20%20%20%20var%20tMat%20%3D%20xf.R%3B%0A%20%20%20%20%20%20xf.position.x%20-%3D%0A%20%20%20%20%20%20%20%20tMat.col1.x%20*%20this.localCenter.x%20%2B%20tMat.col2.x%20*%20this.localCenter.y%3B%0A%20%20%20%20%20%20xf.position.y%20-%3D%0A%20%20%20%20%20%20%20%20tMat.col1.y%20*%20this.localCenter.x%20%2B%20tMat.col2.y%20*%20this.localCenter.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Sweep.prototype.Advance%20%3D%20function%20(t)%20%7B%0A%20%20%20%20%20%20if%20(t%20%3D%3D%3D%20undefined)%20t%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.t0%20%3C%20t%20%26%26%201.0%20-%20this.t0%20%3E%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20var%20alpha%20%3D%20(t%20-%20this.t0)%20%2F%20(1.0%20-%20this.t0)%3B%0A%20%20%20%20%20%20%20%20this.c0.x%20%3D%20(1.0%20-%20alpha)%20*%20this.c0.x%20%2B%20alpha%20*%20this.c.x%3B%0A%20%20%20%20%20%20%20%20this.c0.y%20%3D%20(1.0%20-%20alpha)%20*%20this.c0.y%20%2B%20alpha%20*%20this.c.y%3B%0A%20%20%20%20%20%20%20%20this.a0%20%3D%20(1.0%20-%20alpha)%20*%20this.a0%20%2B%20alpha%20*%20this.a%3B%0A%20%20%20%20%20%20%20%20this.t0%20%3D%20t%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Transform.b2Transform%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.position%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.R%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Transform.prototype.b2Transform%20%3D%20function%20(pos%2C%20r)%20%7B%0A%20%20%20%20%20%20if%20(pos%20%3D%3D%3D%20undefined)%20pos%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(r%20%3D%3D%3D%20undefined)%20r%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(pos)%20%7B%0A%20%20%20%20%20%20%20%20this.position.SetV(pos)%3B%0A%20%20%20%20%20%20%20%20this.R.SetM(r)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Transform.prototype.Initialize%20%3D%20function%20(pos%2C%20r)%20%7B%0A%20%20%20%20%20%20this.position.SetV(pos)%3B%0A%20%20%20%20%20%20this.R.SetM(r)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Transform.prototype.SetIdentity%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.position.SetZero()%3B%0A%20%20%20%20%20%20this.R.SetIdentity()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Transform.prototype.Set%20%3D%20function%20(x)%20%7B%0A%20%20%20%20%20%20this.position.SetV(x.position)%3B%0A%20%20%20%20%20%20this.R.SetM(x.R)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Transform.prototype.GetAngle%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20Math.atan2(this.R.col1.y%2C%20this.R.col1.x)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.b2Vec2%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Vec2.prototype.b2Vec2%20%3D%20function%20(x_%2C%20y_)%20%7B%0A%20%20%20%20%20%20if%20(x_%20%3D%3D%3D%20undefined)%20x_%20%3D%200%3B%0A%20%20%20%20%20%20if%20(y_%20%3D%3D%3D%20undefined)%20y_%20%3D%200%3B%0A%20%20%20%20%20%20this.x%20%3D%20x_%3B%0A%20%20%20%20%20%20this.y%20%3D%20y_%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.SetZero%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.x%20%3D%200.0%3B%0A%20%20%20%20%20%20this.y%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.Set%20%3D%20function%20(x_%2C%20y_)%20%7B%0A%20%20%20%20%20%20if%20(x_%20%3D%3D%3D%20undefined)%20x_%20%3D%200%3B%0A%20%20%20%20%20%20if%20(y_%20%3D%3D%3D%20undefined)%20y_%20%3D%200%3B%0A%20%20%20%20%20%20this.x%20%3D%20x_%3B%0A%20%20%20%20%20%20this.y%20%3D%20y_%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.SetV%20%3D%20function%20(v)%20%7B%0A%20%20%20%20%20%20this.x%20%3D%20v.x%3B%0A%20%20%20%20%20%20this.y%20%3D%20v.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.GetNegative%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20new%20b2Vec2(-this.x%2C%20-this.y)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.NegativeSelf%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.x%20%3D%20-this.x%3B%0A%20%20%20%20%20%20this.y%20%3D%20-this.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.Make%20%3D%20function%20(x_%2C%20y_)%20%7B%0A%20%20%20%20%20%20if%20(x_%20%3D%3D%3D%20undefined)%20x_%20%3D%200%3B%0A%20%20%20%20%20%20if%20(y_%20%3D%3D%3D%20undefined)%20y_%20%3D%200%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(x_%2C%20y_)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20new%20b2Vec2(this.x%2C%20this.y)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.Add%20%3D%20function%20(v)%20%7B%0A%20%20%20%20%20%20this.x%20%2B%3D%20v.x%3B%0A%20%20%20%20%20%20this.y%20%2B%3D%20v.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.Subtract%20%3D%20function%20(v)%20%7B%0A%20%20%20%20%20%20this.x%20-%3D%20v.x%3B%0A%20%20%20%20%20%20this.y%20-%3D%20v.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.Multiply%20%3D%20function%20(a)%20%7B%0A%20%20%20%20%20%20if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%20%20%20%20%20%20this.x%20*%3D%20a%3B%0A%20%20%20%20%20%20this.y%20*%3D%20a%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.MulM%20%3D%20function%20(A)%20%7B%0A%20%20%20%20%20%20var%20tX%20%3D%20this.x%3B%0A%20%20%20%20%20%20this.x%20%3D%20A.col1.x%20*%20tX%20%2B%20A.col2.x%20*%20this.y%3B%0A%20%20%20%20%20%20this.y%20%3D%20A.col1.y%20*%20tX%20%2B%20A.col2.y%20*%20this.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.MulTM%20%3D%20function%20(A)%20%7B%0A%20%20%20%20%20%20var%20tX%20%3D%20b2Math.Dot(this%2C%20A.col1)%3B%0A%20%20%20%20%20%20this.y%20%3D%20b2Math.Dot(this%2C%20A.col2)%3B%0A%20%20%20%20%20%20this.x%20%3D%20tX%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.CrossVF%20%3D%20function%20(s)%20%7B%0A%20%20%20%20%20%20if%20(s%20%3D%3D%3D%20undefined)%20s%20%3D%200%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20this.x%3B%0A%20%20%20%20%20%20this.x%20%3D%20s%20*%20this.y%3B%0A%20%20%20%20%20%20this.y%20%3D%20-s%20*%20tX%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.CrossFV%20%3D%20function%20(s)%20%7B%0A%20%20%20%20%20%20if%20(s%20%3D%3D%3D%20undefined)%20s%20%3D%200%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20this.x%3B%0A%20%20%20%20%20%20this.x%20%3D%20-s%20*%20this.y%3B%0A%20%20%20%20%20%20this.y%20%3D%20s%20*%20tX%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.MinV%20%3D%20function%20(b)%20%7B%0A%20%20%20%20%20%20this.x%20%3D%20this.x%20%3C%20b.x%20%3F%20this.x%20%3A%20b.x%3B%0A%20%20%20%20%20%20this.y%20%3D%20this.y%20%3C%20b.y%20%3F%20this.y%20%3A%20b.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.MaxV%20%3D%20function%20(b)%20%7B%0A%20%20%20%20%20%20this.x%20%3D%20this.x%20%3E%20b.x%20%3F%20this.x%20%3A%20b.x%3B%0A%20%20%20%20%20%20this.y%20%3D%20this.y%20%3E%20b.y%20%3F%20this.y%20%3A%20b.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.Abs%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20if%20(this.x%20%3C%200)%20this.x%20%3D%20-this.x%3B%0A%20%20%20%20%20%20if%20(this.y%20%3C%200)%20this.y%20%3D%20-this.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.Length%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20Math.sqrt(this.x%20*%20this.x%20%2B%20this.y%20*%20this.y)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.LengthSquared%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.x%20*%20this.x%20%2B%20this.y%20*%20this.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.Normalize%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20length%20%3D%20Math.sqrt(this.x%20*%20this.x%20%2B%20this.y%20*%20this.y)%3B%0A%20%20%20%20%20%20if%20(length%20%3C%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20invLength%20%3D%201.0%20%2F%20length%3B%0A%20%20%20%20%20%20this.x%20*%3D%20invLength%3B%0A%20%20%20%20%20%20this.y%20*%3D%20invLength%3B%0A%20%20%20%20%20%20return%20length%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec2.prototype.IsValid%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20b2Math.IsValid(this.x)%20%26%26%20b2Math.IsValid(this.y)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec3.b2Vec3%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Vec3.prototype.b2Vec3%20%3D%20function%20(x%2C%20y%2C%20z)%20%7B%0A%20%20%20%20%20%20if%20(x%20%3D%3D%3D%20undefined)%20x%20%3D%200%3B%0A%20%20%20%20%20%20if%20(y%20%3D%3D%3D%20undefined)%20y%20%3D%200%3B%0A%20%20%20%20%20%20if%20(z%20%3D%3D%3D%20undefined)%20z%20%3D%200%3B%0A%20%20%20%20%20%20this.x%20%3D%20x%3B%0A%20%20%20%20%20%20this.y%20%3D%20y%3B%0A%20%20%20%20%20%20this.z%20%3D%20z%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec3.prototype.SetZero%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.x%20%3D%20this.y%20%3D%20this.z%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec3.prototype.Set%20%3D%20function%20(x%2C%20y%2C%20z)%20%7B%0A%20%20%20%20%20%20if%20(x%20%3D%3D%3D%20undefined)%20x%20%3D%200%3B%0A%20%20%20%20%20%20if%20(y%20%3D%3D%3D%20undefined)%20y%20%3D%200%3B%0A%20%20%20%20%20%20if%20(z%20%3D%3D%3D%20undefined)%20z%20%3D%200%3B%0A%20%20%20%20%20%20this.x%20%3D%20x%3B%0A%20%20%20%20%20%20this.y%20%3D%20y%3B%0A%20%20%20%20%20%20this.z%20%3D%20z%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec3.prototype.SetV%20%3D%20function%20(v)%20%7B%0A%20%20%20%20%20%20this.x%20%3D%20v.x%3B%0A%20%20%20%20%20%20this.y%20%3D%20v.y%3B%0A%20%20%20%20%20%20this.z%20%3D%20v.z%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec3.prototype.GetNegative%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20new%20b2Vec3(-this.x%2C%20-this.y%2C%20-this.z)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec3.prototype.NegativeSelf%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.x%20%3D%20-this.x%3B%0A%20%20%20%20%20%20this.y%20%3D%20-this.y%3B%0A%20%20%20%20%20%20this.z%20%3D%20-this.z%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec3.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20new%20b2Vec3(this.x%2C%20this.y%2C%20this.z)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec3.prototype.Add%20%3D%20function%20(v)%20%7B%0A%20%20%20%20%20%20this.x%20%2B%3D%20v.x%3B%0A%20%20%20%20%20%20this.y%20%2B%3D%20v.y%3B%0A%20%20%20%20%20%20this.z%20%2B%3D%20v.z%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec3.prototype.Subtract%20%3D%20function%20(v)%20%7B%0A%20%20%20%20%20%20this.x%20-%3D%20v.x%3B%0A%20%20%20%20%20%20this.y%20-%3D%20v.y%3B%0A%20%20%20%20%20%20this.z%20-%3D%20v.z%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Vec3.prototype.Multiply%20%3D%20function%20(a)%20%7B%0A%20%20%20%20%20%20if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%20%20%20%20%20%20this.x%20*%3D%20a%3B%0A%20%20%20%20%20%20this.y%20*%3D%20a%3B%0A%20%20%20%20%20%20this.z%20*%3D%20a%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D)()%3B%0A%20%20(function%20()%20%7B%0A%20%20%20%20var%20b2ControllerEdge%20%3D%20Box2D.Dynamics.Controllers.b2ControllerEdge%2C%0A%20%20%20%20%20%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%2C%0A%20%20%20%20%20%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%2C%0A%20%20%20%20%20%20b2Math%20%3D%20Box2D.Common.Math.b2Math%2C%0A%20%20%20%20%20%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%2C%0A%20%20%20%20%20%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%2C%0A%20%20%20%20%20%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%2C%0A%20%20%20%20%20%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%2C%0A%20%20%20%20%20%20b2Color%20%3D%20Box2D.Common.b2Color%2C%0A%20%20%20%20%20%20b2internal%20%3D%20Box2D.Common.b2internal%2C%0A%20%20%20%20%20%20b2Settings%20%3D%20Box2D.Common.b2Settings%2C%0A%20%20%20%20%20%20b2AABB%20%3D%20Box2D.Collision.b2AABB%2C%0A%20%20%20%20%20%20b2Bound%20%3D%20Box2D.Collision.b2Bound%2C%0A%20%20%20%20%20%20b2BoundValues%20%3D%20Box2D.Collision.b2BoundValues%2C%0A%20%20%20%20%20%20b2Collision%20%3D%20Box2D.Collision.b2Collision%2C%0A%20%20%20%20%20%20b2ContactID%20%3D%20Box2D.Collision.b2ContactID%2C%0A%20%20%20%20%20%20b2ContactPoint%20%3D%20Box2D.Collision.b2ContactPoint%2C%0A%20%20%20%20%20%20b2Distance%20%3D%20Box2D.Collision.b2Distance%2C%0A%20%20%20%20%20%20b2DistanceInput%20%3D%20Box2D.Collision.b2DistanceInput%2C%0A%20%20%20%20%20%20b2DistanceOutput%20%3D%20Box2D.Collision.b2DistanceOutput%2C%0A%20%20%20%20%20%20b2DistanceProxy%20%3D%20Box2D.Collision.b2DistanceProxy%2C%0A%20%20%20%20%20%20b2DynamicTree%20%3D%20Box2D.Collision.b2DynamicTree%2C%0A%20%20%20%20%20%20b2DynamicTreeBroadPhase%20%3D%20Box2D.Collision.b2DynamicTreeBroadPhase%2C%0A%20%20%20%20%20%20b2DynamicTreeNode%20%3D%20Box2D.Collision.b2DynamicTreeNode%2C%0A%20%20%20%20%20%20b2DynamicTreePair%20%3D%20Box2D.Collision.b2DynamicTreePair%2C%0A%20%20%20%20%20%20b2Manifold%20%3D%20Box2D.Collision.b2Manifold%2C%0A%20%20%20%20%20%20b2ManifoldPoint%20%3D%20Box2D.Collision.b2ManifoldPoint%2C%0A%20%20%20%20%20%20b2Point%20%3D%20Box2D.Collision.b2Point%2C%0A%20%20%20%20%20%20b2RayCastInput%20%3D%20Box2D.Collision.b2RayCastInput%2C%0A%20%20%20%20%20%20b2RayCastOutput%20%3D%20Box2D.Collision.b2RayCastOutput%2C%0A%20%20%20%20%20%20b2Segment%20%3D%20Box2D.Collision.b2Segment%2C%0A%20%20%20%20%20%20b2SeparationFunction%20%3D%20Box2D.Collision.b2SeparationFunction%2C%0A%20%20%20%20%20%20b2Simplex%20%3D%20Box2D.Collision.b2Simplex%2C%0A%20%20%20%20%20%20b2SimplexCache%20%3D%20Box2D.Collision.b2SimplexCache%2C%0A%20%20%20%20%20%20b2SimplexVertex%20%3D%20Box2D.Collision.b2SimplexVertex%2C%0A%20%20%20%20%20%20b2TimeOfImpact%20%3D%20Box2D.Collision.b2TimeOfImpact%2C%0A%20%20%20%20%20%20b2TOIInput%20%3D%20Box2D.Collision.b2TOIInput%2C%0A%20%20%20%20%20%20b2WorldManifold%20%3D%20Box2D.Collision.b2WorldManifold%2C%0A%20%20%20%20%20%20ClipVertex%20%3D%20Box2D.Collision.ClipVertex%2C%0A%20%20%20%20%20%20Features%20%3D%20Box2D.Collision.Features%2C%0A%20%20%20%20%20%20IBroadPhase%20%3D%20Box2D.Collision.IBroadPhase%2C%0A%20%20%20%20%20%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%2C%0A%20%20%20%20%20%20b2EdgeChainDef%20%3D%20Box2D.Collision.Shapes.b2EdgeChainDef%2C%0A%20%20%20%20%20%20b2EdgeShape%20%3D%20Box2D.Collision.Shapes.b2EdgeShape%2C%0A%20%20%20%20%20%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%2C%0A%20%20%20%20%20%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%2C%0A%20%20%20%20%20%20b2Shape%20%3D%20Box2D.Collision.Shapes.b2Shape%2C%0A%20%20%20%20%20%20b2Body%20%3D%20Box2D.Dynamics.b2Body%2C%0A%20%20%20%20%20%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%2C%0A%20%20%20%20%20%20b2ContactFilter%20%3D%20Box2D.Dynamics.b2ContactFilter%2C%0A%20%20%20%20%20%20b2ContactImpulse%20%3D%20Box2D.Dynamics.b2ContactImpulse%2C%0A%20%20%20%20%20%20b2ContactListener%20%3D%20Box2D.Dynamics.b2ContactListener%2C%0A%20%20%20%20%20%20b2ContactManager%20%3D%20Box2D.Dynamics.b2ContactManager%2C%0A%20%20%20%20%20%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%2C%0A%20%20%20%20%20%20b2DestructionListener%20%3D%20Box2D.Dynamics.b2DestructionListener%2C%0A%20%20%20%20%20%20b2FilterData%20%3D%20Box2D.Dynamics.b2FilterData%2C%0A%20%20%20%20%20%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%2C%0A%20%20%20%20%20%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%2C%0A%20%20%20%20%20%20b2Island%20%3D%20Box2D.Dynamics.b2Island%2C%0A%20%20%20%20%20%20b2TimeStep%20%3D%20Box2D.Dynamics.b2TimeStep%2C%0A%20%20%20%20%20%20b2World%20%3D%20Box2D.Dynamics.b2World%2C%0A%20%20%20%20%20%20b2CircleContact%20%3D%20Box2D.Dynamics.Contacts.b2CircleContact%2C%0A%20%20%20%20%20%20b2Contact%20%3D%20Box2D.Dynamics.Contacts.b2Contact%2C%0A%20%20%20%20%20%20b2ContactConstraint%20%3D%20Box2D.Dynamics.Contacts.b2ContactConstraint%2C%0A%20%20%20%20%20%20b2ContactConstraintPoint%20%3D%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2ContactConstraintPoint%2C%0A%20%20%20%20%20%20b2ContactEdge%20%3D%20Box2D.Dynamics.Contacts.b2ContactEdge%2C%0A%20%20%20%20%20%20b2ContactFactory%20%3D%20Box2D.Dynamics.Contacts.b2ContactFactory%2C%0A%20%20%20%20%20%20b2ContactRegister%20%3D%20Box2D.Dynamics.Contacts.b2ContactRegister%2C%0A%20%20%20%20%20%20b2ContactResult%20%3D%20Box2D.Dynamics.Contacts.b2ContactResult%2C%0A%20%20%20%20%20%20b2ContactSolver%20%3D%20Box2D.Dynamics.Contacts.b2ContactSolver%2C%0A%20%20%20%20%20%20b2EdgeAndCircleContact%20%3D%20Box2D.Dynamics.Contacts.b2EdgeAndCircleContact%2C%0A%20%20%20%20%20%20b2NullContact%20%3D%20Box2D.Dynamics.Contacts.b2NullContact%2C%0A%20%20%20%20%20%20b2PolyAndCircleContact%20%3D%20Box2D.Dynamics.Contacts.b2PolyAndCircleContact%2C%0A%20%20%20%20%20%20b2PolyAndEdgeContact%20%3D%20Box2D.Dynamics.Contacts.b2PolyAndEdgeContact%2C%0A%20%20%20%20%20%20b2PolygonContact%20%3D%20Box2D.Dynamics.Contacts.b2PolygonContact%2C%0A%20%20%20%20%20%20b2PositionSolverManifold%20%3D%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2PositionSolverManifold%2C%0A%20%20%20%20%20%20b2Controller%20%3D%20Box2D.Dynamics.Controllers.b2Controller%2C%0A%20%20%20%20%20%20b2DistanceJoint%20%3D%20Box2D.Dynamics.Joints.b2DistanceJoint%2C%0A%20%20%20%20%20%20b2DistanceJointDef%20%3D%20Box2D.Dynamics.Joints.b2DistanceJointDef%2C%0A%20%20%20%20%20%20b2FrictionJoint%20%3D%20Box2D.Dynamics.Joints.b2FrictionJoint%2C%0A%20%20%20%20%20%20b2FrictionJointDef%20%3D%20Box2D.Dynamics.Joints.b2FrictionJointDef%2C%0A%20%20%20%20%20%20b2GearJoint%20%3D%20Box2D.Dynamics.Joints.b2GearJoint%2C%0A%20%20%20%20%20%20b2GearJointDef%20%3D%20Box2D.Dynamics.Joints.b2GearJointDef%2C%0A%20%20%20%20%20%20b2Jacobian%20%3D%20Box2D.Dynamics.Joints.b2Jacobian%2C%0A%20%20%20%20%20%20b2Joint%20%3D%20Box2D.Dynamics.Joints.b2Joint%2C%0A%20%20%20%20%20%20b2JointDef%20%3D%20Box2D.Dynamics.Joints.b2JointDef%2C%0A%20%20%20%20%20%20b2JointEdge%20%3D%20Box2D.Dynamics.Joints.b2JointEdge%2C%0A%20%20%20%20%20%20b2LineJoint%20%3D%20Box2D.Dynamics.Joints.b2LineJoint%2C%0A%20%20%20%20%20%20b2LineJointDef%20%3D%20Box2D.Dynamics.Joints.b2LineJointDef%2C%0A%20%20%20%20%20%20b2MouseJoint%20%3D%20Box2D.Dynamics.Joints.b2MouseJoint%2C%0A%20%20%20%20%20%20b2MouseJointDef%20%3D%20Box2D.Dynamics.Joints.b2MouseJointDef%2C%0A%20%20%20%20%20%20b2PrismaticJoint%20%3D%20Box2D.Dynamics.Joints.b2PrismaticJoint%2C%0A%20%20%20%20%20%20b2PrismaticJointDef%20%3D%20Box2D.Dynamics.Joints.b2PrismaticJointDef%2C%0A%20%20%20%20%20%20b2PulleyJoint%20%3D%20Box2D.Dynamics.Joints.b2PulleyJoint%2C%0A%20%20%20%20%20%20b2PulleyJointDef%20%3D%20Box2D.Dynamics.Joints.b2PulleyJointDef%2C%0A%20%20%20%20%20%20b2RevoluteJoint%20%3D%20Box2D.Dynamics.Joints.b2RevoluteJoint%2C%0A%20%20%20%20%20%20b2RevoluteJointDef%20%3D%20Box2D.Dynamics.Joints.b2RevoluteJointDef%2C%0A%20%20%20%20%20%20b2WeldJoint%20%3D%20Box2D.Dynamics.Joints.b2WeldJoint%2C%0A%20%20%20%20%20%20b2WeldJointDef%20%3D%20Box2D.Dynamics.Joints.b2WeldJointDef%3B%0A%0A%20%20%20%20b2Body.b2Body%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_xf%20%3D%20new%20b2Transform()%3B%0A%20%20%20%20%20%20this.m_sweep%20%3D%20new%20b2Sweep()%3B%0A%20%20%20%20%20%20this.m_linearVelocity%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_force%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.connectEdges%20%3D%20function%20(s1%2C%20s2%2C%20angle1)%20%7B%0A%20%20%20%20%20%20if%20(angle1%20%3D%3D%3D%20undefined)%20angle1%20%3D%200%3B%0A%20%20%20%20%20%20var%20angle2%20%3D%20Math.atan2(%0A%20%20%20%20%20%20%20%20s2.GetDirectionVector().y%2C%0A%20%20%20%20%20%20%20%20s2.GetDirectionVector().x%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20coreOffset%20%3D%20Math.tan((angle2%20-%20angle1)%20*%200.5)%3B%0A%20%20%20%20%20%20var%20core%20%3D%20b2Math.MulFV(coreOffset%2C%20s2.GetDirectionVector())%3B%0A%20%20%20%20%20%20core%20%3D%20b2Math.SubtractVV(core%2C%20s2.GetNormalVector())%3B%0A%20%20%20%20%20%20core%20%3D%20b2Math.MulFV(b2Settings.b2_toiSlop%2C%20core)%3B%0A%20%20%20%20%20%20core%20%3D%20b2Math.AddVV(core%2C%20s2.GetVertex1())%3B%0A%20%20%20%20%20%20var%20cornerDir%20%3D%20b2Math.AddVV(%0A%20%20%20%20%20%20%20%20s1.GetDirectionVector()%2C%0A%20%20%20%20%20%20%20%20s2.GetDirectionVector()%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20cornerDir.Normalize()%3B%0A%20%20%20%20%20%20var%20convex%20%3D%0A%20%20%20%20%20%20%20%20b2Math.Dot(s1.GetDirectionVector()%2C%20s2.GetNormalVector())%20%3E%200.0%3B%0A%20%20%20%20%20%20s1.SetNextEdge(s2%2C%20core%2C%20cornerDir%2C%20convex)%3B%0A%20%20%20%20%20%20s2.SetPrevEdge(s1%2C%20core%2C%20cornerDir%2C%20convex)%3B%0A%20%20%20%20%20%20return%20angle2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.CreateFixture%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20if%20(this.m_world.IsLocked()%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20fixture%20%3D%20new%20b2Fixture()%3B%0A%20%20%20%20%20%20fixture.Create(this%2C%20this.m_xf%2C%20def)%3B%0A%20%20%20%20%20%20if%20(this.m_flags%20%26%20b2Body.e_activeFlag)%20%7B%0A%20%20%20%20%20%20%20%20var%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20%20%20fixture.CreateProxy(broadPhase%2C%20this.m_xf)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20fixture.m_next%20%3D%20this.m_fixtureList%3B%0A%20%20%20%20%20%20this.m_fixtureList%20%3D%20fixture%3B%0A%20%20%20%20%20%20%2B%2Bthis.m_fixtureCount%3B%0A%20%20%20%20%20%20fixture.m_body%20%3D%20this%3B%0A%20%20%20%20%20%20if%20(fixture.m_density%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.ResetMassData()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_world.m_flags%20%7C%3D%20b2World.e_newFixture%3B%0A%20%20%20%20%20%20return%20fixture%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.CreateFixture2%20%3D%20function%20(shape%2C%20density)%20%7B%0A%20%20%20%20%20%20if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20def%20%3D%20new%20b2FixtureDef()%3B%0A%20%20%20%20%20%20def.shape%20%3D%20shape%3B%0A%20%20%20%20%20%20def.density%20%3D%20density%3B%0A%20%20%20%20%20%20return%20this.CreateFixture(def)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.DestroyFixture%20%3D%20function%20(fixture)%20%7B%0A%20%20%20%20%20%20if%20(this.m_world.IsLocked()%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20node%20%3D%20this.m_fixtureList%3B%0A%20%20%20%20%20%20var%20ppF%20%3D%20null%3B%0A%20%20%20%20%20%20var%20found%20%3D%20false%3B%0A%20%20%20%20%20%20while%20(node%20!%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20if%20(node%20%3D%3D%20fixture)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(ppF)%20ppF.m_next%20%3D%20fixture.m_next%3B%0A%20%20%20%20%20%20%20%20%20%20else%20this.m_fixtureList%20%3D%20fixture.m_next%3B%0A%20%20%20%20%20%20%20%20%20%20found%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20ppF%20%3D%20node%3B%0A%20%20%20%20%20%20%20%20node%20%3D%20node.m_next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20edge%20%3D%20this.m_contactList%3B%0A%20%20%20%20%20%20while%20(edge)%20%7B%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20edge.contact%3B%0A%20%20%20%20%20%20%20%20edge%20%3D%20edge.next%3B%0A%20%20%20%20%20%20%20%20var%20fixtureA%20%3D%20c.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20var%20fixtureB%20%3D%20c.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20if%20(fixture%20%3D%3D%20fixtureA%20%7C%7C%20fixture%20%3D%3D%20fixtureB)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_world.m_contactManager.Destroy(c)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_flags%20%26%20b2Body.e_activeFlag)%20%7B%0A%20%20%20%20%20%20%20%20var%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20%20%20fixture.DestroyProxy(broadPhase)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20fixture.Destroy()%3B%0A%20%20%20%20%20%20fixture.m_body%20%3D%20null%3B%0A%20%20%20%20%20%20fixture.m_next%20%3D%20null%3B%0A%20%20%20%20%20%20--this.m_fixtureCount%3B%0A%20%20%20%20%20%20this.ResetMassData()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetPositionAndAngle%20%3D%20function%20(position%2C%20angle)%20%7B%0A%20%20%20%20%20%20if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200%3B%0A%20%20%20%20%20%20var%20f%3B%0A%20%20%20%20%20%20if%20(this.m_world.IsLocked()%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_xf.R.Set(angle)%3B%0A%20%20%20%20%20%20this.m_xf.position.SetV(position)%3B%0A%20%20%20%20%20%20var%20tMat%20%3D%20this.m_xf.R%3B%0A%20%20%20%20%20%20var%20tVec%20%3D%20this.m_sweep.localCenter%3B%0A%20%20%20%20%20%20this.m_sweep.c.x%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20this.m_sweep.c.y%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20this.m_sweep.c.x%20%2B%3D%20this.m_xf.position.x%3B%0A%20%20%20%20%20%20this.m_sweep.c.y%20%2B%3D%20this.m_xf.position.y%3B%0A%20%20%20%20%20%20this.m_sweep.c0.SetV(this.m_sweep.c)%3B%0A%20%20%20%20%20%20this.m_sweep.a0%20%3D%20this.m_sweep.a%20%3D%20angle%3B%0A%20%20%20%20%20%20var%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20for%20(f%20%3D%20this.m_fixtureList%3B%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%20%20%20%20%20%20%20%20f.Synchronize(broadPhase%2C%20this.m_xf%2C%20this.m_xf)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_world.m_contactManager.FindNewContacts()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetTransform%20%3D%20function%20(xf)%20%7B%0A%20%20%20%20%20%20this.SetPositionAndAngle(xf.position%2C%20xf.GetAngle())%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetTransform%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_xf%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetPosition%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_xf.position%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetPosition%20%3D%20function%20(position)%20%7B%0A%20%20%20%20%20%20this.SetPositionAndAngle(position%2C%20this.GetAngle())%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetAngle%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_sweep.a%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetAngle%20%3D%20function%20(angle)%20%7B%0A%20%20%20%20%20%20if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200%3B%0A%20%20%20%20%20%20this.SetPositionAndAngle(this.GetPosition()%2C%20angle)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetWorldCenter%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_sweep.c%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetLocalCenter%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_sweep.localCenter%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetLinearVelocity%20%3D%20function%20(v)%20%7B%0A%20%20%20%20%20%20if%20(this.m_type%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_linearVelocity.SetV(v)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetLinearVelocity%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_linearVelocity%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetAngularVelocity%20%3D%20function%20(omega)%20%7B%0A%20%20%20%20%20%20if%20(omega%20%3D%3D%3D%20undefined)%20omega%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_type%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_angularVelocity%20%3D%20omega%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetAngularVelocity%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_angularVelocity%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetDefinition%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20bd%20%3D%20new%20b2BodyDef()%3B%0A%20%20%20%20%20%20bd.type%20%3D%20this.GetType()%3B%0A%20%20%20%20%20%20bd.allowSleep%20%3D%0A%20%20%20%20%20%20%20%20(this.m_flags%20%26%20b2Body.e_allowSleepFlag)%20%3D%3D%20b2Body.e_allowSleepFlag%3B%0A%20%20%20%20%20%20bd.angle%20%3D%20this.GetAngle()%3B%0A%20%20%20%20%20%20bd.angularDamping%20%3D%20this.m_angularDamping%3B%0A%20%20%20%20%20%20bd.angularVelocity%20%3D%20this.m_angularVelocity%3B%0A%20%20%20%20%20%20bd.fixedRotation%20%3D%0A%20%20%20%20%20%20%20%20(this.m_flags%20%26%20b2Body.e_fixedRotationFlag)%20%3D%3D%0A%20%20%20%20%20%20%20%20b2Body.e_fixedRotationFlag%3B%0A%20%20%20%20%20%20bd.bullet%20%3D%20(this.m_flags%20%26%20b2Body.e_bulletFlag)%20%3D%3D%20b2Body.e_bulletFlag%3B%0A%20%20%20%20%20%20bd.awake%20%3D%20(this.m_flags%20%26%20b2Body.e_awakeFlag)%20%3D%3D%20b2Body.e_awakeFlag%3B%0A%20%20%20%20%20%20bd.linearDamping%20%3D%20this.m_linearDamping%3B%0A%20%20%20%20%20%20bd.linearVelocity.SetV(this.GetLinearVelocity())%3B%0A%20%20%20%20%20%20bd.position%20%3D%20this.GetPosition()%3B%0A%20%20%20%20%20%20bd.userData%20%3D%20this.GetUserData()%3B%0A%20%20%20%20%20%20return%20bd%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.ApplyForce%20%3D%20function%20(force%2C%20point)%20%7B%0A%20%20%20%20%20%20if%20(this.m_type%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20this.SetAwake(true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_force.x%20%2B%3D%20force.x%3B%0A%20%20%20%20%20%20this.m_force.y%20%2B%3D%20force.y%3B%0A%20%20%20%20%20%20this.m_torque%20%2B%3D%0A%20%20%20%20%20%20%20%20(point.x%20-%20this.m_sweep.c.x)%20*%20force.y%20-%0A%20%20%20%20%20%20%20%20(point.y%20-%20this.m_sweep.c.y)%20*%20force.x%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.ApplyTorque%20%3D%20function%20(torque)%20%7B%0A%20%20%20%20%20%20if%20(torque%20%3D%3D%3D%20undefined)%20torque%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_type%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20this.SetAwake(true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_torque%20%2B%3D%20torque%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.ApplyImpulse%20%3D%20function%20(impulse%2C%20point)%20%7B%0A%20%20%20%20%20%20if%20(this.m_type%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20this.SetAwake(true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_linearVelocity.x%20%2B%3D%20this.m_invMass%20*%20impulse.x%3B%0A%20%20%20%20%20%20this.m_linearVelocity.y%20%2B%3D%20this.m_invMass%20*%20impulse.y%3B%0A%20%20%20%20%20%20this.m_angularVelocity%20%2B%3D%0A%20%20%20%20%20%20%20%20this.m_invI%20*%0A%20%20%20%20%20%20%20%20((point.x%20-%20this.m_sweep.c.x)%20*%20impulse.y%20-%0A%20%20%20%20%20%20%20%20%20%20(point.y%20-%20this.m_sweep.c.y)%20*%20impulse.x)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.Split%20%3D%20function%20(callback)%20%7B%0A%20%20%20%20%20%20var%20linearVelocity%20%3D%20this.GetLinearVelocity().Copy()%3B%0A%20%20%20%20%20%20var%20angularVelocity%20%3D%20this.GetAngularVelocity()%3B%0A%20%20%20%20%20%20var%20center%20%3D%20this.GetWorldCenter()%3B%0A%20%20%20%20%20%20var%20body1%20%3D%20this%3B%0A%20%20%20%20%20%20var%20body2%20%3D%20this.m_world.CreateBody(this.GetDefinition())%3B%0A%20%20%20%20%20%20var%20prev%3B%0A%20%20%20%20%20%20for%20(var%20f%20%3D%20body1.m_fixtureList%3B%20f%3B%20)%20%7B%0A%20%20%20%20%20%20%20%20if%20(callback(f))%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20next%20%3D%20f.m_next%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(prev)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20prev.m_next%20%3D%20next%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20body1.m_fixtureList%20%3D%20next%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20body1.m_fixtureCount--%3B%0A%20%20%20%20%20%20%20%20%20%20f.m_next%20%3D%20body2.m_fixtureList%3B%0A%20%20%20%20%20%20%20%20%20%20body2.m_fixtureList%20%3D%20f%3B%0A%20%20%20%20%20%20%20%20%20%20body2.m_fixtureCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20f.m_body%20%3D%20body2%3B%0A%20%20%20%20%20%20%20%20%20%20f%20%3D%20next%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20prev%20%3D%20f%3B%0A%20%20%20%20%20%20%20%20%20%20f%20%3D%20f.m_next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20body1.ResetMassData()%3B%0A%20%20%20%20%20%20body2.ResetMassData()%3B%0A%20%20%20%20%20%20var%20center1%20%3D%20body1.GetWorldCenter()%3B%0A%20%20%20%20%20%20var%20center2%20%3D%20body2.GetWorldCenter()%3B%0A%20%20%20%20%20%20var%20velocity1%20%3D%20b2Math.AddVV(%0A%20%20%20%20%20%20%20%20linearVelocity%2C%0A%20%20%20%20%20%20%20%20b2Math.CrossFV(angularVelocity%2C%20b2Math.SubtractVV(center1%2C%20center))%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20velocity2%20%3D%20b2Math.AddVV(%0A%20%20%20%20%20%20%20%20linearVelocity%2C%0A%20%20%20%20%20%20%20%20b2Math.CrossFV(angularVelocity%2C%20b2Math.SubtractVV(center2%2C%20center))%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20body1.SetLinearVelocity(velocity1)%3B%0A%20%20%20%20%20%20body2.SetLinearVelocity(velocity2)%3B%0A%20%20%20%20%20%20body1.SetAngularVelocity(angularVelocity)%3B%0A%20%20%20%20%20%20body2.SetAngularVelocity(angularVelocity)%3B%0A%20%20%20%20%20%20body1.SynchronizeFixtures()%3B%0A%20%20%20%20%20%20body2.SynchronizeFixtures()%3B%0A%20%20%20%20%20%20return%20body2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.Merge%20%3D%20function%20(other)%20%7B%0A%20%20%20%20%20%20var%20f%3B%0A%20%20%20%20%20%20for%20(f%20%3D%20other.m_fixtureList%3B%20f%3B%20)%20%7B%0A%20%20%20%20%20%20%20%20var%20next%20%3D%20f.m_next%3B%0A%20%20%20%20%20%20%20%20other.m_fixtureCount--%3B%0A%20%20%20%20%20%20%20%20f.m_next%20%3D%20this.m_fixtureList%3B%0A%20%20%20%20%20%20%20%20this.m_fixtureList%20%3D%20f%3B%0A%20%20%20%20%20%20%20%20this.m_fixtureCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20f.m_body%20%3D%20body2%3B%0A%20%20%20%20%20%20%20%20f%20%3D%20next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20body1.m_fixtureCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20body1%20%3D%20this%3B%0A%20%20%20%20%20%20var%20body2%20%3D%20other%3B%0A%20%20%20%20%20%20var%20center1%20%3D%20body1.GetWorldCenter()%3B%0A%20%20%20%20%20%20var%20center2%20%3D%20body2.GetWorldCenter()%3B%0A%20%20%20%20%20%20var%20velocity1%20%3D%20body1.GetLinearVelocity().Copy()%3B%0A%20%20%20%20%20%20var%20velocity2%20%3D%20body2.GetLinearVelocity().Copy()%3B%0A%20%20%20%20%20%20var%20angular1%20%3D%20body1.GetAngularVelocity()%3B%0A%20%20%20%20%20%20var%20angular%20%3D%20body2.GetAngularVelocity()%3B%0A%20%20%20%20%20%20body1.ResetMassData()%3B%0A%20%20%20%20%20%20this.SynchronizeFixtures()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetMass%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_mass%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetInertia%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_I%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetMassData%20%3D%20function%20(data)%20%7B%0A%20%20%20%20%20%20data.mass%20%3D%20this.m_mass%3B%0A%20%20%20%20%20%20data.I%20%3D%20this.m_I%3B%0A%20%20%20%20%20%20data.center.SetV(this.m_sweep.localCenter)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetMassData%20%3D%20function%20(massData)%20%7B%0A%20%20%20%20%20%20b2Settings.b2Assert(this.m_world.IsLocked()%20%3D%3D%20false)%3B%0A%20%20%20%20%20%20if%20(this.m_world.IsLocked()%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_type%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_invMass%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_I%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_invI%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_mass%20%3D%20massData.mass%3B%0A%20%20%20%20%20%20if%20(this.m_mass%20%3C%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.m_mass%20%3D%201.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_invMass%20%3D%201.0%20%2F%20this.m_mass%3B%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20massData.I%20%3E%200.0%20%26%26%0A%20%20%20%20%20%20%20%20(this.m_flags%20%26%20b2Body.e_fixedRotationFlag)%20%3D%3D%200%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20this.m_I%20%3D%0A%20%20%20%20%20%20%20%20%20%20massData.I%20-%0A%20%20%20%20%20%20%20%20%20%20this.m_mass%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20(massData.center.x%20*%20massData.center.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20massData.center.y%20*%20massData.center.y)%3B%0A%20%20%20%20%20%20%20%20this.m_invI%20%3D%201.0%20%2F%20this.m_I%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20oldCenter%20%3D%20this.m_sweep.c.Copy()%3B%0A%20%20%20%20%20%20this.m_sweep.localCenter.SetV(massData.center)%3B%0A%20%20%20%20%20%20this.m_sweep.c0.SetV(b2Math.MulX(this.m_xf%2C%20this.m_sweep.localCenter))%3B%0A%20%20%20%20%20%20this.m_sweep.c.SetV(this.m_sweep.c0)%3B%0A%20%20%20%20%20%20this.m_linearVelocity.x%20%2B%3D%0A%20%20%20%20%20%20%20%20this.m_angularVelocity%20*%20-(this.m_sweep.c.y%20-%20oldCenter.y)%3B%0A%20%20%20%20%20%20this.m_linearVelocity.y%20%2B%3D%0A%20%20%20%20%20%20%20%20this.m_angularVelocity%20*%20%2B(this.m_sweep.c.x%20-%20oldCenter.x)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.ResetMassData%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_mass%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_invMass%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_I%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_invI%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_sweep.localCenter.SetZero()%3B%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20this.m_type%20%3D%3D%20b2Body.b2_staticBody%20%7C%7C%0A%20%20%20%20%20%20%20%20this.m_type%20%3D%3D%20b2Body.b2_kinematicBody%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20center%20%3D%20b2Vec2.Make(0%2C%200)%3B%0A%20%20%20%20%20%20for%20(var%20f%20%3D%20this.m_fixtureList%3B%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%20%20%20%20%20%20%20%20if%20(f.m_density%20%3D%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20massData%20%3D%20f.GetMassData()%3B%0A%20%20%20%20%20%20%20%20this.m_mass%20%2B%3D%20massData.mass%3B%0A%20%20%20%20%20%20%20%20center.x%20%2B%3D%20massData.center.x%20*%20massData.mass%3B%0A%20%20%20%20%20%20%20%20center.y%20%2B%3D%20massData.center.y%20*%20massData.mass%3B%0A%20%20%20%20%20%20%20%20this.m_I%20%2B%3D%20massData.I%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_mass%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.m_invMass%20%3D%201.0%20%2F%20this.m_mass%3B%0A%20%20%20%20%20%20%20%20center.x%20*%3D%20this.m_invMass%3B%0A%20%20%20%20%20%20%20%20center.y%20*%3D%20this.m_invMass%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_mass%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.m_invMass%20%3D%201.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_I%20%3E%200.0%20%26%26%20(this.m_flags%20%26%20b2Body.e_fixedRotationFlag)%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20this.m_I%20-%3D%20this.m_mass%20*%20(center.x%20*%20center.x%20%2B%20center.y%20*%20center.y)%3B%0A%20%20%20%20%20%20%20%20this.m_I%20*%3D%20this.m_inertiaScale%3B%0A%20%20%20%20%20%20%20%20b2Settings.b2Assert(this.m_I%20%3E%200)%3B%0A%20%20%20%20%20%20%20%20this.m_invI%20%3D%201.0%20%2F%20this.m_I%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_I%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_invI%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20oldCenter%20%3D%20this.m_sweep.c.Copy()%3B%0A%20%20%20%20%20%20this.m_sweep.localCenter.SetV(center)%3B%0A%20%20%20%20%20%20this.m_sweep.c0.SetV(b2Math.MulX(this.m_xf%2C%20this.m_sweep.localCenter))%3B%0A%20%20%20%20%20%20this.m_sweep.c.SetV(this.m_sweep.c0)%3B%0A%20%20%20%20%20%20this.m_linearVelocity.x%20%2B%3D%0A%20%20%20%20%20%20%20%20this.m_angularVelocity%20*%20-(this.m_sweep.c.y%20-%20oldCenter.y)%3B%0A%20%20%20%20%20%20this.m_linearVelocity.y%20%2B%3D%0A%20%20%20%20%20%20%20%20this.m_angularVelocity%20*%20%2B(this.m_sweep.c.x%20-%20oldCenter.x)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetWorldPoint%20%3D%20function%20(localPoint)%20%7B%0A%20%20%20%20%20%20var%20A%20%3D%20this.m_xf.R%3B%0A%20%20%20%20%20%20var%20u%20%3D%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20A.col1.x%20*%20localPoint.x%20%2B%20A.col2.x%20*%20localPoint.y%2C%0A%20%20%20%20%20%20%20%20A.col1.y%20*%20localPoint.x%20%2B%20A.col2.y%20*%20localPoint.y%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20u.x%20%2B%3D%20this.m_xf.position.x%3B%0A%20%20%20%20%20%20u.y%20%2B%3D%20this.m_xf.position.y%3B%0A%20%20%20%20%20%20return%20u%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetWorldVector%20%3D%20function%20(localVector)%20%7B%0A%20%20%20%20%20%20return%20b2Math.MulMV(this.m_xf.R%2C%20localVector)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetLocalPoint%20%3D%20function%20(worldPoint)%20%7B%0A%20%20%20%20%20%20return%20b2Math.MulXT(this.m_xf%2C%20worldPoint)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetLocalVector%20%3D%20function%20(worldVector)%20%7B%0A%20%20%20%20%20%20return%20b2Math.MulTMV(this.m_xf.R%2C%20worldVector)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetLinearVelocityFromWorldPoint%20%3D%20function%20(worldPoint)%20%7B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20this.m_linearVelocity.x%20-%0A%20%20%20%20%20%20%20%20%20%20this.m_angularVelocity%20*%20(worldPoint.y%20-%20this.m_sweep.c.y)%2C%0A%20%20%20%20%20%20%20%20this.m_linearVelocity.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_angularVelocity%20*%20(worldPoint.x%20-%20this.m_sweep.c.x)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetLinearVelocityFromLocalPoint%20%3D%20function%20(localPoint)%20%7B%0A%20%20%20%20%20%20var%20A%20%3D%20this.m_xf.R%3B%0A%20%20%20%20%20%20var%20worldPoint%20%3D%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20A.col1.x%20*%20localPoint.x%20%2B%20A.col2.x%20*%20localPoint.y%2C%0A%20%20%20%20%20%20%20%20A.col1.y%20*%20localPoint.x%20%2B%20A.col2.y%20*%20localPoint.y%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20worldPoint.x%20%2B%3D%20this.m_xf.position.x%3B%0A%20%20%20%20%20%20worldPoint.y%20%2B%3D%20this.m_xf.position.y%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20this.m_linearVelocity.x%20-%0A%20%20%20%20%20%20%20%20%20%20this.m_angularVelocity%20*%20(worldPoint.y%20-%20this.m_sweep.c.y)%2C%0A%20%20%20%20%20%20%20%20this.m_linearVelocity.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_angularVelocity%20*%20(worldPoint.x%20-%20this.m_sweep.c.x)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetLinearDamping%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_linearDamping%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetLinearDamping%20%3D%20function%20(linearDamping)%20%7B%0A%20%20%20%20%20%20if%20(linearDamping%20%3D%3D%3D%20undefined)%20linearDamping%20%3D%200%3B%0A%20%20%20%20%20%20this.m_linearDamping%20%3D%20linearDamping%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetAngularDamping%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_angularDamping%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetAngularDamping%20%3D%20function%20(angularDamping)%20%7B%0A%20%20%20%20%20%20if%20(angularDamping%20%3D%3D%3D%20undefined)%20angularDamping%20%3D%200%3B%0A%20%20%20%20%20%20this.m_angularDamping%20%3D%20angularDamping%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetType%20%3D%20function%20(type)%20%7B%0A%20%20%20%20%20%20if%20(type%20%3D%3D%3D%20undefined)%20type%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_type%20%3D%3D%20type)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_type%20%3D%20type%3B%0A%20%20%20%20%20%20this.ResetMassData()%3B%0A%20%20%20%20%20%20if%20(this.m_type%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20this.m_linearVelocity.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_angularVelocity%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_force.SetZero()%3B%0A%20%20%20%20%20%20this.m_torque%20%3D%200.0%3B%0A%20%20%20%20%20%20for%20(var%20ce%20%3D%20this.m_contactList%3B%20ce%3B%20ce%20%3D%20ce.next)%20%7B%0A%20%20%20%20%20%20%20%20ce.contact.FlagForFiltering()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetType%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_type%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetBullet%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20if%20(flag)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_bulletFlag%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Body.e_bulletFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.IsBullet%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(this.m_flags%20%26%20b2Body.e_bulletFlag)%20%3D%3D%20b2Body.e_bulletFlag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetSleepingAllowed%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20if%20(flag)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_allowSleepFlag%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Body.e_allowSleepFlag%3B%0A%20%20%20%20%20%20%20%20this.SetAwake(true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetAwake%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20if%20(flag)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_awakeFlag%3B%0A%20%20%20%20%20%20%20%20this.m_sleepTime%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Body.e_awakeFlag%3B%0A%20%20%20%20%20%20%20%20this.m_sleepTime%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_linearVelocity.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_angularVelocity%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_force.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_torque%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.IsAwake%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(this.m_flags%20%26%20b2Body.e_awakeFlag)%20%3D%3D%20b2Body.e_awakeFlag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetFixedRotation%20%3D%20function%20(fixed)%20%7B%0A%20%20%20%20%20%20if%20(fixed)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_fixedRotationFlag%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Body.e_fixedRotationFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.ResetMassData()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.IsFixedRotation%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20(this.m_flags%20%26%20b2Body.e_fixedRotationFlag)%20%3D%3D%0A%20%20%20%20%20%20%20%20b2Body.e_fixedRotationFlag%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetActive%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20if%20(flag%20%3D%3D%20this.IsActive())%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20broadPhase%3B%0A%20%20%20%20%20%20var%20f%3B%0A%20%20%20%20%20%20if%20(flag)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_activeFlag%3B%0A%20%20%20%20%20%20%20%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20%20%20for%20(f%20%3D%20this.m_fixtureList%3B%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20f.CreateProxy(broadPhase%2C%20this.m_xf)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Body.e_activeFlag%3B%0A%20%20%20%20%20%20%20%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20%20%20for%20(f%20%3D%20this.m_fixtureList%3B%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20f.DestroyProxy(broadPhase)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20ce%20%3D%20this.m_contactList%3B%0A%20%20%20%20%20%20%20%20while%20(ce)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20ce0%20%3D%20ce%3B%0A%20%20%20%20%20%20%20%20%20%20ce%20%3D%20ce.next%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_world.m_contactManager.Destroy(ce0.contact)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_contactList%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.IsActive%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(this.m_flags%20%26%20b2Body.e_activeFlag)%20%3D%3D%20b2Body.e_activeFlag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.IsSleepingAllowed%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20(this.m_flags%20%26%20b2Body.e_allowSleepFlag)%20%3D%3D%20b2Body.e_allowSleepFlag%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetFixtureList%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_fixtureList%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetJointList%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_jointList%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetControllerList%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_controllerList%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetContactList%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_contactList%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetNext%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_next%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetUserData%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_userData%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SetUserData%20%3D%20function%20(data)%20%7B%0A%20%20%20%20%20%20this.m_userData%20%3D%20data%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.GetWorld%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_world%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.b2Body%20%3D%20function%20(bd%2C%20world)%20%7B%0A%20%20%20%20%20%20this.m_flags%20%3D%200%3B%0A%20%20%20%20%20%20if%20(bd.bullet)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_bulletFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(bd.fixedRotation)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_fixedRotationFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(bd.allowSleep)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_allowSleepFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(bd.awake)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_awakeFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(bd.active)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Body.e_activeFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_world%20%3D%20world%3B%0A%20%20%20%20%20%20this.m_xf.position.SetV(bd.position)%3B%0A%20%20%20%20%20%20this.m_xf.R.Set(bd.angle)%3B%0A%20%20%20%20%20%20this.m_sweep.localCenter.SetZero()%3B%0A%20%20%20%20%20%20this.m_sweep.t0%20%3D%201.0%3B%0A%20%20%20%20%20%20this.m_sweep.a0%20%3D%20this.m_sweep.a%20%3D%20bd.angle%3B%0A%20%20%20%20%20%20var%20tMat%20%3D%20this.m_xf.R%3B%0A%20%20%20%20%20%20var%20tVec%20%3D%20this.m_sweep.localCenter%3B%0A%20%20%20%20%20%20this.m_sweep.c.x%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20this.m_sweep.c.y%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20this.m_sweep.c.x%20%2B%3D%20this.m_xf.position.x%3B%0A%20%20%20%20%20%20this.m_sweep.c.y%20%2B%3D%20this.m_xf.position.y%3B%0A%20%20%20%20%20%20this.m_sweep.c0.SetV(this.m_sweep.c)%3B%0A%20%20%20%20%20%20this.m_jointList%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_controllerList%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_contactList%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_controllerCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_next%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_linearVelocity.SetV(bd.linearVelocity)%3B%0A%20%20%20%20%20%20this.m_angularVelocity%20%3D%20bd.angularVelocity%3B%0A%20%20%20%20%20%20this.m_linearDamping%20%3D%20bd.linearDamping%3B%0A%20%20%20%20%20%20this.m_angularDamping%20%3D%20bd.angularDamping%3B%0A%20%20%20%20%20%20this.m_force.Set(0.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.m_torque%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_sleepTime%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_type%20%3D%20bd.type%3B%0A%20%20%20%20%20%20if%20(this.m_type%20%3D%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20this.m_mass%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20this.m_invMass%20%3D%201.0%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_mass%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_invMass%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_I%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_invI%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_inertiaScale%20%3D%20bd.inertiaScale%3B%0A%20%20%20%20%20%20this.m_userData%20%3D%20bd.userData%3B%0A%20%20%20%20%20%20this.m_fixtureList%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_fixtureCount%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SynchronizeFixtures%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20xf1%20%3D%20b2Body.s_xf1%3B%0A%20%20%20%20%20%20xf1.R.Set(this.m_sweep.a0)%3B%0A%20%20%20%20%20%20var%20tMat%20%3D%20xf1.R%3B%0A%20%20%20%20%20%20var%20tVec%20%3D%20this.m_sweep.localCenter%3B%0A%20%20%20%20%20%20xf1.position.x%20%3D%0A%20%20%20%20%20%20%20%20this.m_sweep.c0.x%20-%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20xf1.position.y%20%3D%0A%20%20%20%20%20%20%20%20this.m_sweep.c0.y%20-%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20var%20f%3B%0A%20%20%20%20%20%20var%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20for%20(f%20%3D%20this.m_fixtureList%3B%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%20%20%20%20%20%20%20%20f.Synchronize(broadPhase%2C%20xf1%2C%20this.m_xf)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.SynchronizeTransform%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_xf.R.Set(this.m_sweep.a)%3B%0A%20%20%20%20%20%20var%20tMat%20%3D%20this.m_xf.R%3B%0A%20%20%20%20%20%20var%20tVec%20%3D%20this.m_sweep.localCenter%3B%0A%20%20%20%20%20%20this.m_xf.position.x%20%3D%0A%20%20%20%20%20%20%20%20this.m_sweep.c.x%20-%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20this.m_xf.position.y%20%3D%0A%20%20%20%20%20%20%20%20this.m_sweep.c.y%20-%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.ShouldCollide%20%3D%20function%20(other)%20%7B%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20this.m_type%20!%3D%20b2Body.b2_dynamicBody%20%26%26%0A%20%20%20%20%20%20%20%20other.m_type%20!%3D%20b2Body.b2_dynamicBody%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(var%20jn%20%3D%20this.m_jointList%3B%20jn%3B%20jn%20%3D%20jn.next)%20%7B%0A%20%20%20%20%20%20%20%20if%20(jn.other%20%3D%3D%20other)%0A%20%20%20%20%20%20%20%20%20%20if%20(jn.joint.m_collideConnected%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Body.prototype.Advance%20%3D%20function%20(t)%20%7B%0A%20%20%20%20%20%20if%20(t%20%3D%3D%3D%20undefined)%20t%20%3D%200%3B%0A%20%20%20%20%20%20this.m_sweep.Advance(t)%3B%0A%20%20%20%20%20%20this.m_sweep.c.SetV(this.m_sweep.c0)%3B%0A%20%20%20%20%20%20this.m_sweep.a%20%3D%20this.m_sweep.a0%3B%0A%20%20%20%20%20%20this.SynchronizeTransform()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.s_xf1%20%3D%20new%20b2Transform()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.e_islandFlag%20%3D%200x0001%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.e_awakeFlag%20%3D%200x0002%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.e_allowSleepFlag%20%3D%200x0004%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.e_bulletFlag%20%3D%200x0008%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.e_fixedRotationFlag%20%3D%200x0010%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.e_activeFlag%20%3D%200x0020%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.b2_staticBody%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.b2_kinematicBody%20%3D%201%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Body.b2_dynamicBody%20%3D%202%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2BodyDef.b2BodyDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.position%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.linearVelocity%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2BodyDef.prototype.b2BodyDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.userData%20%3D%20null%3B%0A%20%20%20%20%20%20this.position.Set(0.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.angle%20%3D%200.0%3B%0A%20%20%20%20%20%20this.linearVelocity.Set(0%2C%200)%3B%0A%20%20%20%20%20%20this.angularVelocity%20%3D%200.0%3B%0A%20%20%20%20%20%20this.linearDamping%20%3D%200.0%3B%0A%20%20%20%20%20%20this.angularDamping%20%3D%200.0%3B%0A%20%20%20%20%20%20this.allowSleep%20%3D%20true%3B%0A%20%20%20%20%20%20this.awake%20%3D%20true%3B%0A%20%20%20%20%20%20this.fixedRotation%20%3D%20false%3B%0A%20%20%20%20%20%20this.bullet%20%3D%20false%3B%0A%20%20%20%20%20%20this.type%20%3D%20b2Body.b2_staticBody%3B%0A%20%20%20%20%20%20this.active%20%3D%20true%3B%0A%20%20%20%20%20%20this.inertiaScale%20%3D%201.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactFilter.b2ContactFilter%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2ContactFilter.prototype.ShouldCollide%20%3D%20function%20(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20var%20filter1%20%3D%20fixtureA.GetFilterData()%3B%0A%20%20%20%20%20%20var%20filter2%20%3D%20fixtureB.GetFilterData()%3B%0A%20%20%20%20%20%20if%20(filter1.groupIndex%20%3D%3D%20filter2.groupIndex%20%26%26%20filter1.groupIndex%20!%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20return%20filter1.groupIndex%20%3E%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20collide%20%3D%0A%20%20%20%20%20%20%20%20(filter1.maskBits%20%26%20filter2.categoryBits)%20!%3D%200%20%26%26%0A%20%20%20%20%20%20%20%20(filter1.categoryBits%20%26%20filter2.maskBits)%20!%3D%200%3B%0A%20%20%20%20%20%20return%20collide%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactFilter.prototype.RayCollide%20%3D%20function%20(userData%2C%20fixture)%20%7B%0A%20%20%20%20%20%20if%20(!userData)%20return%20true%3B%0A%20%20%20%20%20%20return%20this.ShouldCollide(%0A%20%20%20%20%20%20%20%20userData%20instanceof%20b2Fixture%20%3F%20userData%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20fixture%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.b2ContactFilter.b2_defaultFilter%20%3D%20new%20b2ContactFilter()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2ContactImpulse.b2ContactImpulse%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.normalImpulses%20%3D%20new%20Vector_a2j_Number(%0A%20%20%20%20%20%20%20%20b2Settings.b2_maxManifoldPoints%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.tangentImpulses%20%3D%20new%20Vector_a2j_Number(%0A%20%20%20%20%20%20%20%20b2Settings.b2_maxManifoldPoints%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactListener.b2ContactListener%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2ContactListener.prototype.BeginContact%20%3D%20function%20(contact)%20%7B%7D%3B%0A%20%20%20%20b2ContactListener.prototype.EndContact%20%3D%20function%20(contact)%20%7B%7D%3B%0A%20%20%20%20b2ContactListener.prototype.PreSolve%20%3D%20function%20(contact%2C%20oldManifold)%20%7B%7D%3B%0A%20%20%20%20b2ContactListener.prototype.PostSolve%20%3D%20function%20(contact%2C%20impulse)%20%7B%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.b2ContactListener.b2_defaultListener%20%3D%0A%20%20%20%20%20%20%20%20new%20b2ContactListener()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2ContactManager.b2ContactManager%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2ContactManager.prototype.b2ContactManager%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_world%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_contactCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_contactFilter%20%3D%20b2ContactFilter.b2_defaultFilter%3B%0A%20%20%20%20%20%20this.m_contactListener%20%3D%20b2ContactListener.b2_defaultListener%3B%0A%20%20%20%20%20%20this.m_contactFactory%20%3D%20new%20b2ContactFactory(this.m_allocator)%3B%0A%20%20%20%20%20%20this.m_broadPhase%20%3D%20new%20b2DynamicTreeBroadPhase()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactManager.prototype.AddPair%20%3D%20function%20(%0A%20%20%20%20%20%20proxyUserDataA%2C%0A%20%20%20%20%20%20proxyUserDataB%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20var%20fixtureA%20%3D%0A%20%20%20%20%20%20%20%20proxyUserDataA%20instanceof%20b2Fixture%20%3F%20proxyUserDataA%20%3A%20null%3B%0A%20%20%20%20%20%20var%20fixtureB%20%3D%0A%20%20%20%20%20%20%20%20proxyUserDataB%20instanceof%20b2Fixture%20%3F%20proxyUserDataB%20%3A%20null%3B%0A%20%20%20%20%20%20var%20bodyA%20%3D%20fixtureA.GetBody()%3B%0A%20%20%20%20%20%20var%20bodyB%20%3D%20fixtureB.GetBody()%3B%0A%20%20%20%20%20%20if%20(bodyA%20%3D%3D%20bodyB)%20return%3B%0A%20%20%20%20%20%20var%20edge%20%3D%20bodyB.GetContactList()%3B%0A%20%20%20%20%20%20while%20(edge)%20%7B%0A%20%20%20%20%20%20%20%20if%20(edge.other%20%3D%3D%20bodyA)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20fA%20%3D%20edge.contact.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20%20%20var%20fB%20%3D%20edge.contact.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(fA%20%3D%3D%20fixtureA%20%26%26%20fB%20%3D%3D%20fixtureB)%20return%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(fA%20%3D%3D%20fixtureB%20%26%26%20fB%20%3D%3D%20fixtureA)%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20edge%20%3D%20edge.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(bodyB.ShouldCollide(bodyA)%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_contactFilter.ShouldCollide(fixtureA%2C%20fixtureB)%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20c%20%3D%20this.m_contactFactory.Create(fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%20%20fixtureA%20%3D%20c.GetFixtureA()%3B%0A%20%20%20%20%20%20fixtureB%20%3D%20c.GetFixtureB()%3B%0A%20%20%20%20%20%20bodyA%20%3D%20fixtureA.m_body%3B%0A%20%20%20%20%20%20bodyB%20%3D%20fixtureB.m_body%3B%0A%20%20%20%20%20%20c.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20c.m_next%20%3D%20this.m_world.m_contactList%3B%0A%20%20%20%20%20%20if%20(this.m_world.m_contactList%20!%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20this.m_world.m_contactList.m_prev%20%3D%20c%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_world.m_contactList%20%3D%20c%3B%0A%20%20%20%20%20%20c.m_nodeA.contact%20%3D%20c%3B%0A%20%20%20%20%20%20c.m_nodeA.other%20%3D%20bodyB%3B%0A%20%20%20%20%20%20c.m_nodeA.prev%20%3D%20null%3B%0A%20%20%20%20%20%20c.m_nodeA.next%20%3D%20bodyA.m_contactList%3B%0A%20%20%20%20%20%20if%20(bodyA.m_contactList%20!%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20bodyA.m_contactList.prev%20%3D%20c.m_nodeA%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20bodyA.m_contactList%20%3D%20c.m_nodeA%3B%0A%20%20%20%20%20%20c.m_nodeB.contact%20%3D%20c%3B%0A%20%20%20%20%20%20c.m_nodeB.other%20%3D%20bodyA%3B%0A%20%20%20%20%20%20c.m_nodeB.prev%20%3D%20null%3B%0A%20%20%20%20%20%20c.m_nodeB.next%20%3D%20bodyB.m_contactList%3B%0A%20%20%20%20%20%20if%20(bodyB.m_contactList%20!%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20bodyB.m_contactList.prev%20%3D%20c.m_nodeB%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20bodyB.m_contactList%20%3D%20c.m_nodeB%3B%0A%20%20%20%20%20%20%2B%2Bthis.m_world.m_contactCount%3B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactManager.prototype.FindNewContacts%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_broadPhase.UpdatePairs(Box2D.generateCallback(this%2C%20this.AddPair))%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactManager.prototype.Destroy%20%3D%20function%20(c)%20%7B%0A%20%20%20%20%20%20var%20fixtureA%20%3D%20c.GetFixtureA()%3B%0A%20%20%20%20%20%20var%20fixtureB%20%3D%20c.GetFixtureB()%3B%0A%20%20%20%20%20%20var%20bodyA%20%3D%20fixtureA.GetBody()%3B%0A%20%20%20%20%20%20var%20bodyB%20%3D%20fixtureB.GetBody()%3B%0A%20%20%20%20%20%20if%20(c.IsTouching())%20%7B%0A%20%20%20%20%20%20%20%20this.m_contactListener.EndContact(c)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(c.m_prev)%20%7B%0A%20%20%20%20%20%20%20%20c.m_prev.m_next%20%3D%20c.m_next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(c.m_next)%20%7B%0A%20%20%20%20%20%20%20%20c.m_next.m_prev%20%3D%20c.m_prev%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(c%20%3D%3D%20this.m_world.m_contactList)%20%7B%0A%20%20%20%20%20%20%20%20this.m_world.m_contactList%20%3D%20c.m_next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(c.m_nodeA.prev)%20%7B%0A%20%20%20%20%20%20%20%20c.m_nodeA.prev.next%20%3D%20c.m_nodeA.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(c.m_nodeA.next)%20%7B%0A%20%20%20%20%20%20%20%20c.m_nodeA.next.prev%20%3D%20c.m_nodeA.prev%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(c.m_nodeA%20%3D%3D%20bodyA.m_contactList)%20%7B%0A%20%20%20%20%20%20%20%20bodyA.m_contactList%20%3D%20c.m_nodeA.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(c.m_nodeB.prev)%20%7B%0A%20%20%20%20%20%20%20%20c.m_nodeB.prev.next%20%3D%20c.m_nodeB.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(c.m_nodeB.next)%20%7B%0A%20%20%20%20%20%20%20%20c.m_nodeB.next.prev%20%3D%20c.m_nodeB.prev%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(c.m_nodeB%20%3D%3D%20bodyB.m_contactList)%20%7B%0A%20%20%20%20%20%20%20%20bodyB.m_contactList%20%3D%20c.m_nodeB.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_contactFactory.Destroy(c)%3B%0A%20%20%20%20%20%20--this.m_contactCount%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactManager.prototype.Collide%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20c%20%3D%20this.m_world.m_contactList%3B%0A%20%20%20%20%20%20while%20(c)%20%7B%0A%20%20%20%20%20%20%20%20var%20fixtureA%20%3D%20c.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20var%20fixtureB%20%3D%20c.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20var%20bodyA%20%3D%20fixtureA.GetBody()%3B%0A%20%20%20%20%20%20%20%20var%20bodyB%20%3D%20fixtureB.GetBody()%3B%0A%20%20%20%20%20%20%20%20if%20(bodyA.IsAwake()%20%3D%3D%20false%20%26%26%20bodyB.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20c%20%3D%20c.GetNext()%3B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(c.m_flags%20%26%20b2Contact.e_filterFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(bodyB.ShouldCollide(bodyA)%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20cNuke%20%3D%20c%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20cNuke.GetNext()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.Destroy(cNuke)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_contactFilter.ShouldCollide(fixtureA%2C%20fixtureB)%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cNuke%20%3D%20c%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20cNuke.GetNext()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.Destroy(cNuke)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20c.m_flags%20%26%3D%20~b2Contact.e_filterFlag%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20proxyA%20%3D%20fixtureA.m_proxy%3B%0A%20%20%20%20%20%20%20%20var%20proxyB%20%3D%20fixtureB.m_proxy%3B%0A%20%20%20%20%20%20%20%20var%20overlap%20%3D%20this.m_broadPhase.TestOverlap(proxyA%2C%20proxyB)%3B%0A%20%20%20%20%20%20%20%20if%20(overlap%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20cNuke%20%3D%20c%3B%0A%20%20%20%20%20%20%20%20%20%20c%20%3D%20cNuke.GetNext()%3B%0A%20%20%20%20%20%20%20%20%20%20this.Destroy(cNuke)%3B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20c.Update(this.m_contactListener)%3B%0A%20%20%20%20%20%20%20%20c%20%3D%20c.GetNext()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.b2ContactManager.s_evalCP%20%3D%20new%20b2ContactPoint()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2DebugDraw.b2DebugDraw%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.b2DebugDraw%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetFlags%20%3D%20function%20(flags)%20%7B%0A%20%20%20%20%20%20if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetFlags%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.AppendFlags%20%3D%20function%20(flags)%20%7B%0A%20%20%20%20%20%20if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.ClearFlags%20%3D%20function%20(flags)%20%7B%0A%20%20%20%20%20%20if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetSprite%20%3D%20function%20(sprite)%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetSprite%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetDrawScale%20%3D%20function%20(drawScale)%20%7B%0A%20%20%20%20%20%20if%20(drawScale%20%3D%3D%3D%20undefined)%20drawScale%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetDrawScale%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetLineThickness%20%3D%20function%20(lineThickness)%20%7B%0A%20%20%20%20%20%20if%20(lineThickness%20%3D%3D%3D%20undefined)%20lineThickness%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetLineThickness%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetAlpha%20%3D%20function%20(alpha)%20%7B%0A%20%20%20%20%20%20if%20(alpha%20%3D%3D%3D%20undefined)%20alpha%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetAlpha%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetFillAlpha%20%3D%20function%20(alpha)%20%7B%0A%20%20%20%20%20%20if%20(alpha%20%3D%3D%3D%20undefined)%20alpha%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetFillAlpha%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetXFormScale%20%3D%20function%20(xformScale)%20%7B%0A%20%20%20%20%20%20if%20(xformScale%20%3D%3D%3D%20undefined)%20xformScale%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetXFormScale%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawPolygon%20%3D%20function%20(%0A%20%20%20%20%20%20vertices%2C%0A%20%20%20%20%20%20vertexCount%2C%0A%20%20%20%20%20%20color%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawSolidPolygon%20%3D%20function%20(%0A%20%20%20%20%20%20vertices%2C%0A%20%20%20%20%20%20vertexCount%2C%0A%20%20%20%20%20%20color%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawCircle%20%3D%20function%20(center%2C%20radius%2C%20color)%20%7B%0A%20%20%20%20%20%20if%20(radius%20%3D%3D%3D%20undefined)%20radius%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawSolidCircle%20%3D%20function%20(%0A%20%20%20%20%20%20center%2C%0A%20%20%20%20%20%20radius%2C%0A%20%20%20%20%20%20axis%2C%0A%20%20%20%20%20%20color%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(radius%20%3D%3D%3D%20undefined)%20radius%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawSegment%20%3D%20function%20(p1%2C%20p2%2C%20color)%20%7B%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawTransform%20%3D%20function%20(xf)%20%7B%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.b2DebugDraw.e_shapeBit%20%3D%200x0001%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2DebugDraw.e_jointBit%20%3D%200x0002%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2DebugDraw.e_aabbBit%20%3D%200x0004%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2DebugDraw.e_pairBit%20%3D%200x0008%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2DebugDraw.e_centerOfMassBit%20%3D%200x0010%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2DebugDraw.e_controllerBit%20%3D%200x0020%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2DestructionListener.b2DestructionListener%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2DestructionListener.prototype.SayGoodbyeJoint%20%3D%20function%20(joint)%20%7B%7D%3B%0A%20%20%20%20b2DestructionListener.prototype.SayGoodbyeFixture%20%3D%20function%20(fixture)%20%7B%7D%3B%0A%20%20%20%20b2FilterData.b2FilterData%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.categoryBits%20%3D%200x0001%3B%0A%20%20%20%20%20%20this.maskBits%20%3D%200xffff%3B%0A%20%20%20%20%20%20this.groupIndex%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FilterData.prototype.Copy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20copy%20%3D%20new%20b2FilterData()%3B%0A%20%20%20%20%20%20copy.categoryBits%20%3D%20this.categoryBits%3B%0A%20%20%20%20%20%20copy.maskBits%20%3D%20this.maskBits%3B%0A%20%20%20%20%20%20copy.groupIndex%20%3D%20this.groupIndex%3B%0A%20%20%20%20%20%20return%20copy%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.b2Fixture%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_filter%20%3D%20new%20b2FilterData()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetType%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_shape.GetType()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetShape%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_shape%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.SetSensor%20%3D%20function%20(sensor)%20%7B%0A%20%20%20%20%20%20if%20(this.m_isSensor%20%3D%3D%20sensor)%20return%3B%0A%20%20%20%20%20%20this.m_isSensor%20%3D%20sensor%3B%0A%20%20%20%20%20%20if%20(this.m_body%20%3D%3D%20null)%20return%3B%0A%20%20%20%20%20%20var%20edge%20%3D%20this.m_body.GetContactList()%3B%0A%20%20%20%20%20%20while%20(edge)%20%7B%0A%20%20%20%20%20%20%20%20var%20contact%20%3D%20edge.contact%3B%0A%20%20%20%20%20%20%20%20var%20fixtureA%20%3D%20contact.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20var%20fixtureB%20%3D%20contact.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20if%20(fixtureA%20%3D%3D%20this%20%7C%7C%20fixtureB%20%3D%3D%20this)%0A%20%20%20%20%20%20%20%20%20%20contact.SetSensor(fixtureA.IsSensor()%20%7C%7C%20fixtureB.IsSensor())%3B%0A%20%20%20%20%20%20%20%20edge%20%3D%20edge.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.IsSensor%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_isSensor%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.SetFilterData%20%3D%20function%20(filter)%20%7B%0A%20%20%20%20%20%20this.m_filter%20%3D%20filter.Copy()%3B%0A%20%20%20%20%20%20if%20(this.m_body)%20return%3B%0A%20%20%20%20%20%20var%20edge%20%3D%20this.m_body.GetContactList()%3B%0A%20%20%20%20%20%20while%20(edge)%20%7B%0A%20%20%20%20%20%20%20%20var%20contact%20%3D%20edge.contact%3B%0A%20%20%20%20%20%20%20%20var%20fixtureA%20%3D%20contact.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20var%20fixtureB%20%3D%20contact.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20if%20(fixtureA%20%3D%3D%20this%20%7C%7C%20fixtureB%20%3D%3D%20this)%20contact.FlagForFiltering()%3B%0A%20%20%20%20%20%20%20%20edge%20%3D%20edge.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetFilterData%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_filter.Copy()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetBody%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_body%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetNext%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_next%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetUserData%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_userData%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.SetUserData%20%3D%20function%20(data)%20%7B%0A%20%20%20%20%20%20this.m_userData%20%3D%20data%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.TestPoint%20%3D%20function%20(p)%20%7B%0A%20%20%20%20%20%20return%20this.m_shape.TestPoint(this.m_body.GetTransform()%2C%20p)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.RayCast%20%3D%20function%20(output%2C%20input)%20%7B%0A%20%20%20%20%20%20return%20this.m_shape.RayCast(output%2C%20input%2C%20this.m_body.GetTransform())%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetMassData%20%3D%20function%20(massData)%20%7B%0A%20%20%20%20%20%20if%20(massData%20%3D%3D%3D%20undefined)%20massData%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(massData%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20massData%20%3D%20new%20b2MassData()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_shape.ComputeMass(massData%2C%20this.m_density)%3B%0A%20%20%20%20%20%20return%20massData%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.SetDensity%20%3D%20function%20(density)%20%7B%0A%20%20%20%20%20%20if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200%3B%0A%20%20%20%20%20%20this.m_density%20%3D%20density%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetDensity%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_density%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetFriction%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_friction%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.SetFriction%20%3D%20function%20(friction)%20%7B%0A%20%20%20%20%20%20if%20(friction%20%3D%3D%3D%20undefined)%20friction%20%3D%200%3B%0A%20%20%20%20%20%20this.m_friction%20%3D%20friction%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetRestitution%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_restitution%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.SetRestitution%20%3D%20function%20(restitution)%20%7B%0A%20%20%20%20%20%20if%20(restitution%20%3D%3D%3D%20undefined)%20restitution%20%3D%200%3B%0A%20%20%20%20%20%20this.m_restitution%20%3D%20restitution%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.GetAABB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_aabb%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.b2Fixture%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_aabb%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20this.m_userData%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_body%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_next%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_shape%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_density%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_friction%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_restitution%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.Create%20%3D%20function%20(body%2C%20xf%2C%20def)%20%7B%0A%20%20%20%20%20%20this.m_userData%20%3D%20def.userData%3B%0A%20%20%20%20%20%20this.m_friction%20%3D%20def.friction%3B%0A%20%20%20%20%20%20this.m_restitution%20%3D%20def.restitution%3B%0A%20%20%20%20%20%20this.m_body%20%3D%20body%3B%0A%20%20%20%20%20%20this.m_next%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_filter%20%3D%20def.filter.Copy()%3B%0A%20%20%20%20%20%20this.m_isSensor%20%3D%20def.isSensor%3B%0A%20%20%20%20%20%20this.m_shape%20%3D%20def.shape.Copy()%3B%0A%20%20%20%20%20%20this.m_density%20%3D%20def.density%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.Destroy%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_shape%20%3D%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.CreateProxy%20%3D%20function%20(broadPhase%2C%20xf)%20%7B%0A%20%20%20%20%20%20this.m_shape.ComputeAABB(this.m_aabb%2C%20xf)%3B%0A%20%20%20%20%20%20this.m_proxy%20%3D%20broadPhase.CreateProxy(this.m_aabb%2C%20this)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.DestroyProxy%20%3D%20function%20(broadPhase)%20%7B%0A%20%20%20%20%20%20if%20(this.m_proxy%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20broadPhase.DestroyProxy(this.m_proxy)%3B%0A%20%20%20%20%20%20this.m_proxy%20%3D%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Fixture.prototype.Synchronize%20%3D%20function%20(%0A%20%20%20%20%20%20broadPhase%2C%0A%20%20%20%20%20%20transform1%2C%0A%20%20%20%20%20%20transform2%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(!this.m_proxy)%20return%3B%0A%20%20%20%20%20%20var%20aabb1%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20var%20aabb2%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20this.m_shape.ComputeAABB(aabb1%2C%20transform1)%3B%0A%20%20%20%20%20%20this.m_shape.ComputeAABB(aabb2%2C%20transform2)%3B%0A%20%20%20%20%20%20this.m_aabb.Combine(aabb1%2C%20aabb2)%3B%0A%20%20%20%20%20%20var%20displacement%20%3D%20b2Math.SubtractVV(%0A%20%20%20%20%20%20%20%20transform2.position%2C%0A%20%20%20%20%20%20%20%20transform1.position%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20broadPhase.MoveProxy(this.m_proxy%2C%20this.m_aabb%2C%20displacement)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FixtureDef.b2FixtureDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.filter%20%3D%20new%20b2FilterData()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FixtureDef.prototype.b2FixtureDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.shape%20%3D%20null%3B%0A%20%20%20%20%20%20this.userData%20%3D%20null%3B%0A%20%20%20%20%20%20this.friction%20%3D%200.2%3B%0A%20%20%20%20%20%20this.restitution%20%3D%200.0%3B%0A%20%20%20%20%20%20this.density%20%3D%200.0%3B%0A%20%20%20%20%20%20this.filter.categoryBits%20%3D%200x0001%3B%0A%20%20%20%20%20%20this.filter.maskBits%20%3D%200xffff%3B%0A%20%20%20%20%20%20this.filter.groupIndex%20%3D%200%3B%0A%20%20%20%20%20%20this.isSensor%20%3D%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Island.b2Island%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Island.prototype.b2Island%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_bodies%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20this.m_contacts%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20this.m_joints%20%3D%20new%20Vector()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Island.prototype.Initialize%20%3D%20function%20(%0A%20%20%20%20%20%20bodyCapacity%2C%0A%20%20%20%20%20%20contactCapacity%2C%0A%20%20%20%20%20%20jointCapacity%2C%0A%20%20%20%20%20%20allocator%2C%0A%20%20%20%20%20%20listener%2C%0A%20%20%20%20%20%20contactSolver%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(bodyCapacity%20%3D%3D%3D%20undefined)%20bodyCapacity%20%3D%200%3B%0A%20%20%20%20%20%20if%20(contactCapacity%20%3D%3D%3D%20undefined)%20contactCapacity%20%3D%200%3B%0A%20%20%20%20%20%20if%20(jointCapacity%20%3D%3D%3D%20undefined)%20jointCapacity%20%3D%200%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20this.m_bodyCapacity%20%3D%20bodyCapacity%3B%0A%20%20%20%20%20%20this.m_contactCapacity%20%3D%20contactCapacity%3B%0A%20%20%20%20%20%20this.m_jointCapacity%20%3D%20jointCapacity%3B%0A%20%20%20%20%20%20this.m_bodyCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_contactCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_jointCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_allocator%20%3D%20allocator%3B%0A%20%20%20%20%20%20this.m_listener%20%3D%20listener%3B%0A%20%20%20%20%20%20this.m_contactSolver%20%3D%20contactSolver%3B%0A%20%20%20%20%20%20for%20(i%20%3D%20this.m_bodies.length%3B%20i%20%3C%20bodyCapacity%3B%20i%2B%2B)%0A%20%20%20%20%20%20%20%20this.m_bodies%5Bi%5D%20%3D%20null%3B%0A%20%20%20%20%20%20for%20(i%20%3D%20this.m_contacts.length%3B%20i%20%3C%20contactCapacity%3B%20i%2B%2B)%0A%20%20%20%20%20%20%20%20this.m_contacts%5Bi%5D%20%3D%20null%3B%0A%20%20%20%20%20%20for%20(i%20%3D%20this.m_joints.length%3B%20i%20%3C%20jointCapacity%3B%20i%2B%2B)%0A%20%20%20%20%20%20%20%20this.m_joints%5Bi%5D%20%3D%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Island.prototype.Clear%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_bodyCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_contactCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_jointCount%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Island.prototype.Solve%20%3D%20function%20(step%2C%20gravity%2C%20allowSleep)%20%7B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20var%20j%20%3D%200%3B%0A%20%20%20%20%20%20var%20b%3B%0A%20%20%20%20%20%20var%20joint%3B%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20b%20%3D%20this.m_bodies%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20(b.GetType()%20!%3D%20b2Body.b2_dynamicBody)%20continue%3B%0A%20%20%20%20%20%20%20%20b.m_linearVelocity.x%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20step.dt%20*%20(gravity.x%20%2B%20b.m_invMass%20*%20b.m_force.x)%3B%0A%20%20%20%20%20%20%20%20b.m_linearVelocity.y%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20step.dt%20*%20(gravity.y%20%2B%20b.m_invMass%20*%20b.m_force.y)%3B%0A%20%20%20%20%20%20%20%20b.m_angularVelocity%20%2B%3D%20step.dt%20*%20b.m_invI%20*%20b.m_torque%3B%0A%20%20%20%20%20%20%20%20b.m_linearVelocity.Multiply(%0A%20%20%20%20%20%20%20%20%20%20b2Math.Clamp(1.0%20-%20step.dt%20*%20b.m_linearDamping%2C%200.0%2C%201.0)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20b.m_angularVelocity%20*%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%201.0%20-%20step.dt%20*%20b.m_angularDamping%2C%0A%20%20%20%20%20%20%20%20%20%200.0%2C%0A%20%20%20%20%20%20%20%20%20%201.0%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_contactSolver.Initialize(%0A%20%20%20%20%20%20%20%20step%2C%0A%20%20%20%20%20%20%20%20this.m_contacts%2C%0A%20%20%20%20%20%20%20%20this.m_contactCount%2C%0A%20%20%20%20%20%20%20%20this.m_allocator%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20contactSolver%20%3D%20this.m_contactSolver%3B%0A%20%20%20%20%20%20contactSolver.InitVelocityConstraints(step)%3B%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_jointCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20joint%20%3D%20this.m_joints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20joint.InitVelocityConstraints(step)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20step.velocityIterations%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20for%20(j%20%3D%200%3B%20j%20%3C%20this.m_jointCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20joint%20%3D%20this.m_joints%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20joint.SolveVelocityConstraints(step)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20contactSolver.SolveVelocityConstraints()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_jointCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20joint%20%3D%20this.m_joints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20joint.FinalizeVelocityConstraints()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20contactSolver.FinalizeVelocityConstraints()%3B%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20b%20%3D%20this.m_bodies%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20continue%3B%0A%20%20%20%20%20%20%20%20var%20translationX%20%3D%20step.dt%20*%20b.m_linearVelocity.x%3B%0A%20%20%20%20%20%20%20%20var%20translationY%20%3D%20step.dt%20*%20b.m_linearVelocity.y%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20translationX%20*%20translationX%20%2B%20translationY%20*%20translationY%20%3E%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2_maxTranslationSquared%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b.m_linearVelocity.Normalize()%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_linearVelocity.x%20*%3D%20b2Settings.b2_maxTranslation%20*%20step.inv_dt%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_linearVelocity.y%20*%3D%20b2Settings.b2_maxTranslation%20*%20step.inv_dt%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20rotation%20%3D%20step.dt%20*%20b.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20if%20(rotation%20*%20rotation%20%3E%20b2Settings.b2_maxRotationSquared)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(b.m_angularVelocity%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_angularVelocity%20%3D%20-b2Settings.b2_maxRotation%20*%20step.inv_dt%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_angularVelocity%20%3D%20b2Settings.b2_maxRotation%20*%20step.inv_dt%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20b.m_sweep.c0.SetV(b.m_sweep.c)%3B%0A%20%20%20%20%20%20%20%20b.m_sweep.a0%20%3D%20b.m_sweep.a%3B%0A%20%20%20%20%20%20%20%20b.m_sweep.c.x%20%2B%3D%20step.dt%20*%20b.m_linearVelocity.x%3B%0A%20%20%20%20%20%20%20%20b.m_sweep.c.y%20%2B%3D%20step.dt%20*%20b.m_linearVelocity.y%3B%0A%20%20%20%20%20%20%20%20b.m_sweep.a%20%2B%3D%20step.dt%20*%20b.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20b.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20step.positionIterations%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20contactsOkay%20%3D%20contactSolver.SolvePositionConstraints(%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2_contactBaumgarte%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20var%20jointsOkay%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20for%20(j%20%3D%200%3B%20j%20%3C%20this.m_jointCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20joint%20%3D%20this.m_joints%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20jointOkay%20%3D%20joint.SolvePositionConstraints(%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2_contactBaumgarte%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20jointsOkay%20%3D%20jointsOkay%20%26%26%20jointOkay%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(contactsOkay%20%26%26%20jointsOkay)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.Report(contactSolver.m_constraints)%3B%0A%20%20%20%20%20%20if%20(allowSleep)%20%7B%0A%20%20%20%20%20%20%20%20var%20minSleepTime%20%3D%20Number.MAX_VALUE%3B%0A%20%20%20%20%20%20%20%20var%20linTolSqr%20%3D%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2_linearSleepTolerance%20*%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2_linearSleepTolerance%3B%0A%20%20%20%20%20%20%20%20var%20angTolSqr%20%3D%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2_angularSleepTolerance%20*%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2_angularSleepTolerance%3B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b%20%3D%20this.m_bodies%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20((b.m_flags%20%26%20b2Body.e_allowSleepFlag)%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_sleepTime%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20minSleepTime%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20(b.m_flags%20%26%20b2Body.e_allowSleepFlag)%20%3D%3D%200%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_angularVelocity%20*%20b.m_angularVelocity%20%3E%20angTolSqr%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Math.Dot(b.m_linearVelocity%2C%20b.m_linearVelocity)%20%3E%20linTolSqr%0A%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_sleepTime%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20minSleepTime%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_sleepTime%20%2B%3D%20step.dt%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20minSleepTime%20%3D%20b2Math.Min(minSleepTime%2C%20b.m_sleepTime)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(minSleepTime%20%3E%3D%20b2Settings.b2_timeToSleep)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b%20%3D%20this.m_bodies%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.SetAwake(false)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Island.prototype.SolveTOI%20%3D%20function%20(subStep)%20%7B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20var%20j%20%3D%200%3B%0A%20%20%20%20%20%20this.m_contactSolver.Initialize(%0A%20%20%20%20%20%20%20%20subStep%2C%0A%20%20%20%20%20%20%20%20this.m_contacts%2C%0A%20%20%20%20%20%20%20%20this.m_contactCount%2C%0A%20%20%20%20%20%20%20%20this.m_allocator%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20contactSolver%20%3D%20this.m_contactSolver%3B%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_jointCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20this.m_joints%5Bi%5D.InitVelocityConstraints(subStep)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20subStep.velocityIterations%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20contactSolver.SolveVelocityConstraints()%3B%0A%20%20%20%20%20%20%20%20for%20(j%20%3D%200%3B%20j%20%3C%20this.m_jointCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_joints%5Bj%5D.SolveVelocityConstraints(subStep)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20this.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20b%20%3D%20this.m_bodies%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20continue%3B%0A%20%20%20%20%20%20%20%20var%20translationX%20%3D%20subStep.dt%20*%20b.m_linearVelocity.x%3B%0A%20%20%20%20%20%20%20%20var%20translationY%20%3D%20subStep.dt%20*%20b.m_linearVelocity.y%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20translationX%20*%20translationX%20%2B%20translationY%20*%20translationY%20%3E%0A%20%20%20%20%20%20%20%20%20%20b2Settings.b2_maxTranslationSquared%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b.m_linearVelocity.Normalize()%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_linearVelocity.x%20*%3D%20b2Settings.b2_maxTranslation%20*%20subStep.inv_dt%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_linearVelocity.y%20*%3D%20b2Settings.b2_maxTranslation%20*%20subStep.inv_dt%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20rotation%20%3D%20subStep.dt%20*%20b.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20if%20(rotation%20*%20rotation%20%3E%20b2Settings.b2_maxRotationSquared)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(b.m_angularVelocity%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_angularVelocity%20%3D%20-b2Settings.b2_maxRotation%20*%20subStep.inv_dt%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_angularVelocity%20%3D%20b2Settings.b2_maxRotation%20*%20subStep.inv_dt%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20b.m_sweep.c0.SetV(b.m_sweep.c)%3B%0A%20%20%20%20%20%20%20%20b.m_sweep.a0%20%3D%20b.m_sweep.a%3B%0A%20%20%20%20%20%20%20%20b.m_sweep.c.x%20%2B%3D%20subStep.dt%20*%20b.m_linearVelocity.x%3B%0A%20%20%20%20%20%20%20%20b.m_sweep.c.y%20%2B%3D%20subStep.dt%20*%20b.m_linearVelocity.y%3B%0A%20%20%20%20%20%20%20%20b.m_sweep.a%20%2B%3D%20subStep.dt%20*%20b.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20b.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20k_toiBaumgarte%20%3D%200.75%3B%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20subStep.positionIterations%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20contactsOkay%20%3D%0A%20%20%20%20%20%20%20%20%20%20contactSolver.SolvePositionConstraints(k_toiBaumgarte)%3B%0A%20%20%20%20%20%20%20%20var%20jointsOkay%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20for%20(j%20%3D%200%3B%20j%20%3C%20this.m_jointCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20jointOkay%20%3D%20this.m_joints%5Bj%5D.SolvePositionConstraints(%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2_contactBaumgarte%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20jointsOkay%20%3D%20jointsOkay%20%26%26%20jointOkay%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(contactsOkay%20%26%26%20jointsOkay)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.Report(contactSolver.m_constraints)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Island.prototype.Report%20%3D%20function%20(constraints)%20%7B%0A%20%20%20%20%20%20if%20(this.m_listener%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_contactCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20this.m_contacts%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20cc%20%3D%20constraints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20for%20(var%20j%20%3D%200%3B%20j%20%3C%20cc.pointCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b2Island.s_impulse.normalImpulses%5Bj%5D%20%3D%20cc.points%5Bj%5D.normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20b2Island.s_impulse.tangentImpulses%5Bj%5D%20%3D%20cc.points%5Bj%5D.tangentImpulse%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_listener.PostSolve(c%2C%20b2Island.s_impulse)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Island.prototype.AddBody%20%3D%20function%20(body)%20%7B%0A%20%20%20%20%20%20body.m_islandIndex%20%3D%20this.m_bodyCount%3B%0A%20%20%20%20%20%20this.m_bodies%5Bthis.m_bodyCount%2B%2B%5D%20%3D%20body%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Island.prototype.AddContact%20%3D%20function%20(contact)%20%7B%0A%20%20%20%20%20%20this.m_contacts%5Bthis.m_contactCount%2B%2B%5D%20%3D%20contact%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Island.prototype.AddJoint%20%3D%20function%20(joint)%20%7B%0A%20%20%20%20%20%20this.m_joints%5Bthis.m_jointCount%2B%2B%5D%20%3D%20joint%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.b2Island.s_impulse%20%3D%20new%20b2ContactImpulse()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2TimeStep.b2TimeStep%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2TimeStep.prototype.Set%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20this.dt%20%3D%20step.dt%3B%0A%20%20%20%20%20%20this.inv_dt%20%3D%20step.inv_dt%3B%0A%20%20%20%20%20%20this.positionIterations%20%3D%20step.positionIterations%3B%0A%20%20%20%20%20%20this.velocityIterations%20%3D%20step.velocityIterations%3B%0A%20%20%20%20%20%20this.warmStarting%20%3D%20step.warmStarting%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.b2World%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.s_stack%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20this.m_contactManager%20%3D%20new%20b2ContactManager()%3B%0A%20%20%20%20%20%20this.m_contactSolver%20%3D%20new%20b2ContactSolver()%3B%0A%20%20%20%20%20%20this.m_island%20%3D%20new%20b2Island()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.b2World%20%3D%20function%20(gravity%2C%20doSleep)%20%7B%0A%20%20%20%20%20%20this.m_destructionListener%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_debugDraw%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_bodyList%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_contactList%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_jointList%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_controllerList%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_bodyCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_contactCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_jointCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_controllerCount%20%3D%200%3B%0A%20%20%20%20%20%20b2World.m_warmStarting%20%3D%20true%3B%0A%20%20%20%20%20%20b2World.m_continuousPhysics%20%3D%20true%3B%0A%20%20%20%20%20%20this.m_allowSleep%20%3D%20doSleep%3B%0A%20%20%20%20%20%20this.m_gravity%20%3D%20gravity%3B%0A%20%20%20%20%20%20this.m_inv_dt0%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_contactManager.m_world%20%3D%20this%3B%0A%20%20%20%20%20%20var%20bd%20%3D%20new%20b2BodyDef()%3B%0A%20%20%20%20%20%20this.m_groundBody%20%3D%20this.CreateBody(bd)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.SetDestructionListener%20%3D%20function%20(listener)%20%7B%0A%20%20%20%20%20%20this.m_destructionListener%20%3D%20listener%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.SetContactFilter%20%3D%20function%20(filter)%20%7B%0A%20%20%20%20%20%20this.m_contactManager.m_contactFilter%20%3D%20filter%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.SetContactListener%20%3D%20function%20(listener)%20%7B%0A%20%20%20%20%20%20this.m_contactManager.m_contactListener%20%3D%20listener%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.SetDebugDraw%20%3D%20function%20(debugDraw)%20%7B%0A%20%20%20%20%20%20this.m_debugDraw%20%3D%20debugDraw%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.SetBroadPhase%20%3D%20function%20(broadPhase)%20%7B%0A%20%20%20%20%20%20var%20oldBroadPhase%20%3D%20this.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20this.m_contactManager.m_broadPhase%20%3D%20broadPhase%3B%0A%20%20%20%20%20%20for%20(var%20b%20%3D%20this.m_bodyList%3B%20b%3B%20b%20%3D%20b.m_next)%20%7B%0A%20%20%20%20%20%20%20%20for%20(var%20f%20%3D%20b.m_fixtureList%3B%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20f.m_proxy%20%3D%20broadPhase.CreateProxy(%0A%20%20%20%20%20%20%20%20%20%20%20%20oldBroadPhase.GetFatAABB(f.m_proxy)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20f%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.Validate%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_contactManager.m_broadPhase.Validate()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.GetProxyCount%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_contactManager.m_broadPhase.GetProxyCount()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.CreateBody%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20if%20(this.IsLocked()%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20b%20%3D%20new%20b2Body(def%2C%20this)%3B%0A%20%20%20%20%20%20b.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20b.m_next%20%3D%20this.m_bodyList%3B%0A%20%20%20%20%20%20if%20(this.m_bodyList)%20%7B%0A%20%20%20%20%20%20%20%20this.m_bodyList.m_prev%20%3D%20b%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_bodyList%20%3D%20b%3B%0A%20%20%20%20%20%20%2B%2Bthis.m_bodyCount%3B%0A%20%20%20%20%20%20return%20b%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.DestroyBody%20%3D%20function%20(b)%20%7B%0A%20%20%20%20%20%20if%20(this.IsLocked()%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20jn%20%3D%20b.m_jointList%3B%0A%20%20%20%20%20%20while%20(jn)%20%7B%0A%20%20%20%20%20%20%20%20var%20jn0%20%3D%20jn%3B%0A%20%20%20%20%20%20%20%20jn%20%3D%20jn.next%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_destructionListener)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_destructionListener.SayGoodbyeJoint(jn0.joint)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.DestroyJoint(jn0.joint)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20coe%20%3D%20b.m_controllerList%3B%0A%20%20%20%20%20%20while%20(coe)%20%7B%0A%20%20%20%20%20%20%20%20var%20coe0%20%3D%20coe%3B%0A%20%20%20%20%20%20%20%20coe%20%3D%20coe.nextController%3B%0A%20%20%20%20%20%20%20%20coe0.controller.RemoveBody(b)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20ce%20%3D%20b.m_contactList%3B%0A%20%20%20%20%20%20while%20(ce)%20%7B%0A%20%20%20%20%20%20%20%20var%20ce0%20%3D%20ce%3B%0A%20%20%20%20%20%20%20%20ce%20%3D%20ce.next%3B%0A%20%20%20%20%20%20%20%20this.m_contactManager.Destroy(ce0.contact)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20b.m_contactList%20%3D%20null%3B%0A%20%20%20%20%20%20var%20f%20%3D%20b.m_fixtureList%3B%0A%20%20%20%20%20%20while%20(f)%20%7B%0A%20%20%20%20%20%20%20%20var%20f0%20%3D%20f%3B%0A%20%20%20%20%20%20%20%20f%20%3D%20f.m_next%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_destructionListener)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_destructionListener.SayGoodbyeFixture(f0)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20f0.DestroyProxy(this.m_contactManager.m_broadPhase)%3B%0A%20%20%20%20%20%20%20%20f0.Destroy()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20b.m_fixtureList%20%3D%20null%3B%0A%20%20%20%20%20%20b.m_fixtureCount%20%3D%200%3B%0A%20%20%20%20%20%20if%20(b.m_prev)%20%7B%0A%20%20%20%20%20%20%20%20b.m_prev.m_next%20%3D%20b.m_next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(b.m_next)%20%7B%0A%20%20%20%20%20%20%20%20b.m_next.m_prev%20%3D%20b.m_prev%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(b%20%3D%3D%20this.m_bodyList)%20%7B%0A%20%20%20%20%20%20%20%20this.m_bodyList%20%3D%20b.m_next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20--this.m_bodyCount%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.CreateJoint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20var%20j%20%3D%20b2Joint.Create(def%2C%20null)%3B%0A%20%20%20%20%20%20j.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20j.m_next%20%3D%20this.m_jointList%3B%0A%20%20%20%20%20%20if%20(this.m_jointList)%20%7B%0A%20%20%20%20%20%20%20%20this.m_jointList.m_prev%20%3D%20j%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_jointList%20%3D%20j%3B%0A%20%20%20%20%20%20%2B%2Bthis.m_jointCount%3B%0A%20%20%20%20%20%20j.m_edgeA.joint%20%3D%20j%3B%0A%20%20%20%20%20%20j.m_edgeA.other%20%3D%20j.m_bodyB%3B%0A%20%20%20%20%20%20j.m_edgeA.prev%20%3D%20null%3B%0A%20%20%20%20%20%20j.m_edgeA.next%20%3D%20j.m_bodyA.m_jointList%3B%0A%20%20%20%20%20%20if%20(j.m_bodyA.m_jointList)%20j.m_bodyA.m_jointList.prev%20%3D%20j.m_edgeA%3B%0A%20%20%20%20%20%20j.m_bodyA.m_jointList%20%3D%20j.m_edgeA%3B%0A%20%20%20%20%20%20j.m_edgeB.joint%20%3D%20j%3B%0A%20%20%20%20%20%20j.m_edgeB.other%20%3D%20j.m_bodyA%3B%0A%20%20%20%20%20%20j.m_edgeB.prev%20%3D%20null%3B%0A%20%20%20%20%20%20j.m_edgeB.next%20%3D%20j.m_bodyB.m_jointList%3B%0A%20%20%20%20%20%20if%20(j.m_bodyB.m_jointList)%20j.m_bodyB.m_jointList.prev%20%3D%20j.m_edgeB%3B%0A%20%20%20%20%20%20j.m_bodyB.m_jointList%20%3D%20j.m_edgeB%3B%0A%20%20%20%20%20%20var%20bodyA%20%3D%20def.bodyA%3B%0A%20%20%20%20%20%20var%20bodyB%20%3D%20def.bodyB%3B%0A%20%20%20%20%20%20if%20(def.collideConnected%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20var%20edge%20%3D%20bodyB.GetContactList()%3B%0A%20%20%20%20%20%20%20%20while%20(edge)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(edge.other%20%3D%3D%20bodyA)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20edge.contact.FlagForFiltering()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20edge%20%3D%20edge.next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20j%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.DestroyJoint%20%3D%20function%20(j)%20%7B%0A%20%20%20%20%20%20var%20collideConnected%20%3D%20j.m_collideConnected%3B%0A%20%20%20%20%20%20if%20(j.m_prev)%20%7B%0A%20%20%20%20%20%20%20%20j.m_prev.m_next%20%3D%20j.m_next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(j.m_next)%20%7B%0A%20%20%20%20%20%20%20%20j.m_next.m_prev%20%3D%20j.m_prev%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(j%20%3D%3D%20this.m_jointList)%20%7B%0A%20%20%20%20%20%20%20%20this.m_jointList%20%3D%20j.m_next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20bodyA%20%3D%20j.m_bodyA%3B%0A%20%20%20%20%20%20var%20bodyB%20%3D%20j.m_bodyB%3B%0A%20%20%20%20%20%20bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20if%20(j.m_edgeA.prev)%20%7B%0A%20%20%20%20%20%20%20%20j.m_edgeA.prev.next%20%3D%20j.m_edgeA.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(j.m_edgeA.next)%20%7B%0A%20%20%20%20%20%20%20%20j.m_edgeA.next.prev%20%3D%20j.m_edgeA.prev%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(j.m_edgeA%20%3D%3D%20bodyA.m_jointList)%20%7B%0A%20%20%20%20%20%20%20%20bodyA.m_jointList%20%3D%20j.m_edgeA.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20j.m_edgeA.prev%20%3D%20null%3B%0A%20%20%20%20%20%20j.m_edgeA.next%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(j.m_edgeB.prev)%20%7B%0A%20%20%20%20%20%20%20%20j.m_edgeB.prev.next%20%3D%20j.m_edgeB.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(j.m_edgeB.next)%20%7B%0A%20%20%20%20%20%20%20%20j.m_edgeB.next.prev%20%3D%20j.m_edgeB.prev%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(j.m_edgeB%20%3D%3D%20bodyB.m_jointList)%20%7B%0A%20%20%20%20%20%20%20%20bodyB.m_jointList%20%3D%20j.m_edgeB.next%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20j.m_edgeB.prev%20%3D%20null%3B%0A%20%20%20%20%20%20j.m_edgeB.next%20%3D%20null%3B%0A%20%20%20%20%20%20b2Joint.Destroy(j%2C%20null)%3B%0A%20%20%20%20%20%20--this.m_jointCount%3B%0A%20%20%20%20%20%20if%20(collideConnected%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20var%20edge%20%3D%20bodyB.GetContactList()%3B%0A%20%20%20%20%20%20%20%20while%20(edge)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(edge.other%20%3D%3D%20bodyA)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20edge.contact.FlagForFiltering()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20edge%20%3D%20edge.next%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.AddController%20%3D%20function%20(c)%20%7B%0A%20%20%20%20%20%20c.m_next%20%3D%20this.m_controllerList%3B%0A%20%20%20%20%20%20c.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_controllerList%20%3D%20c%3B%0A%20%20%20%20%20%20c.m_world%20%3D%20this%3B%0A%20%20%20%20%20%20this.m_controllerCount%2B%2B%3B%0A%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.RemoveController%20%3D%20function%20(c)%20%7B%0A%20%20%20%20%20%20if%20(c.m_prev)%20c.m_prev.m_next%20%3D%20c.m_next%3B%0A%20%20%20%20%20%20if%20(c.m_next)%20c.m_next.m_prev%20%3D%20c.m_prev%3B%0A%20%20%20%20%20%20if%20(this.m_controllerList%20%3D%3D%20c)%20this.m_controllerList%20%3D%20c.m_next%3B%0A%20%20%20%20%20%20this.m_controllerCount--%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.CreateController%20%3D%20function%20(controller)%20%7B%0A%20%20%20%20%20%20if%20(controller.m_world%20!%3D%20this)%0A%20%20%20%20%20%20%20%20throw%20new%20Error(%22Controller%20can%20only%20be%20a%20member%20of%20one%20world%22)%3B%0A%20%20%20%20%20%20controller.m_next%20%3D%20this.m_controllerList%3B%0A%20%20%20%20%20%20controller.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(this.m_controllerList)%20this.m_controllerList.m_prev%20%3D%20controller%3B%0A%20%20%20%20%20%20this.m_controllerList%20%3D%20controller%3B%0A%20%20%20%20%20%20%2B%2Bthis.m_controllerCount%3B%0A%20%20%20%20%20%20controller.m_world%20%3D%20this%3B%0A%20%20%20%20%20%20return%20controller%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.DestroyController%20%3D%20function%20(controller)%20%7B%0A%20%20%20%20%20%20controller.Clear()%3B%0A%20%20%20%20%20%20if%20(controller.m_next)%20controller.m_next.m_prev%20%3D%20controller.m_prev%3B%0A%20%20%20%20%20%20if%20(controller.m_prev)%20controller.m_prev.m_next%20%3D%20controller.m_next%3B%0A%20%20%20%20%20%20if%20(controller%20%3D%3D%20this.m_controllerList)%0A%20%20%20%20%20%20%20%20this.m_controllerList%20%3D%20controller.m_next%3B%0A%20%20%20%20%20%20--this.m_controllerCount%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.SetWarmStarting%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20b2World.m_warmStarting%20%3D%20flag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.SetContinuousPhysics%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20b2World.m_continuousPhysics%20%3D%20flag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.GetBodyCount%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyCount%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.GetJointCount%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_jointCount%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.GetContactCount%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_contactCount%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.SetGravity%20%3D%20function%20(gravity)%20%7B%0A%20%20%20%20%20%20this.m_gravity%20%3D%20gravity%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.GetGravity%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_gravity%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.GetGroundBody%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_groundBody%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.Step%20%3D%20function%20(%0A%20%20%20%20%20%20dt%2C%0A%20%20%20%20%20%20velocityIterations%2C%0A%20%20%20%20%20%20positionIterations%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(dt%20%3D%3D%3D%20undefined)%20dt%20%3D%200%3B%0A%20%20%20%20%20%20if%20(velocityIterations%20%3D%3D%3D%20undefined)%20velocityIterations%20%3D%200%3B%0A%20%20%20%20%20%20if%20(positionIterations%20%3D%3D%3D%20undefined)%20positionIterations%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_flags%20%26%20b2World.e_newFixture)%20%7B%0A%20%20%20%20%20%20%20%20this.m_contactManager.FindNewContacts()%3B%0A%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2World.e_newFixture%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2World.e_locked%3B%0A%20%20%20%20%20%20var%20step%20%3D%20b2World.s_timestep2%3B%0A%20%20%20%20%20%20step.dt%20%3D%20dt%3B%0A%20%20%20%20%20%20step.velocityIterations%20%3D%20velocityIterations%3B%0A%20%20%20%20%20%20step.positionIterations%20%3D%20positionIterations%3B%0A%20%20%20%20%20%20if%20(dt%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20step.inv_dt%20%3D%201.0%20%2F%20dt%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20step.inv_dt%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20step.dtRatio%20%3D%20this.m_inv_dt0%20*%20dt%3B%0A%20%20%20%20%20%20step.warmStarting%20%3D%20b2World.m_warmStarting%3B%0A%20%20%20%20%20%20this.m_contactManager.Collide()%3B%0A%20%20%20%20%20%20if%20(step.dt%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.Solve(step)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(b2World.m_continuousPhysics%20%26%26%20step.dt%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.SolveTOI(step)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(step.dt%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.m_inv_dt0%20%3D%20step.inv_dt%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2World.e_locked%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.ClearForces%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20for%20(var%20body%20%3D%20this.m_bodyList%3B%20body%3B%20body%20%3D%20body.m_next)%20%7B%0A%20%20%20%20%20%20%20%20body.m_force.SetZero()%3B%0A%20%20%20%20%20%20%20%20body.m_torque%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.DrawDebugData%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20if%20(this.m_debugDraw%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_debugDraw.m_sprite.graphics.clear()%3B%0A%20%20%20%20%20%20var%20flags%20%3D%20this.m_debugDraw.GetFlags()%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20var%20b%3B%0A%20%20%20%20%20%20var%20f%3B%0A%20%20%20%20%20%20var%20s%3B%0A%20%20%20%20%20%20var%20j%3B%0A%20%20%20%20%20%20var%20bp%3B%0A%20%20%20%20%20%20var%20invQ%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20var%20x1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20var%20x2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20var%20xf%3B%0A%20%20%20%20%20%20var%20b1%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20var%20b2%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20var%20vs%20%3D%20%5Bnew%20b2Vec2()%2C%20new%20b2Vec2()%2C%20new%20b2Vec2()%2C%20new%20b2Vec2()%5D%3B%0A%20%20%20%20%20%20var%20color%20%3D%20new%20b2Color(0%2C%200%2C%200)%3B%0A%20%20%20%20%20%20if%20(flags%20%26%20b2DebugDraw.e_shapeBit)%20%7B%0A%20%20%20%20%20%20%20%20for%20(b%20%3D%20this.m_bodyList%3B%20b%3B%20b%20%3D%20b.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20xf%20%3D%20b.m_xf%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(f%20%3D%20b.GetFixtureList()%3B%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20s%20%3D%20f.GetShape()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(b.IsActive()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20color.Set(0.5%2C%200.5%2C%200.3)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.DrawShape(s%2C%20xf%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20color.Set(0.5%2C%200.9%2C%200.5)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.DrawShape(s%2C%20xf%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_kinematicBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20color.Set(0.5%2C%200.5%2C%200.9)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.DrawShape(s%2C%20xf%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(b.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20color.Set(0.6%2C%200.6%2C%200.6)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.DrawShape(s%2C%20xf%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20color.Set(0.9%2C%200.7%2C%200.7)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.DrawShape(s%2C%20xf%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(flags%20%26%20b2DebugDraw.e_jointBit)%20%7B%0A%20%20%20%20%20%20%20%20for%20(j%20%3D%20this.m_jointList%3B%20j%3B%20j%20%3D%20j.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.DrawJoint(j)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(flags%20%26%20b2DebugDraw.e_controllerBit)%20%7B%0A%20%20%20%20%20%20%20%20for%20(var%20c%20%3D%20this.m_controllerList%3B%20c%3B%20c%20%3D%20c.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20c.Draw(this.m_debugDraw)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(flags%20%26%20b2DebugDraw.e_pairBit)%20%7B%0A%20%20%20%20%20%20%20%20color.Set(0.3%2C%200.9%2C%200.9)%3B%0A%20%20%20%20%20%20%20%20for%20(%0A%20%20%20%20%20%20%20%20%20%20var%20contact%20%3D%20this.m_contactManager.m_contactList%3B%0A%20%20%20%20%20%20%20%20%20%20contact%3B%0A%20%20%20%20%20%20%20%20%20%20contact%20%3D%20contact.GetNext()%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20fixtureA%20%3D%20contact.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20%20%20var%20fixtureB%20%3D%20contact.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20%20%20var%20cA%20%3D%20fixtureA.GetAABB().GetCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20var%20cB%20%3D%20fixtureB.GetAABB().GetCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(cA%2C%20cB%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(flags%20%26%20b2DebugDraw.e_aabbBit)%20%7B%0A%20%20%20%20%20%20%20%20bp%20%3D%20this.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20%20%20vs%20%3D%20%5Bnew%20b2Vec2()%2C%20new%20b2Vec2()%2C%20new%20b2Vec2()%2C%20new%20b2Vec2()%5D%3B%0A%20%20%20%20%20%20%20%20for%20(b%20%3D%20this.m_bodyList%3B%20b%3B%20b%20%3D%20b.GetNext())%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(b.IsActive()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20for%20(f%20%3D%20b.GetFixtureList()%3B%20f%3B%20f%20%3D%20f.GetNext())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20aabb%20%3D%20bp.GetFatAABB(f.m_proxy)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vs%5B0%5D.Set(aabb.lowerBound.x%2C%20aabb.lowerBound.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vs%5B1%5D.Set(aabb.upperBound.x%2C%20aabb.lowerBound.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vs%5B2%5D.Set(aabb.upperBound.x%2C%20aabb.upperBound.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vs%5B3%5D.Set(aabb.lowerBound.x%2C%20aabb.upperBound.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawPolygon(vs%2C%204%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(flags%20%26%20b2DebugDraw.e_centerOfMassBit)%20%7B%0A%20%20%20%20%20%20%20%20for%20(b%20%3D%20this.m_bodyList%3B%20b%3B%20b%20%3D%20b.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20xf%20%3D%20b2World.s_xf%3B%0A%20%20%20%20%20%20%20%20%20%20xf.R%20%3D%20b.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20xf.position%20%3D%20b.GetWorldCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawTransform(xf)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.QueryAABB%20%3D%20function%20(callback%2C%20aabb)%20%7B%0A%20%20%20%20%20%20var%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20var%20broadPhase%20%3D%20__this.m_contactManager.m_broadPhase%3B%0A%0A%20%20%20%20%20%20function%20WorldQueryWrapper(proxy)%20%7B%0A%20%20%20%20%20%20%20%20return%20callback(broadPhase.GetUserData(proxy))%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20broadPhase.Query(WorldQueryWrapper%2C%20aabb)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.QueryShape%20%3D%20function%20(callback%2C%20shape%2C%20transform)%20%7B%0A%20%20%20%20%20%20var%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20if%20(transform%20%3D%3D%3D%20undefined)%20transform%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(transform%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20transform%20%3D%20new%20b2Transform()%3B%0A%20%20%20%20%20%20%20%20transform.SetIdentity()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20broadPhase%20%3D%20__this.m_contactManager.m_broadPhase%3B%0A%0A%20%20%20%20%20%20function%20WorldQueryWrapper(proxy)%20%7B%0A%20%20%20%20%20%20%20%20var%20fixture%20%3D%0A%20%20%20%20%20%20%20%20%20%20broadPhase.GetUserData(proxy)%20instanceof%20b2Fixture%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%20broadPhase.GetUserData(proxy)%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20b2Shape.TestOverlap(%0A%20%20%20%20%20%20%20%20%20%20%20%20shape%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20transform%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20fixture.GetShape()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20fixture.GetBody().GetTransform()%0A%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20return%20callback(fixture)%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20aabb%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20shape.ComputeAABB(aabb%2C%20transform)%3B%0A%20%20%20%20%20%20broadPhase.Query(WorldQueryWrapper%2C%20aabb)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.QueryPoint%20%3D%20function%20(callback%2C%20p)%20%7B%0A%20%20%20%20%20%20var%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20var%20broadPhase%20%3D%20__this.m_contactManager.m_broadPhase%3B%0A%0A%20%20%20%20%20%20function%20WorldQueryWrapper(proxy)%20%7B%0A%20%20%20%20%20%20%20%20var%20fixture%20%3D%0A%20%20%20%20%20%20%20%20%20%20broadPhase.GetUserData(proxy)%20instanceof%20b2Fixture%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%20broadPhase.GetUserData(proxy)%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20if%20(fixture.TestPoint(p))%20return%20callback(fixture)%3B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20aabb%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20aabb.lowerBound.Set(%0A%20%20%20%20%20%20%20%20p.x%20-%20b2Settings.b2_linearSlop%2C%0A%20%20%20%20%20%20%20%20p.y%20-%20b2Settings.b2_linearSlop%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20aabb.upperBound.Set(%0A%20%20%20%20%20%20%20%20p.x%20%2B%20b2Settings.b2_linearSlop%2C%0A%20%20%20%20%20%20%20%20p.y%20%2B%20b2Settings.b2_linearSlop%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20broadPhase.Query(WorldQueryWrapper%2C%20aabb)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.RayCast%20%3D%20function%20(callback%2C%20point1%2C%20point2)%20%7B%0A%20%20%20%20%20%20var%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20var%20broadPhase%20%3D%20__this.m_contactManager.m_broadPhase%3B%0A%20%20%20%20%20%20var%20output%20%3D%20new%20b2RayCastOutput()%3B%0A%0A%20%20%20%20%20%20function%20RayCastWrapper(input%2C%20proxy)%20%7B%0A%20%20%20%20%20%20%20%20var%20userData%20%3D%20broadPhase.GetUserData(proxy)%3B%0A%20%20%20%20%20%20%20%20var%20fixture%20%3D%20userData%20instanceof%20b2Fixture%20%3F%20userData%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20var%20hit%20%3D%20fixture.RayCast(output%2C%20input)%3B%0A%20%20%20%20%20%20%20%20if%20(hit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20fraction%20%3D%20output.fraction%3B%0A%20%20%20%20%20%20%20%20%20%20var%20point%20%3D%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20%20%20%20%20(1.0%20-%20fraction)%20*%20point1.x%20%2B%20fraction%20*%20point2.x%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20(1.0%20-%20fraction)%20*%20point1.y%20%2B%20fraction%20*%20point2.y%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20callback(fixture%2C%20point%2C%20output.normal%2C%20fraction)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20input.maxFraction%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20input%20%3D%20new%20b2RayCastInput(point1%2C%20point2)%3B%0A%20%20%20%20%20%20broadPhase.RayCast(RayCastWrapper%2C%20input)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.RayCastOne%20%3D%20function%20(point1%2C%20point2)%20%7B%0A%20%20%20%20%20%20var%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20var%20result%3B%0A%0A%20%20%20%20%20%20function%20RayCastOneWrapper(fixture%2C%20point%2C%20normal%2C%20fraction)%20%7B%0A%20%20%20%20%20%20%20%20if%20(fraction%20%3D%3D%3D%20undefined)%20fraction%20%3D%200%3B%0A%20%20%20%20%20%20%20%20result%20%3D%20fixture%3B%0A%20%20%20%20%20%20%20%20return%20fraction%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20__this.RayCast(RayCastOneWrapper%2C%20point1%2C%20point2)%3B%0A%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.RayCastAll%20%3D%20function%20(point1%2C%20point2)%20%7B%0A%20%20%20%20%20%20var%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20var%20result%20%3D%20new%20Vector()%3B%0A%0A%20%20%20%20%20%20function%20RayCastAllWrapper(fixture%2C%20point%2C%20normal%2C%20fraction)%20%7B%0A%20%20%20%20%20%20%20%20if%20(fraction%20%3D%3D%3D%20undefined)%20fraction%20%3D%200%3B%0A%20%20%20%20%20%20%20%20result%5Bresult.length%5D%20%3D%20fixture%3B%0A%20%20%20%20%20%20%20%20return%201%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20__this.RayCast(RayCastAllWrapper%2C%20point1%2C%20point2)%3B%0A%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.GetBodyList%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyList%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.GetJointList%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_jointList%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.GetContactList%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_contactList%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.IsLocked%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(this.m_flags%20%26%20b2World.e_locked)%20%3E%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.Solve%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20b%3B%0A%20%20%20%20%20%20for%20(%0A%20%20%20%20%20%20%20%20var%20controller%20%3D%20this.m_controllerList%3B%0A%20%20%20%20%20%20%20%20controller%3B%0A%20%20%20%20%20%20%20%20controller%20%3D%20controller.m_next%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20controller.Step(step)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20island%20%3D%20this.m_island%3B%0A%20%20%20%20%20%20island.Initialize(%0A%20%20%20%20%20%20%20%20this.m_bodyCount%2C%0A%20%20%20%20%20%20%20%20this.m_contactCount%2C%0A%20%20%20%20%20%20%20%20this.m_jointCount%2C%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20this.m_contactManager.m_contactListener%2C%0A%20%20%20%20%20%20%20%20this.m_contactSolver%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20for%20(b%20%3D%20this.m_bodyList%3B%20b%3B%20b%20%3D%20b.m_next)%20%7B%0A%20%20%20%20%20%20%20%20b.m_flags%20%26%3D%20~b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(var%20c%20%3D%20this.m_contactList%3B%20c%3B%20c%20%3D%20c.m_next)%20%7B%0A%20%20%20%20%20%20%20%20c.m_flags%20%26%3D%20~b2Contact.e_islandFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(var%20j%20%3D%20this.m_jointList%3B%20j%3B%20j%20%3D%20j.m_next)%20%7B%0A%20%20%20%20%20%20%20%20j.m_islandFlag%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20stackSize%20%3D%20parseInt(this.m_bodyCount)%3B%0A%20%20%20%20%20%20var%20stack%20%3D%20this.s_stack%3B%0A%20%20%20%20%20%20for%20(var%20seed%20%3D%20this.m_bodyList%3B%20seed%3B%20seed%20%3D%20seed.m_next)%20%7B%0A%20%20%20%20%20%20%20%20if%20(seed.m_flags%20%26%20b2Body.e_islandFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(seed.IsAwake()%20%3D%3D%20false%20%7C%7C%20seed.IsActive()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(seed.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20island.Clear()%3B%0A%20%20%20%20%20%20%20%20var%20stackCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20stack%5BstackCount%2B%2B%5D%20%3D%20seed%3B%0A%20%20%20%20%20%20%20%20seed.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20while%20(stackCount%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b%20%3D%20stack%5B--stackCount%5D%3B%0A%20%20%20%20%20%20%20%20%20%20island.AddBody(b)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(b.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20var%20other%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(var%20ce%20%3D%20b.m_contactList%3B%20ce%3B%20ce%20%3D%20ce.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(ce.contact.m_flags%20%26%20b2Contact.e_islandFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ce.contact.IsSensor()%20%3D%3D%20true%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ce.contact.IsEnabled()%20%3D%3D%20false%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ce.contact.IsTouching()%20%3D%3D%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20island.AddContact(ce.contact)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ce.contact.m_flags%20%7C%3D%20b2Contact.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20other%20%3D%20ce.other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.m_flags%20%26%20b2Body.e_islandFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20stack%5BstackCount%2B%2B%5D%20%3D%20other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20other.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20for%20(var%20jn%20%3D%20b.m_jointList%3B%20jn%3B%20jn%20%3D%20jn.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(jn.joint.m_islandFlag%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20other%20%3D%20jn.other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.IsActive()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20island.AddJoint(jn.joint)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20jn.joint.m_islandFlag%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.m_flags%20%26%20b2Body.e_islandFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20stack%5BstackCount%2B%2B%5D%20%3D%20other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20other.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20island.Solve(step%2C%20this.m_gravity%2C%20this.m_allowSleep)%3B%0A%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20island.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b%20%3D%20island.m_bodies%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.m_flags%20%26%3D%20~b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20stack.length%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!stack%5Bi%5D)%20break%3B%0A%20%20%20%20%20%20%20%20stack%5Bi%5D%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(b%20%3D%20this.m_bodyList%3B%20b%3B%20b%20%3D%20b.m_next)%20%7B%0A%20%20%20%20%20%20%20%20if%20(b.IsAwake()%20%3D%3D%20false%20%7C%7C%20b.IsActive()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20b.SynchronizeFixtures()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_contactManager.FindNewContacts()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.SolveTOI%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20b%3B%0A%20%20%20%20%20%20var%20fA%3B%0A%20%20%20%20%20%20var%20fB%3B%0A%20%20%20%20%20%20var%20bA%3B%0A%20%20%20%20%20%20var%20bB%3B%0A%20%20%20%20%20%20var%20cEdge%3B%0A%20%20%20%20%20%20var%20j%3B%0A%20%20%20%20%20%20var%20island%20%3D%20this.m_island%3B%0A%20%20%20%20%20%20island.Initialize(%0A%20%20%20%20%20%20%20%20this.m_bodyCount%2C%0A%20%20%20%20%20%20%20%20b2Settings.b2_maxTOIContactsPerIsland%2C%0A%20%20%20%20%20%20%20%20b2Settings.b2_maxTOIJointsPerIsland%2C%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20this.m_contactManager.m_contactListener%2C%0A%20%20%20%20%20%20%20%20this.m_contactSolver%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20queue%20%3D%20b2World.s_queue%3B%0A%20%20%20%20%20%20for%20(b%20%3D%20this.m_bodyList%3B%20b%3B%20b%20%3D%20b.m_next)%20%7B%0A%20%20%20%20%20%20%20%20b.m_flags%20%26%3D%20~b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20b.m_sweep.t0%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20c%3B%0A%20%20%20%20%20%20for%20(c%20%3D%20this.m_contactList%3B%20c%3B%20c%20%3D%20c.m_next)%20%7B%0A%20%20%20%20%20%20%20%20c.m_flags%20%26%3D%20~(b2Contact.e_toiFlag%20%7C%20b2Contact.e_islandFlag)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(j%20%3D%20this.m_jointList%3B%20j%3B%20j%20%3D%20j.m_next)%20%7B%0A%20%20%20%20%20%20%20%20j.m_islandFlag%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(%3B%3B)%20%7B%0A%20%20%20%20%20%20%20%20var%20minContact%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20var%20minTOI%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20for%20(c%20%3D%20this.m_contactList%3B%20c%3B%20c%20%3D%20c.m_next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20c.IsSensor()%20%3D%3D%20true%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20c.IsEnabled()%20%3D%3D%20false%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20c.IsContinuous()%20%3D%3D%20false%0A%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20var%20toi%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(c.m_flags%20%26%20b2Contact.e_toiFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20toi%20%3D%20c.m_toi%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fA%20%3D%20c.m_fixtureA%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20fB%20%3D%20c.m_fixtureB%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bA%20%3D%20fA.m_body%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bB%20%3D%20fB.m_body%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(bA.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bA.IsAwake()%20%3D%3D%20false)%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(bB.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%20bB.IsAwake()%20%3D%3D%20false)%0A%20%20%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20t0%20%3D%20bA.m_sweep.t0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(bA.m_sweep.t0%20%3C%20bB.m_sweep.t0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20t0%20%3D%20bB.m_sweep.t0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20bA.m_sweep.Advance(t0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20(bB.m_sweep.t0%20%3C%20bA.m_sweep.t0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20t0%20%3D%20bA.m_sweep.t0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20bB.m_sweep.Advance(t0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20toi%20%3D%20c.ComputeTOI(bA.m_sweep%2C%20bB.m_sweep)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2Assert(0.0%20%3C%3D%20toi%20%26%26%20toi%20%3C%3D%201.0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(toi%20%3E%200.0%20%26%26%20toi%20%3C%201.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20toi%20%3D%20(1.0%20-%20toi)%20*%20t0%20%2B%20toi%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(toi%20%3E%201)%20toi%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20c.m_toi%20%3D%20toi%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20c.m_flags%20%7C%3D%20b2Contact.e_toiFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(Number.MIN_VALUE%20%3C%20toi%20%26%26%20toi%20%3C%20minTOI)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20minContact%20%3D%20c%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20minTOI%20%3D%20toi%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(minContact%20%3D%3D%20null%20%7C%7C%201.0%20-%20100.0%20*%20Number.MIN_VALUE%20%3C%20minTOI)%20%7B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20fA%20%3D%20minContact.m_fixtureA%3B%0A%20%20%20%20%20%20%20%20fB%20%3D%20minContact.m_fixtureB%3B%0A%20%20%20%20%20%20%20%20bA%20%3D%20fA.m_body%3B%0A%20%20%20%20%20%20%20%20bB%20%3D%20fB.m_body%3B%0A%20%20%20%20%20%20%20%20b2World.s_backupA.Set(bA.m_sweep)%3B%0A%20%20%20%20%20%20%20%20b2World.s_backupB.Set(bB.m_sweep)%3B%0A%20%20%20%20%20%20%20%20bA.Advance(minTOI)%3B%0A%20%20%20%20%20%20%20%20bB.Advance(minTOI)%3B%0A%20%20%20%20%20%20%20%20minContact.Update(this.m_contactManager.m_contactListener)%3B%0A%20%20%20%20%20%20%20%20minContact.m_flags%20%26%3D%20~b2Contact.e_toiFlag%3B%0A%20%20%20%20%20%20%20%20if%20(minContact.IsSensor()%20%3D%3D%20true%20%7C%7C%20minContact.IsEnabled()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bA.m_sweep.Set(b2World.s_backupA)%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_sweep.Set(b2World.s_backupB)%3B%0A%20%20%20%20%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(minContact.IsTouching()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20seed%20%3D%20bA%3B%0A%20%20%20%20%20%20%20%20if%20(seed.GetType()%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20seed%20%3D%20bB%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20island.Clear()%3B%0A%20%20%20%20%20%20%20%20var%20queueStart%20%3D%200%3B%0A%20%20%20%20%20%20%20%20var%20queueSize%20%3D%200%3B%0A%20%20%20%20%20%20%20%20queue%5BqueueStart%20%2B%20queueSize%2B%2B%5D%20%3D%20seed%3B%0A%20%20%20%20%20%20%20%20seed.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20while%20(queueSize%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b%20%3D%20queue%5BqueueStart%2B%2B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20--queueSize%3B%0A%20%20%20%20%20%20%20%20%20%20island.AddBody(b)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(b.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20b.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(b.GetType()%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20for%20(cEdge%20%3D%20b.m_contactList%3B%20cEdge%3B%20cEdge%20%3D%20cEdge.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(island.m_contactCount%20%3D%3D%20island.m_contactCapacity)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(cEdge.contact.m_flags%20%26%20b2Contact.e_islandFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cEdge.contact.IsSensor()%20%3D%3D%20true%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cEdge.contact.IsEnabled()%20%3D%3D%20false%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cEdge.contact.IsTouching()%20%3D%3D%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20island.AddContact(cEdge.contact)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20cEdge.contact.m_flags%20%7C%3D%20b2Contact.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20other%20%3D%20cEdge.other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.m_flags%20%26%20b2Body.e_islandFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.GetType()%20!%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20other.Advance(minTOI)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20other.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20queue%5BqueueStart%20%2B%20queueSize%5D%20%3D%20other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2B%2BqueueSize%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20other.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20for%20(var%20jEdge%20%3D%20b.m_jointList%3B%20jEdge%3B%20jEdge%20%3D%20jEdge.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(island.m_jointCount%20%3D%3D%20island.m_jointCapacity)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(jEdge.joint.m_islandFlag%20%3D%3D%20true)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20other%20%3D%20jEdge.other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.IsActive()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20island.AddJoint(jEdge.joint)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20jEdge.joint.m_islandFlag%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.m_flags%20%26%20b2Body.e_islandFlag)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(other.GetType()%20!%3D%20b2Body.b2_staticBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20other.Advance(minTOI)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20other.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20queue%5BqueueStart%20%2B%20queueSize%5D%20%3D%20other%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2B%2BqueueSize%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20other.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20subStep%20%3D%20b2World.s_timestep%3B%0A%20%20%20%20%20%20%20%20subStep.warmStarting%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20subStep.dt%20%3D%20(1.0%20-%20minTOI)%20*%20step.dt%3B%0A%20%20%20%20%20%20%20%20subStep.inv_dt%20%3D%201.0%20%2F%20subStep.dt%3B%0A%20%20%20%20%20%20%20%20subStep.dtRatio%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20subStep.velocityIterations%20%3D%20step.velocityIterations%3B%0A%20%20%20%20%20%20%20%20subStep.positionIterations%20%3D%20step.positionIterations%3B%0A%20%20%20%20%20%20%20%20island.SolveTOI(subStep)%3B%0A%20%20%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20island.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20b%20%3D%20island.m_bodies%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20b.m_flags%20%26%3D%20~b2Body.e_islandFlag%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(b.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(b.GetType()%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20b.SynchronizeFixtures()%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(cEdge%20%3D%20b.m_contactList%3B%20cEdge%3B%20cEdge%20%3D%20cEdge.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cEdge.contact.m_flags%20%26%3D%20~b2Contact.e_toiFlag%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20island.m_contactCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20c%20%3D%20island.m_contacts%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20c.m_flags%20%26%3D%20~(b2Contact.e_toiFlag%20%7C%20b2Contact.e_islandFlag)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20island.m_jointCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20j%20%3D%20island.m_joints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20j.m_islandFlag%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_contactManager.FindNewContacts()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.DrawJoint%20%3D%20function%20(joint)%20%7B%0A%20%20%20%20%20%20var%20b1%20%3D%20joint.GetBodyA()%3B%0A%20%20%20%20%20%20var%20b2%20%3D%20joint.GetBodyB()%3B%0A%20%20%20%20%20%20var%20xf1%20%3D%20b1.m_xf%3B%0A%20%20%20%20%20%20var%20xf2%20%3D%20b2.m_xf%3B%0A%20%20%20%20%20%20var%20x1%20%3D%20xf1.position%3B%0A%20%20%20%20%20%20var%20x2%20%3D%20xf2.position%3B%0A%20%20%20%20%20%20var%20p1%20%3D%20joint.GetAnchorA()%3B%0A%20%20%20%20%20%20var%20p2%20%3D%20joint.GetAnchorB()%3B%0A%20%20%20%20%20%20var%20color%20%3D%20b2World.s_jointColor%3B%0A%20%20%20%20%20%20switch%20(joint.m_type)%20%7B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_distanceJoint%3A%0A%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(p1%2C%20p2%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_pulleyJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20pulley%20%3D%20joint%20instanceof%20b2PulleyJoint%20%3F%20joint%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20s1%20%3D%20pulley.GetGroundAnchorA()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20s2%20%3D%20pulley.GetGroundAnchorB()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(s1%2C%20p1%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(s2%2C%20p2%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(s1%2C%20s2%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_mouseJoint%3A%0A%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(p1%2C%20p2%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20if%20(b1%20!%3D%20this.m_groundBody)%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(x1%2C%20p1%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(p1%2C%20p2%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(b2%20!%3D%20this.m_groundBody)%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(x2%2C%20p2%2C%20color)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2World.prototype.DrawShape%20%3D%20function%20(shape%2C%20xf%2C%20color)%20%7B%0A%20%20%20%20%20%20switch%20(shape.m_type)%20%7B%0A%20%20%20%20%20%20%20%20case%20b2Shape.e_circleShape%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20circle%20%3D%20shape%20instanceof%20b2CircleShape%20%3F%20shape%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20center%20%3D%20b2Math.MulX(xf%2C%20circle.m_p)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20radius%20%3D%20circle.m_radius%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20axis%20%3D%20xf.R.col1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSolidCircle(center%2C%20radius%2C%20axis%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Shape.e_polygonShape%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20poly%20%3D%20shape%20instanceof%20b2PolygonShape%20%3F%20shape%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20vertexCount%20%3D%20parseInt(poly.GetVertexCount())%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20localVertices%20%3D%20poly.GetVertices()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20vertices%20%3D%20new%20Vector(vertexCount)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20vertexCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vertices%5Bi%5D%20%3D%20b2Math.MulX(xf%2C%20localVertices%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSolidPolygon(vertices%2C%20vertexCount%2C%20color)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Shape.e_edgeShape%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20edge%20%3D%20shape%20instanceof%20b2EdgeShape%20%3F%20shape%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_debugDraw.DrawSegment(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b2Math.MulX(xf%2C%20edge.GetVertex1())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20b2Math.MulX(xf%2C%20edge.GetVertex2())%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20color%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.s_timestep2%20%3D%20new%20b2TimeStep()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.s_xf%20%3D%20new%20b2Transform()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.s_backupA%20%3D%20new%20b2Sweep()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.s_backupB%20%3D%20new%20b2Sweep()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.s_timestep%20%3D%20new%20b2TimeStep()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.s_queue%20%3D%20new%20Vector()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.s_jointColor%20%3D%20new%20b2Color(0.5%2C%200.8%2C%200.8)%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.e_newFixture%20%3D%200x0001%3B%0A%20%20%20%20%20%20Box2D.Dynamics.b2World.e_locked%20%3D%200x0002%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D)()%3B%0A%20%20(function%20()%20%7B%0A%20%20%20%20var%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%2C%0A%20%20%20%20%20%20b2EdgeChainDef%20%3D%20Box2D.Collision.Shapes.b2EdgeChainDef%2C%0A%20%20%20%20%20%20b2EdgeShape%20%3D%20Box2D.Collision.Shapes.b2EdgeShape%2C%0A%20%20%20%20%20%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%2C%0A%20%20%20%20%20%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%2C%0A%20%20%20%20%20%20b2Shape%20%3D%20Box2D.Collision.Shapes.b2Shape%2C%0A%20%20%20%20%20%20b2CircleContact%20%3D%20Box2D.Dynamics.Contacts.b2CircleContact%2C%0A%20%20%20%20%20%20b2Contact%20%3D%20Box2D.Dynamics.Contacts.b2Contact%2C%0A%20%20%20%20%20%20b2ContactConstraint%20%3D%20Box2D.Dynamics.Contacts.b2ContactConstraint%2C%0A%20%20%20%20%20%20b2ContactConstraintPoint%20%3D%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2ContactConstraintPoint%2C%0A%20%20%20%20%20%20b2ContactEdge%20%3D%20Box2D.Dynamics.Contacts.b2ContactEdge%2C%0A%20%20%20%20%20%20b2ContactFactory%20%3D%20Box2D.Dynamics.Contacts.b2ContactFactory%2C%0A%20%20%20%20%20%20b2ContactRegister%20%3D%20Box2D.Dynamics.Contacts.b2ContactRegister%2C%0A%20%20%20%20%20%20b2ContactResult%20%3D%20Box2D.Dynamics.Contacts.b2ContactResult%2C%0A%20%20%20%20%20%20b2ContactSolver%20%3D%20Box2D.Dynamics.Contacts.b2ContactSolver%2C%0A%20%20%20%20%20%20b2EdgeAndCircleContact%20%3D%20Box2D.Dynamics.Contacts.b2EdgeAndCircleContact%2C%0A%20%20%20%20%20%20b2NullContact%20%3D%20Box2D.Dynamics.Contacts.b2NullContact%2C%0A%20%20%20%20%20%20b2PolyAndCircleContact%20%3D%20Box2D.Dynamics.Contacts.b2PolyAndCircleContact%2C%0A%20%20%20%20%20%20b2PolyAndEdgeContact%20%3D%20Box2D.Dynamics.Contacts.b2PolyAndEdgeContact%2C%0A%20%20%20%20%20%20b2PolygonContact%20%3D%20Box2D.Dynamics.Contacts.b2PolygonContact%2C%0A%20%20%20%20%20%20b2PositionSolverManifold%20%3D%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2PositionSolverManifold%2C%0A%20%20%20%20%20%20b2Body%20%3D%20Box2D.Dynamics.b2Body%2C%0A%20%20%20%20%20%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%2C%0A%20%20%20%20%20%20b2ContactFilter%20%3D%20Box2D.Dynamics.b2ContactFilter%2C%0A%20%20%20%20%20%20b2ContactImpulse%20%3D%20Box2D.Dynamics.b2ContactImpulse%2C%0A%20%20%20%20%20%20b2ContactListener%20%3D%20Box2D.Dynamics.b2ContactListener%2C%0A%20%20%20%20%20%20b2ContactManager%20%3D%20Box2D.Dynamics.b2ContactManager%2C%0A%20%20%20%20%20%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%2C%0A%20%20%20%20%20%20b2DestructionListener%20%3D%20Box2D.Dynamics.b2DestructionListener%2C%0A%20%20%20%20%20%20b2FilterData%20%3D%20Box2D.Dynamics.b2FilterData%2C%0A%20%20%20%20%20%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%2C%0A%20%20%20%20%20%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%2C%0A%20%20%20%20%20%20b2Island%20%3D%20Box2D.Dynamics.b2Island%2C%0A%20%20%20%20%20%20b2TimeStep%20%3D%20Box2D.Dynamics.b2TimeStep%2C%0A%20%20%20%20%20%20b2World%20%3D%20Box2D.Dynamics.b2World%2C%0A%20%20%20%20%20%20b2Color%20%3D%20Box2D.Common.b2Color%2C%0A%20%20%20%20%20%20b2internal%20%3D%20Box2D.Common.b2internal%2C%0A%20%20%20%20%20%20b2Settings%20%3D%20Box2D.Common.b2Settings%2C%0A%20%20%20%20%20%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%2C%0A%20%20%20%20%20%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%2C%0A%20%20%20%20%20%20b2Math%20%3D%20Box2D.Common.Math.b2Math%2C%0A%20%20%20%20%20%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%2C%0A%20%20%20%20%20%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%2C%0A%20%20%20%20%20%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%2C%0A%20%20%20%20%20%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%2C%0A%20%20%20%20%20%20b2AABB%20%3D%20Box2D.Collision.b2AABB%2C%0A%20%20%20%20%20%20b2Bound%20%3D%20Box2D.Collision.b2Bound%2C%0A%20%20%20%20%20%20b2BoundValues%20%3D%20Box2D.Collision.b2BoundValues%2C%0A%20%20%20%20%20%20b2Collision%20%3D%20Box2D.Collision.b2Collision%2C%0A%20%20%20%20%20%20b2ContactID%20%3D%20Box2D.Collision.b2ContactID%2C%0A%20%20%20%20%20%20b2ContactPoint%20%3D%20Box2D.Collision.b2ContactPoint%2C%0A%20%20%20%20%20%20b2Distance%20%3D%20Box2D.Collision.b2Distance%2C%0A%20%20%20%20%20%20b2DistanceInput%20%3D%20Box2D.Collision.b2DistanceInput%2C%0A%20%20%20%20%20%20b2DistanceOutput%20%3D%20Box2D.Collision.b2DistanceOutput%2C%0A%20%20%20%20%20%20b2DistanceProxy%20%3D%20Box2D.Collision.b2DistanceProxy%2C%0A%20%20%20%20%20%20b2DynamicTree%20%3D%20Box2D.Collision.b2DynamicTree%2C%0A%20%20%20%20%20%20b2DynamicTreeBroadPhase%20%3D%20Box2D.Collision.b2DynamicTreeBroadPhase%2C%0A%20%20%20%20%20%20b2DynamicTreeNode%20%3D%20Box2D.Collision.b2DynamicTreeNode%2C%0A%20%20%20%20%20%20b2DynamicTreePair%20%3D%20Box2D.Collision.b2DynamicTreePair%2C%0A%20%20%20%20%20%20b2Manifold%20%3D%20Box2D.Collision.b2Manifold%2C%0A%20%20%20%20%20%20b2ManifoldPoint%20%3D%20Box2D.Collision.b2ManifoldPoint%2C%0A%20%20%20%20%20%20b2Point%20%3D%20Box2D.Collision.b2Point%2C%0A%20%20%20%20%20%20b2RayCastInput%20%3D%20Box2D.Collision.b2RayCastInput%2C%0A%20%20%20%20%20%20b2RayCastOutput%20%3D%20Box2D.Collision.b2RayCastOutput%2C%0A%20%20%20%20%20%20b2Segment%20%3D%20Box2D.Collision.b2Segment%2C%0A%20%20%20%20%20%20b2SeparationFunction%20%3D%20Box2D.Collision.b2SeparationFunction%2C%0A%20%20%20%20%20%20b2Simplex%20%3D%20Box2D.Collision.b2Simplex%2C%0A%20%20%20%20%20%20b2SimplexCache%20%3D%20Box2D.Collision.b2SimplexCache%2C%0A%20%20%20%20%20%20b2SimplexVertex%20%3D%20Box2D.Collision.b2SimplexVertex%2C%0A%20%20%20%20%20%20b2TimeOfImpact%20%3D%20Box2D.Collision.b2TimeOfImpact%2C%0A%20%20%20%20%20%20b2TOIInput%20%3D%20Box2D.Collision.b2TOIInput%2C%0A%20%20%20%20%20%20b2WorldManifold%20%3D%20Box2D.Collision.b2WorldManifold%2C%0A%20%20%20%20%20%20ClipVertex%20%3D%20Box2D.Collision.ClipVertex%2C%0A%20%20%20%20%20%20Features%20%3D%20Box2D.Collision.Features%2C%0A%20%20%20%20%20%20IBroadPhase%20%3D%20Box2D.Collision.IBroadPhase%3B%0A%0A%20%20%20%20Box2D.inherit(b2CircleContact%2C%20Box2D.Dynamics.Contacts.b2Contact)%3B%0A%20%20%20%20b2CircleContact.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%20%20%20%20b2CircleContact.b2CircleContact%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleContact.Create%20%3D%20function%20(allocator)%20%7B%0A%20%20%20%20%20%20return%20new%20b2CircleContact()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleContact.Destroy%20%3D%20function%20(contact%2C%20allocator)%20%7B%7D%3B%0A%20%20%20%20b2CircleContact.prototype.Reset%20%3D%20function%20(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20this.__super.Reset.call(this%2C%20fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2CircleContact.prototype.Evaluate%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_fixtureA.GetBody()%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_fixtureB.GetBody()%3B%0A%20%20%20%20%20%20b2Collision.CollideCircles(%0A%20%20%20%20%20%20%20%20this.m_manifold%2C%0A%20%20%20%20%20%20%20%20this.m_fixtureA.GetShape()%20instanceof%20b2CircleShape%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_fixtureA.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20bA.m_xf%2C%0A%20%20%20%20%20%20%20%20this.m_fixtureB.GetShape()%20instanceof%20b2CircleShape%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_fixtureB.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20bB.m_xf%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.b2Contact%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_nodeA%20%3D%20new%20b2ContactEdge()%3B%0A%20%20%20%20%20%20this.m_nodeB%20%3D%20new%20b2ContactEdge()%3B%0A%20%20%20%20%20%20this.m_manifold%20%3D%20new%20b2Manifold()%3B%0A%20%20%20%20%20%20this.m_oldManifold%20%3D%20new%20b2Manifold()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.GetManifold%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_manifold%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.GetWorldManifold%20%3D%20function%20(worldManifold)%20%7B%0A%20%20%20%20%20%20var%20bodyA%20%3D%20this.m_fixtureA.GetBody()%3B%0A%20%20%20%20%20%20var%20bodyB%20%3D%20this.m_fixtureB.GetBody()%3B%0A%20%20%20%20%20%20var%20shapeA%20%3D%20this.m_fixtureA.GetShape()%3B%0A%20%20%20%20%20%20var%20shapeB%20%3D%20this.m_fixtureB.GetShape()%3B%0A%20%20%20%20%20%20worldManifold.Initialize(%0A%20%20%20%20%20%20%20%20this.m_manifold%2C%0A%20%20%20%20%20%20%20%20bodyA.GetTransform()%2C%0A%20%20%20%20%20%20%20%20shapeA.m_radius%2C%0A%20%20%20%20%20%20%20%20bodyB.GetTransform()%2C%0A%20%20%20%20%20%20%20%20shapeB.m_radius%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.IsTouching%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20(this.m_flags%20%26%20b2Contact.e_touchingFlag)%20%3D%3D%20b2Contact.e_touchingFlag%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.IsContinuous%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20(this.m_flags%20%26%20b2Contact.e_continuousFlag)%20%3D%3D%0A%20%20%20%20%20%20%20%20b2Contact.e_continuousFlag%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.SetSensor%20%3D%20function%20(sensor)%20%7B%0A%20%20%20%20%20%20if%20(sensor)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_sensorFlag%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Contact.e_sensorFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.IsSensor%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(this.m_flags%20%26%20b2Contact.e_sensorFlag)%20%3D%3D%20b2Contact.e_sensorFlag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.SetEnabled%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20if%20(flag)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_enabledFlag%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Contact.e_enabledFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.IsEnabled%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20(this.m_flags%20%26%20b2Contact.e_enabledFlag)%20%3D%3D%20b2Contact.e_enabledFlag%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.GetNext%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_next%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.GetFixtureA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_fixtureA%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.GetFixtureB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_fixtureB%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.FlagForFiltering%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_filterFlag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.b2Contact%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Contact.prototype.Reset%20%3D%20function%20(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20if%20(fixtureA%20%3D%3D%3D%20undefined)%20fixtureA%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(fixtureB%20%3D%3D%3D%20undefined)%20fixtureB%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_flags%20%3D%20b2Contact.e_enabledFlag%3B%0A%20%20%20%20%20%20if%20(!fixtureA%20%7C%7C%20!fixtureB)%20%7B%0A%20%20%20%20%20%20%20%20this.m_fixtureA%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.m_fixtureB%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(fixtureA.IsSensor()%20%7C%7C%20fixtureB.IsSensor())%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_sensorFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20bodyA%20%3D%20fixtureA.GetBody()%3B%0A%20%20%20%20%20%20var%20bodyB%20%3D%20fixtureB.GetBody()%3B%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20bodyA.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%0A%20%20%20%20%20%20%20%20bodyA.IsBullet()%20%7C%7C%0A%20%20%20%20%20%20%20%20bodyB.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%0A%20%20%20%20%20%20%20%20bodyB.IsBullet()%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_continuousFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_fixtureA%20%3D%20fixtureA%3B%0A%20%20%20%20%20%20this.m_fixtureB%20%3D%20fixtureB%3B%0A%20%20%20%20%20%20this.m_manifold.m_pointCount%20%3D%200%3B%0A%20%20%20%20%20%20this.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_next%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_nodeA.contact%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_nodeA.prev%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_nodeA.next%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_nodeA.other%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_nodeB.contact%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_nodeB.prev%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_nodeB.next%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_nodeB.other%20%3D%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.Update%20%3D%20function%20(listener)%20%7B%0A%20%20%20%20%20%20var%20tManifold%20%3D%20this.m_oldManifold%3B%0A%20%20%20%20%20%20this.m_oldManifold%20%3D%20this.m_manifold%3B%0A%20%20%20%20%20%20this.m_manifold%20%3D%20tManifold%3B%0A%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_enabledFlag%3B%0A%20%20%20%20%20%20var%20touching%20%3D%20false%3B%0A%20%20%20%20%20%20var%20wasTouching%20%3D%0A%20%20%20%20%20%20%20%20(this.m_flags%20%26%20b2Contact.e_touchingFlag)%20%3D%3D%20b2Contact.e_touchingFlag%3B%0A%20%20%20%20%20%20var%20bodyA%20%3D%20this.m_fixtureA.m_body%3B%0A%20%20%20%20%20%20var%20bodyB%20%3D%20this.m_fixtureB.m_body%3B%0A%20%20%20%20%20%20var%20aabbOverlap%20%3D%20this.m_fixtureA.m_aabb.TestOverlap(%0A%20%20%20%20%20%20%20%20this.m_fixtureB.m_aabb%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20if%20(this.m_flags%20%26%20b2Contact.e_sensorFlag)%20%7B%0A%20%20%20%20%20%20%20%20if%20(aabbOverlap)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20shapeA%20%3D%20this.m_fixtureA.GetShape()%3B%0A%20%20%20%20%20%20%20%20%20%20var%20shapeB%20%3D%20this.m_fixtureB.GetShape()%3B%0A%20%20%20%20%20%20%20%20%20%20var%20xfA%20%3D%20bodyA.GetTransform()%3B%0A%20%20%20%20%20%20%20%20%20%20var%20xfB%20%3D%20bodyB.GetTransform()%3B%0A%20%20%20%20%20%20%20%20%20%20touching%20%3D%20b2Shape.TestOverlap(shapeA%2C%20xfA%2C%20shapeB%2C%20xfB)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_manifold.m_pointCount%20%3D%200%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20bodyA.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20bodyA.IsBullet()%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20bodyB.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20bodyB.IsBullet()%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_continuousFlag%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Contact.e_continuousFlag%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(aabbOverlap)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.Evaluate()%3B%0A%20%20%20%20%20%20%20%20%20%20touching%20%3D%20this.m_manifold.m_pointCount%20%3E%200%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_manifold.m_pointCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20mp2%20%3D%20this.m_manifold.m_points%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20mp2.m_normalImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20mp2.m_tangentImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20id2%20%3D%20mp2.m_id%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(var%20j%20%3D%200%3B%20j%20%3C%20this.m_oldManifold.m_pointCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20mp1%20%3D%20this.m_oldManifold.m_points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(mp1.m_id.key%20%3D%3D%20id2.key)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mp2.m_normalImpulse%20%3D%20mp1.m_normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mp2.m_tangentImpulse%20%3D%20mp1.m_tangentImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_manifold.m_pointCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(touching%20!%3D%20wasTouching)%20%7B%0A%20%20%20%20%20%20%20%20%20%20bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%20%20bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(touching)%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%7C%3D%20b2Contact.e_touchingFlag%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_flags%20%26%3D%20~b2Contact.e_touchingFlag%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(wasTouching%20%3D%3D%20false%20%26%26%20touching%20%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20listener.BeginContact(this)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(wasTouching%20%3D%3D%20true%20%26%26%20touching%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20listener.EndContact(this)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20((this.m_flags%20%26%20b2Contact.e_sensorFlag)%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20listener.PreSolve(this%2C%20this.m_oldManifold)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Contact.prototype.Evaluate%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Contact.prototype.ComputeTOI%20%3D%20function%20(sweepA%2C%20sweepB)%20%7B%0A%20%20%20%20%20%20b2Contact.s_input.proxyA.Set(this.m_fixtureA.GetShape())%3B%0A%20%20%20%20%20%20b2Contact.s_input.proxyB.Set(this.m_fixtureB.GetShape())%3B%0A%20%20%20%20%20%20b2Contact.s_input.sweepA%20%3D%20sweepA%3B%0A%20%20%20%20%20%20b2Contact.s_input.sweepB%20%3D%20sweepB%3B%0A%20%20%20%20%20%20b2Contact.s_input.tolerance%20%3D%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%20%20return%20b2TimeOfImpact.TimeOfImpact(b2Contact.s_input)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.e_sensorFlag%20%3D%200x0001%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.e_continuousFlag%20%3D%200x0002%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.e_islandFlag%20%3D%200x0004%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.e_toiFlag%20%3D%200x0008%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.e_touchingFlag%20%3D%200x0010%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.e_enabledFlag%20%3D%200x0020%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.e_filterFlag%20%3D%200x0040%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.s_input%20%3D%20new%20b2TOIInput()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2ContactConstraint.b2ContactConstraint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.localPlaneNormal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localPoint%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.normalMass%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.K%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactConstraint.prototype.b2ContactConstraint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.points%20%3D%20new%20Vector(b2Settings.b2_maxManifoldPoints)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20this.points%5Bi%5D%20%3D%20new%20b2ContactConstraintPoint()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactConstraintPoint.b2ContactConstraintPoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.localPoint%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.rA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.rB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactEdge.b2ContactEdge%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2ContactFactory.b2ContactFactory%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2ContactFactory.prototype.b2ContactFactory%20%3D%20function%20(allocator)%20%7B%0A%20%20%20%20%20%20this.m_allocator%20%3D%20allocator%3B%0A%20%20%20%20%20%20this.InitializeRegisters()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactFactory.prototype.AddType%20%3D%20function%20(%0A%20%20%20%20%20%20createFcn%2C%0A%20%20%20%20%20%20destroyFcn%2C%0A%20%20%20%20%20%20type1%2C%0A%20%20%20%20%20%20type2%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(type1%20%3D%3D%3D%20undefined)%20type1%20%3D%200%3B%0A%20%20%20%20%20%20if%20(type2%20%3D%3D%3D%20undefined)%20type2%20%3D%200%3B%0A%20%20%20%20%20%20this.m_registers%5Btype1%5D%5Btype2%5D.createFcn%20%3D%20createFcn%3B%0A%20%20%20%20%20%20this.m_registers%5Btype1%5D%5Btype2%5D.destroyFcn%20%3D%20destroyFcn%3B%0A%20%20%20%20%20%20this.m_registers%5Btype1%5D%5Btype2%5D.primary%20%3D%20true%3B%0A%20%20%20%20%20%20if%20(type1%20!%3D%20type2)%20%7B%0A%20%20%20%20%20%20%20%20this.m_registers%5Btype2%5D%5Btype1%5D.createFcn%20%3D%20createFcn%3B%0A%20%20%20%20%20%20%20%20this.m_registers%5Btype2%5D%5Btype1%5D.destroyFcn%20%3D%20destroyFcn%3B%0A%20%20%20%20%20%20%20%20this.m_registers%5Btype2%5D%5Btype1%5D.primary%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactFactory.prototype.InitializeRegisters%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_registers%20%3D%20new%20Vector(b2Shape.e_shapeTypeCount)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20b2Shape.e_shapeTypeCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20this.m_registers%5Bi%5D%20%3D%20new%20Vector(b2Shape.e_shapeTypeCount)%3B%0A%20%20%20%20%20%20%20%20for%20(var%20j%20%3D%200%3B%20j%20%3C%20b2Shape.e_shapeTypeCount%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_registers%5Bi%5D%5Bj%5D%20%3D%20new%20b2ContactRegister()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.AddType(%0A%20%20%20%20%20%20%20%20b2CircleContact.Create%2C%0A%20%20%20%20%20%20%20%20b2CircleContact.Destroy%2C%0A%20%20%20%20%20%20%20%20b2Shape.e_circleShape%2C%0A%20%20%20%20%20%20%20%20b2Shape.e_circleShape%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.AddType(%0A%20%20%20%20%20%20%20%20b2PolyAndCircleContact.Create%2C%0A%20%20%20%20%20%20%20%20b2PolyAndCircleContact.Destroy%2C%0A%20%20%20%20%20%20%20%20b2Shape.e_polygonShape%2C%0A%20%20%20%20%20%20%20%20b2Shape.e_circleShape%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.AddType(%0A%20%20%20%20%20%20%20%20b2PolygonContact.Create%2C%0A%20%20%20%20%20%20%20%20b2PolygonContact.Destroy%2C%0A%20%20%20%20%20%20%20%20b2Shape.e_polygonShape%2C%0A%20%20%20%20%20%20%20%20b2Shape.e_polygonShape%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.AddType(%0A%20%20%20%20%20%20%20%20b2EdgeAndCircleContact.Create%2C%0A%20%20%20%20%20%20%20%20b2EdgeAndCircleContact.Destroy%2C%0A%20%20%20%20%20%20%20%20b2Shape.e_edgeShape%2C%0A%20%20%20%20%20%20%20%20b2Shape.e_circleShape%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.AddType(%0A%20%20%20%20%20%20%20%20b2PolyAndEdgeContact.Create%2C%0A%20%20%20%20%20%20%20%20b2PolyAndEdgeContact.Destroy%2C%0A%20%20%20%20%20%20%20%20b2Shape.e_polygonShape%2C%0A%20%20%20%20%20%20%20%20b2Shape.e_edgeShape%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactFactory.prototype.Create%20%3D%20function%20(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20var%20type1%20%3D%20parseInt(fixtureA.GetType())%3B%0A%20%20%20%20%20%20var%20type2%20%3D%20parseInt(fixtureB.GetType())%3B%0A%20%20%20%20%20%20var%20reg%20%3D%20this.m_registers%5Btype1%5D%5Btype2%5D%3B%0A%20%20%20%20%20%20var%20c%3B%0A%20%20%20%20%20%20if%20(reg.pool)%20%7B%0A%20%20%20%20%20%20%20%20c%20%3D%20reg.pool%3B%0A%20%20%20%20%20%20%20%20reg.pool%20%3D%20c.m_next%3B%0A%20%20%20%20%20%20%20%20reg.poolCount--%3B%0A%20%20%20%20%20%20%20%20c.Reset(fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20createFcn%20%3D%20reg.createFcn%3B%0A%20%20%20%20%20%20if%20(createFcn%20!%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20if%20(reg.primary)%20%7B%0A%20%20%20%20%20%20%20%20%20%20c%20%3D%20createFcn(this.m_allocator)%3B%0A%20%20%20%20%20%20%20%20%20%20c.Reset(fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20c%20%3D%20createFcn(this.m_allocator)%3B%0A%20%20%20%20%20%20%20%20%20%20c.Reset(fixtureB%2C%20fixtureA)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20c%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactFactory.prototype.Destroy%20%3D%20function%20(contact)%20%7B%0A%20%20%20%20%20%20if%20(contact.m_manifold.m_pointCount%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20contact.m_fixtureA.m_body.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20contact.m_fixtureB.m_body.SetAwake(true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20type1%20%3D%20parseInt(contact.m_fixtureA.GetType())%3B%0A%20%20%20%20%20%20var%20type2%20%3D%20parseInt(contact.m_fixtureB.GetType())%3B%0A%20%20%20%20%20%20var%20reg%20%3D%20this.m_registers%5Btype1%5D%5Btype2%5D%3B%0A%20%20%20%20%20%20if%20(true)%20%7B%0A%20%20%20%20%20%20%20%20reg.poolCount%2B%2B%3B%0A%20%20%20%20%20%20%20%20contact.m_next%20%3D%20reg.pool%3B%0A%20%20%20%20%20%20%20%20reg.pool%20%3D%20contact%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20destroyFcn%20%3D%20reg.destroyFcn%3B%0A%20%20%20%20%20%20destroyFcn(contact%2C%20this.m_allocator)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactRegister.b2ContactRegister%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2ContactResult.b2ContactResult%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.position%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.id%20%3D%20new%20b2ContactID()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactSolver.b2ContactSolver%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_step%20%3D%20new%20b2TimeStep()%3B%0A%20%20%20%20%20%20this.m_constraints%20%3D%20new%20Vector()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactSolver.prototype.b2ContactSolver%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2ContactSolver.prototype.Initialize%20%3D%20function%20(%0A%20%20%20%20%20%20step%2C%0A%20%20%20%20%20%20contacts%2C%0A%20%20%20%20%20%20contactCount%2C%0A%20%20%20%20%20%20allocator%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(contactCount%20%3D%3D%3D%20undefined)%20contactCount%20%3D%200%3B%0A%20%20%20%20%20%20var%20contact%3B%0A%20%20%20%20%20%20this.m_step.Set(step)%3B%0A%20%20%20%20%20%20this.m_allocator%20%3D%20allocator%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20this.m_constraintCount%20%3D%20contactCount%3B%0A%20%20%20%20%20%20while%20(this.m_constraints.length%20%3C%20this.m_constraintCount)%20%7B%0A%20%20%20%20%20%20%20%20this.m_constraints%5Bthis.m_constraints.length%5D%20%3D%0A%20%20%20%20%20%20%20%20%20%20new%20b2ContactConstraint()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20contactCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20contact%20%3D%20contacts%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20fixtureA%20%3D%20contact.m_fixtureA%3B%0A%20%20%20%20%20%20%20%20var%20fixtureB%20%3D%20contact.m_fixtureB%3B%0A%20%20%20%20%20%20%20%20var%20shapeA%20%3D%20fixtureA.m_shape%3B%0A%20%20%20%20%20%20%20%20var%20shapeB%20%3D%20fixtureB.m_shape%3B%0A%20%20%20%20%20%20%20%20var%20radiusA%20%3D%20shapeA.m_radius%3B%0A%20%20%20%20%20%20%20%20var%20radiusB%20%3D%20shapeB.m_radius%3B%0A%20%20%20%20%20%20%20%20var%20bodyA%20%3D%20fixtureA.m_body%3B%0A%20%20%20%20%20%20%20%20var%20bodyB%20%3D%20fixtureB.m_body%3B%0A%20%20%20%20%20%20%20%20var%20manifold%20%3D%20contact.GetManifold()%3B%0A%20%20%20%20%20%20%20%20var%20friction%20%3D%20b2Settings.b2MixFriction(%0A%20%20%20%20%20%20%20%20%20%20fixtureA.GetFriction()%2C%0A%20%20%20%20%20%20%20%20%20%20fixtureB.GetFriction()%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20var%20restitution%20%3D%20b2Settings.b2MixRestitution(%0A%20%20%20%20%20%20%20%20%20%20fixtureA.GetRestitution()%2C%0A%20%20%20%20%20%20%20%20%20%20fixtureB.GetRestitution()%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20var%20vAX%20%3D%20bodyA.m_linearVelocity.x%3B%0A%20%20%20%20%20%20%20%20var%20vAY%20%3D%20bodyA.m_linearVelocity.y%3B%0A%20%20%20%20%20%20%20%20var%20vBX%20%3D%20bodyB.m_linearVelocity.x%3B%0A%20%20%20%20%20%20%20%20var%20vBY%20%3D%20bodyB.m_linearVelocity.y%3B%0A%20%20%20%20%20%20%20%20var%20wA%20%3D%20bodyA.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20var%20wB%20%3D%20bodyB.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20b2Settings.b2Assert(manifold.m_pointCount%20%3E%200)%3B%0A%20%20%20%20%20%20%20%20b2ContactSolver.s_worldManifold.Initialize(%0A%20%20%20%20%20%20%20%20%20%20manifold%2C%0A%20%20%20%20%20%20%20%20%20%20bodyA.m_xf%2C%0A%20%20%20%20%20%20%20%20%20%20radiusA%2C%0A%20%20%20%20%20%20%20%20%20%20bodyB.m_xf%2C%0A%20%20%20%20%20%20%20%20%20%20radiusB%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20var%20normalX%20%3D%20b2ContactSolver.s_worldManifold.m_normal.x%3B%0A%20%20%20%20%20%20%20%20var%20normalY%20%3D%20b2ContactSolver.s_worldManifold.m_normal.y%3B%0A%20%20%20%20%20%20%20%20var%20cc%20%3D%20this.m_constraints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20cc.bodyA%20%3D%20bodyA%3B%0A%20%20%20%20%20%20%20%20cc.bodyB%20%3D%20bodyB%3B%0A%20%20%20%20%20%20%20%20cc.manifold%20%3D%20manifold%3B%0A%20%20%20%20%20%20%20%20cc.normal.x%20%3D%20normalX%3B%0A%20%20%20%20%20%20%20%20cc.normal.y%20%3D%20normalY%3B%0A%20%20%20%20%20%20%20%20cc.pointCount%20%3D%20manifold.m_pointCount%3B%0A%20%20%20%20%20%20%20%20cc.friction%20%3D%20friction%3B%0A%20%20%20%20%20%20%20%20cc.restitution%20%3D%20restitution%3B%0A%20%20%20%20%20%20%20%20cc.localPlaneNormal.x%20%3D%20manifold.m_localPlaneNormal.x%3B%0A%20%20%20%20%20%20%20%20cc.localPlaneNormal.y%20%3D%20manifold.m_localPlaneNormal.y%3B%0A%20%20%20%20%20%20%20%20cc.localPoint.x%20%3D%20manifold.m_localPoint.x%3B%0A%20%20%20%20%20%20%20%20cc.localPoint.y%20%3D%20manifold.m_localPoint.y%3B%0A%20%20%20%20%20%20%20%20cc.radius%20%3D%20radiusA%20%2B%20radiusB%3B%0A%20%20%20%20%20%20%20%20cc.type%20%3D%20manifold.m_type%3B%0A%20%20%20%20%20%20%20%20for%20(var%20k%20%3D%200%3B%20k%20%3C%20cc.pointCount%3B%20%2B%2Bk)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20cp%20%3D%20manifold.m_points%5Bk%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20ccp%20%3D%20cc.points%5Bk%5D%3B%0A%20%20%20%20%20%20%20%20%20%20ccp.normalImpulse%20%3D%20cp.m_normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20ccp.tangentImpulse%20%3D%20cp.m_tangentImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20ccp.localPoint.SetV(cp.m_localPoint)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rAX%20%3D%20(ccp.rA.x%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20b2ContactSolver.s_worldManifold.m_points%5Bk%5D.x%20-%20bodyA.m_sweep.c.x)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rAY%20%3D%20(ccp.rA.y%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20b2ContactSolver.s_worldManifold.m_points%5Bk%5D.y%20-%20bodyA.m_sweep.c.y)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rBX%20%3D%20(ccp.rB.x%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20b2ContactSolver.s_worldManifold.m_points%5Bk%5D.x%20-%20bodyB.m_sweep.c.x)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rBY%20%3D%20(ccp.rB.y%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20b2ContactSolver.s_worldManifold.m_points%5Bk%5D.y%20-%20bodyB.m_sweep.c.y)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rnA%20%3D%20rAX%20*%20normalY%20-%20rAY%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rnB%20%3D%20rBX%20*%20normalY%20-%20rBY%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20rnA%20*%3D%20rnA%3B%0A%20%20%20%20%20%20%20%20%20%20rnB%20*%3D%20rnB%3B%0A%20%20%20%20%20%20%20%20%20%20var%20kNormal%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_invMass%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_invMass%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_invI%20*%20rnA%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_invI%20*%20rnB%3B%0A%20%20%20%20%20%20%20%20%20%20ccp.normalMass%20%3D%201.0%20%2F%20kNormal%3B%0A%20%20%20%20%20%20%20%20%20%20var%20kEqualized%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_mass%20*%20bodyA.m_invMass%20%2B%20bodyB.m_mass%20*%20bodyB.m_invMass%3B%0A%20%20%20%20%20%20%20%20%20%20kEqualized%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_mass%20*%20bodyA.m_invI%20*%20rnA%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_mass%20*%20bodyB.m_invI%20*%20rnB%3B%0A%20%20%20%20%20%20%20%20%20%20ccp.equalizedMass%20%3D%201.0%20%2F%20kEqualized%3B%0A%20%20%20%20%20%20%20%20%20%20var%20tangentX%20%3D%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20var%20tangentY%20%3D%20-normalX%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rtA%20%3D%20rAX%20*%20tangentY%20-%20rAY%20*%20tangentX%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rtB%20%3D%20rBX%20*%20tangentY%20-%20rBY%20*%20tangentX%3B%0A%20%20%20%20%20%20%20%20%20%20rtA%20*%3D%20rtA%3B%0A%20%20%20%20%20%20%20%20%20%20rtB%20*%3D%20rtB%3B%0A%20%20%20%20%20%20%20%20%20%20var%20kTangent%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_invMass%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_invMass%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_invI%20*%20rtA%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_invI%20*%20rtB%3B%0A%20%20%20%20%20%20%20%20%20%20ccp.tangentMass%20%3D%201.0%20%2F%20kTangent%3B%0A%20%20%20%20%20%20%20%20%20%20ccp.velocityBias%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20var%20tX%20%3D%20vBX%20%2B%20-wB%20*%20rBY%20-%20vAX%20-%20-wA%20*%20rAY%3B%0A%20%20%20%20%20%20%20%20%20%20var%20tY%20%3D%20vBY%20%2B%20wB%20*%20rBX%20-%20vAY%20-%20wA%20*%20rAX%3B%0A%20%20%20%20%20%20%20%20%20%20var%20vRel%20%3D%20cc.normal.x%20*%20tX%20%2B%20cc.normal.y%20*%20tY%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(vRel%20%3C%20-b2Settings.b2_velocityThreshold)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp.velocityBias%20%2B%3D%20-cc.restitution%20*%20vRel%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(cc.pointCount%20%3D%3D%202)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20ccp1%20%3D%20cc.points%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20ccp2%20%3D%20cc.points%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20invMassA%20%3D%20bodyA.m_invMass%3B%0A%20%20%20%20%20%20%20%20%20%20var%20invIA%20%3D%20bodyA.m_invI%3B%0A%20%20%20%20%20%20%20%20%20%20var%20invMassB%20%3D%20bodyB.m_invMass%3B%0A%20%20%20%20%20%20%20%20%20%20var%20invIB%20%3D%20bodyB.m_invI%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rn1A%20%3D%20ccp1.rA.x%20*%20normalY%20-%20ccp1.rA.y%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rn1B%20%3D%20ccp1.rB.x%20*%20normalY%20-%20ccp1.rB.y%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rn2A%20%3D%20ccp2.rA.x%20*%20normalY%20-%20ccp2.rA.y%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rn2B%20%3D%20ccp2.rB.x%20*%20normalY%20-%20ccp2.rB.y%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20var%20k11%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20invMassA%20%2B%20invMassB%20%2B%20invIA%20*%20rn1A%20*%20rn1A%20%2B%20invIB%20*%20rn1B%20*%20rn1B%3B%0A%20%20%20%20%20%20%20%20%20%20var%20k22%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20invMassA%20%2B%20invMassB%20%2B%20invIA%20*%20rn2A%20*%20rn2A%20%2B%20invIB%20*%20rn2B%20*%20rn2B%3B%0A%20%20%20%20%20%20%20%20%20%20var%20k12%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20invMassA%20%2B%20invMassB%20%2B%20invIA%20*%20rn1A%20*%20rn2A%20%2B%20invIB%20*%20rn1B%20*%20rn2B%3B%0A%20%20%20%20%20%20%20%20%20%20var%20k_maxConditionNumber%20%3D%20100.0%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(k11%20*%20k11%20%3C%20k_maxConditionNumber%20*%20(k11%20*%20k22%20-%20k12%20*%20k12))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cc.K.col1.Set(k11%2C%20k12)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20cc.K.col2.Set(k12%2C%20k22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20cc.K.GetInverse(cc.normalMass)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20cc.pointCount%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactSolver.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20var%20tVec2%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_constraintCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20this.m_constraints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20bodyA%20%3D%20c.bodyA%3B%0A%20%20%20%20%20%20%20%20var%20bodyB%20%3D%20c.bodyB%3B%0A%20%20%20%20%20%20%20%20var%20invMassA%20%3D%20bodyA.m_invMass%3B%0A%20%20%20%20%20%20%20%20var%20invIA%20%3D%20bodyA.m_invI%3B%0A%20%20%20%20%20%20%20%20var%20invMassB%20%3D%20bodyB.m_invMass%3B%0A%20%20%20%20%20%20%20%20var%20invIB%20%3D%20bodyB.m_invI%3B%0A%20%20%20%20%20%20%20%20var%20normalX%20%3D%20c.normal.x%3B%0A%20%20%20%20%20%20%20%20var%20normalY%20%3D%20c.normal.y%3B%0A%20%20%20%20%20%20%20%20var%20tangentX%20%3D%20normalY%3B%0A%20%20%20%20%20%20%20%20var%20tangentY%20%3D%20-normalX%3B%0A%20%20%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20var%20j%20%3D%200%3B%0A%20%20%20%20%20%20%20%20var%20tCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20%20%20tCount%20%3D%20c.pointCount%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(j%20%3D%200%3B%20j%20%3C%20tCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20ccp%20%3D%20c.points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp.normalImpulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp.tangentImpulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20PX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ccp.normalImpulse%20*%20normalX%20%2B%20ccp.tangentImpulse%20*%20tangentX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20PY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ccp.normalImpulse%20*%20normalY%20%2B%20ccp.tangentImpulse%20*%20tangentY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_angularVelocity%20-%3D%20invIA%20*%20(ccp.rA.x%20*%20PY%20-%20ccp.rA.y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_linearVelocity.x%20-%3D%20invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyA.m_linearVelocity.y%20-%3D%20invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_angularVelocity%20%2B%3D%20invIB%20*%20(ccp.rB.x%20*%20PY%20-%20ccp.rB.y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_linearVelocity.x%20%2B%3D%20invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bodyB.m_linearVelocity.y%20%2B%3D%20invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20tCount%20%3D%20c.pointCount%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(j%20%3D%200%3B%20j%20%3C%20tCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20ccp2%20%3D%20c.points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp2.normalImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp2.tangentImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactSolver.prototype.SolveVelocityConstraints%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20j%20%3D%200%3B%0A%20%20%20%20%20%20var%20ccp%3B%0A%20%20%20%20%20%20var%20rAX%20%3D%200%3B%0A%20%20%20%20%20%20var%20rAY%20%3D%200%3B%0A%20%20%20%20%20%20var%20rBX%20%3D%200%3B%0A%20%20%20%20%20%20var%20rBY%20%3D%200%3B%0A%20%20%20%20%20%20var%20dvX%20%3D%200%3B%0A%20%20%20%20%20%20var%20dvY%20%3D%200%3B%0A%20%20%20%20%20%20var%20vn%20%3D%200%3B%0A%20%20%20%20%20%20var%20vt%20%3D%200%3B%0A%20%20%20%20%20%20var%20lambda%20%3D%200%3B%0A%20%20%20%20%20%20var%20maxFriction%20%3D%200%3B%0A%20%20%20%20%20%20var%20newImpulse%20%3D%200%3B%0A%20%20%20%20%20%20var%20PX%20%3D%200%3B%0A%20%20%20%20%20%20var%20PY%20%3D%200%3B%0A%20%20%20%20%20%20var%20dX%20%3D%200%3B%0A%20%20%20%20%20%20var%20dY%20%3D%200%3B%0A%20%20%20%20%20%20var%20P1X%20%3D%200%3B%0A%20%20%20%20%20%20var%20P1Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20P2X%20%3D%200%3B%0A%20%20%20%20%20%20var%20P2Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_constraintCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20this.m_constraints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20bodyA%20%3D%20c.bodyA%3B%0A%20%20%20%20%20%20%20%20var%20bodyB%20%3D%20c.bodyB%3B%0A%20%20%20%20%20%20%20%20var%20wA%20%3D%20bodyA.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20var%20wB%20%3D%20bodyB.m_angularVelocity%3B%0A%20%20%20%20%20%20%20%20var%20vA%20%3D%20bodyA.m_linearVelocity%3B%0A%20%20%20%20%20%20%20%20var%20vB%20%3D%20bodyB.m_linearVelocity%3B%0A%20%20%20%20%20%20%20%20var%20invMassA%20%3D%20bodyA.m_invMass%3B%0A%20%20%20%20%20%20%20%20var%20invIA%20%3D%20bodyA.m_invI%3B%0A%20%20%20%20%20%20%20%20var%20invMassB%20%3D%20bodyB.m_invMass%3B%0A%20%20%20%20%20%20%20%20var%20invIB%20%3D%20bodyB.m_invI%3B%0A%20%20%20%20%20%20%20%20var%20normalX%20%3D%20c.normal.x%3B%0A%20%20%20%20%20%20%20%20var%20normalY%20%3D%20c.normal.y%3B%0A%20%20%20%20%20%20%20%20var%20tangentX%20%3D%20normalY%3B%0A%20%20%20%20%20%20%20%20var%20tangentY%20%3D%20-normalX%3B%0A%20%20%20%20%20%20%20%20var%20friction%20%3D%20c.friction%3B%0A%20%20%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20(j%20%3D%200%3B%20j%20%3C%20c.pointCount%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20ccp%20%3D%20c.points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20dvX%20%3D%20vB.x%20-%20wB%20*%20ccp.rB.y%20-%20vA.x%20%2B%20wA%20*%20ccp.rA.y%3B%0A%20%20%20%20%20%20%20%20%20%20dvY%20%3D%20vB.y%20%2B%20wB%20*%20ccp.rB.x%20-%20vA.y%20-%20wA%20*%20ccp.rA.x%3B%0A%20%20%20%20%20%20%20%20%20%20vt%20%3D%20dvX%20*%20tangentX%20%2B%20dvY%20*%20tangentY%3B%0A%20%20%20%20%20%20%20%20%20%20lambda%20%3D%20ccp.tangentMass%20*%20-vt%3B%0A%20%20%20%20%20%20%20%20%20%20maxFriction%20%3D%20friction%20*%20ccp.normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20newImpulse%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20ccp.tangentImpulse%20%2B%20lambda%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20-maxFriction%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20maxFriction%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20lambda%20%3D%20newImpulse%20-%20ccp.tangentImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20PX%20%3D%20lambda%20*%20tangentX%3B%0A%20%20%20%20%20%20%20%20%20%20PY%20%3D%20lambda%20*%20tangentY%3B%0A%20%20%20%20%20%20%20%20%20%20vA.x%20-%3D%20invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20vA.y%20-%3D%20invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20wA%20-%3D%20invIA%20*%20(ccp.rA.x%20*%20PY%20-%20ccp.rA.y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20wB%20%2B%3D%20invIB%20*%20(ccp.rB.x%20*%20PY%20-%20ccp.rB.y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20ccp.tangentImpulse%20%3D%20newImpulse%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20tCount%20%3D%20parseInt(c.pointCount)%3B%0A%20%20%20%20%20%20%20%20if%20(c.pointCount%20%3D%3D%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20ccp%20%3D%20c.points%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20dvX%20%3D%20vB.x%20%2B%20-wB%20*%20ccp.rB.y%20-%20vA.x%20-%20-wA%20*%20ccp.rA.y%3B%0A%20%20%20%20%20%20%20%20%20%20dvY%20%3D%20vB.y%20%2B%20wB%20*%20ccp.rB.x%20-%20vA.y%20-%20wA%20*%20ccp.rA.x%3B%0A%20%20%20%20%20%20%20%20%20%20vn%20%3D%20dvX%20*%20normalX%20%2B%20dvY%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20lambda%20%3D%20-ccp.normalMass%20*%20(vn%20-%20ccp.velocityBias)%3B%0A%20%20%20%20%20%20%20%20%20%20newImpulse%20%3D%20ccp.normalImpulse%20%2B%20lambda%3B%0A%20%20%20%20%20%20%20%20%20%20newImpulse%20%3D%20newImpulse%20%3E%200%20%3F%20newImpulse%20%3A%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20lambda%20%3D%20newImpulse%20-%20ccp.normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20PX%20%3D%20lambda%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20PY%20%3D%20lambda%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20vA.x%20-%3D%20invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20vA.y%20-%3D%20invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20wA%20-%3D%20invIA%20*%20(ccp.rA.x%20*%20PY%20-%20ccp.rA.y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20wB%20%2B%3D%20invIB%20*%20(ccp.rB.x%20*%20PY%20-%20ccp.rB.y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20ccp.normalImpulse%20%3D%20newImpulse%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20cp1%20%3D%20c.points%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20cp2%20%3D%20c.points%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20aX%20%3D%20cp1.normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20var%20aY%20%3D%20cp2.normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20var%20dv1X%20%3D%20vB.x%20-%20wB%20*%20cp1.rB.y%20-%20vA.x%20%2B%20wA%20*%20cp1.rA.y%3B%0A%20%20%20%20%20%20%20%20%20%20var%20dv1Y%20%3D%20vB.y%20%2B%20wB%20*%20cp1.rB.x%20-%20vA.y%20-%20wA%20*%20cp1.rA.x%3B%0A%20%20%20%20%20%20%20%20%20%20var%20dv2X%20%3D%20vB.x%20-%20wB%20*%20cp2.rB.y%20-%20vA.x%20%2B%20wA%20*%20cp2.rA.y%3B%0A%20%20%20%20%20%20%20%20%20%20var%20dv2Y%20%3D%20vB.y%20%2B%20wB%20*%20cp2.rB.x%20-%20vA.y%20-%20wA%20*%20cp2.rA.x%3B%0A%20%20%20%20%20%20%20%20%20%20var%20vn1%20%3D%20dv1X%20*%20normalX%20%2B%20dv1Y%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20var%20vn2%20%3D%20dv2X%20*%20normalX%20%2B%20dv2Y%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20var%20bX%20%3D%20vn1%20-%20cp1.velocityBias%3B%0A%20%20%20%20%20%20%20%20%20%20var%20bY%20%3D%20vn2%20-%20cp2.velocityBias%3B%0A%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20c.K%3B%0A%20%20%20%20%20%20%20%20%20%20bX%20-%3D%20tMat.col1.x%20*%20aX%20%2B%20tMat.col2.x%20*%20aY%3B%0A%20%20%20%20%20%20%20%20%20%20bY%20-%3D%20tMat.col1.y%20*%20aX%20%2B%20tMat.col2.y%20*%20aY%3B%0A%20%20%20%20%20%20%20%20%20%20var%20k_errorTol%20%3D%200.001%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(%3B%3B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20c.normalMass%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20xX%20%3D%20-(tMat.col1.x%20*%20bX%20%2B%20tMat.col2.x%20*%20bY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20xY%20%3D%20-(tMat.col1.y%20*%20bX%20%2B%20tMat.col2.y%20*%20bY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(xX%20%3E%3D%200.0%20%26%26%20xY%20%3E%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dX%20%3D%20xX%20-%20aX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dY%20%3D%20xY%20-%20aY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1X%20%3D%20dX%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1Y%20%3D%20dX%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2X%20%3D%20dY%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2Y%20%3D%20dY%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.x%20-%3D%20invMassA%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.y%20-%3D%20invMassA%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20wA%20-%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20invIA%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(cp1.rA.x%20*%20P1Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.rA.y%20*%20P1X%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rA.x%20*%20P2Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rA.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20invMassB%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20invMassB%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20wB%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20invIB%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(cp1.rB.x%20*%20P1Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.rB.y%20*%20P1X%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rB.x%20*%20P2Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rB.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.normalImpulse%20%3D%20xX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.normalImpulse%20%3D%20xY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20xX%20%3D%20-cp1.normalMass%20*%20bX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20xY%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vn1%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vn2%20%3D%20c.K.col1.y%20*%20xX%20%2B%20bY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(xX%20%3E%3D%200.0%20%26%26%20vn2%20%3E%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dX%20%3D%20xX%20-%20aX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dY%20%3D%20xY%20-%20aY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1X%20%3D%20dX%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1Y%20%3D%20dX%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2X%20%3D%20dY%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2Y%20%3D%20dY%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.x%20-%3D%20invMassA%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.y%20-%3D%20invMassA%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20wA%20-%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20invIA%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(cp1.rA.x%20*%20P1Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.rA.y%20*%20P1X%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rA.x%20*%20P2Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rA.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20invMassB%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20invMassB%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20wB%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20invIB%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(cp1.rB.x%20*%20P1Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.rB.y%20*%20P1X%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rB.x%20*%20P2Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rB.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.normalImpulse%20%3D%20xX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.normalImpulse%20%3D%20xY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20xX%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20xY%20%3D%20-cp2.normalMass%20*%20bY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vn1%20%3D%20c.K.col2.x%20*%20xY%20%2B%20bX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vn2%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(xY%20%3E%3D%200.0%20%26%26%20vn1%20%3E%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dX%20%3D%20xX%20-%20aX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dY%20%3D%20xY%20-%20aY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1X%20%3D%20dX%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1Y%20%3D%20dX%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2X%20%3D%20dY%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2Y%20%3D%20dY%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.x%20-%3D%20invMassA%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.y%20-%3D%20invMassA%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20wA%20-%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20invIA%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(cp1.rA.x%20*%20P1Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.rA.y%20*%20P1X%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rA.x%20*%20P2Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rA.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20invMassB%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20invMassB%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20wB%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20invIB%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(cp1.rB.x%20*%20P1Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.rB.y%20*%20P1X%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rB.x%20*%20P2Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rB.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.normalImpulse%20%3D%20xX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.normalImpulse%20%3D%20xY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20xX%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20xY%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vn1%20%3D%20bX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vn2%20%3D%20bY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(vn1%20%3E%3D%200.0%20%26%26%20vn2%20%3E%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dX%20%3D%20xX%20-%20aX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dY%20%3D%20xY%20-%20aY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1X%20%3D%20dX%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P1Y%20%3D%20dX%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2X%20%3D%20dY%20*%20normalX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20P2Y%20%3D%20dY%20*%20normalY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.x%20-%3D%20invMassA%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vA.y%20-%3D%20invMassA%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20wA%20-%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20invIA%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(cp1.rA.x%20*%20P1Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.rA.y%20*%20P1X%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rA.x%20*%20P2Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rA.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20invMassB%20*%20(P1X%20%2B%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20invMassB%20*%20(P1Y%20%2B%20P2Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20wB%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20invIB%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(cp1.rB.x%20*%20P1Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.rB.y%20*%20P1X%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rB.x%20*%20P2Y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.rB.y%20*%20P2X)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp1.normalImpulse%20%3D%20xX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cp2.normalImpulse%20%3D%20xY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20bodyA.m_angularVelocity%20%3D%20wA%3B%0A%20%20%20%20%20%20%20%20bodyB.m_angularVelocity%20%3D%20wB%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactSolver.prototype.FinalizeVelocityConstraints%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_constraintCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20this.m_constraints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20m%20%3D%20c.manifold%3B%0A%20%20%20%20%20%20%20%20for%20(var%20j%20%3D%200%3B%20j%20%3C%20c.pointCount%3B%20%2B%2Bj)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20point1%20%3D%20m.m_points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20point2%20%3D%20c.points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20point1.m_normalImpulse%20%3D%20point2.normalImpulse%3B%0A%20%20%20%20%20%20%20%20%20%20point1.m_tangentImpulse%20%3D%20point2.tangentImpulse%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ContactSolver.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20var%20minSeparation%20%3D%200.0%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20this.m_constraintCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20var%20c%20%3D%20this.m_constraints%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20var%20bodyA%20%3D%20c.bodyA%3B%0A%20%20%20%20%20%20%20%20var%20bodyB%20%3D%20c.bodyB%3B%0A%20%20%20%20%20%20%20%20var%20invMassA%20%3D%20bodyA.m_mass%20*%20bodyA.m_invMass%3B%0A%20%20%20%20%20%20%20%20var%20invIA%20%3D%20bodyA.m_mass%20*%20bodyA.m_invI%3B%0A%20%20%20%20%20%20%20%20var%20invMassB%20%3D%20bodyB.m_mass%20*%20bodyB.m_invMass%3B%0A%20%20%20%20%20%20%20%20var%20invIB%20%3D%20bodyB.m_mass%20*%20bodyB.m_invI%3B%0A%20%20%20%20%20%20%20%20b2ContactSolver.s_psm.Initialize(c)%3B%0A%20%20%20%20%20%20%20%20var%20normal%20%3D%20b2ContactSolver.s_psm.m_normal%3B%0A%20%20%20%20%20%20%20%20for%20(var%20j%20%3D%200%3B%20j%20%3C%20c.pointCount%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20ccp%20%3D%20c.points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20point%20%3D%20b2ContactSolver.s_psm.m_points%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20separation%20%3D%20b2ContactSolver.s_psm.m_separations%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rAX%20%3D%20point.x%20-%20bodyA.m_sweep.c.x%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rAY%20%3D%20point.y%20-%20bodyA.m_sweep.c.y%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rBX%20%3D%20point.x%20-%20bodyB.m_sweep.c.x%3B%0A%20%20%20%20%20%20%20%20%20%20var%20rBY%20%3D%20point.y%20-%20bodyB.m_sweep.c.y%3B%0A%20%20%20%20%20%20%20%20%20%20minSeparation%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20minSeparation%20%3C%20separation%20%3F%20minSeparation%20%3A%20separation%3B%0A%20%20%20%20%20%20%20%20%20%20var%20C%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20baumgarte%20*%20(separation%20%2B%20b2Settings.b2_linearSlop)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20-b2Settings.b2_maxLinearCorrection%2C%0A%20%20%20%20%20%20%20%20%20%20%20%200.0%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20impulse%20%3D%20-ccp.equalizedMass%20*%20C%3B%0A%20%20%20%20%20%20%20%20%20%20var%20PX%20%3D%20impulse%20*%20normal.x%3B%0A%20%20%20%20%20%20%20%20%20%20var%20PY%20%3D%20impulse%20*%20normal.y%3B%0A%20%20%20%20%20%20%20%20%20%20bodyA.m_sweep.c.x%20-%3D%20invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20bodyA.m_sweep.c.y%20-%3D%20invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20bodyA.m_sweep.a%20-%3D%20invIA%20*%20(rAX%20*%20PY%20-%20rAY%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20bodyA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%20%20bodyB.m_sweep.c.x%20%2B%3D%20invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20%20%20bodyB.m_sweep.c.y%20%2B%3D%20invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20%20%20bodyB.m_sweep.a%20%2B%3D%20invIB%20*%20(rBX%20*%20PY%20-%20rBY%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20%20%20bodyB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20minSeparation%20%3E%20-1.5%20*%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2ContactSolver.s_worldManifold%20%3D%0A%20%20%20%20%20%20%20%20new%20b2WorldManifold()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2ContactSolver.s_psm%20%3D%0A%20%20%20%20%20%20%20%20new%20b2PositionSolverManifold()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Box2D.inherit(b2EdgeAndCircleContact%2C%20Box2D.Dynamics.Contacts.b2Contact)%3B%0A%20%20%20%20b2EdgeAndCircleContact.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%20%20%20%20b2EdgeAndCircleContact.b2EdgeAndCircleContact%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeAndCircleContact.Create%20%3D%20function%20(allocator)%20%7B%0A%20%20%20%20%20%20return%20new%20b2EdgeAndCircleContact()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeAndCircleContact.Destroy%20%3D%20function%20(contact%2C%20allocator)%20%7B%7D%3B%0A%20%20%20%20b2EdgeAndCircleContact.prototype.Reset%20%3D%20function%20(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20this.__super.Reset.call(this%2C%20fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeAndCircleContact.prototype.Evaluate%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_fixtureA.GetBody()%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_fixtureB.GetBody()%3B%0A%20%20%20%20%20%20this.b2CollideEdgeAndCircle(%0A%20%20%20%20%20%20%20%20this.m_manifold%2C%0A%20%20%20%20%20%20%20%20this.m_fixtureA.GetShape()%20instanceof%20b2EdgeShape%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_fixtureA.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20bA.m_xf%2C%0A%20%20%20%20%20%20%20%20this.m_fixtureB.GetShape()%20instanceof%20b2CircleShape%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_fixtureB.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20bB.m_xf%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2EdgeAndCircleContact.prototype.b2CollideEdgeAndCircle%20%3D%20function%20(%0A%20%20%20%20%20%20manifold%2C%0A%20%20%20%20%20%20edge%2C%0A%20%20%20%20%20%20xf1%2C%0A%20%20%20%20%20%20circle%2C%0A%20%20%20%20%20%20xf2%0A%20%20%20%20)%20%7B%7D%3B%0A%20%20%20%20Box2D.inherit(b2NullContact%2C%20Box2D.Dynamics.Contacts.b2Contact)%3B%0A%20%20%20%20b2NullContact.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%20%20%20%20b2NullContact.b2NullContact%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2NullContact.prototype.b2NullContact%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2Contact.call(this)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2NullContact.prototype.Evaluate%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20Box2D.inherit(b2PolyAndCircleContact%2C%20Box2D.Dynamics.Contacts.b2Contact)%3B%0A%20%20%20%20b2PolyAndCircleContact.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%20%20%20%20b2PolyAndCircleContact.b2PolyAndCircleContact%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolyAndCircleContact.Create%20%3D%20function%20(allocator)%20%7B%0A%20%20%20%20%20%20return%20new%20b2PolyAndCircleContact()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolyAndCircleContact.Destroy%20%3D%20function%20(contact%2C%20allocator)%20%7B%7D%3B%0A%20%20%20%20b2PolyAndCircleContact.prototype.Reset%20%3D%20function%20(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20this.__super.Reset.call(this%2C%20fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%20%20b2Settings.b2Assert(fixtureA.GetType()%20%3D%3D%20b2Shape.e_polygonShape)%3B%0A%20%20%20%20%20%20b2Settings.b2Assert(fixtureB.GetType()%20%3D%3D%20b2Shape.e_circleShape)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolyAndCircleContact.prototype.Evaluate%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_fixtureA.m_body%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_fixtureB.m_body%3B%0A%20%20%20%20%20%20b2Collision.CollidePolygonAndCircle(%0A%20%20%20%20%20%20%20%20this.m_manifold%2C%0A%20%20%20%20%20%20%20%20this.m_fixtureA.GetShape()%20instanceof%20b2PolygonShape%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_fixtureA.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20bA.m_xf%2C%0A%20%20%20%20%20%20%20%20this.m_fixtureB.GetShape()%20instanceof%20b2CircleShape%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_fixtureB.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20bB.m_xf%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2PolyAndEdgeContact%2C%20Box2D.Dynamics.Contacts.b2Contact)%3B%0A%20%20%20%20b2PolyAndEdgeContact.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%20%20%20%20b2PolyAndEdgeContact.b2PolyAndEdgeContact%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolyAndEdgeContact.Create%20%3D%20function%20(allocator)%20%7B%0A%20%20%20%20%20%20return%20new%20b2PolyAndEdgeContact()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolyAndEdgeContact.Destroy%20%3D%20function%20(contact%2C%20allocator)%20%7B%7D%3B%0A%20%20%20%20b2PolyAndEdgeContact.prototype.Reset%20%3D%20function%20(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20this.__super.Reset.call(this%2C%20fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%20%20b2Settings.b2Assert(fixtureA.GetType()%20%3D%3D%20b2Shape.e_polygonShape)%3B%0A%20%20%20%20%20%20b2Settings.b2Assert(fixtureB.GetType()%20%3D%3D%20b2Shape.e_edgeShape)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolyAndEdgeContact.prototype.Evaluate%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_fixtureA.GetBody()%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_fixtureB.GetBody()%3B%0A%20%20%20%20%20%20this.b2CollidePolyAndEdge(%0A%20%20%20%20%20%20%20%20this.m_manifold%2C%0A%20%20%20%20%20%20%20%20this.m_fixtureA.GetShape()%20instanceof%20b2PolygonShape%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_fixtureA.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20bA.m_xf%2C%0A%20%20%20%20%20%20%20%20this.m_fixtureB.GetShape()%20instanceof%20b2EdgeShape%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_fixtureB.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20bB.m_xf%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolyAndEdgeContact.prototype.b2CollidePolyAndEdge%20%3D%20function%20(%0A%20%20%20%20%20%20manifold%2C%0A%20%20%20%20%20%20polygon%2C%0A%20%20%20%20%20%20xf1%2C%0A%20%20%20%20%20%20edge%2C%0A%20%20%20%20%20%20xf2%0A%20%20%20%20)%20%7B%7D%3B%0A%20%20%20%20Box2D.inherit(b2PolygonContact%2C%20Box2D.Dynamics.Contacts.b2Contact)%3B%0A%20%20%20%20b2PolygonContact.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%20%20%20%20b2PolygonContact.b2PolygonContact%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonContact.Create%20%3D%20function%20(allocator)%20%7B%0A%20%20%20%20%20%20return%20new%20b2PolygonContact()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonContact.Destroy%20%3D%20function%20(contact%2C%20allocator)%20%7B%7D%3B%0A%20%20%20%20b2PolygonContact.prototype.Reset%20%3D%20function%20(fixtureA%2C%20fixtureB)%20%7B%0A%20%20%20%20%20%20this.__super.Reset.call(this%2C%20fixtureA%2C%20fixtureB)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PolygonContact.prototype.Evaluate%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_fixtureA.GetBody()%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_fixtureB.GetBody()%3B%0A%20%20%20%20%20%20b2Collision.CollidePolygons(%0A%20%20%20%20%20%20%20%20this.m_manifold%2C%0A%20%20%20%20%20%20%20%20this.m_fixtureA.GetShape()%20instanceof%20b2PolygonShape%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_fixtureA.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20bA.m_xf%2C%0A%20%20%20%20%20%20%20%20this.m_fixtureB.GetShape()%20instanceof%20b2PolygonShape%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.m_fixtureB.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%3A%20null%2C%0A%20%20%20%20%20%20%20%20bB.m_xf%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PositionSolverManifold.b2PositionSolverManifold%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2PositionSolverManifold.prototype.b2PositionSolverManifold%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_normal%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_separations%20%3D%20new%20Vector_a2j_Number(%0A%20%20%20%20%20%20%20%20b2Settings.b2_maxManifoldPoints%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.m_points%20%3D%20new%20Vector(b2Settings.b2_maxManifoldPoints)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20this.m_points%5Bi%5D%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PositionSolverManifold.prototype.Initialize%20%3D%20function%20(cc)%20%7B%0A%20%20%20%20%20%20b2Settings.b2Assert(cc.pointCount%20%3E%200)%3B%0A%20%20%20%20%20%20var%20i%20%3D%200%3B%0A%20%20%20%20%20%20var%20clipPointX%20%3D%200%3B%0A%20%20%20%20%20%20var%20clipPointY%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20var%20planePointX%20%3D%200%3B%0A%20%20%20%20%20%20var%20planePointY%20%3D%200%3B%0A%20%20%20%20%20%20switch%20(cc.type)%20%7B%0A%20%20%20%20%20%20%20%20case%20b2Manifold.e_circles%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20pointAX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyA.m_xf.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20pointAY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyA.m_xf.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.points%5B0%5D.localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20pointBX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyB.m_xf.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20pointBY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyB.m_xf.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dX%20%3D%20pointBX%20-%20pointAX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20dY%20%3D%20pointBY%20-%20pointAY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20d2%20%3D%20dX%20*%20dX%20%2B%20dY%20*%20dY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(d2%20%3E%20Number.MIN_VALUE%20*%20Number.MIN_VALUE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20d%20%3D%20Math.sqrt(d2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%20dX%20%2F%20d%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%20dY%20%2F%20d%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%201.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5B0%5D.x%20%3D%200.5%20*%20(pointAX%20%2B%20pointBX)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5B0%5D.y%20%3D%200.5%20*%20(pointAY%20%2B%20pointBY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_separations%5B0%5D%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dX%20*%20this.m_normal.x%20%2B%20dY%20*%20this.m_normal.y%20-%20cc.radius%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Manifold.e_faceA%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.localPlaneNormal%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20planePointX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyA.m_xf.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20planePointY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyA.m_xf.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20cc.pointCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.points%5Bi%5D.localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyB.m_xf.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyB.m_xf.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_separations%5Bi%5D%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointX%20-%20planePointX)%20*%20this.m_normal.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointY%20-%20planePointY)%20*%20this.m_normal.y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.radius%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D.x%20%3D%20clipPointX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D.y%20%3D%20clipPointY%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Manifold.e_faceB%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.localPlaneNormal%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20planePointX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyB.m_xf.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20planePointY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyB.m_xf.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20tMat%20%3D%20cc.bodyA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(i%20%3D%200%3B%20i%20%3C%20cc.pointCount%3B%20%2B%2Bi)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20tVec%20%3D%20cc.points%5Bi%5D.localPoint%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointX%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyA.m_xf.position.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20clipPointY%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.bodyA.m_xf.position.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_separations%5Bi%5D%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointX%20-%20planePointX)%20*%20this.m_normal.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(clipPointY%20-%20planePointY)%20*%20this.m_normal.y%20-%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cc.radius%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.m_points%5Bi%5D.Set(clipPointX%2C%20clipPointY)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.x%20*%3D%20-1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_normal.y%20*%3D%20-1%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2PositionSolverManifold.circlePointA%20%3D%0A%20%20%20%20%20%20%20%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Contacts.b2PositionSolverManifold.circlePointB%20%3D%0A%20%20%20%20%20%20%20%20new%20b2Vec2()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D)()%3B%0A%20%20(function%20()%20%7B%0A%20%20%20%20var%20b2Body%20%3D%20Box2D.Dynamics.b2Body%2C%0A%20%20%20%20%20%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%2C%0A%20%20%20%20%20%20b2ContactFilter%20%3D%20Box2D.Dynamics.b2ContactFilter%2C%0A%20%20%20%20%20%20b2ContactImpulse%20%3D%20Box2D.Dynamics.b2ContactImpulse%2C%0A%20%20%20%20%20%20b2ContactListener%20%3D%20Box2D.Dynamics.b2ContactListener%2C%0A%20%20%20%20%20%20b2ContactManager%20%3D%20Box2D.Dynamics.b2ContactManager%2C%0A%20%20%20%20%20%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%2C%0A%20%20%20%20%20%20b2DestructionListener%20%3D%20Box2D.Dynamics.b2DestructionListener%2C%0A%20%20%20%20%20%20b2FilterData%20%3D%20Box2D.Dynamics.b2FilterData%2C%0A%20%20%20%20%20%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%2C%0A%20%20%20%20%20%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%2C%0A%20%20%20%20%20%20b2Island%20%3D%20Box2D.Dynamics.b2Island%2C%0A%20%20%20%20%20%20b2TimeStep%20%3D%20Box2D.Dynamics.b2TimeStep%2C%0A%20%20%20%20%20%20b2World%20%3D%20Box2D.Dynamics.b2World%2C%0A%20%20%20%20%20%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%2C%0A%20%20%20%20%20%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%2C%0A%20%20%20%20%20%20b2Math%20%3D%20Box2D.Common.Math.b2Math%2C%0A%20%20%20%20%20%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%2C%0A%20%20%20%20%20%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%2C%0A%20%20%20%20%20%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%2C%0A%20%20%20%20%20%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%2C%0A%20%20%20%20%20%20b2Color%20%3D%20Box2D.Common.b2Color%2C%0A%20%20%20%20%20%20b2internal%20%3D%20Box2D.Common.b2internal%2C%0A%20%20%20%20%20%20b2Settings%20%3D%20Box2D.Common.b2Settings%2C%0A%20%20%20%20%20%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%2C%0A%20%20%20%20%20%20b2EdgeChainDef%20%3D%20Box2D.Collision.Shapes.b2EdgeChainDef%2C%0A%20%20%20%20%20%20b2EdgeShape%20%3D%20Box2D.Collision.Shapes.b2EdgeShape%2C%0A%20%20%20%20%20%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%2C%0A%20%20%20%20%20%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%2C%0A%20%20%20%20%20%20b2Shape%20%3D%20Box2D.Collision.Shapes.b2Shape%2C%0A%20%20%20%20%20%20b2BuoyancyController%20%3D%20Box2D.Dynamics.Controllers.b2BuoyancyController%2C%0A%20%20%20%20%20%20b2ConstantAccelController%20%3D%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2ConstantAccelController%2C%0A%20%20%20%20%20%20b2ConstantForceController%20%3D%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2ConstantForceController%2C%0A%20%20%20%20%20%20b2Controller%20%3D%20Box2D.Dynamics.Controllers.b2Controller%2C%0A%20%20%20%20%20%20b2ControllerEdge%20%3D%20Box2D.Dynamics.Controllers.b2ControllerEdge%2C%0A%20%20%20%20%20%20b2GravityController%20%3D%20Box2D.Dynamics.Controllers.b2GravityController%2C%0A%20%20%20%20%20%20b2TensorDampingController%20%3D%0A%20%20%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2TensorDampingController%3B%0A%0A%20%20%20%20Box2D.inherit(%0A%20%20%20%20%20%20b2BuoyancyController%2C%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller%0A%20%20%20%20)%3B%0A%20%20%20%20b2BuoyancyController.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.prototype%3B%0A%20%20%20%20b2BuoyancyController.b2BuoyancyController%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(%0A%20%20%20%20%20%20%20%20this%2C%0A%20%20%20%20%20%20%20%20arguments%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.normal%20%3D%20new%20b2Vec2(0%2C%20-1)%3B%0A%20%20%20%20%20%20this.offset%20%3D%200%3B%0A%20%20%20%20%20%20this.density%20%3D%200%3B%0A%20%20%20%20%20%20this.velocity%20%3D%20new%20b2Vec2(0%2C%200)%3B%0A%20%20%20%20%20%20this.linearDrag%20%3D%202%3B%0A%20%20%20%20%20%20this.angularDrag%20%3D%201%3B%0A%20%20%20%20%20%20this.useDensity%20%3D%20false%3B%0A%20%20%20%20%20%20this.useWorldGravity%20%3D%20true%3B%0A%20%20%20%20%20%20this.gravity%20%3D%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2BuoyancyController.prototype.Step%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20if%20(!this.m_bodyList)%20return%3B%0A%20%20%20%20%20%20if%20(this.useWorldGravity)%20%7B%0A%20%20%20%20%20%20%20%20this.gravity%20%3D%20this.GetWorld().GetGravity().Copy()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20for%20(var%20i%20%3D%20this.m_bodyList%3B%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20var%20body%20%3D%20i.body%3B%0A%20%20%20%20%20%20%20%20if%20(body.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20areac%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20var%20massc%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20var%20area%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20var%20mass%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20for%20(%0A%20%20%20%20%20%20%20%20%20%20var%20fixture%20%3D%20body.GetFixtureList()%3B%0A%20%20%20%20%20%20%20%20%20%20fixture%3B%0A%20%20%20%20%20%20%20%20%20%20fixture%20%3D%20fixture.GetNext()%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20sc%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20%20%20%20%20var%20sarea%20%3D%20fixture%0A%20%20%20%20%20%20%20%20%20%20%20%20.GetShape()%0A%20%20%20%20%20%20%20%20%20%20%20%20.ComputeSubmergedArea(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.normal%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.offset%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20body.GetTransform()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sc%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20area%20%2B%3D%20sarea%3B%0A%20%20%20%20%20%20%20%20%20%20areac.x%20%2B%3D%20sarea%20*%20sc.x%3B%0A%20%20%20%20%20%20%20%20%20%20areac.y%20%2B%3D%20sarea%20*%20sc.y%3B%0A%20%20%20%20%20%20%20%20%20%20var%20shapeDensity%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.useDensity)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20shapeDensity%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20shapeDensity%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20mass%20%2B%3D%20sarea%20*%20shapeDensity%3B%0A%20%20%20%20%20%20%20%20%20%20massc.x%20%2B%3D%20sarea%20*%20sc.x%20*%20shapeDensity%3B%0A%20%20%20%20%20%20%20%20%20%20massc.y%20%2B%3D%20sarea%20*%20sc.y%20*%20shapeDensity%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20areac.x%20%2F%3D%20area%3B%0A%20%20%20%20%20%20%20%20areac.y%20%2F%3D%20area%3B%0A%20%20%20%20%20%20%20%20massc.x%20%2F%3D%20mass%3B%0A%20%20%20%20%20%20%20%20massc.y%20%2F%3D%20mass%3B%0A%20%20%20%20%20%20%20%20if%20(area%20%3C%20Number.MIN_VALUE)%20continue%3B%0A%20%20%20%20%20%20%20%20var%20buoyancyForce%20%3D%20this.gravity.GetNegative()%3B%0A%20%20%20%20%20%20%20%20buoyancyForce.Multiply(this.density%20*%20area)%3B%0A%20%20%20%20%20%20%20%20body.ApplyForce(buoyancyForce%2C%20massc)%3B%0A%20%20%20%20%20%20%20%20var%20dragForce%20%3D%20body.GetLinearVelocityFromWorldPoint(areac)%3B%0A%20%20%20%20%20%20%20%20dragForce.Subtract(this.velocity)%3B%0A%20%20%20%20%20%20%20%20dragForce.Multiply(-this.linearDrag%20*%20area)%3B%0A%20%20%20%20%20%20%20%20body.ApplyForce(dragForce%2C%20areac)%3B%0A%20%20%20%20%20%20%20%20body.ApplyTorque(%0A%20%20%20%20%20%20%20%20%20%20(-body.GetInertia()%20%2F%20body.GetMass())%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20area%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20body.GetAngularVelocity()%20*%0A%20%20%20%20%20%20%20%20%20%20%20%20this.angularDrag%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2BuoyancyController.prototype.Draw%20%3D%20function%20(debugDraw)%20%7B%0A%20%20%20%20%20%20var%20r%20%3D%201000%3B%0A%20%20%20%20%20%20var%20p1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20var%20p2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20p1.x%20%3D%20this.normal.x%20*%20this.offset%20%2B%20this.normal.y%20*%20r%3B%0A%20%20%20%20%20%20p1.y%20%3D%20this.normal.y%20*%20this.offset%20-%20this.normal.x%20*%20r%3B%0A%20%20%20%20%20%20p2.x%20%3D%20this.normal.x%20*%20this.offset%20-%20this.normal.y%20*%20r%3B%0A%20%20%20%20%20%20p2.y%20%3D%20this.normal.y%20*%20this.offset%20%2B%20this.normal.x%20*%20r%3B%0A%20%20%20%20%20%20var%20color%20%3D%20new%20b2Color(0%2C%200%2C%201)%3B%0A%20%20%20%20%20%20debugDraw.DrawSegment(p1%2C%20p2%2C%20color)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(%0A%20%20%20%20%20%20b2ConstantAccelController%2C%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller%0A%20%20%20%20)%3B%0A%20%20%20%20b2ConstantAccelController.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.prototype%3B%0A%20%20%20%20b2ConstantAccelController.b2ConstantAccelController%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(%0A%20%20%20%20%20%20%20%20this%2C%0A%20%20%20%20%20%20%20%20arguments%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.A%20%3D%20new%20b2Vec2(0%2C%200)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ConstantAccelController.prototype.Step%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20smallA%20%3D%20new%20b2Vec2(this.A.x%20*%20step.dt%2C%20this.A.y%20*%20step.dt)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%20this.m_bodyList%3B%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20var%20body%20%3D%20i.body%3B%0A%20%20%20%20%20%20%20%20if%20(!body.IsAwake())%20continue%3B%0A%20%20%20%20%20%20%20%20body.SetLinearVelocity(%0A%20%20%20%20%20%20%20%20%20%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20%20%20%20%20body.GetLinearVelocity().x%20%2B%20smallA.x%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20body.GetLinearVelocity().y%20%2B%20smallA.y%0A%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(%0A%20%20%20%20%20%20b2ConstantForceController%2C%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller%0A%20%20%20%20)%3B%0A%20%20%20%20b2ConstantForceController.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.prototype%3B%0A%20%20%20%20b2ConstantForceController.b2ConstantForceController%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(%0A%20%20%20%20%20%20%20%20this%2C%0A%20%20%20%20%20%20%20%20arguments%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.F%20%3D%20new%20b2Vec2(0%2C%200)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ConstantForceController.prototype.Step%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%20this.m_bodyList%3B%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20var%20body%20%3D%20i.body%3B%0A%20%20%20%20%20%20%20%20if%20(!body.IsAwake())%20continue%3B%0A%20%20%20%20%20%20%20%20body.ApplyForce(this.F%2C%20body.GetWorldCenter())%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Controller.b2Controller%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Controller.prototype.Step%20%3D%20function%20(step)%20%7B%7D%3B%0A%20%20%20%20b2Controller.prototype.Draw%20%3D%20function%20(debugDraw)%20%7B%7D%3B%0A%20%20%20%20b2Controller.prototype.AddBody%20%3D%20function%20(body)%20%7B%0A%20%20%20%20%20%20var%20edge%20%3D%20new%20b2ControllerEdge()%3B%0A%20%20%20%20%20%20edge.controller%20%3D%20this%3B%0A%20%20%20%20%20%20edge.body%20%3D%20body%3B%0A%20%20%20%20%20%20edge.nextBody%20%3D%20this.m_bodyList%3B%0A%20%20%20%20%20%20edge.prevBody%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_bodyList%20%3D%20edge%3B%0A%20%20%20%20%20%20if%20(edge.nextBody)%20edge.nextBody.prevBody%20%3D%20edge%3B%0A%20%20%20%20%20%20this.m_bodyCount%2B%2B%3B%0A%20%20%20%20%20%20edge.nextController%20%3D%20body.m_controllerList%3B%0A%20%20%20%20%20%20edge.prevController%20%3D%20null%3B%0A%20%20%20%20%20%20body.m_controllerList%20%3D%20edge%3B%0A%20%20%20%20%20%20if%20(edge.nextController)%20edge.nextController.prevController%20%3D%20edge%3B%0A%20%20%20%20%20%20body.m_controllerCount%2B%2B%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Controller.prototype.RemoveBody%20%3D%20function%20(body)%20%7B%0A%20%20%20%20%20%20var%20edge%20%3D%20body.m_controllerList%3B%0A%20%20%20%20%20%20while%20(edge%20%26%26%20edge.controller%20!%3D%20this)%20edge%20%3D%20edge.nextController%3B%0A%20%20%20%20%20%20if%20(edge.prevBody)%20edge.prevBody.nextBody%20%3D%20edge.nextBody%3B%0A%20%20%20%20%20%20if%20(edge.nextBody)%20edge.nextBody.prevBody%20%3D%20edge.prevBody%3B%0A%20%20%20%20%20%20if%20(edge.nextController)%0A%20%20%20%20%20%20%20%20edge.nextController.prevController%20%3D%20edge.prevController%3B%0A%20%20%20%20%20%20if%20(edge.prevController)%0A%20%20%20%20%20%20%20%20edge.prevController.nextController%20%3D%20edge.nextController%3B%0A%20%20%20%20%20%20if%20(this.m_bodyList%20%3D%3D%20edge)%20this.m_bodyList%20%3D%20edge.nextBody%3B%0A%20%20%20%20%20%20if%20(body.m_controllerList%20%3D%3D%20edge)%0A%20%20%20%20%20%20%20%20body.m_controllerList%20%3D%20edge.nextController%3B%0A%20%20%20%20%20%20body.m_controllerCount--%3B%0A%20%20%20%20%20%20this.m_bodyCount--%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Controller.prototype.Clear%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20while%20(this.m_bodyList)%20this.RemoveBody(this.m_bodyList.body)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Controller.prototype.GetNext%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_next%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Controller.prototype.GetWorld%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_world%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Controller.prototype.GetBodyList%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyList%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2ControllerEdge.b2ControllerEdge%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20Box2D.inherit(b2GravityController%2C%20Box2D.Dynamics.Controllers.b2Controller)%3B%0A%20%20%20%20b2GravityController.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.prototype%3B%0A%20%20%20%20b2GravityController.b2GravityController%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(%0A%20%20%20%20%20%20%20%20this%2C%0A%20%20%20%20%20%20%20%20arguments%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.G%20%3D%201%3B%0A%20%20%20%20%20%20this.invSqr%20%3D%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GravityController.prototype.Step%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20i%20%3D%20null%3B%0A%20%20%20%20%20%20var%20body1%20%3D%20null%3B%0A%20%20%20%20%20%20var%20p1%20%3D%20null%3B%0A%20%20%20%20%20%20var%20mass1%20%3D%200%3B%0A%20%20%20%20%20%20var%20j%20%3D%20null%3B%0A%20%20%20%20%20%20var%20body2%20%3D%20null%3B%0A%20%20%20%20%20%20var%20p2%20%3D%20null%3B%0A%20%20%20%20%20%20var%20dx%20%3D%200%3B%0A%20%20%20%20%20%20var%20dy%20%3D%200%3B%0A%20%20%20%20%20%20var%20r2%20%3D%200%3B%0A%20%20%20%20%20%20var%20f%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(this.invSqr)%20%7B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%20this.m_bodyList%3B%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20body1%20%3D%20i.body%3B%0A%20%20%20%20%20%20%20%20%20%20p1%20%3D%20body1.GetWorldCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20mass1%20%3D%20body1.GetMass()%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(j%20%3D%20this.m_bodyList%3B%20j%20!%3D%20i%3B%20j%20%3D%20j.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20body2%20%3D%20j.body%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20p2%20%3D%20body2.GetWorldCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dx%20%3D%20p2.x%20-%20p1.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dy%20%3D%20p2.y%20-%20p1.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20r2%20%3D%20dx%20*%20dx%20%2B%20dy%20*%20dy%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(r2%20%3C%20Number.MIN_VALUE)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20f%20%3D%20new%20b2Vec2(dx%2C%20dy)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20f.Multiply((this.G%20%2F%20r2%20%2F%20Math.sqrt(r2))%20*%20mass1%20*%20body2.GetMass())%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(body1.IsAwake())%20body1.ApplyForce(f%2C%20p1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20f.Multiply(-1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(body2.IsAwake())%20body2.ApplyForce(f%2C%20p2)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20for%20(i%20%3D%20this.m_bodyList%3B%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20body1%20%3D%20i.body%3B%0A%20%20%20%20%20%20%20%20%20%20p1%20%3D%20body1.GetWorldCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20mass1%20%3D%20body1.GetMass()%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(j%20%3D%20this.m_bodyList%3B%20j%20!%3D%20i%3B%20j%20%3D%20j.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20body2%20%3D%20j.body%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20p2%20%3D%20body2.GetWorldCenter()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dx%20%3D%20p2.x%20-%20p1.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dy%20%3D%20p2.y%20-%20p1.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20r2%20%3D%20dx%20*%20dx%20%2B%20dy%20*%20dy%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(r2%20%3C%20Number.MIN_VALUE)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20f%20%3D%20new%20b2Vec2(dx%2C%20dy)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20f.Multiply((this.G%20%2F%20r2)%20*%20mass1%20*%20body2.GetMass())%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(body1.IsAwake())%20body1.ApplyForce(f%2C%20p1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20f.Multiply(-1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(body2.IsAwake())%20body2.ApplyForce(f%2C%20p2)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(%0A%20%20%20%20%20%20b2TensorDampingController%2C%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller%0A%20%20%20%20)%3B%0A%20%20%20%20b2TensorDampingController.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.prototype%3B%0A%20%20%20%20b2TensorDampingController.b2TensorDampingController%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(%0A%20%20%20%20%20%20%20%20this%2C%0A%20%20%20%20%20%20%20%20arguments%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.T%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.maxTimestep%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2TensorDampingController.prototype.SetAxisAligned%20%3D%20function%20(%0A%20%20%20%20%20%20xDamping%2C%0A%20%20%20%20%20%20yDamping%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(xDamping%20%3D%3D%3D%20undefined)%20xDamping%20%3D%200%3B%0A%20%20%20%20%20%20if%20(yDamping%20%3D%3D%3D%20undefined)%20yDamping%20%3D%200%3B%0A%20%20%20%20%20%20this.T.col1.x%20%3D%20-xDamping%3B%0A%20%20%20%20%20%20this.T.col1.y%20%3D%200%3B%0A%20%20%20%20%20%20this.T.col2.x%20%3D%200%3B%0A%20%20%20%20%20%20this.T.col2.y%20%3D%20-yDamping%3B%0A%20%20%20%20%20%20if%20(xDamping%20%3E%200%20%7C%7C%20yDamping%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20this.maxTimestep%20%3D%201%20%2F%20Math.max(xDamping%2C%20yDamping)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.maxTimestep%20%3D%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2TensorDampingController.prototype.Step%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20timestep%20%3D%20step.dt%3B%0A%20%20%20%20%20%20if%20(timestep%20%3C%3D%20Number.MIN_VALUE)%20return%3B%0A%20%20%20%20%20%20if%20(timestep%20%3E%20this.maxTimestep%20%26%26%20this.maxTimestep%20%3E%200)%0A%20%20%20%20%20%20%20%20timestep%20%3D%20this.maxTimestep%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%20this.m_bodyList%3B%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%20%20%20%20%20%20%20%20var%20body%20%3D%20i.body%3B%0A%20%20%20%20%20%20%20%20if%20(!body.IsAwake())%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20damping%20%3D%20body.GetWorldVector(%0A%20%20%20%20%20%20%20%20%20%20b2Math.MulMV(this.T%2C%20body.GetLocalVector(body.GetLinearVelocity()))%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20body.SetLinearVelocity(%0A%20%20%20%20%20%20%20%20%20%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20%20%20%20%20body.GetLinearVelocity().x%20%2B%20damping.x%20*%20timestep%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20body.GetLinearVelocity().y%20%2B%20damping.y%20*%20timestep%0A%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D)()%3B%0A%20%20(function%20()%20%7B%0A%20%20%20%20var%20b2Color%20%3D%20Box2D.Common.b2Color%2C%0A%20%20%20%20%20%20b2internal%20%3D%20Box2D.Common.b2internal%2C%0A%20%20%20%20%20%20b2Settings%20%3D%20Box2D.Common.b2Settings%2C%0A%20%20%20%20%20%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%2C%0A%20%20%20%20%20%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%2C%0A%20%20%20%20%20%20b2Math%20%3D%20Box2D.Common.Math.b2Math%2C%0A%20%20%20%20%20%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%2C%0A%20%20%20%20%20%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%2C%0A%20%20%20%20%20%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%2C%0A%20%20%20%20%20%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%2C%0A%20%20%20%20%20%20b2DistanceJoint%20%3D%20Box2D.Dynamics.Joints.b2DistanceJoint%2C%0A%20%20%20%20%20%20b2DistanceJointDef%20%3D%20Box2D.Dynamics.Joints.b2DistanceJointDef%2C%0A%20%20%20%20%20%20b2FrictionJoint%20%3D%20Box2D.Dynamics.Joints.b2FrictionJoint%2C%0A%20%20%20%20%20%20b2FrictionJointDef%20%3D%20Box2D.Dynamics.Joints.b2FrictionJointDef%2C%0A%20%20%20%20%20%20b2GearJoint%20%3D%20Box2D.Dynamics.Joints.b2GearJoint%2C%0A%20%20%20%20%20%20b2GearJointDef%20%3D%20Box2D.Dynamics.Joints.b2GearJointDef%2C%0A%20%20%20%20%20%20b2Jacobian%20%3D%20Box2D.Dynamics.Joints.b2Jacobian%2C%0A%20%20%20%20%20%20b2Joint%20%3D%20Box2D.Dynamics.Joints.b2Joint%2C%0A%20%20%20%20%20%20b2JointDef%20%3D%20Box2D.Dynamics.Joints.b2JointDef%2C%0A%20%20%20%20%20%20b2JointEdge%20%3D%20Box2D.Dynamics.Joints.b2JointEdge%2C%0A%20%20%20%20%20%20b2LineJoint%20%3D%20Box2D.Dynamics.Joints.b2LineJoint%2C%0A%20%20%20%20%20%20b2LineJointDef%20%3D%20Box2D.Dynamics.Joints.b2LineJointDef%2C%0A%20%20%20%20%20%20b2MouseJoint%20%3D%20Box2D.Dynamics.Joints.b2MouseJoint%2C%0A%20%20%20%20%20%20b2MouseJointDef%20%3D%20Box2D.Dynamics.Joints.b2MouseJointDef%2C%0A%20%20%20%20%20%20b2PrismaticJoint%20%3D%20Box2D.Dynamics.Joints.b2PrismaticJoint%2C%0A%20%20%20%20%20%20b2PrismaticJointDef%20%3D%20Box2D.Dynamics.Joints.b2PrismaticJointDef%2C%0A%20%20%20%20%20%20b2PulleyJoint%20%3D%20Box2D.Dynamics.Joints.b2PulleyJoint%2C%0A%20%20%20%20%20%20b2PulleyJointDef%20%3D%20Box2D.Dynamics.Joints.b2PulleyJointDef%2C%0A%20%20%20%20%20%20b2RevoluteJoint%20%3D%20Box2D.Dynamics.Joints.b2RevoluteJoint%2C%0A%20%20%20%20%20%20b2RevoluteJointDef%20%3D%20Box2D.Dynamics.Joints.b2RevoluteJointDef%2C%0A%20%20%20%20%20%20b2WeldJoint%20%3D%20Box2D.Dynamics.Joints.b2WeldJoint%2C%0A%20%20%20%20%20%20b2WeldJointDef%20%3D%20Box2D.Dynamics.Joints.b2WeldJointDef%2C%0A%20%20%20%20%20%20b2Body%20%3D%20Box2D.Dynamics.b2Body%2C%0A%20%20%20%20%20%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%2C%0A%20%20%20%20%20%20b2ContactFilter%20%3D%20Box2D.Dynamics.b2ContactFilter%2C%0A%20%20%20%20%20%20b2ContactImpulse%20%3D%20Box2D.Dynamics.b2ContactImpulse%2C%0A%20%20%20%20%20%20b2ContactListener%20%3D%20Box2D.Dynamics.b2ContactListener%2C%0A%20%20%20%20%20%20b2ContactManager%20%3D%20Box2D.Dynamics.b2ContactManager%2C%0A%20%20%20%20%20%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%2C%0A%20%20%20%20%20%20b2DestructionListener%20%3D%20Box2D.Dynamics.b2DestructionListener%2C%0A%20%20%20%20%20%20b2FilterData%20%3D%20Box2D.Dynamics.b2FilterData%2C%0A%20%20%20%20%20%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%2C%0A%20%20%20%20%20%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%2C%0A%20%20%20%20%20%20b2Island%20%3D%20Box2D.Dynamics.b2Island%2C%0A%20%20%20%20%20%20b2TimeStep%20%3D%20Box2D.Dynamics.b2TimeStep%2C%0A%20%20%20%20%20%20b2World%20%3D%20Box2D.Dynamics.b2World%3B%0A%0A%20%20%20%20Box2D.inherit(b2DistanceJoint%2C%20Box2D.Dynamics.Joints.b2Joint)%3B%0A%20%20%20%20b2DistanceJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2DistanceJoint.b2DistanceJoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_u%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.GetAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.GetAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.GetReactionForce%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20inv_dt%20*%20this.m_impulse%20*%20this.m_u.x%2C%0A%20%20%20%20%20%20%20%20inv_dt%20*%20this.m_impulse%20*%20this.m_u.y%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.GetReactionTorque%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.GetLength%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_length%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.SetLength%20%3D%20function%20(length)%20%7B%0A%20%20%20%20%20%20if%20(length%20%3D%3D%3D%20undefined)%20length%20%3D%200%3B%0A%20%20%20%20%20%20this.m_length%20%3D%20length%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.GetFrequency%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_frequencyHz%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.SetFrequency%20%3D%20function%20(hz)%20%7B%0A%20%20%20%20%20%20if%20(hz%20%3D%3D%3D%20undefined)%20hz%20%3D%200%3B%0A%20%20%20%20%20%20this.m_frequencyHz%20%3D%20hz%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.GetDampingRatio%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_dampingRatio%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.SetDampingRatio%20%3D%20function%20(ratio)%20%7B%0A%20%20%20%20%20%20if%20(ratio%20%3D%3D%3D%20undefined)%20ratio%20%3D%200%3B%0A%20%20%20%20%20%20this.m_dampingRatio%20%3D%20ratio%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.b2DistanceJoint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20tY%20%3D%200%3B%0A%20%20%20%20%20%20this.m_localAnchor1.SetV(def.localAnchorA)%3B%0A%20%20%20%20%20%20this.m_localAnchor2.SetV(def.localAnchorB)%3B%0A%20%20%20%20%20%20this.m_length%20%3D%20def.length%3B%0A%20%20%20%20%20%20this.m_frequencyHz%20%3D%20def.frequencyHz%3B%0A%20%20%20%20%20%20this.m_dampingRatio%20%3D%20def.dampingRatio%3B%0A%20%20%20%20%20%20this.m_impulse%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_gamma%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_bias%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20this.m_u.x%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%20%20%20%20%20%20this.m_u.y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%20%20%20%20%20%20var%20length%20%3D%20Math.sqrt(this.m_u.x%20*%20this.m_u.x%20%2B%20this.m_u.y%20*%20this.m_u.y)%3B%0A%20%20%20%20%20%20if%20(length%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20this.m_u.Multiply(1.0%20%2F%20length)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_u.SetZero()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20cr1u%20%3D%20r1X%20*%20this.m_u.y%20-%20r1Y%20*%20this.m_u.x%3B%0A%20%20%20%20%20%20var%20cr2u%20%3D%20r2X%20*%20this.m_u.y%20-%20r2Y%20*%20this.m_u.x%3B%0A%20%20%20%20%20%20var%20invMass%20%3D%0A%20%20%20%20%20%20%20%20bA.m_invMass%20%2B%0A%20%20%20%20%20%20%20%20bA.m_invI%20*%20cr1u%20*%20cr1u%20%2B%0A%20%20%20%20%20%20%20%20bB.m_invMass%20%2B%0A%20%20%20%20%20%20%20%20bB.m_invI%20*%20cr2u%20*%20cr2u%3B%0A%20%20%20%20%20%20this.m_mass%20%3D%20invMass%20!%3D%200.0%20%3F%201.0%20%2F%20invMass%20%3A%200.0%3B%0A%20%20%20%20%20%20if%20(this.m_frequencyHz%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20var%20C%20%3D%20length%20-%20this.m_length%3B%0A%20%20%20%20%20%20%20%20var%20omega%20%3D%202.0%20*%20Math.PI%20*%20this.m_frequencyHz%3B%0A%20%20%20%20%20%20%20%20var%20d%20%3D%202.0%20*%20this.m_mass%20*%20this.m_dampingRatio%20*%20omega%3B%0A%20%20%20%20%20%20%20%20var%20k%20%3D%20this.m_mass%20*%20omega%20*%20omega%3B%0A%20%20%20%20%20%20%20%20this.m_gamma%20%3D%20step.dt%20*%20(d%20%2B%20step.dt%20*%20k)%3B%0A%20%20%20%20%20%20%20%20this.m_gamma%20%3D%20this.m_gamma%20!%3D%200.0%20%3F%201%20%2F%20this.m_gamma%20%3A%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_bias%20%3D%20C%20*%20step.dt%20*%20k%20*%20this.m_gamma%3B%0A%20%20%20%20%20%20%20%20this.m_mass%20%3D%20invMass%20%2B%20this.m_gamma%3B%0A%20%20%20%20%20%20%20%20this.m_mass%20%3D%20this.m_mass%20!%3D%200.0%20%3F%201.0%20%2F%20this.m_mass%20%3A%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20var%20PX%20%3D%20this.m_impulse%20*%20this.m_u.x%3B%0A%20%20%20%20%20%20%20%20var%20PY%20%3D%20this.m_impulse%20*%20this.m_u.y%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20-%3D%20bA.m_invMass%20*%20PX%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20-%3D%20bA.m_invMass%20*%20PY%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20-%3D%20bA.m_invI%20*%20(r1X%20*%20PY%20-%20r1Y%20*%20PX)%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20PX%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20PY%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20PY%20-%20r2Y%20*%20PX)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.SolveVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20v1X%20%3D%20bA.m_linearVelocity.x%20%2B%20-bA.m_angularVelocity%20*%20r1Y%3B%0A%20%20%20%20%20%20var%20v1Y%20%3D%20bA.m_linearVelocity.y%20%2B%20bA.m_angularVelocity%20*%20r1X%3B%0A%20%20%20%20%20%20var%20v2X%20%3D%20bB.m_linearVelocity.x%20%2B%20-bB.m_angularVelocity%20*%20r2Y%3B%0A%20%20%20%20%20%20var%20v2Y%20%3D%20bB.m_linearVelocity.y%20%2B%20bB.m_angularVelocity%20*%20r2X%3B%0A%20%20%20%20%20%20var%20Cdot%20%3D%20this.m_u.x%20*%20(v2X%20-%20v1X)%20%2B%20this.m_u.y%20*%20(v2Y%20-%20v1Y)%3B%0A%20%20%20%20%20%20var%20impulse%20%3D%0A%20%20%20%20%20%20%20%20-this.m_mass%20*%20(Cdot%20%2B%20this.m_bias%20%2B%20this.m_gamma%20*%20this.m_impulse)%3B%0A%20%20%20%20%20%20this.m_impulse%20%2B%3D%20impulse%3B%0A%20%20%20%20%20%20var%20PX%20%3D%20impulse%20*%20this.m_u.x%3B%0A%20%20%20%20%20%20var%20PY%20%3D%20impulse%20*%20this.m_u.y%3B%0A%20%20%20%20%20%20bA.m_linearVelocity.x%20-%3D%20bA.m_invMass%20*%20PX%3B%0A%20%20%20%20%20%20bA.m_linearVelocity.y%20-%3D%20bA.m_invMass%20*%20PY%3B%0A%20%20%20%20%20%20bA.m_angularVelocity%20-%3D%20bA.m_invI%20*%20(r1X%20*%20PY%20-%20r1Y%20*%20PX)%3B%0A%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20PX%3B%0A%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20PY%3B%0A%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20PY%20-%20r2Y%20*%20PX)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJoint.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20if%20(this.m_frequencyHz%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%20%20%20%20%20%20var%20length%20%3D%20Math.sqrt(dX%20*%20dX%20%2B%20dY%20*%20dY)%3B%0A%20%20%20%20%20%20dX%20%2F%3D%20length%3B%0A%20%20%20%20%20%20dY%20%2F%3D%20length%3B%0A%20%20%20%20%20%20var%20C%20%3D%20length%20-%20this.m_length%3B%0A%20%20%20%20%20%20C%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20C%2C%0A%20%20%20%20%20%20%20%20-b2Settings.b2_maxLinearCorrection%2C%0A%20%20%20%20%20%20%20%20b2Settings.b2_maxLinearCorrection%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20impulse%20%3D%20-this.m_mass%20*%20C%3B%0A%20%20%20%20%20%20this.m_u.Set(dX%2C%20dY)%3B%0A%20%20%20%20%20%20var%20PX%20%3D%20impulse%20*%20this.m_u.x%3B%0A%20%20%20%20%20%20var%20PY%20%3D%20impulse%20*%20this.m_u.y%3B%0A%20%20%20%20%20%20bA.m_sweep.c.x%20-%3D%20bA.m_invMass%20*%20PX%3B%0A%20%20%20%20%20%20bA.m_sweep.c.y%20-%3D%20bA.m_invMass%20*%20PY%3B%0A%20%20%20%20%20%20bA.m_sweep.a%20-%3D%20bA.m_invI%20*%20(r1X%20*%20PY%20-%20r1Y%20*%20PX)%3B%0A%20%20%20%20%20%20bB.m_sweep.c.x%20%2B%3D%20bB.m_invMass%20*%20PX%3B%0A%20%20%20%20%20%20bB.m_sweep.c.y%20%2B%3D%20bB.m_invMass%20*%20PY%3B%0A%20%20%20%20%20%20bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20PY%20-%20r2Y%20*%20PX)%3B%0A%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20return%20b2Math.Abs(C)%20%3C%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2DistanceJointDef%2C%20Box2D.Dynamics.Joints.b2JointDef)%3B%0A%20%20%20%20b2DistanceJointDef.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2DistanceJointDef.b2DistanceJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJointDef.prototype.b2DistanceJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_distanceJoint%3B%0A%20%20%20%20%20%20this.length%20%3D%201.0%3B%0A%20%20%20%20%20%20this.frequencyHz%20%3D%200.0%3B%0A%20%20%20%20%20%20this.dampingRatio%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DistanceJointDef.prototype.Initialize%20%3D%20function%20(%0A%20%20%20%20%20%20bA%2C%0A%20%20%20%20%20%20bB%2C%0A%20%20%20%20%20%20anchorA%2C%0A%20%20%20%20%20%20anchorB%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20this.bodyA%20%3D%20bA%3B%0A%20%20%20%20%20%20this.bodyB%20%3D%20bB%3B%0A%20%20%20%20%20%20this.localAnchorA.SetV(this.bodyA.GetLocalPoint(anchorA))%3B%0A%20%20%20%20%20%20this.localAnchorB.SetV(this.bodyB.GetLocalPoint(anchorB))%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20anchorB.x%20-%20anchorA.x%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20anchorB.y%20-%20anchorA.y%3B%0A%20%20%20%20%20%20this.length%20%3D%20Math.sqrt(dX%20*%20dX%20%2B%20dY%20*%20dY)%3B%0A%20%20%20%20%20%20this.frequencyHz%20%3D%200.0%3B%0A%20%20%20%20%20%20this.dampingRatio%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2FrictionJoint%2C%20Box2D.Dynamics.Joints.b2Joint)%3B%0A%20%20%20%20b2FrictionJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2FrictionJoint.b2FrictionJoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.m_localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_linearMass%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.m_linearImpulse%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.GetAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchorA)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.GetAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchorB)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.GetReactionForce%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20inv_dt%20*%20this.m_linearImpulse.x%2C%0A%20%20%20%20%20%20%20%20inv_dt%20*%20this.m_linearImpulse.y%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.GetReactionTorque%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20inv_dt%20*%20this.m_angularImpulse%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.SetMaxForce%20%3D%20function%20(force)%20%7B%0A%20%20%20%20%20%20if%20(force%20%3D%3D%3D%20undefined)%20force%20%3D%200%3B%0A%20%20%20%20%20%20this.m_maxForce%20%3D%20force%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.GetMaxForce%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_maxForce%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.SetMaxTorque%20%3D%20function%20(torque)%20%7B%0A%20%20%20%20%20%20if%20(torque%20%3D%3D%3D%20undefined)%20torque%20%3D%200%3B%0A%20%20%20%20%20%20this.m_maxTorque%20%3D%20torque%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.GetMaxTorque%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_maxTorque%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.b2FrictionJoint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20this.m_localAnchorA.SetV(def.localAnchorA)%3B%0A%20%20%20%20%20%20this.m_localAnchorB.SetV(def.localAnchorB)%3B%0A%20%20%20%20%20%20this.m_linearMass.SetZero()%3B%0A%20%20%20%20%20%20this.m_angularMass%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_linearImpulse.SetZero()%3B%0A%20%20%20%20%20%20this.m_angularImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_maxForce%20%3D%20def.maxForce%3B%0A%20%20%20%20%20%20this.m_maxTorque%20%3D%20def.maxTorque%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20rAX%20%3D%20this.m_localAnchorA.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rAY%20%3D%20this.m_localAnchorA.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rAX%20%2B%20tMat.col2.x%20*%20rAY%3B%0A%20%20%20%20%20%20rAY%20%3D%20tMat.col1.y%20*%20rAX%20%2B%20tMat.col2.y%20*%20rAY%3B%0A%20%20%20%20%20%20rAX%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20rBX%20%3D%20this.m_localAnchorB.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rBY%20%3D%20this.m_localAnchorB.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rBX%20%2B%20tMat.col2.x%20*%20rBY%3B%0A%20%20%20%20%20%20rBY%20%3D%20tMat.col1.y%20*%20rBX%20%2B%20tMat.col2.y%20*%20rBY%3B%0A%20%20%20%20%20%20rBX%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20mA%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20var%20mB%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20var%20iA%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20var%20iB%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20var%20K%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20K.col1.x%20%3D%20mA%20%2B%20mB%3B%0A%20%20%20%20%20%20K.col2.x%20%3D%200.0%3B%0A%20%20%20%20%20%20K.col1.y%20%3D%200.0%3B%0A%20%20%20%20%20%20K.col2.y%20%3D%20mA%20%2B%20mB%3B%0A%20%20%20%20%20%20K.col1.x%20%2B%3D%20iA%20*%20rAY%20*%20rAY%3B%0A%20%20%20%20%20%20K.col2.x%20%2B%3D%20-iA%20*%20rAX%20*%20rAY%3B%0A%20%20%20%20%20%20K.col1.y%20%2B%3D%20-iA%20*%20rAX%20*%20rAY%3B%0A%20%20%20%20%20%20K.col2.y%20%2B%3D%20iA%20*%20rAX%20*%20rAX%3B%0A%20%20%20%20%20%20K.col1.x%20%2B%3D%20iB%20*%20rBY%20*%20rBY%3B%0A%20%20%20%20%20%20K.col2.x%20%2B%3D%20-iB%20*%20rBX%20*%20rBY%3B%0A%20%20%20%20%20%20K.col1.y%20%2B%3D%20-iB%20*%20rBX%20*%20rBY%3B%0A%20%20%20%20%20%20K.col2.y%20%2B%3D%20iB%20*%20rBX%20*%20rBX%3B%0A%20%20%20%20%20%20K.GetInverse(this.m_linearMass)%3B%0A%20%20%20%20%20%20this.m_angularMass%20%3D%20iA%20%2B%20iB%3B%0A%20%20%20%20%20%20if%20(this.m_angularMass%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.m_angularMass%20%3D%201.0%20%2F%20this.m_angularMass%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20this.m_linearImpulse.x%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_linearImpulse.y%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_angularImpulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20var%20P%20%3D%20this.m_linearImpulse%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20-%3D%20mA%20*%20P.x%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20-%3D%20mA%20*%20P.y%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20-%3D%0A%20%20%20%20%20%20%20%20%20%20iA%20*%20(rAX%20*%20P.y%20-%20rAY%20*%20P.x%20%2B%20this.m_angularImpulse)%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20mB%20*%20P.x%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20mB%20*%20P.y%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20iB%20*%20(rBX%20*%20P.y%20-%20rBY%20*%20P.x%20%2B%20this.m_angularImpulse)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_linearImpulse.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_angularImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.SolveVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20vA%20%3D%20bA.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20wA%20%3D%20bA.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20vB%20%3D%20bB.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20wB%20%3D%20bB.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20mA%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20var%20mB%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20var%20iA%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20var%20iB%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20rAX%20%3D%20this.m_localAnchorA.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rAY%20%3D%20this.m_localAnchorA.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rAX%20%2B%20tMat.col2.x%20*%20rAY%3B%0A%20%20%20%20%20%20rAY%20%3D%20tMat.col1.y%20*%20rAX%20%2B%20tMat.col2.y%20*%20rAY%3B%0A%20%20%20%20%20%20rAX%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20rBX%20%3D%20this.m_localAnchorB.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rBY%20%3D%20this.m_localAnchorB.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rBX%20%2B%20tMat.col2.x%20*%20rBY%3B%0A%20%20%20%20%20%20rBY%20%3D%20tMat.col1.y%20*%20rBX%20%2B%20tMat.col2.y%20*%20rBY%3B%0A%20%20%20%20%20%20rBX%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20maxImpulse%20%3D%200%3B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20Cdot%20%3D%20wB%20-%20wA%3B%0A%20%20%20%20%20%20%20%20var%20impulse%20%3D%20-this.m_angularMass%20*%20Cdot%3B%0A%20%20%20%20%20%20%20%20var%20oldImpulse%20%3D%20this.m_angularImpulse%3B%0A%20%20%20%20%20%20%20%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxTorque%3B%0A%20%20%20%20%20%20%20%20this.m_angularImpulse%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20this.m_angularImpulse%20%2B%20impulse%2C%0A%20%20%20%20%20%20%20%20%20%20-maxImpulse%2C%0A%20%20%20%20%20%20%20%20%20%20maxImpulse%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_angularImpulse%20-%20oldImpulse%3B%0A%20%20%20%20%20%20%20%20wA%20-%3D%20iA%20*%20impulse%3B%0A%20%20%20%20%20%20%20%20wB%20%2B%3D%20iB%20*%20impulse%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20var%20CdotX%20%3D%20vB.x%20-%20wB%20*%20rBY%20-%20vA.x%20%2B%20wA%20*%20rAY%3B%0A%20%20%20%20%20%20%20%20var%20CdotY%20%3D%20vB.y%20%2B%20wB%20*%20rBX%20-%20vA.y%20-%20wA%20*%20rAX%3B%0A%20%20%20%20%20%20%20%20var%20impulseV%20%3D%20b2Math.MulMV(%0A%20%20%20%20%20%20%20%20%20%20this.m_linearMass%2C%0A%20%20%20%20%20%20%20%20%20%20new%20b2Vec2(-CdotX%2C%20-CdotY)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20var%20oldImpulseV%20%3D%20this.m_linearImpulse.Copy()%3B%0A%20%20%20%20%20%20%20%20this.m_linearImpulse.Add(impulseV)%3B%0A%20%20%20%20%20%20%20%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxForce%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_linearImpulse.LengthSquared()%20%3E%20maxImpulse%20*%20maxImpulse)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_linearImpulse.Normalize()%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_linearImpulse.Multiply(maxImpulse)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20impulseV%20%3D%20b2Math.SubtractVV(this.m_linearImpulse%2C%20oldImpulseV)%3B%0A%20%20%20%20%20%20%20%20vA.x%20-%3D%20mA%20*%20impulseV.x%3B%0A%20%20%20%20%20%20%20%20vA.y%20-%3D%20mA%20*%20impulseV.y%3B%0A%20%20%20%20%20%20%20%20wA%20-%3D%20iA%20*%20(rAX%20*%20impulseV.y%20-%20rAY%20*%20impulseV.x)%3B%0A%20%20%20%20%20%20%20%20vB.x%20%2B%3D%20mB%20*%20impulseV.x%3B%0A%20%20%20%20%20%20%20%20vB.y%20%2B%3D%20mB%20*%20impulseV.y%3B%0A%20%20%20%20%20%20%20%20wB%20%2B%3D%20iB%20*%20(rBX%20*%20impulseV.y%20-%20rBY%20*%20impulseV.x)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20bA.m_angularVelocity%20%3D%20wA%3B%0A%20%20%20%20%20%20bB.m_angularVelocity%20%3D%20wB%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJoint.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2FrictionJointDef%2C%20Box2D.Dynamics.Joints.b2JointDef)%3B%0A%20%20%20%20b2FrictionJointDef.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2FrictionJointDef.b2FrictionJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJointDef.prototype.b2FrictionJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_frictionJoint%3B%0A%20%20%20%20%20%20this.maxForce%20%3D%200.0%3B%0A%20%20%20%20%20%20this.maxTorque%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2FrictionJointDef.prototype.Initialize%20%3D%20function%20(bA%2C%20bB%2C%20anchor)%20%7B%0A%20%20%20%20%20%20this.bodyA%20%3D%20bA%3B%0A%20%20%20%20%20%20this.bodyB%20%3D%20bB%3B%0A%20%20%20%20%20%20this.localAnchorA.SetV(this.bodyA.GetLocalPoint(anchor))%3B%0A%20%20%20%20%20%20this.localAnchorB.SetV(this.bodyB.GetLocalPoint(anchor))%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2GearJoint%2C%20Box2D.Dynamics.Joints.b2Joint)%3B%0A%20%20%20%20b2GearJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2GearJoint.b2GearJoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.m_groundAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_groundAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_J%20%3D%20new%20b2Jacobian()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJoint.prototype.GetAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJoint.prototype.GetAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJoint.prototype.GetReactionForce%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20inv_dt%20*%20this.m_impulse%20*%20this.m_J.linearB.x%2C%0A%20%20%20%20%20%20%20%20inv_dt%20*%20this.m_impulse%20*%20this.m_J.linearB.y%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJoint.prototype.GetReactionTorque%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%20%3D%20this.m_bodyB.m_xf.R%3B%0A%20%20%20%20%20%20var%20rX%20%3D%20this.m_localAnchor1.x%20-%20this.m_bodyB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rY%20%3D%20this.m_localAnchor1.y%20-%20this.m_bodyB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20tMat.col1.x%20*%20rX%20%2B%20tMat.col2.x%20*%20rY%3B%0A%20%20%20%20%20%20rY%20%3D%20tMat.col1.y%20*%20rX%20%2B%20tMat.col2.y%20*%20rY%3B%0A%20%20%20%20%20%20rX%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20PX%20%3D%20this.m_impulse%20*%20this.m_J.linearB.x%3B%0A%20%20%20%20%20%20var%20PY%20%3D%20this.m_impulse%20*%20this.m_J.linearB.y%3B%0A%20%20%20%20%20%20return%20inv_dt%20*%20(this.m_impulse%20*%20this.m_J.angularB%20-%20rX%20*%20PY%20%2B%20rY%20*%20PX)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJoint.prototype.GetRatio%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_ratio%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJoint.prototype.SetRatio%20%3D%20function%20(ratio)%20%7B%0A%20%20%20%20%20%20if%20(ratio%20%3D%3D%3D%20undefined)%20ratio%20%3D%200%3B%0A%20%20%20%20%20%20this.m_ratio%20%3D%20ratio%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJoint.prototype.b2GearJoint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20var%20type1%20%3D%20parseInt(def.joint1.m_type)%3B%0A%20%20%20%20%20%20var%20type2%20%3D%20parseInt(def.joint2.m_type)%3B%0A%20%20%20%20%20%20this.m_revolute1%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_prismatic1%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_revolute2%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_prismatic2%20%3D%20null%3B%0A%20%20%20%20%20%20var%20coordinate1%20%3D%200%3B%0A%20%20%20%20%20%20var%20coordinate2%20%3D%200%3B%0A%20%20%20%20%20%20this.m_ground1%20%3D%20def.joint1.GetBodyA()%3B%0A%20%20%20%20%20%20this.m_bodyA%20%3D%20def.joint1.GetBodyB()%3B%0A%20%20%20%20%20%20if%20(type1%20%3D%3D%20b2Joint.e_revoluteJoint)%20%7B%0A%20%20%20%20%20%20%20%20this.m_revolute1%20%3D%0A%20%20%20%20%20%20%20%20%20%20def.joint1%20instanceof%20b2RevoluteJoint%20%3F%20def.joint1%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2)%3B%0A%20%20%20%20%20%20%20%20coordinate1%20%3D%20this.m_revolute1.GetJointAngle()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_prismatic1%20%3D%0A%20%20%20%20%20%20%20%20%20%20def.joint1%20instanceof%20b2PrismaticJoint%20%3F%20def.joint1%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2)%3B%0A%20%20%20%20%20%20%20%20coordinate1%20%3D%20this.m_prismatic1.GetJointTranslation()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_ground2%20%3D%20def.joint2.GetBodyA()%3B%0A%20%20%20%20%20%20this.m_bodyB%20%3D%20def.joint2.GetBodyB()%3B%0A%20%20%20%20%20%20if%20(type2%20%3D%3D%20b2Joint.e_revoluteJoint)%20%7B%0A%20%20%20%20%20%20%20%20this.m_revolute2%20%3D%0A%20%20%20%20%20%20%20%20%20%20def.joint2%20instanceof%20b2RevoluteJoint%20%3F%20def.joint2%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2)%3B%0A%20%20%20%20%20%20%20%20coordinate2%20%3D%20this.m_revolute2.GetJointAngle()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_prismatic2%20%3D%0A%20%20%20%20%20%20%20%20%20%20def.joint2%20instanceof%20b2PrismaticJoint%20%3F%20def.joint2%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1)%3B%0A%20%20%20%20%20%20%20%20this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2)%3B%0A%20%20%20%20%20%20%20%20coordinate2%20%3D%20this.m_prismatic2.GetJointTranslation()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_ratio%20%3D%20def.ratio%3B%0A%20%20%20%20%20%20this.m_constant%20%3D%20coordinate1%20%2B%20this.m_ratio%20*%20coordinate2%3B%0A%20%20%20%20%20%20this.m_impulse%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJoint.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20g1%20%3D%20this.m_ground1%3B%0A%20%20%20%20%20%20var%20g2%20%3D%20this.m_ground2%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20ugX%20%3D%200%3B%0A%20%20%20%20%20%20var%20ugY%20%3D%200%3B%0A%20%20%20%20%20%20var%20rX%20%3D%200%3B%0A%20%20%20%20%20%20var%20rY%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tVec%3B%0A%20%20%20%20%20%20var%20crug%20%3D%200%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20K%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_J.SetZero()%3B%0A%20%20%20%20%20%20if%20(this.m_revolute1)%20%7B%0A%20%20%20%20%20%20%20%20this.m_J.angularA%20%3D%20-1.0%3B%0A%20%20%20%20%20%20%20%20K%20%2B%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20g1.m_xf.R%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_prismatic1.m_localXAxis1%3B%0A%20%20%20%20%20%20%20%20ugX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20ugY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20rX%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20rY%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rX%20%2B%20tMat.col2.x%20*%20rY%3B%0A%20%20%20%20%20%20%20%20rY%20%3D%20tMat.col1.y%20*%20rX%20%2B%20tMat.col2.y%20*%20rY%3B%0A%20%20%20%20%20%20%20%20rX%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20crug%20%3D%20rX%20*%20ugY%20-%20rY%20*%20ugX%3B%0A%20%20%20%20%20%20%20%20this.m_J.linearA.Set(-ugX%2C%20-ugY)%3B%0A%20%20%20%20%20%20%20%20this.m_J.angularA%20%3D%20-crug%3B%0A%20%20%20%20%20%20%20%20K%20%2B%3D%20bA.m_invMass%20%2B%20bA.m_invI%20*%20crug%20*%20crug%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_revolute2)%20%7B%0A%20%20%20%20%20%20%20%20this.m_J.angularB%20%3D%20-this.m_ratio%3B%0A%20%20%20%20%20%20%20%20K%20%2B%3D%20this.m_ratio%20*%20this.m_ratio%20*%20bB.m_invI%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20g2.m_xf.R%3B%0A%20%20%20%20%20%20%20%20tVec%20%3D%20this.m_prismatic2.m_localXAxis1%3B%0A%20%20%20%20%20%20%20%20ugX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20ugY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20rX%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20rY%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rX%20%2B%20tMat.col2.x%20*%20rY%3B%0A%20%20%20%20%20%20%20%20rY%20%3D%20tMat.col1.y%20*%20rX%20%2B%20tMat.col2.y%20*%20rY%3B%0A%20%20%20%20%20%20%20%20rX%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20crug%20%3D%20rX%20*%20ugY%20-%20rY%20*%20ugX%3B%0A%20%20%20%20%20%20%20%20this.m_J.linearB.Set(-this.m_ratio%20*%20ugX%2C%20-this.m_ratio%20*%20ugY)%3B%0A%20%20%20%20%20%20%20%20this.m_J.angularB%20%3D%20-this.m_ratio%20*%20crug%3B%0A%20%20%20%20%20%20%20%20K%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_ratio%20*%0A%20%20%20%20%20%20%20%20%20%20this.m_ratio%20*%0A%20%20%20%20%20%20%20%20%20%20(bB.m_invMass%20%2B%20bB.m_invI%20*%20crug%20*%20crug)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_mass%20%3D%20K%20%3E%200.0%20%3F%201.0%20%2F%20K%20%3A%200.0%3B%0A%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20bA.m_invMass%20*%20this.m_impulse%20*%20this.m_J.linearA.x%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20bA.m_invMass%20*%20this.m_impulse%20*%20this.m_J.linearA.y%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20%2B%3D%20bA.m_invI%20*%20this.m_impulse%20*%20this.m_J.angularA%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20bB.m_invMass%20*%20this.m_impulse%20*%20this.m_J.linearB.x%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20bB.m_invMass%20*%20this.m_impulse%20*%20this.m_J.linearB.y%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20this.m_impulse%20*%20this.m_J.angularB%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJoint.prototype.SolveVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20Cdot%20%3D%20this.m_J.Compute(%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity%2C%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%2C%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity%2C%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20var%20impulse%20%3D%20-this.m_mass%20*%20Cdot%3B%0A%20%20%20%20%20%20this.m_impulse%20%2B%3D%20impulse%3B%0A%20%20%20%20%20%20bA.m_linearVelocity.x%20%2B%3D%20bA.m_invMass%20*%20impulse%20*%20this.m_J.linearA.x%3B%0A%20%20%20%20%20%20bA.m_linearVelocity.y%20%2B%3D%20bA.m_invMass%20*%20impulse%20*%20this.m_J.linearA.y%3B%0A%20%20%20%20%20%20bA.m_angularVelocity%20%2B%3D%20bA.m_invI%20*%20impulse%20*%20this.m_J.angularA%3B%0A%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20impulse%20*%20this.m_J.linearB.x%3B%0A%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20impulse%20*%20this.m_J.linearB.y%3B%0A%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20impulse%20*%20this.m_J.angularB%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJoint.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20var%20linearError%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20coordinate1%20%3D%200%3B%0A%20%20%20%20%20%20var%20coordinate2%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_revolute1)%20%7B%0A%20%20%20%20%20%20%20%20coordinate1%20%3D%20this.m_revolute1.GetJointAngle()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20coordinate1%20%3D%20this.m_prismatic1.GetJointTranslation()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_revolute2)%20%7B%0A%20%20%20%20%20%20%20%20coordinate2%20%3D%20this.m_revolute2.GetJointAngle()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20coordinate2%20%3D%20this.m_prismatic2.GetJointTranslation()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20C%20%3D%20this.m_constant%20-%20(coordinate1%20%2B%20this.m_ratio%20*%20coordinate2)%3B%0A%20%20%20%20%20%20var%20impulse%20%3D%20-this.m_mass%20*%20C%3B%0A%20%20%20%20%20%20bA.m_sweep.c.x%20%2B%3D%20bA.m_invMass%20*%20impulse%20*%20this.m_J.linearA.x%3B%0A%20%20%20%20%20%20bA.m_sweep.c.y%20%2B%3D%20bA.m_invMass%20*%20impulse%20*%20this.m_J.linearA.y%3B%0A%20%20%20%20%20%20bA.m_sweep.a%20%2B%3D%20bA.m_invI%20*%20impulse%20*%20this.m_J.angularA%3B%0A%20%20%20%20%20%20bB.m_sweep.c.x%20%2B%3D%20bB.m_invMass%20*%20impulse%20*%20this.m_J.linearB.x%3B%0A%20%20%20%20%20%20bB.m_sweep.c.y%20%2B%3D%20bB.m_invMass%20*%20impulse%20*%20this.m_J.linearB.y%3B%0A%20%20%20%20%20%20bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20impulse%20*%20this.m_J.angularB%3B%0A%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20return%20linearError%20%3C%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2GearJointDef%2C%20Box2D.Dynamics.Joints.b2JointDef)%3B%0A%20%20%20%20b2GearJointDef.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2GearJointDef.b2GearJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2GearJointDef.prototype.b2GearJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_gearJoint%3B%0A%20%20%20%20%20%20this.joint1%20%3D%20null%3B%0A%20%20%20%20%20%20this.joint2%20%3D%20null%3B%0A%20%20%20%20%20%20this.ratio%20%3D%201.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Jacobian.b2Jacobian%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.linearA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.linearB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Jacobian.prototype.SetZero%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.linearA.SetZero()%3B%0A%20%20%20%20%20%20this.angularA%20%3D%200.0%3B%0A%20%20%20%20%20%20this.linearB.SetZero()%3B%0A%20%20%20%20%20%20this.angularB%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Jacobian.prototype.Set%20%3D%20function%20(x1%2C%20a1%2C%20x2%2C%20a2)%20%7B%0A%20%20%20%20%20%20if%20(a1%20%3D%3D%3D%20undefined)%20a1%20%3D%200%3B%0A%20%20%20%20%20%20if%20(a2%20%3D%3D%3D%20undefined)%20a2%20%3D%200%3B%0A%20%20%20%20%20%20this.linearA.SetV(x1)%3B%0A%20%20%20%20%20%20this.angularA%20%3D%20a1%3B%0A%20%20%20%20%20%20this.linearB.SetV(x2)%3B%0A%20%20%20%20%20%20this.angularB%20%3D%20a2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Jacobian.prototype.Compute%20%3D%20function%20(x1%2C%20a1%2C%20x2%2C%20a2)%20%7B%0A%20%20%20%20%20%20if%20(a1%20%3D%3D%3D%20undefined)%20a1%20%3D%200%3B%0A%20%20%20%20%20%20if%20(a2%20%3D%3D%3D%20undefined)%20a2%20%3D%200%3B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20this.linearA.x%20*%20x1.x%20%2B%0A%20%20%20%20%20%20%20%20this.linearA.y%20*%20x1.y%20%2B%0A%20%20%20%20%20%20%20%20this.angularA%20*%20a1%20%2B%0A%20%20%20%20%20%20%20%20(this.linearB.x%20*%20x2.x%20%2B%20this.linearB.y%20*%20x2.y)%20%2B%0A%20%20%20%20%20%20%20%20this.angularB%20*%20a2%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.b2Joint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_edgeA%20%3D%20new%20b2JointEdge()%3B%0A%20%20%20%20%20%20this.m_edgeB%20%3D%20new%20b2JointEdge()%3B%0A%20%20%20%20%20%20this.m_localCenterA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localCenterB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.GetType%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_type%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.GetAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.GetAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.GetReactionForce%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.GetReactionTorque%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.GetBodyA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyA%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.GetBodyB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.GetNext%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_next%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.GetUserData%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_userData%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.SetUserData%20%3D%20function%20(data)%20%7B%0A%20%20%20%20%20%20this.m_userData%20%3D%20data%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.IsActive%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyA.IsActive()%20%26%26%20this.m_bodyB.IsActive()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.Create%20%3D%20function%20(def%2C%20allocator)%20%7B%0A%20%20%20%20%20%20var%20joint%20%3D%20null%3B%0A%20%20%20%20%20%20switch%20(def.type)%20%7B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_distanceJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2DistanceJoint(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20def%20instanceof%20b2DistanceJointDef%20%3F%20def%20%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_mouseJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2MouseJoint(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20def%20instanceof%20b2MouseJointDef%20%3F%20def%20%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_prismaticJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2PrismaticJoint(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20def%20instanceof%20b2PrismaticJointDef%20%3F%20def%20%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_revoluteJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2RevoluteJoint(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20def%20instanceof%20b2RevoluteJointDef%20%3F%20def%20%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_pulleyJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2PulleyJoint(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20def%20instanceof%20b2PulleyJointDef%20%3F%20def%20%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_gearJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2GearJoint(def%20instanceof%20b2GearJointDef%20%3F%20def%20%3A%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_lineJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2LineJoint(def%20instanceof%20b2LineJointDef%20%3F%20def%20%3A%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_weldJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2WeldJoint(def%20instanceof%20b2WeldJointDef%20%3F%20def%20%3A%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20b2Joint.e_frictionJoint%3A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20joint%20%3D%20new%20b2FrictionJoint(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20def%20instanceof%20b2FrictionJointDef%20%3F%20def%20%3A%20null%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20joint%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.Destroy%20%3D%20function%20(joint%2C%20allocator)%20%7B%7D%3B%0A%20%20%20%20b2Joint.prototype.b2Joint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20b2Settings.b2Assert(def.bodyA%20!%3D%20def.bodyB)%3B%0A%20%20%20%20%20%20this.m_type%20%3D%20def.type%3B%0A%20%20%20%20%20%20this.m_prev%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_next%20%3D%20null%3B%0A%20%20%20%20%20%20this.m_bodyA%20%3D%20def.bodyA%3B%0A%20%20%20%20%20%20this.m_bodyB%20%3D%20def.bodyB%3B%0A%20%20%20%20%20%20this.m_collideConnected%20%3D%20def.collideConnected%3B%0A%20%20%20%20%20%20this.m_islandFlag%20%3D%20false%3B%0A%20%20%20%20%20%20this.m_userData%20%3D%20def.userData%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2Joint.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%7D%3B%0A%20%20%20%20b2Joint.prototype.SolveVelocityConstraints%20%3D%20function%20(step)%20%7B%7D%3B%0A%20%20%20%20b2Joint.prototype.FinalizeVelocityConstraints%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2Joint.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_unknownJoint%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_revoluteJoint%20%3D%201%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_prismaticJoint%20%3D%202%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_distanceJoint%20%3D%203%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_pulleyJoint%20%3D%204%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_mouseJoint%20%3D%205%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_gearJoint%20%3D%206%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_lineJoint%20%3D%207%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_weldJoint%20%3D%208%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_frictionJoint%20%3D%209%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_inactiveLimit%20%3D%200%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_atLowerLimit%20%3D%201%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_atUpperLimit%20%3D%202%3B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.e_equalLimits%20%3D%203%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20b2JointDef.b2JointDef%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20b2JointDef.prototype.b2JointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_unknownJoint%3B%0A%20%20%20%20%20%20this.userData%20%3D%20null%3B%0A%20%20%20%20%20%20this.bodyA%20%3D%20null%3B%0A%20%20%20%20%20%20this.bodyB%20%3D%20null%3B%0A%20%20%20%20%20%20this.collideConnected%20%3D%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2JointEdge.b2JointEdge%20%3D%20function%20()%20%7B%7D%3B%0A%20%20%20%20Box2D.inherit(b2LineJoint%2C%20Box2D.Dynamics.Joints.b2Joint)%3B%0A%20%20%20%20b2LineJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2LineJoint.b2LineJoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localXAxis1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localYAxis1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_axis%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_perp%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_K%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.m_impulse%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetReactionForce%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20inv_dt%20*%0A%20%20%20%20%20%20%20%20%20%20(this.m_impulse.x%20*%20this.m_perp.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_axis.x)%2C%0A%20%20%20%20%20%20%20%20inv_dt%20*%0A%20%20%20%20%20%20%20%20%20%20(this.m_impulse.x%20*%20this.m_perp.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_axis.y)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetReactionTorque%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20inv_dt%20*%20this.m_impulse.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetJointTranslation%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20p1%20%3D%20bA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%20%20var%20p2%20%3D%20bB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20p2.x%20-%20p1.x%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20p2.y%20-%20p1.y%3B%0A%20%20%20%20%20%20var%20axis%20%3D%20bA.GetWorldVector(this.m_localXAxis1)%3B%0A%20%20%20%20%20%20var%20translation%20%3D%20axis.x%20*%20dX%20%2B%20axis.y%20*%20dY%3B%0A%20%20%20%20%20%20return%20translation%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetJointSpeed%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20p1X%20%3D%20bA.m_sweep.c.x%20%2B%20r1X%3B%0A%20%20%20%20%20%20var%20p1Y%20%3D%20bA.m_sweep.c.y%20%2B%20r1Y%3B%0A%20%20%20%20%20%20var%20p2X%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%3B%0A%20%20%20%20%20%20var%20p2Y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20p2X%20-%20p1X%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20p2Y%20-%20p1Y%3B%0A%20%20%20%20%20%20var%20axis%20%3D%20bA.GetWorldVector(this.m_localXAxis1)%3B%0A%20%20%20%20%20%20var%20v1%20%3D%20bA.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20v2%20%3D%20bB.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20w1%20%3D%20bA.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20w2%20%3D%20bB.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20speed%20%3D%0A%20%20%20%20%20%20%20%20dX%20*%20(-w1%20*%20axis.y)%20%2B%0A%20%20%20%20%20%20%20%20dY%20*%20(w1%20*%20axis.x)%20%2B%0A%20%20%20%20%20%20%20%20(axis.x%20*%20(v2.x%20%2B%20-w2%20*%20r2Y%20-%20v1.x%20-%20-w1%20*%20r1Y)%20%2B%0A%20%20%20%20%20%20%20%20%20%20axis.y%20*%20(v2.y%20%2B%20w2%20*%20r2X%20-%20v1.y%20-%20w1%20*%20r1X))%3B%0A%20%20%20%20%20%20return%20speed%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.IsLimitEnabled%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_enableLimit%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.EnableLimit%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_enableLimit%20%3D%20flag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetLowerLimit%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_lowerTranslation%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetUpperLimit%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_upperTranslation%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.SetLimits%20%3D%20function%20(lower%2C%20upper)%20%7B%0A%20%20%20%20%20%20if%20(lower%20%3D%3D%3D%20undefined)%20lower%20%3D%200%3B%0A%20%20%20%20%20%20if%20(upper%20%3D%3D%3D%20undefined)%20upper%20%3D%200%3B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_lowerTranslation%20%3D%20lower%3B%0A%20%20%20%20%20%20this.m_upperTranslation%20%3D%20upper%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.IsMotorEnabled%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_enableMotor%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.EnableMotor%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_enableMotor%20%3D%20flag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.SetMotorSpeed%20%3D%20function%20(speed)%20%7B%0A%20%20%20%20%20%20if%20(speed%20%3D%3D%3D%20undefined)%20speed%20%3D%200%3B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_motorSpeed%20%3D%20speed%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetMotorSpeed%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_motorSpeed%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.SetMaxMotorForce%20%3D%20function%20(force)%20%7B%0A%20%20%20%20%20%20if%20(force%20%3D%3D%3D%20undefined)%20force%20%3D%200%3B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_maxMotorForce%20%3D%20force%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetMaxMotorForce%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_maxMotorForce%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.GetMotorForce%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_motorImpulse%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.b2LineJoint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20tY%20%3D%200%3B%0A%20%20%20%20%20%20this.m_localAnchor1.SetV(def.localAnchorA)%3B%0A%20%20%20%20%20%20this.m_localAnchor2.SetV(def.localAnchorB)%3B%0A%20%20%20%20%20%20this.m_localXAxis1.SetV(def.localAxisA)%3B%0A%20%20%20%20%20%20this.m_localYAxis1.x%20%3D%20-this.m_localXAxis1.y%3B%0A%20%20%20%20%20%20this.m_localYAxis1.y%20%3D%20this.m_localXAxis1.x%3B%0A%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20this.m_motorMass%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_lowerTranslation%20%3D%20def.lowerTranslation%3B%0A%20%20%20%20%20%20this.m_upperTranslation%20%3D%20def.upperTranslation%3B%0A%20%20%20%20%20%20this.m_maxMotorForce%20%3D%20def.maxMotorForce%3B%0A%20%20%20%20%20%20this.m_motorSpeed%20%3D%20def.motorSpeed%3B%0A%20%20%20%20%20%20this.m_enableLimit%20%3D%20def.enableLimit%3B%0A%20%20%20%20%20%20this.m_enableMotor%20%3D%20def.enableMotor%3B%0A%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20this.m_axis.SetZero()%3B%0A%20%20%20%20%20%20this.m_perp.SetZero()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20this.m_localCenterA.SetV(bA.GetLocalCenter())%3B%0A%20%20%20%20%20%20this.m_localCenterB.SetV(bB.GetLocalCenter())%3B%0A%20%20%20%20%20%20var%20xf1%20%3D%20bA.GetTransform()%3B%0A%20%20%20%20%20%20var%20xf2%20%3D%20bB.GetTransform()%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20this.m_localCenterA.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20this.m_localCenterA.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20this.m_localCenterB.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20this.m_localCenterB.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%20%20%20%20%20%20this.m_invMassA%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20this.m_invMassB%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20this.m_invIA%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20this.m_invIB%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this.m_axis.SetV(b2Math.MulMV(xf1.R%2C%20this.m_localXAxis1))%3B%0A%20%20%20%20%20%20%20%20this.m_a1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_axis.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20this.m_a2%20%3D%20r2X%20*%20this.m_axis.y%20-%20r2Y%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20this.m_motorMass%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_invMassA%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_invMassB%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_invIA%20*%20this.m_a1%20*%20this.m_a1%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_invIB%20*%20this.m_a2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20this.m_motorMass%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_motorMass%20%3E%20Number.MIN_VALUE%20%3F%201.0%20%2F%20this.m_motorMass%20%3A%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this.m_perp.SetV(b2Math.MulMV(xf1.R%2C%20this.m_localYAxis1))%3B%0A%20%20%20%20%20%20%20%20this.m_s1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_perp.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20this.m_s2%20%3D%20r2X%20*%20this.m_perp.y%20-%20r2Y%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20var%20m1%20%3D%20this.m_invMassA%3B%0A%20%20%20%20%20%20%20%20var%20m2%20%3D%20this.m_invMassB%3B%0A%20%20%20%20%20%20%20%20var%20i1%20%3D%20this.m_invIA%3B%0A%20%20%20%20%20%20%20%20var%20i2%20%3D%20this.m_invIB%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.x%20%3D%0A%20%20%20%20%20%20%20%20%20%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.y%20%3D%0A%20%20%20%20%20%20%20%20%20%20i1%20*%20this.m_s1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.x%20%3D%20this.m_K.col1.y%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.y%20%3D%0A%20%20%20%20%20%20%20%20%20%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_a1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_enableLimit)%20%7B%0A%20%20%20%20%20%20%20%20var%20jointTransition%20%3D%20this.m_axis.x%20*%20dX%20%2B%20this.m_axis.y%20*%20dY%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20b2Math.Abs(this.m_upperTranslation%20-%20this.m_lowerTranslation)%20%3C%0A%20%20%20%20%20%20%20%20%20%202.0%20*%20b2Settings.b2_linearSlop%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_equalLimits%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(jointTransition%20%3C%3D%20this.m_lowerTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20!%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_atLowerLimit%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(jointTransition%20%3E%3D%20this.m_upperTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20!%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_atUpperLimit%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_enableMotor%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse.x%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.y%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20var%20PX%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20*%20this.m_perp.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20var%20PY%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20*%20this.m_perp.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20var%20L1%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20*%20this.m_s1%20%2B%0A%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_a1%3B%0A%20%20%20%20%20%20%20%20var%20L2%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20*%20this.m_s2%20%2B%0A%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.SolveVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20v1%20%3D%20bA.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20w1%20%3D%20bA.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20v2%20%3D%20bB.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20w2%20%3D%20bB.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20PX%20%3D%200%3B%0A%20%20%20%20%20%20var%20PY%20%3D%200%3B%0A%20%20%20%20%20%20var%20L1%20%3D%200%3B%0A%20%20%20%20%20%20var%20L2%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_enableMotor%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_equalLimits)%20%7B%0A%20%20%20%20%20%20%20%20var%20Cdot%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.x%20*%20(v2.x%20-%20v1.x)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.y%20*%20(v2.y%20-%20v1.y)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_a2%20*%20w2%20-%0A%20%20%20%20%20%20%20%20%20%20this.m_a1%20*%20w1%3B%0A%20%20%20%20%20%20%20%20var%20impulse%20%3D%20this.m_motorMass%20*%20(this.m_motorSpeed%20-%20Cdot)%3B%0A%20%20%20%20%20%20%20%20var%20oldImpulse%20%3D%20this.m_motorImpulse%3B%0A%20%20%20%20%20%20%20%20var%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxMotorForce%3B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20this.m_motorImpulse%20%2B%20impulse%2C%0A%20%20%20%20%20%20%20%20%20%20-maxImpulse%2C%0A%20%20%20%20%20%20%20%20%20%20maxImpulse%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_motorImpulse%20-%20oldImpulse%3B%0A%20%20%20%20%20%20%20%20PX%20%3D%20impulse%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20PY%20%3D%20impulse%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20L1%20%3D%20impulse%20*%20this.m_a1%3B%0A%20%20%20%20%20%20%20%20L2%20%3D%20impulse%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20Cdot1%20%3D%0A%20%20%20%20%20%20%20%20this.m_perp.x%20*%20(v2.x%20-%20v1.x)%20%2B%0A%20%20%20%20%20%20%20%20this.m_perp.y%20*%20(v2.y%20-%20v1.y)%20%2B%0A%20%20%20%20%20%20%20%20this.m_s2%20*%20w2%20-%0A%20%20%20%20%20%20%20%20this.m_s1%20*%20w1%3B%0A%20%20%20%20%20%20if%20(this.m_enableLimit%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_inactiveLimit)%20%7B%0A%20%20%20%20%20%20%20%20var%20Cdot2%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.x%20*%20(v2.x%20-%20v1.x)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.y%20*%20(v2.y%20-%20v1.y)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_a2%20*%20w2%20-%0A%20%20%20%20%20%20%20%20%20%20this.m_a1%20*%20w1%3B%0A%20%20%20%20%20%20%20%20var%20f1%20%3D%20this.m_impulse.Copy()%3B%0A%20%20%20%20%20%20%20%20var%20df%20%3D%20this.m_K.Solve(new%20b2Vec2()%2C%20-Cdot1%2C%20-Cdot2)%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.Add(df)%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%3D%20b2Math.Max(this.m_impulse.y%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%3D%20b2Math.Min(this.m_impulse.y%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20b%20%3D%20-Cdot1%20-%20(this.m_impulse.y%20-%20f1.y)%20*%20this.m_K.col2.x%3B%0A%20%20%20%20%20%20%20%20var%20f2r%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_K.col1.x%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20f2r%20%3D%20b%20%2F%20this.m_K.col1.x%20%2B%20f1.x%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20f2r%20%3D%20f1.x%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_impulse.x%20%3D%20f2r%3B%0A%20%20%20%20%20%20%20%20df.x%20%3D%20this.m_impulse.x%20-%20f1.x%3B%0A%20%20%20%20%20%20%20%20df.y%20%3D%20this.m_impulse.y%20-%20f1.y%3B%0A%20%20%20%20%20%20%20%20PX%20%3D%20df.x%20*%20this.m_perp.x%20%2B%20df.y%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20PY%20%3D%20df.x%20*%20this.m_perp.y%20%2B%20df.y%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20L1%20%3D%20df.x%20*%20this.m_s1%20%2B%20df.y%20*%20this.m_a1%3B%0A%20%20%20%20%20%20%20%20L2%20%3D%20df.x%20*%20this.m_s2%20%2B%20df.y%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20var%20df2%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_K.col1.x%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20df2%20%3D%20-Cdot1%20%2F%20this.m_K.col1.x%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20df2%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.m_impulse.x%20%2B%3D%20df2%3B%0A%20%20%20%20%20%20%20%20PX%20%3D%20df2%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20PY%20%3D%20df2%20*%20this.m_perp.y%3B%0A%20%20%20%20%20%20%20%20L1%20%3D%20df2%20*%20this.m_s1%3B%0A%20%20%20%20%20%20%20%20L2%20%3D%20df2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20bA.m_linearVelocity.SetV(v1)%3B%0A%20%20%20%20%20%20bA.m_angularVelocity%20%3D%20w1%3B%0A%20%20%20%20%20%20bB.m_linearVelocity.SetV(v2)%3B%0A%20%20%20%20%20%20bB.m_angularVelocity%20%3D%20w2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJoint.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20var%20limitC%20%3D%200%3B%0A%20%20%20%20%20%20var%20oldLimitImpulse%20%3D%200%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20c1%20%3D%20bA.m_sweep.c%3B%0A%20%20%20%20%20%20var%20a1%20%3D%20bA.m_sweep.a%3B%0A%20%20%20%20%20%20var%20c2%20%3D%20bB.m_sweep.c%3B%0A%20%20%20%20%20%20var%20a2%20%3D%20bB.m_sweep.a%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20m1%20%3D%200%3B%0A%20%20%20%20%20%20var%20m2%20%3D%200%3B%0A%20%20%20%20%20%20var%20i1%20%3D%200%3B%0A%20%20%20%20%20%20var%20i2%20%3D%200%3B%0A%20%20%20%20%20%20var%20linearError%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20angularError%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20active%20%3D%20false%3B%0A%20%20%20%20%20%20var%20C2%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20R1%20%3D%20b2Mat22.FromAngle(a1)%3B%0A%20%20%20%20%20%20var%20R2%20%3D%20b2Mat22.FromAngle(a2)%3B%0A%20%20%20%20%20%20tMat%20%3D%20R1%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20this.m_localCenterA.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20this.m_localCenterA.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20R2%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20this.m_localCenterB.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20this.m_localCenterB.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20c2.x%20%2B%20r2X%20-%20c1.x%20-%20r1X%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20c2.y%20%2B%20r2Y%20-%20c1.y%20-%20r1Y%3B%0A%20%20%20%20%20%20if%20(this.m_enableLimit)%20%7B%0A%20%20%20%20%20%20%20%20this.m_axis%20%3D%20b2Math.MulMV(R1%2C%20this.m_localXAxis1)%3B%0A%20%20%20%20%20%20%20%20this.m_a1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_axis.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20this.m_a2%20%3D%20r2X%20*%20this.m_axis.y%20-%20r2Y%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20var%20translation%20%3D%20this.m_axis.x%20*%20dX%20%2B%20this.m_axis.y%20*%20dY%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20b2Math.Abs(this.m_upperTranslation%20-%20this.m_lowerTranslation)%20%3C%0A%20%20%20%20%20%20%20%20%20%202.0%20*%20b2Settings.b2_linearSlop%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20C2%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20translation%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20-b2Settings.b2_maxLinearCorrection%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2_maxLinearCorrection%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20linearError%20%3D%20b2Math.Abs(translation)%3B%0A%20%20%20%20%20%20%20%20%20%20active%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(translation%20%3C%3D%20this.m_lowerTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20C2%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20translation%20-%20this.m_lowerTranslation%20%2B%20b2Settings.b2_linearSlop%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20-b2Settings.b2_maxLinearCorrection%2C%0A%20%20%20%20%20%20%20%20%20%20%20%200.0%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20linearError%20%3D%20this.m_lowerTranslation%20-%20translation%3B%0A%20%20%20%20%20%20%20%20%20%20active%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(translation%20%3E%3D%20this.m_upperTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20C2%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20translation%20-%20this.m_upperTranslation%20%2B%20b2Settings.b2_linearSlop%2C%0A%20%20%20%20%20%20%20%20%20%20%20%200.0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2_maxLinearCorrection%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20linearError%20%3D%20translation%20-%20this.m_upperTranslation%3B%0A%20%20%20%20%20%20%20%20%20%20active%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_perp%20%3D%20b2Math.MulMV(R1%2C%20this.m_localYAxis1)%3B%0A%20%20%20%20%20%20this.m_s1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_perp.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20this.m_s2%20%3D%20r2X%20*%20this.m_perp.y%20-%20r2Y%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20var%20impulse%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20var%20C1%20%3D%20this.m_perp.x%20*%20dX%20%2B%20this.m_perp.y%20*%20dY%3B%0A%20%20%20%20%20%20linearError%20%3D%20b2Math.Max(linearError%2C%20b2Math.Abs(C1))%3B%0A%20%20%20%20%20%20angularError%20%3D%200.0%3B%0A%20%20%20%20%20%20if%20(active)%20%7B%0A%20%20%20%20%20%20%20%20m1%20%3D%20this.m_invMassA%3B%0A%20%20%20%20%20%20%20%20m2%20%3D%20this.m_invMassB%3B%0A%20%20%20%20%20%20%20%20i1%20%3D%20this.m_invIA%3B%0A%20%20%20%20%20%20%20%20i2%20%3D%20this.m_invIB%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.x%20%3D%0A%20%20%20%20%20%20%20%20%20%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.y%20%3D%0A%20%20%20%20%20%20%20%20%20%20i1%20*%20this.m_s1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.x%20%3D%20this.m_K.col1.y%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.y%20%3D%0A%20%20%20%20%20%20%20%20%20%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_a1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20this.m_K.Solve(impulse%2C%20-C1%2C%20-C2)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20m1%20%3D%20this.m_invMassA%3B%0A%20%20%20%20%20%20%20%20m2%20%3D%20this.m_invMassB%3B%0A%20%20%20%20%20%20%20%20i1%20%3D%20this.m_invIA%3B%0A%20%20%20%20%20%20%20%20i2%20%3D%20this.m_invIB%3B%0A%20%20%20%20%20%20%20%20var%20k11%20%3D%0A%20%20%20%20%20%20%20%20%20%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20var%20impulse1%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(k11%20!%3D%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20impulse1%20%3D%20-C1%20%2F%20k11%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20impulse1%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20impulse.x%20%3D%20impulse1%3B%0A%20%20%20%20%20%20%20%20impulse.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20PX%20%3D%20impulse.x%20*%20this.m_perp.x%20%2B%20impulse.y%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20var%20PY%20%3D%20impulse.x%20*%20this.m_perp.y%20%2B%20impulse.y%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20var%20L1%20%3D%20impulse.x%20*%20this.m_s1%20%2B%20impulse.y%20*%20this.m_a1%3B%0A%20%20%20%20%20%20var%20L2%20%3D%20impulse.x%20*%20this.m_s2%20%2B%20impulse.y%20*%20this.m_a2%3B%0A%20%20%20%20%20%20c1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20c1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20a1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20c2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20c2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20a2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20bA.m_sweep.a%20%3D%20a1%3B%0A%20%20%20%20%20%20bB.m_sweep.a%20%3D%20a2%3B%0A%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20linearError%20%3C%3D%20b2Settings.b2_linearSlop%20%26%26%0A%20%20%20%20%20%20%20%20angularError%20%3C%3D%20b2Settings.b2_angularSlop%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2LineJointDef%2C%20Box2D.Dynamics.Joints.b2JointDef)%3B%0A%20%20%20%20b2LineJointDef.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2LineJointDef.b2LineJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localAxisA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJointDef.prototype.b2LineJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_lineJoint%3B%0A%20%20%20%20%20%20this.localAxisA.Set(1.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.enableLimit%20%3D%20false%3B%0A%20%20%20%20%20%20this.lowerTranslation%20%3D%200.0%3B%0A%20%20%20%20%20%20this.upperTranslation%20%3D%200.0%3B%0A%20%20%20%20%20%20this.enableMotor%20%3D%20false%3B%0A%20%20%20%20%20%20this.maxMotorForce%20%3D%200.0%3B%0A%20%20%20%20%20%20this.motorSpeed%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2LineJointDef.prototype.Initialize%20%3D%20function%20(bA%2C%20bB%2C%20anchor%2C%20axis)%20%7B%0A%20%20%20%20%20%20this.bodyA%20%3D%20bA%3B%0A%20%20%20%20%20%20this.bodyB%20%3D%20bB%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20this.bodyA.GetLocalPoint(anchor)%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20this.bodyB.GetLocalPoint(anchor)%3B%0A%20%20%20%20%20%20this.localAxisA%20%3D%20this.bodyA.GetLocalVector(axis)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2MouseJoint%2C%20Box2D.Dynamics.Joints.b2Joint)%3B%0A%20%20%20%20b2MouseJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2MouseJoint.b2MouseJoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.K%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.K1%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.K2%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.m_localAnchor%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_target%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_impulse%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_mass%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.m_C%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.GetAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_target%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.GetAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.GetReactionForce%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(inv_dt%20*%20this.m_impulse.x%2C%20inv_dt%20*%20this.m_impulse.y)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.GetReactionTorque%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.GetTarget%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_target%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.SetTarget%20%3D%20function%20(target)%20%7B%0A%20%20%20%20%20%20if%20(this.m_bodyB.IsAwake()%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_target%20%3D%20target%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.GetMaxForce%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_maxForce%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.SetMaxForce%20%3D%20function%20(maxForce)%20%7B%0A%20%20%20%20%20%20if%20(maxForce%20%3D%3D%3D%20undefined)%20maxForce%20%3D%200%3B%0A%20%20%20%20%20%20this.m_maxForce%20%3D%20maxForce%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.GetFrequency%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_frequencyHz%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.SetFrequency%20%3D%20function%20(hz)%20%7B%0A%20%20%20%20%20%20if%20(hz%20%3D%3D%3D%20undefined)%20hz%20%3D%200%3B%0A%20%20%20%20%20%20this.m_frequencyHz%20%3D%20hz%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.GetDampingRatio%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_dampingRatio%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.SetDampingRatio%20%3D%20function%20(ratio)%20%7B%0A%20%20%20%20%20%20if%20(ratio%20%3D%3D%3D%20undefined)%20ratio%20%3D%200%3B%0A%20%20%20%20%20%20this.m_dampingRatio%20%3D%20ratio%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.b2MouseJoint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20this.m_target.SetV(def.target)%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20this.m_target.x%20-%20this.m_bodyB.m_xf.position.x%3B%0A%20%20%20%20%20%20var%20tY%20%3D%20this.m_target.y%20-%20this.m_bodyB.m_xf.position.y%3B%0A%20%20%20%20%20%20var%20tMat%20%3D%20this.m_bodyB.m_xf.R%3B%0A%20%20%20%20%20%20this.m_localAnchor.x%20%3D%20tX%20*%20tMat.col1.x%20%2B%20tY%20*%20tMat.col1.y%3B%0A%20%20%20%20%20%20this.m_localAnchor.y%20%3D%20tX%20*%20tMat.col2.x%20%2B%20tY%20*%20tMat.col2.y%3B%0A%20%20%20%20%20%20this.m_maxForce%20%3D%20def.maxForce%3B%0A%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20this.m_frequencyHz%20%3D%20def.frequencyHz%3B%0A%20%20%20%20%20%20this.m_dampingRatio%20%3D%20def.dampingRatio%3B%0A%20%20%20%20%20%20this.m_beta%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_gamma%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20b%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20mass%20%3D%20b.GetMass()%3B%0A%20%20%20%20%20%20var%20omega%20%3D%202.0%20*%20Math.PI%20*%20this.m_frequencyHz%3B%0A%20%20%20%20%20%20var%20d%20%3D%202.0%20*%20mass%20*%20this.m_dampingRatio%20*%20omega%3B%0A%20%20%20%20%20%20var%20k%20%3D%20mass%20*%20omega%20*%20omega%3B%0A%20%20%20%20%20%20this.m_gamma%20%3D%20step.dt%20*%20(d%20%2B%20step.dt%20*%20k)%3B%0A%20%20%20%20%20%20this.m_gamma%20%3D%20this.m_gamma%20!%3D%200%20%3F%201%20%2F%20this.m_gamma%20%3A%200.0%3B%0A%20%20%20%20%20%20this.m_beta%20%3D%20step.dt%20*%20k%20*%20this.m_gamma%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20tMat%20%3D%20b.m_xf.R%3B%0A%20%20%20%20%20%20var%20rX%20%3D%20this.m_localAnchor.x%20-%20b.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rY%20%3D%20this.m_localAnchor.y%20-%20b.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20tMat.col1.x%20*%20rX%20%2B%20tMat.col2.x%20*%20rY%3B%0A%20%20%20%20%20%20rY%20%3D%20tMat.col1.y%20*%20rX%20%2B%20tMat.col2.y%20*%20rY%3B%0A%20%20%20%20%20%20rX%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20invMass%20%3D%20b.m_invMass%3B%0A%20%20%20%20%20%20var%20invI%20%3D%20b.m_invI%3B%0A%20%20%20%20%20%20this.K1.col1.x%20%3D%20invMass%3B%0A%20%20%20%20%20%20this.K1.col2.x%20%3D%200.0%3B%0A%20%20%20%20%20%20this.K1.col1.y%20%3D%200.0%3B%0A%20%20%20%20%20%20this.K1.col2.y%20%3D%20invMass%3B%0A%20%20%20%20%20%20this.K2.col1.x%20%3D%20invI%20*%20rY%20*%20rY%3B%0A%20%20%20%20%20%20this.K2.col2.x%20%3D%20-invI%20*%20rX%20*%20rY%3B%0A%20%20%20%20%20%20this.K2.col1.y%20%3D%20-invI%20*%20rX%20*%20rY%3B%0A%20%20%20%20%20%20this.K2.col2.y%20%3D%20invI%20*%20rX%20*%20rX%3B%0A%20%20%20%20%20%20this.K.SetM(this.K1)%3B%0A%20%20%20%20%20%20this.K.AddM(this.K2)%3B%0A%20%20%20%20%20%20this.K.col1.x%20%2B%3D%20this.m_gamma%3B%0A%20%20%20%20%20%20this.K.col2.y%20%2B%3D%20this.m_gamma%3B%0A%20%20%20%20%20%20this.K.GetInverse(this.m_mass)%3B%0A%20%20%20%20%20%20this.m_C.x%20%3D%20b.m_sweep.c.x%20%2B%20rX%20-%20this.m_target.x%3B%0A%20%20%20%20%20%20this.m_C.y%20%3D%20b.m_sweep.c.y%20%2B%20rY%20-%20this.m_target.y%3B%0A%20%20%20%20%20%20b.m_angularVelocity%20*%3D%200.98%3B%0A%20%20%20%20%20%20this.m_impulse.x%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20this.m_impulse.y%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20b.m_linearVelocity.x%20%2B%3D%20invMass%20*%20this.m_impulse.x%3B%0A%20%20%20%20%20%20b.m_linearVelocity.y%20%2B%3D%20invMass%20*%20this.m_impulse.y%3B%0A%20%20%20%20%20%20b.m_angularVelocity%20%2B%3D%0A%20%20%20%20%20%20%20%20invI%20*%20(rX%20*%20this.m_impulse.y%20-%20rY%20*%20this.m_impulse.x)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.SolveVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20b%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20tY%20%3D%200%3B%0A%20%20%20%20%20%20tMat%20%3D%20b.m_xf.R%3B%0A%20%20%20%20%20%20var%20rX%20%3D%20this.m_localAnchor.x%20-%20b.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rY%20%3D%20this.m_localAnchor.y%20-%20b.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rX%20%2B%20tMat.col2.x%20*%20rY%3B%0A%20%20%20%20%20%20rY%20%3D%20tMat.col1.y%20*%20rX%20%2B%20tMat.col2.y%20*%20rY%3B%0A%20%20%20%20%20%20rX%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20CdotX%20%3D%20b.m_linearVelocity.x%20%2B%20-b.m_angularVelocity%20*%20rY%3B%0A%20%20%20%20%20%20var%20CdotY%20%3D%20b.m_linearVelocity.y%20%2B%20b.m_angularVelocity%20*%20rX%3B%0A%20%20%20%20%20%20tMat%20%3D%20this.m_mass%3B%0A%20%20%20%20%20%20tX%20%3D%20CdotX%20%2B%20this.m_beta%20*%20this.m_C.x%20%2B%20this.m_gamma%20*%20this.m_impulse.x%3B%0A%20%20%20%20%20%20tY%20%3D%20CdotY%20%2B%20this.m_beta%20*%20this.m_C.y%20%2B%20this.m_gamma%20*%20this.m_impulse.y%3B%0A%20%20%20%20%20%20var%20impulseX%20%3D%20-(tMat.col1.x%20*%20tX%20%2B%20tMat.col2.x%20*%20tY)%3B%0A%20%20%20%20%20%20var%20impulseY%20%3D%20-(tMat.col1.y%20*%20tX%20%2B%20tMat.col2.y%20*%20tY)%3B%0A%20%20%20%20%20%20var%20oldImpulseX%20%3D%20this.m_impulse.x%3B%0A%20%20%20%20%20%20var%20oldImpulseY%20%3D%20this.m_impulse.y%3B%0A%20%20%20%20%20%20this.m_impulse.x%20%2B%3D%20impulseX%3B%0A%20%20%20%20%20%20this.m_impulse.y%20%2B%3D%20impulseY%3B%0A%20%20%20%20%20%20var%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxForce%3B%0A%20%20%20%20%20%20if%20(this.m_impulse.LengthSquared()%20%3E%20maxImpulse%20*%20maxImpulse)%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse.Multiply(maxImpulse%20%2F%20this.m_impulse.Length())%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20impulseX%20%3D%20this.m_impulse.x%20-%20oldImpulseX%3B%0A%20%20%20%20%20%20impulseY%20%3D%20this.m_impulse.y%20-%20oldImpulseY%3B%0A%20%20%20%20%20%20b.m_linearVelocity.x%20%2B%3D%20b.m_invMass%20*%20impulseX%3B%0A%20%20%20%20%20%20b.m_linearVelocity.y%20%2B%3D%20b.m_invMass%20*%20impulseY%3B%0A%20%20%20%20%20%20b.m_angularVelocity%20%2B%3D%20b.m_invI%20*%20(rX%20*%20impulseY%20-%20rY%20*%20impulseX)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJoint.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2MouseJointDef%2C%20Box2D.Dynamics.Joints.b2JointDef)%3B%0A%20%20%20%20b2MouseJointDef.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2MouseJointDef.b2MouseJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.target%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2MouseJointDef.prototype.b2MouseJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_mouseJoint%3B%0A%20%20%20%20%20%20this.maxForce%20%3D%200.0%3B%0A%20%20%20%20%20%20this.frequencyHz%20%3D%205.0%3B%0A%20%20%20%20%20%20this.dampingRatio%20%3D%200.7%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2PrismaticJoint%2C%20Box2D.Dynamics.Joints.b2Joint)%3B%0A%20%20%20%20b2PrismaticJoint.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2PrismaticJoint.b2PrismaticJoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localXAxis1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localYAxis1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_axis%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_perp%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_K%20%3D%20new%20b2Mat33()%3B%0A%20%20%20%20%20%20this.m_impulse%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.GetAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.GetAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.GetReactionForce%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20inv_dt%20*%0A%20%20%20%20%20%20%20%20%20%20(this.m_impulse.x%20*%20this.m_perp.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_axis.x)%2C%0A%20%20%20%20%20%20%20%20inv_dt%20*%0A%20%20%20%20%20%20%20%20%20%20(this.m_impulse.x%20*%20this.m_perp.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_axis.y)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.GetReactionTorque%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20inv_dt%20*%20this.m_impulse.y%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.GetJointTranslation%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20p1%20%3D%20bA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%20%20var%20p2%20%3D%20bB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20p2.x%20-%20p1.x%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20p2.y%20-%20p1.y%3B%0A%20%20%20%20%20%20var%20axis%20%3D%20bA.GetWorldVector(this.m_localXAxis1)%3B%0A%20%20%20%20%20%20var%20translation%20%3D%20axis.x%20*%20dX%20%2B%20axis.y%20*%20dY%3B%0A%20%20%20%20%20%20return%20translation%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.GetJointSpeed%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20p1X%20%3D%20bA.m_sweep.c.x%20%2B%20r1X%3B%0A%20%20%20%20%20%20var%20p1Y%20%3D%20bA.m_sweep.c.y%20%2B%20r1Y%3B%0A%20%20%20%20%20%20var%20p2X%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%3B%0A%20%20%20%20%20%20var%20p2Y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20p2X%20-%20p1X%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20p2Y%20-%20p1Y%3B%0A%20%20%20%20%20%20var%20axis%20%3D%20bA.GetWorldVector(this.m_localXAxis1)%3B%0A%20%20%20%20%20%20var%20v1%20%3D%20bA.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20v2%20%3D%20bB.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20w1%20%3D%20bA.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20w2%20%3D%20bB.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20speed%20%3D%0A%20%20%20%20%20%20%20%20dX%20*%20(-w1%20*%20axis.y)%20%2B%0A%20%20%20%20%20%20%20%20dY%20*%20(w1%20*%20axis.x)%20%2B%0A%20%20%20%20%20%20%20%20(axis.x%20*%20(v2.x%20%2B%20-w2%20*%20r2Y%20-%20v1.x%20-%20-w1%20*%20r1Y)%20%2B%0A%20%20%20%20%20%20%20%20%20%20axis.y%20*%20(v2.y%20%2B%20w2%20*%20r2X%20-%20v1.y%20-%20w1%20*%20r1X))%3B%0A%20%20%20%20%20%20return%20speed%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.IsLimitEnabled%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_enableLimit%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.EnableLimit%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_enableLimit%20%3D%20flag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.GetLowerLimit%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_lowerTranslation%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.GetUpperLimit%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_upperTranslation%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.SetLimits%20%3D%20function%20(lower%2C%20upper)%20%7B%0A%20%20%20%20%20%20if%20(lower%20%3D%3D%3D%20undefined)%20lower%20%3D%200%3B%0A%20%20%20%20%20%20if%20(upper%20%3D%3D%3D%20undefined)%20upper%20%3D%200%3B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_lowerTranslation%20%3D%20lower%3B%0A%20%20%20%20%20%20this.m_upperTranslation%20%3D%20upper%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.IsMotorEnabled%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_enableMotor%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.EnableMotor%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_enableMotor%20%3D%20flag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.SetMotorSpeed%20%3D%20function%20(speed)%20%7B%0A%20%20%20%20%20%20if%20(speed%20%3D%3D%3D%20undefined)%20speed%20%3D%200%3B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_motorSpeed%20%3D%20speed%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.GetMotorSpeed%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_motorSpeed%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.SetMaxMotorForce%20%3D%20function%20(force)%20%7B%0A%20%20%20%20%20%20if%20(force%20%3D%3D%3D%20undefined)%20force%20%3D%200%3B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_maxMotorForce%20%3D%20force%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.GetMotorForce%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_motorImpulse%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.b2PrismaticJoint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20tY%20%3D%200%3B%0A%20%20%20%20%20%20this.m_localAnchor1.SetV(def.localAnchorA)%3B%0A%20%20%20%20%20%20this.m_localAnchor2.SetV(def.localAnchorB)%3B%0A%20%20%20%20%20%20this.m_localXAxis1.SetV(def.localAxisA)%3B%0A%20%20%20%20%20%20this.m_localYAxis1.x%20%3D%20-this.m_localXAxis1.y%3B%0A%20%20%20%20%20%20this.m_localYAxis1.y%20%3D%20this.m_localXAxis1.x%3B%0A%20%20%20%20%20%20this.m_refAngle%20%3D%20def.referenceAngle%3B%0A%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20this.m_motorMass%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_lowerTranslation%20%3D%20def.lowerTranslation%3B%0A%20%20%20%20%20%20this.m_upperTranslation%20%3D%20def.upperTranslation%3B%0A%20%20%20%20%20%20this.m_maxMotorForce%20%3D%20def.maxMotorForce%3B%0A%20%20%20%20%20%20this.m_motorSpeed%20%3D%20def.motorSpeed%3B%0A%20%20%20%20%20%20this.m_enableLimit%20%3D%20def.enableLimit%3B%0A%20%20%20%20%20%20this.m_enableMotor%20%3D%20def.enableMotor%3B%0A%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20this.m_axis.SetZero()%3B%0A%20%20%20%20%20%20this.m_perp.SetZero()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20this.m_localCenterA.SetV(bA.GetLocalCenter())%3B%0A%20%20%20%20%20%20this.m_localCenterB.SetV(bB.GetLocalCenter())%3B%0A%20%20%20%20%20%20var%20xf1%20%3D%20bA.GetTransform()%3B%0A%20%20%20%20%20%20var%20xf2%20%3D%20bB.GetTransform()%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20this.m_localCenterA.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20this.m_localCenterA.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20this.m_localCenterB.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20this.m_localCenterB.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%20%20%20%20%20%20this.m_invMassA%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20this.m_invMassB%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20this.m_invIA%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20this.m_invIB%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this.m_axis.SetV(b2Math.MulMV(xf1.R%2C%20this.m_localXAxis1))%3B%0A%20%20%20%20%20%20%20%20this.m_a1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_axis.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20this.m_a2%20%3D%20r2X%20*%20this.m_axis.y%20-%20r2Y%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20this.m_motorMass%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_invMassA%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_invMassB%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_invIA%20*%20this.m_a1%20*%20this.m_a1%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_invIB%20*%20this.m_a2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_motorMass%20%3E%20Number.MIN_VALUE)%0A%20%20%20%20%20%20%20%20%20%20this.m_motorMass%20%3D%201.0%20%2F%20this.m_motorMass%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this.m_perp.SetV(b2Math.MulMV(xf1.R%2C%20this.m_localYAxis1))%3B%0A%20%20%20%20%20%20%20%20this.m_s1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_perp.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20this.m_s2%20%3D%20r2X%20*%20this.m_perp.y%20-%20r2Y%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20var%20m1%20%3D%20this.m_invMassA%3B%0A%20%20%20%20%20%20%20%20var%20m2%20%3D%20this.m_invMassB%3B%0A%20%20%20%20%20%20%20%20var%20i1%20%3D%20this.m_invIA%3B%0A%20%20%20%20%20%20%20%20var%20i2%20%3D%20this.m_invIB%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.x%20%3D%0A%20%20%20%20%20%20%20%20%20%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.y%20%3D%20i1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.z%20%3D%0A%20%20%20%20%20%20%20%20%20%20i1%20*%20this.m_s1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.x%20%3D%20this.m_K.col1.y%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.y%20%3D%20i1%20%2B%20i2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.z%20%3D%20i1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col3.x%20%3D%20this.m_K.col1.z%3B%0A%20%20%20%20%20%20%20%20this.m_K.col3.y%20%3D%20this.m_K.col2.z%3B%0A%20%20%20%20%20%20%20%20this.m_K.col3.z%20%3D%0A%20%20%20%20%20%20%20%20%20%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_a1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_enableLimit)%20%7B%0A%20%20%20%20%20%20%20%20var%20jointTransition%20%3D%20this.m_axis.x%20*%20dX%20%2B%20this.m_axis.y%20*%20dY%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20b2Math.Abs(this.m_upperTranslation%20-%20this.m_lowerTranslation)%20%3C%0A%20%20%20%20%20%20%20%20%20%202.0%20*%20b2Settings.b2_linearSlop%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_equalLimits%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(jointTransition%20%3C%3D%20this.m_lowerTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20!%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_atLowerLimit%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(jointTransition%20%3E%3D%20this.m_upperTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20!%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_atUpperLimit%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_enableMotor%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse.x%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.y%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20var%20PX%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20*%20this.m_perp.x%20%2B%0A%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20var%20PY%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20*%20this.m_perp.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20var%20L1%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20*%20this.m_s1%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_a1%3B%0A%20%20%20%20%20%20%20%20var%20L2%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20*%20this.m_s2%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%2B%0A%20%20%20%20%20%20%20%20%20%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.SolveVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20v1%20%3D%20bA.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20w1%20%3D%20bA.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20v2%20%3D%20bB.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20w2%20%3D%20bB.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20PX%20%3D%200%3B%0A%20%20%20%20%20%20var%20PY%20%3D%200%3B%0A%20%20%20%20%20%20var%20L1%20%3D%200%3B%0A%20%20%20%20%20%20var%20L2%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_enableMotor%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_equalLimits)%20%7B%0A%20%20%20%20%20%20%20%20var%20Cdot%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.x%20*%20(v2.x%20-%20v1.x)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.y%20*%20(v2.y%20-%20v1.y)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_a2%20*%20w2%20-%0A%20%20%20%20%20%20%20%20%20%20this.m_a1%20*%20w1%3B%0A%20%20%20%20%20%20%20%20var%20impulse%20%3D%20this.m_motorMass%20*%20(this.m_motorSpeed%20-%20Cdot)%3B%0A%20%20%20%20%20%20%20%20var%20oldImpulse%20%3D%20this.m_motorImpulse%3B%0A%20%20%20%20%20%20%20%20var%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxMotorForce%3B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20this.m_motorImpulse%20%2B%20impulse%2C%0A%20%20%20%20%20%20%20%20%20%20-maxImpulse%2C%0A%20%20%20%20%20%20%20%20%20%20maxImpulse%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_motorImpulse%20-%20oldImpulse%3B%0A%20%20%20%20%20%20%20%20PX%20%3D%20impulse%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20PY%20%3D%20impulse%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20L1%20%3D%20impulse%20*%20this.m_a1%3B%0A%20%20%20%20%20%20%20%20L2%20%3D%20impulse%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20Cdot1X%20%3D%0A%20%20%20%20%20%20%20%20this.m_perp.x%20*%20(v2.x%20-%20v1.x)%20%2B%0A%20%20%20%20%20%20%20%20this.m_perp.y%20*%20(v2.y%20-%20v1.y)%20%2B%0A%20%20%20%20%20%20%20%20this.m_s2%20*%20w2%20-%0A%20%20%20%20%20%20%20%20this.m_s1%20*%20w1%3B%0A%20%20%20%20%20%20var%20Cdot1Y%20%3D%20w2%20-%20w1%3B%0A%20%20%20%20%20%20if%20(this.m_enableLimit%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_inactiveLimit)%20%7B%0A%20%20%20%20%20%20%20%20var%20Cdot2%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.x%20*%20(v2.x%20-%20v1.x)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_axis.y%20*%20(v2.y%20-%20v1.y)%20%2B%0A%20%20%20%20%20%20%20%20%20%20this.m_a2%20*%20w2%20-%0A%20%20%20%20%20%20%20%20%20%20this.m_a1%20*%20w1%3B%0A%20%20%20%20%20%20%20%20var%20f1%20%3D%20this.m_impulse.Copy()%3B%0A%20%20%20%20%20%20%20%20var%20df%20%3D%20this.m_K.Solve33(new%20b2Vec3()%2C%20-Cdot1X%2C%20-Cdot1Y%2C%20-Cdot2)%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.Add(df)%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%20b2Math.Max(this.m_impulse.z%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%20b2Math.Min(this.m_impulse.z%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20bX%20%3D%20-Cdot1X%20-%20(this.m_impulse.z%20-%20f1.z)%20*%20this.m_K.col3.x%3B%0A%20%20%20%20%20%20%20%20var%20bY%20%3D%20-Cdot1Y%20-%20(this.m_impulse.z%20-%20f1.z)%20*%20this.m_K.col3.y%3B%0A%20%20%20%20%20%20%20%20var%20f2r%20%3D%20this.m_K.Solve22(new%20b2Vec2()%2C%20bX%2C%20bY)%3B%0A%20%20%20%20%20%20%20%20f2r.x%20%2B%3D%20f1.x%3B%0A%20%20%20%20%20%20%20%20f2r.y%20%2B%3D%20f1.y%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.x%20%3D%20f2r.x%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.y%20%3D%20f2r.y%3B%0A%20%20%20%20%20%20%20%20df.x%20%3D%20this.m_impulse.x%20-%20f1.x%3B%0A%20%20%20%20%20%20%20%20df.y%20%3D%20this.m_impulse.y%20-%20f1.y%3B%0A%20%20%20%20%20%20%20%20df.z%20%3D%20this.m_impulse.z%20-%20f1.z%3B%0A%20%20%20%20%20%20%20%20PX%20%3D%20df.x%20*%20this.m_perp.x%20%2B%20df.z%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20PY%20%3D%20df.x%20*%20this.m_perp.y%20%2B%20df.z%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20%20%20L1%20%3D%20df.x%20*%20this.m_s1%20%2B%20df.y%20%2B%20df.z%20*%20this.m_a1%3B%0A%20%20%20%20%20%20%20%20L2%20%3D%20df.x%20*%20this.m_s2%20%2B%20df.y%20%2B%20df.z%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20var%20df2%20%3D%20this.m_K.Solve22(new%20b2Vec2()%2C%20-Cdot1X%2C%20-Cdot1Y)%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.x%20%2B%3D%20df2.x%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.y%20%2B%3D%20df2.y%3B%0A%20%20%20%20%20%20%20%20PX%20%3D%20df2.x%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20%20%20PY%20%3D%20df2.x%20*%20this.m_perp.y%3B%0A%20%20%20%20%20%20%20%20L1%20%3D%20df2.x%20*%20this.m_s1%20%2B%20df2.y%3B%0A%20%20%20%20%20%20%20%20L2%20%3D%20df2.x%20*%20this.m_s2%20%2B%20df2.y%3B%0A%20%20%20%20%20%20%20%20v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20%20%20w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20bA.m_linearVelocity.SetV(v1)%3B%0A%20%20%20%20%20%20bA.m_angularVelocity%20%3D%20w1%3B%0A%20%20%20%20%20%20bB.m_linearVelocity.SetV(v2)%3B%0A%20%20%20%20%20%20bB.m_angularVelocity%20%3D%20w2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJoint.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20var%20limitC%20%3D%200%3B%0A%20%20%20%20%20%20var%20oldLimitImpulse%20%3D%200%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20c1%20%3D%20bA.m_sweep.c%3B%0A%20%20%20%20%20%20var%20a1%20%3D%20bA.m_sweep.a%3B%0A%20%20%20%20%20%20var%20c2%20%3D%20bB.m_sweep.c%3B%0A%20%20%20%20%20%20var%20a2%20%3D%20bB.m_sweep.a%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20m1%20%3D%200%3B%0A%20%20%20%20%20%20var%20m2%20%3D%200%3B%0A%20%20%20%20%20%20var%20i1%20%3D%200%3B%0A%20%20%20%20%20%20var%20i2%20%3D%200%3B%0A%20%20%20%20%20%20var%20linearError%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20angularError%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20active%20%3D%20false%3B%0A%20%20%20%20%20%20var%20C2%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20R1%20%3D%20b2Mat22.FromAngle(a1)%3B%0A%20%20%20%20%20%20var%20R2%20%3D%20b2Mat22.FromAngle(a2)%3B%0A%20%20%20%20%20%20tMat%20%3D%20R1%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20this.m_localCenterA.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20this.m_localCenterA.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20R2%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20this.m_localCenterB.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20this.m_localCenterB.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20c2.x%20%2B%20r2X%20-%20c1.x%20-%20r1X%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20c2.y%20%2B%20r2Y%20-%20c1.y%20-%20r1Y%3B%0A%20%20%20%20%20%20if%20(this.m_enableLimit)%20%7B%0A%20%20%20%20%20%20%20%20this.m_axis%20%3D%20b2Math.MulMV(R1%2C%20this.m_localXAxis1)%3B%0A%20%20%20%20%20%20%20%20this.m_a1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_axis.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20this.m_a2%20%3D%20r2X%20*%20this.m_axis.y%20-%20r2Y%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20%20%20var%20translation%20%3D%20this.m_axis.x%20*%20dX%20%2B%20this.m_axis.y%20*%20dY%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20b2Math.Abs(this.m_upperTranslation%20-%20this.m_lowerTranslation)%20%3C%0A%20%20%20%20%20%20%20%20%20%202.0%20*%20b2Settings.b2_linearSlop%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20C2%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20translation%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20-b2Settings.b2_maxLinearCorrection%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2_maxLinearCorrection%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20linearError%20%3D%20b2Math.Abs(translation)%3B%0A%20%20%20%20%20%20%20%20%20%20active%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(translation%20%3C%3D%20this.m_lowerTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20C2%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20translation%20-%20this.m_lowerTranslation%20%2B%20b2Settings.b2_linearSlop%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20-b2Settings.b2_maxLinearCorrection%2C%0A%20%20%20%20%20%20%20%20%20%20%20%200.0%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20linearError%20%3D%20this.m_lowerTranslation%20-%20translation%3B%0A%20%20%20%20%20%20%20%20%20%20active%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(translation%20%3E%3D%20this.m_upperTranslation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20C2%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20translation%20-%20this.m_upperTranslation%20%2B%20b2Settings.b2_linearSlop%2C%0A%20%20%20%20%20%20%20%20%20%20%20%200.0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2_maxLinearCorrection%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20linearError%20%3D%20translation%20-%20this.m_upperTranslation%3B%0A%20%20%20%20%20%20%20%20%20%20active%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_perp%20%3D%20b2Math.MulMV(R1%2C%20this.m_localYAxis1)%3B%0A%20%20%20%20%20%20this.m_s1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_perp.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20this.m_s2%20%3D%20r2X%20*%20this.m_perp.y%20-%20r2Y%20*%20this.m_perp.x%3B%0A%20%20%20%20%20%20var%20impulse%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20var%20C1X%20%3D%20this.m_perp.x%20*%20dX%20%2B%20this.m_perp.y%20*%20dY%3B%0A%20%20%20%20%20%20var%20C1Y%20%3D%20a2%20-%20a1%20-%20this.m_refAngle%3B%0A%20%20%20%20%20%20linearError%20%3D%20b2Math.Max(linearError%2C%20b2Math.Abs(C1X))%3B%0A%20%20%20%20%20%20angularError%20%3D%20b2Math.Abs(C1Y)%3B%0A%20%20%20%20%20%20if%20(active)%20%7B%0A%20%20%20%20%20%20%20%20m1%20%3D%20this.m_invMassA%3B%0A%20%20%20%20%20%20%20%20m2%20%3D%20this.m_invMassB%3B%0A%20%20%20%20%20%20%20%20i1%20%3D%20this.m_invIA%3B%0A%20%20%20%20%20%20%20%20i2%20%3D%20this.m_invIB%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.x%20%3D%0A%20%20%20%20%20%20%20%20%20%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.y%20%3D%20i1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.z%20%3D%0A%20%20%20%20%20%20%20%20%20%20i1%20*%20this.m_s1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.x%20%3D%20this.m_K.col1.y%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.y%20%3D%20i1%20%2B%20i2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.z%20%3D%20i1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col3.x%20%3D%20this.m_K.col1.z%3B%0A%20%20%20%20%20%20%20%20this.m_K.col3.y%20%3D%20this.m_K.col2.z%3B%0A%20%20%20%20%20%20%20%20this.m_K.col3.z%20%3D%0A%20%20%20%20%20%20%20%20%20%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_a1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%20*%20this.m_a2%3B%0A%20%20%20%20%20%20%20%20this.m_K.Solve33(impulse%2C%20-C1X%2C%20-C1Y%2C%20-C2)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20m1%20%3D%20this.m_invMassA%3B%0A%20%20%20%20%20%20%20%20m2%20%3D%20this.m_invMassB%3B%0A%20%20%20%20%20%20%20%20i1%20%3D%20this.m_invIA%3B%0A%20%20%20%20%20%20%20%20i2%20%3D%20this.m_invIB%3B%0A%20%20%20%20%20%20%20%20var%20k11%20%3D%0A%20%20%20%20%20%20%20%20%20%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20var%20k12%20%3D%20i1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%3B%0A%20%20%20%20%20%20%20%20var%20k22%20%3D%20i1%20%2B%20i2%3B%0A%20%20%20%20%20%20%20%20this.m_K.col1.Set(k11%2C%20k12%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20this.m_K.col2.Set(k12%2C%20k22%2C%200.0)%3B%0A%20%20%20%20%20%20%20%20var%20impulse1%20%3D%20this.m_K.Solve22(new%20b2Vec2()%2C%20-C1X%2C%20-C1Y)%3B%0A%20%20%20%20%20%20%20%20impulse.x%20%3D%20impulse1.x%3B%0A%20%20%20%20%20%20%20%20impulse.y%20%3D%20impulse1.y%3B%0A%20%20%20%20%20%20%20%20impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20PX%20%3D%20impulse.x%20*%20this.m_perp.x%20%2B%20impulse.z%20*%20this.m_axis.x%3B%0A%20%20%20%20%20%20var%20PY%20%3D%20impulse.x%20*%20this.m_perp.y%20%2B%20impulse.z%20*%20this.m_axis.y%3B%0A%20%20%20%20%20%20var%20L1%20%3D%20impulse.x%20*%20this.m_s1%20%2B%20impulse.y%20%2B%20impulse.z%20*%20this.m_a1%3B%0A%20%20%20%20%20%20var%20L2%20%3D%20impulse.x%20*%20this.m_s2%20%2B%20impulse.y%20%2B%20impulse.z%20*%20this.m_a2%3B%0A%20%20%20%20%20%20c1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%20%20%20%20%20%20c1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%20%20%20%20%20%20a1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%20%20%20%20%20%20c2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%20%20%20%20%20%20c2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%20%20%20%20%20%20a2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%20%20%20%20%20%20bA.m_sweep.a%20%3D%20a1%3B%0A%20%20%20%20%20%20bB.m_sweep.a%20%3D%20a2%3B%0A%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20linearError%20%3C%3D%20b2Settings.b2_linearSlop%20%26%26%0A%20%20%20%20%20%20%20%20angularError%20%3C%3D%20b2Settings.b2_angularSlop%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2PrismaticJointDef%2C%20Box2D.Dynamics.Joints.b2JointDef)%3B%0A%20%20%20%20b2PrismaticJointDef.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2PrismaticJointDef.b2PrismaticJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localAxisA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJointDef.prototype.b2PrismaticJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_prismaticJoint%3B%0A%20%20%20%20%20%20this.localAxisA.Set(1.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.referenceAngle%20%3D%200.0%3B%0A%20%20%20%20%20%20this.enableLimit%20%3D%20false%3B%0A%20%20%20%20%20%20this.lowerTranslation%20%3D%200.0%3B%0A%20%20%20%20%20%20this.upperTranslation%20%3D%200.0%3B%0A%20%20%20%20%20%20this.enableMotor%20%3D%20false%3B%0A%20%20%20%20%20%20this.maxMotorForce%20%3D%200.0%3B%0A%20%20%20%20%20%20this.motorSpeed%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PrismaticJointDef.prototype.Initialize%20%3D%20function%20(bA%2C%20bB%2C%20anchor%2C%20axis)%20%7B%0A%20%20%20%20%20%20this.bodyA%20%3D%20bA%3B%0A%20%20%20%20%20%20this.bodyB%20%3D%20bB%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20this.bodyA.GetLocalPoint(anchor)%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20this.bodyB.GetLocalPoint(anchor)%3B%0A%20%20%20%20%20%20this.localAxisA%20%3D%20this.bodyA.GetLocalVector(axis)%3B%0A%20%20%20%20%20%20this.referenceAngle%20%3D%20this.bodyB.GetAngle()%20-%20this.bodyA.GetAngle()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2PulleyJoint%2C%20Box2D.Dynamics.Joints.b2Joint)%3B%0A%20%20%20%20b2PulleyJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2PulleyJoint.b2PulleyJoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.m_groundAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_groundAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_u1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_u2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.GetAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.GetAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.GetReactionForce%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20inv_dt%20*%20this.m_impulse%20*%20this.m_u2.x%2C%0A%20%20%20%20%20%20%20%20inv_dt%20*%20this.m_impulse%20*%20this.m_u2.y%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.GetReactionTorque%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.GetGroundAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20a%20%3D%20this.m_ground.m_xf.position.Copy()%3B%0A%20%20%20%20%20%20a.Add(this.m_groundAnchor1)%3B%0A%20%20%20%20%20%20return%20a%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.GetGroundAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20a%20%3D%20this.m_ground.m_xf.position.Copy()%3B%0A%20%20%20%20%20%20a.Add(this.m_groundAnchor2)%3B%0A%20%20%20%20%20%20return%20a%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.GetLength1%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20p%20%3D%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%20%20var%20sX%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor1.x%3B%0A%20%20%20%20%20%20var%20sY%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor1.y%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20p.x%20-%20sX%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20p.y%20-%20sY%3B%0A%20%20%20%20%20%20return%20Math.sqrt(dX%20*%20dX%20%2B%20dY%20*%20dY)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.GetLength2%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20var%20p%20%3D%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%20%20var%20sX%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor2.x%3B%0A%20%20%20%20%20%20var%20sY%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor2.y%3B%0A%20%20%20%20%20%20var%20dX%20%3D%20p.x%20-%20sX%3B%0A%20%20%20%20%20%20var%20dY%20%3D%20p.y%20-%20sY%3B%0A%20%20%20%20%20%20return%20Math.sqrt(dX%20*%20dX%20%2B%20dY%20*%20dY)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.GetRatio%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_ratio%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.b2PulleyJoint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20tY%20%3D%200%3B%0A%20%20%20%20%20%20this.m_ground%20%3D%20this.m_bodyA.m_world.m_groundBody%3B%0A%20%20%20%20%20%20this.m_groundAnchor1.x%20%3D%0A%20%20%20%20%20%20%20%20def.groundAnchorA.x%20-%20this.m_ground.m_xf.position.x%3B%0A%20%20%20%20%20%20this.m_groundAnchor1.y%20%3D%0A%20%20%20%20%20%20%20%20def.groundAnchorA.y%20-%20this.m_ground.m_xf.position.y%3B%0A%20%20%20%20%20%20this.m_groundAnchor2.x%20%3D%0A%20%20%20%20%20%20%20%20def.groundAnchorB.x%20-%20this.m_ground.m_xf.position.x%3B%0A%20%20%20%20%20%20this.m_groundAnchor2.y%20%3D%0A%20%20%20%20%20%20%20%20def.groundAnchorB.y%20-%20this.m_ground.m_xf.position.y%3B%0A%20%20%20%20%20%20this.m_localAnchor1.SetV(def.localAnchorA)%3B%0A%20%20%20%20%20%20this.m_localAnchor2.SetV(def.localAnchorB)%3B%0A%20%20%20%20%20%20this.m_ratio%20%3D%20def.ratio%3B%0A%20%20%20%20%20%20this.m_constant%20%3D%20def.lengthA%20%2B%20this.m_ratio%20*%20def.lengthB%3B%0A%20%20%20%20%20%20this.m_maxLength1%20%3D%20b2Math.Min(%0A%20%20%20%20%20%20%20%20def.maxLengthA%2C%0A%20%20%20%20%20%20%20%20this.m_constant%20-%20this.m_ratio%20*%20b2PulleyJoint.b2_minPulleyLength%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.m_maxLength2%20%3D%20b2Math.Min(%0A%20%20%20%20%20%20%20%20def.maxLengthB%2C%0A%20%20%20%20%20%20%20%20(this.m_constant%20-%20b2PulleyJoint.b2_minPulleyLength)%20%2F%20this.m_ratio%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20this.m_impulse%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_limitImpulse1%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_limitImpulse2%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20p1X%20%3D%20bA.m_sweep.c.x%20%2B%20r1X%3B%0A%20%20%20%20%20%20var%20p1Y%20%3D%20bA.m_sweep.c.y%20%2B%20r1Y%3B%0A%20%20%20%20%20%20var%20p2X%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%3B%0A%20%20%20%20%20%20var%20p2Y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%3B%0A%20%20%20%20%20%20var%20s1X%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor1.x%3B%0A%20%20%20%20%20%20var%20s1Y%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor1.y%3B%0A%20%20%20%20%20%20var%20s2X%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor2.x%3B%0A%20%20%20%20%20%20var%20s2Y%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor2.y%3B%0A%20%20%20%20%20%20this.m_u1.Set(p1X%20-%20s1X%2C%20p1Y%20-%20s1Y)%3B%0A%20%20%20%20%20%20this.m_u2.Set(p2X%20-%20s2X%2C%20p2Y%20-%20s2Y)%3B%0A%20%20%20%20%20%20var%20length1%20%3D%20this.m_u1.Length()%3B%0A%20%20%20%20%20%20var%20length2%20%3D%20this.m_u2.Length()%3B%0A%20%20%20%20%20%20if%20(length1%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20this.m_u1.Multiply(1.0%20%2F%20length1)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_u1.SetZero()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(length2%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20this.m_u2.Multiply(1.0%20%2F%20length2)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_u2.SetZero()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20C%20%3D%20this.m_constant%20-%20length1%20-%20this.m_ratio%20*%20length2%3B%0A%20%20%20%20%20%20if%20(C%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20this.m_state%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20this.m_impulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_state%20%3D%20b2Joint.e_atUpperLimit%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(length1%20%3C%20this.m_maxLength1)%20%7B%0A%20%20%20%20%20%20%20%20this.m_limitState1%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20this.m_limitImpulse1%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_limitState1%20%3D%20b2Joint.e_atUpperLimit%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(length2%20%3C%20this.m_maxLength2)%20%7B%0A%20%20%20%20%20%20%20%20this.m_limitState2%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20this.m_limitImpulse2%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_limitState2%20%3D%20b2Joint.e_atUpperLimit%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20var%20cr1u1%20%3D%20r1X%20*%20this.m_u1.y%20-%20r1Y%20*%20this.m_u1.x%3B%0A%20%20%20%20%20%20var%20cr2u2%20%3D%20r2X%20*%20this.m_u2.y%20-%20r2Y%20*%20this.m_u2.x%3B%0A%20%20%20%20%20%20this.m_limitMass1%20%3D%20bA.m_invMass%20%2B%20bA.m_invI%20*%20cr1u1%20*%20cr1u1%3B%0A%20%20%20%20%20%20this.m_limitMass2%20%3D%20bB.m_invMass%20%2B%20bB.m_invI%20*%20cr2u2%20*%20cr2u2%3B%0A%20%20%20%20%20%20this.m_pulleyMass%20%3D%0A%20%20%20%20%20%20%20%20this.m_limitMass1%20%2B%20this.m_ratio%20*%20this.m_ratio%20*%20this.m_limitMass2%3B%0A%20%20%20%20%20%20this.m_limitMass1%20%3D%201.0%20%2F%20this.m_limitMass1%3B%0A%20%20%20%20%20%20this.m_limitMass2%20%3D%201.0%20%2F%20this.m_limitMass2%3B%0A%20%20%20%20%20%20this.m_pulleyMass%20%3D%201.0%20%2F%20this.m_pulleyMass%3B%0A%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_limitImpulse1%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_limitImpulse2%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20var%20P1X%20%3D%20(-this.m_impulse%20-%20this.m_limitImpulse1)%20*%20this.m_u1.x%3B%0A%20%20%20%20%20%20%20%20var%20P1Y%20%3D%20(-this.m_impulse%20-%20this.m_limitImpulse1)%20*%20this.m_u1.y%3B%0A%20%20%20%20%20%20%20%20var%20P2X%20%3D%0A%20%20%20%20%20%20%20%20%20%20(-this.m_ratio%20*%20this.m_impulse%20-%20this.m_limitImpulse2)%20*%20this.m_u2.x%3B%0A%20%20%20%20%20%20%20%20var%20P2Y%20%3D%0A%20%20%20%20%20%20%20%20%20%20(-this.m_ratio%20*%20this.m_impulse%20-%20this.m_limitImpulse2)%20*%20this.m_u2.y%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20%2B%3D%20bA.m_invMass%20*%20P1X%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20%2B%3D%20bA.m_invMass%20*%20P1Y%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20%2B%3D%20bA.m_invI%20*%20(r1X%20*%20P1Y%20-%20r1Y%20*%20P1X)%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20P2X%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20P2Y%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20P2Y%20-%20r2Y%20*%20P2X)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_limitImpulse1%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.m_limitImpulse2%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.SolveVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20var%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20v1X%20%3D%200%3B%0A%20%20%20%20%20%20var%20v1Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20v2X%20%3D%200%3B%0A%20%20%20%20%20%20var%20v2Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20P1X%20%3D%200%3B%0A%20%20%20%20%20%20var%20P1Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20P2X%20%3D%200%3B%0A%20%20%20%20%20%20var%20P2Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20Cdot%20%3D%200%3B%0A%20%20%20%20%20%20var%20impulse%20%3D%200%3B%0A%20%20%20%20%20%20var%20oldImpulse%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_state%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20v1X%20%3D%20bA.m_linearVelocity.x%20%2B%20-bA.m_angularVelocity%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20v1Y%20%3D%20bA.m_linearVelocity.y%20%2B%20bA.m_angularVelocity%20*%20r1X%3B%0A%20%20%20%20%20%20%20%20v2X%20%3D%20bB.m_linearVelocity.x%20%2B%20-bB.m_angularVelocity%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20v2Y%20%3D%20bB.m_linearVelocity.y%20%2B%20bB.m_angularVelocity%20*%20r2X%3B%0A%20%20%20%20%20%20%20%20Cdot%20%3D%0A%20%20%20%20%20%20%20%20%20%20-(this.m_u1.x%20*%20v1X%20%2B%20this.m_u1.y%20*%20v1Y)%20-%0A%20%20%20%20%20%20%20%20%20%20this.m_ratio%20*%20(this.m_u2.x%20*%20v2X%20%2B%20this.m_u2.y%20*%20v2Y)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_pulleyMass%20*%20-Cdot%3B%0A%20%20%20%20%20%20%20%20oldImpulse%20%3D%20this.m_impulse%3B%0A%20%20%20%20%20%20%20%20this.m_impulse%20%3D%20b2Math.Max(0.0%2C%20this.m_impulse%20%2B%20impulse)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_impulse%20-%20oldImpulse%3B%0A%20%20%20%20%20%20%20%20P1X%20%3D%20-impulse%20*%20this.m_u1.x%3B%0A%20%20%20%20%20%20%20%20P1Y%20%3D%20-impulse%20*%20this.m_u1.y%3B%0A%20%20%20%20%20%20%20%20P2X%20%3D%20-this.m_ratio%20*%20impulse%20*%20this.m_u2.x%3B%0A%20%20%20%20%20%20%20%20P2Y%20%3D%20-this.m_ratio%20*%20impulse%20*%20this.m_u2.y%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20%2B%3D%20bA.m_invMass%20*%20P1X%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20%2B%3D%20bA.m_invMass%20*%20P1Y%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20%2B%3D%20bA.m_invI%20*%20(r1X%20*%20P1Y%20-%20r1Y%20*%20P1X)%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20P2X%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20P2Y%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20P2Y%20-%20r2Y%20*%20P2X)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_limitState1%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20v1X%20%3D%20bA.m_linearVelocity.x%20%2B%20-bA.m_angularVelocity%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20v1Y%20%3D%20bA.m_linearVelocity.y%20%2B%20bA.m_angularVelocity%20*%20r1X%3B%0A%20%20%20%20%20%20%20%20Cdot%20%3D%20-(this.m_u1.x%20*%20v1X%20%2B%20this.m_u1.y%20*%20v1Y)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20-this.m_limitMass1%20*%20Cdot%3B%0A%20%20%20%20%20%20%20%20oldImpulse%20%3D%20this.m_limitImpulse1%3B%0A%20%20%20%20%20%20%20%20this.m_limitImpulse1%20%3D%20b2Math.Max(0.0%2C%20this.m_limitImpulse1%20%2B%20impulse)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_limitImpulse1%20-%20oldImpulse%3B%0A%20%20%20%20%20%20%20%20P1X%20%3D%20-impulse%20*%20this.m_u1.x%3B%0A%20%20%20%20%20%20%20%20P1Y%20%3D%20-impulse%20*%20this.m_u1.y%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20%2B%3D%20bA.m_invMass%20*%20P1X%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20%2B%3D%20bA.m_invMass%20*%20P1Y%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20%2B%3D%20bA.m_invI%20*%20(r1X%20*%20P1Y%20-%20r1Y%20*%20P1X)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_limitState2%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20v2X%20%3D%20bB.m_linearVelocity.x%20%2B%20-bB.m_angularVelocity%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20v2Y%20%3D%20bB.m_linearVelocity.y%20%2B%20bB.m_angularVelocity%20*%20r2X%3B%0A%20%20%20%20%20%20%20%20Cdot%20%3D%20-(this.m_u2.x%20*%20v2X%20%2B%20this.m_u2.y%20*%20v2Y)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20-this.m_limitMass2%20*%20Cdot%3B%0A%20%20%20%20%20%20%20%20oldImpulse%20%3D%20this.m_limitImpulse2%3B%0A%20%20%20%20%20%20%20%20this.m_limitImpulse2%20%3D%20b2Math.Max(0.0%2C%20this.m_limitImpulse2%20%2B%20impulse)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_limitImpulse2%20-%20oldImpulse%3B%0A%20%20%20%20%20%20%20%20P2X%20%3D%20-impulse%20*%20this.m_u2.x%3B%0A%20%20%20%20%20%20%20%20P2Y%20%3D%20-impulse%20*%20this.m_u2.y%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20P2X%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20P2Y%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20P2Y%20-%20r2Y%20*%20P2X)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJoint.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20s1X%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor1.x%3B%0A%20%20%20%20%20%20var%20s1Y%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor1.y%3B%0A%20%20%20%20%20%20var%20s2X%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor2.x%3B%0A%20%20%20%20%20%20var%20s2Y%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor2.y%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%200%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%200%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20p1X%20%3D%200%3B%0A%20%20%20%20%20%20var%20p1Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20p2X%20%3D%200%3B%0A%20%20%20%20%20%20var%20p2Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20length1%20%3D%200%3B%0A%20%20%20%20%20%20var%20length2%20%3D%200%3B%0A%20%20%20%20%20%20var%20C%20%3D%200%3B%0A%20%20%20%20%20%20var%20impulse%20%3D%200%3B%0A%20%20%20%20%20%20var%20oldImpulse%20%3D%200%3B%0A%20%20%20%20%20%20var%20oldLimitPositionImpulse%20%3D%200%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20linearError%20%3D%200.0%3B%0A%20%20%20%20%20%20if%20(this.m_state%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20p1X%20%3D%20bA.m_sweep.c.x%20%2B%20r1X%3B%0A%20%20%20%20%20%20%20%20p1Y%20%3D%20bA.m_sweep.c.y%20%2B%20r1Y%3B%0A%20%20%20%20%20%20%20%20p2X%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%3B%0A%20%20%20%20%20%20%20%20p2Y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%3B%0A%20%20%20%20%20%20%20%20this.m_u1.Set(p1X%20-%20s1X%2C%20p1Y%20-%20s1Y)%3B%0A%20%20%20%20%20%20%20%20this.m_u2.Set(p2X%20-%20s2X%2C%20p2Y%20-%20s2Y)%3B%0A%20%20%20%20%20%20%20%20length1%20%3D%20this.m_u1.Length()%3B%0A%20%20%20%20%20%20%20%20length2%20%3D%20this.m_u2.Length()%3B%0A%20%20%20%20%20%20%20%20if%20(length1%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u1.Multiply(1.0%20%2F%20length1)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u1.SetZero()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(length2%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u2.Multiply(1.0%20%2F%20length2)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u2.SetZero()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20C%20%3D%20this.m_constant%20-%20length1%20-%20this.m_ratio%20*%20length2%3B%0A%20%20%20%20%20%20%20%20linearError%20%3D%20b2Math.Max(linearError%2C%20-C)%3B%0A%20%20%20%20%20%20%20%20C%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20C%20%2B%20b2Settings.b2_linearSlop%2C%0A%20%20%20%20%20%20%20%20%20%20-b2Settings.b2_maxLinearCorrection%2C%0A%20%20%20%20%20%20%20%20%20%200.0%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20-this.m_pulleyMass%20*%20C%3B%0A%20%20%20%20%20%20%20%20p1X%20%3D%20-impulse%20*%20this.m_u1.x%3B%0A%20%20%20%20%20%20%20%20p1Y%20%3D%20-impulse%20*%20this.m_u1.y%3B%0A%20%20%20%20%20%20%20%20p2X%20%3D%20-this.m_ratio%20*%20impulse%20*%20this.m_u2.x%3B%0A%20%20%20%20%20%20%20%20p2Y%20%3D%20-this.m_ratio%20*%20impulse%20*%20this.m_u2.y%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.c.x%20%2B%3D%20bA.m_invMass%20*%20p1X%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.c.y%20%2B%3D%20bA.m_invMass%20*%20p1Y%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.a%20%2B%3D%20bA.m_invI%20*%20(r1X%20*%20p1Y%20-%20r1Y%20*%20p1X)%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.c.x%20%2B%3D%20bB.m_invMass%20*%20p2X%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.c.y%20%2B%3D%20bB.m_invMass%20*%20p2Y%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20p2Y%20-%20r2Y%20*%20p2X)%3B%0A%20%20%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_limitState1%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20p1X%20%3D%20bA.m_sweep.c.x%20%2B%20r1X%3B%0A%20%20%20%20%20%20%20%20p1Y%20%3D%20bA.m_sweep.c.y%20%2B%20r1Y%3B%0A%20%20%20%20%20%20%20%20this.m_u1.Set(p1X%20-%20s1X%2C%20p1Y%20-%20s1Y)%3B%0A%20%20%20%20%20%20%20%20length1%20%3D%20this.m_u1.Length()%3B%0A%20%20%20%20%20%20%20%20if%20(length1%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u1.x%20*%3D%201.0%20%2F%20length1%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_u1.y%20*%3D%201.0%20%2F%20length1%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u1.SetZero()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20C%20%3D%20this.m_maxLength1%20-%20length1%3B%0A%20%20%20%20%20%20%20%20linearError%20%3D%20b2Math.Max(linearError%2C%20-C)%3B%0A%20%20%20%20%20%20%20%20C%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20C%20%2B%20b2Settings.b2_linearSlop%2C%0A%20%20%20%20%20%20%20%20%20%20-b2Settings.b2_maxLinearCorrection%2C%0A%20%20%20%20%20%20%20%20%20%200.0%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20-this.m_limitMass1%20*%20C%3B%0A%20%20%20%20%20%20%20%20p1X%20%3D%20-impulse%20*%20this.m_u1.x%3B%0A%20%20%20%20%20%20%20%20p1Y%20%3D%20-impulse%20*%20this.m_u1.y%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.c.x%20%2B%3D%20bA.m_invMass%20*%20p1X%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.c.y%20%2B%3D%20bA.m_invMass%20*%20p1Y%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.a%20%2B%3D%20bA.m_invI%20*%20(r1X%20*%20p1Y%20-%20r1Y%20*%20p1X)%3B%0A%20%20%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_limitState2%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20p2X%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%3B%0A%20%20%20%20%20%20%20%20p2Y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%3B%0A%20%20%20%20%20%20%20%20this.m_u2.Set(p2X%20-%20s2X%2C%20p2Y%20-%20s2Y)%3B%0A%20%20%20%20%20%20%20%20length2%20%3D%20this.m_u2.Length()%3B%0A%20%20%20%20%20%20%20%20if%20(length2%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u2.x%20*%3D%201.0%20%2F%20length2%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_u2.y%20*%3D%201.0%20%2F%20length2%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_u2.SetZero()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20C%20%3D%20this.m_maxLength2%20-%20length2%3B%0A%20%20%20%20%20%20%20%20linearError%20%3D%20b2Math.Max(linearError%2C%20-C)%3B%0A%20%20%20%20%20%20%20%20C%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20C%20%2B%20b2Settings.b2_linearSlop%2C%0A%20%20%20%20%20%20%20%20%20%20-b2Settings.b2_maxLinearCorrection%2C%0A%20%20%20%20%20%20%20%20%20%200.0%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20-this.m_limitMass2%20*%20C%3B%0A%20%20%20%20%20%20%20%20p2X%20%3D%20-impulse%20*%20this.m_u2.x%3B%0A%20%20%20%20%20%20%20%20p2Y%20%3D%20-impulse%20*%20this.m_u2.y%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.c.x%20%2B%3D%20bB.m_invMass%20*%20p2X%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.c.y%20%2B%3D%20bB.m_invMass%20*%20p2Y%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20p2Y%20-%20r2Y%20*%20p2X)%3B%0A%20%20%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20linearError%20%3C%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2PulleyJoint.b2_minPulleyLength%20%3D%202.0%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Box2D.inherit(b2PulleyJointDef%2C%20Box2D.Dynamics.Joints.b2JointDef)%3B%0A%20%20%20%20b2PulleyJointDef.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2PulleyJointDef.b2PulleyJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.groundAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.groundAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJointDef.prototype.b2PulleyJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_pulleyJoint%3B%0A%20%20%20%20%20%20this.groundAnchorA.Set(-1.0%2C%201.0)%3B%0A%20%20%20%20%20%20this.groundAnchorB.Set(1.0%2C%201.0)%3B%0A%20%20%20%20%20%20this.localAnchorA.Set(-1.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.localAnchorB.Set(1.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.lengthA%20%3D%200.0%3B%0A%20%20%20%20%20%20this.maxLengthA%20%3D%200.0%3B%0A%20%20%20%20%20%20this.lengthB%20%3D%200.0%3B%0A%20%20%20%20%20%20this.maxLengthB%20%3D%200.0%3B%0A%20%20%20%20%20%20this.ratio%20%3D%201.0%3B%0A%20%20%20%20%20%20this.collideConnected%20%3D%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2PulleyJointDef.prototype.Initialize%20%3D%20function%20(%0A%20%20%20%20%20%20bA%2C%0A%20%20%20%20%20%20bB%2C%0A%20%20%20%20%20%20gaA%2C%0A%20%20%20%20%20%20gaB%2C%0A%20%20%20%20%20%20anchorA%2C%0A%20%20%20%20%20%20anchorB%2C%0A%20%20%20%20%20%20r%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(r%20%3D%3D%3D%20undefined)%20r%20%3D%200%3B%0A%20%20%20%20%20%20this.bodyA%20%3D%20bA%3B%0A%20%20%20%20%20%20this.bodyB%20%3D%20bB%3B%0A%20%20%20%20%20%20this.groundAnchorA.SetV(gaA)%3B%0A%20%20%20%20%20%20this.groundAnchorB.SetV(gaB)%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20this.bodyA.GetLocalPoint(anchorA)%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20this.bodyB.GetLocalPoint(anchorB)%3B%0A%20%20%20%20%20%20var%20d1X%20%3D%20anchorA.x%20-%20gaA.x%3B%0A%20%20%20%20%20%20var%20d1Y%20%3D%20anchorA.y%20-%20gaA.y%3B%0A%20%20%20%20%20%20this.lengthA%20%3D%20Math.sqrt(d1X%20*%20d1X%20%2B%20d1Y%20*%20d1Y)%3B%0A%20%20%20%20%20%20var%20d2X%20%3D%20anchorB.x%20-%20gaB.x%3B%0A%20%20%20%20%20%20var%20d2Y%20%3D%20anchorB.y%20-%20gaB.y%3B%0A%20%20%20%20%20%20this.lengthB%20%3D%20Math.sqrt(d2X%20*%20d2X%20%2B%20d2Y%20*%20d2Y)%3B%0A%20%20%20%20%20%20this.ratio%20%3D%20r%3B%0A%20%20%20%20%20%20var%20C%20%3D%20this.lengthA%20%2B%20this.ratio%20*%20this.lengthB%3B%0A%20%20%20%20%20%20this.maxLengthA%20%3D%20C%20-%20this.ratio%20*%20b2PulleyJoint.b2_minPulleyLength%3B%0A%20%20%20%20%20%20this.maxLengthB%20%3D%20(C%20-%20b2PulleyJoint.b2_minPulleyLength)%20%2F%20this.ratio%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2RevoluteJoint%2C%20Box2D.Dynamics.Joints.b2Joint)%3B%0A%20%20%20%20b2RevoluteJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2RevoluteJoint.b2RevoluteJoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.K%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.K1%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.K2%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.K3%20%3D%20new%20b2Mat22()%3B%0A%20%20%20%20%20%20this.impulse3%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20this.impulse2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.reduced%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_impulse%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20this.m_mass%20%3D%20new%20b2Mat33()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.GetAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.GetAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.GetReactionForce%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(inv_dt%20*%20this.m_impulse.x%2C%20inv_dt%20*%20this.m_impulse.y)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.GetReactionTorque%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20inv_dt%20*%20this.m_impulse.z%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.GetJointAngle%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20this.m_bodyB.m_sweep.a%20-%20this.m_bodyA.m_sweep.a%20-%20this.m_referenceAngle%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.GetJointSpeed%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB.m_angularVelocity%20-%20this.m_bodyA.m_angularVelocity%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.IsLimitEnabled%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_enableLimit%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.EnableLimit%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20this.m_enableLimit%20%3D%20flag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.GetLowerLimit%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_lowerAngle%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.GetUpperLimit%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_upperAngle%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.SetLimits%20%3D%20function%20(lower%2C%20upper)%20%7B%0A%20%20%20%20%20%20if%20(lower%20%3D%3D%3D%20undefined)%20lower%20%3D%200%3B%0A%20%20%20%20%20%20if%20(upper%20%3D%3D%3D%20undefined)%20upper%20%3D%200%3B%0A%20%20%20%20%20%20this.m_lowerAngle%20%3D%20lower%3B%0A%20%20%20%20%20%20this.m_upperAngle%20%3D%20upper%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.IsMotorEnabled%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20return%20this.m_enableMotor%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.EnableMotor%20%3D%20function%20(flag)%20%7B%0A%20%20%20%20%20%20this.m_enableMotor%20%3D%20flag%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.SetMotorSpeed%20%3D%20function%20(speed)%20%7B%0A%20%20%20%20%20%20if%20(speed%20%3D%3D%3D%20undefined)%20speed%20%3D%200%3B%0A%20%20%20%20%20%20this.m_bodyA.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_bodyB.SetAwake(true)%3B%0A%20%20%20%20%20%20this.m_motorSpeed%20%3D%20speed%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.GetMotorSpeed%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_motorSpeed%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.SetMaxMotorTorque%20%3D%20function%20(torque)%20%7B%0A%20%20%20%20%20%20if%20(torque%20%3D%3D%3D%20undefined)%20torque%20%3D%200%3B%0A%20%20%20%20%20%20this.m_maxMotorTorque%20%3D%20torque%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.GetMotorTorque%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_maxMotorTorque%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.b2RevoluteJoint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20this.m_localAnchor1.SetV(def.localAnchorA)%3B%0A%20%20%20%20%20%20this.m_localAnchor2.SetV(def.localAnchorB)%3B%0A%20%20%20%20%20%20this.m_referenceAngle%20%3D%20def.referenceAngle%3B%0A%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20this.m_lowerAngle%20%3D%20def.lowerAngle%3B%0A%20%20%20%20%20%20this.m_upperAngle%20%3D%20def.upperAngle%3B%0A%20%20%20%20%20%20this.m_maxMotorTorque%20%3D%20def.maxMotorTorque%3B%0A%20%20%20%20%20%20this.m_motorSpeed%20%3D%20def.motorSpeed%3B%0A%20%20%20%20%20%20this.m_enableLimit%20%3D%20def.enableLimit%3B%0A%20%20%20%20%20%20this.m_enableMotor%20%3D%20def.enableMotor%3B%0A%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_enableMotor%20%7C%7C%20this.m_enableLimit)%20%7B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20m1%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20var%20m2%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20var%20i1%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20var%20i2%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20this.m_mass.col1.x%20%3D%20m1%20%2B%20m2%20%2B%20r1Y%20*%20r1Y%20*%20i1%20%2B%20r2Y%20*%20r2Y%20*%20i2%3B%0A%20%20%20%20%20%20this.m_mass.col2.x%20%3D%20-r1Y%20*%20r1X%20*%20i1%20-%20r2Y%20*%20r2X%20*%20i2%3B%0A%20%20%20%20%20%20this.m_mass.col3.x%20%3D%20-r1Y%20*%20i1%20-%20r2Y%20*%20i2%3B%0A%20%20%20%20%20%20this.m_mass.col1.y%20%3D%20this.m_mass.col2.x%3B%0A%20%20%20%20%20%20this.m_mass.col2.y%20%3D%20m1%20%2B%20m2%20%2B%20r1X%20*%20r1X%20*%20i1%20%2B%20r2X%20*%20r2X%20*%20i2%3B%0A%20%20%20%20%20%20this.m_mass.col3.y%20%3D%20r1X%20*%20i1%20%2B%20r2X%20*%20i2%3B%0A%20%20%20%20%20%20this.m_mass.col1.z%20%3D%20this.m_mass.col3.x%3B%0A%20%20%20%20%20%20this.m_mass.col2.z%20%3D%20this.m_mass.col3.y%3B%0A%20%20%20%20%20%20this.m_mass.col3.z%20%3D%20i1%20%2B%20i2%3B%0A%20%20%20%20%20%20this.m_motorMass%20%3D%201.0%20%2F%20(i1%20%2B%20i2)%3B%0A%20%20%20%20%20%20if%20(this.m_enableMotor%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_enableLimit)%20%7B%0A%20%20%20%20%20%20%20%20var%20jointAngle%20%3D%20bB.m_sweep.a%20-%20bA.m_sweep.a%20-%20this.m_referenceAngle%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20b2Math.Abs(this.m_upperAngle%20-%20this.m_lowerAngle)%20%3C%0A%20%20%20%20%20%20%20%20%20%202.0%20*%20b2Settings.b2_angularSlop%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_equalLimits%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(jointAngle%20%3C%3D%20this.m_lowerAngle)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20!%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_atLowerLimit%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(jointAngle%20%3E%3D%20this.m_upperAngle)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.m_limitState%20!%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_atUpperLimit%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse.x%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.y%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20var%20PX%20%3D%20this.m_impulse.x%3B%0A%20%20%20%20%20%20%20%20var%20PY%20%3D%20this.m_impulse.y%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20-%3D%20m1%20*%20PX%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20-%3D%20m1%20*%20PY%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20-%3D%0A%20%20%20%20%20%20%20%20%20%20i1%20*%20(r1X%20*%20PY%20-%20r1Y%20*%20PX%20%2B%20this.m_motorImpulse%20%2B%20this.m_impulse.z)%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20m2%20*%20PX%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20m2%20*%20PY%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20i2%20*%20(r2X%20*%20PY%20-%20r2Y%20*%20PX%20%2B%20this.m_motorImpulse%20%2B%20this.m_impulse.z)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.SolveVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20newImpulse%20%3D%200%3B%0A%20%20%20%20%20%20var%20r1X%20%3D%200%3B%0A%20%20%20%20%20%20var%20r1Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20r2X%20%3D%200%3B%0A%20%20%20%20%20%20var%20r2Y%20%3D%200%3B%0A%20%20%20%20%20%20var%20v1%20%3D%20bA.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20w1%20%3D%20bA.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20v2%20%3D%20bB.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20w2%20%3D%20bB.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20m1%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20var%20m2%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20var%20i1%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20var%20i2%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20if%20(this.m_enableMotor%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_equalLimits)%20%7B%0A%20%20%20%20%20%20%20%20var%20Cdot%20%3D%20w2%20-%20w1%20-%20this.m_motorSpeed%3B%0A%20%20%20%20%20%20%20%20var%20impulse%20%3D%20this.m_motorMass%20*%20-Cdot%3B%0A%20%20%20%20%20%20%20%20var%20oldImpulse%20%3D%20this.m_motorImpulse%3B%0A%20%20%20%20%20%20%20%20var%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxMotorTorque%3B%0A%20%20%20%20%20%20%20%20this.m_motorImpulse%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20this.m_motorImpulse%20%2B%20impulse%2C%0A%20%20%20%20%20%20%20%20%20%20-maxImpulse%2C%0A%20%20%20%20%20%20%20%20%20%20maxImpulse%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20impulse%20%3D%20this.m_motorImpulse%20-%20oldImpulse%3B%0A%20%20%20%20%20%20%20%20w1%20-%3D%20i1%20*%20impulse%3B%0A%20%20%20%20%20%20%20%20w2%20%2B%3D%20i2%20*%20impulse%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(this.m_enableLimit%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_inactiveLimit)%20%7B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20var%20Cdot1X%20%3D%20v2.x%20%2B%20-w2%20*%20r2Y%20-%20v1.x%20-%20-w1%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20var%20Cdot1Y%20%3D%20v2.y%20%2B%20w2%20*%20r2X%20-%20v1.y%20-%20w1%20*%20r1X%3B%0A%20%20%20%20%20%20%20%20var%20Cdot2%20%3D%20w2%20-%20w1%3B%0A%20%20%20%20%20%20%20%20this.m_mass.Solve33(this.impulse3%2C%20-Cdot1X%2C%20-Cdot1Y%2C%20-Cdot2)%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_equalLimits)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.m_impulse.Add(this.impulse3)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20newImpulse%20%3D%20this.m_impulse.z%20%2B%20this.impulse3.z%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(newImpulse%20%3C%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_mass.Solve22(this.reduced%2C%20-Cdot1X%2C%20-Cdot1Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.impulse3.x%20%3D%20this.reduced.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.impulse3.y%20%3D%20this.reduced.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.impulse3.z%20%3D%20-this.m_impulse.z%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20%2B%3D%20this.reduced.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%2B%3D%20this.reduced.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20newImpulse%20%3D%20this.m_impulse.z%20%2B%20this.impulse3.z%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(newImpulse%20%3E%200.0)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_mass.Solve22(this.reduced%2C%20-Cdot1X%2C%20-Cdot1Y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.impulse3.x%20%3D%20this.reduced.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.impulse3.y%20%3D%20this.reduced.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.impulse3.z%20%3D%20-this.m_impulse.z%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.x%20%2B%3D%20this.reduced.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.y%20%2B%3D%20this.reduced.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.m_impulse.z%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20v1.x%20-%3D%20m1%20*%20this.impulse3.x%3B%0A%20%20%20%20%20%20%20%20v1.y%20-%3D%20m1%20*%20this.impulse3.y%3B%0A%20%20%20%20%20%20%20%20w1%20-%3D%0A%20%20%20%20%20%20%20%20%20%20i1%20*%0A%20%20%20%20%20%20%20%20%20%20(r1X%20*%20this.impulse3.y%20-%20r1Y%20*%20this.impulse3.x%20%2B%20this.impulse3.z)%3B%0A%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20m2%20*%20this.impulse3.x%3B%0A%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20m2%20*%20this.impulse3.y%3B%0A%20%20%20%20%20%20%20%20w2%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20i2%20*%0A%20%20%20%20%20%20%20%20%20%20(r2X%20*%20this.impulse3.y%20-%20r2Y%20*%20this.impulse3.x%20%2B%20this.impulse3.z)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20var%20CdotX%20%3D%20v2.x%20%2B%20-w2%20*%20r2Y%20-%20v1.x%20-%20-w1%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20var%20CdotY%20%3D%20v2.y%20%2B%20w2%20*%20r2X%20-%20v1.y%20-%20w1%20*%20r1X%3B%0A%20%20%20%20%20%20%20%20this.m_mass.Solve22(this.impulse2%2C%20-CdotX%2C%20-CdotY)%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.x%20%2B%3D%20this.impulse2.x%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.y%20%2B%3D%20this.impulse2.y%3B%0A%20%20%20%20%20%20%20%20v1.x%20-%3D%20m1%20*%20this.impulse2.x%3B%0A%20%20%20%20%20%20%20%20v1.y%20-%3D%20m1%20*%20this.impulse2.y%3B%0A%20%20%20%20%20%20%20%20w1%20-%3D%20i1%20*%20(r1X%20*%20this.impulse2.y%20-%20r1Y%20*%20this.impulse2.x)%3B%0A%20%20%20%20%20%20%20%20v2.x%20%2B%3D%20m2%20*%20this.impulse2.x%3B%0A%20%20%20%20%20%20%20%20v2.y%20%2B%3D%20m2%20*%20this.impulse2.y%3B%0A%20%20%20%20%20%20%20%20w2%20%2B%3D%20i2%20*%20(r2X%20*%20this.impulse2.y%20-%20r2Y%20*%20this.impulse2.x)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20bA.m_linearVelocity.SetV(v1)%3B%0A%20%20%20%20%20%20bA.m_angularVelocity%20%3D%20w1%3B%0A%20%20%20%20%20%20bB.m_linearVelocity.SetV(v2)%3B%0A%20%20%20%20%20%20bB.m_angularVelocity%20%3D%20w2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJoint.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20var%20oldLimitImpulse%20%3D%200%3B%0A%20%20%20%20%20%20var%20C%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20angularError%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20positionError%20%3D%200.0%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20impulseX%20%3D%200%3B%0A%20%20%20%20%20%20var%20impulseY%20%3D%200%3B%0A%20%20%20%20%20%20if%20(this.m_enableLimit%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_inactiveLimit)%20%7B%0A%20%20%20%20%20%20%20%20var%20angle%20%3D%20bB.m_sweep.a%20-%20bA.m_sweep.a%20-%20this.m_referenceAngle%3B%0A%20%20%20%20%20%20%20%20var%20limitImpulse%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_equalLimits)%20%7B%0A%20%20%20%20%20%20%20%20%20%20C%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20angle%20-%20this.m_lowerAngle%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20-b2Settings.b2_maxAngularCorrection%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2_maxAngularCorrection%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20limitImpulse%20%3D%20-this.m_motorMass%20*%20C%3B%0A%20%20%20%20%20%20%20%20%20%20angularError%20%3D%20b2Math.Abs(C)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20C%20%3D%20angle%20-%20this.m_lowerAngle%3B%0A%20%20%20%20%20%20%20%20%20%20angularError%20%3D%20-C%3B%0A%20%20%20%20%20%20%20%20%20%20C%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20C%20%2B%20b2Settings.b2_angularSlop%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20-b2Settings.b2_maxAngularCorrection%2C%0A%20%20%20%20%20%20%20%20%20%20%20%200.0%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20limitImpulse%20%3D%20-this.m_motorMass%20*%20C%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20C%20%3D%20angle%20-%20this.m_upperAngle%3B%0A%20%20%20%20%20%20%20%20%20%20angularError%20%3D%20C%3B%0A%20%20%20%20%20%20%20%20%20%20C%20%3D%20b2Math.Clamp(%0A%20%20%20%20%20%20%20%20%20%20%20%20C%20-%20b2Settings.b2_angularSlop%2C%0A%20%20%20%20%20%20%20%20%20%20%20%200.0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20b2Settings.b2_maxAngularCorrection%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20limitImpulse%20%3D%20-this.m_motorMass%20*%20C%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20bA.m_sweep.a%20-%3D%20bA.m_invI%20*%20limitImpulse%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20limitImpulse%3B%0A%20%20%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20%20%20var%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20var%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20r1Y%20%3D%20tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20r1X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20%20%20var%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20%20%20var%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20r2Y%20%3D%20tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20r2X%20%3D%20tX%3B%0A%20%20%20%20%20%20%20%20var%20CX%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%20%20%20%20%20%20%20%20var%20CY%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%20%20%20%20%20%20%20%20var%20CLengthSquared%20%3D%20CX%20*%20CX%20%2B%20CY%20*%20CY%3B%0A%20%20%20%20%20%20%20%20var%20CLength%20%3D%20Math.sqrt(CLengthSquared)%3B%0A%20%20%20%20%20%20%20%20positionError%20%3D%20CLength%3B%0A%20%20%20%20%20%20%20%20var%20invMass1%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20%20%20var%20invMass2%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20%20%20var%20invI1%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20%20%20var%20invI2%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20%20%20var%20k_allowedStretch%20%3D%2010.0%20*%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%20%20%20%20if%20(CLengthSquared%20%3E%20k_allowedStretch%20*%20k_allowedStretch)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20uX%20%3D%20CX%20%2F%20CLength%3B%0A%20%20%20%20%20%20%20%20%20%20var%20uY%20%3D%20CY%20%2F%20CLength%3B%0A%20%20%20%20%20%20%20%20%20%20var%20k%20%3D%20invMass1%20%2B%20invMass2%3B%0A%20%20%20%20%20%20%20%20%20%20var%20m%20%3D%201.0%20%2F%20k%3B%0A%20%20%20%20%20%20%20%20%20%20impulseX%20%3D%20m%20*%20-CX%3B%0A%20%20%20%20%20%20%20%20%20%20impulseY%20%3D%20m%20*%20-CY%3B%0A%20%20%20%20%20%20%20%20%20%20var%20k_beta%20%3D%200.5%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_sweep.c.x%20-%3D%20k_beta%20*%20invMass1%20*%20impulseX%3B%0A%20%20%20%20%20%20%20%20%20%20bA.m_sweep.c.y%20-%3D%20k_beta%20*%20invMass1%20*%20impulseY%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_sweep.c.x%20%2B%3D%20k_beta%20*%20invMass2%20*%20impulseX%3B%0A%20%20%20%20%20%20%20%20%20%20bB.m_sweep.c.y%20%2B%3D%20k_beta%20*%20invMass2%20*%20impulseY%3B%0A%20%20%20%20%20%20%20%20%20%20CX%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%20%20%20%20%20%20%20%20%20%20CY%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.K1.col1.x%20%3D%20invMass1%20%2B%20invMass2%3B%0A%20%20%20%20%20%20%20%20this.K1.col2.x%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.K1.col1.y%20%3D%200.0%3B%0A%20%20%20%20%20%20%20%20this.K1.col2.y%20%3D%20invMass1%20%2B%20invMass2%3B%0A%20%20%20%20%20%20%20%20this.K2.col1.x%20%3D%20invI1%20*%20r1Y%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20this.K2.col2.x%20%3D%20-invI1%20*%20r1X%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20this.K2.col1.y%20%3D%20-invI1%20*%20r1X%20*%20r1Y%3B%0A%20%20%20%20%20%20%20%20this.K2.col2.y%20%3D%20invI1%20*%20r1X%20*%20r1X%3B%0A%20%20%20%20%20%20%20%20this.K3.col1.x%20%3D%20invI2%20*%20r2Y%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20this.K3.col2.x%20%3D%20-invI2%20*%20r2X%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20this.K3.col1.y%20%3D%20-invI2%20*%20r2X%20*%20r2Y%3B%0A%20%20%20%20%20%20%20%20this.K3.col2.y%20%3D%20invI2%20*%20r2X%20*%20r2X%3B%0A%20%20%20%20%20%20%20%20this.K.SetM(this.K1)%3B%0A%20%20%20%20%20%20%20%20this.K.AddM(this.K2)%3B%0A%20%20%20%20%20%20%20%20this.K.AddM(this.K3)%3B%0A%20%20%20%20%20%20%20%20this.K.Solve(b2RevoluteJoint.tImpulse%2C%20-CX%2C%20-CY)%3B%0A%20%20%20%20%20%20%20%20impulseX%20%3D%20b2RevoluteJoint.tImpulse.x%3B%0A%20%20%20%20%20%20%20%20impulseY%20%3D%20b2RevoluteJoint.tImpulse.y%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.c.x%20-%3D%20bA.m_invMass%20*%20impulseX%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.c.y%20-%3D%20bA.m_invMass%20*%20impulseY%3B%0A%20%20%20%20%20%20%20%20bA.m_sweep.a%20-%3D%20bA.m_invI%20*%20(r1X%20*%20impulseY%20-%20r1Y%20*%20impulseX)%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.c.x%20%2B%3D%20bB.m_invMass%20*%20impulseX%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.c.y%20%2B%3D%20bB.m_invMass%20*%20impulseY%3B%0A%20%20%20%20%20%20%20%20bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20impulseY%20-%20r2Y%20*%20impulseX)%3B%0A%20%20%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20positionError%20%3C%3D%20b2Settings.b2_linearSlop%20%26%26%0A%20%20%20%20%20%20%20%20angularError%20%3C%3D%20b2Settings.b2_angularSlop%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.postDefs.push(function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2RevoluteJoint.tImpulse%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20Box2D.inherit(b2RevoluteJointDef%2C%20Box2D.Dynamics.Joints.b2JointDef)%3B%0A%20%20%20%20b2RevoluteJointDef.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2RevoluteJointDef.b2RevoluteJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJointDef.prototype.b2RevoluteJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_revoluteJoint%3B%0A%20%20%20%20%20%20this.localAnchorA.Set(0.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.localAnchorB.Set(0.0%2C%200.0)%3B%0A%20%20%20%20%20%20this.referenceAngle%20%3D%200.0%3B%0A%20%20%20%20%20%20this.lowerAngle%20%3D%200.0%3B%0A%20%20%20%20%20%20this.upperAngle%20%3D%200.0%3B%0A%20%20%20%20%20%20this.maxMotorTorque%20%3D%200.0%3B%0A%20%20%20%20%20%20this.motorSpeed%20%3D%200.0%3B%0A%20%20%20%20%20%20this.enableLimit%20%3D%20false%3B%0A%20%20%20%20%20%20this.enableMotor%20%3D%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2RevoluteJointDef.prototype.Initialize%20%3D%20function%20(bA%2C%20bB%2C%20anchor)%20%7B%0A%20%20%20%20%20%20this.bodyA%20%3D%20bA%3B%0A%20%20%20%20%20%20this.bodyB%20%3D%20bB%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20this.bodyA.GetLocalPoint(anchor)%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20this.bodyB.GetLocalPoint(anchor)%3B%0A%20%20%20%20%20%20this.referenceAngle%20%3D%20this.bodyB.GetAngle()%20-%20this.bodyA.GetAngle()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2WeldJoint%2C%20Box2D.Dynamics.Joints.b2Joint)%3B%0A%20%20%20%20b2WeldJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%20%20%20%20b2WeldJoint.b2WeldJoint%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.m_localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.m_impulse%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20this.m_mass%20%3D%20new%20b2Mat33()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WeldJoint.prototype.GetAnchorA%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyA.GetWorldPoint(this.m_localAnchorA)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WeldJoint.prototype.GetAnchorB%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_bodyB.GetWorldPoint(this.m_localAnchorB)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WeldJoint.prototype.GetReactionForce%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20new%20b2Vec2(inv_dt%20*%20this.m_impulse.x%2C%20inv_dt%20*%20this.m_impulse.y)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WeldJoint.prototype.GetReactionTorque%20%3D%20function%20(inv_dt)%20%7B%0A%20%20%20%20%20%20if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%20%20%20%20%20%20return%20inv_dt%20*%20this.m_impulse.z%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WeldJoint.prototype.b2WeldJoint%20%3D%20function%20(def)%20%7B%0A%20%20%20%20%20%20this.__super.b2Joint.call(this%2C%20def)%3B%0A%20%20%20%20%20%20this.m_localAnchorA.SetV(def.localAnchorA)%3B%0A%20%20%20%20%20%20this.m_localAnchorB.SetV(def.localAnchorB)%3B%0A%20%20%20%20%20%20this.m_referenceAngle%20%3D%20def.referenceAngle%3B%0A%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20this.m_mass%20%3D%20new%20b2Mat33()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WeldJoint.prototype.InitVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20rAX%20%3D%20this.m_localAnchorA.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rAY%20%3D%20this.m_localAnchorA.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rAX%20%2B%20tMat.col2.x%20*%20rAY%3B%0A%20%20%20%20%20%20rAY%20%3D%20tMat.col1.y%20*%20rAX%20%2B%20tMat.col2.y%20*%20rAY%3B%0A%20%20%20%20%20%20rAX%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20rBX%20%3D%20this.m_localAnchorB.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rBY%20%3D%20this.m_localAnchorB.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rBX%20%2B%20tMat.col2.x%20*%20rBY%3B%0A%20%20%20%20%20%20rBY%20%3D%20tMat.col1.y%20*%20rBX%20%2B%20tMat.col2.y%20*%20rBY%3B%0A%20%20%20%20%20%20rBX%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20mA%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20var%20mB%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20var%20iA%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20var%20iB%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20this.m_mass.col1.x%20%3D%20mA%20%2B%20mB%20%2B%20rAY%20*%20rAY%20*%20iA%20%2B%20rBY%20*%20rBY%20*%20iB%3B%0A%20%20%20%20%20%20this.m_mass.col2.x%20%3D%20-rAY%20*%20rAX%20*%20iA%20-%20rBY%20*%20rBX%20*%20iB%3B%0A%20%20%20%20%20%20this.m_mass.col3.x%20%3D%20-rAY%20*%20iA%20-%20rBY%20*%20iB%3B%0A%20%20%20%20%20%20this.m_mass.col1.y%20%3D%20this.m_mass.col2.x%3B%0A%20%20%20%20%20%20this.m_mass.col2.y%20%3D%20mA%20%2B%20mB%20%2B%20rAX%20*%20rAX%20*%20iA%20%2B%20rBX%20*%20rBX%20*%20iB%3B%0A%20%20%20%20%20%20this.m_mass.col3.y%20%3D%20rAX%20*%20iA%20%2B%20rBX%20*%20iB%3B%0A%20%20%20%20%20%20this.m_mass.col1.z%20%3D%20this.m_mass.col3.x%3B%0A%20%20%20%20%20%20this.m_mass.col2.z%20%3D%20this.m_mass.col3.y%3B%0A%20%20%20%20%20%20this.m_mass.col3.z%20%3D%20iA%20%2B%20iB%3B%0A%20%20%20%20%20%20if%20(step.warmStarting)%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse.x%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.y%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20this.m_impulse.z%20*%3D%20step.dtRatio%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.x%20-%3D%20mA%20*%20this.m_impulse.x%3B%0A%20%20%20%20%20%20%20%20bA.m_linearVelocity.y%20-%3D%20mA%20*%20this.m_impulse.y%3B%0A%20%20%20%20%20%20%20%20bA.m_angularVelocity%20-%3D%0A%20%20%20%20%20%20%20%20%20%20iA%20*%0A%20%20%20%20%20%20%20%20%20%20(rAX%20*%20this.m_impulse.y%20-%20rAY%20*%20this.m_impulse.x%20%2B%20this.m_impulse.z)%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.x%20%2B%3D%20mB%20*%20this.m_impulse.x%3B%0A%20%20%20%20%20%20%20%20bB.m_linearVelocity.y%20%2B%3D%20mB%20*%20this.m_impulse.y%3B%0A%20%20%20%20%20%20%20%20bB.m_angularVelocity%20%2B%3D%0A%20%20%20%20%20%20%20%20%20%20iB%20*%0A%20%20%20%20%20%20%20%20%20%20(rBX%20*%20this.m_impulse.y%20-%20rBY%20*%20this.m_impulse.x%20%2B%20this.m_impulse.z)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20this.m_impulse.SetZero()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WeldJoint.prototype.SolveVelocityConstraints%20%3D%20function%20(step)%20%7B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20var%20vA%20%3D%20bA.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20wA%20%3D%20bA.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20vB%20%3D%20bB.m_linearVelocity%3B%0A%20%20%20%20%20%20var%20wB%20%3D%20bB.m_angularVelocity%3B%0A%20%20%20%20%20%20var%20mA%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20var%20mB%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20var%20iA%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20var%20iB%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20rAX%20%3D%20this.m_localAnchorA.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rAY%20%3D%20this.m_localAnchorA.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rAX%20%2B%20tMat.col2.x%20*%20rAY%3B%0A%20%20%20%20%20%20rAY%20%3D%20tMat.col1.y%20*%20rAX%20%2B%20tMat.col2.y%20*%20rAY%3B%0A%20%20%20%20%20%20rAX%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20rBX%20%3D%20this.m_localAnchorB.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rBY%20%3D%20this.m_localAnchorB.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rBX%20%2B%20tMat.col2.x%20*%20rBY%3B%0A%20%20%20%20%20%20rBY%20%3D%20tMat.col1.y%20*%20rBX%20%2B%20tMat.col2.y%20*%20rBY%3B%0A%20%20%20%20%20%20rBX%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20Cdot1X%20%3D%20vB.x%20-%20wB%20*%20rBY%20-%20vA.x%20%2B%20wA%20*%20rAY%3B%0A%20%20%20%20%20%20var%20Cdot1Y%20%3D%20vB.y%20%2B%20wB%20*%20rBX%20-%20vA.y%20-%20wA%20*%20rAX%3B%0A%20%20%20%20%20%20var%20Cdot2%20%3D%20wB%20-%20wA%3B%0A%20%20%20%20%20%20var%20impulse%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20this.m_mass.Solve33(impulse%2C%20-Cdot1X%2C%20-Cdot1Y%2C%20-Cdot2)%3B%0A%20%20%20%20%20%20this.m_impulse.Add(impulse)%3B%0A%20%20%20%20%20%20vA.x%20-%3D%20mA%20*%20impulse.x%3B%0A%20%20%20%20%20%20vA.y%20-%3D%20mA%20*%20impulse.y%3B%0A%20%20%20%20%20%20wA%20-%3D%20iA%20*%20(rAX%20*%20impulse.y%20-%20rAY%20*%20impulse.x%20%2B%20impulse.z)%3B%0A%20%20%20%20%20%20vB.x%20%2B%3D%20mB%20*%20impulse.x%3B%0A%20%20%20%20%20%20vB.y%20%2B%3D%20mB%20*%20impulse.y%3B%0A%20%20%20%20%20%20wB%20%2B%3D%20iB%20*%20(rBX%20*%20impulse.y%20-%20rBY%20*%20impulse.x%20%2B%20impulse.z)%3B%0A%20%20%20%20%20%20bA.m_angularVelocity%20%3D%20wA%3B%0A%20%20%20%20%20%20bB.m_angularVelocity%20%3D%20wB%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WeldJoint.prototype.SolvePositionConstraints%20%3D%20function%20(baumgarte)%20%7B%0A%20%20%20%20%20%20if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%20%20%20%20%20%20var%20tMat%3B%0A%20%20%20%20%20%20var%20tX%20%3D%200%3B%0A%20%20%20%20%20%20var%20bA%20%3D%20this.m_bodyA%3B%0A%20%20%20%20%20%20var%20bB%20%3D%20this.m_bodyB%3B%0A%20%20%20%20%20%20tMat%20%3D%20bA.m_xf.R%3B%0A%20%20%20%20%20%20var%20rAX%20%3D%20this.m_localAnchorA.x%20-%20bA.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rAY%20%3D%20this.m_localAnchorA.y%20-%20bA.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rAX%20%2B%20tMat.col2.x%20*%20rAY%3B%0A%20%20%20%20%20%20rAY%20%3D%20tMat.col1.y%20*%20rAX%20%2B%20tMat.col2.y%20*%20rAY%3B%0A%20%20%20%20%20%20rAX%20%3D%20tX%3B%0A%20%20%20%20%20%20tMat%20%3D%20bB.m_xf.R%3B%0A%20%20%20%20%20%20var%20rBX%20%3D%20this.m_localAnchorB.x%20-%20bB.m_sweep.localCenter.x%3B%0A%20%20%20%20%20%20var%20rBY%20%3D%20this.m_localAnchorB.y%20-%20bB.m_sweep.localCenter.y%3B%0A%20%20%20%20%20%20tX%20%3D%20tMat.col1.x%20*%20rBX%20%2B%20tMat.col2.x%20*%20rBY%3B%0A%20%20%20%20%20%20rBY%20%3D%20tMat.col1.y%20*%20rBX%20%2B%20tMat.col2.y%20*%20rBY%3B%0A%20%20%20%20%20%20rBX%20%3D%20tX%3B%0A%20%20%20%20%20%20var%20mA%20%3D%20bA.m_invMass%3B%0A%20%20%20%20%20%20var%20mB%20%3D%20bB.m_invMass%3B%0A%20%20%20%20%20%20var%20iA%20%3D%20bA.m_invI%3B%0A%20%20%20%20%20%20var%20iB%20%3D%20bB.m_invI%3B%0A%20%20%20%20%20%20var%20C1X%20%3D%20bB.m_sweep.c.x%20%2B%20rBX%20-%20bA.m_sweep.c.x%20-%20rAX%3B%0A%20%20%20%20%20%20var%20C1Y%20%3D%20bB.m_sweep.c.y%20%2B%20rBY%20-%20bA.m_sweep.c.y%20-%20rAY%3B%0A%20%20%20%20%20%20var%20C2%20%3D%20bB.m_sweep.a%20-%20bA.m_sweep.a%20-%20this.m_referenceAngle%3B%0A%20%20%20%20%20%20var%20k_allowedStretch%20%3D%2010.0%20*%20b2Settings.b2_linearSlop%3B%0A%20%20%20%20%20%20var%20positionError%20%3D%20Math.sqrt(C1X%20*%20C1X%20%2B%20C1Y%20*%20C1Y)%3B%0A%20%20%20%20%20%20var%20angularError%20%3D%20b2Math.Abs(C2)%3B%0A%20%20%20%20%20%20if%20(positionError%20%3E%20k_allowedStretch)%20%7B%0A%20%20%20%20%20%20%20%20iA%20*%3D%201.0%3B%0A%20%20%20%20%20%20%20%20iB%20*%3D%201.0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.m_mass.col1.x%20%3D%20mA%20%2B%20mB%20%2B%20rAY%20*%20rAY%20*%20iA%20%2B%20rBY%20*%20rBY%20*%20iB%3B%0A%20%20%20%20%20%20this.m_mass.col2.x%20%3D%20-rAY%20*%20rAX%20*%20iA%20-%20rBY%20*%20rBX%20*%20iB%3B%0A%20%20%20%20%20%20this.m_mass.col3.x%20%3D%20-rAY%20*%20iA%20-%20rBY%20*%20iB%3B%0A%20%20%20%20%20%20this.m_mass.col1.y%20%3D%20this.m_mass.col2.x%3B%0A%20%20%20%20%20%20this.m_mass.col2.y%20%3D%20mA%20%2B%20mB%20%2B%20rAX%20*%20rAX%20*%20iA%20%2B%20rBX%20*%20rBX%20*%20iB%3B%0A%20%20%20%20%20%20this.m_mass.col3.y%20%3D%20rAX%20*%20iA%20%2B%20rBX%20*%20iB%3B%0A%20%20%20%20%20%20this.m_mass.col1.z%20%3D%20this.m_mass.col3.x%3B%0A%20%20%20%20%20%20this.m_mass.col2.z%20%3D%20this.m_mass.col3.y%3B%0A%20%20%20%20%20%20this.m_mass.col3.z%20%3D%20iA%20%2B%20iB%3B%0A%20%20%20%20%20%20var%20impulse%20%3D%20new%20b2Vec3()%3B%0A%20%20%20%20%20%20this.m_mass.Solve33(impulse%2C%20-C1X%2C%20-C1Y%2C%20-C2)%3B%0A%20%20%20%20%20%20bA.m_sweep.c.x%20-%3D%20mA%20*%20impulse.x%3B%0A%20%20%20%20%20%20bA.m_sweep.c.y%20-%3D%20mA%20*%20impulse.y%3B%0A%20%20%20%20%20%20bA.m_sweep.a%20-%3D%20iA%20*%20(rAX%20*%20impulse.y%20-%20rAY%20*%20impulse.x%20%2B%20impulse.z)%3B%0A%20%20%20%20%20%20bB.m_sweep.c.x%20%2B%3D%20mB%20*%20impulse.x%3B%0A%20%20%20%20%20%20bB.m_sweep.c.y%20%2B%3D%20mB%20*%20impulse.y%3B%0A%20%20%20%20%20%20bB.m_sweep.a%20%2B%3D%20iB%20*%20(rBX%20*%20impulse.y%20-%20rBY%20*%20impulse.x%20%2B%20impulse.z)%3B%0A%20%20%20%20%20%20bA.SynchronizeTransform()%3B%0A%20%20%20%20%20%20bB.SynchronizeTransform()%3B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20positionError%20%3C%3D%20b2Settings.b2_linearSlop%20%26%26%0A%20%20%20%20%20%20%20%20angularError%20%3C%3D%20b2Settings.b2_angularSlop%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20Box2D.inherit(b2WeldJointDef%2C%20Box2D.Dynamics.Joints.b2JointDef)%3B%0A%20%20%20%20b2WeldJointDef.prototype.__super%20%3D%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%20%20%20%20b2WeldJointDef.b2WeldJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%20%20%20%20%20%20this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%20%20this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WeldJointDef.prototype.b2WeldJointDef%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.__super.b2JointDef.call(this)%3B%0A%20%20%20%20%20%20this.type%20%3D%20b2Joint.e_weldJoint%3B%0A%20%20%20%20%20%20this.referenceAngle%20%3D%200.0%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2WeldJointDef.prototype.Initialize%20%3D%20function%20(bA%2C%20bB%2C%20anchor)%20%7B%0A%20%20%20%20%20%20this.bodyA%20%3D%20bA%3B%0A%20%20%20%20%20%20this.bodyB%20%3D%20bB%3B%0A%20%20%20%20%20%20this.localAnchorA.SetV(this.bodyA.GetLocalPoint(anchor))%3B%0A%20%20%20%20%20%20this.localAnchorB.SetV(this.bodyB.GetLocalPoint(anchor))%3B%0A%20%20%20%20%20%20this.referenceAngle%20%3D%20this.bodyB.GetAngle()%20-%20this.bodyA.GetAngle()%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D)()%3B%0A%20%20(function%20()%20%7B%0A%20%20%20%20var%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%3B%0A%20%20%20%20b2DebugDraw.b2DebugDraw%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_drawScale%20%3D%201.0%3B%0A%20%20%20%20%20%20this.m_lineThickness%20%3D%201.0%3B%0A%20%20%20%20%20%20this.m_alpha%20%3D%201.0%3B%0A%20%20%20%20%20%20this.m_fillAlpha%20%3D%201.0%3B%0A%20%20%20%20%20%20this.m_xformScale%20%3D%201.0%3B%0A%20%20%20%20%20%20var%20__this%20%3D%20this%3B%0A%20%20%20%20%20%20%2F%2F%23WORKAROUND%0A%20%20%20%20%20%20this.m_sprite%20%3D%20%7B%0A%20%20%20%20%20%20%20%20graphics%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20clear%3A%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20__this.m_ctx.clearRect(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20__this.m_ctx.canvas.width%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20__this.m_ctx.canvas.height%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype._color%20%3D%20function%20(color%2C%20alpha)%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20%22rgba(%22%20%2B%0A%20%20%20%20%20%20%20%20((color%20%26%200xff0000)%20%3E%3E%2016)%20%2B%0A%20%20%20%20%20%20%20%20%22%2C%22%20%2B%0A%20%20%20%20%20%20%20%20((color%20%26%200xff00)%20%3E%3E%208)%20%2B%0A%20%20%20%20%20%20%20%20%22%2C%22%20%2B%0A%20%20%20%20%20%20%20%20(color%20%26%200xff)%20%2B%0A%20%20%20%20%20%20%20%20%22%2C%22%20%2B%0A%20%20%20%20%20%20%20%20alpha%20%2B%0A%20%20%20%20%20%20%20%20%22)%22%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.b2DebugDraw%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20this.m_drawFlags%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetFlags%20%3D%20function%20(flags)%20%7B%0A%20%20%20%20%20%20if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%20%20%20%20%20%20this.m_drawFlags%20%3D%20flags%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetFlags%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_drawFlags%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.AppendFlags%20%3D%20function%20(flags)%20%7B%0A%20%20%20%20%20%20if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%20%20%20%20%20%20this.m_drawFlags%20%7C%3D%20flags%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.ClearFlags%20%3D%20function%20(flags)%20%7B%0A%20%20%20%20%20%20if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%20%20%20%20%20%20this.m_drawFlags%20%26%3D%20~flags%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetSprite%20%3D%20function%20(sprite)%20%7B%0A%20%20%20%20%20%20this.m_ctx%20%3D%20sprite%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetSprite%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_ctx%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetDrawScale%20%3D%20function%20(drawScale)%20%7B%0A%20%20%20%20%20%20if%20(drawScale%20%3D%3D%3D%20undefined)%20drawScale%20%3D%200%3B%0A%20%20%20%20%20%20this.m_drawScale%20%3D%20drawScale%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetDrawScale%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_drawScale%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetLineThickness%20%3D%20function%20(lineThickness)%20%7B%0A%20%20%20%20%20%20if%20(lineThickness%20%3D%3D%3D%20undefined)%20lineThickness%20%3D%200%3B%0A%20%20%20%20%20%20this.m_lineThickness%20%3D%20lineThickness%3B%0A%20%20%20%20%20%20this.m_ctx.strokeWidth%20%3D%20lineThickness%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetLineThickness%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_lineThickness%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetAlpha%20%3D%20function%20(alpha)%20%7B%0A%20%20%20%20%20%20if%20(alpha%20%3D%3D%3D%20undefined)%20alpha%20%3D%200%3B%0A%20%20%20%20%20%20this.m_alpha%20%3D%20alpha%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetAlpha%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_alpha%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetFillAlpha%20%3D%20function%20(alpha)%20%7B%0A%20%20%20%20%20%20if%20(alpha%20%3D%3D%3D%20undefined)%20alpha%20%3D%200%3B%0A%20%20%20%20%20%20this.m_fillAlpha%20%3D%20alpha%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetFillAlpha%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_fillAlpha%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.SetXFormScale%20%3D%20function%20(xformScale)%20%7B%0A%20%20%20%20%20%20if%20(xformScale%20%3D%3D%3D%20undefined)%20xformScale%20%3D%200%3B%0A%20%20%20%20%20%20this.m_xformScale%20%3D%20xformScale%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.GetXFormScale%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20return%20this.m_xformScale%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawPolygon%20%3D%20function%20(%0A%20%20%20%20%20%20vertices%2C%0A%20%20%20%20%20%20vertexCount%2C%0A%20%20%20%20%20%20color%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(!vertexCount)%20return%3B%0A%20%20%20%20%20%20var%20s%20%3D%20this.m_ctx%3B%0A%20%20%20%20%20%20var%20drawScale%20%3D%20this.m_drawScale%3B%0A%20%20%20%20%20%20s.beginPath()%3B%0A%20%20%20%20%20%20s.strokeStyle%20%3D%20this._color(color.color%2C%20this.m_alpha)%3B%0A%20%20%20%20%20%20s.moveTo(vertices%5B0%5D.x%20*%20drawScale%2C%20vertices%5B0%5D.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%201%3B%20i%20%3C%20vertexCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20s.lineTo(vertices%5Bi%5D.x%20*%20drawScale%2C%20vertices%5Bi%5D.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20s.lineTo(vertices%5B0%5D.x%20*%20drawScale%2C%20vertices%5B0%5D.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20s.closePath()%3B%0A%20%20%20%20%20%20s.stroke()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawSolidPolygon%20%3D%20function%20(%0A%20%20%20%20%20%20vertices%2C%0A%20%20%20%20%20%20vertexCount%2C%0A%20%20%20%20%20%20color%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(!vertexCount)%20return%3B%0A%20%20%20%20%20%20var%20s%20%3D%20this.m_ctx%3B%0A%20%20%20%20%20%20var%20drawScale%20%3D%20this.m_drawScale%3B%0A%20%20%20%20%20%20s.beginPath()%3B%0A%20%20%20%20%20%20s.strokeStyle%20%3D%20this._color(color.color%2C%20this.m_alpha)%3B%0A%20%20%20%20%20%20s.fillStyle%20%3D%20this._color(color.color%2C%20this.m_fillAlpha)%3B%0A%20%20%20%20%20%20s.moveTo(vertices%5B0%5D.x%20*%20drawScale%2C%20vertices%5B0%5D.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%201%3B%20i%20%3C%20vertexCount%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20s.lineTo(vertices%5Bi%5D.x%20*%20drawScale%2C%20vertices%5Bi%5D.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20s.lineTo(vertices%5B0%5D.x%20*%20drawScale%2C%20vertices%5B0%5D.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20s.closePath()%3B%0A%20%20%20%20%20%20s.fill()%3B%0A%20%20%20%20%20%20s.stroke()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawCircle%20%3D%20function%20(center%2C%20radius%2C%20color)%20%7B%0A%20%20%20%20%20%20if%20(!radius)%20return%3B%0A%20%20%20%20%20%20var%20s%20%3D%20this.m_ctx%3B%0A%20%20%20%20%20%20var%20drawScale%20%3D%20this.m_drawScale%3B%0A%20%20%20%20%20%20s.beginPath()%3B%0A%20%20%20%20%20%20s.strokeStyle%20%3D%20this._color(color.color%2C%20this.m_alpha)%3B%0A%20%20%20%20%20%20s.arc(%0A%20%20%20%20%20%20%20%20center.x%20*%20drawScale%2C%0A%20%20%20%20%20%20%20%20center.y%20*%20drawScale%2C%0A%20%20%20%20%20%20%20%20radius%20*%20drawScale%2C%0A%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20Math.PI%20*%202%2C%0A%20%20%20%20%20%20%20%20true%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20s.closePath()%3B%0A%20%20%20%20%20%20s.stroke()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawSolidCircle%20%3D%20function%20(%0A%20%20%20%20%20%20center%2C%0A%20%20%20%20%20%20radius%2C%0A%20%20%20%20%20%20axis%2C%0A%20%20%20%20%20%20color%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20if%20(!radius)%20return%3B%0A%20%20%20%20%20%20var%20s%20%3D%20this.m_ctx%2C%0A%20%20%20%20%20%20%20%20drawScale%20%3D%20this.m_drawScale%2C%0A%20%20%20%20%20%20%20%20cx%20%3D%20center.x%20*%20drawScale%2C%0A%20%20%20%20%20%20%20%20cy%20%3D%20center.y%20*%20drawScale%3B%0A%20%20%20%20%20%20s.moveTo(0%2C%200)%3B%0A%20%20%20%20%20%20s.beginPath()%3B%0A%20%20%20%20%20%20s.strokeStyle%20%3D%20this._color(color.color%2C%20this.m_alpha)%3B%0A%20%20%20%20%20%20s.fillStyle%20%3D%20this._color(color.color%2C%20this.m_fillAlpha)%3B%0A%20%20%20%20%20%20s.arc(cx%2C%20cy%2C%20radius%20*%20drawScale%2C%200%2C%20Math.PI%20*%202%2C%20true)%3B%0A%20%20%20%20%20%20s.moveTo(cx%2C%20cy)%3B%0A%20%20%20%20%20%20s.lineTo(%0A%20%20%20%20%20%20%20%20(center.x%20%2B%20axis.x%20*%20radius)%20*%20drawScale%2C%0A%20%20%20%20%20%20%20%20(center.y%20%2B%20axis.y%20*%20radius)%20*%20drawScale%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20s.closePath()%3B%0A%20%20%20%20%20%20s.fill()%3B%0A%20%20%20%20%20%20s.stroke()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawSegment%20%3D%20function%20(p1%2C%20p2%2C%20color)%20%7B%0A%20%20%20%20%20%20var%20s%20%3D%20this.m_ctx%2C%0A%20%20%20%20%20%20%20%20drawScale%20%3D%20this.m_drawScale%3B%0A%20%20%20%20%20%20s.strokeStyle%20%3D%20this._color(color.color%2C%20this.m_alpha)%3B%0A%20%20%20%20%20%20s.beginPath()%3B%0A%20%20%20%20%20%20s.moveTo(p1.x%20*%20drawScale%2C%20p1.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20s.lineTo(p2.x%20*%20drawScale%2C%20p2.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20s.closePath()%3B%0A%20%20%20%20%20%20s.stroke()%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20b2DebugDraw.prototype.DrawTransform%20%3D%20function%20(xf)%20%7B%0A%20%20%20%20%20%20var%20s%20%3D%20this.m_ctx%2C%0A%20%20%20%20%20%20%20%20drawScale%20%3D%20this.m_drawScale%3B%0A%20%20%20%20%20%20s.beginPath()%3B%0A%20%20%20%20%20%20s.strokeStyle%20%3D%20this._color(0xff0000%2C%20this.m_alpha)%3B%0A%20%20%20%20%20%20s.moveTo(xf.position.x%20*%20drawScale%2C%20xf.position.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20s.lineTo(%0A%20%20%20%20%20%20%20%20(xf.position.x%20%2B%20this.m_xformScale%20*%20xf.R.col1.x)%20*%20drawScale%2C%0A%20%20%20%20%20%20%20%20(xf.position.y%20%2B%20this.m_xformScale%20*%20xf.R.col1.y)%20*%20drawScale%0A%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20s.strokeStyle%20%3D%20this._color(0xff00%2C%20this.m_alpha)%3B%0A%20%20%20%20%20%20s.moveTo(xf.position.x%20*%20drawScale%2C%20xf.position.y%20*%20drawScale)%3B%0A%20%20%20%20%20%20s.lineTo(%0A%20%20%20%20%20%20%20%20(xf.position.x%20%2B%20this.m_xformScale%20*%20xf.R.col2.x)%20*%20drawScale%2C%0A%20%20%20%20%20%20%20%20(xf.position.y%20%2B%20this.m_xformScale%20*%20xf.R.col2.y)%20*%20drawScale%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20s.closePath()%3B%0A%20%20%20%20%20%20s.stroke()%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D)()%3B%0A%20%20var%20i%3B%0A%20%20for%20(i%20%3D%200%3B%20i%20%3C%20Box2D.postDefs.length%3B%20%2B%2Bi)%20Box2D.postDefs%5Bi%5D()%3B%0A%0A%20%20const%20ArgumentType%20%3D%20Scratch.ArgumentType%3B%0A%20%20const%20BlockType%20%3D%20Scratch.BlockType%3B%0A%20%20%2F%2F%20const%20MathUtil%20%3D%20require('..%2F..%2Futil%2Fmath-util')%3B%0A%20%20%2F%2F%20const%20Clone%20%3D%20require('..%2F..%2Futil%2Fclone')%3B%0A%20%20const%20Cast%20%3D%20%7B%0A%20%20%20%20toNumber%3A%20(n)%20%3D%3E%20%2Bn%20%7C%7C%200%2C%0A%20%20%7D%3B%0A%20%20%2F%2F%20const%20Cast%20%3D%20require('..%2F..%2Futil%2Fcast')%3B%0A%20%20%2F%2F%20const%20Runtime%20%3D%20require('..%2F..%2Fengine%2Fruntime')%3B%0A%20%20%2F%2F%20const%20RenderedTarget%20%3D%20require('..%2F..%2Fsprites%2Frendered-target')%3B%0A%20%20%2F%2F%20const%20MathUtil%20%3D%20require('..%2F..%2Futil%2Fmath-util')%3B%0A%20%20%2F%2F%20const%20Timer%20%3D%20require('..%2F..%2Futil%2Ftimer')%3B%0A%20%20%2F%2F%20const%20Matter%20%3D%20require('matterJs%2Fmatter')%3B%0A%20%20%2F%2F%20const%20Matter%20%3D%20require('matter-js')%3B%0A%20%20const%20ROTATION_STYLE_ALL_AROUND%20%3D%20%22all%20around%22%3B%0A%0A%20%20%2F%2F%20const%20Box2D%20%3D%20require('.%2FBox2d.min').box2d%3B%0A%0A%20%20%2F%2F%20window.decomp%20%3D%20require('poly-decomp')%3B%0A%0A%20%20const%20b2World%20%3D%20Box2D.Dynamics.b2World%3B%0A%20%20const%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%3B%0A%20%20const%20b2AABB%20%3D%20Box2D.Collision.b2AABB%3B%0A%20%20const%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%3B%0A%20%20const%20b2Body%20%3D%20Box2D.Dynamics.b2Body%3B%0A%20%20const%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%3B%0A%20%20%2F%2F%20const%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%3B%0A%20%20%2F%2F%20const%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%3B%0A%20%20const%20b2Contact%20%3D%20Box2D.Dynamics.Contacts.b2Contact%3B%0A%20%20%2F%2F%20const%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%3B%0A%20%20const%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%3B%0A%20%20const%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%3B%0A%20%20%2F%2F%20const%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%3B%0A%20%20const%20b2MouseJointDef%20%3D%20Box2D.Dynamics.Joints.b2MouseJointDef%3B%0A%20%20const%20b2Math%20%3D%20Box2D.Common.Math.b2Math%3B%0A%0A%20%20let%20world%3B%0A%20%20let%20zoom%3B%0A%0A%20%20const%20fixDef%20%3D%20new%20b2FixtureDef()%3B%0A%20%20const%20bodyDef%20%3D%20new%20b2BodyDef()%3B%0A%0A%20%20%2F%2F%20const%20uid_seq%20%3D%200%3B%0A%20%20%2F%2F%20let%20ujidSeq%20%3D%200%3B%0A%0A%20%20const%20prevPos%20%3D%20%7B%7D%3B%0A%20%20%2F**%0A%20%20%20*%20Active%20b2Body%2Fs%20in%20the%20world.%0A%20%20%20*%20%40type%20%7BObject.%3Cstring%2C*%3E%7D%0A%20%20%20*%2F%0A%20%20const%20bodies%20%3D%20%7B%7D%3B%0A%20%20%2F%2F%20const%20joints%20%3D%20%7B%7D%3B%0A%20%20const%20pinned%20%3D%20%7B%7D%3B%20%2F%2F%20Map%20of%20IDs%20to%20pinned%20joints%0A%20%20%2F**%0A%20%20%20*%20The%20runtime%20instantiating%20this%20block%20package.%0A%20%20%20*%20%40type%20%7BArray%7D%0A%20%20%20*%2F%0A%20%20const%20stageBodies%20%3D%20%5B%5D%3B%0A%0A%20%20%2F%2F%20const%20categorySeq%20%3D%201%3B%0A%20%20%2F%2F%20const%20categories%20%3D%20%7Bdefault%3A%201%7D%3B%0A%0A%20%20const%20bodyCategoryBits%20%3D%201%3B%0A%20%20const%20bodyMaskBits%20%3D%201%3B%0A%20%20%2F%2F%20const%20noCollideSeq%20%3D%200%3B%0A%0A%20%20const%20toRad%20%3D%20Math.PI%20%2F%20180%3B%0A%0A%20%20%2F%2F%20Used%20to%20record%20the%20scroll%20position%20of%20all%20sprites%0A%20%20const%20_scroll%20%3D%20new%20b2Vec2(0%2C%200)%3B%0A%0A%20%20const%20STAGE_TYPE_OPTIONS%20%3D%20%7B%0A%20%20%20%20BOXED%3A%20%22boxed%22%2C%0A%20%20%20%20FLOOR%3A%20%22floor%22%2C%0A%20%20%20%20OPEN%3A%20%22open%22%2C%0A%20%20%7D%3B%0A%0A%20%20const%20SPACE_TYPE_OPTIONS%20%3D%20%7B%0A%20%20%20%20WORLD%3A%20%22world%22%2C%0A%20%20%20%20STAGE%3A%20%22stage%22%2C%0A%20%20%20%20RELATIVE%3A%20%22relative%22%2C%0A%20%20%7D%3B%0A%0A%20%20const%20WHERE_TYPE_OPTIONS%20%3D%20%7B%0A%20%20%20%20ANY%3A%20%22any%22%2C%0A%20%20%20%20FEET%3A%20%22feet%22%2C%0A%20%20%7D%3B%0A%0A%20%20const%20SHAPE_TYPE_OPTIONS%20%3D%20%7B%0A%20%20%20%20COSTUME%3A%20%22costume%22%2C%0A%20%20%20%20CIRCLE%3A%20%22circle%22%2C%0A%20%20%20%20SVG_POLYGON%3A%20%22svg%22%2C%0A%20%20%20%20ALL%3A%20%22all%22%2C%0A%20%20%7D%3B%0A%0A%20%20const%20_definePolyFromHull%20%3D%20function%20(hullPoints)%20%7B%0A%20%20%20%20fixDef.shape%20%3D%20new%20b2PolygonShape()%3B%0A%0A%20%20%20%20const%20vertices%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20let%20prev%20%3D%20null%3B%0A%20%20%20%20for%20(let%20i%20%3D%20hullPoints.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--)%20%7B%0A%20%20%20%20%20%20%2F%2F%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20hullPoints.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20const%20b2Vec%20%3D%20new%20b2Vec2(hullPoints%5Bi%5D.x%20%2F%20zoom%2C%20hullPoints%5Bi%5D.y%20%2F%20zoom)%3B%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20prev%20!%3D%3D%20null%20%26%26%0A%20%20%20%20%20%20%20%20b2Math.SubtractVV(b2Vec%2C%20prev).LengthSquared()%20%3E%20Number.MIN_VALUE%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20vertices.push(b2Vec)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20prev%20%3D%20b2Vec%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20fixDef.shape.SetAsArray(vertices)%3B%0A%20%20%7D%3B%0A%0A%20%20const%20_placeBody%20%3D%20function%20(id%2C%20x%2C%20y%2C%20dir)%20%7B%0A%20%20%20%20if%20(bodies%5Bid%5D)%20%7B%0A%20%20%20%20%20%20world.DestroyBody(bodies%5Bid%5D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20fixDef.filter.categoryBits%20%3D%20bodyCategoryBits%3B%0A%20%20%20%20fixDef.filter.maskBits%20%3D%20bodyMaskBits%3B%0A%0A%20%20%20%20bodyDef.position.x%20%3D%20(x%20%2B%20_scroll.x)%20%2F%20zoom%3B%0A%20%20%20%20bodyDef.position.y%20%3D%20(y%20%2B%20_scroll.y)%20%2F%20zoom%3B%0A%20%20%20%20bodyDef.angle%20%3D%20(90%20-%20dir)%20*%20toRad%3B%0A%0A%20%20%20%20const%20body%20%3D%20world.CreateBody(bodyDef)%3B%0A%20%20%20%20body.uid%20%3D%20id%3B%0A%20%20%20%20body.CreateFixture(fixDef)%3B%0A%20%20%20%20bodies%5Bid%5D%20%3D%20body%3B%0A%20%20%20%20return%20body%3B%0A%20%20%7D%3B%0A%0A%20%20const%20_removeBody%20%3D%20function%20(id)%20%7B%0A%20%20%20%20if%20(!bodies%5Bid%5D)%20return%3B%0A%0A%20%20%20%20world.DestroyBody(bodies%5Bid%5D)%3B%0A%20%20%20%20delete%20bodies%5Bid%5D%3B%0A%20%20%20%20delete%20prevPos%5Bid%5D%3B%0A%20%20%7D%3B%0A%0A%20%20const%20_applyForce%20%3D%20function%20(id%2C%20ftype%2C%20x%2C%20y%2C%20dir%2C%20pow)%20%7B%0A%20%20%20%20const%20body%20%3D%20bodies%5Bid%5D%3B%0A%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20dir%20%3D%20(90%20-%20dir)%20*%20toRad%3B%0A%0A%20%20%20%20if%20(ftype%20%3D%3D%3D%20%22Impulse%22)%20%7B%0A%20%20%20%20%20%20const%20center%20%3D%20body.GetLocalCenter()%3B%20%2F%2F%20get%20the%20mass%20data%20from%20you%20body%0A%0A%20%20%20%20%20%20body.ApplyImpulse(%0A%20%20%20%20%20%20%20%20%7B%20x%3A%20pow%20*%20Math.cos(dir)%2C%20y%3A%20pow%20*%20Math.sin(dir)%20%7D%2C%0A%20%20%20%20%20%20%20%20body.GetWorldPoint(%7B%20x%3A%20x%20%2F%20zoom%20%2B%20center.x%2C%20y%3A%20y%20%2F%20zoom%20%2B%20center.y%20%7D)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%20else%20if%20(ftype%20%3D%3D%3D%20%22World%20Impulse%22)%20%7B%0A%20%20%20%20%20%20body.ApplyForce(%0A%20%20%20%20%20%20%20%20%7B%20x%3A%20pow%20*%20Math.cos(dir)%2C%20y%3A%20pow%20*%20Math.sin(dir)%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20x%3A%20x%20%2F%20zoom%2C%20y%3A%20y%20%2F%20zoom%20%7D%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20%5B''%2C%20'Define%20Spring%20Length%3A%20%25n%20Damping%3A%20%25n%20%20Freq%3A%20%25n'%2C%20'_defineSpring'%2C%20100%2C%200.5%2C%208%5D%2C%0A%20%20const%20defSpring%20%3D%20%7B%20len%3A%20100%2C%20damp%3A%200.7%2C%20freq%3A%205%20%7D%3B%0A%20%20const%20_defineSpring%20%3D%20function%20(len%2C%20damp%2C%20freq)%20%7B%0A%20%20%20%20defSpring.len%20%3D%20len%20%3C%200.1%20%3F%200.1%20%3A%20len%20%2F%20zoom%3B%0A%20%20%20%20defSpring.damp%20%3D%20damp%20%3C%200%20%3F%200.7%20%3A%20damp%3B%0A%20%20%20%20defSpring.freq%20%3D%20freq%20%3E%200%20%3F%20freq%20%3A%205%3B%0A%20%20%7D%3B%0A%0A%20%20const%20_createJointOfType%20%3D%20function%20(%0A%20%20%20%20jName%2C%0A%20%20%20%20typ%2C%0A%20%20%20%20bodyID%2C%0A%20%20%20%20x%2C%0A%20%20%20%20y%2C%0A%20%20%20%20bodyID2%2C%0A%20%20%20%20x2%2C%0A%20%20%20%20y2%0A%20%20)%20%7B%0A%20%20%20%20%2F%2F%20if%20(jName.length%20%3E%200)%20ext.destroyJoint(jName)%3B%0A%0A%20%20%20%20if%20(!bodyID)%20bodyID%20%3D%20null%3B%0A%20%20%20%20if%20(!bodyID2)%20bodyID2%20%3D%20null%3B%0A%20%20%20%20if%20(!bodyID%20%26%26%20!bodyID2)%20%7B%0A%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20body%20%3D%20bodyID%20%3F%20bodies%5BbodyID%5D%20%3A%20world.GetGroundBody()%3B%0A%20%20%20%20const%20body2%20%3D%20bodyID2%20%3F%20bodies%5BbodyID2%5D%20%3A%20world.GetGroundBody()%3B%0A%0A%20%20%20%20if%20(!body%20%7C%7C%20!body2)%20return%20null%3B%0A%0A%20%20%20%20let%20md%3B%0A%20%20%20%20switch%20(typ)%20%7B%0A%20%20%20%20%20%20case%20%22Spring%22%3A%0A%20%20%20%20%20%20%20%20md%20%3D%20new%20Box2D.Dynamics.Joints.b2DistanceJointDef()%3B%0A%20%20%20%20%20%20%20%20md.length%20%3D%20defSpring.len%3B%0A%20%20%20%20%20%20%20%20md.dampingRatio%20%3D%20defSpring.damp%3B%0A%20%20%20%20%20%20%20%20md.frequencyHz%20%3D%20defSpring.freq%3B%0A%20%20%20%20%20%20%20%20md.bodyA%20%3D%20body%3B%0A%20%20%20%20%20%20%20%20md.bodyB%20%3D%20body2%3B%0A%20%20%20%20%20%20%20%20md.localAnchorA%20%3D%20%7B%20x%3A%20x%20%2F%20zoom%2C%20y%3A%20y%20%2F%20zoom%20%7D%3B%0A%20%20%20%20%20%20%20%20md.localAnchorB%20%3D%20%7B%20x%3A%20x2%20%2F%20zoom%2C%20y%3A%20y2%20%2F%20zoom%20%7D%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20case%20%22Rotating%22%3A%0A%20%20%20%20%20%20%20%20md%20%3D%20new%20Box2D.Dynamics.Joints.b2RevoluteJointDef()%3B%0A%20%20%20%20%20%20%20%20md.bodyA%20%3D%20body%3B%0A%20%20%20%20%20%20%20%20md.bodyB%20%3D%20body2%3B%0A%20%20%20%20%20%20%20%20md.localAnchorA%20%3D%20%7B%20x%3A%20x%20%2F%20zoom%2C%20y%3A%20y%20%2F%20zoom%20%7D%3B%0A%20%20%20%20%20%20%20%20if%20(x2%20%3D%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(body2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20md.localAnchorB%20%3D%20body2.GetLocalPoint(body.GetPosition())%3B%20%2F%2F%20Wheel%20Type%20Joint...%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20md.localAnchorB%20%3D%20body.GetWorldPoint(%7B%20x%3A%20x%20%2F%20zoom%2C%20y%3A%20y%20%2F%20zoom%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20md.localAnchorB%20%3D%20%7B%20x%3A%20x2%20%2F%20zoom%2C%20y%3A%20y2%20%2F%20zoom%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20case%20%22Mouse%22%3A%0A%20%20%20%20%20%20%20%20md%20%3D%20new%20b2MouseJointDef()%3B%0A%20%20%20%20%20%20%20%20if%20(bodyID)%20%7B%0A%20%20%20%20%20%20%20%20%20%20md.bodyB%20%3D%20body%3B%0A%20%20%20%20%20%20%20%20%20%20md.target.Set(x%20%2F%20zoom%2C%20y%20%2F%20zoom)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20md.bodyB%20%3D%20body2%3B%0A%20%20%20%20%20%20%20%20%20%20md.target.Set(x2%20%2F%20zoom%2C%20y2%20%2F%20zoom)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20md.bodyA%20%3D%20world.GetGroundBody()%3B%0A%20%20%20%20%20%20%20%20md.collideConnected%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20md.maxForce%20%3D%20300.0%20*%20body.GetMass()%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20md.collideConnected%20%3D%20true%3B%0A%20%20%20%20%2F%2F%20md.maxForce%20%3D%20300.0%20*%20body.GetMass()%3B%0A%20%20%20%20const%20joint%20%3D%20world.CreateJoint(md)%3B%0A%20%20%20%20if%20(bodyID)%20%7B%0A%20%20%20%20%20%20body.SetAwake(true)%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(bodyID2)%20%7B%0A%20%20%20%20%20%20body2.SetAwake(true)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20if%20(!jName)%20%7B%0A%20%20%20%20%2F%2F%20%20%20%20%20ujidSeq%2B%2B%3B%0A%20%20%20%20%2F%2F%20%20%20%20%20jName%20%3D%20%60_%24%7BujidSeq%7D%60%3B%0A%20%20%20%20%2F%2F%20%7D%0A%20%20%20%20%2F%2F%20joints%5BjName%5D%20%3D%20joint%3B%0A%20%20%20%20return%20joint%3B%0A%20%20%7D%3B%0A%0A%20%20%2F**%0A%20%20%20*%20Set%20the%20X%20and%20Y%20coordinates%20(No%20Fencing)%0A%20%20%20*%20%40param%20%7B!RenderedTarget%7D%20rt%20the%20renderedTarget.%0A%20%20%20*%20%40param%20%7B!number%7D%20x%20New%20X%20coordinate%2C%20in%20Scratch%20coordinates.%0A%20%20%20*%20%40param%20%7B!number%7D%20y%20New%20Y%20coordinate%2C%20in%20Scratch%20coordinates.%0A%20%20%20*%20%40param%20%7B%3Fboolean%7D%20force%20Force%20setting%20X%2FY%2C%20in%20case%20of%20dragging%0A%20%20%20*%2F%0A%20%20const%20_setXY%20%3D%20function%20(rt%2C%20x%2C%20y%2C%20force)%20%7B%0A%20%20%20%20if%20(rt.isStage)%20return%3B%0A%20%20%20%20if%20(rt.dragging%20%26%26%20!force)%20return%3B%0A%20%20%20%20const%20oldX%20%3D%20rt.x%3B%0A%20%20%20%20const%20oldY%20%3D%20rt.y%3B%0A%20%20%20%20if%20(rt.renderer)%20%7B%0A%20%20%20%20%20%20%2F%2F%20const%20position%20%3D%20rt.renderer.getFencedPositionOfDrawable(rt.drawableID%2C%20%5Bx%2C%20y%5D)%3B%0A%20%20%20%20%20%20rt.x%20%3D%20x%3B%20%2F%2F%20position%5B0%5D%3B%0A%20%20%20%20%20%20rt.y%20%3D%20y%3B%20%2F%2F%20position%5B1%5D%3B%0A%0A%20%20%20%20%20%20rt.renderer.updateDrawableProperties(rt.drawableID%2C%20%7B%0A%20%20%20%20%20%20%20%20position%3A%20%5Bx%2C%20y%5D%2C%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20if%20(rt.visible)%20%7B%0A%20%20%20%20%20%20%20%20rt.emit(%22EVENT_TARGET_VISUAL_CHANGE%22%2C%20rt)%3B%0A%20%20%20%20%20%20%20%20rt.runtime.requestRedraw()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20rt.x%20%3D%20x%3B%0A%20%20%20%20%20%20rt.y%20%3D%20y%3B%0A%20%20%20%20%7D%0A%20%20%20%20rt.emit(%22EVENT_TARGET_MOVED%22%2C%20rt%2C%20oldX%2C%20oldY%2C%20force)%3B%0A%20%20%20%20rt.runtime.requestTargetsUpdate(rt)%3B%0A%20%20%7D%3B%0A%0A%20%20const%20createStageBody%20%3D%20function%20()%20%7B%0A%20%20%20%20const%20body%20%3D%20world.CreateBody(bodyDef)%3B%0A%20%20%20%20body.CreateFixture(fixDef)%3B%0A%20%20%20%20stageBodies.push(body)%3B%0A%20%20%7D%3B%0A%0A%20%20const%20_setStageType%20%3D%20function%20(type)%20%7B%0A%20%20%20%20%2F%2F%20Clear%20down%20previous%20stage%0A%20%20%20%20if%20(stageBodies.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20for%20(const%20stageBodyID%20in%20stageBodies)%20%7B%0A%20%20%20%20%20%20%20%20world.DestroyBody(stageBodies%5BstageBodyID%5D)%3B%0A%20%20%20%20%20%20%20%20delete%20stageBodies%5BstageBodyID%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Build%20up%20new%20stage%0A%20%20%20%20bodyDef.type%20%3D%20b2Body.b2_staticBody%3B%0A%20%20%20%20fixDef.shape%20%3D%20new%20b2PolygonShape()%3B%0A%20%20%20%20bodyDef.angle%20%3D%200%3B%0A%0A%20%20%20%20const%20%7B%20stageWidth%2C%20stageHeight%20%7D%20%3D%20Scratch.vm.runtime%3B%0A%20%20%20%20const%20stageBounds%20%3D%20%7B%0A%20%20%20%20%20%20left%3A%20-stageWidth%20%2F%202%2C%0A%20%20%20%20%20%20right%3A%20stageWidth%20%2F%202%2C%0A%20%20%20%20%20%20top%3A%20stageHeight%20%2F%202%2C%0A%20%20%20%20%20%20bottom%3A%20-stageHeight%20%2F%202%2C%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20if%20(type%20%3D%3D%3D%20STAGE_TYPE_OPTIONS.BOXED)%20%7B%0A%20%20%20%20%20%20%2F%2F%20For%20the%20ceiling%20boxes...%0A%20%20%20%20%20%20%2F%2F%20use%20a%20width%20equivalent%20to%20the%20stage%20width%20%2B%2010%2C%20with%20a%20thickness%20of%2010%0A%20%20%20%20%20%20fixDef.shape.SetAsBox((stageWidth%20%2B%2010)%20%2F%20zoom%2C%2010%20%2F%20zoom)%3B%0A%20%20%20%20%20%20%2F%2F%20create%20one%20such%20box%20at%20the%20bottom%20of%20the%20stage%2C%20accounting%20for%20thickness...%0A%20%20%20%20%20%20bodyDef.position.Set(0%2C%20(stageBounds.bottom%20-%2010)%20%2F%20zoom)%3B%0A%20%20%20%20%20%20createStageBody()%3B%0A%20%20%20%20%20%20%2F%2F%20and%20one%20820%20units%20above%20the%20top%20of%20the%20stage.%0A%20%20%20%20%20%20bodyDef.position.Set(0%2C%20(stageBounds.top%20%2B%20820)%20%2F%20zoom)%3B%0A%20%20%20%20%20%20createStageBody()%3B%0A%20%20%20%20%20%20%2F%2F%20For%20the%20left%20%26%20right%20wall%20boxes...%0A%20%20%20%20%20%20%2F%2F%20use%20a%20height%20equivalent%20to%20the%20stage%20height%20%2B%20820%2C%20with%20a%20thickness%20of%2010%0A%20%20%20%20%20%20fixDef.shape.SetAsBox(10%20%2F%20zoom%2C%20(stageHeight%20%2B%20820)%20%2F%20zoom)%3B%0A%20%20%20%20%20%20%2F%2F%20create%20a%20box%20at%20the%20left%20of%20the%20stage...%0A%20%20%20%20%20%20bodyDef.position.Set((stageBounds.left%20-%2010)%20%2F%20zoom%2C%200)%3B%0A%20%20%20%20%20%20createStageBody()%3B%0A%20%20%20%20%20%20%2F%2F%20and%20one%20at%20the%20right%20of%20the%20stage.%0A%20%20%20%20%20%20bodyDef.position.Set((stageBounds.right%20%2B%2010)%20%2F%20zoom%2C%200)%3B%0A%20%20%20%20%20%20createStageBody()%3B%0A%20%20%20%20%7D%20else%20if%20(type%20%3D%3D%3D%20STAGE_TYPE_OPTIONS.FLOOR)%20%7B%0A%20%20%20%20%20%20%2F%2F%20All%20floor%20boxes%20are%20positioned%20at%20the%20bottom%20of%20the%20stage%2C%20accounting%20for%0A%20%20%20%20%20%20%2F%2F%20the%20thickness%20of%20100.%0A%20%20%20%20%20%20const%20floorY%20%3D%20(stageBounds.bottom%20-%20100)%20%2F%20zoom%3B%0A%0A%20%20%20%20%20%20%2F%2F%20The%20floor%20boxes%20have%20a%20width%20of%20the%20stage%20width%20%2B%204520%20units%2C%20and%20a%0A%20%20%20%20%20%20%2F%2F%20thickness%20of%20100%20units.%0A%20%20%20%20%20%20fixDef.shape.SetAsBox((stageWidth%20%2B%204520)%20%2F%20zoom%2C%20100%20%2F%20zoom)%3B%0A%20%20%20%20%20%20%2F%2F%20Floor%20boxes%20are%20created%20at%20different%20intervals%20throughout%20the%20bottom%20of%20the%20stage.%0A%20%20%20%20%20%20bodyDef.position.Set(0%2C%20floorY)%3B%0A%20%20%20%20%20%20createStageBody()%3B%0A%20%20%20%20%20%20bodyDef.position.Set(stageBounds.left%20-%205000%2C%20floorY)%3B%0A%20%20%20%20%20%20createStageBody()%3B%0A%20%20%20%20%20%20bodyDef.position.Set(stageBounds.right%20%2B%205000%2C%20floorY)%3B%0A%20%20%20%20%20%20createStageBody()%3B%0A%20%20%20%20%20%20bodyDef.position.Set(stageBounds.left%20-%2015000%2C%20floorY)%3B%0A%20%20%20%20%20%20createStageBody()%3B%0A%20%20%20%20%20%20bodyDef.position.Set(stageBounds.right%20%2B%2015000%2C%20floorY)%3B%0A%20%20%20%20%20%20createStageBody()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20bodyDef.type%20%3D%20b2Body.b2_dynamicBody%3B%0A%0A%20%20%20%20for%20(const%20bodyID%20in%20bodies)%20%7B%0A%20%20%20%20%20%20bodies%5BbodyID%5D.SetAwake(true)%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20%2F*%20eslint-enable%20*%2F%0A%0A%20%20let%20tickRate%20%3D%2030%3B%0A%0A%20%20const%20blockIconURI%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiDQoJIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOmE9Imh0dHA6Ly9ucy5hZG9iZS5jb20vQWRvYmVTVkdWaWV3ZXJFeHRlbnNpb25zLzMuMC8iDQoJIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNDBweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSItMy43IC0zLjcgNDAgNDAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgLTMuNyAtMy43IDQwIDQwIg0KCSB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxkZWZzPg0KPC9kZWZzPg0KPHJlY3QgeD0iOC45IiB5PSIxLjUiIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzE2OUZCMCIgc3Ryb2tlLXdpZHRoPSIzIiB3aWR0aD0iMTQuOCIgaGVpZ2h0PSIxNC44Ii8%2BDQo8cmVjdCB4PSIxLjUiIHk9IjE2LjMiIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzE2OUZCMCIgc3Ryb2tlLXdpZHRoPSIzIiB3aWR0aD0iMTQuOCIgaGVpZ2h0PSIxNC44Ii8%2BDQo8cmVjdCB4PSIxNi4zIiB5PSIxNi4zIiBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiMxNjlGQjAiIHN0cm9rZS13aWR0aD0iMyIgd2lkdGg9IjE0LjgiIGhlaWdodD0iMTQuOCIvPg0KPC9zdmc%2B%22%3B%0A%20%20const%20menuIconURI%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiDQoJIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOmE9Imh0dHA6Ly9ucy5hZG9iZS5jb20vQWRvYmVTVkdWaWV3ZXJFeHRlbnNpb25zLzMuMC8iDQoJIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNDBweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSItMy43IC0zLjcgNDAgNDAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgLTMuNyAtMy43IDQwIDQwIg0KCSB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxkZWZzPg0KPC9kZWZzPg0KPHJlY3QgeD0iOC45IiB5PSIxLjUiIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzE2OUZCMCIgc3Ryb2tlLXdpZHRoPSIzIiB3aWR0aD0iMTQuOCIgaGVpZ2h0PSIxNC44Ii8%2BDQo8cmVjdCB4PSIxLjUiIHk9IjE2LjMiIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzE2OUZCMCIgc3Ryb2tlLXdpZHRoPSIzIiB3aWR0aD0iMTQuOCIgaGVpZ2h0PSIxNC44Ii8%2BDQo8cmVjdCB4PSIxNi4zIiB5PSIxNi4zIiBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiMxNjlGQjAiIHN0cm9rZS13aWR0aD0iMyIgd2lkdGg9IjE0LjgiIGhlaWdodD0iMTQuOCIvPg0KPC9zdmc%2B%22%3B%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%0A%20%20class%20Scratch3Griffpatch%20%7B%0A%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20*%20The%20runtime%20instantiating%20this%20block%20package.%0A%20%20%20%20%20%20%20*%20%40type%20%7BRuntime%7D%0A%20%20%20%20%20%20%20*%2F%0A%20%20%20%20%20%20this.runtime%20%3D%20vm.runtime%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Clear%20target%20motion%20state%20values%20when%20the%20project%20starts.%0A%20%20%20%20%20%20this.runtime.on(%22PROJECT_START%22%2C%20this.reset.bind(this))%3B%0A%0A%20%20%20%20%20%20world%20%3D%20new%20b2World(%0A%20%20%20%20%20%20%20%20new%20b2Vec2(0%2C%20-10)%2C%20%2F%2F%20gravity%20(10)%0A%20%20%20%20%20%20%20%20true%20%2F%2F%20allow%20sleep%0A%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20zoom%20%3D%2050%3B%20%2F%2F%20scale%3B%0A%0A%20%20%20%20%20%20this.map%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20fixDef.density%20%3D%201.0%3B%20%2F%2F%201.0%0A%20%20%20%20%20%20fixDef.friction%20%3D%200.5%3B%20%2F%2F%200.5%0A%20%20%20%20%20%20fixDef.restitution%20%3D%200.2%3B%20%2F%2F%200.2%0A%0A%20%20%20%20%20%20_setStageType(STAGE_TYPE_OPTIONS.BOXED)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20reset()%20%7B%0A%20%20%20%20%20%20for%20(const%20body%20in%20bodies)%20%7B%0A%20%20%20%20%20%20%20%20if%20(pinned%5Bbody.uid%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20world.DestroyJoint(pinned%5Bbody.uid%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20delete%20pinned%5Bbody.uid%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20world.DestroyBody(bodies%5Bbody%5D)%3B%0A%20%20%20%20%20%20%20%20delete%20bodies%5Bbody%5D%3B%0A%20%20%20%20%20%20%20%20delete%20prevPos%5Bbody%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20tickRate%20%3D%2030%3B%0A%20%20%20%20%20%20%2F%2F%20todo%3A%20delete%20joins%3F%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20The%20key%20to%20load%20%26%20store%20a%20target's%20music-related%20state.%0A%20%20%20%20%20*%20%40type%20%7Bstring%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20static%20get%20STATE_KEY()%20%7B%0A%20%20%20%20%20%20return%20%22Scratch.Griffpatch%22%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40returns%20%7Bobject%7D%20metadata%20for%20this%20extension%20and%20its%20blocks.%0A%20%20%20%20%20*%2F%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22griffpatch%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.categoryName%22%2C%0A%20%20%20%20%20%20%20%20%20%20default%3A%20%22Physics%22%2C%0A%20%20%20%20%20%20%20%20%20%20description%3A%20%22Label%20for%20the%20Griffpatch%20extension%20category%22%2C%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20docsURI%3A%20%22https%3A%2F%2Fextensions.turbowarp.org%2Fbox2d%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%3A%20menuIconURI%2C%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20blockIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Global%20Setup%20------------------%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setStage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setStage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20stage%20boundaries%20to%20%5BstageType%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20the%20stage%20type%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20stageType%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22StageTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20STAGE_TYPE_OPTIONS.BOXED%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setGravity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setGravity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20gravity%20to%20x%3A%20%5Bgx%5D%20y%3A%20%5Bgy%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20the%20gravity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20gx%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20gy%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20-10%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getGravityX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getGravityX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22gravity%20x%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Get%20the%20gravity's%20x%20value%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getGravityY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getGravityY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22gravity%20y%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Get%20the%20gravity's%20y%20value%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setPhysics%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setPhysics%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22enable%20for%20%5Bshape%5D%20mode%20%5Bmode%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Enable%20Physics%20for%20this%20Sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20shape%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22ShapeTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22costume%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20mode%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22EnableModeTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22normal%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22disablePhysics%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.disablePhysics%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22disable%20physics%20for%20this%20sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Disable%20Physics%20for%20this%20Sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20opcode%3A%20'setPhysics'%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20id%3A%20'griffpatch.setPhysics'%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20default%3A%20'enable%20physics%20for%20sprite%20%5Bshape%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20description%3A%20'Enable%20Physics%20for%20this%20Sprite'%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20shape%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20'ShapeTypes'%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20'costume'%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20opcode%3A%20'setPhysicsAll'%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20id%3A%20'griffpatch.setPhysicsAll'%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20default%3A%20'enable%20physics%20for%20all%20sprites'%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20description%3A%20'Enable%20Physics%20For%20All%20Sprites'%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22doTick%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.doTick%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22step%20simulation%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Run%20a%20single%20tick%20of%20the%20physics%20simulation%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setTickRate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setTickRate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20simulation%20rate%20to%20%5Brate%5D%2Fs%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Set%20the%20number%20of%20physics%20simulation%20steps%20to%20run%20per%20second%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20rate%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2030%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getTickRate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getTickRate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22simulation%20rate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Get%20the%20number%20of%20physics%20simulation%20steps%20to%20run%20per%20second%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setPosition%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setPosition%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22go%20to%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%20%5Bspace%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Position%20Sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20space%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22SpaceTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22world%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20applyForce%20(target%2C%20ftype%2C%20x%2C%20y%2C%20dir%2C%20pow)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20applyAngForce%20(target%2C%20pow)%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setVelocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setVelocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20velocity%20to%20sx%3A%20%5Bsx%5D%20sy%3A%20%5Bsy%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20Velocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sx%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sy%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeVelocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.changeVelocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22change%20velocity%20by%20sx%3A%20%5Bsx%5D%20sy%3A%20%5Bsy%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Change%20Velocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sx%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sy%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getVelocityX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getVelocityX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22x%20velocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22get%20the%20x%20velocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getVelocityY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getVelocityY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22y%20velocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22get%20the%20y%20velocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22applyForce%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.applyForce%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22push%20with%20force%20%5Bforce%5D%20in%20direction%20%5Bdir%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Push%20this%20object%20in%20a%20given%20direction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20force%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2025%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20dir%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.ANGLE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22applyAngForce%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.applyAngForce%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22spin%20with%20force%20%5Bforce%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Push%20this%20object%20in%20a%20given%20direction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20force%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20500%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setAngVelocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setAngVelocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20angular%20velocity%20to%20%5Bforce%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20the%20angular%20velocity%20of%20the%20sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20force%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2030%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getAngVelocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getAngVelocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22angular%20velocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Get%20the%20angular%20velocity%20of%20the%20sprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setStatic%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setStatic%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20fixed%20to%20%5Bstatic%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Sets%20whether%20this%20block%20is%20static%20or%20dynamic%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20static%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22StaticTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22static%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getStatic%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getStatic%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22fixed%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22get%20whether%20this%20sprite%20is%20fixed%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setDensity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setDensity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20density%20to%20%5Bdensity%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20the%20density%20of%20the%20object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20density%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22DensityTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setDensityValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22setDensity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setDensityValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20density%20to%20%5Bdensity%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20the%20density%20of%20the%20object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20density%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getDensity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getDensity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22density%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Get%20the%20density%20of%20the%20object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setFriction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setFriction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20friction%20to%20%5Bfriction%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20the%20friction%20of%20the%20object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20friction%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22FrictionTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2050%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setFrictionValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22setFriction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setFrictionValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20friction%20to%20%5Bfriction%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20the%20friction%20value%20of%20the%20object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20friction%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2050%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getFriction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getFriction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22friction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Get%20the%20friction%20of%20the%20object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setRestitution%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setRestitution%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20bounce%20to%20%5Brestitution%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20the%20bounce%20of%20the%20object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20restitution%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22RestitutionTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2020%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setRestitutionValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22setRestitution%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setRestitutionValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20bounce%20to%20%5Brestitution%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20the%20bounce%20value%20of%20the%20object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20restitution%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2020%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getRestitution%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getRestitution%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22bounce%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Get%20the%20bounce%20value%20of%20the%20object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setProperties%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setProperties%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22set%20density%20%5Bdensity%5D%20roughness%20%5Bfriction%5D%20bounce%20%5Brestitution%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Set%20the%20density%20of%20the%20object%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20density%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22DensityTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20friction%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22FrictionTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2050%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20restitution%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22RestitutionTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2020%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20opcode%3A%20'pinSprite'%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20id%3A%20'griffpatch.pinSprite'%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20default%3A%20'pin%20to%20world%20at%20sprite%5C's%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20description%3A%20'Pin%20the%20sprite'%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20x%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20y%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getTouching%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getTouching%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22list%20sprites%20touching%20%5Bwhere%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22get%20the%20name%20of%20any%20sprites%20we%20are%20touching%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20where%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22WhereTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22any%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Scene%20Scrolling%20-------------------%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setScroll%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.setScroll%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22set%20scroll%20to%20x%3A%20%5Box%5D%20y%3A%20%5Boy%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Sets%20whether%20this%20block%20is%20static%20or%20dynamic%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ox%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20oy%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeScroll%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.changeScroll%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22change%20scroll%20by%20x%3A%20%5Box%5D%20y%3A%20%5Boy%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Sets%20whether%20this%20block%20is%20static%20or%20dynamic%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ox%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20oy%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getScrollX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getScrollX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22x%20scroll%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22get%20the%20x%20scroll%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getScrollY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%22griffpatch.getScrollY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22y%20scroll%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22get%20the%20y%20scroll%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20StageTypes%3A%20this.STAGE_TYPE_MENU%2C%0A%20%20%20%20%20%20%20%20%20%20SpaceTypes%3A%20this.SPACE_TYPE_MENU%2C%0A%20%20%20%20%20%20%20%20%20%20WhereTypes%3A%20this.WHERE_TYPE_MENU%2C%0A%20%20%20%20%20%20%20%20%20%20ShapeTypes%3A%20this.SHAPE_TYPE_MENU%2C%0A%20%20%20%20%20%20%20%20%20%20EnableModeTypes%3A%20this.ENABLE_TYPES_TYPE_MENU%2C%0A%20%20%20%20%20%20%20%20%20%20StaticTypes%3A%20this.STATIC_TYPE_MENU%2C%0A%20%20%20%20%20%20%20%20%20%20FrictionTypes%3A%20this.FRICTION_TYPE_MENU%2C%0A%20%20%20%20%20%20%20%20%20%20RestitutionTypes%3A%20this.RESTITUTION_TYPE_MENU%2C%0A%20%20%20%20%20%20%20%20%20%20DensityTypes%3A%20this.DENSITY_TYPE_MENU%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20get%20STAGE_TYPE_MENU()%20%7B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22boxed%20stage%22%2C%20value%3A%20STAGE_TYPE_OPTIONS.BOXED%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22open%20(with%20floor)%22%2C%20value%3A%20STAGE_TYPE_OPTIONS.FLOOR%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22open%20(no%20floor)%22%2C%20value%3A%20STAGE_TYPE_OPTIONS.OPEN%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20get%20SPACE_TYPE_MENU()%20%7B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22in%20world%22%2C%20value%3A%20SPACE_TYPE_OPTIONS.WORLD%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22on%20stage%22%2C%20value%3A%20SPACE_TYPE_OPTIONS.STAGE%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22relative%22%2C%20value%3A%20SPACE_TYPE_OPTIONS.RELATIVE%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20get%20WHERE_TYPE_MENU()%20%7B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22any%22%2C%20value%3A%20WHERE_TYPE_OPTIONS.ANY%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22feet%22%2C%20value%3A%20WHERE_TYPE_OPTIONS.FEET%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20get%20SHAPE_TYPE_MENU()%20%7B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22this%20costume%22%2C%20value%3A%20SHAPE_TYPE_OPTIONS.COSTUME%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22this%20circle%22%2C%20value%3A%20SHAPE_TYPE_OPTIONS.CIRCLE%20%7D%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20%7B%20text%3A%20%22this%20polygon%22%2C%20value%3A%20SHAPE_TYPE_OPTIONS.SVG_POLYGON%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22all%20sprites%22%2C%20value%3A%20SHAPE_TYPE_OPTIONS.ALL%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20get%20ENABLE_TYPES_TYPE_MENU()%20%7B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22normal%22%2C%20value%3A%20%22normal%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22precision%22%2C%20value%3A%20%22bullet%22%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20get%20STATIC_TYPE_MENU()%20%7B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22free%22%2C%20value%3A%20%22dynamic%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22fixed%20in%20place%22%2C%20value%3A%20%22static%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22fixed%20(but%20can%20rotate)%22%2C%20value%3A%20%22pinned%22%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20get%20DENSITY_TYPE_MENU()%20%7B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22very%20light%22%2C%20value%3A%20%2225%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22light%22%2C%20value%3A%20%2250%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22normal%22%2C%20value%3A%20%22100%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22heavy%22%2C%20value%3A%20%22200%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22very%20heavy%22%2C%20value%3A%20%22400%22%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20get%20FRICTION_TYPE_MENU()%20%7B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22none%22%2C%20value%3A%20%220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22smooth%22%2C%20value%3A%20%2220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22normal%22%2C%20value%3A%20%2250%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22rough%22%2C%20value%3A%20%2275%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22extremely%20rough%22%2C%20value%3A%20%22100%22%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20get%20RESTITUTION_TYPE_MENU()%20%7B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22none%22%2C%20value%3A%20%220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22little%22%2C%20value%3A%20%2210%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22normal%22%2C%20value%3A%20%2220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22quite%20bouncy%22%2C%20value%3A%20%2240%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22very%20bouncy%22%2C%20value%3A%20%2270%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22unstable%22%2C%20value%3A%20%22100%22%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Play%20a%20drum%20sound%20for%20some%20number%20of%20beats.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20x%20-%20x%20offset.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20y%20-%20y%20offset.%0A%20%20%20%20%20*%2F%0A%20%20%20%20doTick()%20%7B%0A%20%20%20%20%20%20%2F%2F%20args%2C%20util)%20%7B%0A%20%20%20%20%20%20%2F%2F%20this._playDrumForBeats(args.DRUM%2C%20args.BEATS%2C%20util)%3B%0A%20%20%20%20%20%20%2F%2F%20if%20(util.runtime.audioEngine%20%3D%3D%3D%20null)%20return%3B%0A%20%20%20%20%20%20%2F%2F%20if%20(util.target.sprite.soundBank%20%3D%3D%3D%20null)%20return%3B%0A%0A%20%20%20%20%20%20%2F%2F%20const%20dx%20%3D%20Cast.toNumber(args.x)%3B%0A%20%20%20%20%20%20%2F%2F%20const%20dy%20%3D%20Cast.toNumber(args.y)%3B%0A%0A%20%20%20%20%20%20%2F%2F%20const%20allTargets%20%3D%20this.runtime.targets%3B%0A%20%20%20%20%20%20%2F%2F%20if%20(allTargets%20%3D%3D%3D%20null)%20return%3B%0A%20%20%20%20%20%20%2F%2F%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20allTargets.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20const%20target%20%3D%20allTargets%5Bi%5D%3B%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20if%20(!target.isStage)%20%7B%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20target.setXY(target.x%20%2B%20dx%2C%20target.y%20%2B%20dy)%3B%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20util.target.setXY(util.target.x%20%2B%20dx%2C%20util.target.y%20%2B%20dy)%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Matter.Engine.update(this.engine%2C%201000%20%2F%2030)%3B%0A%20%20%20%20%20%20this._checkMoved()%3B%0A%0A%20%20%20%20%20%20%2F%2F%20world.Step(1%20%2F%2030%2C%2010%2C%2010)%3B%0A%20%20%20%20%20%20world.Step(1%20%2F%20tickRate%2C%2010%2C%2010)%3B%0A%20%20%20%20%20%20world.ClearForces()%3B%0A%0A%20%20%20%20%20%20for%20(const%20targetID%20in%20bodies)%20%7B%0A%20%20%20%20%20%20%20%20const%20body%20%3D%20bodies%5BtargetID%5D%3B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20this.runtime.getTargetById(targetID)%3B%0A%20%20%20%20%20%20%20%20if%20(!target)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Drop%20target%20from%20simulation%0A%20%20%20%20%20%20%20%20%20%20world.DestroyBody(body)%3B%0A%20%20%20%20%20%20%20%20%20%20delete%20bodies%5BtargetID%5D%3B%0A%20%20%20%20%20%20%20%20%20%20delete%20prevPos%5BtargetID%5D%3B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20const%20position%20%3D%20body.GetPosition()%3B%0A%0A%20%20%20%20%20%20%20%20_setXY(%0A%20%20%20%20%20%20%20%20%20%20target%2C%0A%20%20%20%20%20%20%20%20%20%20position.x%20*%20zoom%20-%20_scroll.x%2C%0A%20%20%20%20%20%20%20%20%20%20position.y%20*%20zoom%20-%20_scroll.y%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20if%20(target.rotationStyle%20%3D%3D%3D%20ROTATION_STYLE_ALL_AROUND)%20%7B%0A%20%20%20%20%20%20%20%20%20%20target.setDirection(90%20-%20body.GetAngle()%20%2F%20toRad)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20prevPos%5BtargetID%5D%20%3D%20%7B%20x%3A%20target.x%2C%20y%3A%20target.y%2C%20dir%3A%20target.direction%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setTickRate(args)%20%7B%0A%20%20%20%20%20%20let%20rate%20%3D%20Scratch.Cast.toNumber(args.rate)%3B%0A%20%20%20%20%20%20if%20(Number.isNaN(rate)%20%7C%7C%20rate%20%3D%3D%3D%20Infinity)%20rate%20%3D%2030%3B%0A%20%20%20%20%20%20rate%20%3D%20Math.max(rate%2C%200.01)%3B%0A%0A%20%20%20%20%20%20tickRate%20%3D%20rate%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getTickRate()%20%7B%0A%20%20%20%20%20%20return%20tickRate%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_checkMoved()%20%7B%0A%20%20%20%20%20%20for%20(const%20targetID%20in%20bodies)%20%7B%0A%20%20%20%20%20%20%20%20const%20body%20%3D%20bodies%5BtargetID%5D%3B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20this.runtime.getTargetById(targetID)%3B%0A%20%20%20%20%20%20%20%20if%20(!target)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Drop%20target%20from%20simulation%0A%20%20%20%20%20%20%20%20%20%20world.DestroyBody(body)%3B%0A%20%20%20%20%20%20%20%20%20%20delete%20bodies%5BtargetID%5D%3B%0A%20%20%20%20%20%20%20%20%20%20delete%20prevPos%5BtargetID%5D%3B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20const%20prev%20%3D%20prevPos%5BtargetID%5D%3B%0A%20%20%20%20%20%20%20%20const%20fixedRotation%20%3D%0A%20%20%20%20%20%20%20%20%20%20target.rotationStyle%20!%3D%3D%20ROTATION_STYLE_ALL_AROUND%3B%0A%0A%20%20%20%20%20%20%20%20if%20(prev%20%26%26%20(prev.x%20!%3D%3D%20target.x%20%7C%7C%20prev.y%20!%3D%3D%20target.y))%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20pos%20%3D%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20%20%20%20%20(target.x%20%2B%20_scroll.x)%20%2F%20zoom%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20(target.y%20%2B%20_scroll.y)%20%2F%20zoom%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20this._setPosition(body%2C%20pos)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!fixedRotation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20body.SetAngle((90%20-%20target.direction)%20*%20toRad)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20body.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(!fixedRotation%20%26%26%20prev%20%26%26%20prev.dir%20!%3D%3D%20target.direction)%20%7B%0A%20%20%20%20%20%20%20%20%20%20body.SetAngle((90%20-%20target.direction)%20*%20toRad)%3B%0A%20%20%20%20%20%20%20%20%20%20body.SetAwake(true)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Play%20a%20drum%20sound%20for%20some%20number%20of%20beats.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20x%20-%20x%20offset.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20y%20-%20y%20offset.%0A%20%20%20%20%20*%2F%0A%20%20%20%20setPhysicsAll()%20%7B%0A%20%20%20%20%20%20const%20allTargets%20%3D%20this.runtime.targets%3B%0A%20%20%20%20%20%20if%20(allTargets%20%3D%3D%3D%20null)%20return%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20allTargets.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20allTargets%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20(!target.isStage%20%26%26%20!bodies%5Btarget.id%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.setPhysicsFor(target)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Play%20a%20drum%20sound%20for%20some%20number%20of%20beats.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20util%20-%20utility%20object%20provided%20by%20the%20runtime.%0A%20%20%20%20%20*%20%40property%20%7Bstring%7D%20shape%20-%20the%20shape%0A%20%20%20%20%20*%2F%0A%20%20%20%20setPhysics(args%2C%20util)%20%7B%0A%20%20%20%20%20%20%2F%2F%20this._playDrumForBeats(args.DRUM%2C%20args.BEATS%2C%20util)%3B%0A%20%20%20%20%20%20%2F%2F%20if%20(util.runtime.audioEngine%20%3D%3D%3D%20null)%20return%3B%0A%20%20%20%20%20%20%2F%2F%20if%20(util.target.sprite.soundBank%20%3D%3D%3D%20null)%20return%3B%0A%0A%20%20%20%20%20%20%2F%2F%20const%20dx%20%3D%20Cast.toNumber(args.x)%3B%0A%20%20%20%20%20%20%2F%2F%20const%20dy%20%3D%20Cast.toNumber(args.y)%3B%0A%0A%20%20%20%20%20%20if%20(args.shape%20%3D%3D%3D%20SHAPE_TYPE_OPTIONS.ALL)%20%7B%0A%20%20%20%20%20%20%20%20this.setPhysicsAll()%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0A%20%20%20%20%20%20const%20body%20%3D%20this.setPhysicsFor(target%2C%20args.shape)%3B%0A%20%20%20%20%20%20if%20(body)%20%7B%0A%20%20%20%20%20%20%20%20body.SetBullet(args.mode%20%3D%3D%3D%20%22bullet%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setPhysicsFor(target%2C%20shape)%20%7B%0A%20%20%20%20%20%20const%20r%20%3D%20this.runtime.renderer%3B%0A%20%20%20%20%20%20const%20drawable%20%3D%20r._allDrawables%5Btarget.drawableID%5D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Tell%20the%20Drawable%20about%20its%20updated%20convex%20hullPoints%2C%20if%20necessary.%0A%20%20%20%20%20%20if%20(drawable.needsConvexHullPoints())%20%7B%0A%20%20%20%20%20%20%20%20const%20points%20%3D%20r._getConvexHullPointsForDrawable(target.drawableID)%3B%0A%20%20%20%20%20%20%20%20drawable.setConvexHullPoints(points)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20if%20(drawable._transformDirty)%20%7B%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20drawable._calculateTransform()%3B%0A%20%20%20%20%20%20%2F%2F%20%7D%0A%20%20%20%20%20%20%2F%2F%20const%20points%20%3D%20drawable._getTransformedHullPoints()%3B%0A%20%20%20%20%20%20%2F%2F%0A%20%20%20%20%20%20%2F%2F%20const%20hullPoints%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%2F%2F%20for%20(const%20i%20in%20points)%20%7B%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20hullPoints.push(%7Bx%3A%20points%5Bi%5D%5B0%5D%20-%20target.x%2C%20y%3A%20points%5Bi%5D%5B1%5D%20-%20target.y%7D)%3B%0A%20%20%20%20%20%20%2F%2F%20%7D%0A%0A%20%20%20%20%20%20const%20points%20%3D%20drawable._convexHullPoints%3B%0A%20%20%20%20%20%20const%20scaleX%20%3D%20drawable.scale%5B0%5D%20%2F%20100%3B%0A%20%20%20%20%20%20const%20scaleY%20%3D%20drawable.scale%5B1%5D%20%2F%20-100%3B%20%2F%2F%20Flip%20Y%20for%20hulls%0A%20%20%20%20%20%20const%20offset%20%3D%20drawable.skin.rotationCenter%3B%0A%20%20%20%20%20%20let%20allHulls%20%3D%20null%3B%0A%0A%20%20%20%20%20%20if%20(shape%20%3D%3D%3D%20SHAPE_TYPE_OPTIONS.CIRCLE)%20%7B%0A%20%20%20%20%20%20%20%20fixDef.shape%20%3D%20new%20b2CircleShape()%3B%0A%20%20%20%20%20%20%20%20const%20size%20%3D%20drawable.skin.size%3B%0A%20%20%20%20%20%20%20%20fixDef.shape.SetRadius(%0A%20%20%20%20%20%20%20%20%20%20(size%5B0%5D%20*%20Math.abs(scaleX)%20%2B%20size%5B1%5D%20*%20Math.abs(scaleY))%20%2F%204.0%20%2F%20zoom%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20fixDef.shape.SetRadius((drawable.getBounds().width%20%2F%202)%20%2F%20zoom)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(shape%20%3D%3D%3D%20SHAPE_TYPE_OPTIONS.SVG_POLYGON)%20%7B%0A%20%20%20%20%20%20%20%20const%20svg%20%3D%20drawable._skin._svgRenderer._svgTag%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20recurse%20through%20childNodes%20of%20type%20'g'%2C%20looking%20for%20type%20'path'%0A%0A%20%20%20%20%20%20%20%20const%20hullPoints%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20if%20(svg)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._fetchPolygonPointsFromSVG(%0A%20%20%20%20%20%20%20%20%20%20%20%20svg%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hullPoints%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20offset%5B0%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20offset%5B1%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20scaleX%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20scaleY%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20_definePolyFromHull(hullPoints%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20allHulls%20%3D%20hullPoints%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20const%20hullPoints%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20for%20(const%20i%20in%20points)%20%7B%0A%20%20%20%20%20%20%20%20%20%20hullPoints.push(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20(points%5Bi%5D%5B0%5D%20-%20offset%5B0%5D)%20*%20scaleX%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20(points%5Bi%5D%5B1%5D%20-%20offset%5B1%5D)%20*%20scaleY%2C%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20_definePolyFromHull(hullPoints)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20fixedRotation%20%3D%20target.rotationStyle%20!%3D%3D%20ROTATION_STYLE_ALL_AROUND%3B%0A%20%20%20%20%20%20const%20body%20%3D%20_placeBody(%0A%20%20%20%20%20%20%20%20target.id%2C%0A%20%20%20%20%20%20%20%20target.x%2C%0A%20%20%20%20%20%20%20%20target.y%2C%0A%20%20%20%20%20%20%20%20fixedRotation%20%3F%2090%20%3A%20target.direction%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20if%20(target.rotationStyle%20!%3D%3D%20ROTATION_STYLE_ALL_AROUND)%20%7B%0A%20%20%20%20%20%20%20%20body.SetFixedRotation(true)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(allHulls)%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20allHulls.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20_definePolyFromHull(allHulls%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20body.CreateFixture(fixDef)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20body%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20disablePhysics(args%2C%20util)%20%7B%0A%20%20%20%20%20%20_removeBody(util.target.id)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%0A%20%20%20%20%20*%20%40param%20svg%20the%20svg%20element%0A%20%20%20%20%20*%20%40param%20%7BArray%7D%20hullPointsList%20array%20of%20points%0A%20%20%20%20%20*%20%40private%0A%20%20%20%20%20*%2F%0A%20%20%20%20_fetchPolygonPointsFromSVG(svg%2C%20hullPointsList%2C%20ox%2C%20oy%2C%20scaleX%2C%20scaleY)%20%7B%0A%20%20%20%20%20%20if%20(svg.tagName%20%3D%3D%3D%20%22g%22%20%7C%7C%20svg.tagName%20%3D%3D%3D%20%22svg%22)%20%7B%0A%20%20%20%20%20%20%20%20if%20(svg.hasChildNodes())%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(const%20node%20of%20svg.childNodes)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._fetchPolygonPointsFromSVG(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20node%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20hullPointsList%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ox%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20oy%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20scaleX%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20scaleY%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(svg.tagName%20!%3D%3D%20%22path%22)%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%20This%20is%20it%20boys!%20Get%20that%20svg%20data%20%3A)%0A%20%20%20%20%20%20%2F%2F%20%3Cpath%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20d%3D%22M%201%20109.7118%20L%201%201.8097%20L%2060.3049%2038.0516%20L%20117.9625%201.8097%20L%20117.9625%20109.7118%20L%2059.8931%2073.8817%20Z%20%22%0A%20%20%20%20%20%20%2F%2F%20%20data-paper-data%3D%22%7B%26quot%3BorigPos%26quot%3B%3Anull%7D%22%20stroke-width%3D%222%22%20fill%3D%22%239966ff%22%2F%3E%0A%0A%20%20%20%20%20%20let%20fx%3B%0A%20%20%20%20%20%20let%20fy%3B%0A%0A%20%20%20%20%20%20const%20hullPoints%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20hullPointsList.push(hullPoints)%3B%0A%0A%20%20%20%20%20%20const%20tokens%20%3D%20svg.getAttribute(%22d%22).split(%22%20%22)%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20tokens.length%3B%20)%20%7B%0A%20%20%20%20%20%20%20%20const%20token%20%3D%20tokens%5Bi%2B%2B%5D%3B%0A%20%20%20%20%20%20%20%20if%20(token%20%3D%3D%3D%20%22M%22%20%7C%7C%20token%20%3D%3D%3D%20%22L%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20x%20%3D%20Cast.toNumber(tokens%5Bi%2B%2B%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20y%20%3D%20Cast.toNumber(tokens%5Bi%2B%2B%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20hullPoints.push(%7B%20x%3A%20(x%20-%20ox)%20*%20scaleX%2C%20y%3A%20(y%20-%20oy)%20*%20scaleY%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(token%20%3D%3D%3D%20%22M%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fx%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20fy%20%3D%20y%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(token%20%3D%3D%3D%20%22Z%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20hullPoints.push(%7B%20x%3A%20(fx%20-%20ox)%20*%20scaleX%2C%20y%3A%20(fy%20-%20oy)%20*%20scaleY%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20applyForce(args%2C%20util)%20%7B%0A%20%20%20%20%20%20_applyForce(%0A%20%20%20%20%20%20%20%20util.target.id%2C%0A%20%20%20%20%20%20%20%20%22Impulse%22%2C%0A%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20Cast.toNumber(args.dir)%2C%0A%20%20%20%20%20%20%20%20Cast.toNumber(args.force)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20applyAngForce(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20body.ApplyTorque(-Cast.toNumber(args.force))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setAngVelocity(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20body.SetAngularVelocity(-Cast.toNumber(args.force))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getAngVelocity(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20vel%20%3D%20-body.GetAngularVelocity()%3B%0A%20%20%20%20%20%20return%20vel%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setDensity(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20body.GetFixtureList().SetDensity(Cast.toNumber(args.density)%20%2F%20100.0)%3B%0A%20%20%20%20%20%20body.ResetMassData()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getDensity(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20body.GetFixtureList().GetDensity()%20*%20100%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setFriction(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20body.GetFixtureList().SetFriction(Cast.toNumber(args.friction)%20%2F%20100.0)%3B%0A%20%20%20%20%20%20body.ResetMassData()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getFriction(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20body.GetFixtureList().GetFriction()%20*%20100%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setRestitution(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20body%0A%20%20%20%20%20%20%20%20.GetFixtureList()%0A%20%20%20%20%20%20%20%20.SetRestitution(Cast.toNumber(args.restitution)%20%2F%20100.0)%3B%0A%20%20%20%20%20%20body.ResetMassData()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getRestitution(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20body.GetFixtureList().GetRestitution()%20*%20100%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setProperties(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20body.GetFixtureList().SetDensity(Cast.toNumber(args.density)%20%2F%20100.0)%3B%0A%20%20%20%20%20%20body.GetFixtureList().SetFriction(Cast.toNumber(args.friction)%20%2F%20100.0)%3B%0A%20%20%20%20%20%20body%0A%20%20%20%20%20%20%20%20.GetFixtureList()%0A%20%20%20%20%20%20%20%20.SetRestitution(Cast.toNumber(args.restitution)%20%2F%20100.0)%3B%0A%20%20%20%20%20%20body.ResetMassData()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20pinSprite(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(!bodies%5Butil.target.id%5D)%20%7B%0A%20%20%20%20%20%20%20%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20x%20%3D%20Cast.toNumber(args.x)%3B%0A%20%20%20%20%20%20const%20y%20%3D%20Cast.toNumber(args.y)%3B%0A%0A%20%20%20%20%20%20_createJointOfType(%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%22Rotating%22%2C%0A%20%20%20%20%20%20%20%20util.target.id%2C%0A%20%20%20%20%20%20%20%20x%2C%0A%20%20%20%20%20%20%20%20y%2C%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20null%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Set's%20the%20sprites%20position.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20util%20-%20utility%20object%20provided%20by%20the%20runtime.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20x%20-%20x%20offset.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20y%20-%20y%20offset.%0A%20%20%20%20%20*%20%40property%20%7Bstring%7D%20space%20-%20Space%20type%20(SPACE_TYPE_OPTIONS)%0A%20%20%20%20%20*%2F%0A%20%20%20%20setPosition(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20x%20%3D%20Cast.toNumber(args.x)%3B%0A%20%20%20%20%20%20const%20y%20%3D%20Cast.toNumber(args.y)%3B%0A%20%20%20%20%20%20const%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%0A%20%20%20%20%20%20switch%20(args.space)%20%7B%0A%20%20%20%20%20%20%20%20case%20SPACE_TYPE_OPTIONS.STAGE%3A%0A%20%20%20%20%20%20%20%20%20%20_setXY(util.target%2C%20x%2C%20y)%3B%20%2F%2F%20Position%20on%20stage%20(after%20scroll)%0A%20%20%20%20%20%20%20%20%20%20if%20(body)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._setPosition(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20body%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20new%20b2Vec2((x%20%2B%20_scroll.x)%20%2F%20zoom%2C%20(y%20%2B%20_scroll.y)%20%2F%20zoom)%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20SPACE_TYPE_OPTIONS.RELATIVE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20_setXY(util.target%2C%20util.target.x%20%2B%20x%2C%20util.target.y%20%2B%20y)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(body)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20pos%20%3D%20body.GetPosition()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20pos2%20%3D%20new%20b2Vec2(pos.x%20%2B%20x%20%2F%20zoom%2C%20pos.y%20%2B%20y%20%2F%20zoom)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._setPosition(body%2C%20pos2)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20_setXY(util.target%2C%20x%20-%20_scroll.x%2C%20y%20-%20_scroll.y)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(body)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this._setPosition(body%2C%20new%20b2Vec2(x%20%2F%20zoom%2C%20y%20%2F%20zoom))%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20_setPosition(body%2C%20pos2)%20%7B%0A%20%20%20%20%20%20const%20md%20%3D%20pinned%5Bbody.uid%5D%3B%0A%20%20%20%20%20%20if%20(md)%20%7B%0A%20%20%20%20%20%20%20%20world.DestroyJoint(md)%3B%0A%20%20%20%20%20%20%20%20pinned%5Bbody.uid%5D%20%3D%20_createJointOfType(%0A%20%20%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%20%20%22Rotating%22%2C%0A%20%20%20%20%20%20%20%20%20%20body.uid%2C%0A%20%20%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%20%20pos2.x%20*%20zoom%2C%0A%20%20%20%20%20%20%20%20%20%20pos2.y%20*%20zoom%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20body.SetPosition(pos2)%3B%0A%20%20%20%20%20%20%2F%2F%20if%20(md)%20%7B%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20pinned%5Bbody.uid%5D%20%3D%20_createJointOfType(null%2C%20'Rotating'%2C%20body.uid%2C%200%2C%200%2C%20null%2C%20null%2C%20null)%3B%0A%20%20%20%20%20%20%2F%2F%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Set%20the%20sprites%20velocity.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20util%20-%20utility%20object%20provided%20by%20the%20runtime.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20sx%20-%20speed%20x.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20sy%20-%20speed%20y.%0A%20%20%20%20%20*%2F%0A%20%20%20%20setVelocity(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20body.SetAwake(true)%3B%0A%0A%20%20%20%20%20%20const%20x%20%3D%20Cast.toNumber(args.sx)%3B%0A%20%20%20%20%20%20const%20y%20%3D%20Cast.toNumber(args.sy)%3B%0A%20%20%20%20%20%20const%20force%20%3D%20new%20b2Vec2(x%2C%20y)%3B%0A%20%20%20%20%20%20force.Multiply(30%20%2F%20zoom)%3B%0A%20%20%20%20%20%20body.SetLinearVelocity(force)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Change%20the%20sprites%20velocity.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20util%20-%20utility%20object%20provided%20by%20the%20runtime.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20sx%20-%20speed%20x.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20sy%20-%20speed%20y.%0A%20%20%20%20%20*%2F%0A%20%20%20%20changeVelocity(args%2C%20util)%20%7B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(util.target)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20body.SetAwake(true)%3B%0A%0A%20%20%20%20%20%20const%20x%20%3D%20Cast.toNumber(args.sx)%3B%0A%20%20%20%20%20%20const%20y%20%3D%20Cast.toNumber(args.sy)%3B%0A%20%20%20%20%20%20const%20force%20%3D%20new%20b2Vec2(x%2C%20y)%3B%0A%20%20%20%20%20%20force.Multiply(30%20%2F%20zoom)%3B%0A%20%20%20%20%20%20force.Add(body.GetLinearVelocity())%3B%0A%20%20%20%20%20%20body.SetLinearVelocity(force)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Get%20the%20current%20tempo.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20util%20-%20utility%20object%20provided%20by%20the%20runtime.%0A%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20-%20the%20current%20tempo%2C%20in%20beats%20per%20minute.%0A%20%20%20%20%20*%2F%0A%20%20%20%20getStatic(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20type%20%3D%20body.GetType()%3B%0A%20%20%20%20%20%20return%20type%20%3D%3D%3D%20b2Body.b2_staticBody%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Get%20the%20current%20tempo.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20util%20-%20utility%20object%20provided%20by%20the%20runtime.%0A%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20-%20the%20current%20x%20velocity.%0A%20%20%20%20%20*%2F%0A%20%20%20%20getVelocityX(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20x%20%3D%20body.GetLinearVelocity().x%3B%0A%20%20%20%20%20%20return%20(x%20*%20zoom)%20%2F%2030%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Get%20the%20current%20tempo.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20util%20-%20utility%20object%20provided%20by%20the%20runtime.%0A%20%20%20%20%20*%20%40return%20%7Bboolean%7D%20-%20the%20current%20y%20velocity.%0A%20%20%20%20%20*%2F%0A%20%20%20%20getVelocityY(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20y%20%3D%20body.GetLinearVelocity().y%3B%0A%20%20%20%20%20%20return%20(y%20*%20zoom)%20%2F%2030%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Sets%20the%20static%20property%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20util%20-%20utility%20object%20provided%20by%20the%20runtime.%0A%20%20%20%20%20*%20%40property%20%7Bstring%7D%20static%20-%20static%20or%20not%0A%20%20%20%20%20*%2F%0A%20%20%20%20setStatic(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0A%20%20%20%20%20%20let%20body%20%3D%20bodies%5Butil.target.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20body%20%3D%20this.setPhysicsFor(target)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20body.SetType(%0A%20%20%20%20%20%20%20%20args.static%20%3D%3D%3D%20%22static%22%20%3F%20b2Body.b2_staticBody%20%3A%20b2Body.b2_dynamicBody%0A%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20const%20pos%20%3D%20new%20b2Vec2(%0A%20%20%20%20%20%20%20%20(target.x%20%2B%20_scroll.x)%20%2F%20zoom%2C%0A%20%20%20%20%20%20%20%20(target.y%20%2B%20_scroll.y)%20%2F%20zoom%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20const%20fixedRotation%20%3D%20target.rotationStyle%20!%3D%3D%20ROTATION_STYLE_ALL_AROUND%3B%0A%20%20%20%20%20%20body.SetPositionAndAngle(%0A%20%20%20%20%20%20%20%20pos%2C%0A%20%20%20%20%20%20%20%20fixedRotation%20%3F%200%20%3A%20(90%20-%20target.direction)%20*%20toRad%0A%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20if%20(args.static%20%3D%3D%3D%20%22pinned%22)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Find%20what's%20behind%20the%20sprite%20(pin%20to%20that)%0A%20%20%20%20%20%20%20%20const%20point%20%3D%20new%20b2AABB()%3B%0A%20%20%20%20%20%20%20%20point.lowerBound.SetV(pos)%3B%0A%20%20%20%20%20%20%20%20point.upperBound.SetV(pos)%3B%0A%20%20%20%20%20%20%20%20let%20body2ID%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20world.QueryAABB((fixture)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20body2%20%3D%20fixture.GetBody()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(body2%20!%3D%3D%20body%20%26%26%20fixture.TestPoint(pos.x%2C%20pos.y))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20body2ID%20%3D%20body2.uid%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20point)%3B%0A%0A%20%20%20%20%20%20%20%20pinned%5Btarget.id%5D%20%3D%20_createJointOfType(%0A%20%20%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%20%20%22Rotating%22%2C%0A%20%20%20%20%20%20%20%20%20%20target.id%2C%0A%20%20%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%20%20body2ID%2C%0A%20%20%20%20%20%20%20%20%20%20null%2C%0A%20%20%20%20%20%20%20%20%20%20null%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20const%20pin%20%3D%20pinned%5Btarget.id%5D%3B%0A%20%20%20%20%20%20%20%20if%20(pin)%20%7B%0A%20%20%20%20%20%20%20%20%20%20world.DestroyJoint(pin)%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20delete%20joints%5Bpin.I%5D%3B%0A%20%20%20%20%20%20%20%20%20%20delete%20pinned%5Btarget.id%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Sets%20the%20sprite%20offset%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20ox%20-%20x%20offset.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20oy%20-%20y%20offset.%0A%20%20%20%20%20*%2F%0A%20%20%20%20setScroll(args)%20%7B%0A%20%20%20%20%20%20this._checkMoved()%3B%0A%20%20%20%20%20%20_scroll.x%20%3D%20Cast.toNumber(args.ox)%3B%0A%20%20%20%20%20%20_scroll.y%20%3D%20Cast.toNumber(args.oy)%3B%0A%20%20%20%20%20%20this._repositionBodies()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Sets%20the%20sprite%20offset%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20ox%20-%20x%20offset.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20oy%20-%20y%20offset.%0A%20%20%20%20%20*%2F%0A%20%20%20%20changeScroll(args)%20%7B%0A%20%20%20%20%20%20this._checkMoved()%3B%0A%20%20%20%20%20%20_scroll.x%20%2B%3D%20Cast.toNumber(args.ox)%3B%0A%20%20%20%20%20%20_scroll.y%20%2B%3D%20Cast.toNumber(args.oy)%3B%0A%20%20%20%20%20%20this._repositionBodies()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Get%20the%20scroll%20x.%0A%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20-%20the%20current%20x%20velocity.%0A%20%20%20%20%20*%2F%0A%20%20%20%20getScrollX()%20%7B%0A%20%20%20%20%20%20return%20_scroll.x%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Get%20the%20scroll%20x.%0A%20%20%20%20%20*%20%40return%20%7Bnumber%7D%20-%20the%20current%20x%20velocity.%0A%20%20%20%20%20*%2F%0A%20%20%20%20getScrollY()%20%7B%0A%20%20%20%20%20%20return%20_scroll.y%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_repositionBodies()%20%7B%0A%20%20%20%20%20%20for%20(const%20targetID%20in%20bodies)%20%7B%0A%20%20%20%20%20%20%20%20const%20body%20%3D%20bodies%5BtargetID%5D%3B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20this.runtime.getTargetById(targetID)%3B%0A%20%20%20%20%20%20%20%20if%20(target)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20position%20%3D%20body.GetPosition()%3B%0A%20%20%20%20%20%20%20%20%20%20_setXY(%0A%20%20%20%20%20%20%20%20%20%20%20%20target%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20position.x%20*%20zoom%20-%20_scroll.x%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20position.y%20*%20zoom%20-%20_scroll.y%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20prevPos%5BtargetID%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20target.x%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20target.y%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20dir%3A%20target.direction%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getTouching(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20util.target%3B%0A%20%20%20%20%20%20const%20body%20%3D%20bodies%5Btarget.id%5D%3B%0A%20%20%20%20%20%20if%20(!body)%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20where%20%3D%20args.where%3B%0A%20%20%20%20%20%20let%20touching%20%3D%20%22%22%3B%0A%20%20%20%20%20%20const%20contacts%20%3D%20body.GetContactList()%3B%0A%20%20%20%20%20%20for%20(let%20ce%20%3D%20contacts%3B%20ce%3B%20ce%20%3D%20ce.next)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20noinspection%20JSBitwiseOperatorUsage%0A%20%20%20%20%20%20%20%20if%20(ce.contact.m_flags%20%26%20b2Contact.e_islandFlag)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20ce.contact.IsSensor()%20%3D%3D%3D%20true%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20ce.contact.IsEnabled()%20%3D%3D%3D%20false%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20ce.contact.IsTouching()%20%3D%3D%3D%20false%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20contact%20%3D%20ce.contact%3B%0A%20%20%20%20%20%20%20%20const%20fixtureA%20%3D%20contact.GetFixtureA()%3B%0A%20%20%20%20%20%20%20%20const%20fixtureB%20%3D%20contact.GetFixtureB()%3B%0A%20%20%20%20%20%20%20%20const%20bodyA%20%3D%20fixtureA.GetBody()%3B%0A%20%20%20%20%20%20%20%20const%20bodyB%20%3D%20fixtureB.GetBody()%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20const%20myFix%20%3D%20touchingB%20%3F%20fixtureA%20%3A%20fixtureB%3B%0A%0A%20%20%20%20%20%20%20%20const%20touchingB%20%3D%20bodyA%20%3D%3D%3D%20body%3B%0A%20%20%20%20%20%20%20%20if%20(where%20!%3D%3D%20%22any%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20man%20%3D%20new%20Box2D.Collision.b2WorldManifold()%3B%0A%20%20%20%20%20%20%20%20%20%20contact.GetWorldManifold(man)%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20man.m_points%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20const%20mx%20%3D%20man.m_normal.x%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20const%20my%20%3D%20man.m_normal.y%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(where%20%3D%3D%3D%20%22feet%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20if%20(my%20%3E%20-0.6)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20fixture%20%3D%20body.GetFixtureList()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20y%20%3D%20man.m_points%5B0%5D.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%20%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20fixture.m_aabb.lowerBound.y%20*%200.75%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fixture.m_aabb.upperBound.y%20*%200.25%0A%20%20%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20const%20lp%20%3D%20body.GetLocalPoint(man.m_points%5B0%5D).Normalize()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20if%20(lp.y)%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20const%20other%20%3D%20touchingB%20%3F%20bodyB%20%3A%20bodyA%3B%0A%20%20%20%20%20%20%20%20const%20uid%20%3D%20other.uid%3B%0A%20%20%20%20%20%20%20%20const%20target2%20%3D%20uid%0A%20%20%20%20%20%20%20%20%20%20%3F%20this.runtime.getTargetById(uid)%0A%20%20%20%20%20%20%20%20%20%20%3A%20this.runtime.getTargetForStage()%3B%0A%20%20%20%20%20%20%20%20if%20(target2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20name%20%3D%20target2.sprite.name%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(touching.length%20%3D%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20touching%20%3D%20name%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20touching%20%2B%3D%20%60%2C%24%7Bname%7D%60%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20touching%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Sets%20the%20stage%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20stageType%20-%20Stage%20Type.%0A%20%20%20%20%20*%2F%0A%20%20%20%20setStage(args)%20%7B%0A%20%20%20%20%20%20_setStageType(args.stageType)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Sets%20the%20gravity%0A%20%20%20%20%20*%20%40param%20%7Bobject%7D%20args%20-%20the%20block%20arguments.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20gx%20-%20Gravity%20x.%0A%20%20%20%20%20*%20%40property%20%7Bnumber%7D%20gy%20-%20Gravity%20y.%0A%20%20%20%20%20*%2F%0A%20%20%20%20setGravity(args)%20%7B%0A%20%20%20%20%20%20world.SetGravity(%0A%20%20%20%20%20%20%20%20new%20b2Vec2(Cast.toNumber(args.gx)%2C%20Cast.toNumber(args.gy))%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20for%20(const%20bodyID%20in%20bodies)%20%7B%0A%20%20%20%20%20%20%20%20bodies%5BbodyID%5D.SetAwake(true)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getGravityX()%20%7B%0A%20%20%20%20%20%20return%20world.GetGravity().x%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getGravityY()%20%7B%0A%20%20%20%20%20%20return%20world.GetGravity().y%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20Scratch3Griffpatch())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Tune%20Shark%20V3%0D%0A%2F%2F%20ID%3A%20SPtuneShark3%0D%0A%2F%2F%20Description%3A%20An%20advanced%20audio%20engine%2C%20providing%20complex%20sound%20control.%0D%0A%2F%2F%20By%3A%20SharkPool%0D%0A%2F%2F%20License%3A%20MIT%20AND%20LGPL-3.0%0D%0A%0D%0A%2F%2F%20Version%20V.3.5.2%0D%0A%2F%2F%20Thanks%20to%20HOME%20for%20the%20song%20%22Resonance%22%20being%20used%20as%20the%20default%20audio%20url%0D%0A%0D%0A(function%20(Scratch)%20%7B%0D%0A%20%20%22use%20strict%22%3B%0D%0A%20%20if%20(!Scratch.extensions.unsandboxed)%0D%0A%20%20%20%20throw%20new%20Error(Scratch.translate(%22Tune%20Shark%20V3%20must%20be%20run%20unsandboxed%22))%3B%0D%0A%0D%0A%20%20const%20menuIconURI%20%3D%0D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDIuMTg1IiBoZWlnaHQ9IjEwMi4xODUiIHZpZXdCb3g9IjAgMCAxMDIuMTg1IDEwMi4xODUiPjxnIHN0cm9rZS1taXRlcmxpbWl0PSIxMCI%2BPHBhdGggZD0iTTAgNTEuMDkzQzAgMjIuODc1IDIyLjg3NSAwIDUxLjA5MyAwczUxLjA5MyAyMi44NzUgNTEuMDkzIDUxLjA5My0yMi44NzUgNTEuMDkzLTUxLjA5MyA1MS4wOTNTMCA3OS4zMTEgMCA1MS4wOTMiIGZpbGw9IiM0MDQwNDAiLz48cGF0aCBkPSJNNC44NiA1MS4wOTNjMC0yNS41MzQgMjAuNy00Ni4yMzMgNDYuMjMzLTQ2LjIzMyAyNS41MzQgMCA0Ni4yMzMgMjAuNyA0Ni4yMzMgNDYuMjMzIDAgMjUuNTM0LTIwLjcgNDYuMjMzLTQ2LjIzMyA0Ni4yMzMtMjUuNTM0IDAtNDYuMjMzLTIwLjctNDYuMjMzLTQ2LjIzMyIgZmlsbD0iIzY2NiIvPjxwYXRoIGQ9Ik03Mi44MzcgODYuNjQzdi0uMDAzYy0xLjI1NCAyLjUzNi00LjY2OCAzLjkzNS04LjI2NCAzLjE5Ny00LjExOC0uODQ0LTYuOTE1LTQuMTctNi4yNDYtNy40MjguNjY4LTMuMjYgNC41NDgtNS4yMTYgOC42NjYtNC4zNzEgMS44NzUuMzg0IDMuNDc0IDEuMjg0IDQuNiAyLjQ1N2w2LjY4My0xNC4xNzhjLTEwLjU2Ni00LjEzNS0xOS43Ni01LjA5Ni0xOS43Ni01LjA5NmwtOC45ODcgMTkuMDYxYy0uOTY2IDIuOTI3LTQuNjM2IDQuNjIyLTguNTIgMy44MjYtNC4xMTctLjg0NC02LjkxNC00LjE3LTYuMjQ2LTcuNDMuNjY5LTMuMjU4IDQuNTQ4LTUuMjE0IDguNjY3LTQuMzcgMS45MS4zOTEgMy41MzYgMS4zMTcgNC42NjQgMi41MjJsMTIuMDM1LTI1LjUwN3MxMy41MzIuMjM2IDI2Ljk0NyA3LjExNHoiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJtMjguMzA5IDMwLjgzMSA0LjA0MyAyMy42ODQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2UtbGluZWNhcD0ic3F1YXJlIi8%2BPHBhdGggZD0iTTM0LjAzMyA1NS4yMTljMS4zOCAyLjYwNi0uNzcyIDYuMDQtNC44MDggNy42Ny00LjAzNyAxLjYzLTguNDI5LjgzNy05LjgxLTEuNzctMS4zOC0yLjYwNi43NzItNi4wNCA0LjgwOS03LjY3IDQuMDM2LTEuNjI5IDguNDI4LS44MzcgOS44MDkgMS43N20tNy45NS0yNy4wNjhzOS43MDUtMS43MDQgMTIuMzYzIDIuNzdjMi4zNzUgNCAuMDcxIDguNjk1LjIxMiAxMC4xMjguMTQgMS40MzMgMi4xNzUgMS4xMDkgMi4xNzUgMS4xMDlsLS4wMTQgMS42NzRzLTIuODY0LjY2OS0zLjQxMi0xLjMyYy0uNTQ3LTEuOTg4LS41Ni01Ljk3OC0yLjgyMy04LjIyNy0yLjI2NS0yLjI1LTcuNTM3LS43NTktNy41MzctLjc1OSIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik02MC40MzYgMzUuMzcxYy0uMzMzIDIuMTE4LTIuMzUzIDMuMzA5LTQuMTg5IDQuMDAyLTEuNjUuNzI2LTMuNTUgMS4wMDgtNS4yNzYuMzctMS42MzEtLjM4MS0zLjE4OC0xLjgwNy0yLjk5NC0zLjU5OC4xNTQtMi4wODUgMS44OTYtMy44MjIgMy44NDItNC40MDUgMS45NC0uNzk5IDQuMjUzLS43MyA2LjEwNS4yNi45MTMuNDIxIDIuMTg5LTE0LjE0MiAzLjAzNS0yMC41ODMuMS0uNjQyIDIuNTg0LS40NyAyLjUxMy4xNTEgMCAwLTEuODU0IDE1LjUyMi0zLjAzNiAyMy44MDMiIGZpbGw9IiNmZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvZz48L3N2Zz4%3D%22%3B%0D%0A%20%20const%20blockIconURI%20%3D%0D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3OC45NzQiIGhlaWdodD0iNzguOTc0IiB2aWV3Qm94PSIwIDAgNzguOTc0IDc4Ljk3NCI%2BPGcgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIj48cGF0aCBkPSJNMCA3OC45NzRWMGg3OC45NzR2NzguOTc0eiIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Im02MS4yMDIgNTMuODM2LS4wMDItLjAwM2MtLjA2OCAzLjcxLTMuMzM3IDcuMjgtOC4wMTYgOC40MTYtNS4zNTkgMS4zMDItMTAuNTM4LTEuMDgtMTEuNTY4LTUuMzJzMi40OC04LjczMyA3LjgzOS0xMC4wMzVjMi40NC0uNTkzIDQuODQtLjQyIDYuODMxLjM0MnYtMjAuNTZjLTE0Ljg1IDEuMDAzLTI2LjI5OCA1LjAwNi0yNi4yOTggNS4wMDZ2MjcuNjQ0Yy40OSA0LjAxNC0yLjkxNiA4LjA3OC03Ljk3IDkuMzA2LTUuMzU4IDEuMzAxLTEwLjUzNy0xLjA4MS0xMS41NjctNS4zMjFzMi40OC04LjczMyA3LjgzOC0xMC4wMzVjMi40ODYtLjYwNCA0LjkzMy0uNDE0IDYuOTQ2LjM4NGwuMDEyLTM2Ljk5OHMxNi4xOS03LjI5IDM1Ljk1NS02LjYzM3oiIGZpbGw9IiNmZmYiLz48L2c%2BPC9zdmc%2B%22%3B%0D%0A%0D%0A%20%20const%20extraIcons%20%3D%20%7B%0D%0A%20%20%20%20set%3A%20%22dpZHRoPSI3OC45NzQiIGhlaWdodD0iNzguOTc0IiB2aWV3Qm94PSIwIDAgNzguOTc0IDc4Ljk3NCI%2BPGcgc3Ryb2tlLXdpZHRoPSIwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiID48cGF0aCBkPSJtNjQuNTMzIDQyLjYxIDIuMDQyLjg1NWE1LjAyIDUuMDIgMCAwIDEgMi42OSA2LjU3bC0xLjM3IDMuMjc0YTUuMDIgNS4wMiAwIDAgMS02LjU3IDIuNjlsLTIuMDQyLS44NTVhMjUgMjUgMCAwIDEtNC4yOTUgNC4yNmwuODQgMi4wNWE1LjAyIDUuMDIgMCAwIDEtMi43NDIgNi41NDhsLTMuMjg1IDEuMzQ1YTUuMDIgNS4wMiAwIDAgMS02LjU0OC0yLjc0MmwtLjg0LTIuMDVhMjUgMjUgMCAwIDEtNi4wNDktLjAyMmwtLjg1NSAyLjA0MmE1LjAyIDUuMDIgMCAwIDEtNi41NyAyLjY5bC0zLjI3NC0xLjM3YTUuMDIgNS4wMiAwIDAgMS0yLjY5LTYuNTdsLjg1NS0yLjA0MmEyNSAyNSAwIDAgMS00LjI2LTQuMjk1bC0yLjA1Ljg0YTUuMDIgNS4wMiAwIDAgMS02LjU0OC0yLjc0MmwtMS4zNDUtMy4yODVhNS4wMiA1LjAyIDAgMCAxIDIuNzQyLTYuNTQ4bDIuMDUtLjg0YTI1IDI1IDAgMCAxIC4wMjItNi4wNDlsLTIuMDQyLS44NTVhNS4wMiA1LjAyIDAgMCAxLTIuNjktNi41N2wxLjM3LTMuMjc0YTUuMDIgNS4wMiAwIDAgMSA2LjU3LTIuNjlsMi4wNDIuODU1YTI1IDI1IDAgMCAxIDQuMjk1LTQuMjZsLS44NC0yLjA1YTUuMDIgNS4wMiAwIDAgMSAyLjc0Mi02LjU0OGwzLjI4NS0xLjM0NWE1LjAyIDUuMDIgMCAwIDEgNi41NDggMi43NDJsLjg0IDIuMDVhMjUgMjUgMCAwIDEgNi4wNDkuMDIybC44NTUtMi4wNDJhNS4wMiA1LjAyIDAgMCAxIDYuNTctMi42OWwzLjI3NCAxLjM3YTUuMDIgNS4wMiAwIDAgMSAyLjY5IDYuNTdsLS44NTUgMi4wNDJhMjUgMjUgMCAwIDEgNC4yNiA0LjI5NWwyLjA1LS44NGE1LjAyIDUuMDIgMCAwIDEgNi41NDggMi43NDJsMS4zNDUgMy4yODVhNS4wMiA1LjAyIDAgMCAxLTIuNzQyIDYuNTQ4bC0yLjA1Ljg0YTI1IDI1IDAgMCAxLS4wMjIgNi4wNDltLTM3LjQ5OC04LjMzOGMtMi44OCA2Ljg3Ny4zNiAxNC43ODcgNy4yMzcgMTcuNjY3czE0Ljc4Ny0uMzYgMTcuNjY3LTcuMjM3LS4zNi0xNC43ODctNy4yMzctMTcuNjY3LTE0Ljc4Ny4zNi0xNy42NjcgNy4yMzciIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNMCA3OC45NzRWMGg3OC45NzR2NzguOTc0eiIgZmlsbD0ibm9uZSIvPjwvZz48L3N2Zz4%3D%22%2C%0D%0A%20%20%20%20nob%3A%20%22dpZHRoPSI3OC45NzQiIGhlaWdodD0iNzguOTc0IiB2aWV3Qm94PSIwIDAgNzguOTc0IDc4Ljk3NCI%2BPGcgc3Ryb2tlLXdpZHRoPSIwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiPjxwYXRoIGQ9Ik0wIDc4Ljk3NFYwaDc4Ljk3NHY3OC45NzR6IiBmaWxsPSJub25lIi8%2BPHBhdGggZD0iTTM3Ljk2MSAxMC44NDdhMi4xMDUgMi4xMDUgMCAwIDEtMi4xMDQtMi4xMDRWNS42OTJjMC0xLjE2My45NDItMi4xMDUgMi4xMDQtMi4xMDVoMy4wNTJjMS4xNjIgMCAyLjEwNC45NDIgMi4xMDQgMi4xMDV2My4wNTFhMi4xMDUgMi4xMDUgMCAwIDEtMi4xMDQgMi4xMDV6bTAgNjQuNTRhMi4xMDUgMi4xMDUgMCAwIDEtMi4xMDQtMi4xMDV2LTMuMDUxYzAtMS4xNjIuOTQyLTIuMTA1IDIuMTA0LTIuMTA1aDMuMDUyYzEuMTYyIDAgMi4xMDQuOTQzIDIuMTA0IDIuMTA1djMuMDUxYTIuMTA1IDIuMTA1IDAgMCAxLTIuMTA0IDIuMTA1em0yMC42OTgtNTcuMjNhMi4xMDUgMi4xMDUgMCAwIDEgMC0yLjk3NmwyLjE1OC0yLjE1OGEyLjEwNSAyLjEwNSAwIDAgMSAyLjk3NiAwbDIuMTU4IDIuMTU4YTIuMTA1IDIuMTA1IDAgMCAxIDAgMi45NzZsLTIuMTU4IDIuMTU4YTIuMTA1IDIuMTA1IDAgMCAxLTIuOTc2IDB6TTEzLjAyMyA2My43OTNhMi4xMDUgMi4xMDUgMCAwIDEgMC0yLjk3NmwyLjE1OC0yLjE1OGEyLjEwNSAyLjEwNSAwIDAgMSAyLjk3NiAwbDIuMTU4IDIuMTU4YTIuMTA1IDIuMTA1IDAgMCAxIDAgMi45NzZsLTIuMTU4IDIuMTU4YTIuMTA1IDIuMTA1IDAgMCAxLTIuOTc2IDB6bTU1LjEwNC0yNS44MzJjMC0xLjE2Mi45NDItMi4xMDQgMi4xMDQtMi4xMDRoMy4wNTFjMS4xNjMgMCAyLjEwNS45NDIgMi4xMDUgMi4xMDR2My4wNTJhMi4xMDUgMi4xMDUgMCAwIDEtMi4xMDUgMi4xMDRoLTMuMDUxYTIuMTA1IDIuMTA1IDAgMCAxLTIuMTA1LTIuMTA0em0tNjQuNTQgMGMwLTEuMTYyLjk0Mi0yLjEwNCAyLjEwNS0yLjEwNGgzLjA1MWMxLjE2MiAwIDIuMTA1Ljk0MiAyLjEwNSAyLjEwNHYzLjA1MmEyLjEwNSAyLjEwNSAwIDAgMS0yLjEwNSAyLjEwNEg1LjY5MmEyLjEwNSAyLjEwNSAwIDAgMS0yLjEwNS0yLjEwNHptNTcuMjMgMjAuNjk4YTIuMTA1IDIuMTA1IDAgMCAxIDIuOTc2IDBsMi4xNTggMi4xNThhMi4xMDUgMi4xMDUgMCAwIDEgMCAyLjk3NmwtMi4xNTggMi4xNThhMi4xMDUgMi4xMDUgMCAwIDEtMi45NzYgMGwtMi4xNTgtMi4xNThhMi4xMDUgMi4xMDUgMCAwIDEgMC0yLjk3NnpNMTUuMTgxIDEzLjAyM2EyLjEwNSAyLjEwNSAwIDAgMSAyLjk3NiAwbDIuMTU4IDIuMTU4YTIuMTA1IDIuMTA1IDAgMCAxIDAgMi45NzZsLTIuMTU4IDIuMTU4YTIuMTA1IDIuMTA1IDAgMCAxLTIuOTc2IDBsLTIuMTU4LTIuMTU4YTIuMTA1IDIuMTA1IDAgMCAxIDAtMi45NzZ6bTguNDE2IDEwLjQzYzcuNTQ2LTcuNTQ3IDE5LjA2NS04LjcwMiAyNy44MjctMy40NjUtLjEyNS4wOS0xMy4yNjQgMTcuODcyLTEyLjEzMyAxOS4wMDNsMS4wMzcgMS4wMzdjMS4xMyAxLjEzIDE4LjkxMy0xMi4wMDggMTkuMDAzLTEyLjEzMyA1LjIzNyA4Ljc2MiA0LjA4MiAyMC4yOC0zLjQ2NSAyNy44MjgtOC45MTEgOC45MS0yMy4zNTkgOC45MS0zMi4yNyAwLTguOTEtOC45MTEtOC45MS0yMy4zNTkgMC0zMi4yNyIgZmlsbD0iI2ZmZiIvPjwvZz48L3N2Zz4%3D%22%2C%0D%0A%20%20%20%20flag%3A%20%22ZpZXdCb3g9IjAgMCAxNi42MyAxNy41Ij48cGF0aCBkPSJNLjc1IDJhNi40NCA2LjQ0IDAgMCAxIDcuNjkgMGgwYTYuNDQgNi40NCAwIDAgMCA3LjY5IDB2MTAuNGE2LjQ0IDYuNDQgMCAwIDEtNy42OSAwaDBhNi40NCA2LjQ0IDAgMCAwLTcuNjkgMCIgc3R5bGU9ImZpbGw6IzRjYmY1NjtzdHJva2U6IzQ1OTkzZDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiLz48cGF0aCBzdHlsZT0iZmlsbDojNGNiZjU2O3N0cm9rZTojNDU5OTNkO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6MS41cHgiIGQ9Ik0uNzUgMTYuNzV2LTE2Ii8%2BPC9zdmc%2B%22%2C%0D%0A%20%20%20%20stop%3A%20%22ZpZXdCb3g9IjAgMCAxNCAxNCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI%2BPHBhdGggc3R5bGU9ImZpbGw6I2VjNTk1OTtzdHJva2U6I2I4NDg0ODtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MTAiIGQ9Ik00LjMuNWg1LjRsMy44IDMuOHY1LjRsLTMuOCAzLjhINC4zTC41IDkuN1Y0LjN6Ii8%2BPC9zdmc%2B%22%2C%0D%0A%20%20%7D%3B%0D%0A%20%20for%20(const%20key%20in%20extraIcons)%20%7B%0D%0A%20%20%20%20extraIcons%5Bkey%5D%20%3D%0D%0A%20%20%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIH%22%20%2B%0D%0A%20%20%20%20%20%20extraIcons%5Bkey%5D%3B%0D%0A%20%20%7D%0D%0A%0D%0A%20%20%2F%2F%20Pizzicato%20(Library%20to%20simplify%20the%20way%20you%20create%20and%20manipulate%20sounds%20with%20the%20Web%20Audio%20API.)%0D%0A%20%20%2F%2F%20Original%3A%20https%3A%2F%2Fgithub.com%2Falemangui%2Fpizzicato%0D%0A%20%20%2F%2F%20Modified%20Version%3A%20https%3A%2F%2Fgithub.com%2FSharkPool-SP%2Fpizzicato%2F%0D%0A%20%20%2F*%0D%0A%20%20%20%20MIT%20License%0D%0A%0D%0A%20%20%20%20Copyright%20(c)%202016%20Alejandro%20Mantecon%20Guillen%0D%0A%0D%0A%20%20%20%20Permission%20is%20hereby%20granted%2C%20free%20of%20charge%2C%20to%20any%20person%20obtaining%20a%20copy%0D%0A%20%20%20%20of%20this%20software%20and%20associated%20documentation%20files%20(the%20%22Software%22)%2C%20to%20deal%0D%0A%20%20%20%20in%20the%20Software%20without%20restriction%2C%20including%20without%20limitation%20the%20rights%0D%0A%20%20%20%20to%20use%2C%20copy%2C%20modify%2C%20merge%2C%20publish%2C%20distribute%2C%20sublicense%2C%20and%2For%20sell%0D%0A%20%20%20%20copies%20of%20the%20Software%2C%20and%20to%20permit%20persons%20to%20whom%20the%20Software%20is%0D%0A%20%20%20%20furnished%20to%20do%20so%2C%20subject%20to%20the%20following%20conditions%3A%0D%0A%0D%0A%20%20%20%20The%20above%20copyright%20notice%20and%20this%20permission%20notice%20shall%20be%20included%20in%20all%0D%0A%20%20%20%20copies%20or%20substantial%20portions%20of%20the%20Software.%0D%0A%0D%0A%20%20%20%20THE%20SOFTWARE%20IS%20PROVIDED%20%22AS%20IS%22%2C%20WITHOUT%20WARRANTY%20OF%20ANY%20KIND%2C%20EXPRESS%20OR%0D%0A%20%20%20%20IMPLIED%2C%20INCLUDING%20BUT%20NOT%20LIMITED%20TO%20THE%20WARRANTIES%20OF%20MERCHANTABILITY%2C%0D%0A%20%20%20%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE%20AND%20NONINFRINGEMENT.%20IN%20NO%20EVENT%20SHALL%20THE%0D%0A%20%20%20%20AUTHORS%20OR%20COPYRIGHT%20HOLDERS%20BE%20LIABLE%20FOR%20ANY%20CLAIM%2C%20DAMAGES%20OR%20OTHER%20LIABILITY%2C%0D%0A%20%20%20%20WHETHER%20IN%20AN%20ACTION%20OF%20CONTRACT%2C%20TORT%20OR%20OTHERWISE%2C%20ARISING%20FROM%2C%20OUT%20OF%20OR%20IN%0D%0A%20%20%20%20CONNECTION%20WITH%20THE%20SOFTWARE%20OR%20THE%20USE%20OR%20OTHER%20DEALINGS%20IN%20THE%20SOFTWARE.%0D%0A%20%20*%2F%0D%0A%0D%0A%20%20%2F*%20eslint-disable%20*%2F%0D%0A%20%20%2F%2F%20prettier-ignore%0D%0A%20%20const%20PzInitializer%20%3D%20(function(e)%7B%22use%20strict%22%3Bvar%20h%3D%7B%7D%2Cu%3Dh%2Ct%3D%22undefined%22!%3Dtypeof%20window%3Fwindow.AudioContext%7C%7Cwindow.webkitAudioContext%3A%22undefined%22!%3Dtypeof%20global%3Fglobal.AudioContext%7C%7Cglobal.webkitAudioContext%3Anull%3Bif(!t)throw%20new%20Error(%22No%20AudioContext%20found%20in%20this%20environment.%22)%3Bh.context%3De%7C%7Cnew%20t%3Bvar%20i%3Dh.context.createGain()%3Bi.connect(h.context.destination)%2Ch.Util%3D%7BisString%3Afunction(e)%7Breturn%22%5Bobject%20String%5D%22%3D%3D%3DtoString.call(e)%7D%2CisObject%3Afunction(e)%7Breturn%22%5Bobject%20Object%5D%22%3D%3D%3DtoString.call(e)%7D%2CisFunction%3Afunction(e)%7Breturn%22%5Bobject%20Function%5D%22%3D%3D%3DtoString.call(e)%7D%2CisNumber%3Afunction(e)%7Breturn%22%5Bobject%20Number%5D%22%3D%3D%3DtoString.call(e)%26%26e%3D%3D%3D%2Be%7D%2CisArray%3Afunction(e)%7Breturn%22%5Bobject%20Array%5D%22%3D%3D%3DtoString.call(e)%7D%2CisInRange%3Afunction(e%2Ct%2Ci)%7Breturn!!(u.Util.isNumber(e)%26%26u.Util.isNumber(t)%26%26u.Util.isNumber(i))%26%26(t%3C%3De%26%26e%3C%3Di)%7D%2CisBool%3Afunction(e)%7Breturn%22boolean%22%3D%3Dtypeof%20e%7D%2CisOscillator%3Afunction(e)%7Breturn%20e%26%26%22%5Bobject%20OscillatorNode%5D%22%3D%3D%3De.toString()%7D%2CisAudioBufferSourceNode%3Afunction(e)%7Breturn%20e%26%26%22%5Bobject%20AudioBufferSourceNode%5D%22%3D%3D%3De.toString()%7D%2CisSound%3Afunction(e)%7Breturn%20e%20instanceof%20u.Sound%7D%2CisEffect%3Afunction(e)%7Bfor(var%20t%20in%20h.Effects)if(e%20instanceof%20h.Effects%5Bt%5D)return!0%3Breturn!1%7D%2Cnormalize%3Afunction(e%2Ct%2Ci)%7Bif(u.Util.isNumber(e)%26%26u.Util.isNumber(t)%26%26u.Util.isNumber(i))return(i-t)*e%2Bt%7D%2CgetDryLevel%3Afunction(e)%7Breturn!u.Util.isNumber(e)%7C%7C1%3Ce%7C%7Ce%3C0%3F0%3Ae%3C%3D.5%3F1%3A1-2*(e-.5)%7D%2CgetWetLevel%3Afunction(e)%7Breturn!u.Util.isNumber(e)%7C%7C1%3Ce%7C%7Ce%3C0%3F0%3A.5%3C%3De%3F1%3A1-2*(.5-e)%7D%7D%3Bvar%20e%3Dh.context.createGain()%2Ct%3DObject.getPrototypeOf(Object.getPrototypeOf(e))%2Cn%3Dt.connect%3Bt.connect%3Dfunction(e)%7Bvar%20t%3Du.Util.isEffect(e)%3Fe.inputNode%3Ae%3Breturn%20n.call(this%2Ct)%2Ce%7D%2CObject.defineProperty(h%2C%22volume%22%2C%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20i.gain.value%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26i%26%26(i.gain.value%3De)%7D%7D)%2CObject.defineProperty(h%2C%22masterGainNode%22%2C%7Benumerable%3A!1%2Cget%3Afunction()%7Breturn%20i%7D%2Cset%3Afunction(e)%7Bconsole.error(%22Can't%20set%20the%20master%20gain%20node%22)%7D%7D)%2Ch.Events%3D%7Bon%3Afunction(e%2Ct%2Ci)%7Be%26%26t%26%26(this._events%3Dthis._events%7C%7C%7B%7D%2C(this._events%5Be%5D%7C%7C(this._events%5Be%5D%3D%5B%5D)).push(%7Bcallback%3At%2Ccontext%3Ai%7C%7Cthis%2Chandler%3Athis%7D))%7D%2Ctrigger%3Afunction(e)%7Bvar%20t%2Ci%2Cn%2Co%3Bif(e%26%26(this._events%3Dthis._events%7C%7C%7B%7D%2Ct%3Dthis._events%5Be%5D%7C%7C(this._events%5Be%5D%3D%5B%5D)))%7Bfor(i%3DMath.max(0%2Carguments.length-1)%2Cn%3D%5B%5D%2Co%3D0%3Bo%3Ci%3Bo%2B%2B)n%5Bo%5D%3Darguments%5Bo%2B1%5D%3Bfor(o%3D0%3Bo%3Ct.length%3Bo%2B%2B)t%5Bo%5D.callback.apply(t%5Bo%5D.context%2Cn)%7D%7D%2Coff%3Afunction(e)%7Be%3Fthis._events%5Be%5D%3Dvoid%200%3Athis._events%3D%7B%7D%7D%7D%2Ch.Sound%3Dfunction(e%2Ct)%7Bvar%20o%3Dthis%2Cs%3Dh.Util%2Ci%3Dfunction(e)%7Bif(e%26%26!s.isFunction(e)%26%26!s.isString(e)%26%26!s.isObject(e))return%22Description%20type%20not%20supported.%20Initialize%20a%20sound%20using%20an%20object%2C%20a%20function%20or%20a%20string.%22%3Bif(s.isObject(e))return%20s.isString(e.source)%26%26-1!%3D%3D%5B%22wave%22%2C%22file%22%2C%22input%22%2C%22script%22%2C%22sound%22%2C%22buffer%22%5D.indexOf(e.source)%3F%22file%22!%3D%3De.source%7C%7Ce.options%26%26e.options.path%3F%22script%22!%3D%3De.source%7C%7Ce.options%26%26e.options.audioFunction%3Fvoid%200%3A%22An%20audio%20function%20is%20needed%20for%20sounds%20with%20a%20script%20source%22%3A%22A%20path%20is%20needed%20for%20sounds%20with%20a%20file%20source%22%3A%22Specified%20source%20not%20supported.%20Sources%20can%20be%20wave%2C%20file%2C%20input%20or%20script%22%7D(e)%2Cn%3Ds.isObject(e)%26%26s.isObject(e.options)%3Bif(i)throw%20console.error(i)%2Cnew%20Error(%22Error%20initializing%20Pizzicato%20Sound%3A%20%22%2Bi)%3Bfunction%20a(i%2Ce)%7Bi%3Di%7C%7C%7B%7D%2Cthis.getRawSourceNode%3Dfunction()%7Bvar%20e%3Dthis.sourceNode%3Fthis.sourceNode.frequency.value%3Ai.frequency%2Ct%3Dh.context.createOscillator()%3Breturn%20t.type%3Di.type%7C%7C%22sine%22%2Ct.frequency.value%3De%7C%7C440%2Ct%7D%2Cthis.sourceNode%3Dthis.getRawSourceNode()%2Cthis.sourceNode.gainSuccessor%3Du.context.createGain()%2Cthis.sourceNode.connect(this.sourceNode.gainSuccessor)%2Cs.isFunction(e)%26%26e()%7Dfunction%20r(t%2Ci)%7Bt%3Ds.isArray(t)%3Ft%3A%5Bt%5D%3Bvar%20n%3Dnew%20XMLHttpRequest%3Bn.open(%22GET%22%2Ct%5B0%5D%2C!0)%2Cn.responseType%3D%22arraybuffer%22%2Cn.onload%3Dfunction(e)%7Bh.context.decodeAudioData(e.target.response%2Cfunction(t)%7Bo.getRawSourceNode%3Dfunction()%7Bvar%20e%3Dh.context.createBufferSource()%3Breturn%20e.loop%3Dthis.loop%2Ce.buffer%3Dt%2Ce%7D%2Cs.isFunction(i)%26%26i()%7D.bind(o)%2Cfunction(e)%7Bif(console.error(%22Error%20decoding%20audio%20file%20%22%2Bt%5B0%5D)%2C1%3Ct.length)return%20t.shift()%2Cvoid%20r(t%2Ci)%3Be%3De%7C%7Cnew%20Error(%22Error%20decoding%20audio%20file%20%22%2Bt%5B0%5D)%2Cs.isFunction(i)%26%26i(e)%7D.bind(o))%7D%2Cn.onreadystatechange%3Dfunction(e)%7B4%3D%3D%3Dn.readyState%26%26200!%3D%3Dn.status%26%26console.error(%22Error%20while%20fetching%20%22%2Bt%5B0%5D%2B%22.%20%22%2Bn.statusText)%7D%2Cn.send()%7Dfunction%20c(e%2Ct)%7Bvar%20i%3Ds.isFunction(e)%3Fe%3Ae.audioFunction%2Cn%3Ds.isObject(e)%26%26e.bufferSize%3Fe.bufferSize%3Anull%3Bif(!n)try%7Bh.context.createScriptProcessor()%7Dcatch(e)%7Bn%3D2048%7Dthis.getRawSourceNode%3Dfunction()%7Bvar%20e%3Dh.context.createScriptProcessor(n%2C1%2C1)%3Breturn%20e.onaudioprocess%3Di%2Ce%7D%7Dthis.detached%3Dn%26%26e.options.detached%2Cthis.masterVolume%3Dh.context.createGain()%2Cthis.fadeNode%3Dh.context.createGain()%2Cthis.fadeNode.gain.value%3D0%2Cthis.detached%7C%7Cthis.masterVolume.connect(h.masterGainNode)%2Cthis.lastTimePlayed%3D0%2Cthis.effects%3D%5B%5D%2Cthis.effectConnectors%3D%5B%5D%2Cthis.playing%3Dthis.paused%3D!1%2Cthis.loop%3Dn%26%26e.options.loop%2Cthis.attack%3Dn%26%26s.isNumber(e.options.attack)%3Fe.options.attack%3A.04%2Cthis.volume%3Dn%26%26s.isNumber(e.options.volume)%3Fe.options.volume%3A1%2Cn%26%26s.isNumber(e.options.release)%3Fthis.release%3De.options.release%3An%26%26s.isNumber(e.options.sustain)%3F(console.warn(%22'sustain'%20is%20deprecated.%20Use%20'release'%20instead.%22)%2Cthis.release%3De.options.sustain)%3Athis.release%3D.04%2Ce%3Fs.isString(e)%3Fr.bind(this)(e%2Ct)%3As.isFunction(e)%3Fc.bind(this)(e%2Ct)%3A%22file%22%3D%3D%3De.source%3Fr.bind(this)(e.options.path%2Ct)%3A%22wave%22%3D%3D%3De.source%3Fa.bind(this)(e.options%2Ct)%3A%22input%22%3D%3D%3De.source%3Ffunction(e%2Ct)%7Bif(navigator.getUserMedia%3Dnavigator.getUserMedia%7C%7Cnavigator.webkitGetUserMedia%7C%7Cnavigator.mozGetUserMedia%7C%7Cnavigator.msGetUserMedia%2C!navigator.getUserMedia%26%26(!navigator.mediaDevices%7C%7Cnavigator.mediaDevices.getUserMedia))return%20void%20console.error(%22Your%20browser%20does%20not%20support%20getUserMedia.%20Note%20that%20the%20current%20document%20must%20be%20loaded%20securely%20for%20this%20to%20work%22)%3Bfunction%20i(e)%7Bs.isFunction(t)%26%26t(e)%7Dvar%20n%3Dfunction(e)%7Bo.getRawSourceNode%3Dfunction()%7Breturn%20h.context.createMediaStreamSource(e)%7D%2Cs.isFunction(t)%26%26t()%7D.bind(o)%3Bnavigator.mediaDevices.getUserMedia%3Fnavigator.mediaDevices.getUserMedia(%7Baudio%3A!0%7D).then(n).catch(i)%3Anavigator.getUserMedia(%7Baudio%3A!0%7D%2Cn%2Ci)%7D.bind(this)(e%2Ct)%3A%22script%22%3D%3D%3De.source%3Fc.bind(this)(e.options%2Ct)%3A%22sound%22%3D%3D%3De.source%3Ffunction(e%2Ct)%7Bthis.getRawSourceNode%3De.sound.getRawSourceNode%2Ce.sound.sourceNode%26%26u.Util.isOscillator(e.sound.sourceNode)%26%26(this.sourceNode%3Dthis.getRawSourceNode()%2Cthis.frequency%3De.sound.frequency)%7D.bind(this)(e.options%2Ct)%3A%22buffer%22%3D%3D%3De.source%26%26function(e%2Ct)%7Bvar%20i%3DArray.isArray(e)%3Fe%5B0%5D%3Ae%3Bi%20instanceof%20AudioBuffer%3F(this.getRawSourceNode%3Dfunction()%7Blet%20e%3Dh.context.createBufferSource()%3Breturn%20e.loop%3Dthis.loop%2Ce.buffer%3Di%2Ce%7D%2C%22function%22%3D%3Dtypeof%20t%26%26t())%3Aconsole.error(%22Invalid%20buffer%20provided.%20Expected%20an%20AudioBuffer.%22)%7D.bind(this)(e.options.buffer%2Ct)%3Aa.bind(this)(%7B%7D%2Ct)%7D%2Ch.Sound.prototype%3DObject.create(h.Events%2C%7Bplay%3A%7Benumerable%3A!0%2Cvalue%3Afunction(e%2Ct)%7Bthis.playing%7C%7C(u.Util.isNumber(t)%7C%7C(t%3Dthis.offsetTime%7C%7C0)%2Cu.Util.isNumber(e)%7C%7C(e%3D0)%2Cthis.playing%3D!0%2Cthis.paused%3D!1%2Cthis.sourceNode%3Dthis.getSourceNode()%2Cthis.applyAttack()%2Cu.Util.isFunction(this.sourceNode.start)%26%26(this.lastTimePlayed%3Dh.context.currentTime-t%2Cthis.sourceNode.start(u.context.currentTime%2Be%2Ct))%2Cthis.trigger(%22play%22))%7D%7D%2Cstop%3A%7Benumerable%3A!0%2Cvalue%3Afunction()%7B(this.paused%7C%7Cthis.playing)%26%26(this.paused%3Dthis.playing%3D!1%2Cthis.stopWithRelease()%2Cthis.offsetTime%3D0%2Cthis.trigger(%22stop%22))%7D%7D%2Cpause%3A%7Benumerable%3A!0%2Cvalue%3Afunction()%7Bvar%20e%3B!this.paused%26%26this.playing%26%26(this.paused%3D!0%2Cthis.playing%3D!1%2Cthis.stopWithRelease()%2Ce%3Du.context.currentTime-this.lastTimePlayed%2Cthis.sourceNode.buffer%3Fthis.offsetTime%3De%25(this.sourceNode.buffer.length%2Fu.context.sampleRate)%3Athis.offsetTime%3De%2Cthis.trigger(%22pause%22))%7D%7D%2Cclone%3A%7Benumerable%3A!0%2Cvalue%3Afunction()%7Bfor(var%20e%3Dnew%20h.Sound(%7Bsource%3A%22sound%22%2Coptions%3A%7Bloop%3Athis.loop%2Cattack%3Athis.attack%2Crelease%3Athis.release%2Cvolume%3Athis.volume%2Csound%3Athis%7D%7D)%2Ct%3D0%3Bt%3Cthis.effects.length%3Bt%2B%2B)e.addEffect(this.effects%5Bt%5D)%3Breturn%20e%7D%7D%2ConEnded%3A%7Benumerable%3A!0%2Cvalue%3Afunction(e)%7Breturn%20function()%7Bthis.sourceNode%26%26this.sourceNode!%3D%3De%7C%7C(this.playing%26%26this.stop()%2Cthis.paused%7C%7Cthis.trigger(%22end%22))%7D%7D%7D%2CaddEffect%3A%7Benumerable%3A!0%2Cvalue%3Afunction(e)%7Bif(!u.Util.isEffect(e))return%20console.error(%22The%20object%20provided%20is%20not%20a%20Pizzicato%20effect.%22)%2Cthis%3Bthis.effects.push(e)%3Bvar%20t%3D0%3Cthis.effectConnectors.length%3Fthis.effectConnectors%5Bthis.effectConnectors.length-1%5D%3Athis.fadeNode%3Bt.disconnect()%2Ct.connect(e)%3Bt%3Du.context.createGain()%3Breturn%20this.effectConnectors.push(t)%2Ce.connect(t)%2Ct.connect(this.masterVolume)%2Cthis%7D%7D%2CremoveEffect%3A%7Benumerable%3A!0%2Cvalue%3Afunction(e)%7Bvar%20t%3Dthis.effects.indexOf(e)%3Bif(-1%3D%3D%3Dt)return%20console.warn(%22Cannot%20remove%20effect%20that%20is%20not%20applied%20to%20this%20sound.%22)%2Cthis%3Bvar%20i%3Dthis.playing%3Bi%26%26this.pause()%3Bvar%20n%3D0%3D%3D%3Dt%3Fthis.fadeNode%3Athis.effectConnectors%5Bt-1%5D%3Bn.disconnect()%3Bvar%20o%3Dthis.effectConnectors%5Bt%5D%3Breturn%20o.disconnect()%2Ce.disconnect(o)%2Cthis.effectConnectors.splice(t%2C1)%2Cthis.effects.splice(t%2C1)%2Ct%3Dt%3Ethis.effects.length-1%7C%7C0%3D%3D%3Dthis.effects.length%3Fthis.masterVolume%3Athis.effects%5Bt%5D%2Cn.connect(t)%2Ci%26%26this.play()%2Cthis%7D%7D%2Cconnect%3A%7Benumerable%3A!0%2Cvalue%3Afunction(e)%7Breturn%20this.masterVolume.connect(e)%2Cthis%7D%7D%2Cdisconnect%3A%7Benumerable%3A!0%2Cvalue%3Afunction(e)%7Breturn%20this.masterVolume.disconnect(e)%2Cthis%7D%7D%2CconnectEffects%3A%7Benumerable%3A!0%2Cvalue%3Afunction()%7Bfor(var%20e%3D%5B%5D%2Ct%3D0%3Bt%3Cthis.effects.length%3Bt%2B%2B)%7Bvar%20i%3Dt%3D%3D%3Dthis.effects.length-1%3Fthis.masterVolume%3Athis.effects%5Bt%2B1%5D.inputNode%3Be%5Bt%5D%3Du.context.createGain()%2Cthis.effects%5Bt%5D.outputNode.disconnect(this.effectConnectors%5Bt%5D)%2Cthis.effects%5Bt%5D.outputNode.connect(i)%7D%7D%7D%2Cvolume%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Bif(this.masterVolume)return%20this.masterVolume.gain.value%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26this.masterVolume%26%26(this.masterVolume.gain.value%3De)%7D%7D%2Cfrequency%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.sourceNode%26%26u.Util.isOscillator(this.sourceNode)%3Fthis.sourceNode.frequency.value%3Anull%7D%2Cset%3Afunction(e)%7Bthis.sourceNode%26%26u.Util.isOscillator(this.sourceNode)%26%26(this.sourceNode.frequency.value%3De)%7D%7D%2Csustain%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20console.warn(%22'sustain'%20is%20deprecated.%20Use%20'release'%20instead.%22)%2Cthis.release%7D%2Cset%3Afunction(e)%7Bconsole.warn(%22'sustain'%20is%20deprecated.%20Use%20'release'%20instead.%22)%2Cu.Util.isInRange(e%2C0%2C10)%26%26(this.release%3De)%7D%7D%2CgetSourceNode%3A%7Benumerable%3A!0%2Cvalue%3Afunction()%7Bvar%20e%3Bthis.sourceNode%26%26((e%3Dthis.sourceNode).gainSuccessor.gain.setValueAtTime(e.gainSuccessor.gain.value%2Cu.context.currentTime)%2Ce.gainSuccessor.gain.linearRampToValueAtTime(1e-4%2Cu.context.currentTime%2B.2)%2CsetTimeout(function()%7Be.disconnect()%2Ce.gainSuccessor.disconnect()%7D%2C200))%3Bvar%20t%3Dthis.getRawSourceNode()%3Breturn%20t.gainSuccessor%3Du.context.createGain()%2Ct.connect(t.gainSuccessor)%2Ct.gainSuccessor.connect(this.fadeNode)%2Cthis.fadeNode.connect(this.getInputNode())%2Cu.Util.isAudioBufferSourceNode(t)%26%26(t.onended%3Dthis.onEnded(t).bind(this))%2Ct%7D%7D%2CgetInputNode%3A%7Benumerable%3A!0%2Cvalue%3Afunction()%7Breturn%200%3Cthis.effects.length%3Fthis.effects%5B0%5D.inputNode%3Athis.masterVolume%7D%7D%2CapplyAttack%3A%7Benumerable%3A!1%2Cvalue%3Afunction()%7Bvar%20e%2Ct%3Bthis.fadeNode.gain.value%3Bthis.fadeNode.gain.cancelScheduledValues(u.context.currentTime)%2Cthis.attack%3F(e%3D-1%3Cnavigator.userAgent.toLowerCase().indexOf(%22firefox%22)%2Ct%3Dthis.attack%2Ce%7C%7C(t%3D(1-this.fadeNode.gain.value)*this.attack)%2Cthis.fadeNode.gain.setTargetAtTime(1%2Cu.context.currentTime%2C2*t))%3Athis.fadeNode.gain.setTargetAtTime(1%2Cu.context.currentTime%2C.001)%7D%7D%2CstopWithRelease%3A%7Benumerable%3A!1%2Cvalue%3Afunction(e)%7Bfunction%20t()%7Breturn%20u.Util.isFunction(i.stop)%3Fi.stop(0)%3Ai.disconnect()%7Dvar%20i%3Dthis.sourceNode%3Bthis.fadeNode.gain.value%3Bif(this.fadeNode.gain.cancelScheduledValues(u.context.currentTime)%2C!this.release)return%20this.fadeNode.gain.setTargetAtTime(0%2Cu.context.currentTime%2C.001)%2Cvoid%20t()%3Bvar%20n%3D-1%3Cnavigator.userAgent.toLowerCase().indexOf(%22firefox%22)%2Co%3Dthis.release%3Bn%7C%7C(o%3Dthis.fadeNode.gain.value*this.release)%2Cthis.fadeNode.gain.setTargetAtTime(1e-5%2Cu.context.currentTime%2Co%2F5)%2Cwindow.setTimeout(function()%7Bt()%7D%2C1e3*o)%7D%7D%7D)%2Ch.Group%3Dfunction(e)%7Be%3De%7C%7C%5B%5D%2Cthis.mergeGainNode%3Du.context.createGain()%2Cthis.masterVolume%3Du.context.createGain()%2Cthis.sounds%3D%5B%5D%2Cthis.effects%3D%5B%5D%2Cthis.effectConnectors%3D%5B%5D%2Cthis.mergeGainNode.connect(this.masterVolume)%2Cthis.masterVolume.connect(u.masterGainNode)%3Bfor(var%20t%3D0%3Bt%3Ce.length%3Bt%2B%2B)this.addSound(e%5Bt%5D)%7D%2Ch.Group.prototype%3DObject.create(u.Events%2C%7Bconnect%3A%7Benumerable%3A!0%2Cvalue%3Afunction(e)%7Breturn%20this.masterVolume.connect(e)%2Cthis%7D%7D%2Cdisconnect%3A%7Benumerable%3A!0%2Cvalue%3Afunction(e)%7Breturn%20this.masterVolume.disconnect(e)%2Cthis%7D%7D%2CaddSound%3A%7Benumerable%3A!0%2Cvalue%3Afunction(e)%7Bu.Util.isSound(e)%3F-1%3Cthis.sounds.indexOf(e)%3Fconsole.warn(%22The%20Pizzicato.Sound%20object%20was%20already%20added%20to%20this%20group%22)%3Ae.detached%3Fconsole.warn(%22Groups%20do%20not%20support%20detached%20sounds.%20You%20can%20manually%20create%20an%20audio%20graph%20to%20group%20detached%20sounds%20together.%22)%3A(e.disconnect(u.masterGainNode)%2Ce.connect(this.mergeGainNode)%2Cthis.sounds.push(e))%3Aconsole.error(%22You%20can%20only%20add%20Pizzicato.Sound%20objects%22)%7D%7D%2CremoveSound%3A%7Benumerable%3A!0%2Cvalue%3Afunction(e)%7Bvar%20t%3Dthis.sounds.indexOf(e)%3B-1!%3D%3Dt%3F(e.disconnect(this.mergeGainNode)%2Ce.connect(u.masterGainNode)%2Cthis.sounds.splice(t%2C1))%3Aconsole.warn(%22Cannot%20remove%20a%20sound%20that%20is%20not%20part%20of%20this%20group.%22)%7D%7D%2Cvolume%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Bif(this.masterVolume)return%20this.masterVolume.gain.value%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.masterVolume.gain.value%3De)%7D%7D%2Cplay%3A%7Benumerable%3A!0%2Cvalue%3Afunction()%7Bfor(var%20e%3D0%3Be%3Cthis.sounds.length%3Be%2B%2B)this.sounds%5Be%5D.play()%3Bthis.trigger(%22play%22)%7D%7D%2Cstop%3A%7Benumerable%3A!0%2Cvalue%3Afunction()%7Bfor(var%20e%3D0%3Be%3Cthis.sounds.length%3Be%2B%2B)this.sounds%5Be%5D.stop()%3Bthis.trigger(%22stop%22)%7D%7D%2Cpause%3A%7Benumerable%3A!0%2Cvalue%3Afunction()%7Bfor(var%20e%3D0%3Be%3Cthis.sounds.length%3Be%2B%2B)this.sounds%5Be%5D.pause()%3Bthis.trigger(%22pause%22)%7D%7D%2CaddEffect%3A%7Benumerable%3A!0%2Cvalue%3Afunction(e)%7Bif(!u.Util.isEffect(e))return%20console.error(%22The%20object%20provided%20is%20not%20a%20Pizzicato%20effect.%22)%2Cthis%3Bthis.effects.push(e)%3Bvar%20t%3D0%3Cthis.effectConnectors.length%3Fthis.effectConnectors%5Bthis.effectConnectors.length-1%5D%3Athis.mergeGainNode%3Bt.disconnect()%2Ct.connect(e)%3Bt%3Du.context.createGain()%3Breturn%20this.effectConnectors.push(t)%2Ce.connect(t)%2Ct.connect(this.masterVolume)%2Cthis%7D%7D%2CremoveEffect%3A%7Benumerable%3A!0%2Cvalue%3Afunction(e)%7Bvar%20t%3Dthis.effects.indexOf(e)%3Bif(-1%3D%3D%3Dt)return%20console.warn(%22Cannot%20remove%20effect%20that%20is%20not%20applied%20to%20this%20group.%22)%2Cthis%3Bvar%20i%3D0%3D%3D%3Dt%3Fthis.mergeGainNode%3Athis.effectConnectors%5Bt-1%5D%3Bi.disconnect()%3Bvar%20n%3Dthis.effectConnectors%5Bt%5D%3Breturn%20n.disconnect()%2Ce.disconnect(n)%2Cthis.effectConnectors.splice(t%2C1)%2Cthis.effects.splice(t%2C1)%2Ct%3Dt%3Ethis.effects.length-1%7C%7C0%3D%3D%3Dthis.effects.length%3Fthis.masterVolume%3Athis.effects%5Bt%5D%2Ci.connect(t)%2Cthis%7D%7D%7D)%2Ch.Effects%3D%7B%7D%3Be%3DObject.create(null%2C%7Bconnect%3A%7Benumerable%3A!0%2Cvalue%3Afunction(e)%7Breturn%20this.outputNode.connect(e)%2Cthis%7D%7D%2Cdisconnect%3A%7Benumerable%3A!0%2Cvalue%3Afunction(e)%7Breturn%20this.outputNode.disconnect(e)%2Cthis%7D%7D%7D)%3Bfunction%20o(e%2Ct)%7Bthis.options%3D%7B%7D%2Ce%3De%7C%7Cthis.options%3Bvar%20i%2Cn%3D%7Bfrequency%3A350%2Cpeak%3A1%7D%3Bfor(i%20in%20this.inputNode%3Dthis.filterNode%3Du.context.createBiquadFilter()%2Cthis.filterNode.type%3Dt%2Cthis.outputNode%3Dh.context.createGain()%2Cthis.filterNode.connect(this.outputNode)%2Cn)this%5Bi%5D%3De%5Bi%5D%2Cthis%5Bi%5D%3D(void%200%3D%3D%3Dthis%5Bi%5D%7C%7Cnull%3D%3D%3Dthis%5Bi%5D%3Fn%3Athis)%5Bi%5D%7Dh.Effects.Delay%3Dfunction(e)%7Bthis.options%3D%7B%7D%2Ce%3De%7C%7Cthis.options%3Bvar%20t%2Ci%3D%7Bfeedback%3A.5%2Ctime%3A.3%2Cmix%3A.5%7D%3Bfor(t%20in%20this.inputNode%3Dh.context.createGain()%2Cthis.outputNode%3Dh.context.createGain()%2Cthis.dryGainNode%3Dh.context.createGain()%2Cthis.wetGainNode%3Dh.context.createGain()%2Cthis.feedbackGainNode%3Dh.context.createGain()%2Cthis.delayNode%3Dh.context.createDelay()%2Cthis.inputNode.connect(this.dryGainNode)%2Cthis.dryGainNode.connect(this.outputNode)%2Cthis.delayNode.connect(this.feedbackGainNode)%2Cthis.feedbackGainNode.connect(this.delayNode)%2Cthis.inputNode.connect(this.delayNode)%2Cthis.delayNode.connect(this.wetGainNode)%2Cthis.wetGainNode.connect(this.outputNode)%2Ci)this%5Bt%5D%3De%5Bt%5D%2Cthis%5Bt%5D%3D(void%200%3D%3D%3Dthis%5Bt%5D%7C%7Cnull%3D%3D%3Dthis%5Bt%5D%3Fi%3Athis)%5Bt%5D%7D%2Ch.Effects.Delay.prototype%3DObject.create(e%2C%7Bmix%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.mix%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.options.mix%3De%2Cthis.dryGainNode.gain.value%3Dh.Util.getDryLevel(this.mix)%2Cthis.wetGainNode.gain.value%3Dh.Util.getWetLevel(this.mix))%7D%7D%2Ctime%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.time%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C180)%26%26(this.options.time%3De%2Cthis.delayNode.delayTime.value%3De)%7D%7D%2Cfeedback%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.feedback%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.options.feedback%3DparseFloat(e%2C10)%2Cthis.feedbackGainNode.gain.value%3Dthis.feedback)%7D%7D%7D)%2Ch.Effects.Compressor%3Dfunction(e)%7Bthis.options%3D%7B%7D%2Ce%3De%7C%7Cthis.options%3Bvar%20t%2Ci%3D%7Bthreshold%3A-24%2Cknee%3A30%2Cattack%3A.003%2Crelease%3A.25%2Cratio%3A12%7D%3Bfor(t%20in%20this.inputNode%3Dthis.compressorNode%3Dh.context.createDynamicsCompressor()%2Cthis.outputNode%3Dh.context.createGain()%2Cthis.compressorNode.connect(this.outputNode)%2Ci)this%5Bt%5D%3De%5Bt%5D%2Cthis%5Bt%5D%3D(void%200%3D%3D%3Dthis%5Bt%5D%7C%7Cnull%3D%3D%3Dthis%5Bt%5D%3Fi%3Athis)%5Bt%5D%7D%2Ch.Effects.Compressor.prototype%3DObject.create(e%2C%7Bthreshold%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.compressorNode.threshold.value%7D%2Cset%3Afunction(e)%7Bh.Util.isInRange(e%2C-100%2C0)%26%26(this.compressorNode.threshold.value%3De)%7D%7D%2Cknee%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.compressorNode.knee.value%7D%2Cset%3Afunction(e)%7Bh.Util.isInRange(e%2C0%2C40)%26%26(this.compressorNode.knee.value%3De)%7D%7D%2Cattack%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.compressorNode.attack.value%7D%2Cset%3Afunction(e)%7Bh.Util.isInRange(e%2C0%2C1)%26%26(this.compressorNode.attack.value%3De)%7D%7D%2Crelease%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.compressorNode.release.value%7D%2Cset%3Afunction(e)%7Bh.Util.isInRange(e%2C0%2C1)%26%26(this.compressorNode.release.value%3De)%7D%7D%2Cratio%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.compressorNode.ratio.value%7D%2Cset%3Afunction(e)%7Bh.Util.isInRange(e%2C1%2C20)%26%26(this.compressorNode.ratio.value%3De)%7D%7D%2CgetCurrentGainReduction%3Afunction()%7Breturn%20this.compressorNode.reduction%7D%7D)%2Ch.Effects.LowPassFilter%3Dfunction(e)%7Bo.call(this%2Ce%2C%22lowpass%22)%7D%2Ch.Effects.HighPassFilter%3Dfunction(e)%7Bo.call(this%2Ce%2C%22highpass%22)%7D%3Bt%3DObject.create(e%2C%7Bfrequency%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.filterNode.frequency.value%7D%2Cset%3Afunction(e)%7Bh.Util.isInRange(e%2C10%2C22050)%26%26(this.filterNode.frequency.value%3De)%7D%7D%2Cpeak%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.filterNode.Q.value%7D%2Cset%3Afunction(e)%7Bh.Util.isInRange(e%2C1e-4%2C1e3)%26%26(this.filterNode.Q.value%3De)%7D%7D%7D)%3Bfunction%20s()%7Bfor(var%20e%2Ct%3Du.context.sampleRate*this.time%2Ci%3Dh.context.createBuffer(2%2Ct%2Cu.context.sampleRate)%2Cn%3Di.getChannelData(0)%2Co%3Di.getChannelData(1)%2Cs%3D0%3Bs%3Ct%3Bs%2B%2B)e%3Dthis.reverse%3Ft-s%3As%2Cn%5Bs%5D%3D(2*Math.random()-1)*Math.pow(1-e%2Ft%2Cthis.decay)%2Co%5Bs%5D%3D(2*Math.random()-1)*Math.pow(1-e%2Ft%2Cthis.decay)%3Bthis.reverbNode.buffer%26%26(this.inputNode.disconnect(this.reverbNode)%2Cthis.reverbNode.disconnect(this.wetGainNode)%2Cthis.reverbNode%3Dh.context.createConvolver()%2Cthis.inputNode.connect(this.reverbNode)%2Cthis.reverbNode.connect(this.wetGainNode))%2Cthis.reverbNode.buffer%3Di%7Dh.Effects.LowPassFilter.prototype%3Dt%2Ch.Effects.HighPassFilter.prototype%3Dt%2Ch.Effects.Distortion%3Dfunction(e)%7Bthis.options%3D%7B%7D%2Ce%3De%7C%7Cthis.options%3Bvar%20t%2Ci%3D%7Bgain%3A.5%7D%3Bfor(t%20in%20this.waveShaperNode%3Dh.context.createWaveShaper()%2Cthis.inputNode%3Dthis.outputNode%3Dthis.waveShaperNode%2Ci)this%5Bt%5D%3De%5Bt%5D%2Cthis%5Bt%5D%3D(void%200%3D%3D%3Dthis%5Bt%5D%7C%7Cnull%3D%3D%3Dthis%5Bt%5D%3Fi%3Athis)%5Bt%5D%7D%2Ch.Effects.Distortion.prototype%3DObject.create(e%2C%7Bgain%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.gain%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.options.gain%3De%2Cthis.adjustGain())%7D%7D%2CadjustGain%3A%7Bwritable%3A!1%2Cconfigurable%3A!1%2Cenumerable%3A!1%2Cvalue%3Afunction()%7Bfor(var%20e%2Ct%3Du.Util.isNumber(this.options.gain)%3FparseInt(100*this.options.gain%2C10)%3A50%2Ci%3Dnew%20Float32Array(44100)%2Cn%3DMath.PI%2F180%2Co%3D0%3Bo%3C44100%3B%2B%2Bo)e%3D2*o%2F44100-1%2Ci%5Bo%5D%3D(3%2Bt)*e*20*n%2F(Math.PI%2Bt*Math.abs(e))%3Bthis.waveShaperNode.curve%3Di%7D%7D%7D)%2Ch.Effects.Flanger%3Dfunction(e)%7Bthis.options%3D%7B%7D%2Ce%3De%7C%7Cthis.options%3Bvar%20t%2Ci%3D%7Btime%3A.45%2Cspeed%3A.2%2Cdepth%3A.1%2Cfeedback%3A.1%2Cmix%3A.5%7D%3Bfor(t%20in%20this.inputNode%3Dh.context.createGain()%2Cthis.outputNode%3Dh.context.createGain()%2Cthis.inputFeedbackNode%3Dh.context.createGain()%2Cthis.wetGainNode%3Dh.context.createGain()%2Cthis.dryGainNode%3Dh.context.createGain()%2Cthis.delayNode%3Dh.context.createDelay()%2Cthis.oscillatorNode%3Dh.context.createOscillator()%2Cthis.gainNode%3Dh.context.createGain()%2Cthis.feedbackNode%3Dh.context.createGain()%2Cthis.oscillatorNode.type%3D%22sine%22%2Cthis.inputNode.connect(this.inputFeedbackNode)%2Cthis.inputNode.connect(this.dryGainNode)%2Cthis.inputFeedbackNode.connect(this.delayNode)%2Cthis.inputFeedbackNode.connect(this.wetGainNode)%2Cthis.delayNode.connect(this.wetGainNode)%2Cthis.delayNode.connect(this.feedbackNode)%2Cthis.feedbackNode.connect(this.inputFeedbackNode)%2Cthis.oscillatorNode.connect(this.gainNode)%2Cthis.gainNode.connect(this.delayNode.delayTime)%2Cthis.dryGainNode.connect(this.outputNode)%2Cthis.wetGainNode.connect(this.outputNode)%2Cthis.oscillatorNode.start(0)%2Ci)this%5Bt%5D%3De%5Bt%5D%2Cthis%5Bt%5D%3D(void%200%3D%3D%3Dthis%5Bt%5D%7C%7Cnull%3D%3D%3Dthis%5Bt%5D%3Fi%3Athis)%5Bt%5D%7D%2Ch.Effects.Flanger.prototype%3DObject.create(e%2C%7Btime%3A%7Benumberable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.time%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.options.time%3De%2Cthis.delayNode.delayTime.value%3Du.Util.normalize(e%2C.001%2C.02))%7D%7D%2Cspeed%3A%7Benumberable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.speed%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.options.speed%3De%2Cthis.oscillatorNode.frequency.value%3Du.Util.normalize(e%2C.5%2C5))%7D%7D%2Cdepth%3A%7Benumberable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.depth%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.options.depth%3De%2Cthis.gainNode.gain.value%3Du.Util.normalize(e%2C5e-4%2C.005))%7D%7D%2Cfeedback%3A%7Benumberable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.feedback%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.options.feedback%3De%2Cthis.feedbackNode.gain.value%3Du.Util.normalize(e%2C0%2C.8))%7D%7D%2Cmix%3A%7Benumberable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.mix%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.options.mix%3De%2Cthis.dryGainNode.gain.value%3Dh.Util.getDryLevel(this.mix)%2Cthis.wetGainNode.gain.value%3Dh.Util.getWetLevel(this.mix))%7D%7D%7D)%2Ch.Effects.Panner3D%3Dfunction(e)%7Bthis.options%3D%7B%7D%2Ce%3De%7C%7Cthis.options%3Bvar%20t%2Ci%3D%7Bx%3A0%2Cy%3A0%2Cz%3A0%2CpanningModel%3A%22HRTF%22%2CdistanceModel%3A%22inverse%22%2CrefDistance%3A1%2CmaxDistance%3A1e4%2CrolloffFactor%3A1%7D%3Bif(this.inputNode%3Dh.context.createGain()%2Cthis.outputNode%3Dh.context.createGain()%2C!h.context.createPanner)return%20console.warn(%22Your%20browser%20does%20not%20support%203D%20PannerNode.%22)%2Cvoid%20this.inputNode.connect(this.outputNode)%3Bfor(t%20in%20this.pannerNode%3Dh.context.createPanner()%2Cthis.pannerNode.panningModel%3Di.panningModel%2Cthis.pannerNode.distanceModel%3Di.distanceModel%2Cthis.pannerNode.refDistance%3Di.refDistance%2Cthis.pannerNode.maxDistance%3Di.maxDistance%2Cthis.pannerNode.rolloffFactor%3Di.rolloffFactor%2Cthis.inputNode.connect(this.pannerNode)%2Cthis.pannerNode.connect(this.outputNode)%2Ci)this.options%5Bt%5D%3D(void%200!%3D%3De%5Bt%5D%3Fe%3Ai)%5Bt%5D%3Bthis.pannerNode.setPosition(this.options.x%2Cthis.options.y%2Cthis.options.z)%7D%2Ch.Effects.Panner3D.prototype%3DObject.create(e%2C%7Bx%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.x%7D%2Cset%3Afunction(e)%7Bthis.options.x%3De%2Cthis._updatePosition()%7D%7D%2Cy%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.y%7D%2Cset%3Afunction(e)%7Bthis.options.y%3De%2Cthis._updatePosition()%7D%7D%2Cz%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.z%7D%2Cset%3Afunction(e)%7Bthis.options.z%3De%2Cthis._updatePosition()%7D%7D%2C_updatePosition%3A%7Bvalue%3Afunction()%7Bthis.pannerNode%26%26%22function%22%3D%3Dtypeof%20this.pannerNode.setPosition%26%26this.pannerNode.setPosition(this.options.x%2Cthis.options.y%2Cthis.options.z)%7D%7D%7D)%2Ch.Effects.StereoPanner%3Dfunction(e)%7Bthis.options%3D%7B%7D%2Ce%3De%7C%7Cthis.options%3Bvar%20t%2Ci%3D%7Bpan%3A0%7D%3Bfor(t%20in%20this.inputNode%3Dh.context.createGain()%2Cthis.outputNode%3Dh.context.createGain()%2Ch.context.createStereoPanner%3F(this.pannerNode%3Dh.context.createStereoPanner()%2Cthis.inputNode.connect(this.pannerNode)%2Cthis.pannerNode.connect(this.outputNode))%3Ah.context.createPanner%3F(console.warn(%22Your%20browser%20does%20not%20support%20the%20StereoPannerNode.%20Will%20use%20PannerNode%20instead.%22)%2Cthis.pannerNode%3Dh.context.createPanner()%2Cthis.pannerNode.type%3D%22equalpower%22%2Cthis.inputNode.connect(this.pannerNode)%2Cthis.pannerNode.connect(this.outputNode))%3A(console.warn(%22Your%20browser%20does%20not%20support%20the%20Panner%20effect.%22)%2Cthis.inputNode.connect(this.outputNode))%2Ci)this%5Bt%5D%3De%5Bt%5D%2Cthis%5Bt%5D%3D(void%200%3D%3D%3Dthis%5Bt%5D%7C%7Cnull%3D%3D%3Dthis%5Bt%5D%3Fi%3Athis)%5Bt%5D%7D%2Ch.Effects.StereoPanner.prototype%3DObject.create(e%2C%7Bpan%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.pan%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C-1%2C1)%26%26(this.options.pan%3De%2Cthis.pannerNode%26%26(-1%3Cthis.pannerNode.toString().indexOf(%22StereoPannerNode%22)%3Fthis.pannerNode.pan.value%3De%3Athis.pannerNode.setPosition(e%2C0%2C1-Math.abs(e))))%7D%7D%7D)%2Ch.Effects.Convolver%3Dfunction(t%2Ce)%7Bthis.options%3D%7B%7D%2Ct%3Dt%7C%7Cthis.options%3Bvar%20i%2Cn%3Dthis%2Co%3Dnew%20XMLHttpRequest%2Cs%3D%7Bmix%3A.5%7D%3Bfor(i%20in%20this.callback%3De%2Cthis.inputNode%3Dh.context.createGain()%2Cthis.convolverNode%3Dh.context.createConvolver()%2Cthis.outputNode%3Dh.context.createGain()%2Cthis.wetGainNode%3Dh.context.createGain()%2Cthis.dryGainNode%3Dh.context.createGain()%2Cthis.inputNode.connect(this.convolverNode)%2Cthis.convolverNode.connect(this.wetGainNode)%2Cthis.inputNode.connect(this.dryGainNode)%2Cthis.dryGainNode.connect(this.outputNode)%2Cthis.wetGainNode.connect(this.outputNode)%2Cs)this%5Bi%5D%3Dt%5Bi%5D%2Cthis%5Bi%5D%3D(void%200%3D%3D%3Dthis%5Bi%5D%7C%7Cnull%3D%3D%3Dthis%5Bi%5D%3Fs%3Athis)%5Bi%5D%3Bt.impulse%3F(o.open(%22GET%22%2Ct.impulse%2C!0)%2Co.responseType%3D%22arraybuffer%22%2Co.onload%3Dfunction(e)%7Be%3De.target.response%3Bh.context.decodeAudioData(e%2Cfunction(e)%7Bn.convolverNode.buffer%3De%2Cn.callback%26%26u.Util.isFunction(n.callback)%26%26n.callback()%7D%2Cfunction(e)%7Be%3De%7C%7Cnew%20Error(%22Error%20decoding%20impulse%20file%22)%2Cn.callback%26%26u.Util.isFunction(n.callback)%26%26n.callback(e)%7D)%7D%2Co.onreadystatechange%3Dfunction(e)%7B4%3D%3D%3Do.readyState%26%26200!%3D%3Do.status%26%26console.error(%22Error%20while%20fetching%20%22%2Bt.impulse%2B%22.%20%22%2Bo.statusText)%7D%2Co.send())%3Aconsole.error(%22No%20impulse%20file%20specified.%22)%7D%2Ch.Effects.Convolver.prototype%3DObject.create(e%2C%7Bmix%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.mix%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.options.mix%3De%2Cthis.dryGainNode.gain.value%3Dh.Util.getDryLevel(this.mix)%2Cthis.wetGainNode.gain.value%3Dh.Util.getWetLevel(this.mix))%7D%7D%7D)%2Ch.Effects.PingPongDelay%3Dfunction(e)%7Bthis.options%3D%7B%7D%2Ce%3De%7C%7Cthis.options%3Bvar%20t%2Ci%3D%7Bfeedback%3A.5%2Ctime%3A.3%2Cmix%3A.5%7D%3Bfor(t%20in%20this.inputNode%3Dh.context.createGain()%2Cthis.outputNode%3Dh.context.createGain()%2Cthis.delayNodeLeft%3Dh.context.createDelay()%2Cthis.delayNodeRight%3Dh.context.createDelay()%2Cthis.dryGainNode%3Dh.context.createGain()%2Cthis.wetGainNode%3Dh.context.createGain()%2Cthis.feedbackGainNode%3Dh.context.createGain()%2Cthis.channelMerger%3Dh.context.createChannelMerger(2)%2Cthis.inputNode.connect(this.dryGainNode)%2Cthis.dryGainNode.connect(this.outputNode)%2Cthis.delayNodeLeft.connect(this.channelMerger%2C0%2C0)%2Cthis.delayNodeRight.connect(this.channelMerger%2C0%2C1)%2Cthis.delayNodeLeft.connect(this.delayNodeRight)%2Cthis.feedbackGainNode.connect(this.delayNodeLeft)%2Cthis.delayNodeRight.connect(this.feedbackGainNode)%2Cthis.inputNode.connect(this.feedbackGainNode)%2Cthis.channelMerger.connect(this.wetGainNode)%2Cthis.wetGainNode.connect(this.outputNode)%2Ci)this%5Bt%5D%3De%5Bt%5D%2Cthis%5Bt%5D%3D(void%200%3D%3D%3Dthis%5Bt%5D%7C%7Cnull%3D%3D%3Dthis%5Bt%5D%3Fi%3Athis)%5Bt%5D%7D%2Ch.Effects.PingPongDelay.prototype%3DObject.create(e%2C%7Bmix%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.mix%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.options.mix%3De%2Cthis.dryGainNode.gain.value%3Dh.Util.getDryLevel(this.mix)%2Cthis.wetGainNode.gain.value%3Dh.Util.getWetLevel(this.mix))%7D%7D%2Ctime%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.time%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C180)%26%26(this.options.time%3De%2Cthis.delayNodeLeft.delayTime.value%3De%2Cthis.delayNodeRight.delayTime.value%3De)%7D%7D%2Cfeedback%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.feedback%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.options.feedback%3DparseFloat(e%2C10)%2Cthis.feedbackGainNode.gain.value%3Dthis.feedback)%7D%7D%7D)%2Ch.Effects.Reverb%3Dfunction(e)%7Bthis.options%3D%7B%7D%2Ce%3De%7C%7Cthis.options%3Bvar%20t%2Ci%3D%7Bmix%3A.5%2Ctime%3A.01%2Cdecay%3A.01%2Creverse%3A!1%7D%3Bfor(t%20in%20this.inputNode%3Dh.context.createGain()%2Cthis.reverbNode%3Dh.context.createConvolver()%2Cthis.outputNode%3Dh.context.createGain()%2Cthis.wetGainNode%3Dh.context.createGain()%2Cthis.dryGainNode%3Dh.context.createGain()%2Cthis.inputNode.connect(this.reverbNode)%2Cthis.reverbNode.connect(this.wetGainNode)%2Cthis.inputNode.connect(this.dryGainNode)%2Cthis.dryGainNode.connect(this.outputNode)%2Cthis.wetGainNode.connect(this.outputNode)%2Ci)this%5Bt%5D%3De%5Bt%5D%2Cthis%5Bt%5D%3D(void%200%3D%3D%3Dthis%5Bt%5D%7C%7Cnull%3D%3D%3Dthis%5Bt%5D%3Fi%3Athis)%5Bt%5D%3Bs.bind(this)()%7D%2Ch.Effects.Reverb.prototype%3DObject.create(e%2C%7Bmix%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.mix%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.options.mix%3De%2Cthis.dryGainNode.gain.value%3Dh.Util.getDryLevel(this.mix)%2Cthis.wetGainNode.gain.value%3Dh.Util.getWetLevel(this.mix))%7D%7D%2Ctime%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.time%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C1e-4%2C10)%26%26(this.options.time%3De%2Cs.bind(this)())%7D%7D%2Cdecay%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.decay%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C1e-4%2C10)%26%26(this.options.decay%3De%2Cs.bind(this)())%7D%7D%2Creverse%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.reverse%7D%2Cset%3Afunction(e)%7Bu.Util.isBool(e)%26%26(this.options.reverse%3De%2Cs.bind(this)())%7D%7D%7D)%2Ch.Effects.Bitcrusher%3Dfunction(e)%7Bconst%20r%3Du.context%3Bthis.inputNode%3Dr.createGain()%2Cthis.outputNode%3Dr.createGain()%2Cthis.bits%3De.bits%7C%7C4%2Cthis.frequency%3De.frequency%7C%7C44100%2Cthis.crusherNode%3Dr.createScriptProcessor(4096%2C1%2C1)%3Bvar%20c%3Dthis%3Bthis.crusherNode.onaudioprocess%3Dfunction(e)%7Bconst%20t%3De.inputBuffer%2Ci%3De.outputBuffer%3Bvar%20n%3DMath.pow(.5%2Cc.bits-1)%2Co%3Dc.frequency%2Fr.sampleRate%3Bfor(let%20e%3D0%3Be%3Ci.numberOfChannels%3Be%2B%2B)%7Bvar%20s%3Dt.getChannelData(e)%3Bconst%20a%3Di.getChannelData(e)%3Bfor(let%20e%3D0%3Be%3Cs.length%3Be%2B%2B)e%25o%3D%3D0%3Fa%5Be%5D%3DMath.floor(s%5Be%5D%2Fn)*n%3Aa%5Be%5D%3Da%5Be-1%5D%7D%7D%2Cthis.inputNode.connect(this.crusherNode)%2Cthis.crusherNode.connect(this.outputNode)%2Cthis.connect%3Dfunction(e)%7Bthis.outputNode.connect(e)%7D%2Cthis.disconnect%3Dfunction()%7Bthis.outputNode.disconnect()%7D%7D%2Ch.Effects.Bitcrusher.prototype%3D%7Bconstructor%3Ah.Effects.Bitcrusher%2CsetBits%3Afunction(e)%7B1%3C%3De%26%26e%3C%3D16%26%26(this.bits%3De)%7D%2CgetBits%3Afunction()%7Breturn%20this.bits%7D%2CsetFrequency%3Afunction(e)%7B0%3Ce%26%26(this.frequency%3De)%7D%2CgetFrequency%3Afunction()%7Breturn%20this.frequency%7D%7D%2Ch.Effects.ThreeBandEqualizer%3Dfunction(e)%7B(function(e)%7Bthis.options%3D%7B%7D%2Ce%3De%7C%7Cthis.options%3Bvar%20t%2Ci%3D%7Bcutoff_frequency_low%3A100%2Ccutoff_frequency_high%3A8e3%2Clow_band_gain%3A1%2Cmid_band_gain%3A1%2Chigh_band_gain%3A1%2Clow_peak%3A1%2Cmid_peak%3A1%2Chigh_peak%3A1%7D%3Bfor(t%20in%20this.inputNode%3Du.context.createGain()%2Cthis.outputNode%3Du.context.createGain()%2Cthis.lowFilterNode%3Du.context.createBiquadFilter()%2Cthis.lowFilterNode.type%3D%22lowpass%22%2Cthis.inputNode.connect(this.lowFilterNode)%2Cthis.lowGainNode%3Du.context.createGain()%2Cthis.lowFilterNode.connect(this.lowGainNode)%2Cthis.midFilterNode%3Du.context.createBiquadFilter()%2Cthis.midFilterNode.type%3D%22bandpass%22%2Cthis.inputNode.connect(this.midFilterNode)%2Cthis.midGainNode%3Du.context.createGain()%2Cthis.midFilterNode.connect(this.midGainNode)%2Cthis.highFilterNode%3Du.context.createBiquadFilter()%2Cthis.highFilterNode.type%3D%22highpass%22%2Cthis.inputNode.connect(this.highFilterNode)%2Cthis.highGainNode%3Du.context.createGain()%2Cthis.highFilterNode.connect(this.highGainNode)%2Cthis.analyserNode%3Du.context.createAnalyser()%2Cthis.lowGainNode.connect(this.analyserNode)%2Cthis.midGainNode.connect(this.analyserNode)%2Cthis.highGainNode.connect(this.analyserNode)%2Cthis.analyserNode.connect(this.outputNode)%2Cthis.analyserNode.minDecibels%3D-90%2Cthis.analyserNode.maxDecibels%3D15%2Cthis.analyserNode.smoothingTimeConstant%3D.85%2Cthis.analyserNode.fftSize%3D256%2Cthis.options.cutoff_frequency_low%3Di.cutoff_frequency_low%2Cthis.options.cutoff_frequency_high%3Di.cutoff_frequency_high%2Ci)this%5Bt%5D%3De%5Bt%5D%2Cthis%5Bt%5D%3D(void%200%3D%3D%3Dthis%5Bt%5D%7C%7Cnull%3D%3D%3Dthis%5Bt%5D%3Fi%3Athis)%5Bt%5D%7D).call(this%2Ce)%7D%3Bt%3DObject.create(e%2C%7Bcutoff_frequency_low%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.cutoff_frequency_low%7D%2Cset%3Afunction(e)%7Bh.Util.isInRange(e%2C10%2C22050)%26%26(this.options.cutoff_frequency_low%3De%2Cthis.lowFilterNode.frequency.value%3De%2Cthis.midFilterNode.frequency.value%3D.707*(this.options.cutoff_frequency_low%2Bthis.options.cutoff_frequency_high))%7D%7D%2Ccutoff_frequency_high%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.cutoff_frequency_high%7D%2Cset%3Afunction(e)%7Bh.Util.isInRange(e%2C10%2C22050)%26%26(this.options.cutoff_frequency_high%3De%2Cthis.highFilterNode.frequency.value%3De%2Cthis.midFilterNode.frequency.value%3D.707*(this.options.cutoff_frequency_low%2Bthis.options.cutoff_frequency_high))%7D%7D%2Clow_band_gain%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.low_band_gain%7D%2Cset%3Afunction(e)%7Bh.Util.isInRange(e%2C-40%2C15)%26%26(this.options.low_band_gain%3De%2Cthis.lowGainNode.gain.value%3DMath.pow(10%2Ce%2F20))%7D%7D%2Cmid_band_gain%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.mid_band_gain%7D%2Cset%3Afunction(e)%7Bh.Util.isInRange(e%2C-40%2C15)%26%26(this.options.mid_band_gain%3De%2Cthis.midGainNode.gain.value%3DMath.pow(10%2Ce%2F20))%7D%7D%2Chigh_band_gain%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.high_band_gain%7D%2Cset%3Afunction(e)%7Bh.Util.isInRange(e%2C-40%2C15)%26%26(this.options.high_band_gain%3De%2Cthis.highGainNode.gain.value%3DMath.pow(10%2Ce%2F20))%7D%7D%2Clow_peak%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.lowFilterNode.Q.value%7D%2Cset%3Afunction(e)%7Bh.Util.isInRange(e%2C1e-4%2C100)%26%26(this.lowFilterNode.Q.value%3De)%7D%7D%2Cmid_peak%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.midFilterNode.Q.value%7D%2Cset%3Afunction(e)%7Bh.Util.isInRange(e%2C1e-4%2C100)%26%26(this.midFilterNode.Q.value%3De)%7D%7D%2Chigh_peak%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.highFilterNode.Q.value%7D%2Cset%3Afunction(e)%7Bh.Util.isInRange(e%2C1e-4%2C1e3)%26%26(this.highFilterNode.Q.value%3De)%7D%7D%2CvisualizerBinCount%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.analyserNode.frequencyBinCount%7D%2Cset%3Afunction(e)%7Bh.Util.isInRange(e%2C16%2C1024)%26%26(this.analyzerNode.fftSize%3De)%7D%7D%2Canalyser%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.analyserNode%7D%7D%2CfrequencyData%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20void%200%3D%3D%3Dthis.byteFrequencyData%26%26(this.byteFrequencyData%3Dnew%20Uint8Array(this.analyserNode.frequencyBinCount.value))%2Cthis.analyserNode.getByteFrequencyData(this.FrequencyData)%2Cthis.byteFrequencyData%7D%7D%7D)%3Bh.Effects.ThreeBandEqualizer.prototype%3Dt%2Ch.Effects.Tremolo%3Dfunction(e)%7Bthis.options%3D%7B%7D%2Ce%3De%7C%7Cthis.options%3Bvar%20t%2Ci%3D%7Bspeed%3A4%2Cdepth%3A1%2Cmix%3A.8%7D%3Bfor(t%20in%20this.inputNode%3Dh.context.createGain()%2Cthis.outputNode%3Dh.context.createGain()%2Cthis.dryGainNode%3Dh.context.createGain()%2Cthis.wetGainNode%3Dh.context.createGain()%2Cthis.tremoloGainNode%3Dh.context.createGain()%2Cthis.tremoloGainNode.gain.value%3D0%2Cthis.lfoNode%3Dh.context.createOscillator()%2Cthis.shaperNode%3Dh.context.createWaveShaper()%2Cthis.shaperNode.curve%3Dnew%20Float32Array(%5B0%2C1%5D)%2Cthis.shaperNode.connect(this.tremoloGainNode.gain)%2Cthis.inputNode.connect(this.dryGainNode)%2Cthis.dryGainNode.connect(this.outputNode)%2Cthis.lfoNode.connect(this.shaperNode)%2Cthis.lfoNode.type%3D%22sine%22%2Cthis.lfoNode.start(0)%2Cthis.inputNode.connect(this.tremoloGainNode)%2Cthis.tremoloGainNode.connect(this.wetGainNode)%2Cthis.wetGainNode.connect(this.outputNode)%2Ci)this%5Bt%5D%3De%5Bt%5D%2Cthis%5Bt%5D%3D(void%200%3D%3D%3Dthis%5Bt%5D%7C%7Cnull%3D%3D%3Dthis%5Bt%5D%3Fi%3Athis)%5Bt%5D%7D%2Ch.Effects.Tremolo.prototype%3DObject.create(e%2C%7Bmix%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.mix%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.options.mix%3De%2Cthis.dryGainNode.gain.value%3Dh.Util.getDryLevel(this.mix)%2Cthis.wetGainNode.gain.value%3Dh.Util.getWetLevel(this.mix))%7D%7D%2Cspeed%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.speed%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C20)%26%26(this.options.speed%3De%2Cthis.lfoNode.frequency.value%3De)%7D%7D%2Cdepth%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.depth%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.options.depth%3De%2Cthis.shaperNode.curve%3Dnew%20Float32Array(%5B1-e%2C1%5D))%7D%7D%7D)%2Ch.Effects.DubDelay%3Dfunction(e)%7Bthis.options%3D%7B%7D%2Ce%3De%7C%7Cthis.options%3Bvar%20t%2Ci%3D%7Bfeedback%3A.6%2Ctime%3A.7%2Cmix%3A.5%2Ccutoff%3A700%7D%3Bfor(t%20in%20this.inputNode%3Dh.context.createGain()%2Cthis.outputNode%3Dh.context.createGain()%2Cthis.dryGainNode%3Dh.context.createGain()%2Cthis.wetGainNode%3Dh.context.createGain()%2Cthis.feedbackGainNode%3Dh.context.createGain()%2Cthis.delayNode%3Dh.context.createDelay()%2Cthis.bqFilterNode%3Dh.context.createBiquadFilter()%2Cthis.inputNode.connect(this.dryGainNode)%2Cthis.dryGainNode.connect(this.outputNode)%2Cthis.inputNode.connect(this.wetGainNode)%2Cthis.inputNode.connect(this.feedbackGainNode)%2Cthis.feedbackGainNode.connect(this.bqFilterNode)%2Cthis.bqFilterNode.connect(this.delayNode)%2Cthis.delayNode.connect(this.feedbackGainNode)%2Cthis.delayNode.connect(this.wetGainNode)%2Cthis.wetGainNode.connect(this.outputNode)%2Ci)this%5Bt%5D%3De%5Bt%5D%2Cthis%5Bt%5D%3D(void%200%3D%3D%3Dthis%5Bt%5D%7C%7Cnull%3D%3D%3Dthis%5Bt%5D%3Fi%3Athis)%5Bt%5D%7D%2Ch.Effects.DubDelay.prototype%3DObject.create(e%2C%7Bmix%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.mix%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.options.mix%3De%2Cthis.dryGainNode.gain.value%3Dh.Util.getDryLevel(this.mix)%2Cthis.wetGainNode.gain.value%3Dh.Util.getWetLevel(this.mix))%7D%7D%2Ctime%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.time%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C180)%26%26(this.options.time%3De%2Cthis.delayNode.delayTime.value%3De)%7D%7D%2Cfeedback%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.feedback%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.options.feedback%3DparseFloat(e%2C10)%2Cthis.feedbackGainNode.gain.value%3Dthis.feedback)%7D%7D%2Ccutoff%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.cutoff%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C4e3)%26%26(this.options.cutoff%3De%2Cthis.bqFilterNode.frequency.value%3Dthis.cutoff)%7D%7D%7D)%2Ch.Effects.RingModulator%3Dfunction(e)%7Bthis.options%3D%7B%7D%2Ce%3De%7C%7Cthis.options%3Bvar%20t%2Ci%3D%7Bspeed%3A30%2Cdistortion%3A1%2Cmix%3A.5%7D%3Bfor(t%20in%20this.inputNode%3Dh.context.createGain()%2Cthis.outputNode%3Dh.context.createGain()%2Cthis.dryGainNode%3Dh.context.createGain()%2Cthis.wetGainNode%3Dh.context.createGain()%2Cthis.vIn%3Dh.context.createOscillator()%2Cthis.vIn.start(0)%2Cthis.vInGain%3Dh.context.createGain()%2Cthis.vInGain.gain.value%3D.5%2Cthis.vInInverter1%3Dh.context.createGain()%2Cthis.vInInverter1.gain.value%3D-1%2Cthis.vInInverter2%3Dh.context.createGain()%2Cthis.vInInverter2.gain.value%3D-1%2Cthis.vInDiode1%3Dnew%20a(h.context)%2Cthis.vInDiode2%3Dnew%20a(h.context)%2Cthis.vInInverter3%3Dh.context.createGain()%2Cthis.vInInverter3.gain.value%3D-1%2Cthis.vcInverter1%3Dh.context.createGain()%2Cthis.vcInverter1.gain.value%3D-1%2Cthis.vcDiode3%3Dnew%20a(h.context)%2Cthis.vcDiode4%3Dnew%20a(h.context)%2Cthis.outGain%3Dh.context.createGain()%2Cthis.outGain.gain.value%3D3%2Cthis.compressor%3Dh.context.createDynamicsCompressor()%2Cthis.compressor.threshold.value%3D-24%2Cthis.compressor.ratio.value%3D16%2Cthis.inputNode.connect(this.dryGainNode)%2Cthis.dryGainNode.connect(this.outputNode)%2Cthis.inputNode.connect(this.vcInverter1)%2Cthis.inputNode.connect(this.vcDiode4.node)%2Cthis.vcInverter1.connect(this.vcDiode3.node)%2Cthis.vIn.connect(this.vInGain)%2Cthis.vInGain.connect(this.vInInverter1)%2Cthis.vInGain.connect(this.vcInverter1)%2Cthis.vInGain.connect(this.vcDiode4.node)%2Cthis.vInInverter1.connect(this.vInInverter2)%2Cthis.vInInverter1.connect(this.vInDiode2.node)%2Cthis.vInInverter2.connect(this.vInDiode1.node)%2Cthis.vInDiode1.connect(this.vInInverter3)%2Cthis.vInDiode2.connect(this.vInInverter3)%2Cthis.vInInverter3.connect(this.compressor)%2Cthis.vcDiode3.connect(this.compressor)%2Cthis.vcDiode4.connect(this.compressor)%2Cthis.compressor.connect(this.outGain)%2Cthis.outGain.connect(this.wetGainNode)%2Cthis.wetGainNode.connect(this.outputNode)%2Ci)this%5Bt%5D%3De%5Bt%5D%2Cthis%5Bt%5D%3D(void%200%3D%3D%3Dthis%5Bt%5D%7C%7Cnull%3D%3D%3Dthis%5Bt%5D%3Fi%3Athis)%5Bt%5D%7D%3Bvar%20a%3Dfunction(e)%7Bthis.context%3De%2Cthis.node%3Dthis.context.createWaveShaper()%2Cthis.vb%3D.2%2Cthis.vl%3D.4%2Cthis.h%3D1%2Cthis.setCurve()%7D%3Bfunction%20r(e)%7Bfor(var%20t%3Du.context.sampleRate%2Ci%3Dnew%20Float32Array(t)%2Cn%3DMath.PI%2F180%2Co%3D0%3Bo%3Ct%3Bo%2B%2B)%7Bvar%20s%3D2*o%2Ft-1%3Bi%5Bo%5D%3D(3%2Be)*s*20*n%2F(Math.PI%2Be*Math.abs(s))%7Dreturn%20i%7Dreturn%20a.prototype.setDistortion%3Dfunction(e)%7Breturn%20this.h%3De%2Cthis.setCurve()%7D%2Ca.prototype.setCurve%3Dfunction()%7Bfor(var%20e%2Ct%2Ci%3Dnew%20Float32Array(1024)%2Cn%3Dt%3D0%2Co%3Di.length%3B0%3C%3Do%3Ft%3Co%3Ao%3Ct%3Bn%3D0%3C%3Do%3F%2B%2Bt%3A--t)e%3D(n-512)%2F512%2Ce%3D(e%3DMath.abs(e))%3C%3Dthis.vb%3F0%3Athis.vb%3Ce%26%26e%3C%3Dthis.vl%3Fthis.h*(Math.pow(e-this.vb%2C2)%2F(2*this.vl-2*this.vb))%3Athis.h*e-this.h*this.vl%2Bthis.h*(Math.pow(this.vl-this.vb%2C2)%2F(2*this.vl-2*this.vb))%2Ci%5Bn%5D%3De%3Breturn%20this.node.curve%3Di%7D%2Ca.prototype.connect%3Dfunction(e)%7Breturn%20this.node.connect(e)%7D%2Ch.Effects.RingModulator.prototype%3DObject.create(e%2C%7Bmix%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.mix%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.options.mix%3De%2Cthis.dryGainNode.gain.value%3Dh.Util.getDryLevel(this.mix)%2Cthis.wetGainNode.gain.value%3Dh.Util.getWetLevel(this.mix))%7D%7D%2Cspeed%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.speed%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C2e3)%26%26(this.options.speed%3De%2Cthis.vIn.frequency.value%3De)%7D%7D%2Cdistortion%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.distortion%7D%2Cset%3Afunction(e)%7Bif(u.Util.isInRange(e%2C.2%2C50))%7Bthis.options.distortion%3DparseFloat(e%2C10)%3Bfor(var%20t%3D%5Bthis.vInDiode1%2Cthis.vInDiode2%2Cthis.vcDiode3%2Cthis.vcDiode4%5D%2Ci%3D0%2Cn%3Dt.length%3Bi%3Cn%3Bi%2B%2B)t%5Bi%5D.setDistortion(e)%7D%7D%7D%7D)%2Ch.Effects.Quadrafuzz%3Dfunction(e)%7Bthis.options%3D%7B%7D%2Ce%3De%7C%7Cthis.options%3Bvar%20t%3D%7BlowGain%3A.6%2CmidLowGain%3A.8%2CmidHighGain%3A.5%2ChighGain%3A.6%7D%3Bthis.inputNode%3Du.context.createGain()%2Cthis.outputNode%3Du.context.createGain()%2Cthis.dryGainNode%3Du.context.createGain()%2Cthis.wetGainNode%3Du.context.createGain()%2Cthis.lowpassLeft%3Du.context.createBiquadFilter()%2Cthis.lowpassLeft.type%3D%22lowpass%22%2Cthis.lowpassLeft.frequency.value%3D147%2Cthis.lowpassLeft.Q.value%3D.7071%2Cthis.bandpass1Left%3Du.context.createBiquadFilter()%2Cthis.bandpass1Left.type%3D%22bandpass%22%2Cthis.bandpass1Left.frequency.value%3D587%2Cthis.bandpass1Left.Q.value%3D.7071%2Cthis.bandpass2Left%3Du.context.createBiquadFilter()%2Cthis.bandpass2Left.type%3D%22bandpass%22%2Cthis.bandpass2Left.frequency.value%3D2490%2Cthis.bandpass2Left.Q.value%3D.7071%2Cthis.highpassLeft%3Du.context.createBiquadFilter()%2Cthis.highpassLeft.type%3D%22highpass%22%2Cthis.highpassLeft.frequency.value%3D4980%2Cthis.highpassLeft.Q.value%3D.7071%2Cthis.overdrives%3D%5B%5D%3Bfor(var%20i%3D0%3Bi%3C4%3Bi%2B%2B)this.overdrives%5Bi%5D%3Du.context.createWaveShaper()%2Cthis.overdrives%5Bi%5D.curve%3Dr()%3Bthis.inputNode.connect(this.wetGainNode)%2Cthis.inputNode.connect(this.dryGainNode)%2Cthis.dryGainNode.connect(this.outputNode)%3Bfor(var%20n%2Co%3D%5Bthis.lowpassLeft%2Cthis.bandpass1Left%2Cthis.bandpass2Left%2Cthis.highpassLeft%5D%2Ci%3D0%3Bi%3Co.length%3Bi%2B%2B)this.wetGainNode.connect(o%5Bi%5D)%2Co%5Bi%5D.connect(this.overdrives%5Bi%5D)%2Cthis.overdrives%5Bi%5D.connect(this.outputNode)%3Bfor(n%20in%20t)this%5Bn%5D%3De%5Bn%5D%2Cthis%5Bn%5D%3D(void%200%3D%3D%3Dthis%5Bn%5D%7C%7Cnull%3D%3D%3Dthis%5Bn%5D%3Ft%3Athis)%5Bn%5D%7D%2Ch.Effects.Quadrafuzz.prototype%3DObject.create(e%2C%7BlowGain%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.lowGain%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.options.lowGain%3De%2Cthis.overdrives%5B0%5D.curve%3Dr(u.Util.normalize(this.lowGain%2C0%2C150)))%7D%7D%2CmidLowGain%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.midLowGain%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.options.midLowGain%3De%2Cthis.overdrives%5B1%5D.curve%3Dr(u.Util.normalize(this.midLowGain%2C0%2C150)))%7D%7D%2CmidHighGain%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.midHighGain%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.options.midHighGain%3De%2Cthis.overdrives%5B2%5D.curve%3Dr(u.Util.normalize(this.midHighGain%2C0%2C150)))%7D%7D%2ChighGain%3A%7Benumerable%3A!0%2Cget%3Afunction()%7Breturn%20this.options.highGain%7D%2Cset%3Afunction(e)%7Bu.Util.isInRange(e%2C0%2C1)%26%26(this.options.highGain%3De%2Cthis.overdrives%5B3%5D.curve%3Dr(u.Util.normalize(this.highGain%2C0%2C150)))%7D%7D%7D)%2Ch%7D)%0D%0A%20%20%2F*%20eslint-enable%20*%2F%0D%0A%0D%0A%20%20const%20%7B%20vm%2C%20Cast%20%7D%20%3D%20Scratch%3B%0D%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0D%0A%0D%0A%20%20%2F%2F%20initialize%20engine%0D%0A%20%20const%20Pizzicato%20%3D%20PzInitializer(runtime.audioEngine.audioContext)%3B%0D%0A%20%20Pizzicato.masterGainNode.disconnect()%3B%0D%0A%20%20Pizzicato.masterGainNode.connect(runtime.audioEngine.inputNode)%3B%0D%0A%0D%0A%20%20const%20ts3Data%20%3D%20Symbol(%22ts3Data%22)%3B%0D%0A%20%20const%20simpleEffects%20%3D%20%5B%0D%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22pitch%22)%2C%20value%3A%20%22pitch%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22detune%22)%2C%20value%3A%20%22detune%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22speed%22)%2C%20value%3A%20%22speed%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22pan%22)%2C%20value%3A%20%22pan%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22gain%22)%2C%20value%3A%20%22gain%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22distortion%22)%2C%20value%3A%20%22distortion%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22attack%22)%2C%20value%3A%20%22attack%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22release%22)%2C%20value%3A%20%22release%22%20%7D%2C%0D%0A%20%20%5D%3B%0D%0A%20%20const%20complexEffects%20%3D%20%5B%0D%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22reverb%22)%2C%20value%3A%20%22reverb%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22delay%22)%2C%20value%3A%20%22delay%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22pan%203D%22)%2C%20value%3A%20%22pan3D%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22tremolo%22)%2C%20value%3A%20%22tremolo%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22fuzz%22)%2C%20value%3A%20%22fuzz%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22bitcrush%22)%2C%20value%3A%20%22bitcrush%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22highpass%22)%2C%20value%3A%20%22highpass%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22lowpass%22)%2C%20value%3A%20%22lowpass%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22flanger%22)%2C%20value%3A%20%22flanger%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22compressor%22)%2C%20value%3A%20%22compressor%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22equalizer%22)%2C%20value%3A%20%22equalizer%22%20%7D%2C%0D%0A%20%20%5D%3B%0D%0A%0D%0A%20%20const%20clamp%20%3D%20(min%2C%20max%2C%20value)%20%3D%3E%20%7B%0D%0A%20%20%20%20return%20Math.max(min%2C%20Math.min(max%2C%20value))%3B%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20compareObjects%20%3D%20(obj1%2C%20obj2)%20%3D%3E%20%7B%0D%0A%20%20%20%20for%20(let%20k%20in%20obj1)%20%7B%0D%0A%20%20%20%20%20%20if%20(obj1%5Bk%5D%20!%3D%3D%20obj2%5Bk%5D)%20return%20false%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20return%20true%3B%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20let%20deltaTime%20%3D%200%2C%0D%0A%20%20%20%20prevFrameTime%20%3D%200%3B%0D%0A%20%20let%20soundBank%20%3D%20Object.create(null)%3B%0D%0A%20%20let%20settings%20%3D%20%7B%20flagCtrl%3A%20true%2C%20canSave%3A%20false%20%7D%3B%0D%0A%0D%0A%20%20class%20SPtuneShark3%20%7B%0D%0A%20%20%20%20constructor()%20%7B%0D%0A%20%20%20%20%20%20%2F*%20Deprecation%20Marker%20*%2F%0D%0A%20%20%20%20%20%20this.loadStorage%20%3D%20function%20(storage)%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(storage%20%3D%3D%3D%20undefined)%20return%3B%0D%0A%20%20%20%20%20%20%20%20settings%20%3D%20storage.settings%3B%0D%0A%20%20%20%20%20%20%20%20const%20tempBank%20%3D%20structuredClone(storage.bank)%3B%0D%0A%20%20%20%20%20%20%20%20const%20sounds%20%3D%20Object.values(tempBank)%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20const%20getTargetName%20%3D%20(name)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20runtime.targets.find((t)%20%3D%3E%20t.getName().replaceAll(%22%2F%22%2C%20%22%22)%20%3D%3D%3D%20name)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20const%20loadEndHandler%20%3D%20(index)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(index%20%3E%3D%20sounds.length%20-%201)%20soundBank%20%3D%20tempBank%3B%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20sounds.length%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20sound%20%3D%20sounds%5Bi%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20sound.loaded%20%3D%20false%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(sound.isVanilla)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20info%20%3D%20sound.src%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.substring(1%2C%20sound.src.lastIndexOf(%22.%22))%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.split(%22%2F%22)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20target%20%3D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20info%5B0%5D%20%3D%3D%3D%20%22Stage%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3F%20runtime.getTargetForStage()%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20getTargetName(info%5B0%5D)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(target%20%3D%3D%3D%20undefined)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20alert(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%60Tune%20Shark%203%20--%20Failed%20to%20load%20%24%7Binfo%5B1%5D%7D%20from%20%24%7Binfo%5B0%5D%7D%60%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20scratchSound%20%3D%20target.sprite.sounds.find((i)%20%3D%3E%20i.name.replaceAll(%22%2F%22%2C%20%22%22)%20%3D%3D%3D%20info%5B1%5D)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(scratchSound%20%3D%3D%3D%20undefined)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20alert(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%60Tune%20Shark%203%20--%20Failed%20to%20load%20%24%7Binfo%5B1%5D%7D%20from%20%24%7Binfo%5B0%5D%7D%60%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20buffer%20%3D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20target.sprite.soundBank.soundPlayers%5BscratchSound.soundId%5D.buffer%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20engine%20%3D%20new%20Pizzicato.Sound(%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20source%3A%20%22buffer%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20options%3A%20%7B%20buffer%2C%20attack%3A%200%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20engine.sourceNode%20%3D%20engine.getSourceNode()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20sound.context%20%3D%20engine%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20sound.loaded%20%3D%20true%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20loadEndHandler(i)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20engine%20%3D%20new%20Pizzicato.Sound(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20source%3A%20%22file%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20options%3A%20%7B%20path%3A%20sound.src%2C%20attack%3A%200%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20engine.sourceNode%20%3D%20engine.getSourceNode()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound.context%20%3D%20engine%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound.loaded%20%3D%20true%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20loadEndHandler(i)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20if%20(!Scratch.extensions.isPenguinMod)%20%7B%0D%0A%20%20%20%20%20%20%20%20runtime.on(%22PROJECT_LOADED%22%2C%20()%20%3D%3E%0D%0A%20%20%20%20%20%20%20%20%20%20this.loadStorage(runtime.extensionStorage%5B%22SPtuneShark3%22%5D)%0D%0A%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%2F*%20Marker%20End%20*%2F%0D%0A%0D%0A%20%20%20%20%20%20runtime.on(%22PROJECT_START%22%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(settings.flagCtrl)%20this.ctrlSounds(%7B%20CONTROL%3A%20%22stop%22%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20runtime.on(%22PROJECT_STOP_ALL%22%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(settings.flagCtrl)%20this.ctrlSounds(%7B%20CONTROL%3A%20%22stop%22%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20runtime.on(%22RUNTIME_PAUSED%22%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20this.ctrlSounds(%7B%20CONTROL%3A%20%22pause%22%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20runtime.on(%22RUNTIME_UNPAUSED%22%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20this.ctrlSounds(%7B%20CONTROL%3A%20%22unpause%22%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20runtime.on(%22BEFORE_EXECUTE%22%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20now%20%3D%20performance.now()%3B%0D%0A%20%20%20%20%20%20%20%20deltaTime%20%3D%20prevFrameTime%20%3D%3D%3D%200%20%3F%200%20%3A%20(now%20-%20prevFrameTime)%20*%200.001%3B%0D%0A%20%20%20%20%20%20%20%20prevFrameTime%20%3D%20now%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20const%20speedBuffer%20%3D%20runtime.currentStepTime%20*%200.001%3B%0D%0A%20%20%20%20%20%20%20%20Object.values(soundBank).forEach((bank)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(bank.loaded)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20sound%20%3D%20bank.context%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(sound.playing)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Increment%20Current%20Time%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20leng%20%3D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound.loop%20%26%26%20bank.loopParm%5B1%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3F%20bank.loopParm%5B1%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20sound.sourceNode.buffer.duration%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20time%20%3D%20bank.currentTime%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20time%20%2B%3D%20deltaTime%20*%20bank.rate%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(sound.loop)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20time%20%3D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Math.max(0%2C%20(time%20%25%20(leng%20-%20bank.loopParm%5B0%5D))%20%2B%200.00001)%20%2B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bank.loopParm%5B0%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20time%20%3D%20clamp(0%2C%20leng%2C%20time)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20bank.currentTime%20%3D%20time%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Apply%20Speed%20Changes%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(bank.speed%20!%3D%3D%201)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20lastTime%20%3D%20bank.currentTime%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound.release%20%3D%20speedBuffer%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound.stop()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bank.currentTime%20%3D%20lastTime%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound.attack%20%3D%20speedBuffer%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sound.play(0%2C%20lastTime)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.updateAudioNodes(sound.sourceNode%2C%20bank)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20getInfo()%20%7B%0D%0A%20%20%20%20%20%20return%20%7B%0D%0A%20%20%20%20%20%20%20%20id%3A%20%22SPtuneShark3%22%2C%0D%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%22Tune%20Shark%20V3%22)%2C%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20docsURI%3A%20%22https%3A%2F%2Fextensions.turbowarp.org%2FSharkPool%2FTune-Shark-V3%22%2C%20disabled%20until%20turbowarp%20PR%20is%20merged%0D%0A%20%20%20%20%20%20%20%20color1%3A%20%22%23666666%22%2C%0D%0A%20%20%20%20%20%20%20%20menuIconURI%2C%0D%0A%20%20%20%20%20%20%20%20blockIconURI%2C%0D%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22importURL%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22import%20sound%20from%20URL%20%5BURL%5D%20named%20%5BNAME%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.set%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20URL%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22https%3A%2F%2Fsharkpools-extensions.vercel.app%2Fextension-utils%2FTS%2FResonance-Home.mp3%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22importMenu%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22import%20sound%20%5BSOUND%5D%20named%20%5BNAME%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.set%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SOUND%3A%20%7B%20type%3A%20Scratch.ArgumentType.SOUND%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22duplicateSound%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22duplicate%20sound%20%5BNAME1%5D%20as%20%5BNAME2%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.set%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME1%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME2%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound2%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22bindSound%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BTYPE%5D%20sound%20%5BNAME2%5D%20and%20sound%20%5BNAME%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.set%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22bindMenu%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME2%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound2%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22Audio%20Playback%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22startSound%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22start%20sound%20%5BNAME%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22startSoundAt%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22start%20sound%20%5BNAME%5D%20at%20time%20%5BTIME%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TIME%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22playAndStop%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22start%20sound%20%5BNAME%5D%20at%20time%20%5BTIME%5D%20and%20stop%20at%20%5BMAX%5D%20seconds%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TIME%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MAX%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%202%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22stopSound%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22stop%20sound%20%5BNAME%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22pauseSound%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BUN_PAUSE%5D%20sound%20%5BNAME%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20UN_PAUSE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22un_pauseMenu%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22ctrlSounds%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BCONTROL%5D%20all%20sounds%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CONTROL%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22playMenu%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22Audio%20Operations%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22enableControl%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22toggle%20sound%20link%20to%20%5BGO%5D%20%5BSTOP%5D%20%5BON_OFF%5D%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.set%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20GO%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.IMAGE%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataURI%3A%20extraIcons.flag%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STOP%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.IMAGE%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataURI%3A%20extraIcons.stop%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ON_OFF%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22toggleMenu%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22toggleOverlap%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22toggle%20sound%20%5BNAME%5D%20overlapping%20%5BTYPE%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.set%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22toggleMenu%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22toggleReverse%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22toggle%20sound%20%5BNAME%5D%20reverse%20mode%20%5BTYPE%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.set%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22toggleMenu%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22toggleLoop%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22toggle%20sound%20%5BNAME%5D%20looping%20%5BTYPE%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.set%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22toggleMenu%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22loopParams%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22sound%20%5BNAME%5D%20loop%20start%20%5BSTART%5D%20end%20%5BEND%5D%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.set%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20START%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20END%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%202%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22deleteSound%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22delete%20sound%20%5BNAME%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.set%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22deleteAllSounds%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22delete%20all%20sounds%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.set%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22allSounds%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22all%20sounds%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.set%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22allPlaySounds%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22all%20playing%20sounds%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.set%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22whenSound%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.HAT%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22when%20sound%20%5BNAME%5D%20%5BCONTROL%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.set%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CONTROL%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22hatPlayer%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22soundCheck%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22sound%20%5BNAME%5D%20%5BCONTROL%5D%20%3F%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.set%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CONTROL%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22soundBools%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22soundProperty%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BPROP%5D%20of%20sound%20%5BNAME%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.set%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PROP%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22soundProps%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getLoudTime%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22%5BTYPE%5D%20of%20sound%20%5BNAME%5D%20at%20time%20%5BTIME%5D%20in%20channel%20%5BCHANNEL%5D%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.set%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22loudProps%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TIME%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CHANNEL%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%201%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22cropSound%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22crop%20sound%20%5BNAME%5D%20at%20time%20%5BSTART%5D%20to%20%5BEND%5D%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.set%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20START%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20END%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%201%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22joinSound%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22join%20sound%20%5BNAME1%5D%20and%20%5BNAME2%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.set%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME1%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME2%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound2%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22Audio%20Effects%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setVol%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20volume%20of%20sound%20%5BNAME%5D%20to%20%5BNUM%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.nob%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22resetEffect%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22reset%20%5BEFFECT%5D%20of%20sound%20%5BNAME%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.nob%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22effectMenu%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setThingNew%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20%5BTYPE%5D%20of%20sound%20%5BNAME%5D%20to%20%5BVALUE%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.nob%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22singleEffectNew%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setReverb%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22set%20reverb%20of%20sound%20%5BNAME%5D%20to%20time%20%5BTIME%5D%20decay%20%5BDECAY%5D%20mix%20%5BMIX%5D%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.nob%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TIME%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2020%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DECAY%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIX%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setDelay%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22set%20delay%20of%20sound%20%5BNAME%5D%20to%20time%20%5BTIME%5D%20feedback%20%5BFEED%5D%20mix%20%5BMIX%5D%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.nob%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FEED%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2060%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TIME%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIX%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setPan3D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22set%20pan%203D%20of%20sound%20%5BNAME%5D%20to%20x%20%5BX%5D%20y%20%5BY%5D%20z%20%5BZ%5D%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.nob%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Z%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setTremolo%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22set%20tremolo%20of%20sound%20%5BNAME%5D%20to%20speed%20%5BSPEED%5D%20depth%20%5BDEPTH%5D%20mix%20%5BMIX%5D%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.nob%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPEED%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2035%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DEPTH%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2080%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIX%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setFuzz%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22set%20fuzz%20of%20sound%20%5BNAME%5D%20to%20low%20%5BLOW%5D%20med-low%20%5BMED1%5D%20med-high%20%5BMED2%5D%20high%20%5BHIGH%5D%20mix%20%5BMIX%5D%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.nob%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20LOW%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2060%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MED1%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2080%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MED2%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20HIGH%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2060%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIX%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setBitcrush%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22set%20bitcrush%20of%20sound%20%5BNAME%5D%20bits%20%5BBITS%5D%20freq%20%5BFREQ%5D%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.nob%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BITS%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2065%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FREQ%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2060000%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setPass%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22set%20%5BTYPE%5D%20of%20sound%20%5BNAME%5D%20to%20frequency%20%5BFREQ%5D%20peak%20%5BPEAK%5D%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.nob%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22typePass%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FREQ%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20400%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PEAK%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2010%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setFlanger%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22set%20flanger%20of%20sound%20%5BNAME%5D%20to%20time%20%5BTIME%5D%20speed%20%5BSPEED%5D%20depth%20%5BDEPTH%5D%20feed%20%5BFEED%5D%20mix%20%5BMIX%5D%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.nob%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TIME%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2045%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPEED%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2020%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DEPTH%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2010%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FEED%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2010%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MIX%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setCompress%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22set%20compressor%20of%20sound%20%5BNAME%5D%20to%20threshold%20%5BTHRESH%5D%20knee%20%5BKNEE%5D%20attack%20%5BATTACK%5D%20release%20%5BRELEASE%5D%20ratio%20%5BRATIO%5D%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.nob%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20THRESH%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2015%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20KNEE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ATTACK%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20RELEASE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20RATIO%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setEqualize%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22set%20equalizer%20of%20sound%20%5BNAME%5D%20to%20gain%20low%20%5BLOW%5D%20mid%20%5BMID%5D%20high%20%5BHIGH%5D%20cutoff%20low%20%5BCUT_LOW%5D%20cutoff%20high%20%5BCUT_HIGH%5D%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.nob%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22MySound%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20LOW%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MID%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20HIGH%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CUT_LOW%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20-50%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CUT_HIGH%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2050%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%2F*%20Deprecation%20Marker%20*%2F%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22save2Project%22%2C%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BSAVE%5D%20all%20sounds%20to%20project%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.set%2C%20hideFromPalette%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%20SAVE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22saveMenu%22%20%7D%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22convertSound%22%2C%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22convert%20sound%20%5BNAME1%5D%20from%20URL%20to%20URI%20and%20save%20to%20%5BNAME2%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockIconURI%3A%20extraIcons.set%2C%20hideFromPalette%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%20NAME1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%2C%20NAME2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setThing%22%2C%20blockType%3A%20Scratch.BlockType.COMMAND%2C%20hideFromPalette%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20%5BTYPE%5D%20of%20sound%20%5BNAME%5D%20to%20%5BVALUE%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%20NAME%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22MySound%22%20%7D%2C%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22singleEffects%22%20%7D%2C%20VALUE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%20%7D%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%2F*%20Marker%20End%20*%2F%0D%0A%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%2F*%20Deprecation%20Marker%20*%2F%0D%0A%20%20%20%20%20%20%20%20%20%20singleEffects%3A%20simpleEffects%2C%0D%0A%20%20%20%20%20%20%20%20%20%20saveMenu%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22save%22)%2C%20value%3A%20%22save%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22dont%20save%22)%2C%20value%3A%20%22dont%20save%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%2F*%20Marker%20End%20*%2F%0D%0A%20%20%20%20%20%20%20%20%20%20un_pauseMenu%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22pause%22)%2C%20value%3A%20%22pause%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22unpause%22)%2C%20value%3A%20%22unpause%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20playMenu%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22start%22)%2C%20value%3A%20%22start%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22stop%22)%2C%20value%3A%20%22stop%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22pause%22)%2C%20value%3A%20%22pause%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22unpause%22)%2C%20value%3A%20%22unpause%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20hatPlayer%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22starts%22)%2C%20value%3A%20%22starts%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22stops%22)%2C%20value%3A%20%22stops%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20toggleMenu%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22on%22)%2C%20value%3A%20%22on%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22off%22)%2C%20value%3A%20%22off%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20bindMenu%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22bind%22)%2C%20value%3A%20%22bind%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22unBind%22)%2C%20value%3A%20%22unBind%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20loudProps%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22loudness%22)%2C%20value%3A%20%22loudness%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22raw%20noise%22)%2C%20value%3A%20%22raw%20noise%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22tone%22)%2C%20value%3A%20%22tone%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20typePass%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22highpass%22)%2C%20value%3A%20%22highpass%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22lowpass%22)%2C%20value%3A%20%22lowpass%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20singleEffectNew%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20simpleEffects%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20soundProps%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22length%22)%2C%20value%3A%20%22length%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22current%20time%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22current%20time%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22source%22)%2C%20value%3A%20%22source%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22estimated%20bpm%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22estimated%20bpm%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22channels%22)%2C%20value%3A%20%22channels%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22sample%20rate%22)%2C%20value%3A%20%22samples%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22fft%20data%22)%2C%20value%3A%20%22fft%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22binds%22)%2C%20value%3A%20%22binds%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22volume%22)%2C%20value%3A%20%22volume%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D.concat(simpleEffects%2C%20complexEffects)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20soundBools%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22exists%22)%2C%20value%3A%20%22exists%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22playing%22)%2C%20value%3A%20%22playing%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22paused%22)%2C%20value%3A%20%22paused%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22looped%22)%2C%20value%3A%20%22looped%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22overlaped%22)%2C%20value%3A%20%22overlaped%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22reversed%22)%2C%20value%3A%20%22reversed%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22binded%22)%2C%20value%3A%20%22binded%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20effectMenu%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22all%20effects%22)%2C%20value%3A%20%22all%20effects%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D.concat(simpleEffects%2C%20complexEffects)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%2F%2F%20Helper%20Funcs%0D%0A%20%20%20%20startDataHats(data)%20%7B%0D%0A%20%20%20%20%20%20let%20newThreads%20%3D%20%5B%5D%3B%0D%0A%20%20%20%20%20%20runtime.allScriptsByOpcodeDo(%0D%0A%20%20%20%20%20%20%20%20%22SPtuneShark3_whenSound%22%2C%0D%0A%20%20%20%20%20%20%20%20(script%2C%20target)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20thread%20%3D%20runtime._pushThread(script.blockId%2C%20target)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20thread%5Bts3Data%5D%20%3D%20data%3B%0D%0A%20%20%20%20%20%20%20%20%20%20newThreads.push(thread)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20return%20newThreads%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20createBankData(name%2C%20src%2C%20context%2C%20isVanilla)%20%7B%0D%0A%20%20%20%20%20%20return%20%7B%0D%0A%20%20%20%20%20%20%20%20name%2C%0D%0A%20%20%20%20%20%20%20%20src%2C%0D%0A%20%20%20%20%20%20%20%20context%2C%0D%0A%20%20%20%20%20%20%20%20isVanilla%2C%0D%0A%20%20%20%20%20%20%20%20effects%3A%20%7B%7D%2C%0D%0A%20%20%20%20%20%20%20%20loaded%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20reversed%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20currentTime%3A%200%2C%0D%0A%20%20%20%20%20%20%20%20gain%3A%201%2C%0D%0A%20%20%20%20%20%20%20%20pitch%3A%201%2C%0D%0A%20%20%20%20%20%20%20%20detune%3A%200%2C%0D%0A%20%20%20%20%20%20%20%20speed%3A%201%2C%0D%0A%20%20%20%20%20%20%20%20attack%3A%200%2C%0D%0A%20%20%20%20%20%20%20%20release%3A%200%2C%0D%0A%20%20%20%20%20%20%20%20rate%3A%201%2C%0D%0A%20%20%20%20%20%20%20%20loopParm%3A%20%5B0%2C%200%5D%2C%0D%0A%20%20%20%20%20%20%20%20overlap%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20overlays%3A%20%5B%5D%2C%0D%0A%20%20%20%20%20%20%20%20isBind%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20binds%3A%20%7B%7D%2C%0D%0A%20%20%20%20%20%20%20%20_cache%3A%20%7B%20loudness%3A%20%7B%7D%2C%20tone%3A%20%7B%7D%20%7D%2C%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getBPM(data%2C%20sampleRate)%20%7B%0D%0A%20%20%20%20%20%20const%20peaks%20%3D%20%5B%5D%3B%0D%0A%20%20%20%20%20%20let%20lastPeakIndex%20%3D%200%2C%0D%0A%20%20%20%20%20%20%20%20max%20%3D%200.1%3B%0D%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20data.length%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(data%5Bi%5D%20%3E%20max)%20max%20%3D%20data%5Bi%5D%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20data.length%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(data%5Bi%5D%20%3E%20max%20-%200.1%20%26%26%20i%20-%20lastPeakIndex%20%3E%20sampleRate%20%2F%204)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20peaks.push(i)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20lastPeakIndex%20%3D%20i%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20const%20intervals%20%3D%20%5B%5D%3B%0D%0A%20%20%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20peaks.length%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20intervals.push(peaks%5Bi%5D%20-%20peaks%5Bi%20-%201%5D)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20const%20avgInterval%20%3D%0D%0A%20%20%20%20%20%20%20%20intervals.reduce((a%2C%20b)%20%3D%3E%20a%20%2B%20b%2C%200)%20%2F%20intervals.length%3B%0D%0A%20%20%20%20%20%20const%20value%20%3D%20Math.round((sampleRate%20%2F%20avgInterval)%20*%2060)%3B%0D%0A%20%20%20%20%20%20return%20isNaN(value)%20%3F%200%20%3A%20value%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20updateAudioNodes(src%2C%20sound)%20%7B%0D%0A%20%20%20%20%20%20src.playbackRate.value%20%3D%20sound.pitch%3B%0D%0A%20%20%20%20%20%20src.detune.value%20%3D%20sound.detune%3B%0D%0A%20%20%20%20%20%20src.gainSuccessor.gain.value%20%3D%20sound.gain%3B%0D%0A%20%20%20%20%20%20sound.context.attack%20%3D%20sound.attack%3B%0D%0A%20%20%20%20%20%20sound.context.release%20%3D%20sound.release%3B%0D%0A%20%20%20%20%20%20if%20(src.loop)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.loopParams(%7B%0D%0A%20%20%20%20%20%20%20%20%20%20NAME%3A%20sound.name%2C%0D%0A%20%20%20%20%20%20%20%20%20%20START%3A%20sound.loopParm%5B0%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20END%3A%20sound.loopParm%5B1%5D%2C%0D%0A%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20initEffect(type%2C%20rawValues%2C%20values)%20%7B%0D%0A%20%20%20%20%20%20const%20effectsMapping%20%3D%20%7B%0D%0A%20%20%20%20%20%20%20%20PAN%3A%20%22StereoPanner%22%2C%0D%0A%20%20%20%20%20%20%20%20DISTORTION%3A%20%22Distortion%22%2C%0D%0A%20%20%20%20%20%20%20%20REVERB%3A%20%22Reverb%22%2C%0D%0A%20%20%20%20%20%20%20%20DELAY%3A%20%22Delay%22%2C%0D%0A%20%20%20%20%20%20%20%20FUZZ%3A%20%22Quadrafuzz%22%2C%0D%0A%20%20%20%20%20%20%20%20BITCRUSH%3A%20%22Bitcrusher%22%2C%20%2F%2F%20NOTE%3A%20this%20uses%20'ScriptProcessorNode'%20which%20though%20deprecated%20are%20still%20widely%20supported%0D%0A%20%20%20%20%20%20%20%20PAN3D%3A%20%22Panner3D%22%2C%0D%0A%20%20%20%20%20%20%20%20TREMOLO%3A%20%22Tremolo%22%2C%0D%0A%20%20%20%20%20%20%20%20HIGHPASS%3A%20%22HighPassFilter%22%2C%0D%0A%20%20%20%20%20%20%20%20LOWPASS%3A%20%22LowPassFilter%22%2C%0D%0A%20%20%20%20%20%20%20%20FLANGER%3A%20%22Flanger%22%2C%0D%0A%20%20%20%20%20%20%20%20COMPRESSOR%3A%20%22Compressor%22%2C%0D%0A%20%20%20%20%20%20%20%20EQUALIZER%3A%20%22ThreeBandEqualizer%22%2C%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20effect%20%3D%20new%20Pizzicato.Effects%5BeffectsMapping%5Btype%5D%5D(values)%3B%0D%0A%20%20%20%20%20%20effect.id%20%3D%20type%3B%0D%0A%20%20%20%20%20%20effect.params%20%3D%20values%3B%0D%0A%20%20%20%20%20%20effect.rawParams%20%3D%20rawValues%3B%0D%0A%20%20%20%20%20%20return%20effect%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20handleEffect(sound%2C%20type%2C%20rawValues%2C%20values)%20%7B%0D%0A%20%20%20%20%20%20delete%20rawValues.NAME%3B%0D%0A%20%20%20%20%20%20delete%20rawValues.TYPE%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20effect%20%3D%20sound.effects%5Btype%5D%3B%0D%0A%20%20%20%20%20%20if%20(!effect)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20newEffect%20%3D%20this.initEffect(type%2C%20rawValues%2C%20values)%3B%0D%0A%20%20%20%20%20%20%20%20sound.context.addEffect(newEffect)%3B%0D%0A%20%20%20%20%20%20%20%20sound.effects%5Btype%5D%20%3D%20newEffect%3B%0D%0A%20%20%20%20%20%20%20%20return%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20%2F%2F%20Dont%20remove%20and%20re-init%20the%20effect%2C%20this%20causes%20lag%20and%20audio%20glitches.%0D%0A%20%20%20%20%20%20%2F%2F%20Simply%20just%20change%20each%20effect%20node%20value%0D%0A%20%20%20%20%20%20const%20isParamsStatic%20%3D%20compareObjects(values%2C%20effect.params)%3B%0D%0A%20%20%20%20%20%20if%20(isParamsStatic)%20return%3B%0D%0A%0D%0A%20%20%20%20%20%20effect.params%20%3D%20values%3B%0D%0A%20%20%20%20%20%20effect.rawParams%20%3D%20rawValues%3B%0D%0A%20%20%20%20%20%20switch%20(type)%20%7B%0D%0A%20%20%20%20%20%20%20%20case%20%22PAN%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20effect.pannerNode.pan.value%20%3D%20values.pan%3B%0D%0A%20%20%20%20%20%20%20%20%20%20effect.pan%20%3D%20values.pan%3B%0D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20case%20%22PAN3D%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20effect.x%20%3D%20values.x%3B%0D%0A%20%20%20%20%20%20%20%20%20%20effect.y%20%3D%20values.y%3B%0D%0A%20%20%20%20%20%20%20%20%20%20effect.z%20%3D%20values.z%3B%0D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20case%20%22DISTORTION%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20effect.gain%20%3D%20values.gain%3B%0D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20case%20%22REVERB%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20effect.time%20%3D%20values.time%3B%0D%0A%20%20%20%20%20%20%20%20%20%20effect.decay%20%3D%20values.decay%3B%0D%0A%20%20%20%20%20%20%20%20%20%20effect.mix%20%3D%20values.mix%3B%0D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20case%20%22BITCRUSH%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20effect.frequency%20%3D%20values.frequency%3B%0D%0A%20%20%20%20%20%20%20%20%20%20effect.bits%20%3D%20values.bits%3B%0D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20case%20%22LOWPASS%22%3A%0D%0A%20%20%20%20%20%20%20%20case%20%22HIGHPASS%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20freq%20%3D%20values.frequency%3B%0D%0A%20%20%20%20%20%20%20%20%20%20effect.filterNode.frequency.value%20%3D%20freq%3B%0D%0A%20%20%20%20%20%20%20%20%20%20effect.inputNode.frequency.value%20%3D%20freq%3B%0D%0A%20%20%20%20%20%20%20%20%20%20effect.frequency%20%3D%20freq%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20const%20peak%20%3D%20values.peak%3B%0D%0A%20%20%20%20%20%20%20%20%20%20effect.filterNode.Q.value%20%3D%20peak%3B%0D%0A%20%20%20%20%20%20%20%20%20%20effect.inputNode.Q.value%20%3D%20peak%3B%0D%0A%20%20%20%20%20%20%20%20%20%20effect.peak%20%3D%20peak%3B%0D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20case%20%22COMPRESSOR%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20node%20%3D%20effect.compressorNode%3B%0D%0A%20%20%20%20%20%20%20%20%20%20node.knee.value%20%3D%20values.knee%3B%0D%0A%20%20%20%20%20%20%20%20%20%20node.ratio.value%20%3D%20values.ratio%3B%0D%0A%20%20%20%20%20%20%20%20%20%20node.threshold.value%20%3D%20values.threshold%3B%0D%0A%20%20%20%20%20%20%20%20%20%20node.attack.value%20%3D%20values.attack%3B%0D%0A%20%20%20%20%20%20%20%20%20%20node.release.value%20%3D%20values.release%3B%0D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20default%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20Object.assign(effect%2C%20values)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20playSound(sound%2C%20atTime%2C%20con)%20%7B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(sound.playing%20%26%26%20con.overlap)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Clone%20context%20to%20soundBank%20for%20'audioControlDo'%0D%0A%20%20%20%20%20%20%20%20%20%20const%20clone%20%3D%20sound.clone()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20newName%20%3D%20%60%24%7Bcon.name%7D_COPY_%24%7BMath.random()%7D%60%3B%0D%0A%20%20%20%20%20%20%20%20%20%20soundBank%5BnewName%5D%20%3D%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20...sound%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20context%3A%20clone%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20newName%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20loopParm%3A%20%5B0%2C%200%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20overlap%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20overlays%3A%20%5B%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20isBind%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20binds%3A%20%7B%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20clone.play(0%2C%20atTime)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20clone.sourceNode.playbackRate.value%20%3D%20con.pitch%3B%0D%0A%20%20%20%20%20%20%20%20%20%20clone.sourceNode.gainSuccessor.gain.value%20%3D%20con.gain%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20overlayIndex%20%3D%20con.overlays.length%3B%0D%0A%20%20%20%20%20%20%20%20%20%20con.overlays.push(clone)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20clone.on(%22end%22%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20clone.sourceNode.disconnect()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20clone.disconnect()%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20con.overlays.splice(overlayIndex%2C%201)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20delete%20soundBank%5BnewName%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(!sound.playing)%20con.currentTime%20%3D%20atTime%3B%0D%0A%20%20%20%20%20%20%20%20%20%20sound.play(0%2C%20atTime)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20srcNode%20%3D%20sound.sourceNode%3B%0D%0A%20%20%20%20%20%20%20%20%20%20this.updateAudioNodes(srcNode%2C%20con)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(Object.keys(con.binds).length%20%3E%200)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20Object.keys(con.binds).forEach((key)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20thisSound%20%3D%20con.binds%5Bkey%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20context%20%3D%20thisSound.context%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!context.playing)%20thisSound.currentTime%20%3D%20atTime%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20context.play(0%2C%20atTime)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.updateAudioNodes(context.sourceNode%2C%20thisSound)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(sound.loop)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.loopParams(%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20con.name%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20START%3A%20con.loopParm%5B0%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20END%3A%20con.loopParm%5B1%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20this.startDataHats(%7B%20name%3A%20con.name%2C%20type%3A%20%22starts%22%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20%7B%0D%0A%20%20%20%20%20%20%20%20console.warn(Scratch.translate(%22Audio%20has%20not%20loaded%20yet!%22))%3B%0D%0A%20%20%20%20%20%20%20%20sound.stop()%3B%20%2F%2F%20Reset%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20audioControlDo(sound%2C%20type)%20%7B%0D%0A%20%20%20%20%20%20const%20ctx%20%3D%20sound.context%3B%0D%0A%20%20%20%20%20%20if%20(type%20%3D%3D%3D%20%22stop%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20lastTime%20%3D%20sound.currentTime%3B%0D%0A%20%20%20%20%20%20%20%20ctx.stop()%3B%0D%0A%20%20%20%20%20%20%20%20sound.currentTime%20%3D%20lastTime%3B%0D%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20sound.overlays.length%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20sound.overlays%5Bi%5D.stop()%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20this.startDataHats(%7B%20name%3A%20sound.name%2C%20type%3A%20%22stops%22%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(type%20%3D%3D%3D%20%22pause%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20ctx.pause()%3B%0D%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20sound.overlays.length%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20sound.overlays%5Bi%5D.pause()%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20this.startDataHats(%7B%20name%3A%20sound.name%2C%20type%3A%20%22stops%22%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(type%20%3D%3D%3D%20%22unpause%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20unpause%20route%0D%0A%20%20%20%20%20%20%20%20this.startDataHats(%7B%20name%3A%20sound.name%2C%20type%3A%20%22starts%22%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20if%20(!ctx.paused)%20return%3B%0D%0A%20%20%20%20%20%20%20%20const%20lastTime%20%3D%20sound.currentTime%3B%0D%0A%20%20%20%20%20%20%20%20ctx.stop()%3B%0D%0A%20%20%20%20%20%20%20%20sound.currentTime%20%3D%20lastTime%3B%0D%0A%20%20%20%20%20%20%20%20ctx.play(0%2C%20lastTime)%3B%0D%0A%20%20%20%20%20%20%20%20this.updateAudioNodes(ctx.sourceNode%2C%20sound)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20initSound(engine%2C%20name%2C%20url%2C%20isVanilla)%20%7B%0D%0A%20%20%20%20%20%20const%20bank%20%3D%20this.createBankData(name%2C%20url%2C%20engine%2C%20isVanilla)%3B%0D%0A%20%20%20%20%20%20soundBank%5Bname%5D%20%3D%20bank%3B%0D%0A%20%20%20%20%20%20engine.sourceNode%20%3D%20engine.getSourceNode()%3B%0D%0A%0D%0A%20%20%20%20%20%20bank.analyser%20%3D%20Pizzicato.context.createAnalyser()%3B%0D%0A%20%20%20%20%20%20bank.analyser.fftSize%20%3D%201024%3B%0D%0A%20%20%20%20%20%20bank.analyser.smoothingTimeConstant%20%3D%200.8%3B%0D%0A%20%20%20%20%20%20engine.connect(bank.analyser)%3B%0D%0A%0D%0A%20%20%20%20%20%20engine.on(%22stop%22%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20bank.currentTime%20%3D%0D%0A%20%20%20%20%20%20%20%20%20%20engine.loop%20%26%26%20bank.loopParm%5B1%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%20bank.loopParm%5B1%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20engine.sourceNode.buffer.duration%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20bufferToWavBlob(buffer)%20%7B%0D%0A%20%20%20%20%20%20%2F%2F%20building%20WAVs%20are%20a%20pain%0D%0A%20%20%20%20%20%20const%20numberOfChannels%20%3D%20buffer.numberOfChannels%3B%0D%0A%20%20%20%20%20%20const%20sampleRate%20%3D%20buffer.sampleRate%3B%0D%0A%20%20%20%20%20%20const%20numFrames%20%3D%20buffer.length%3B%0D%0A%20%20%20%20%20%20const%20numSamples%20%3D%20numFrames%20*%20numberOfChannels%3B%0D%0A%20%20%20%20%20%20const%20dataView%20%3D%20new%20DataView(new%20ArrayBuffer(44%20%2B%20numSamples%20*%202))%3B%0D%0A%0D%0A%20%20%20%20%20%20let%20offset%20%3D%200%3B%0D%0A%20%20%20%20%20%20const%20setUint%20%3D%20(is32Bit%2C%20isLittleEndian%2C%20data)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(is32Bit)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20dataView.setUint32(offset%2C%20data%2C%20isLittleEndian)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20offset%20%2B%3D%204%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20dataView.setUint16(offset%2C%20data%2C%20isLittleEndian)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20offset%20%2B%3D%202%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%0D%0A%20%20%20%20%20%20setUint(true%2C%20false%2C%200x52494646)%3B%20%2F%2F%20%22RIFF%22%20header%0D%0A%20%20%20%20%20%20setUint(true%2C%20true%2C%2036%20%2B%20numSamples%20*%202)%3B%20%2F%2F%20File%20size%0D%0A%20%20%20%20%20%20setUint(true%2C%20false%2C%200x57415645)%3B%20%2F%2F%20%22WAVE%22%20header%0D%0A%20%20%20%20%20%20setUint(true%2C%20false%2C%200x666d7420)%3B%20%2F%2F%20%22fmt%20%22%20chunk%0D%0A%20%20%20%20%20%20setUint(true%2C%20true%2C%2016)%3B%20%2F%2F%20Chunk%20size%0D%0A%20%20%20%20%20%20setUint(false%2C%20true%2C%201)%3B%20%2F%2F%20Audio%20format%20(PCM)%0D%0A%20%20%20%20%20%20setUint(false%2C%20true%2C%20numberOfChannels)%3B%0D%0A%20%20%20%20%20%20setUint(true%2C%20true%2C%20sampleRate)%3B%0D%0A%20%20%20%20%20%20setUint(true%2C%20true%2C%20sampleRate%20*%20numberOfChannels%20*%202)%3B%20%2F%2F%20Byte%20rate%0D%0A%20%20%20%20%20%20setUint(false%2C%20true%2C%20numberOfChannels%20*%202)%3B%20%2F%2F%20Block%20align%0D%0A%20%20%20%20%20%20setUint(false%2C%20true%2C%2016)%3B%20%2F%2F%20Bits%20per%20sample%0D%0A%20%20%20%20%20%20setUint(true%2C%20false%2C%200x64617461)%3B%20%2F%2F%20%22data%22%20chunk%0D%0A%20%20%20%20%20%20setUint(true%2C%20true%2C%20numSamples%20*%202)%3B%20%2F%2F%20Subchunk2Size%0D%0A%0D%0A%20%20%20%20%20%20%2F%2F%20Audio%20data%0D%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20numFrames%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20for%20(let%20channel%20%3D%200%3B%20channel%20%3C%20numberOfChannels%3B%20channel%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20sample%20%3D%20clamp(-1%2C%201%2C%20buffer.getChannelData(channel)%5Bi%5D)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20dataView.setInt16(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20offset%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20sample%20%3C%200%20%3F%20sample%20*%2032768%20%3A%20sample%20*%2032767%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20true%0D%0A%20%20%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20offset%20%2B%3D%202%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20return%20new%20Blob(%5BdataView%5D%2C%20%7B%20type%3A%20%22audio%2Fwav%22%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%2F%2F%20Block%20Funcs%0D%0A%20%20%20%20importURL(args)%20%7B%0D%0A%20%20%20%20%20%20const%20url%20%3D%20Cast.toString(args.URL)%3B%0D%0A%20%20%20%20%20%20if%20(!url)%20return%3B%0D%0A%0D%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20this.deleteSound(args)%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20const%20engine%20%3D%20new%20Pizzicato.Sound(%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20source%3A%20%22file%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20options%3A%20%7B%20path%3A%20url%2C%20attack%3A%200%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20try%20catch%20placed%20here%20since%20'new%20Pizzicato.Sound'%20doesnt%20error%2C%20however%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20if%20the%20url%20is%20invalid%2C%20functions%20called%20within%20'initSound'%20will%20error%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.initSound(engine%2C%20args.NAME%2C%20url%2C%20false)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20resolve()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20console.error(%22Sound%20load%20error%3A%22%2C%20e)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20alert(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Tune%20Shark%20V3%20can't%20import%20this%20sound%2C%20file%20may%20be%20corrupted%20or%20non-existent.%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20resolve()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20importMenu(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20name%20%3D%20Cast.toString(args.SOUND)%3B%0D%0A%20%20%20%20%20%20const%20target%20%3D%20util.target.sprite%3B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20target.sounds.find((i)%20%3D%3E%20i.name%20%3D%3D%3D%20name)%3B%0D%0A%0D%0A%20%20%20%20%20%20if%20(sound)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.deleteSound(args)%3B%0D%0A%20%20%20%20%20%20%20%20const%20sourceURL%20%3D%20%60%2F%24%7Btarget.name.replaceAll(%22%2F%22%2C%20%22%22)%7D%2F%24%7Bsound.name.replaceAll(%22%2F%22%2C%20%22%22)%7D.%24%7Bsound.dataFormat%7D%60%3B%0D%0A%20%20%20%20%20%20%20%20const%20buffer%20%3D%20target.soundBank.soundPlayers%5Bsound.soundId%5D.buffer%3B%0D%0A%20%20%20%20%20%20%20%20const%20engine%20%3D%20new%20Pizzicato.Sound(%7B%0D%0A%20%20%20%20%20%20%20%20%20%20source%3A%20%22buffer%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20options%3A%20%7B%20buffer%2C%20attack%3A%200%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20this.initSound(engine%2C%20args.NAME%2C%20sourceURL%2C%20true)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20duplicateSound(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME1%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.deleteSound(%7B%20NAME%3A%20args.NAME2%20%7D)%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20const%20engine%20%3D%20new%20Pizzicato.Sound(%7B%0D%0A%20%20%20%20%20%20%20%20%20%20source%3A%20%22buffer%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20options%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20buffer%3A%20sound.context.sourceNode.buffer%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20attack%3A%200%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20this.initSound(engine%2C%20args.NAME2%2C%20sound.src%2C%20sound.isVanilla)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20bindSound(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound1%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20const%20sound2%20%3D%20soundBank%5Bargs.NAME2%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound1%20%3D%3D%3D%20undefined%20%7C%7C%20sound2%20%3D%3D%3D%20undefined)%20return%3B%0D%0A%20%20%20%20%20%20const%20shouldBind%20%3D%20args.TYPE%20%3D%3D%3D%20%22bind%22%3B%0D%0A%20%20%20%20%20%20sound1.isBind%20%3D%20shouldBind%3B%0D%0A%20%20%20%20%20%20sound2.isBind%20%3D%20shouldBind%3B%0D%0A%20%20%20%20%20%20if%20(shouldBind)%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(sound1.binds%5Bsound2.name%5D)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20this.audioControlDo(sound1.binds%5Bsound2.name%5D%2C%20%22stop%22)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20if%20(sound2.binds%5Bsound1.name%5D)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20this.audioControlDo(sound2.binds%5Bsound1.name%5D%2C%20%22stop%22)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20sound1.binds%5Bsound2.name%5D%20%3D%20sound2%3B%0D%0A%20%20%20%20%20%20%20%20sound2.binds%5Bsound1.name%5D%20%3D%20sound1%3B%0D%0A%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20delete%20sound1.binds%5Bsound2.name%5D%3B%0D%0A%20%20%20%20%20%20%20%20delete%20sound2.binds%5Bsound1.name%5D%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20startSound(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound%20!%3D%3D%20undefined)%20this.playSound(sound.context%2C%200%2C%20sound)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20startSoundAt(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20const%20time%20%3D%20Cast.toNumber(args.TIME)%3B%0D%0A%20%20%20%20%20%20if%20(sound%20!%3D%3D%20undefined)%20this.playSound(sound.context%2C%20time%2C%20sound)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20playAndStop(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound%20%3D%3D%3D%20undefined)%20return%3B%0D%0A%20%20%20%20%20%20if%20(util.stackFrame.awaitingSound%20%3D%3D%3D%20undefined)%20%7B%0D%0A%20%20%20%20%20%20%20%20util.stackFrame.awaitingSound%20%3D%20true%3B%0D%0A%20%20%20%20%20%20%20%20this.playSound(sound.context%2C%20Cast.toNumber(args.TIME)%2C%20sound)%3B%0D%0A%20%20%20%20%20%20%20%20util.yield()%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(util.stackFrame.awaitingSound)%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(sound.currentTime%20%3E%3D%20Cast.toNumber(args.MAX))%0D%0A%20%20%20%20%20%20%20%20%20%20this.audioControlDo(sound%2C%20%22stop%22)%3B%0D%0A%20%20%20%20%20%20%20%20else%20util.yield()%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20stopSound(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound%20!%3D%3D%20undefined)%20this.audioControlDo(sound%2C%20%22stop%22)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20pauseSound(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound%20%3D%3D%3D%20undefined)%20return%3B%0D%0A%20%20%20%20%20%20if%20(args.UN_PAUSE%20%3D%3D%3D%20%22pause%22)%20this.audioControlDo(sound%2C%20%22pause%22)%3B%0D%0A%20%20%20%20%20%20else%20this.audioControlDo(sound%2C%20%22unpause%22)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20ctrlSounds(args)%20%7B%0D%0A%20%20%20%20%20%20const%20controlFuncs%20%3D%20%7B%0D%0A%20%20%20%20%20%20%20%20start%3A%20(sound)%20%3D%3E%20this.playSound(sound.context%2C%200%2C%20sound)%2C%0D%0A%20%20%20%20%20%20%20%20pause%3A%20(sound)%20%3D%3E%20this.audioControlDo(sound%2C%20%22pause%22)%2C%0D%0A%20%20%20%20%20%20%20%20unpause%3A%20(sound)%20%3D%3E%20this.audioControlDo(sound%2C%20%22unpause%22)%2C%0D%0A%20%20%20%20%20%20%20%20stop%3A%20(sound)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(sound.context.playing)%20sound.context.stop()%3B%0D%0A%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20func%20%3D%20controlFuncs%5BCast.toString(args.CONTROL)%5D%3B%0D%0A%20%20%20%20%20%20if%20(func)%20%7B%0D%0A%20%20%20%20%20%20%20%20Object.values(soundBank).forEach(func)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20enableControl(args)%20%7B%0D%0A%20%20%20%20%20%20settings.flagCtrl%20%3D%20args.ON_OFF%20%3D%3D%3D%20%22on%22%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20toggleOverlap(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound%20%3D%3D%3D%20undefined)%20return%3B%0D%0A%20%20%20%20%20%20sound.overlap%20%3D%20args.TYPE%20%3D%3D%3D%20%22on%22%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20toggleLoop(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound%20%3D%3D%3D%20undefined)%20return%3B%0D%0A%20%20%20%20%20%20const%20oldValue%20%3D%20sound.context.loop%3B%0D%0A%20%20%20%20%20%20sound.context.loop%20%3D%20args.TYPE%20%3D%3D%3D%20%22on%22%3B%0D%0A%20%20%20%20%20%20if%20(args.TYPE%20%3D%3D%3D%20%22off%22)%20this.audioControlDo(sound%2C%20%22stop%22)%3B%0D%0A%20%20%20%20%20%20else%20if%20(!oldValue%20%26%26%20sound.context.playing)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20lastTime%20%3D%20sound.currentTime%3B%0D%0A%20%20%20%20%20%20%20%20sound.context.stop()%3B%0D%0A%20%20%20%20%20%20%20%20sound.currentTime%20%3D%20lastTime%3B%0D%0A%20%20%20%20%20%20%20%20sound.context.play(0%2C%20lastTime)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20toggleReverse(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound%20%3D%3D%3D%20undefined)%20return%3B%0D%0A%20%20%20%20%20%20if%20(sound.reversed%20%3D%3D%3D%20(args.TYPE%20%3D%3D%3D%20%22on%22))%20return%3B%0D%0A%20%20%20%20%20%20sound.reversed%20%3D%20args.TYPE%20%3D%3D%3D%20%22on%22%3B%0D%0A%20%20%20%20%20%20this.audioControlDo(sound%2C%20%22stop%22)%3B%0D%0A%20%20%20%20%20%20sound._cache%20%3D%20%7B%20loudness%3A%20%7B%7D%2C%20tone%3A%20%7B%7D%20%7D%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20node%20%3D%20sound.context.sourceNode%3B%0D%0A%20%20%20%20%20%20const%20reverseBuffer%20%3D%20(buffer)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20buffer.numberOfChannels%3B%20i%2B%2B)%0D%0A%20%20%20%20%20%20%20%20%20%20buffer.getChannelData(i).reverse()%3B%0D%0A%20%20%20%20%20%20%20%20return%20buffer%3B%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20bufferSource%20%3D%20node.context.createBufferSource()%3B%0D%0A%20%20%20%20%20%20bufferSource.buffer%20%3D%20reverseBuffer(node.buffer)%3B%0D%0A%20%20%20%20%20%20bufferSource.connect(node.context.destination)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20loopParams(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound%20%3D%3D%3D%20undefined)%20return%3B%0D%0A%20%20%20%20%20%20sound.context.loop%20%3D%20true%3B%0D%0A%20%20%20%20%20%20const%20srcNode%20%3D%20sound.context.sourceNode%3B%0D%0A%20%20%20%20%20%20srcNode.loopStart%20%3D%20Cast.toNumber(args.START)%3B%0D%0A%20%20%20%20%20%20srcNode.loopEnd%20%3D%20Cast.toNumber(args.END)%3B%0D%0A%20%20%20%20%20%20sound.loopParm%20%3D%20%5BsrcNode.loopStart%2C%20srcNode.loopEnd%5D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20deleteSound(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.stopSound(args)%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20const%20ctx%20%3D%20sound.context%3B%0D%0A%20%20%20%20%20%20%20%20ctx.volume%20%3D%200%3B%0D%0A%20%20%20%20%20%20%20%20ctx.sourceNode.disconnect()%3B%0D%0A%20%20%20%20%20%20%20%20ctx.disconnect()%3B%0D%0A%20%20%20%20%20%20%20%20delete%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20deleteAllSounds()%20%7B%0D%0A%20%20%20%20%20%20for%20(let%20name%20in%20soundBank)%20this.deleteSound(%7B%20NAME%3A%20name%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20allSounds()%20%7B%0D%0A%20%20%20%20%20%20return%20JSON.stringify(Object.keys(soundBank))%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20allPlaySounds()%20%7B%0D%0A%20%20%20%20%20%20const%20players%20%3D%20%5B%5D%3B%0D%0A%20%20%20%20%20%20Object.entries(soundBank).forEach((%5Bkey%2C%20innerSrc%5D)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(innerSrc.context.playing)%20players.push(key)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20return%20JSON.stringify(players)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20whenSound(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20util.thread%5Bts3Data%5D%20%3F%3F%20%7B%7D%3B%0D%0A%20%20%20%20%20%20return%20args.CONTROL%20%3D%3D%3D%20data.type%20%26%26%20args.NAME%20%3D%3D%3D%20data.name%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20soundCheck(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound%20%3D%3D%3D%20undefined)%20return%20false%3B%0D%0A%20%20%20%20%20%20switch%20(args.CONTROL)%20%7B%0D%0A%20%20%20%20%20%20%20%20case%20%22exists%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20sound.loaded%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22playing%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20sound.context.playing%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22paused%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20sound.context.paused%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22looped%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20sound.context.loop%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22overlaped%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20sound.overlap%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22reversed%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20sound.reversed%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22binded%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20sound.isBind%3B%0D%0A%20%20%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20false%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20soundProperty(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound%20%3D%3D%3D%20undefined)%20return%200%3B%0D%0A%20%20%20%20%20%20const%20src%20%3D%20sound.context.sourceNode%3B%0D%0A%20%20%20%20%20%20const%20prop%20%3D%20Cast.toString(args.PROP)%3B%0D%0A%20%20%20%20%20%20switch%20(prop)%20%7B%0D%0A%20%20%20%20%20%20%20%20case%20%22length%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20src.buffer.duration%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22current%20time%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20sound.currentTime%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22estimated%20bpm%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20this.getBPM(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20src.buffer.getChannelData(0)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20src.buffer.sampleRate%0D%0A%20%20%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22channels%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20src.buffer.numberOfChannels%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22samples%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20src.buffer.sampleRate%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22fft%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20dataArray%20%3D%20new%20Uint8Array(sound.analyser.frequencyBinCount)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20sound.analyser.getByteFrequencyData(dataArray)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20JSON.stringify(Array.from(dataArray))%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20case%20%22source%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20sound.src%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22binds%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20JSON.stringify(Object.keys(sound.binds))%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22volume%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20sound.context.volume%20*%20100%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22pitch%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20Math.round((sound.pitch%20-%201)%20*%20100)%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22detune%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20sound.detune%20%2F%2010%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22speed%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20sound.speed%20*%20100%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22gain%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20sound.gain%20*%20100%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22pan%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20sound.effects%5Bprop.toUpperCase()%5D%3F.options.pan%20*%20100%20%7C%7C%200%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22distortion%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20sound.effects%5Bprop.toUpperCase()%5D%3F.options.gain%20*%20100%20%7C%7C%200%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22attack%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20sound.attack%20*%20100%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22release%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20sound.release%20*%20100%3B%0D%0A%20%20%20%20%20%20%20%20default%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20effect%20%3D%20sound.effects%5Bprop.toUpperCase()%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(effect%20%3D%3D%3D%20undefined)%20return%20%22%22%3B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20JSON.stringify(effect.rawParams)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getLoudTime(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound%20%3D%3D%3D%20undefined)%20return%200%3B%0D%0A%20%20%20%20%20%20const%20time%20%3D%20Cast.toNumber(args.TIME)%3B%0D%0A%20%20%20%20%20%20const%20chan%20%3D%20Cast.toNumber(args.CHANNEL)%20-%201%3B%0D%0A%20%20%20%20%20%20const%20audioCtx%20%3D%20sound.context.sourceNode%3B%0D%0A%20%20%20%20%20%20const%20buffer%20%3D%20audioCtx.buffer%3B%0D%0A%20%20%20%20%20%20const%20duration%20%3D%20buffer.duration%3B%0D%0A%20%20%20%20%20%20if%20(%0D%0A%20%20%20%20%20%20%20%20time%20%3C%200%20%7C%7C%0D%0A%20%20%20%20%20%20%20%20time%20%3E%20duration%20%7C%7C%0D%0A%20%20%20%20%20%20%20%20chan%20%3C%200%20%7C%7C%0D%0A%20%20%20%20%20%20%20%20chan%20%3E%20buffer.numberOfChannels%20-%201%0D%0A%20%20%20%20%20%20)%20%7B%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20let%20value%20%3D%200%3B%0D%0A%20%20%20%20%20%20if%20(%0D%0A%20%20%20%20%20%20%20%20args.TYPE%20!%3D%3D%20%22raw%20noise%22%20%26%26%0D%0A%20%20%20%20%20%20%20%20sound._cache%5Bargs.TYPE%5D%5B%60%24%7Btime%7D%24%7Bchan%7D%60%5D%20!%3D%3D%20undefined%0D%0A%20%20%20%20%20%20)%20%7B%0D%0A%20%20%20%20%20%20%20%20value%20%3D%20sound._cache%5Bargs.TYPE%5D%5B%60%24%7Btime%7D%24%7Bchan%7D%60%5D%3B%0D%0A%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20sampleRate%20%3D%20buffer.sampleRate%3B%0D%0A%20%20%20%20%20%20%20%20const%20channelData%20%3D%20buffer.getChannelData(chan)%3B%0D%0A%20%20%20%20%20%20%20%20const%20sampleIndex%20%3D%20Math.floor(sampleRate%20*%20time)%3B%0D%0A%20%20%20%20%20%20%20%20const%20windowSize%20%3D%20sampleRate%20*%200.1%3B%0D%0A%20%20%20%20%20%20%20%20const%20startSample%20%3D%20Math.max(0%2C%20sampleIndex%20-%20windowSize%20%2F%202)%3B%0D%0A%20%20%20%20%20%20%20%20const%20endSample%20%3D%20Math.min(%0D%0A%20%20%20%20%20%20%20%20%20%20channelData.length%2C%0D%0A%20%20%20%20%20%20%20%20%20%20sampleIndex%20%2B%20windowSize%20%2F%202%0D%0A%20%20%20%20%20%20%20%20)%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20no%20need%20to%20cache%20raw%20noise%2C%20no%20work%20is%20done%0D%0A%20%20%20%20%20%20%20%20if%20(args.TYPE%20%3D%3D%3D%20%22raw%20noise%22)%20value%20%3D%20channelData%5BendSample%5D%3B%0D%0A%20%20%20%20%20%20%20%20else%20if%20(args.TYPE%20%3D%3D%3D%20%22tone%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20data%20%3D%20channelData.slice(startSample%2C%20endSample)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20size%20%3D%20data.length%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20tauArray%20%3D%20new%20Array(size).fill(0)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20tau%20%3D%201%3B%20tau%20%3C%20size%3B%20tau%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20sum%20%3D%200%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20size%20-%20tau%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20diff%20%3D%20data%5Bi%5D%20-%20data%5Bi%20%2B%20tau%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sum%20%2B%3D%20diff%20*%20diff%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20tauArray%5Btau%5D%20%3D%20sum%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20tau%20%3D%201%3B%20tau%20%3C%20size%3B%20tau%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20value%20%2B%3D%20tauArray%5Btau%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20tauArray%5Btau%5D%20*%3D%20tau%20%2F%20value%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20let%20bestTau%20%3D%20-1%3B%0D%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20tau%20%3D%201%3B%20tau%20%3C%20size%3B%20tau%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(tauArray%5Btau%5D%20%3C%200.1)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20bestTau%20%3D%20tau%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20value%20%3D%20bestTau%20%3E%200%20%3F%20sampleRate%20%2F%20bestTau%20%3A%200%3B%0D%0A%20%20%20%20%20%20%20%20%20%20sound._cache%5B%22tone%22%5D%5B%60%24%7Btime%7D%24%7Bchan%7D%60%5D%20%3D%20value%3B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20value%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(args.TYPE%20%3D%3D%3D%20%22loudness%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%20startSample%3B%20i%20%3C%20endSample%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20value%20%2B%3D%20channelData%5Bi%5D%20*%20channelData%5Bi%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20const%20rms%20%3D%20Math.sqrt(value%20%2F%20(endSample%20-%20startSample))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20dB%20%3D%2020%20*%20Math.log10(rms)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20value%20%3D%20clamp(0%2C%201%2C%20(dB%20%2B%2050)%20%2F%2050)%20*%20100%3B%0D%0A%20%20%20%20%20%20%20%20%20%20sound._cache%5B%22loudness%22%5D%5B%60%24%7Btime%7D%24%7Bchan%7D%60%5D%20%3D%20value%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20%22%22%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20return%20isNaN(value)%20%3F%200%20%3A%20value%20*%20sound.gain%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20cropSound(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20const%20start%20%3D%20Cast.toNumber(args.START)%3B%0D%0A%20%20%20%20%20%20const%20end%20%3D%20Cast.toNumber(args.END)%3B%0D%0A%20%20%20%20%20%20if%20(sound%20%3D%3D%3D%20undefined%20%7C%7C%20start%20%3E%3D%20end)%20return%20%22%22%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20context%20%3D%20sound.context.sourceNode%3B%0D%0A%20%20%20%20%20%20const%20buffer%20%3D%20context.buffer%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20startSample%20%3D%20Math.floor(start%20*%20buffer.sampleRate)%3B%0D%0A%20%20%20%20%20%20const%20endSample%20%3D%20Math.floor(end%20*%20buffer.sampleRate)%3B%0D%0A%20%20%20%20%20%20const%20croppedBuffer%20%3D%20context.context.createBuffer(%0D%0A%20%20%20%20%20%20%20%20buffer.numberOfChannels%2C%0D%0A%20%20%20%20%20%20%20%20endSample%20-%20startSample%2C%0D%0A%20%20%20%20%20%20%20%20buffer.sampleRate%0D%0A%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20buffer.numberOfChannels%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20croppedBuffer%0D%0A%20%20%20%20%20%20%20%20%20%20.getChannelData(i)%0D%0A%20%20%20%20%20%20%20%20%20%20.set(buffer.getChannelData(i).subarray(startSample%2C%20endSample))%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20reader%20%3D%20new%20FileReader()%3B%0D%0A%20%20%20%20%20%20%20%20reader.onload%20%3D%20()%20%3D%3E%20resolve(reader.result)%3B%0D%0A%20%20%20%20%20%20%20%20reader.onerror%20%3D%20()%20%3D%3E%20resolve(%22%22)%3B%0D%0A%20%20%20%20%20%20%20%20reader.readAsDataURL(this.bufferToWavBlob(croppedBuffer))%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20joinSound(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound1%20%3D%20soundBank%5Bargs.NAME1%5D%3B%0D%0A%20%20%20%20%20%20const%20sound2%20%3D%20soundBank%5Bargs.NAME2%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound1%20%3D%3D%3D%20undefined%20%7C%7C%20sound2%20%3D%3D%3D%20undefined)%20return%20%22%22%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20context%20%3D%20sound1.context.sourceNode%3B%0D%0A%20%20%20%20%20%20const%20buffer1%20%3D%20context.buffer%3B%0D%0A%20%20%20%20%20%20const%20buffer2%20%3D%20sound2.context.sourceNode.buffer%3B%0D%0A%0D%0A%20%20%20%20%20%20if%20(%0D%0A%20%20%20%20%20%20%20%20buffer1.sampleRate%20!%3D%3D%20buffer2.sampleRate%20%7C%7C%0D%0A%20%20%20%20%20%20%20%20buffer1.numberOfChannels%20!%3D%3D%20buffer2.numberOfChannels%0D%0A%20%20%20%20%20%20)%20%7B%0D%0A%20%20%20%20%20%20%20%20console.warn(%0D%0A%20%20%20%20%20%20%20%20%20%20%22Cannot%20join%20sounds!%20Sample%20rate%20or%20channel%20count%20doesnt%20match.%22%0D%0A%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20const%20joinedBuffer%20%3D%20context.context.createBuffer(%0D%0A%20%20%20%20%20%20%20%20buffer1.numberOfChannels%2C%0D%0A%20%20%20%20%20%20%20%20buffer1.length%20%2B%20buffer2.length%2C%0D%0A%20%20%20%20%20%20%20%20buffer1.sampleRate%0D%0A%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20buffer1.numberOfChannels%3B%20i%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20channel%20%3D%20joinedBuffer.getChannelData(i)%3B%0D%0A%20%20%20%20%20%20%20%20channel.set(buffer1.getChannelData(i)%2C%200)%3B%0D%0A%20%20%20%20%20%20%20%20channel.set(buffer2.getChannelData(i)%2C%20buffer1.length)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20reader%20%3D%20new%20FileReader()%3B%0D%0A%20%20%20%20%20%20%20%20reader.onload%20%3D%20()%20%3D%3E%20resolve(reader.result)%3B%0D%0A%20%20%20%20%20%20%20%20reader.onerror%20%3D%20()%20%3D%3E%20resolve(%22%22)%3B%0D%0A%20%20%20%20%20%20%20%20reader.readAsDataURL(this.bufferToWavBlob(joinedBuffer))%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setVol(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound)%20%7B%0D%0A%20%20%20%20%20%20%20%20sound.context.volume%20%3D%20clamp(0%2C%201%2C%20Cast.toNumber(args.NUM)%20%2F%20100)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20resetEffect(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound%20%3D%3D%3D%20undefined)%20return%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20ctx%20%3D%20sound.context%3B%0D%0A%20%20%20%20%20%20const%20effect%20%3D%20Cast.toString(args.EFFECT)%3B%0D%0A%20%20%20%20%20%20const%20name%20%3D%20effect.toUpperCase()%3B%0D%0A%20%20%20%20%20%20if%20(effect%20%3D%3D%3D%20%22pitch%22)%20sound.pitch%20%3D%201%3B%0D%0A%20%20%20%20%20%20else%20if%20(effect%20%3D%3D%3D%20%22detune%22)%20sound.detune%20%3D%200%3B%0D%0A%20%20%20%20%20%20else%20if%20(effect%20%3D%3D%3D%20%22speed%22)%20sound.speed%20%3D%201%3B%0D%0A%20%20%20%20%20%20else%20if%20(effect%20%3D%3D%3D%20%22gain%22)%20sound.gain%20%3D%201%3B%0D%0A%20%20%20%20%20%20else%20if%20(effect%20%3D%3D%3D%20%22attack%22)%20sound.attack%20%3D%200%3B%0D%0A%20%20%20%20%20%20else%20if%20(effect%20%3D%3D%3D%20%22release%22)%20sound.release%20%3D%200%3B%0D%0A%20%20%20%20%20%20else%20if%20(effect%20%3D%3D%3D%20%22all%20effects%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20sound.pitch%20%3D%201%3B%0D%0A%20%20%20%20%20%20%20%20sound.detune%20%3D%200%3B%0D%0A%20%20%20%20%20%20%20%20sound.speed%20%3D%201%3B%0D%0A%20%20%20%20%20%20%20%20sound.gain%20%3D%201%3B%0D%0A%20%20%20%20%20%20%20%20sound.attack%20%3D%200%3B%0D%0A%20%20%20%20%20%20%20%20sound.release%20%3D%200%3B%0D%0A%20%20%20%20%20%20%20%20const%20effects%20%3D%20sound.effects%3B%0D%0A%20%20%20%20%20%20%20%20Object.values(effects).forEach((e)%20%3D%3E%20ctx.removeEffect(e))%3B%0D%0A%20%20%20%20%20%20%20%20sound.effects%20%3D%20%7B%7D%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20if%20(sound.effects%5Bname%5D%20!%3D%3D%20undefined)%20%7B%0D%0A%20%20%20%20%20%20%20%20ctx.removeEffect(sound.effects%5Bname%5D)%3B%0D%0A%20%20%20%20%20%20%20%20delete%20sound.effects%5Bname%5D%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20sound.rate%20%3D%20sound.pitch%20*%20sound.speed%20*%20Math.pow(2%2C%20sound.detune%20%2F%201200)%3B%0D%0A%20%20%20%20%20%20this.updateAudioNodes(ctx.sourceNode%2C%20sound)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setThingNew(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound%20%3D%3D%3D%20undefined)%20return%3B%0D%0A%20%20%20%20%20%20const%20ctx%20%3D%20sound.context%3B%0D%0A%20%20%20%20%20%20const%20value%20%3D%20Cast.toNumber(args.VALUE)%20%2F%20100%3B%0D%0A%0D%0A%20%20%20%20%20%20if%20(args.TYPE%20%3D%3D%3D%20%22gain%22)%20sound.gain%20%3D%20value%3B%0D%0A%20%20%20%20%20%20else%20if%20(args.TYPE%20%3D%3D%3D%20%22pitch%22)%20sound.pitch%20%3D%20Math.max(0%2C%20value%20%2B%201)%3B%0D%0A%20%20%20%20%20%20else%20if%20(args.TYPE%20%3D%3D%3D%20%22detune%22)%20sound.detune%20%3D%20value%20*%201000%3B%0D%0A%20%20%20%20%20%20else%20if%20(args.TYPE%20%3D%3D%3D%20%22speed%22)%20sound.speed%20%3D%20Math.max(0%2C%20value)%3B%0D%0A%20%20%20%20%20%20else%20if%20(args.TYPE%20%3D%3D%3D%20%22attack%22)%20sound.attack%20%3D%20Math.max(0%2C%20value)%3B%0D%0A%20%20%20%20%20%20else%20if%20(args.TYPE%20%3D%3D%3D%20%22release%22)%20sound.release%20%3D%20Math.max(0%2C%20value)%3B%0D%0A%20%20%20%20%20%20else%20if%20(args.TYPE%20%3D%3D%3D%20%22pan%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.handleEffect(sound%2C%20%22PAN%22%2C%20args%2C%20%7B%20pan%3A%20clamp(-1%2C%201%2C%20value)%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20return%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(args.TYPE%20%3D%3D%3D%20%22distortion%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.handleEffect(sound%2C%20%22DISTORTION%22%2C%20args%2C%20%7B%20gain%3A%20value%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20return%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20sound.rate%20%3D%20sound.pitch%20*%20sound.speed%20*%20Math.pow(2%2C%20sound.detune%20%2F%201200)%3B%0D%0A%20%20%20%20%20%20this.updateAudioNodes(ctx.sourceNode%2C%20sound)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setReverb(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.handleEffect(sound%2C%20%22REVERB%22%2C%20args%2C%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20time%3A%20Cast.toNumber(args.TIME)%20%2F%2010%2C%0D%0A%20%20%20%20%20%20%20%20%20%20decay%3A%20Cast.toNumber(args.DECAY)%20%2F%2010%2C%0D%0A%20%20%20%20%20%20%20%20%20%20mix%3A%20Cast.toNumber(args.MIX)%20%2F%20100%2C%0D%0A%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setDelay(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.handleEffect(sound%2C%20%22DELAY%22%2C%20args%2C%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20time%3A%20clamp(0%2C%201%2C%20Cast.toNumber(args.TIME)%20%2F%20100)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20decay%3A%20Cast.toNumber(args.FEED)%20%2F%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20mix%3A%20Cast.toNumber(args.MIX)%20%2F%20100%2C%0D%0A%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setFuzz(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.handleEffect(sound%2C%20%22FUZZ%22%2C%20args%2C%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20lowGain%3A%20clamp(0%2C%201%2C%20Cast.toNumber(args.LOW)%20%2F%20100)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20midLowGain%3A%20clamp(0%2C%201%2C%20Cast.toNumber(args.MED1)%20%2F%20100)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20midHighGain%3A%20clamp(0%2C%201%2C%20Cast.toNumber(args.MED2)%20%2F%20100)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20highGain%3A%20clamp(0%2C%201%2C%20Cast.toNumber(args.HIGH)%20%2F%20100)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20mix%3A%20Cast.toNumber(args.MIX)%20%2F%20100%2C%0D%0A%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setBitcrush(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.handleEffect(sound%2C%20%22BITCRUSH%22%2C%20args%2C%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20bits%3A%20Math.max(10%2C%20Cast.toNumber(args.BITS))%20%2F%2010%2C%0D%0A%20%20%20%20%20%20%20%20%20%20frequency%3A%20Math.max(30000%2C%20Cast.toNumber(args.FREQ))%2C%0D%0A%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setPan3D(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.handleEffect(sound%2C%20%22PAN3D%22%2C%20args%2C%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20x%3A%20Cast.toNumber(args.X)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20y%3A%20Cast.toNumber(args.Y)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20z%3A%20Cast.toNumber(args.Z)%20-%201%2C%0D%0A%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setTremolo(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.handleEffect(sound%2C%20%22TREMOLO%22%2C%20args%2C%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20speed%3A%20Cast.toNumber(args.SPEED)%20%2F%205%2C%0D%0A%20%20%20%20%20%20%20%20%20%20depth%3A%20clamp(0%2C%201%2C%20Cast.toNumber(args.DEPTH)%20%2F%20100)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20mix%3A%20Cast.toNumber(args.MIX)%20%2F%20100%2C%0D%0A%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setPass(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.handleEffect(%0D%0A%20%20%20%20%20%20%20%20%20%20sound%2C%0D%0A%20%20%20%20%20%20%20%20%20%20args.TYPE%20%3D%3D%3D%20%22highpass%22%20%3F%20%22HIGHPASS%22%20%3A%20%22LOWPASS%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20args%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20frequency%3A%20Cast.toNumber(args.FREQ)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20peak%3A%20Cast.toNumber(args.PEAK)%20%2F%205%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setFlanger(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.handleEffect(sound%2C%20%22FLANGER%22%2C%20args%2C%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20time%3A%20Cast.toNumber(args.TIME)%20%2F%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20speed%3A%20Cast.toNumber(args.SPEED)%20%2F%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20depth%3A%20Cast.toNumber(args.DEPTH)%20%2F%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20feedback%3A%20Cast.toNumber(args.FEED)%20%2F%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20mix%3A%20Cast.toNumber(args.MIX)%20%2F%20100%2C%0D%0A%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setCompress(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.handleEffect(sound%2C%20%22COMPRESSOR%22%2C%20args%2C%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20threshold%3A%20clamp(-100%2C%200%2C%20Cast.toNumber(args.THRESH)%20*%20-1)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20ratio%3A%20Cast.toNumber(args.RATIO)%20%2F%205%2C%0D%0A%20%20%20%20%20%20%20%20%20%20attack%3A%20clamp(0%2C%201%2C%20Cast.toNumber(args.ATTACK)%20%2F%20100)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20release%3A%20clamp(0%2C%201%2C%20Cast.toNumber(args.RELEASE)%20%2F%20100)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20knee%3A%20Cast.toNumber(args.KNEE)%20%2F%202.5%2C%0D%0A%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setEqualize(args)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.handleEffect(sound%2C%20%22EQUALIZER%22%2C%20args%2C%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20cutoff_frequency_high%3A%20120%20*%20(Cast.toNumber(args.CUT_HIGH)%20%2B%20100)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20cutoff_frequency_low%3A%20120%20*%20(Cast.toNumber(args.CUT_LOW)%20%2B%20100)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20low_band_gain%3A%20Cast.toNumber(args.LOW)%20%2F%2010%2C%0D%0A%20%20%20%20%20%20%20%20%20%20mid_band_gain%3A%20Cast.toNumber(args.MID)%20%2F%2010%2C%0D%0A%20%20%20%20%20%20%20%20%20%20high_band_gain%3A%20Cast.toNumber(args.HIGH)%20%2F%2010%2C%0D%0A%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%2F*%20Deprecation%20Marker%20*%2F%0D%0A%20%20%20%20%2F%2F%20PenguinMod%20Storage%0D%0A%20%20%20%20serialize()%20%7B%0D%0A%20%20%20%20%20%20if%20(settings.canSave)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20convertedBank%20%3D%20JSON.parse(JSON.stringify(soundBank))%3B%0D%0A%20%20%20%20%20%20%20%20Object.values(convertedBank).forEach(item%20%3D%3E%20delete%20item.context)%3B%0D%0A%20%20%20%20%20%20%20%20return%20%7B%20SPtuneShark3%3A%20%7B%20bank%3A%20convertedBank%2C%20settings%20%7D%20%7D%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20return%20%7B%7D%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20deserialize(data)%20%7B%0D%0A%20%20%20%20%20%20this.loadStorage(data.SPtuneShark3)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20save2Project(args)%20%7B%0D%0A%20%20%20%20%20%20settings.canSave%20%3D%20args.SAVE%20%3D%3D%3D%20%22save%22%3B%0D%0A%20%20%20%20%20%20if%20(!Scratch.extensions.isPenguinMod)%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(settings.canSave)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20convertedBank%20%3D%20JSON.parse(JSON.stringify(soundBank))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20Object.values(convertedBank).forEach(item%20%3D%3E%20delete%20item.context)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20runtime.extensionStorage%5B%22SPtuneShark3%22%5D%20%3D%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20bank%3A%20convertedBank%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20settings%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20runtime.extensionStorage%5B%22SPtuneShark3%22%5D%20%3D%20undefined%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20async%20convertSound(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20sound%20%3D%20soundBank%5Bargs.NAME1%5D%3B%0D%0A%20%20%20%20%20%20if%20(sound%20%3D%3D%3D%20undefined)%20return%3B%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20response%20%3D%20await%20Scratch.fetch(sound.src)%3B%0D%0A%20%20%20%20%20%20%20%20const%20audioBlob%20%3D%20await%20response.blob()%3B%0D%0A%20%20%20%20%20%20%20%20const%20audioDataURL%20%3D%20await%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20reader%20%3D%20new%20FileReader()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20reader.onloadend%20%3D%20()%20%3D%3E%20resolve(reader.result)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20reader.readAsDataURL(audioBlob)%3B%0D%0A%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20await%20this.importURL(%7B%20NAME%3A%20args.NAME2%2C%20URL%3A%20audioDataURL%20%7D%2C%20util)%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0D%0A%20%20%20%20%20%20%20%20console.error(e)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20setThing(args)%20%7B%20this.setThingNew(args)%20%7D%0D%0A%20%20%20%20%2F*%20Marker%20End%20*%2F%0D%0A%20%20%7D%0D%0A%0D%0A%20%20Scratch.extensions.register(new%20SPtuneShark3())%3B%0D%0A%7D)(Scratch)%3B%0D%0A%0D%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20HTTP%0A%2F%2F%20ID%3A%20gsaHTTPRequests%0A%2F%2F%20Description%3A%20Comprehensive%20extension%20for%20interacting%20with%20external%20websites.%0A%2F%2F%20By%3A%20RedMan13%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FRedMan13%2F%3E%0A%2F%2F%20License%3A%20MIT%0A%0A%2F*%20generated%20l10n%20code%20*%2FScratch.translate.setup(%7B%22fi%22%3A%7B%22_Hide%20Extra%22%3A%22Piilota%20lis%C3%A4lohkot%22%2C%22_Request%22%3A%22Pyynt%C3%B6%22%2C%22_Response%22%3A%22Vastaus%22%2C%22_Show%20Extra%22%3A%22N%C3%A4yt%C3%A4%20lis%C3%A4lohkot%22%2C%22_%5Bname%5D%20in%20multipart%20form%22%3A%22%5Bname%5D%20moniosaisessa%20lomakkeessa%22%2C%22_%5Bpath%5D%20in%20request%20options%22%3A%22pyynt%C3%B6asetusten%20%5Bpath%5D%22%2C%22_clear%20current%20data%22%3A%22tyhjenn%C3%A4%20nykyiset%20tiedot%22%2C%22_delete%20%5Bname%5D%20from%20multipart%20form%22%3A%22poista%20%5Bname%5D%20moniosaisesta%20lomakkeesta%22%2C%22_error%22%3A%22virhe%22%2C%22_request%20failed%3F%22%3A%22ep%C3%A4onnistuiko%20pyynt%C3%B6%3F%22%2C%22_request%20succeeded%3F%22%3A%22onnistuiko%20pyynt%C3%B6%3F%22%2C%22_response%22%3A%22vastaus%22%2C%22_response%20headers%20as%20json%22%3A%22vastauksen%20otsakkeet%20JSON-muodossa%22%2C%22_send%20request%20to%20%5Burl%5D%22%3A%22l%C3%A4het%C3%A4%20pyynt%C3%B6%20osoitteeseen%20%5Burl%5D%22%2C%22_set%20%5Bname%5D%20to%20%5Bvalue%5D%20in%20multipart%20form%22%3A%22aseta%20moniosaisen%20lomakkeen%20%5Bname%5D%20arvoon%20%5Bvalue%5D%22%2C%22_set%20%5Bpath%5D%20to%20%5Bvalue%5D%20in%20request%20options%22%3A%22aseta%20pyynt%C3%B6asetusten%20%5Bpath%5D%20arvoon%20%5Bvalue%5D%22%2C%22_set%20%5Bpath%5D%20to%20type%20%5Btype%5D%20in%20request%20options%22%3A%22aseta%20pyynt%C3%B6asetusten%20kohteen%20%5Bpath%5D%20tyypiksi%20%5Btype%5D%22%2C%22_set%20request%20body%20to%20%5Btext%5D%22%3A%22aseta%20pyynn%C3%B6n%20rungoksi%20%5Btext%5D%22%2C%22_set%20request%20body%20to%20multipart%20form%22%3A%22aseta%20pyynn%C3%B6n%20runko%20moniosaiseksi%20lomakkeeksi%22%2C%22_set%20request%20method%20to%20%5Bmethod%5D%22%3A%22aseta%20pyynt%C3%B6menetelm%C3%A4ksi%20%5Bmethod%5D%22%2C%22_site%20responded%3F%22%3A%22vastasiko%20sivusto%3F%22%2C%22_status%22%3A%22tila%22%2C%22_status%20text%22%3A%22tilateksti%22%2C%22_type%20of%20%5Bpath%5D%20in%20request%20options%22%3A%22pyynt%C3%B6asetusten%20kohteen%20%5Bpath%5D%20tyyppi%22%2C%22_when%20a%20request%20fails%22%3A%22kun%20pyynt%C3%B6%20ep%C3%A4onnistuu%22%2C%22_when%20a%20site%20responds%22%3A%22kun%20sivusto%20vastaa%22%7D%2C%22it%22%3A%7B%22_Hide%20Extra%22%3A%22Nascondi%20Blocchi%20Extra%22%2C%22_Request%22%3A%22Richiesta%22%2C%22_Response%22%3A%22Risposta%22%2C%22_Show%20Extra%22%3A%22Mostra%20Blocchi%20Extra%22%2C%22_%5Bname%5D%20from%20response%20headers%22%3A%22%5Bname%5D%20da%20intestazioni%20risposta%22%2C%22_%5Bpath%5D%20in%20request%20options%22%3A%22%5Bpath%5D%20in%20opzioni%20richiesta%22%2C%22_clear%20current%20data%22%3A%22cancella%20dati%20attuali%22%2C%22_delete%20%5Bname%5D%20from%20multipart%20form%22%3A%22rimuovi%20%5Bname%5D%20da%20multipart%20form%22%2C%22_error%22%3A%22errore%22%2C%22_in%20request%20headers%20set%20%5Bname%5D%20to%20%5Bvalue%5D%22%3A%22imposta%20%5Bname%5D%20a%20%5Bvalue%5D%20in%20intestazioni%20richiesta%22%2C%22_request%20failed%3F%22%3A%22richiesta%20fallita%22%2C%22_request%20succeeded%3F%22%3A%22richiesta%20avuto%20successo%22%2C%22_response%22%3A%22risposta%22%2C%22_response%20headers%20as%20json%22%3A%22intestazioni%20risposta%20come%20json%22%2C%22_send%20request%20to%20%5Burl%5D%22%3A%22invia%20richiesta%20a%20%5Burl%5D%22%2C%22_set%20%5Bname%5D%20to%20%5Bvalue%5D%20in%20multipart%20form%22%3A%22porta%20%5Bname%5D%20a%20%5Bvalue%5D%20in%20multipart%20form%22%2C%22_set%20%5Bpath%5D%20to%20%5Bvalue%5D%20in%20request%20options%22%3A%22imposta%20%5Bpath%5D%20a%20%5Bvalue%5D%20in%20opzioni%20richiesta%22%2C%22_set%20%5Bpath%5D%20to%20type%20%5Btype%5D%20in%20request%20options%22%3A%22imposta%20%5Bpath%5D%20a%20tipo%20%5Btype%5D%20in%20opzioni%20richiesta%22%2C%22_set%20request%20body%20to%20%5Btext%5D%22%3A%22imposta%20corpo%20richiesta%20a%20%5Btext%5D%22%2C%22_set%20request%20body%20to%20multipart%20form%22%3A%22porta%20corpo%20richiesta%20a%20multipart%20form%22%2C%22_set%20request%20content%20type%20to%20%5Btype%5D%22%3A%22imposta%20tipo%20contenuto%20richiesta%20a%5Btype%5D%22%2C%22_set%20request%20headers%20to%20json%20%5Bjson%5D%22%3A%22imposta%20intestazioni%20richiesta%20a%20json%20%5Bjson%5D%22%2C%22_set%20request%20method%20to%20%5Bmethod%5D%22%3A%22imposta%20metodo%20richiesta%20a%20%5Bmethod%5D%22%2C%22_site%20responded%3F%22%3A%22sito%20ha%20risposto%22%2C%22_status%22%3A%22stato%22%2C%22_status%20text%22%3A%22stato%20come%20testo%22%2C%22_type%20of%20%5Bpath%5D%20in%20request%20options%22%3A%22tipo%20di%20%5Bpath%5D%20in%20opzioni%20richiesta%22%2C%22_when%20a%20request%20fails%22%3A%22quando%20una%20richiesta%20fallisce%22%2C%22_when%20a%20site%20responds%22%3A%22quando%20un%20sito%20risponde%22%7D%2C%22ja%22%3A%7B%22_Request%22%3A%22%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88%22%2C%22_Response%22%3A%22%E8%BF%94%E7%AD%94%22%2C%22_clear%20current%20data%22%3A%22%E7%8F%BE%E5%9C%A8%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E3%82%AF%E3%83%AA%E3%82%A2%E3%81%99%E3%82%8B%22%2C%22_error%22%3A%22%E3%82%A8%E3%83%A9%E3%83%BC%22%2C%22_request%20failed%3F%22%3A%22%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88%E3%81%AB%E5%A4%B1%E6%95%97%E3%81%97%E3%81%9F%22%2C%22_request%20succeeded%3F%22%3A%22%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88%E3%81%AB%E6%88%90%E5%8A%9F%E3%81%97%E3%81%9F%22%2C%22_response%22%3A%22%E8%BF%94%E7%AD%94%22%2C%22_send%20request%20to%20%5Burl%5D%22%3A%22%5Burl%5D%E3%81%AB%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88%E3%82%92%E9%80%81%E3%82%8B%22%2C%22_set%20request%20method%20to%20%5Bmethod%5D%22%3A%22%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88%E6%96%B9%E6%B3%95%E3%82%92%5Bmethod%5D%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_site%20responded%3F%22%3A%22%E3%82%B5%E3%82%A4%E3%83%88%E3%81%8C%E5%8F%8D%E5%BF%9C%E3%81%97%E3%81%9F%22%2C%22_status%22%3A%22%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9%22%2C%22_status%20text%22%3A%22%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%22%2C%22_when%20a%20request%20fails%22%3A%22%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88%E3%81%AB%E5%A4%B1%E6%95%97%E3%81%97%E3%81%9F%E3%81%A8%E3%81%8D%22%2C%22_when%20a%20site%20responds%22%3A%22%E3%82%B5%E3%82%A4%E3%83%88%E3%81%8C%E5%8F%8D%E5%BF%9C%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D%22%7D%2C%22ko%22%3A%7B%22_Hide%20Extra%22%3A%22%EB%82%98%EB%A8%B8%EC%A7%80%20%EC%88%A8%EA%B8%B0%EA%B8%B0%22%2C%22_Request%22%3A%22%EC%9A%94%EC%B2%AD%22%2C%22_Response%22%3A%22%EC%9D%91%EB%8B%B5%22%2C%22_Show%20Extra%22%3A%22%EB%82%98%EB%A8%B8%EC%A7%80%20%EB%B3%B4%EC%9D%B4%EA%B8%B0%22%2C%22_%5Bpath%5D%20in%20request%20options%22%3A%22%EC%9A%94%EC%B2%AD%20options%EC%9D%98%20%5Bpath%5D%22%2C%22_clear%20current%20data%22%3A%22%ED%98%84%EC%9E%AC%20%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EC%A7%80%EC%9A%B0%EA%B8%B0%22%2C%22_error%22%3A%22%EC%98%A4%EB%A5%98%22%2C%22_request%20failed%3F%22%3A%22%EC%9A%94%EC%B2%AD%EC%9D%B4%20%EC%8B%A4%ED%8C%A8%ED%96%88%EB%8A%94%EA%B0%80%3F%22%2C%22_request%20succeeded%3F%22%3A%22%EC%9A%94%EC%B2%AD%EC%9D%B4%20%EC%84%B1%EA%B3%B5%ED%96%88%EB%8A%94%EA%B0%80%3F%22%2C%22_response%22%3A%22%EC%9D%91%EB%8B%B5%22%2C%22_send%20request%20to%20%5Burl%5D%22%3A%22%5Burl%5D(%EC%9C%BC)%EB%A1%9C%20%EC%9A%94%EC%B2%AD%20%EB%B3%B4%EB%82%B4%EA%B8%B0%20%20%22%2C%22_set%20%5Bpath%5D%20to%20%5Bvalue%5D%20in%20request%20options%22%3A%22%EC%9A%94%EC%B2%AD%20options%EC%9D%98%20%5Bpath%5D%EC%9D%84(%EB%A5%BC)%20%5Bvalue%5D(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22_set%20%5Bpath%5D%20to%20type%20%5Btype%5D%20in%20request%20options%22%3A%22%EC%9A%94%EC%B2%AD%20options%EC%9D%98%20%5Bpath%5D%EC%9D%84(%EB%A5%BC)%20%5Btype%5D%ED%83%80%EC%9E%85%EC%9C%BC%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22_set%20request%20body%20to%20%5Btext%5D%22%3A%22%EC%9A%94%EC%B2%AD%20body%EB%A5%BC%20%5Btext%5D(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22_set%20request%20method%20to%20%5Bmethod%5D%22%3A%22%EC%9A%94%EC%B2%AD%20%EB%A9%94%EC%84%9C%EB%93%9C%EB%A5%BC%20%5Bmethod%5D(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22_site%20responded%3F%22%3A%22%EC%82%AC%EC%9D%B4%ED%8A%B8%EA%B0%80%20%EC%9D%91%EB%8B%B5%ED%96%88%EB%8A%94%EA%B0%80%3F%22%2C%22_status%22%3A%22%EC%83%81%ED%83%9C%22%2C%22_status%20text%22%3A%22%EC%83%81%ED%83%9C%20%EB%A9%94%EC%8B%9C%EC%A7%80%22%2C%22_type%20of%20%5Bpath%5D%20in%20request%20options%22%3A%22%EC%9A%94%EC%B2%AD%20options%EC%9D%98%20%5Bpath%5D%EC%9D%98%20%ED%83%80%EC%9E%85%22%2C%22_when%20a%20request%20fails%22%3A%22%EC%9A%94%EC%B2%AD%EC%9D%B4%20%EC%8B%A4%ED%8C%A8%ED%96%88%EC%9D%84%20%EB%95%8C%22%2C%22_when%20a%20site%20responds%22%3A%22%EC%82%AC%EC%9D%B4%ED%8A%B8%EA%B0%80%20%EC%9D%91%EB%8B%B5%ED%96%88%EC%9D%84%20%EB%95%8C%22%7D%2C%22ru%22%3A%7B%22_Hide%20Extra%22%3A%22%D0%A1%D0%BA%D1%80%D1%8B%D1%82%D1%8C%20%D0%94%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5%22%2C%22_Request%22%3A%22%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%22%2C%22_Response%22%3A%22%D0%9E%D1%82%D0%B2%D0%B5%D1%82%22%2C%22_Show%20Extra%22%3A%22%D0%9F%D0%BE%D0%BA%D0%B0%D0%B7%D0%B0%D1%82%D1%8C%20%D0%94%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5%22%2C%22_%5Bname%5D%20from%20response%20headers%22%3A%22%5Bname%5D%20%D0%B8%D0%B7%20%D0%B7%D0%B0%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D0%BA%D0%BE%D0%B2%20%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0%22%2C%22_%5Bname%5D%20in%20multipart%20form%22%3A%22%5Bname%5D%20%D0%B2%20%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%BE%D0%B9%20%D1%84%D0%BE%D1%80%D0%BC%D0%B5%22%2C%22_%5Bpath%5D%20in%20request%20options%22%3A%22%5Bpath%5D%20%D0%B2%20%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%D1%85%20%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0%22%2C%22_clear%20current%20data%22%3A%22%D0%BE%D1%82%D1%87%D0%B8%D1%81%D1%82%D0%B8%D1%82%D1%8C%20%D1%82%D0%B5%D0%BA%D1%83%D1%89%D0%B8%D0%B5%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5%22%2C%22_delete%20%5Bname%5D%20from%20multipart%20form%22%3A%22%D1%83%D0%B4%D0%B0%D0%BB%D0%B8%D1%82%D1%8C%20%5Bname%5D%20%D0%B8%D0%B7%20%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%BE%D0%B9%20%D1%84%D0%BE%D1%80%D0%BC%D1%8B%22%2C%22_error%22%3A%22%D0%BE%D1%88%D0%B8%D0%B1%D0%BA%D0%B0%22%2C%22_in%20request%20headers%20set%20%5Bname%5D%20to%20%5Bvalue%5D%22%3A%22%D0%B2%20%D0%B7%D0%B0%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D0%BA%D0%B0%D1%85%20%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0%20%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%5Bname%5D%20%D0%BD%D0%B0%20%5Bvalue%5D%22%2C%22_request%20failed%3F%22%3A%22%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%20%D0%BF%D1%80%D0%BE%D0%B2%D0%B0%D0%BB%D0%B8%D0%BB%D1%81%D1%8F%3F%22%2C%22_request%20succeeded%3F%22%3A%22%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%20%D1%83%D1%81%D0%BF%D0%B5%D1%88%D0%B5%D0%BD%3F%22%2C%22_response%22%3A%22%D0%BE%D1%82%D0%B2%D0%B5%D1%82%22%2C%22_response%20headers%20as%20json%22%3A%22%D0%B7%D0%B0%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D0%BA%D0%B8%20%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B0%20%D0%BA%D0%B0%D0%BA%20json%22%2C%22_send%20request%20to%20%5Burl%5D%22%3A%22%D0%BE%D1%82%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D1%8C%20%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%20%D0%BD%D0%B0%20%5Burl%5D%22%2C%22_set%20%5Bname%5D%20to%20%5Bvalue%5D%20in%20multipart%20form%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%5Bname%5D%20%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%20%5Bvalue%5D%20%D0%B2%20%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE%D1%87%D0%B0%D1%81%D1%82%D0%BD%D0%BE%D0%B9%20%D1%84%D0%BE%D1%80%D0%BC%D0%B5%22%2C%22_set%20%5Bpath%5D%20to%20%5Bvalue%5D%20in%20request%20options%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%5Bpath%5D%20%D0%BD%D0%B0%20%5Bvalue%5D%20%D0%B2%20%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%D1%85%20%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0%22%2C%22_set%20%5Bpath%5D%20to%20type%20%5Btype%5D%20in%20request%20options%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%5Bpath%5D%20%D0%BD%D0%B0%20%D1%82%D0%B8%D0%BF%20%5Btype%5D%20%D0%B2%20%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%D1%85%20%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0%22%2C%22_set%20request%20body%20to%20%5Btext%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%82%D0%B5%D0%BB%D0%BE%20%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0%20%D0%BD%D0%B0%20%5Btext%5D%22%2C%22_set%20request%20body%20to%20multipart%20form%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%82%D0%B5%D0%BB%D0%BE%20%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0%20%D0%BD%D0%B0%20%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE%D1%87%D0%B0%D1%81%D1%82%D0%BD%D1%83%D1%8E%20%D1%84%D0%BE%D1%80%D0%BC%D1%83%22%2C%22_set%20request%20content%20type%20to%20%5Btype%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%82%D0%B8%D0%BF%20%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%BD%D1%82%D0%B0%20%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0%20%D0%BD%D0%B0%20%5Btype%5D%22%2C%22_set%20request%20headers%20to%20json%20%5Bjson%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D0%B7%D0%B0%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D0%BA%D0%B8%20%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0%20%D0%B2%20json%20%5Bjson%5D%22%2C%22_set%20request%20method%20to%20%5Bmethod%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D0%BC%D0%B5%D1%82%D0%BE%D0%B4%20%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0%20%D0%BD%D0%B0%20%5Bmethod%5D%22%2C%22_site%20responded%3F%22%3A%22%D1%81%D0%B0%D0%B9%D1%82%20%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%B8%D0%BB%3F%22%2C%22_status%22%3A%22%D1%81%D1%82%D0%B0%D1%82%D1%83%D1%81%22%2C%22_status%20text%22%3A%22%D1%82%D0%B5%D0%BA%D1%81%D1%82%20%D1%81%D1%82%D0%B0%D1%82%D1%83%D1%81%D0%B0%22%2C%22_type%20of%20%5Bpath%5D%20in%20request%20options%22%3A%22%D1%82%D0%B8%D0%BF%20%5Bpath%5D%20%D0%B2%20%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%D1%85%20%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0%22%2C%22_when%20a%20request%20fails%22%3A%22%D0%BA%D0%BE%D0%B3%D0%B4%D0%B0%20%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%20%D0%B7%D0%B0%D0%B2%D0%B0%D0%BB%D0%B8%D0%BB%D1%81%D1%8F%22%2C%22_when%20a%20site%20responds%22%3A%22%D0%BA%D0%BE%D0%B3%D0%B4%D0%B0%20%D1%81%D0%B0%D0%B9%D1%82%20%D0%BE%D1%82%D0%B2%D0%B5%D1%87%D0%B0%D0%B5%D1%82%22%7D%2C%22zh-cn%22%3A%7B%22_Hide%20Extra%22%3A%22%E9%9A%90%E8%97%8F%E6%9B%B4%E5%A4%9A%22%2C%22_Request%22%3A%22%E8%AF%B7%E6%B1%82%22%2C%22_Response%22%3A%22%E5%93%8D%E5%BA%94%22%2C%22_Show%20Extra%22%3A%22%E6%98%BE%E7%A4%BA%E6%9B%B4%E5%A4%9A%22%2C%22_%5Bname%5D%20from%20response%20headers%22%3A%22%E5%93%8D%E5%BA%94%E5%A4%B4%E4%B8%AD%E7%9A%84%5Bname%5D%22%2C%22_%5Bname%5D%20in%20multipart%20form%22%3A%22%E5%A4%9A%E9%83%A8%E5%88%86%E8%A1%A8%E5%8D%95%E4%B8%AD%E7%9A%84%5Bname%5D%22%2C%22_%5Bpath%5D%20in%20request%20options%22%3A%22%E8%AF%B7%E6%B1%82%E9%80%89%E9%A1%B9%E4%B8%AD%E7%9A%84%5Bpath%5D%22%2C%22_clear%20current%20data%22%3A%22%E6%B8%85%E7%A9%BA%E5%BD%93%E5%89%8D%E6%95%B0%E6%8D%AE%22%2C%22_delete%20%5Bname%5D%20from%20multipart%20form%22%3A%22%E5%88%A0%E9%99%A4%E5%A4%9A%E9%83%A8%E5%88%86%E8%A1%A8%E5%8D%95%E4%B8%AD%E7%9A%84%5Bname%5D%22%2C%22_error%22%3A%22%E9%94%99%E8%AF%AF%22%2C%22_in%20request%20headers%20set%20%5Bname%5D%20to%20%5Bvalue%5D%22%3A%22%E5%B0%86%E8%AF%B7%E6%B1%82%E5%A4%B4%E4%B8%AD%E7%9A%84%5Bname%5D%E8%AE%BE%E4%B8%BA%5Bvalue%5D%22%2C%22_request%20failed%3F%22%3A%22%E8%AF%B7%E6%B1%82%E5%A4%B1%E8%B4%A5%EF%BC%9F%22%2C%22_request%20succeeded%3F%22%3A%22%E8%AF%B7%E6%B1%82%E6%88%90%E5%8A%9F%EF%BC%9F%22%2C%22_response%22%3A%22%E5%93%8D%E5%BA%94%22%2C%22_response%20headers%20as%20json%22%3A%22%E5%93%8D%E5%BA%94%E5%A4%B4JSON%22%2C%22_send%20request%20to%20%5Burl%5D%22%3A%22%E5%90%91%5Burl%5D%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82%22%2C%22_set%20%5Bname%5D%20to%20%5Bvalue%5D%20in%20multipart%20form%22%3A%22%E5%B0%86%E5%A4%9A%E9%83%A8%E5%88%86%E8%A1%A8%E5%8D%95%E4%B8%AD%E7%9A%84%5Bname%5D%E8%AE%BE%E4%B8%BA%5Bvalue%5D%22%2C%22_set%20%5Bpath%5D%20to%20%5Bvalue%5D%20in%20request%20options%22%3A%22%E5%B0%86%E8%AF%B7%E6%B1%82%E9%80%89%E9%A1%B9%E4%B8%AD%E7%9A%84%5Bpath%5D%E8%AE%BE%E4%B8%BA%5Bvalue%5D%22%2C%22_set%20%5Bpath%5D%20to%20type%20%5Btype%5D%20in%20request%20options%22%3A%22%E5%B0%86%E8%AF%B7%E6%B1%82%E9%80%89%E9%A1%B9%E4%B8%AD%5Bpath%5D%E7%9A%84%E7%B1%BB%E5%9E%8B%E8%AE%BE%E4%B8%BA%5Btype%5D%22%2C%22_set%20request%20body%20to%20%5Btext%5D%22%3A%22%E5%B0%86%E8%AF%B7%E6%B1%82%E4%BD%93%E8%AE%BE%E4%B8%BA%5Btext%5D%22%2C%22_set%20request%20body%20to%20multipart%20form%22%3A%22%E5%B0%86%E8%AF%B7%E6%B1%82%E4%BD%93%E8%AE%BE%E4%B8%BA%E5%A4%9A%E9%83%A8%E5%88%86%E8%A1%A8%E5%8D%95%22%2C%22_set%20request%20content%20type%20to%20%5Btype%5D%22%3A%22%E5%B0%86%E8%AF%B7%E6%B1%82%E5%86%85%E5%AE%B9%E7%B1%BB%E5%9E%8B%E8%AE%BE%E4%B8%BA%5Btype%5D%22%2C%22_set%20request%20headers%20to%20json%20%5Bjson%5D%22%3A%22%E5%B0%86%E8%AF%B7%E6%B1%82%E5%A4%B4%E8%AE%BE%E4%B8%BAJSON%5Bjson%5D%22%2C%22_set%20request%20method%20to%20%5Bmethod%5D%22%3A%22%E5%B0%86%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95%E8%AE%BE%E4%B8%BA%5Bmethod%5D%22%2C%22_site%20responded%3F%22%3A%22%E7%BD%91%E7%AB%99%E5%93%8D%E5%BA%94%EF%BC%9F%22%2C%22_status%22%3A%22%E7%8A%B6%E6%80%81%E7%A0%81%22%2C%22_status%20text%22%3A%22%E7%8A%B6%E6%80%81%E6%96%87%E6%9C%AC%22%2C%22_type%20of%20%5Bpath%5D%20in%20request%20options%22%3A%22%E8%AF%B7%E6%B1%82%E9%80%89%E9%A1%B9%E4%B8%AD%5Bpath%5D%E7%9A%84%E7%B1%BB%E5%9E%8B%22%2C%22_when%20a%20request%20fails%22%3A%22%E5%BD%93%E6%9C%89%E8%AF%B7%E6%B1%82%E5%A4%B1%E8%B4%A5%22%2C%22_when%20a%20site%20responds%22%3A%22%E5%BD%93%E6%9C%89%E7%BD%91%E7%AB%99%E5%93%8D%E5%BA%94%22%7D%7D)%3B%2F*%20end%20generated%20l10n%20code%20*%2F(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%20%20if%20(!Scratch.extensions.unsandboxed)%0A%20%20%20%20throw%20new%20Error(%22can%20not%20load%20out%20side%20unsandboxed%20mode%22)%3B%0A%0A%20%20const%20setType%20%3D%20(value%2C%20type)%20%3D%3E%20%7B%0A%20%20%20%20switch%20(type)%20%7B%0A%20%20%20%20%20%20case%20%22string%22%3A%0A%20%20%20%20%20%20%20%20switch%20(typeof%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%20%22string%22%3A%0A%20%20%20%20%20%20%20%20%20%20case%20%22boolean%22%3A%0A%20%20%20%20%20%20%20%20%20%20case%20%22number%22%3A%0A%20%20%20%20%20%20%20%20%20%20case%20%22function%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20String(value)%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22object%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20JSON.stringify(value)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%22%7B%7D%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%20%22number%22%3A%0A%20%20%20%20%20%20%20%20switch%20(typeof%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%20%22string%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20String(value)%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22boolean%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20Boolean(value)%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22number%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22function%22%3A%0A%20%20%20%20%20%20%20%20%20%20case%20%22object%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20NaN%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%20%22boolean%22%3A%0A%20%20%20%20%20%20%20%20switch%20(typeof%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%20%22string%22%3A%0A%20%20%20%20%20%20%20%20%20%20case%20%22boolean%22%3A%0A%20%20%20%20%20%20%20%20%20%20case%20%22function%22%3A%0A%20%20%20%20%20%20%20%20%20%20case%20%22number%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20Boolean(value)%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22object%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%20%22object%22%3A%0A%20%20%20%20%20%20%20%20switch%20(typeof%20value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%20%22string%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20parsed%20%3D%20JSON.parse(value)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20parsed%20%3D%3D%3D%20%22object%22)%20return%20parsed%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20catch%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20case%20%22boolean%22%3A%0A%20%20%20%20%20%20%20%20%20%20case%20%22function%22%3A%0A%20%20%20%20%20%20%20%20%20%20case%20%22number%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20case%20%22object%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20value%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20const%20parseType%20%3D%20(text)%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20this%20isnt%20text%20and%20we%20just%20pass%20it%20down%20as%20what%20ever%20it%20is%0A%20%20%20%20if%20(typeof%20text%20!%3D%3D%20%22string%22)%20return%20text%3B%0A%20%20%20%20if%20(!isNaN(Number(text)))%20%7B%0A%20%20%20%20%20%20return%20Number(text)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20const%20parsed%20%3D%20JSON.parse(text)%3B%0A%20%20%20%20%20%20%20%20if%20(typeof%20parsed%20%3D%3D%3D%20%22object%22)%20return%20parsed%3B%0A%20%20%20%20%20%20%20%20if%20(typeof%20parsed%20%3D%3D%3D%20%22boolean%22)%20return%20parsed%3B%0A%20%20%20%20%20%20%20%20return%20text%3B%0A%20%20%20%20%20%20%7D%20catch%20%7B%0A%20%20%20%20%20%20%20%20return%20text%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20const%20getPathArray%20%3D%20(path)%20%3D%3E%20%7B%0A%20%20%20%20const%20names%20%3D%20path.split(%22.%22)%3B%0A%20%20%20%20for%20(let%20index%20%3D%200%3B%20index%20%3C%20names.length%3B%20index%2B%2B)%20%7B%0A%20%20%20%20%20%20let%20name%20%3D%20names%5Bindex%5D%3B%0A%20%20%20%20%20%20name%20%3D%20name.replaceAll(%2F(%3F%3C!%5C%5C)%26dot%2Fg%2C%20%22.%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20names%3B%0A%20%20%7D%3B%0A%20%20const%20getValueAtPath%20%3D%20(object%2C%20path)%20%3D%3E%20%7B%0A%20%20%20%20for%20(const%20name%20of%20path)%20%7B%0A%20%20%20%20%20%20object%20%3D%20object%3F.%5Bname%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20setType(object%2C%20%22string%22)%3B%0A%20%20%7D%3B%0A%20%20const%20setValueAtPath%20%3D%20(object%2C%20path%2C%20value)%20%3D%3E%20%7B%0A%20%20%20%20for%20(const%20name%20of%20path.slice(0%2C%20-1))%20%7B%0A%20%20%20%20%20%20object%20%3D%20object%5Bname%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20object%5Bpath.at(-1)%5D%20%3D%20value%3B%0A%20%20%7D%3B%0A%0A%20%20const%20%7B%20vm%20%7D%20%3D%20Scratch%3B%0A%20%20const%20%7B%20runtime%20%7D%20%3D%20vm%3B%0A%0A%20%20const%20extensionId%20%3D%20%22gsaHTTPRequests%22%3B%0A%0A%20%20%2F%2F%20the%20funny%20class%20to%20make%20event%20blocks%20look%20better%0A%20%20class%20Events%20%7B%0A%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20this.events%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20this.blocks%20%3D%20%7B%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20adds%20a%20event%20name%20listner%20for%20a%20block%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20name%20name%20of%20the%20event%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20%5Bblock%5D%20a%20block%20to%20run%20when%20trigered%0A%20%20%20%20%20*%2F%0A%20%20%20%20add(name%2C%20block)%20%7B%0A%20%20%20%20%20%20if%20(block)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!this.blocks%5Bname%5D)%20this.blocks%5Bname%5D%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20this.blocks%5Bname%5D.push(block)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20activate%20an%20event%0A%20%20%20%20%20*%20%40param%20%7Bstring%7D%20name%20name%20of%20the%20event%0A%20%20%20%20%20*%2F%0A%20%20%20%20activate(name)%20%7B%0A%20%20%20%20%20%20this.events%5Bname%5D%20%3D%20true%3B%0A%20%20%20%20%20%20if%20(this.blocks%5Bname%5D)%20%7B%0A%20%20%20%20%20%20%20%20for%20(const%20block%20of%20this.blocks%5Bname%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20runtime.startHats(block)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20const%20createBlockId%20%3D%20(block)%20%3D%3E%20%60%24%7BextensionId%7D_%24%7Bblock%7D%60%3B%0A%0A%20%20%2F*%20-------%20BLOCKS%20--------%20*%2F%0A%20%20const%20%7B%20BlockType%2C%20Cast%2C%20ArgumentType%20%7D%20%3D%20Scratch%3B%0A%0A%20%20class%20WebRequests%20%7B%0A%20%20%20%20static%20get%20defaultRequest()%20%7B%0A%20%20%20%20%20%20const%20defaultRequest%20%3D%20%7B%0A%20%20%20%20%20%20%20%20events%3A%20new%20Events()%2C%0A%20%20%20%20%20%20%20%20get%20mimeType()%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this.options.headers%5B%22Content-Type%22%5D%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%20mimeType(value)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20this.options.headers%5B%22Content-Type%22%5D%20%3D%3D%3D%20%22multipart%2Fform-data%22%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20value%20!%3D%3D%20%22multipart%2Fform-data%22%0A%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.options.body%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20this.options.headers%5B%22Content-Type%22%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%20method(val)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.options.method%20%3D%20val%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20remove%20body%20on%20get%20requests%0A%20%20%20%20%20%20%20%20%20%20if%20(val%20%3D%3D%3D%20%22GET%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20delete%20this.options.body%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20get%20method()%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this.options.method%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20options%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20headers%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Content-Type%22%3A%20%22text%2Fplain%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20method%3A%20%22GET%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20set%20body(val)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.method%20%3D%3D%3D%20%22GET%22)%20return%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20val%20instanceof%20FormData%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20!(this.options.body%20instanceof%20FormData)%0A%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.options.body%20%3D%20val%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.options.headers%5B%22Content-Type%22%5D%20%3D%20%22multipart%2Fform-data%22%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20!(val%20instanceof%20FormData)%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20this.options.body%20instanceof%20FormData%0A%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.options.body%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.options.headers%5B%22Content-Type%22%5D%20%3D%20%22text%2Fplain%22%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20this.options.body%20%3D%20val%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20get%20body()%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this.options.body%3B%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20end%3A%20false%2C%0A%20%20%20%20%20%20%20%20fail%3A%20false%2C%0A%20%20%20%20%20%20%20%20success%3A%20false%2C%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20defaultRequest.events.add(%22reqSuccess%22%2C%20createBlockId(%22onResponse%22))%3B%0A%20%20%20%20%20%20defaultRequest.events.add(%22reqFail%22%2C%20createBlockId(%22onFail%22))%3B%0A%0A%20%20%20%20%20%20return%20defaultRequest%3B%0A%20%20%20%20%7D%0A%20%20%20%20static%20get%20defaultResponse()%20%7B%0A%20%20%20%20%20%20const%20defaultResponse%20%3D%20%7B%0A%20%20%20%20%20%20%20%20text%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20status%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20statusText%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20headers%3A%20new%20Headers()%2C%0A%20%20%20%20%20%20%20%20error%3A%20%22%22%2C%0A%20%20%20%20%20%20%20%20url%3A%20%22%22%2C%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20return%20defaultResponse%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20no%20need%20to%20install%20runtime%20as%20it%20comes%20with%20Scratch%20var%0A%20%20%20%20%20*%2F%0A%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20this.clearAll()%3B%0A%20%20%20%20%20%20this.showingExtra%20%3D%20false%3B%0A%0A%20%20%20%20%20%20Scratch.vm.runtime.on(%22RUNTIME_DISPOSED%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.clearAll()%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20extensionId%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20eslint-disable-next-line%20extension%2Fshould-translate%0A%20%20%20%20%20%20%20%20name%3A%20%22HTTP%22%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%23307eff%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%232c5eb0%22%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22clearAll%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22clear%20current%20data%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22Response%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22resData%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22response%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22error%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22error%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22status%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22status%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22statusText%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22status%20text%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getHeaderJSON%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22response%20headers%20as%20json%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getHeaderValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22name%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5Bname%5D%20from%20response%20headers%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22requestComplete%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22site%20responded%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22requestFail%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22request%20failed%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22requestSuccess%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22request%20succeeded%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22onResponse%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.EVENT%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22when%20a%20site%20responds%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22onFail%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.EVENT%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22when%20a%20request%20fails%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22Request%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setMimeType%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22mimeType%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20this.request.mimeType%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20request%20content%20type%20to%20%5Btype%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setRequestmethod%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20method%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22method%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20this.request.method%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20request%20method%20to%20%5Bmethod%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setHeaderData%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22Content-Type%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20this.request.mimeType%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22in%20request%20headers%20set%20%5Bname%5D%20to%20%5Bvalue%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setHeaderJSON%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20json%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%60%7B%22Content-Type%22%3A%20%22%24%7Bthis.request.mimeType%7D%22%7D%60%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20request%20headers%20to%20json%20%5Bjson%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setBody%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22Apple!%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20request%20body%20to%20%5Btext%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setBodyToForm%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20request%20body%20to%20multipart%20form%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getFormProperty%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22name%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5Bname%5D%20in%20multipart%20form%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setFormProperty%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22name%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22value%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20%5Bname%5D%20to%20%5Bvalue%5D%20in%20multipart%20form%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22deleteFormProperty%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22name%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22delete%20%5Bname%5D%20from%20multipart%20form%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22sendRequest%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20url%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22https%3A%2F%2Fextensions.turbowarp.org%2Fhello.txt%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22send%20request%20to%20%5Burl%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22showExtra%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.BUTTON%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22Show%20Extra%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20this.showingExtra%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22hideExtra%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.BUTTON%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22Hide%20Extra%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!this.showingExtra%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setUnkownProperty%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20path%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22path.to.item%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22data%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20%5Bpath%5D%20to%20%5Bvalue%5D%20in%20request%20options%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!this.showingExtra%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setUnkownPropertyType%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20path%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22path.to.item%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22jsTypes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22set%20%5Bpath%5D%20to%20type%20%5Btype%5D%20in%20request%20options%22%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!this.showingExtra%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getUnkownProperty%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20path%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22path.to.item%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5Bpath%5D%20in%20request%20options%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!this.showingExtra%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getUnkownPropertyType%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20path%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22path.to.item%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22type%20of%20%5Bpath%5D%20in%20request%20options%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!this.showingExtra%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20jsTypes%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22string%22%2C%20%22number%22%2C%20%22boolean%22%2C%20%22object%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20method%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22GET%22%2C%20%22POST%22%2C%20%22PUT%22%2C%20%22PATCH%22%2C%20%22DELETE%22%2C%20%22HEAD%22%2C%20%22OPTIONS%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20mimeType%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22application%2Fjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22application%2Fx-www-form-urlencoded%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22application%2Fjavascript%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22application%2Fogg%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22application%2Fpdf%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22application%2Fld%2Bjson%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22application%2Fxml%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22application%2Fzip%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22audio%2Fmpeg%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22image%2Fgif%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22image%2Fjpeg%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22image%2Fpng%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22image%2Ftiff%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22image%2Fx-icon%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22image%2Fsvg%2Bxml%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22text%2Fcss%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22text%2Fcsv%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22text%2Fhtml%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22text%2Fplain%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22text%2Fxml%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22video%2Fmpeg%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22video%2Fmp4%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22video%2Fx-ms-wmv%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22video%2Fx-msvideo%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22video%2Fx-flv%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22video%2Fwebm%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F*%20------%20RESETING%20-------%20*%2F%0A%0A%20%20%20%20clearAll()%20%7B%0A%20%20%20%20%20%20this.request%20%3D%20WebRequests.defaultRequest%3B%0A%20%20%20%20%20%20this.response%20%3D%20WebRequests.defaultResponse%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F*%20-------%20DATA%20READING%20--------%20*%2F%0A%0A%20%20%20%20resData()%20%7B%0A%20%20%20%20%20%20return%20this.response.text%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20error()%20%7B%0A%20%20%20%20%20%20return%20this.response.error%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20status()%20%7B%0A%20%20%20%20%20%20return%20this.response.status%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20requestComplete()%20%7B%0A%20%20%20%20%20%20return%20this.request.end%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20requestFail()%20%7B%0A%20%20%20%20%20%20return%20this.request.fail%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20requestSuccess()%20%7B%0A%20%20%20%20%20%20return%20this.request.success%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20statusText()%20%7B%0A%20%20%20%20%20%20return%20this.response.statusText%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getHeaderValue(args)%20%7B%0A%20%20%20%20%20%20const%20name%20%3D%20Cast.toString(args.name)%3B%0A%20%20%20%20%20%20return%20this.response.get(name)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getHeaderJSON()%20%7B%0A%20%20%20%20%20%20const%20object%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20for%20(const%20entry%20of%20this.response.headers.entries())%20%7B%0A%20%20%20%20%20%20%20%20object%5Bentry%5B0%5D%5D%20%3D%20entry%5B1%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20JSON.stringify(object)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F*%20--------%20CONTROL%20---------%20*%2F%0A%0A%20%20%20%20setMimeType(args)%20%7B%0A%20%20%20%20%20%20const%20type%20%3D%20Cast.toString(args.type)%3B%0A%20%20%20%20%20%20this.request.mimeType%20%3D%20type%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setRequestmethod(args)%20%7B%0A%20%20%20%20%20%20const%20method%20%3D%20Cast.toString(args.method)%3B%0A%20%20%20%20%20%20this.request.method%20%3D%20method%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setHeaderData(args)%20%7B%0A%20%20%20%20%20%20const%20key%20%3D%20Cast.toString(args.name)%3B%0A%20%20%20%20%20%20const%20value%20%3D%20Cast.toString(args.value)%3B%0A%20%20%20%20%20%20this.request.options.headers%5Bkey%5D%20%3D%20value%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setHeaderJSON(args)%20%7B%0A%20%20%20%20%20%20const%20json%20%3D%20Cast.toString(args.json)%3B%0A%20%20%20%20%20%20let%20object%3B%0A%20%20%20%20%20%20%2F%2F%20ignore%20invalid%20data%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20object%20%3D%20JSON.parse(json)%3B%0A%20%20%20%20%20%20%7D%20catch%20%7B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(typeof%20object%20!%3D%3D%20%22object%22)%20return%3B%0A%20%20%20%20%20%20this.request.options.headers%20%3D%20object%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setBody(args)%20%7B%0A%20%20%20%20%20%20const%20body%20%3D%20Cast.toString(args.text)%3B%0A%20%20%20%20%20%20this.request.body%20%3D%20body%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setBodyToForm()%20%7B%0A%20%20%20%20%20%20this.request.body%20%3D%20new%20FormData()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getFormProperty(args)%20%7B%0A%20%20%20%20%20%20if%20(!(this.request.options.body%20instanceof%20FormData))%20return%3B%0A%20%20%20%20%20%20const%20name%20%3D%20Cast.toString(args.name)%3B%0A%20%20%20%20%20%20return%20this.request.body.get(name)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setFormProperty(args)%20%7B%0A%20%20%20%20%20%20if%20(!(this.request.options.body%20instanceof%20FormData))%20return%3B%0A%20%20%20%20%20%20const%20name%20%3D%20Cast.toString(args.name)%3B%0A%20%20%20%20%20%20const%20value%20%3D%20Cast.toString(args.value)%3B%0A%20%20%20%20%20%20this.request.body.set(name%2C%20value)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20deleteFormProperty(args)%20%7B%0A%20%20%20%20%20%20if%20(!(this.request.options.body%20instanceof%20FormData))%20return%3B%0A%20%20%20%20%20%20const%20name%20%3D%20Cast.toString(args.name)%3B%0A%20%20%20%20%20%20this.request.body.delete(name)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20sendRequest(args)%20%7B%0A%20%20%20%20%20%20const%20url%20%3D%20Cast.toString(args.url)%3B%0A%20%20%20%20%20%20const%20options%20%3D%20this.request.options%3B%0A%0A%20%20%20%20%20%20this.clearAll()%3B%0A%0A%20%20%20%20%20%20this.response.url%20%3D%20url%3B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20const%20res%20%3D%20await%20Scratch.fetch(url%2C%20options)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20%40ts-ignore%0A%20%20%20%20%20%20%20%20this.response.status%20%3D%20res.status%3B%0A%20%20%20%20%20%20%20%20this.response.headers%20%3D%20res.headers%3B%0A%20%20%20%20%20%20%20%20this.response.statusText%20%3D%20res.statusText%3B%0A%20%20%20%20%20%20%20%20if%20(res.ok)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.request.success%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20this.request.events.activate(%22reqSuccess%22)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.request.fail%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20this.request.events.activate(%22reqFail%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.request.end%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20if%20(res.headers.get(%22Content-Type%22)%20%3D%3D%3D%20%22multipart%2Fform-data%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20form%20%3D%20await%20res.formData()%3B%0A%20%20%20%20%20%20%20%20%20%20const%20json%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(const%20%5Bkey%2C%20value%5D%20of%20form.entries())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20json%5Bkey%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20this.response.text%20%3D%20JSON.stringify(json)%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20body%20%3D%20await%20res.text()%3B%0A%20%20%20%20%20%20%20%20this.response.text%20%3D%20body%3B%0A%20%20%20%20%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20%20%20%20%20this.response.error%20%3D%20String(err)%3B%0A%20%20%20%20%20%20%20%20console.warn(%22request%20failed%20with%20error%22%2C%20err)%3B%0A%20%20%20%20%20%20%20%20this.request.fail%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.request.end%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.request.events.activate(%22reqFail%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F*%20extra%20stuff%20for%20when%20its%20missing%20something%20*%2F%0A%0A%20%20%20%20showExtra()%20%7B%0A%20%20%20%20%20%20this.showingExtra%20%3D%20true%3B%0A%20%20%20%20%20%20vm.extensionManager.refreshBlocks()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20hideExtra()%20%7B%0A%20%20%20%20%20%20this.showingExtra%20%3D%20false%3B%0A%20%20%20%20%20%20vm.extensionManager.refreshBlocks()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setUnkownProperty(args)%20%7B%0A%20%20%20%20%20%20const%20name%20%3D%20Cast.toString(args.path)%3B%0A%20%20%20%20%20%20const%20text%20%3D%20Cast.toString(args.value)%3B%0A%0A%20%20%20%20%20%20const%20path%20%3D%20getPathArray(name)%3B%0A%20%20%20%20%20%20const%20value%20%3D%20parseType(text)%3B%0A%20%20%20%20%20%20setValueAtPath(this.request.options%2C%20path%2C%20value)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setUnkownPropertyType(args)%20%7B%0A%20%20%20%20%20%20const%20name%20%3D%20Cast.toString(args.path)%3B%0A%20%20%20%20%20%20const%20type%20%3D%20Cast.toString(args.type)%3B%0A%20%20%20%20%20%20const%20path%20%3D%20getPathArray(name)%3B%0A%0A%20%20%20%20%20%20const%20oldValue%20%3D%20getValueAtPath(this.request.options%2C%20path)%3B%0A%20%20%20%20%20%20const%20newValue%20%3D%20setType(oldValue%2C%20type)%3B%0A%20%20%20%20%20%20setValueAtPath(this.request.options%2C%20path%2C%20newValue)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getUnkownProperty(args)%20%7B%0A%20%20%20%20%20%20const%20name%20%3D%20Cast.toString(args.path)%3B%0A%20%20%20%20%20%20const%20path%20%3D%20getPathArray(name)%3B%0A%0A%20%20%20%20%20%20return%20getValueAtPath(this.request.options%2C%20path)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getUnkownPropertyType(args)%20%7B%0A%20%20%20%20%20%20const%20name%20%3D%20Cast.toString(args.path)%3B%0A%20%20%20%20%20%20const%20path%20%3D%20getPathArray(name)%3B%0A%20%20%20%20%20%20const%20value%20%3D%20getValueAtPath(this.request.options%2C%20path)%3B%0A%0A%20%20%20%20%20%20return%20typeof%20value%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20const%20instance%20%3D%20new%20WebRequests()%3B%0A%20%20%2F%2F%20%40ts-ignore%0A%20%20Scratch.extensions.register(instance)%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20More%20Events%0D%0A%2F%2F%20ID%3A%20lmsMoreEvents%0D%0A%2F%2F%20Description%3A%20Start%20your%20scripts%20in%20new%20ways.%0D%0A%2F%2F%20By%3A%20LilyMakesThings%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FLilyMakesThings%2F%3E%0D%0A%2F%2F%20License%3A%20MIT%20AND%20LGPL-3.0%0D%0A%0D%0A%2F*%20generated%20l10n%20code%20*%2FScratch.translate.setup(%7B%22de%22%3A%7B%22_More%20Events%22%3A%22Mehr%20Ereignisse%22%7D%2C%22fi%22%3A%7B%22_More%20Events%22%3A%22Enemm%C3%A4n%20tapahtumia%22%2C%22_after%20project%20saves%22%3A%22projektin%20tallentamisen%20j%C3%A4lkeen%22%2C%22_before%20project%20saves%22%3A%22ennen%20projektin%20tallentamista%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%22%3A%22l%C3%A4het%C3%A4%20%5BBROADCAST_OPTION%5D%20hahmolle%20%5BTARGET%5D%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20and%20wait%22%3A%22l%C3%A4het%C3%A4%20%5BBROADCAST_OPTION%5D%20hahmolle%20%5BTARGET%5D%20ja%20odota%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20with%20data%20%5BDATA%5D%22%3A%22l%C3%A4het%C3%A4%20%5BBROADCAST_OPTION%5D%20hahmolle%20%5BTARGET%5D%20tiedolla%20%5BDATA%5D%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20with%20data%20%5BDATA%5D%20and%20wait%22%3A%22l%C3%A4het%C3%A4%20%5BBROADCAST_OPTION%5D%20hahmolle%20%5BTARGET%5D%20tiedolla%20%5BDATA%5D%20ja%20odota%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20with%20data%20%5BDATA%5D%22%3A%22l%C3%A4het%C3%A4%20%5BBROADCAST_OPTION%5D%20tiedolla%20%5BDATA%5D%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20with%20data%20%5BDATA%5D%20and%20wait%22%3A%22l%C3%A4het%C3%A4%20%5BBROADCAST_OPTION%5D%20tiedolla%20%5BDATA%5D%20ja%20odota%22%2C%22_every%20%5BDURATION%5D%20frames%22%3A%22%5BDURATION%5D%20ruudun%20v%C3%A4lein%22%2C%22_false%22%3A%22ep%C3%A4tosi%22%2C%22_forever%22%3A%22ikuisesti%22%2C%22_hit%22%3A%22painetaan%20pohjaan%22%2C%22_received%20data%22%3A%22vastaanotettu%20tieto%22%2C%22_released%22%3A%22p%C3%A4%C3%A4stet%C3%A4%C3%A4n%20pohjasta%22%2C%22_true%22%3A%22tosi%22%2C%22_when%20%5BCONDITION%5D%20becomes%20%5BSTATE%5D%22%3A%22kun%20ehto%20%5BCONDITION%5D%20on%20%5BSTATE%5D%22%2C%22_when%20%5BINPUT%5D%20is%20changed%22%3A%22kun%20%5BINPUT%5D%20muuttuu%22%2C%22_when%20%5BKEY_OPTION%5D%20key%20%5BACTION%5D%22%3A%22kun%20%5BKEY_OPTION%5D%20%5BACTION%5D%22%2C%22_when%20%5BSTOP%5D%20clicked%22%3A%22kun%20klikataan%20%5BSTOP%5D%22%2C%22_while%20%5BCONDITION%5D%20is%20%5BSTATE%5D%22%3A%22sill%C3%A4%20aikaa%20kun%20ehto%20%5BCONDITION%5D%20on%20%5BSTATE%5D%22%2C%22_while%20%5BKEY_OPTION%5D%20key%20pressed%22%3A%22sill%C3%A4%20aikaa%20kun%20n%C3%A4pp%C3%A4int%C3%A4%20%5BKEY_OPTION%5D%20painetaan%22%7D%2C%22it%22%3A%7B%22_More%20Events%22%3A%22Altri%20Eventi%22%2C%22_after%20project%20saves%22%3A%22dopo%20il%20salvataggio%20del%20progetto%22%2C%22_before%20project%20saves%22%3A%22prima%20del%20salvataggio%20del%20progetto%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%22%3A%22invia%20%5BBROADCAST_OPTION%5D%20a%20%5BTARGET%5D%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20and%20wait%22%3A%22invia%20%5BBROADCAST_OPTION%5D%20a%20%5BTARGET%5D%20e%20attendi%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20with%20data%20%5BDATA%5D%22%3A%22invia%20%5BBROADCAST_OPTION%5D%20a%20%5BTARGET%5D%20con%20dati%5BDATA%5D%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20with%20data%20%5BDATA%5D%20and%20wait%22%3A%22invia%20%5BBROADCAST_OPTION%5D%20a%20%5BTARGET%5D%20con%20dati%20%5BDATA%5D%20e%20attendi%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20with%20data%20%5BDATA%5D%22%3A%22invia%20%5BBROADCAST_OPTION%5D%20con%20dati%20%5BDATA%5D%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20with%20data%20%5BDATA%5D%20and%20wait%22%3A%22invia%20%5BBROADCAST_OPTION%5D%20con%20date%20%5BDATA%5D%20e%20attendi%22%2C%22_every%20%5BDURATION%5D%20frames%22%3A%22ogni%20%5BDURATION%5D%20frame%22%2C%22_false%22%3A%22falso%22%2C%22_forever%22%3A%22per%20sempre%22%2C%22_hit%22%3A%22premuto%22%2C%22_received%20data%22%3A%22dati%20ricevuti%22%2C%22_released%22%3A%22rilasciato%22%2C%22_true%22%3A%22vero%22%2C%22_when%20%5BCONDITION%5D%20becomes%20%5BSTATE%5D%22%3A%22quando%20%5BCONDITION%5D%20diventa%20%5BSTATE%5D%22%2C%22_when%20%5BINPUT%5D%20is%20changed%22%3A%22quando%20%5BINPUT%5D%20cambia%20valore%22%2C%22_when%20%5BKEY_OPTION%5D%20key%20%5BACTION%5D%22%3A%22quando%20tasto%20%5BKEY_OPTION%5D%20viene%20%5BACTION%5D%22%2C%22_when%20%5BSTOP%5D%20clicked%22%3A%22quando%20si%20clicca%20%5BSTOP%5D%20%22%2C%22_while%20%5BCONDITION%5D%20is%20%5BSTATE%5D%22%3A%22mentre%20%5BCONDITION%5D%20%C3%A8%20%5BSTATE%5D%22%2C%22_while%20%5BKEY_OPTION%5D%20key%20pressed%22%3A%22mentre%20tasto%20%5BKEY_OPTION%5D%20premuto%22%7D%2C%22ja%22%3A%7B%22_More%20Events%22%3A%22%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%22%2C%22_after%20project%20saves%22%3A%22%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%8C%E4%BF%9D%E5%AD%98%E3%81%95%E3%82%8C%E3%81%9F%E3%81%82%E3%81%A8%22%2C%22_before%20project%20saves%22%3A%22%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%8C%E4%BF%9D%E5%AD%98%E3%81%95%E3%82%8C%E3%82%8B%E5%89%8D%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%22%3A%22%5BTARGET%5D%E3%81%AB%5BBROADCAST_OPTION%5D%E3%82%92%E9%80%81%E3%82%8B%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20and%20wait%22%3A%22%5BTARGET%5D%E3%81%AB%5BBROADCAST_OPTION%5D%E3%82%92%E9%80%81%E3%81%A3%E3%81%A6%E5%BE%85%E3%81%A4%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20with%20data%20%5BDATA%5D%22%3A%22%5BBROADCAST_OPTION%5D%E3%82%92%5BTARGET%5D%E3%81%AB%E3%83%87%E3%83%BC%E3%82%BF%5BDATA%5D%E4%BB%98%E3%81%8D%E3%81%A7%E9%80%81%E3%82%8B%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20with%20data%20%5BDATA%5D%20and%20wait%22%3A%22%5BBROADCAST_OPTION%5D%E3%82%92%5BTARGET%5D%E3%81%AB%E3%83%87%E3%83%BC%E3%82%BF%5BDATA%5D%E4%BB%98%E3%81%8D%E3%81%A7%E9%80%81%E3%81%A3%E3%81%A6%E5%BE%85%E3%81%A4%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20with%20data%20%5BDATA%5D%22%3A%22%5BBROADCAST_OPTION%5D%E3%82%92%E3%83%87%E3%83%BC%E3%82%BF%5BDATA%5D%E4%BB%98%E3%81%8D%E3%81%A7%E9%80%81%E3%82%8B%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20with%20data%20%5BDATA%5D%20and%20wait%22%3A%22%5BBROADCAST_OPTION%5D%E3%82%92%E3%83%87%E3%83%BC%E3%82%BF%5BDATA%5D%E4%BB%98%E3%81%8D%E3%81%A7%E9%80%81%E3%81%A3%E3%81%A6%E5%BE%85%E3%81%A4%22%2C%22_every%20%5BDURATION%5D%20frames%22%3A%22%5BDURATION%5D%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E3%81%94%E3%81%A8%E3%81%AB%22%2C%22_false%22%3A%22%E5%81%BD%22%2C%22_forever%22%3A%22%E3%81%9A%E3%81%A3%E3%81%A8%22%2C%22_hit%22%3A%22%E6%8A%BC%E3%81%95%E3%82%8C%E3%81%9F%22%2C%22_received%20data%22%3A%22%E5%8F%97%E3%81%91%E5%8F%96%E3%81%A3%E3%81%9F%E3%83%87%E3%83%BC%E3%82%BF%22%2C%22_released%22%3A%22%E9%9B%A2%E3%81%95%E3%82%8C%E3%81%9F%22%2C%22_true%22%3A%22%E7%9C%9F%22%2C%22_when%20%5BCONDITION%5D%20becomes%20%5BSTATE%5D%22%3A%22%5BCONDITION%5D%E3%81%8C%5BSTATE%5D%E3%81%AB%E3%81%AA%E3%81%A3%E3%81%9F%E6%99%82%22%2C%22_when%20%5BINPUT%5D%20is%20changed%22%3A%22%5BINPUT%5D%E3%81%8C%E5%A4%89%E3%82%8F%E3%81%A3%E3%81%9F%E6%99%82%22%2C%22_when%20%5BKEY_OPTION%5D%20key%20%5BACTION%5D%22%3A%22%5BKEY_OPTION%5D%E3%82%AD%E3%83%BC%E3%81%8C%5BACTION%5D%E3%81%A8%E3%81%8D%22%2C%22_when%20%5BSTOP%5D%20clicked%22%3A%22%5BSTOP%5D%E3%81%8C%E6%8A%BC%E3%81%95%E3%82%8C%E3%81%9F%E6%99%82%22%2C%22_while%20%5BCONDITION%5D%20is%20%5BSTATE%5D%22%3A%22%5BCONDITION%5D%E3%81%8C%5BSTATE%5D%E3%81%AE%E9%96%93%22%2C%22_while%20%5BKEY_OPTION%5D%20key%20pressed%22%3A%22%5BKEY_OPTION%5D%E3%82%AD%E3%83%BC%E3%81%8C%E6%8A%BC%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E9%96%93%22%7D%2C%22ko%22%3A%7B%22_More%20Events%22%3A%22%EC%B6%94%EA%B0%80%20%EC%9D%B4%EB%B2%A4%ED%8A%B8%22%2C%22_after%20project%20saves%22%3A%22%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%20%EC%A0%80%EC%9E%A5%ED%95%9C%20%EC%A7%81%ED%9B%84%EC%9D%BC%20%EB%95%8C%22%2C%22_before%20project%20saves%22%3A%22%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%20%EC%A0%80%EC%9E%A5%ED%95%98%EA%B8%B0%20%EC%A7%81%EC%A0%84%EC%9D%BC%20%EB%95%8C%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%22%3A%22%EC%8B%A0%ED%98%B8%20%5BBROADCAST_OPTION%5D%EC%9D%84(%EB%A5%BC)%20%5BTARGET%5D%EC%97%90%EA%B2%8C%20%EB%B3%B4%EB%82%B4%EA%B8%B0%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20and%20wait%22%3A%22%EC%8B%A0%ED%98%B8%20%5BBROADCAST_OPTION%5D%EC%9D%84(%EB%A5%BC)%20%5BTARGET%5D%EC%97%90%EA%B2%8C%20%EB%B3%B4%EB%82%B4%EA%B3%A0%20%EA%B8%B0%EB%8B%A4%EB%A6%AC%EA%B8%B0%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20with%20data%20%5BDATA%5D%22%3A%22%EC%8B%A0%ED%98%B8%20%5BBROADCAST_OPTION%5D%EC%9D%84(%EB%A5%BC)%20%5BTARGET%5D%EC%97%90%EA%B2%8C%20%5BDATA%5D%EA%B0%92%EC%9C%BC%EB%A1%9C%20%EB%B3%B4%EB%82%B4%EA%B8%B0%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20with%20data%20%5BDATA%5D%20and%20wait%22%3A%22%EC%8B%A0%ED%98%B8%20%5BBROADCAST_OPTION%5D%EC%9D%84(%EB%A5%BC)%20%5BTARGET%5D%EC%97%90%EA%B2%8C%20%5BDATA%5D%EA%B0%92%EC%9C%BC%EB%A1%9C%20%EB%B3%B4%EB%82%B4%EA%B3%A0%20%EA%B8%B0%EB%8B%A4%EB%A6%AC%EA%B8%B0%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20with%20data%20%5BDATA%5D%22%3A%22%EC%8B%A0%ED%98%B8%20%5BBROADCAST_OPTION%5D%EC%9D%84(%EB%A5%BC)%20%5BDATA%5D%EA%B0%92%EC%9C%BC%EB%A1%9C%20%EB%B3%B4%EB%82%B4%EA%B8%B0%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20with%20data%20%5BDATA%5D%20and%20wait%22%3A%22%EC%8B%A0%ED%98%B8%20%5BBROADCAST_OPTION%5D%EC%9D%84(%EB%A5%BC)%20%5BDATA%5D%EA%B0%92%EC%9C%BC%EB%A1%9C%20%EB%B3%B4%EB%82%B4%EA%B3%A0%20%EA%B8%B0%EB%8B%A4%EB%A6%AC%EA%B8%B0%22%2C%22_every%20%5BDURATION%5D%20frames%22%3A%22%EB%A7%A4%20%5BDURATION%5D%ED%94%84%EB%A0%88%EC%9E%84%EB%A7%88%EB%8B%A4%20%EB%B0%98%EB%B3%B5%ED%95%98%EA%B8%B0%22%2C%22_false%22%3A%22%EA%B1%B0%EC%A7%93%22%2C%22_forever%22%3A%22%EB%AC%B4%ED%95%9C%20%EB%B0%98%EB%B3%B5%ED%95%98%EA%B8%B0%22%2C%22_hit%22%3A%22%EB%88%84%EB%A5%BC%20%EB%95%8C%22%2C%22_received%20data%22%3A%22%EB%B0%9B%EC%9D%80%20%EA%B0%92%22%2C%22_released%22%3A%22%EB%97%84%20%EB%95%8C%22%2C%22_true%22%3A%22%EC%B0%B8%22%2C%22_when%20%5BCONDITION%5D%20becomes%20%5BSTATE%5D%22%3A%22%5BCONDITION%5D%EC%9D%B4(%EA%B0%80)%20%5BSTATE%5D%EC%9D%B4(%EA%B0%80)%20%EB%90%A0%20%EB%95%8C%22%2C%22_when%20%5BINPUT%5D%20is%20changed%22%3A%22%5BINPUT%5D%EC%9D%B4(%EA%B0%80)%20%EB%B3%80%EA%B2%BD%EB%90%98%EC%97%88%EC%9D%84%20%EB%95%8C%22%2C%22_when%20%5BKEY_OPTION%5D%20key%20%5BACTION%5D%22%3A%22%5BKEY_OPTION%5D%ED%82%A4%EB%A5%BC%20%5BACTION%5D%22%2C%22_when%20%5BSTOP%5D%20clicked%22%3A%22%5BSTOP%5D%EC%9D%84(%EB%A5%BC)%20%ED%81%B4%EB%A6%AD%ED%96%88%EC%9D%84%20%EB%95%8C%22%2C%22_while%20%5BCONDITION%5D%20is%20%5BSTATE%5D%22%3A%22%5BCONDITION%5D%EC%9D%B4(%EA%B0%80)%20%5BSTATE%5D%EC%9D%B8%20%EB%8F%99%EC%95%88%20%EB%B0%98%EB%B3%B5%ED%95%98%EA%B8%B0%22%2C%22_while%20%5BKEY_OPTION%5D%20key%20pressed%22%3A%22%5BKEY_OPTION%5D%ED%82%A4%EB%A5%BC%20%EB%88%84%EB%A5%B4%EB%8A%94%20%EB%8F%99%EC%95%88%20%EB%B0%98%EB%B3%B5%ED%95%98%EA%B8%B0%22%7D%2C%22nb%22%3A%7B%22_More%20Events%22%3A%22Meir%20Hendelser%22%2C%22_true%22%3A%22sann%22%7D%2C%22nl%22%3A%7B%22_More%20Events%22%3A%22Meer%20gebeurtenissen%22%2C%22_after%20project%20saves%22%3A%22nadat%20project%20is%20bewaard%22%2C%22_before%20project%20saves%22%3A%22voordat%20project%20wordt%20bewaard%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%22%3A%22zend%20signaal%20%5BBROADCAST_OPTION%5D%20naar%20%5BTARGET%5D%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20and%20wait%22%3A%22zend%20signaal%20%5BBROADCAST_OPTION%5D%20naar%20%5BTARGET%5D%20en%20wacht%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20with%20data%20%5BDATA%5D%22%3A%22zend%20signaal%20%5BBROADCAST_OPTION%5D%20naar%20%5BTARGET%5D%20met%20gegevens%20%5BDATA%5D%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20with%20data%20%5BDATA%5D%20and%20wait%22%3A%22zend%20signaal%20%5BBROADCAST_OPTION%5D%20naar%20%5BTARGET%5D%20met%20gegevens%20%5BDATA%5D%20en%20wacht%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20with%20data%20%5BDATA%5D%22%3A%22zend%20signaal%20%5BBROADCAST_OPTION%5D%20met%20gegevens%20%5BDATA%5D%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20with%20data%20%5BDATA%5D%20and%20wait%22%3A%22zend%20signaal%20%5BBROADCAST_OPTION%5D%20met%20gegevens%20%5BDATA%5D%20en%20wacht%22%2C%22_every%20%5BDURATION%5D%20frames%22%3A%22elke%20%5BDURATION%5D%20frames%22%2C%22_false%22%3A%22onwaar%22%2C%22_forever%22%3A%22herhaal%22%2C%22_hit%22%3A%22ingedrukt%22%2C%22_received%20data%22%3A%22ontvangen%20gegevens%22%2C%22_released%22%3A%22losgelaten%22%2C%22_true%22%3A%22waar%22%2C%22_when%20%5BCONDITION%5D%20becomes%20%5BSTATE%5D%22%3A%22wanneer%20%5BCONDITION%5D%20%5BSTATE%5D%20wordt%22%2C%22_when%20%5BINPUT%5D%20is%20changed%22%3A%22wanneer%20%5BINPUT%5D%20is%20veranderd%22%2C%22_when%20%5BKEY_OPTION%5D%20key%20%5BACTION%5D%22%3A%22wanneer%20%5BKEY_OPTION%5D%20net%20wordt%20%5BACTION%5D%22%2C%22_when%20%5BSTOP%5D%20clicked%22%3A%22wanneer%20op%20%5BSTOP%5D%20wordt%20geklikt%22%2C%22_while%20%5BCONDITION%5D%20is%20%5BSTATE%5D%22%3A%22terwijl%20%5BCONDITION%5D%20%5BSTATE%5D%20is%22%2C%22_while%20%5BKEY_OPTION%5D%20key%20pressed%22%3A%22terwijl%20%5BKEY_OPTION%5D%20ingedrukt%22%7D%2C%22pl%22%3A%7B%22_false%22%3A%22fa%C5%82sz%22%2C%22_true%22%3A%22prawda%22%7D%2C%22ru%22%3A%7B%22_More%20Events%22%3A%22%D0%9C%D0%BD%D0%BE%D0%B3%D0%BE%20%D0%AD%D0%B2%D0%B5%D0%BD%D1%82%D0%BE%D0%B2%22%2C%22_after%20project%20saves%22%3A%22%D0%BF%D0%BE%D1%81%D0%BB%D0%B5%20%D1%81%D0%BE%D1%85%D1%80%D0%B0%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0%22%2C%22_before%20project%20saves%22%3A%22%D0%B4%D0%BE%20%D1%81%D0%BE%D1%85%D1%80%D0%B0%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%22%3A%22%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B8%D1%82%D1%8C%20%5BBROADCAST_OPTION%5D%20%D0%BA%20%5BTARGET%5D%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20and%20wait%22%3A%22%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B8%D1%82%D1%8C%20%5BBROADCAST_OPTION%5D%20%D0%BA%20%5BTARGET%5D%20%D0%B8%20%D0%B6%D0%B4%D0%B0%D1%82%D1%8C%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20with%20data%20%5BDATA%5D%22%3A%22%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B8%D1%82%D1%8C%20%5BBROADCAST_OPTION%5D%20%D0%BA%20%5BTARGET%5D%20%D1%81%20%5BDATA%5D%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20with%20data%20%5BDATA%5D%20and%20wait%22%3A%22%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B8%D1%82%D1%8C%20%5BBROADCAST_OPTION%5D%20%D0%BA%20%5BTARGET%5D%20%D1%81%20%5BDATA%5D%20%D0%B8%20%D0%B6%D0%B4%D0%B0%D1%82%D1%8C%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20with%20data%20%5BDATA%5D%22%3A%22%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B8%D1%82%D1%8C%20%5BBROADCAST_OPTION%5D%20%D1%81%20%5BDATA%5D%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20with%20data%20%5BDATA%5D%20and%20wait%22%3A%22%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B8%D1%82%D1%8C%20%5BBROADCAST_OPTION%5D%20%D1%81%20%5BDATA%5D%20%D0%B8%20%D0%B6%D0%B4%D0%B0%D1%82%D1%8C%22%2C%22_every%20%5BDURATION%5D%20frames%22%3A%22%D0%BA%D0%B0%D0%B6%D0%B4%D1%8B%D0%B5%20%5BDURATION%5D%20%D0%BA%D0%B0%D0%B4%D1%80%D0%BE%D0%B2%22%2C%22_false%22%3A%22%D0%BD%D0%B5%D1%82%22%2C%22_forever%22%3A%22%D0%B2%D1%81%D0%B5%D0%B3%D0%B4%D0%B0%22%2C%22_hit%22%3A%22%D1%83%D0%B4%D0%B0%D1%80%22%2C%22_received%20data%22%3A%22%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5%22%2C%22_released%22%3A%22%D0%B2%D1%8B%D0%BF%D1%83%D1%89%D0%B5%D0%BD%D0%BD%D0%BE%D0%B5%22%2C%22_true%22%3A%22%D0%B4%D0%B0%22%2C%22_when%20%5BCONDITION%5D%20becomes%20%5BSTATE%5D%22%3A%22%D0%BA%D0%BE%D0%B3%D0%B4%D0%B0%20%5BCONDITION%5D%20%D1%81%D1%82%D0%B0%D0%BD%D0%B5%D1%82%20%5BSTATE%5D%22%2C%22_when%20%5BINPUT%5D%20is%20changed%22%3A%22%D0%BA%D0%BE%D0%B3%D0%B4%D0%B0%20%5BINPUT%5D%20%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D1%91%D0%BD%22%2C%22_when%20%5BKEY_OPTION%5D%20key%20%5BACTION%5D%22%3A%22%D0%BA%D0%BE%D0%B3%D0%B4%D0%B0%20%5BKEY_OPTION%5D%20%D0%BA%D0%BB%D0%B0%D0%B2%D0%B8%D1%88%D1%83%20%5BACTION%5D%22%2C%22_when%20%5BSTOP%5D%20clicked%22%3A%22%D0%BA%D0%BE%D0%B3%D0%B4%D0%B0%20%5BSTOP%5D%20%D0%BD%D0%B0%D0%B6%D0%B0%D1%82%22%2C%22_while%20%5BCONDITION%5D%20is%20%5BSTATE%5D%22%3A%22%D0%B2%D0%BE%20%D0%B2%D1%80%D0%B5%D0%BC%D1%8F%20%D1%82%D0%BE%D0%B3%D0%BE%20%D0%BA%D0%B0%D0%BA%20%5BCONDITION%5D%20%D1%8D%D1%82%D0%BE%20%5BSTATE%5D%22%2C%22_while%20%5BKEY_OPTION%5D%20key%20pressed%22%3A%22%D0%BA%D0%BE%D0%B3%D0%B4%D0%B0%20%D0%BA%D0%BB%D0%B0%D0%B2%D0%B8%D1%88%D0%B0%20%5BKEY_OPTION%5D%20%D0%BD%D0%B0%D0%B6%D0%B0%D1%82%D0%B0%22%7D%2C%22tr%22%3A%7B%22_More%20Events%22%3A%22Daha%20Fazla%20Etkinlik%22%7D%2C%22uk%22%3A%7B%22_More%20Events%22%3A%22%D0%91%D1%96%D0%BB%D1%8C%D1%88%D0%B5%20%D0%9F%D0%BE%D0%B4%D1%96%D0%B9%22%2C%22_after%20project%20saves%22%3A%22%D0%BF%D1%96%D1%81%D0%BB%D1%8F%20%D0%B7%D0%B1%D0%B5%D1%80%D0%B5%D0%B6%D0%B5%D0%BD%D0%BD%D1%8F%20%D0%BF%D1%80%D0%BE%D1%94%D0%BA%D1%82%D1%83%22%2C%22_before%20project%20saves%22%3A%22%D0%BF%D0%B5%D1%80%D0%B5%D0%B4%20%D0%B7%D0%B1%D0%B5%D1%80%D0%B5%D0%B6%D0%B5%D0%BD%D0%BD%D1%8F%D0%BC%20%D0%BF%D1%80%D0%BE%D1%94%D0%BA%D1%82%D1%83%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%22%3A%22%D0%B2%D1%96%D0%B4%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D0%B8%20%5BBROADCAST_OPTION%5D%20%D0%B4%D0%BE%20%5BTARGET%5D%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20and%20wait%22%3A%22%D0%B2%D1%96%D0%B4%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D0%B8%20%5BBROADCAST_OPTION%5D%20%D0%B4%D0%BE%20%5BTARGET%5D%20%D1%96%20%D1%87%D0%B5%D0%BA%D0%B0%D1%82%D0%B8%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20with%20data%20%5BDATA%5D%22%3A%22%D0%B2%D1%96%D0%B4%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D0%B8%20%5BBROADCAST_OPTION%5D%20%D0%B4%D0%BE%20%5BTARGET%5D%20%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%B8%D0%BC%D0%B8%20%5BDATA%5D%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20with%20data%20%5BDATA%5D%20and%20wait%22%3A%22%D0%B2%D1%96%D0%B4%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D0%B8%20%5BBROADCAST_OPTION%5D%20%D0%B4%D0%BE%20%5BTARGET%5D%20%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%B8%D0%BC%D0%B8%20%5BDATA%5D%20%D1%96%20%D1%87%D0%B5%D0%BA%D0%B0%D1%82%D0%B8%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20with%20data%20%5BDATA%5D%22%3A%22%D0%BE%D0%BF%D0%BE%D0%B2%D1%96%D1%81%D1%82%D0%B8%20%5BBROADCAST_OPTION%5D%20%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%B8%D0%BC%D0%B8%20%5BDATA%5D%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20with%20data%20%5BDATA%5D%20and%20wait%22%3A%22%D0%BE%D0%BF%D0%BE%D0%B2%D1%96%D1%81%D1%82%D0%B8%20%5BBROADCAST_OPTION%5D%20%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%B8%D0%BC%D0%B8%20%5BDATA%5D%20%D1%96%20%D1%87%D0%B5%D0%BA%D0%B0%D1%82%D0%B8%22%2C%22_every%20%5BDURATION%5D%20frames%22%3A%22%D0%BA%D0%BE%D0%B6%D0%BD%D1%96%20%5BDURATION%5D%20%D0%BA%D0%B0%D0%B4%D1%80%D1%96%D0%B2%22%2C%22_forever%22%3A%22%D0%B7%D0%B0%D0%B2%D0%B6%D0%B4%D0%B8%22%2C%22_hit%22%3A%22%D0%BD%D0%B0%D1%82%D0%B8%D1%81%D0%BD%D1%83%D1%82%D0%BE%22%2C%22_received%20data%22%3A%22%D0%BE%D1%82%D1%80%D0%B8%D0%BC%D0%B0%D0%BD%D1%96%20%D0%B4%D0%B0%D0%BD%D1%96%22%2C%22_released%22%3A%22%D0%B2%D1%96%D0%B4%D0%BF%D1%83%D1%89%D0%B5%D0%BD%D0%BE%22%2C%22_when%20%5BCONDITION%5D%20becomes%20%5BSTATE%5D%22%3A%22%D0%BA%D0%BE%D0%BB%D0%B8%20%5BCONDITION%5D%20%D1%81%D1%82%D0%B0%D1%94%20%5BSTATE%5D%22%2C%22_when%20%5BINPUT%5D%20is%20changed%22%3A%22%D0%BA%D0%BE%D0%BB%D0%B8%20%5BINPUT%5D%20%D0%B7%D0%BC%D1%96%D0%BD%D0%B5%D0%BD%D0%BE%22%2C%22_when%20%5BKEY_OPTION%5D%20key%20%5BACTION%5D%22%3A%22%D0%BA%D0%BE%D0%BB%D0%B8%20%5BACTION%5D%20%D0%BA%D0%BB%D0%B0%D0%B2%D1%96%D1%88%D1%83%20%5BKEY_OPTION%5D%22%2C%22_when%20%5BSTOP%5D%20clicked%22%3A%22%D0%BA%D0%BE%D0%BB%D0%B8%20%5BSTOP%5D%20%D0%BD%D0%B0%D1%82%D0%B8%D1%81%D0%BD%D1%83%D1%82%D0%BE%22%2C%22_while%20%5BCONDITION%5D%20is%20%5BSTATE%5D%22%3A%22%D0%BF%D0%BE%D0%BA%D0%B8%20%5BCONDITION%5D%20%D1%94%20%5BSTATE%5D%22%2C%22_while%20%5BKEY_OPTION%5D%20key%20pressed%22%3A%22%D0%BF%D0%BE%D0%BA%D0%B8%20%D0%BA%D0%BB%D0%B0%D0%B2%D1%96%D1%88%D1%83%20%5BKEY_OPTION%5D%20%D0%BD%D0%B0%D1%82%D0%B8%D1%81%D0%BD%D1%83%D1%82%D0%BE%22%7D%2C%22zh-cn%22%3A%7B%22_More%20Events%22%3A%22%E6%9B%B4%E5%A4%9A%E4%BA%8B%E4%BB%B6%22%2C%22_after%20project%20saves%22%3A%22%E4%BD%9C%E5%93%81%E4%BF%9D%E5%AD%98%E5%90%8E%22%2C%22_before%20project%20saves%22%3A%22%E4%BD%9C%E5%93%81%E4%BF%9D%E5%AD%98%E5%89%8D%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%22%3A%22%E5%B9%BF%E6%92%AD%5BBROADCAST_OPTION%5D%E7%BB%99%5BTARGET%5D%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20and%20wait%22%3A%22%E5%B9%BF%E6%92%AD%5BBROADCAST_OPTION%5D%E7%BB%99%5BTARGET%5D%E5%B9%B6%E7%AD%89%E5%BE%85%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20with%20data%20%5BDATA%5D%22%3A%22%E5%B9%BF%E6%92%AD%5BBROADCAST_OPTION%5D%E7%BB%99%5BTARGET%5D%E5%B9%B6%E6%90%BA%E5%B8%A6%E6%95%B0%E6%8D%AE%5BDATA%5D%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20with%20data%20%5BDATA%5D%20and%20wait%22%3A%22%E5%B9%BF%E6%92%AD%5BBROADCAST_OPTION%5D%E7%BB%99%5BTARGET%5D%E5%B9%B6%E6%90%BA%E5%B8%A6%E6%95%B0%E6%8D%AE%5BDATA%5D%E5%B9%B6%E7%AD%89%E5%BE%85%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20with%20data%20%5BDATA%5D%22%3A%22%E5%B9%BF%E6%92%AD%5BBROADCAST_OPTION%5D%E5%B9%B6%E6%90%BA%E5%B8%A6%E6%95%B0%E6%8D%AE%5BDATA%5D%22%2C%22_broadcast%20%5BBROADCAST_OPTION%5D%20with%20data%20%5BDATA%5D%20and%20wait%22%3A%22%E5%B9%BF%E6%92%AD%5BBROADCAST_OPTION%5D%E5%B9%B6%E6%90%BA%E5%B8%A6%E6%95%B0%E6%8D%AE%5BDATA%5D%E5%B9%B6%E7%AD%89%E5%BE%85%22%2C%22_every%20%5BDURATION%5D%20frames%22%3A%22%E6%AF%8F%5BDURATION%5D%E5%B8%A7%22%2C%22_false%22%3A%22%E5%81%87%22%2C%22_forever%22%3A%22%E6%B0%B8%E8%BF%9C%22%2C%22_hit%22%3A%22%E5%8F%98%E4%B8%BA%E6%8C%89%E4%B8%8B%22%2C%22_received%20data%22%3A%22%E6%94%B6%E5%88%B0%E7%9A%84%E6%95%B0%E6%8D%AE%22%2C%22_released%22%3A%22%E5%8F%98%E4%B8%BA%E6%9D%BE%E5%BC%80%22%2C%22_true%22%3A%22%E7%9C%9F%22%2C%22_when%20%5BCONDITION%5D%20becomes%20%5BSTATE%5D%22%3A%22%E5%BD%93%5BCONDITION%5D%E5%8F%98%E4%B8%BA%5BSTATE%5D%22%2C%22_when%20%5BINPUT%5D%20is%20changed%22%3A%22%E5%BD%93%5BINPUT%5D%E5%8F%91%E7%94%9F%E6%94%B9%E5%8F%98%22%2C%22_when%20%5BKEY_OPTION%5D%20key%20%5BACTION%5D%22%3A%22%E5%BD%93%E6%8C%89%E9%94%AE%5BKEY_OPTION%5D%5BACTION%5D%22%2C%22_when%20%5BSTOP%5D%20clicked%22%3A%22%E5%BD%93%5BSTOP%5D%E8%A2%AB%E7%82%B9%E5%87%BB%22%2C%22_while%20%5BCONDITION%5D%20is%20%5BSTATE%5D%22%3A%22%E5%8F%AA%E8%A6%81%5BCONDITION%5D%E4%B8%BA%5BSTATE%5D%22%2C%22_while%20%5BKEY_OPTION%5D%20key%20pressed%22%3A%22%E5%BD%93%E6%8C%89%E9%94%AE%5BKEY_OPTION%5D%E6%8C%89%E4%BD%8F%E6%97%B6%22%7D%7D)%3B%2F*%20end%20generated%20l10n%20code%20*%2F(function%20(Scratch)%20%7B%0D%0A%20%20%22use%20strict%22%3B%0D%0A%0D%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0D%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0D%0A%0D%0A%20%20const%20stopIcon%20%3D%0D%0A%20%20%20%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAQlBMVEUAAAC%2FUFC8Q0OzTU24SEi4SEi3SEi4R0e4SEi4SEi4SEi4SEi7SUm8SUnMTk7MT0%2FOT0%2FPT0%2FgVVXiVVXsWVn%2F%2F%2F%2BCoOd2AAAAC3RSTlMAEBMUu7zLz9D8%2FdIXnJwAAAABYktHRBXl2PmjAAAAxklEQVRIx%2B3WwRKDIBAD0JWqVEOtWv7%2FW3twOqKwELzW3N9wYhORMMYiztgZUZMUAKxqmh5Kno%2FMG256nzI59Z2mB%2BBWH%2BXzUt5RhWoyQjFZkTQFkTBFERlCnAwlDoYUgaHFblpaeL86AK0MvNjMIABmT2cGIAAWniw3ucm%2Fk9ovduEjXzgXtUfJmtrTt9VZzYH9FSB%2FxvfKZMsiLFmuko61zBTfucjL9RpXf6nEU2MhPxXS86J%2BkORmjz6V6seViOnG8oT7ApMcjsYZwhXCAAAAAElFTkSuQmCC%22%3B%0D%0A%0D%0A%20%20%2F%2F%20Source%3A%0D%0A%20%20%2F%2F%20https%3A%2F%2Fgithub.com%2FTurboWarp%2Fscratch-vm%2Fblob%2Fdevelop%2Fsrc%2Fio%2Fkeyboard.js%0D%0A%20%20%2F%2F%20https%3A%2F%2Fgithub.com%2FTurboWarp%2Fscratch-blocks%2Fblob%2Fdevelop%2Fblocks_vertical%2Fevent.js%0D%0A%20%20const%20validKeyboardInputs%20%3D%20%5B%0D%0A%20%20%20%20%2F%2F%20Special%20Inputs%0D%0A%20%20%20%20%7B%20text%3A%20%22space%22%2C%20value%3A%20%22space%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22up%20arrow%22%2C%20value%3A%20%22up%20arrow%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22down%20arrow%22%2C%20value%3A%20%22down%20arrow%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22right%20arrow%22%2C%20value%3A%20%22right%20arrow%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22left%20arrow%22%2C%20value%3A%20%22left%20arrow%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22enter%22%2C%20value%3A%20%22enter%22%20%7D%2C%0D%0A%20%20%20%20%2F%2F%20TW%3A%20Extra%20Special%20Inputs%0D%0A%20%20%20%20%7B%20text%3A%20%22backspace%22%2C%20value%3A%20%22backspace%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22delete%22%2C%20value%3A%20%22delete%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22shift%22%2C%20value%3A%20%22shift%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22caps%20lock%22%2C%20value%3A%20%22caps%20lock%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22scroll%20lock%22%2C%20value%3A%20%22scroll%20lock%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22control%22%2C%20value%3A%20%22control%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22escape%22%2C%20value%3A%20%22escape%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22insert%22%2C%20value%3A%20%22insert%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22home%22%2C%20value%3A%20%22home%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22end%22%2C%20value%3A%20%22end%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22page%20up%22%2C%20value%3A%20%22page%20up%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22page%20down%22%2C%20value%3A%20%22page%20down%22%20%7D%2C%0D%0A%20%20%20%20%2F%2F%20Letter%20Keyboard%20Inputs%0D%0A%20%20%20%20%7B%20text%3A%20%22a%22%2C%20value%3A%20%22a%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22b%22%2C%20value%3A%20%22b%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22c%22%2C%20value%3A%20%22c%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22d%22%2C%20value%3A%20%22d%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22e%22%2C%20value%3A%20%22e%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22f%22%2C%20value%3A%20%22f%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22g%22%2C%20value%3A%20%22g%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22h%22%2C%20value%3A%20%22h%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22i%22%2C%20value%3A%20%22i%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22j%22%2C%20value%3A%20%22j%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22k%22%2C%20value%3A%20%22k%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22l%22%2C%20value%3A%20%22l%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22m%22%2C%20value%3A%20%22m%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22n%22%2C%20value%3A%20%22n%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22o%22%2C%20value%3A%20%22o%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22p%22%2C%20value%3A%20%22p%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22q%22%2C%20value%3A%20%22q%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22r%22%2C%20value%3A%20%22r%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22s%22%2C%20value%3A%20%22s%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22t%22%2C%20value%3A%20%22t%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22u%22%2C%20value%3A%20%22u%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22v%22%2C%20value%3A%20%22v%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22w%22%2C%20value%3A%20%22w%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22x%22%2C%20value%3A%20%22x%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22y%22%2C%20value%3A%20%22y%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%22z%22%2C%20value%3A%20%22z%22%20%7D%2C%0D%0A%20%20%20%20%2F%2F%20Number%20Keyboard%20Inputs%0D%0A%20%20%20%20%7B%20text%3A%20%220%22%2C%20value%3A%20%220%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%221%22%2C%20value%3A%20%221%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%222%22%2C%20value%3A%20%222%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%223%22%2C%20value%3A%20%223%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%224%22%2C%20value%3A%20%224%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%225%22%2C%20value%3A%20%225%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%226%22%2C%20value%3A%20%226%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%227%22%2C%20value%3A%20%227%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%228%22%2C%20value%3A%20%228%22%20%7D%2C%0D%0A%20%20%20%20%7B%20text%3A%20%229%22%2C%20value%3A%20%229%22%20%7D%2C%0D%0A%20%20%5D%3B%0D%0A%0D%0A%20%20var%20lastValues%20%3D%20%7B%7D%3B%0D%0A%20%20var%20runTimer%20%3D%200%3B%0D%0A%0D%0A%20%20const%20MAX_BEFORE_SAVE_MS%20%3D%203000%3B%0D%0A%0D%0A%20%20const%20beforeSave%20%3D%20()%20%3D%3E%0D%0A%20%20%20%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20const%20threads%20%3D%20vm.runtime.startHats(%22lmsMoreEvents_beforeSave%22)%3B%0D%0A%0D%0A%20%20%20%20%20%20if%20(threads.length%20%3D%3D%3D%200)%20%7B%0D%0A%20%20%20%20%20%20%20%20resolve()%3B%0D%0A%20%20%20%20%20%20%20%20return%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20const%20startTime%20%3D%20performance.now()%3B%0D%0A%20%20%20%20%20%20const%20checkThreadStatus%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(%0D%0A%20%20%20%20%20%20%20%20%20%20performance.now()%20-%20startTime%20%3E%20MAX_BEFORE_SAVE_MS%20%7C%7C%0D%0A%20%20%20%20%20%20%20%20%20%20threads.every((thread)%20%3D%3E%20!vm.runtime.isActiveThread(thread))%0D%0A%20%20%20%20%20%20%20%20)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20vm.runtime.off(%22AFTER_EXECUTE%22%2C%20checkThreadStatus)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%0D%0A%20%20%20%20%20%20vm.runtime.on(%22AFTER_EXECUTE%22%2C%20checkThreadStatus)%3B%0D%0A%20%20%20%20%7D)%3B%0D%0A%0D%0A%20%20const%20afterSave%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%2F%2F%20Wait%20until%20the%20next%20frame%20actually%20starts%20so%20that%20the%20actual%20file%0D%0A%20%20%20%20%2F%2F%20saving%20routine%20has%20a%20chance%20to%20finish%20before%20we%20starting%20running%20blocks.%0D%0A%20%20%20%20vm.runtime.once(%22BEFORE_EXECUTE%22%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20vm.runtime.startHats(%22lmsMoreEvents_afterSave%22)%3B%0D%0A%20%20%20%20%7D)%3B%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20originalSaveProjectSb3%20%3D%20vm.saveProjectSb3%3B%0D%0A%20%20vm.saveProjectSb3%20%3D%20async%20function%20(...args)%20%7B%0D%0A%20%20%20%20await%20beforeSave()%3B%0D%0A%20%20%20%20const%20result%20%3D%20await%20originalSaveProjectSb3.apply(this%2C%20args)%3B%0D%0A%20%20%20%20afterSave()%3B%0D%0A%20%20%20%20return%20result%3B%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20originalSaveProjectSb3Stream%20%3D%20vm.saveProjectSb3Stream%3B%0D%0A%20%20vm.saveProjectSb3Stream%20%3D%20function%20(...args)%20%7B%0D%0A%20%20%20%20%2F%2F%20This%20is%20complicated%20because%20we%20need%20to%20return%20a%20stream%20object%20syncronously...%0D%0A%0D%0A%20%20%20%20let%20realStream%20%3D%20null%3B%0D%0A%20%20%20%20const%20queuedCalls%20%3D%20%5B%5D%3B%0D%0A%0D%0A%20%20%20%20const%20whenStreamReady%20%3D%20(methodName%2C%20args)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20if%20(realStream)%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20realStream%5BmethodName%5D.apply(realStream%2C%20args)%3B%0D%0A%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20queuedCalls.push(%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20resolve%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20methodName%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20args%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%3B%0D%0A%0D%0A%20%20%20%20const%20streamWrapper%20%3D%20%7B%0D%0A%20%20%20%20%20%20on%3A%20(...args)%20%3D%3E%20void%20whenStreamReady(%22on%22%2C%20args)%2C%0D%0A%20%20%20%20%20%20pause%3A%20(...args)%20%3D%3E%20void%20whenStreamReady(%22pause%22%2C%20args)%2C%0D%0A%20%20%20%20%20%20resume%3A%20(...args)%20%3D%3E%20void%20whenStreamReady(%22resume%22%2C%20args)%2C%0D%0A%20%20%20%20%20%20accumulate%3A%20(...args)%20%3D%3E%20whenStreamReady(%22accumulate%22%2C%20args)%2C%0D%0A%20%20%20%20%7D%3B%0D%0A%0D%0A%20%20%20%20beforeSave().then(()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20realStream%20%3D%20originalSaveProjectSb3Stream.apply(this%2C%20args)%3B%0D%0A%0D%0A%20%20%20%20%20%20realStream.on(%22end%22%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20Not%20sure%20how%20JSZip%20handles%20errors%20here%2C%20so%20we'll%20make%20sure%20not%20to%20break%20anything%20if%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20afterSave%20somehow%20throws%0D%0A%20%20%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20afterSave()%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20console.error(e)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%0D%0A%20%20%20%20%20%20for%20(const%20queued%20of%20queuedCalls)%20%7B%0D%0A%20%20%20%20%20%20%20%20queued.resolve(%0D%0A%20%20%20%20%20%20%20%20%20%20realStream%5Bqueued.methodName%5D.apply(realStream%2C%20queued.args)%0D%0A%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20queuedCalls.length%20%3D%200%3B%0D%0A%20%20%20%20%7D)%3B%0D%0A%0D%0A%20%20%20%20return%20streamWrapper%3B%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20class%20MoreEvents%20%7B%0D%0A%20%20%20%20constructor()%20%7B%0D%0A%20%20%20%20%20%20%2F%2F%20Stop%20Sign%20Clicked%20contributed%20by%20%40CST1229%0D%0A%20%20%20%20%20%20runtime.shouldExecuteStopClicked%20%3D%20true%3B%0D%0A%20%20%20%20%20%20runtime.on(%22BEFORE_EXECUTE%22%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20runTimer%2B%2B%3B%0D%0A%20%20%20%20%20%20%20%20runtime.shouldExecuteStopClicked%20%3D%20false%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20runtime.startHats(%22lmsMoreEvents_forever%22)%3B%0D%0A%20%20%20%20%20%20%20%20runtime.startHats(%22lmsMoreEvents_whileTrueFalse%22)%3B%0D%0A%20%20%20%20%20%20%20%20runtime.startHats(%22lmsMoreEvents_whenValueChanged%22)%3B%0D%0A%20%20%20%20%20%20%20%20runtime.startHats(%22lmsMoreEvents_everyDuration%22)%3B%0D%0A%20%20%20%20%20%20%20%20runtime.startHats(%22lmsMoreEvents_whileKeyPressed%22)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20runtime.on(%22PROJECT_START%22%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20runTimer%20%3D%200%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20runtime.on(%22PROJECT_STOP_ALL%22%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20runTimer%20%3D%200%3B%0D%0A%20%20%20%20%20%20%20%20if%20(runtime.shouldExecuteStopClicked)%0D%0A%20%20%20%20%20%20%20%20%20%20queueMicrotask(()%20%3D%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20runtime.startHats(%22lmsMoreEvents_whenStopClicked%22)%0D%0A%20%20%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20runtime.on(%22AFTER_EXECUTE%22%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20runtime.shouldExecuteStopClicked%20%3D%20true%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20const%20originalGreenFlag%20%3D%20vm.greenFlag%3B%0D%0A%20%20%20%20%20%20vm.greenFlag%20%3D%20function%20()%20%7B%0D%0A%20%20%20%20%20%20%20%20runtime.shouldExecuteStopClicked%20%3D%20false%3B%0D%0A%20%20%20%20%20%20%20%20originalGreenFlag.call(this)%3B%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getInfo()%20%7B%0D%0A%20%20%20%20%20%20return%20%7B%0D%0A%20%20%20%20%20%20%20%20id%3A%20%22lmsMoreEvents%22%2C%0D%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%22More%20Events%22)%2C%0D%0A%20%20%20%20%20%20%20%20color1%3A%20%22%23FFBF00%22%2C%0D%0A%20%20%20%20%20%20%20%20color2%3A%20%22%23E6AC00%22%2C%0D%0A%20%20%20%20%20%20%20%20color3%3A%20%22%23CC9900%22%2C%0D%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22whenStopClicked%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.EVENT%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22when%20%5BSTOP%5D%20clicked%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STOP%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.IMAGE%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dataURI%3A%20stopIcon%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_event%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22forever%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.EVENT%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22forever%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_event%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22whenTrueFalse%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.HAT%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22when%20%5BCONDITION%5D%20becomes%20%5BSTATE%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CONDITION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.BOOLEAN%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STATE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22boolean%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_event%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22whileTrueFalse%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.HAT%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22while%20%5BCONDITION%5D%20is%20%5BSTATE%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CONDITION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.BOOLEAN%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STATE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22boolean%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_event%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22whenValueChanged%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.HAT%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22when%20%5BINPUT%5D%20is%20changed%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INPUT%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Intentional%3A%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Encourages%20people%20to%20place%20a%20block%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20(as%20opposed%20to%20typing%20a%20value)%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20null%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_event%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22everyDuration%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.HAT%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22every%20%5BDURATION%5D%20frames%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DURATION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%203%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_event%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22whenKeyAction%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.HAT%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22when%20%5BKEY_OPTION%5D%20key%20%5BACTION%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20KEY_OPTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22space%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22keyboardButtons%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ACTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22action%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_event%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22whileKeyPressed%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.HAT%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22while%20%5BKEY_OPTION%5D%20key%20pressed%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20KEY_OPTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22space%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22keyboardButtons%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_event%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22broadcastToTarget%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BROADCAST_OPTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20null%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22targetMenu%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_event%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22broadcastToTargetAndWait%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20and%20wait%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BROADCAST_OPTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20null%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22targetMenu%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_event%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22broadcastData%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22broadcast%20%5BBROADCAST_OPTION%5D%20with%20data%20%5BDATA%5D%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BROADCAST_OPTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20null%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DATA%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_event%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22broadcastDataAndWait%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22broadcast%20%5BBROADCAST_OPTION%5D%20with%20data%20%5BDATA%5D%20and%20wait%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BROADCAST_OPTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20null%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DATA%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_event%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.XML%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20xml%3A%20'%3Cblock%20type%3D%22lmsMoreEvents_broadcastToTarget%22%3E%3Cvalue%20name%3D%22BROADCAST_OPTION%22%3E%3Cshadow%20type%3D%22event_broadcast_menu%22%3E%3C%2Fshadow%3E%3C%2Fvalue%3E%3Cvalue%20name%3D%22TARGET%22%3E%3Cshadow%20type%3D%22lmsMoreEvents_menu_targetMenu%22%3E%3C%2Fshadow%3E%3C%2Fvalue%3E%3C%2Fblock%3E%3Cblock%20type%3D%22lmsMoreEvents_broadcastToTargetAndWait%22%3E%3Cvalue%20name%3D%22BROADCAST_OPTION%22%3E%3Cshadow%20type%3D%22event_broadcast_menu%22%3E%3C%2Fshadow%3E%3C%2Fvalue%3E%3Cvalue%20name%3D%22TARGET%22%3E%3Cshadow%20type%3D%22lmsMoreEvents_menu_targetMenu%22%3E%3C%2Fshadow%3E%3C%2Fvalue%3E%3C%2Fblock%3E%3Csep%20gap%3D%2236%22%2F%3E%3Cblock%20type%3D%22lmsMoreEvents_broadcastData%22%3E%3Cvalue%20name%3D%22BROADCAST_OPTION%22%3E%3Cshadow%20type%3D%22event_broadcast_menu%22%3E%3C%2Fshadow%3E%3C%2Fvalue%3E%3Cvalue%20name%3D%22DATA%22%3E%3Cshadow%20type%3D%22text%22%3E%3C%2Fshadow%3E%3C%2Fvalue%3E%3C%2Fblock%3E%3Cblock%20type%3D%22lmsMoreEvents_broadcastDataAndWait%22%3E%3Cvalue%20name%3D%22BROADCAST_OPTION%22%3E%3Cshadow%20type%3D%22event_broadcast_menu%22%3E%3C%2Fshadow%3E%3C%2Fvalue%3E%3Cvalue%20name%3D%22DATA%22%3E%3Cshadow%20type%3D%22text%22%3E%3C%2Fshadow%3E%3C%2Fvalue%3E%3C%2Fblock%3E'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22receivedData%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22received%20data%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20allowDropAnywhere%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_event%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22broadcastDataToTarget%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20with%20data%20%5BDATA%5D%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22broadcastToTarget%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BROADCAST_OPTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20null%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22targetMenu%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DATA%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_event%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22broadcastDataToTargetAndWait%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22broadcast%20%5BBROADCAST_OPTION%5D%20to%20%5BTARGET%5D%20with%20data%20%5BDATA%5D%20and%20wait%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22broadcastToTargetAndWait%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BROADCAST_OPTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20null%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22targetMenu%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DATA%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_event%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.XML%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20xml%3A%20'%3Cblock%20type%3D%22lmsMoreEvents_broadcastDataToTarget%22%3E%3Cvalue%20name%3D%22BROADCAST_OPTION%22%3E%3Cshadow%20type%3D%22event_broadcast_menu%22%3E%3C%2Fshadow%3E%3C%2Fvalue%3E%3Cvalue%20name%3D%22TARGET%22%3E%3Cshadow%20type%3D%22lmsMoreEvents_menu_targetMenu%22%3E%3C%2Fshadow%3E%3C%2Fvalue%3E%3Cvalue%20name%3D%22DATA%22%3E%3Cshadow%20type%3D%22text%22%3E%3C%2Fshadow%3E%3C%2Fvalue%3E%3C%2Fblock%3E%3Cblock%20type%3D%22lmsMoreEvents_broadcastDataToTargetAndWait%22%3E%3Cvalue%20name%3D%22BROADCAST_OPTION%22%3E%3Cshadow%20type%3D%22event_broadcast_menu%22%3E%3C%2Fshadow%3E%3C%2Fvalue%3E%3Cvalue%20name%3D%22TARGET%22%3E%3Cshadow%20type%3D%22lmsMoreEvents_menu_targetMenu%22%3E%3C%2Fshadow%3E%3C%2Fvalue%3E%3Cvalue%20name%3D%22DATA%22%3E%3Cshadow%20type%3D%22text%22%3E%3C%2Fshadow%3E%3C%2Fvalue%3E%3C%2Fblock%3E'%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.EVENT%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22beforeSave%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22before%20project%20saves%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20shouldRestartExistingThreads%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_event%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.EVENT%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22afterSave%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22after%20project%20saves%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20shouldRestartExistingThreads%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_event%22%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Targets%20have%20acceptReporters%3A%20true%0D%0A%20%20%20%20%20%20%20%20%20%20targetMenu%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%22_getTargets%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20keyboardButtons%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20validKeyboardInputs%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Attributes%20have%20acceptReporters%3A%20false%0D%0A%20%20%20%20%20%20%20%20%20%20action%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22hit%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22hit%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22released%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22released%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20boolean%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22true%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22true%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22false%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22false%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20This%20menu%20is%20unused%2C%20however%20we%20can't%20remove%20it%20as%20that%20could%20break%20projects%0D%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20that%20use%20the%20menu%20through%20the%20All%20Menus%20extension.%0D%0A%20%20%20%20%20%20%20%20%20%20state%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Unused%2C%20so%20don't%20bother%20translating%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22enabled%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22disabled%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20whenTrueFalse(args)%20%7B%0D%0A%20%20%20%20%20%20return%20args.STATE%20%3D%3D%3D%20%22true%22%20%3F%20args.CONDITION%20%3A%20!args.CONDITION%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20whileTrueFalse(args)%20%7B%0D%0A%20%20%20%20%20%20return%20args.STATE%20%3D%3D%3D%20%22true%22%20%3F%20args.CONDITION%20%3A%20!args.CONDITION%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20whenValueChanged(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20blockId%20%3D%20util.thread.peekStack()%3B%0D%0A%20%20%20%20%20%20if%20(!lastValues%5BblockId%5D)%0D%0A%20%20%20%20%20%20%20%20lastValues%5BblockId%5D%20%3D%20Scratch.Cast.toString(args.INPUT)%3B%0D%0A%20%20%20%20%20%20if%20(lastValues%5BblockId%5D%20!%3D%3D%20Scratch.Cast.toString(args.INPUT))%20%7B%0D%0A%20%20%20%20%20%20%20%20lastValues%5BblockId%5D%20%3D%20Scratch.Cast.toString(args.INPUT)%3B%0D%0A%20%20%20%20%20%20%20%20return%20true%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20return%20false%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20everyDuration(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20duration%20%3D%20Math.max(%0D%0A%20%20%20%20%20%20%20%20Math.round(Scratch.Cast.toNumber(args.DURATION))%2C%0D%0A%20%20%20%20%20%20%20%200%0D%0A%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20return%20!!(runTimer%20%25%20duration%20%3D%3D%3D%200)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20whenKeyAction(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20key%20%3D%20Scratch.Cast.toString(args.KEY_OPTION).toLowerCase()%3B%0D%0A%20%20%20%20%20%20const%20pressed%20%3D%20util.ioQuery(%22keyboard%22%2C%20%22getKeyIsDown%22%2C%20%5Bkey%5D)%3B%0D%0A%20%20%20%20%20%20return%20args.ACTION%20%3D%3D%3D%20%22released%22%20%3F%20!pressed%20%3A%20pressed%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20whileKeyPressed(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20key%20%3D%20Scratch.Cast.toString(args.KEY_OPTION).toLowerCase()%3B%0D%0A%20%20%20%20%20%20return%20util.ioQuery(%22keyboard%22%2C%20%22getKeyIsDown%22%2C%20%5Bkey%5D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20broadcastToTarget(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20broadcastOption%20%3D%20Scratch.Cast.toString(args.BROADCAST_OPTION)%3B%0D%0A%20%20%20%20%20%20if%20(!broadcastOption)%20return%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20data%20%3D%20Scratch.Cast.toString(args.DATA)%3B%0D%0A%20%20%20%20%20%20console.log(data)%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20cloneTargets%20%3D%20this._getTargetFromMenu(args.TARGET).sprite.clones%3B%0D%0A%20%20%20%20%20%20let%20startedThreads%20%3D%20%5B%5D%3B%0D%0A%0D%0A%20%20%20%20%20%20for%20(const%20clone%20of%20cloneTargets)%20%7B%0D%0A%20%20%20%20%20%20%20%20startedThreads%20%3D%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20...startedThreads%2C%0D%0A%20%20%20%20%20%20%20%20%20%20...util.startHats(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%22event_whenbroadcastreceived%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BROADCAST_OPTION%3A%20broadcastOption%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20clone%0D%0A%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%5D%3B%0D%0A%20%20%20%20%20%20%20%20if%20(data)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20startedThreads.forEach((thread)%20%3D%3E%20(thread.receivedData%20%3D%20args.DATA))%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20broadcastToTargetAndWait(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20if%20(!util.stackFrame.broadcastVar)%20%7B%0D%0A%20%20%20%20%20%20%20%20util.stackFrame.broadcastVar%20%3D%20Scratch.Cast.toString(%0D%0A%20%20%20%20%20%20%20%20%20%20args.BROADCAST_OPTION%0D%0A%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20const%20spriteTarget%20%3D%20this._getTargetFromMenu(args.TARGET)%3B%0D%0A%20%20%20%20%20%20if%20(!spriteTarget)%20return%3B%0D%0A%20%20%20%20%20%20const%20cloneTargets%20%3D%20spriteTarget.sprite.clones%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20data%20%3D%20Scratch.Cast.toString(args.DATA)%3B%0D%0A%0D%0A%20%20%20%20%20%20if%20(util.stackFrame.broadcastVar)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20broadcastOption%20%3D%20util.stackFrame.broadcastVar%3B%0D%0A%20%20%20%20%20%20%20%20if%20(!util.stackFrame.startedThreads)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20util.stackFrame.startedThreads%20%3D%20%5B%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20for%20(const%20clone%20of%20cloneTargets)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20util.stackFrame.startedThreads%20%3D%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20...util.stackFrame.startedThreads%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20...util.startHats(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22event_whenbroadcastreceived%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20BROADCAST_OPTION%3A%20broadcastOption%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20clone%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(data)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20util.stackFrame.startedThreads.forEach(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(thread)%20%3D%3E%20(thread.receivedData%20%3D%20args.DATA)%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(util.stackFrame.startedThreads.length%20%3D%3D%3D%200)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20%20%20const%20waiting%20%3D%20util.stackFrame.startedThreads.some(%0D%0A%20%20%20%20%20%20%20%20%20%20(thread)%20%3D%3E%20runtime.threads.indexOf(thread)%20!%3D%3D%20-1%0D%0A%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%20%20if%20(waiting)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20util.stackFrame.startedThreads.every((thread)%20%3D%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20runtime.isWaitingThread(thread)%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%0D%0A%20%20%20%20%20%20%20%20%20%20)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20util.yieldTick()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20util.yield()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20broadcastData(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20broadcast%20%3D%20Scratch.Cast.toString(args.BROADCAST_OPTION)%3B%0D%0A%20%20%20%20%20%20if%20(!broadcast)%20return%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20data%20%3D%20Scratch.Cast.toString(args.DATA)%3B%0D%0A%0D%0A%20%20%20%20%20%20let%20threads%20%3D%20util.startHats(%22event_whenbroadcastreceived%22%2C%20%7B%0D%0A%20%20%20%20%20%20%20%20BROADCAST_OPTION%3A%20broadcast%2C%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20threads.forEach((thread)%20%3D%3E%20(thread.receivedData%20%3D%20data))%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20broadcastDataAndWait(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20data%20%3D%20Scratch.Cast.toString(args.DATA)%3B%0D%0A%0D%0A%20%20%20%20%20%20if%20(!util.stackFrame.broadcastVar)%20%7B%0D%0A%20%20%20%20%20%20%20%20util.stackFrame.broadcastVar%20%3D%20Scratch.Cast.toString(%0D%0A%20%20%20%20%20%20%20%20%20%20args.BROADCAST_OPTION%0D%0A%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20if%20(util.stackFrame.broadcastVar)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20broadcastOption%20%3D%20util.stackFrame.broadcastVar%3B%0D%0A%20%20%20%20%20%20%20%20if%20(!util.stackFrame.startedThreads)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20util.stackFrame.startedThreads%20%3D%20util.startHats(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%22event_whenbroadcastreceived%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BROADCAST_OPTION%3A%20broadcastOption%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(util.stackFrame.startedThreads.length%20%3D%3D%3D%200)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20util.stackFrame.startedThreads.forEach(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20(thread)%20%3D%3E%20(thread.receivedData%20%3D%20data)%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20%20%20const%20waiting%20%3D%20util.stackFrame.startedThreads.some(%0D%0A%20%20%20%20%20%20%20%20%20%20(thread)%20%3D%3E%20runtime.threads.indexOf(thread)%20!%3D%3D%20-1%0D%0A%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%20%20if%20(waiting)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20util.stackFrame.startedThreads.every((thread)%20%3D%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20runtime.isWaitingThread(thread)%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%0D%0A%20%20%20%20%20%20%20%20%20%20)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20util.yieldTick()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20util.yield()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20receivedData(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20received%20%3D%20util.thread.receivedData%3B%0D%0A%20%20%20%20%20%20return%20received%20%3F%20received%20%3A%20%22%22%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20_getTargetFromMenu(targetName)%20%7B%0D%0A%20%20%20%20%20%20let%20target%20%3D%20Scratch.vm.runtime.getSpriteTargetByName(targetName)%3B%0D%0A%20%20%20%20%20%20if%20(targetName%20%3D%3D%3D%20%22_stage_%22)%20target%20%3D%20runtime.getTargetForStage()%3B%0D%0A%20%20%20%20%20%20return%20target%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20_getTargets()%20%7B%0D%0A%20%20%20%20%20%20const%20spriteNames%20%3D%20%5B%7B%20text%3A%20%22Stage%22%2C%20value%3A%20%22_stage_%22%20%7D%5D%3B%0D%0A%20%20%20%20%20%20const%20targets%20%3D%20Scratch.vm.runtime.targets%3B%0D%0A%20%20%20%20%20%20for%20(let%20index%20%3D%201%3B%20index%20%3C%20targets.length%3B%20index%2B%2B)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20targets%5Bindex%5D%3B%0D%0A%20%20%20%20%20%20%20%20if%20(target.isOriginal)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20targetName%20%3D%20target.getName()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20spriteNames.push(%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20targetName%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20targetName%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20if%20(spriteNames.length%20%3E%200)%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20spriteNames%3B%0D%0A%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20%5B%7B%20text%3A%20%22%22%2C%20value%3A%200%20%7D%5D%3B%20%2F%2Fthis%20should%20never%20happen%20but%20it's%20a%20failsafe%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%0D%0A%0D%0A%20%20Scratch.extensions.register(new%20MoreEvents())%3B%0D%0A%7D)(Scratch)%3B%0D%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Camera%20V2%0A%2F%2F%20ID%3A%20SPcamera%0A%2F%2F%20Description%3A%20Move%20the%20visible%20part%20of%20the%20stage.%0A%2F%2F%20By%3A%20SharkPool%0A%2F%2F%20License%3A%20MIT%0A%0A%2F%2F%20Version%20V.1.0.11%0A%0A%2F*%20generated%20l10n%20code%20*%2FScratch.translate.setup(%7B%22ca%22%3A%7B%22_Stage%22%3A%22Escenari%22%7D%2C%22de%22%3A%7B%22_Camera%20V2%22%3A%22Kamera%20V2%22%2C%22_Stage%22%3A%22B%C3%BChne%22%7D%2C%22es%22%3A%7B%22_Stage%22%3A%22Escenario%22%2C%22_default%22%3A%22por%20defecto%22%7D%2C%22fi%22%3A%7B%22_Add%20Camera%22%3A%22Lis%C3%A4%C3%A4%20kamera%22%2C%22_Camera%20Controls%22%3A%22Kameroiden%20ohjaus%22%2C%22_Camera%20Manager%22%3A%22Kameroiden%20hallinta%22%2C%22_Camera%20V2%22%3A%22Kamera%20V2%22%2C%22_New%20Camera%20name%3A%22%3A%22Uuden%20kameran%20nimi%3A%22%2C%22_Remove%20Camera%22%3A%22Poista%20kamera%22%2C%22_Remove%20Camera%20named%3A%22%3A%22Poistettavan%20kameran%20nimi%3A%22%2C%22_Stage%22%3A%22Esiintymislava%22%2C%22_Utility%22%3A%22Ty%C3%B6kalut%22%2C%22_%5BCAMERA%5D%20camera%20direction%22%3A%22kameran%20%5BCAMERA%5D%20suunta%22%2C%22_%5BCAMERA%5D%20camera%20x%22%3A%22kameran%20%5BCAMERA%5D%20x-sijainti%22%2C%22_%5BCAMERA%5D%20camera%20y%22%3A%22kameran%20%5BCAMERA%5D%20y-sijainti%22%2C%22_%5BCAMERA%5D%20camera%20zoom%22%3A%22kameran%20%5BCAMERA%5D%20suurennus%22%2C%22_all%20objects%22%3A%22kaikki%20kohteet%22%2C%22_background%20color%22%3A%22taustav%C3%A4ri%22%2C%22_bind%22%3A%22kiinnit%C3%A4%22%2C%22_bind%20%5BTARGET%5D%20to%20camera%20%5BCAMERA%5D%22%3A%22kiinnit%C3%A4%20%5BTARGET%5D%20kameraan%20%5BCAMERA%5D%22%2C%22_camera%20of%20%5BTARGET%5D%22%3A%22kohteen%20%5BTARGET%5D%20kamera%22%2C%22_change%20%5BCAMERA%5D%20camera%20x%20by%20%5BNUM%5D%22%3A%22lis%C3%A4%C3%A4%20kameran%20%5BCAMERA%5D%20x%3An%20arvoon%20%5BNUM%5D%22%2C%22_change%20%5BCAMERA%5D%20camera%20y%20by%20%5BNUM%5D%22%3A%22lis%C3%A4%C3%A4%20kameran%20%5BCAMERA%5D%20y%3An%20arvoon%20%5BNUM%5D%22%2C%22_change%20%5BCAMERA%5D%20camera%20zoom%20by%20%5BNUM%5D%22%3A%22l%C3%A4henn%C3%A4%20kameraa%20%5BCAMERA%5D%20arvolla%20%5BNUM%5D%22%2C%22_default%22%3A%22oletus%22%2C%22_mouse%20x%20in%20camera%20%5BCAMERA%5D%22%3A%22hiiren%20x-sijainti%20kamerassa%20%5BCAMERA%5D%22%2C%22_mouse%20y%20in%20camera%20%5BCAMERA%5D%22%3A%22hiiren%20y-sijainti%20kamerassa%20%5BCAMERA%5D%22%2C%22_move%20%5BCAMERA%5D%20camera%20%5BNUM%5D%20steps%22%3A%22liikuta%20kameraa%20%5BCAMERA%5D%20%5BNUM%5D%20askelta%22%2C%22_move%20%5BCAMERA%5D%20camera%20to%20%5BTARGET%5D%22%3A%22siirr%C3%A4%20kamera%20%5BCAMERA%5D%20kohteeseen%20%5BTARGET%5D%22%2C%22_myself%22%3A%22min%C3%A4%20itse%22%2C%22_pen%20layer%22%3A%22kyn%C3%A4taso%22%2C%22_point%20%5BCAMERA%5D%20camera%20towards%20%5BTARGET%5D%22%3A%22kohdista%20kamera%20%5BCAMERA%5D%20kohteen%20%5BTARGET%5D%20suuntaan%22%2C%22_rendered%20x%20position%20of%20%5BTARGET%5D%22%3A%22kohteen%20%5BTARGET%5D%20render%C3%B6ity%20x-sijainti%22%2C%22_rendered%20y%20position%20of%20%5BTARGET%5D%22%3A%22kohteen%20%5BTARGET%5D%20render%C3%B6ity%20y-sijainti%22%2C%22_set%20%5BCAMERA%5D%20camera%20direction%20to%20%5BNUM%5D%22%3A%22kohdista%20kamera%20%5BCAMERA%5D%20suuntaan%20%5BNUM%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%3A%22siirr%C3%A4%20kamera%20%5BCAMERA%5D%20sijaintiin%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20x%20to%20%5BNUM%5D%22%3A%22aseta%20kameran%20%5BCAMERA%5D%20x%3An%20arvoksi%20%5BNUM%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20y%20to%20%5BNUM%5D%22%3A%22aseta%20kameran%20%5BCAMERA%5D%20y%3An%20arvoksi%20%5BNUM%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20zoom%20to%20%5BNUM%5D%25%22%3A%22aseta%20kameran%20%5BCAMERA%5D%20suurennukseksi%20%5BNUM%5D%20%25%22%2C%22_set%20background%20color%20to%20%5BCOLOR%5D%22%3A%22aseta%20taustav%C3%A4riksi%20%5BCOLOR%5D%22%2C%22_turn%20%5BCAMERA%5D%20camera%20%5BIMG%5D%20%5BNUM%5D%20degrees%22%3A%22k%C3%A4%C3%A4nn%C3%A4%20kameraa%20%5BCAMERA%5D%20%5BIMG%5D%20%5BNUM%5D%20astetta%22%2C%22_unbind%22%3A%22irrota%22%2C%22_unbind%20%5BTARGET%5D%20from%20camera%20%5BCAMERA%5D%22%3A%22irrota%20%5BTARGET%5D%20kamerasta%20%5BCAMERA%5D%22%2C%22_video%20layer%22%3A%22videotaso%22%7D%2C%22fr%22%3A%7B%22_Stage%22%3A%22Sc%C3%A8ne%22%7D%2C%22hu%22%3A%7B%22_Add%20Camera%22%3A%22Kamera%20hozz%C3%A1ad%C3%A1sa%22%2C%22_Camera%20Controls%22%3A%22Kameravez%C3%A9rl%C5%91k%22%2C%22_Camera%20Manager%22%3A%22Kamerakezel%C5%91%22%2C%22_Camera%20V2%22%3A%22Kamera%20V2%22%2C%22_New%20Camera%20name%3A%22%3A%22%C3%9Aj%20kamera%20neve%3A%22%2C%22_Remove%20Camera%22%3A%22Kamera%20elt%C3%A1vol%C3%ADt%C3%A1sa%22%2C%22_Remove%20Camera%20named%3A%22%3A%22Elt%C3%A1vol%C3%ADtand%C3%B3%20kamera%20neve%3A%22%2C%22_Stage%22%3A%22Sz%C3%ADnpad%22%2C%22_Utility%22%3A%22Eszk%C3%B6z%C3%B6k%22%2C%22_%5BCAMERA%5D%20camera%20direction%22%3A%22%5BCAMERA%5D%20kamera%20ir%C3%A1nya%22%2C%22_%5BCAMERA%5D%20camera%20x%22%3A%22%5BCAMERA%5D%20kamera%20x-je%22%2C%22_%5BCAMERA%5D%20camera%20y%22%3A%22%5BCAMERA%5D%20kamera%20y-ja%22%2C%22_%5BCAMERA%5D%20camera%20zoom%22%3A%22%5BCAMERA%5D%20kamera%20nagy%C3%ADt%C3%A1sa%20legyen%22%2C%22_all%20objects%22%3A%22%C3%B6sszes%20objektum%22%2C%22_background%20color%22%3A%22h%C3%A1tt%C3%A9rsz%C3%ADn%22%2C%22_bind%22%3A%22csatol%C3%A1sa%22%2C%22_bind%20%5BTARGET%5D%20to%20camera%20%5BCAMERA%5D%22%3A%22%5BTARGET%5D%20csatol%C3%A1sa%20%5BCAMERA%5D%20kamer%C3%A1hoz%22%2C%22_camera%20of%20%5BTARGET%5D%22%3A%22%5BTARGET%5D%20kamer%C3%A1ja%22%2C%22_change%20%5BCAMERA%5D%20camera%20x%20by%20%5BNUM%5D%22%3A%22%5BCAMERA%5D%20kamera%20x-je%20v%C3%A1ltozzon%20%5BNUM%5D%22%2C%22_change%20%5BCAMERA%5D%20camera%20y%20by%20%5BNUM%5D%22%3A%22%5BCAMERA%5D%20kamera%20y-ja%20v%C3%A1ltozzon%20%5BNUM%5D%22%2C%22_change%20%5BCAMERA%5D%20camera%20zoom%20by%20%5BNUM%5D%22%3A%22%5BCAMERA%5D%20kamera%20nagy%C3%ADt%C3%A1sa%20v%C3%A1ltozzon%20%5BNUM%5D%25%22%2C%22_mouse%20x%20in%20camera%20%5BCAMERA%5D%22%3A%22%C3%A9ger%20x%20%5BCAMERA%5D%20kamer%C3%A1ban%22%2C%22_mouse%20y%20in%20camera%20%5BCAMERA%5D%22%3A%22%C3%A9ger%20y%20%5BCAMERA%5D%20kamer%C3%A1ban%22%2C%22_move%20%5BCAMERA%5D%20camera%20%5BNUM%5D%20steps%22%3A%22%5BCAMERA%5D%20kamera%20menjen%20%5BNUM%5D%20l%C3%A9p%C3%A9st%22%2C%22_move%20%5BCAMERA%5D%20camera%20to%20%5BTARGET%5D%22%3A%22%5BCAMERA%5D%20kamera%20ugorjon%20%5BTARGET%5D%20hely%C3%A9re%22%2C%22_myself%22%3A%22magad%22%2C%22_pen%20layer%22%3A%22toll%20r%C3%A9tege%22%2C%22_point%20%5BCAMERA%5D%20camera%20towards%20%5BTARGET%5D%22%3A%22%5BCAMERA%5D%20mutat%C3%A1sa%20%5BTARGET%5D%20fel%C3%A9%22%2C%22_set%20%5BCAMERA%5D%20camera%20direction%20to%20%5BNUM%5D%22%3A%22%5BCAMERA%5D%20kamera%20ir%C3%A1nya%20legyen%20%5BNUM%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%3A%22%5BCAMERA%5D%20kamera%20ugorjon%20ide%3A%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20x%20to%20%5BNUM%5D%22%3A%22%5BCAMERA%5D%20kamera%20x-je%20legyen%20%5BNUM%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20y%20to%20%5BNUM%5D%22%3A%22%5BCAMERA%5D%20kamera%20y-ja%20legyen%20%5BNUM%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20zoom%20to%20%5BNUM%5D%25%22%3A%22%5BCAMERA%5D%20kamera%20nagy%C3%ADt%C3%A1sa%20legyen%20%5BNUM%5D%25%22%2C%22_set%20background%20color%20to%20%5BCOLOR%5D%22%3A%22h%C3%A1tt%C3%A9rsz%C3%ADn%20legyen%20%5BCOLOR%5D%22%2C%22_turn%20%5BCAMERA%5D%20camera%20%5BIMG%5D%20%5BNUM%5D%20degrees%22%3A%22%5BCAMERA%5D%20kamera%20forduljon%20%5BIMG%5D%20%5BNUM%5D%20fokot%22%2C%22_unbind%22%3A%22elszak%C3%ADt%C3%A1sa%22%2C%22_unbind%20%5BTARGET%5D%20from%20camera%20%5BCAMERA%5D%22%3A%22%5BTARGET%5D%20elszak%C3%ADt%C3%A1sa%20%5BCAMERA%5D%20kamer%C3%A1t%C3%B3l%22%2C%22_video%20layer%22%3A%22vide%C3%B3%20r%C3%A9tege%22%7D%2C%22it%22%3A%7B%22_Add%20Camera%22%3A%22Aggiungi%20Camera%22%2C%22_Camera%20Controls%22%3A%22Controlli%20Camera%22%2C%22_Camera%20Manager%22%3A%22Gestione%20Camera%22%2C%22_New%20Camera%20name%3A%22%3A%22Nome%20Nuova%20Camera%3A%22%2C%22_Remove%20Camera%22%3A%22Rimuovi%20Camera%22%2C%22_Remove%20Camera%20named%3A%22%3A%22Rimuovi%20Camera%3A%22%2C%22_Utility%22%3A%22Utilit%C3%A0%22%2C%22_%5BCAMERA%5D%20camera%20direction%22%3A%22direzione%20camera%20%5BCAMERA%5D%22%2C%22_%5BCAMERA%5D%20camera%20x%22%3A%22x%20di%20camera%20%5BCAMERA%5D%22%2C%22_%5BCAMERA%5D%20camera%20y%22%3A%22y%20di%20camera%20%5BCAMERA%5D%22%2C%22_%5BCAMERA%5D%20camera%20zoom%22%3A%22zoom%20di%20camera%20%5BCAMERA%5D%22%2C%22_all%20objects%22%3A%22tutti%20gli%20oggetti%22%2C%22_background%20color%22%3A%22colore%20di%20sfondo%22%2C%22_bind%22%3A%22lega%22%2C%22_bind%20%5BTARGET%5D%20to%20camera%20%5BCAMERA%5D%22%3A%22lega%20%5BTARGET%5D%20a%20camera%20%5BCAMERA%5D%22%2C%22_camera%20of%20%5BTARGET%5D%22%3A%22camera%20di%20%5BTARGET%5D%22%2C%22_change%20%5BCAMERA%5D%20camera%20x%20by%20%5BNUM%5D%22%3A%22cambia%20x%20di%20camera%20%5BCAMERA%5D%20di%20%5BNUM%5D%22%2C%22_change%20%5BCAMERA%5D%20camera%20y%20by%20%5BNUM%5D%22%3A%22cambia%20y%20di%20camera%20%5BCAMERA%5D%20di%20%5BNUM%5D%22%2C%22_change%20%5BCAMERA%5D%20camera%20zoom%20by%20%5BNUM%5D%22%3A%22cambia%20zoom%20di%20%5BCAMERA%5D%20di%20%5BNUM%5D%22%2C%22_default%22%3A%22predefinito%22%2C%22_mouse%20x%20in%20camera%20%5BCAMERA%5D%22%3A%22x%20del%20mouse%20per%20camera%20%5BCAMERA%5D%22%2C%22_mouse%20y%20in%20camera%20%5BCAMERA%5D%22%3A%22y%20del%20mouse%20per%20camera%20%5BCAMERA%5D%22%2C%22_move%20%5BCAMERA%5D%20camera%20%5BNUM%5D%20steps%22%3A%22sposta%20camera%20%5BCAMERA%5D%20di%20%5BNUM%5D%20passi%22%2C%22_move%20%5BCAMERA%5D%20camera%20to%20%5BTARGET%5D%22%3A%22sposta%20camera%20%5BCAMERA%5D%20su%20%5BTARGET%5D%22%2C%22_myself%22%3A%22me%20stesso%22%2C%22_pen%20layer%22%3A%22livello%20penna%22%2C%22_point%20%5BCAMERA%5D%20camera%20towards%20%5BTARGET%5D%22%3A%22punta%20camera%20%5BCAMERA%5D%20verso%20%5BTARGET%5D%22%2C%22_rendered%20x%20position%20of%20%5BTARGET%5D%22%3A%22posizione%20x%20mostrata%20di%20%5BTARGET%5D%22%2C%22_rendered%20y%20position%20of%20%5BTARGET%5D%22%3A%22posizione%20y%20mostrata%20di%20%5BTARGET%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20direction%20to%20%5BNUM%5D%22%3A%22porta%20direzione%20camera%20%5BCAMERA%5D%20a%20%5BNUM%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%3A%22muovi%20camera%20%5BCAMERA%5D%20a%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20x%20to%20%5BNUM%5D%22%3A%22muovi%20camera%20%5BCAMERA%5D%20dove%20x%20%C3%A8%20%5BNUM%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20y%20to%20%5BNUM%5D%22%3A%22muovi%20camera%20%5BCAMERA%5D%20dove%20y%20%C3%A8%20%5BNUM%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20zoom%20to%20%5BNUM%5D%25%22%3A%22porta%20zoom%20di%20camera%20%5BCAMERA%5D%20a%20%5BNUM%5D%25%22%2C%22_set%20background%20color%20to%20%5BCOLOR%5D%22%3A%22porta%20colore%20sfondo%20a%20%5BCOLOR%5D%22%2C%22_turn%20%5BCAMERA%5D%20camera%20%5BIMG%5D%20%5BNUM%5D%20degrees%22%3A%22ruota%20%5BIMG%5D%20camera%20%5BCAMERA%5D%20di%20%5BNUM%5D%20gradi%22%2C%22_unbind%22%3A%22slega%22%2C%22_unbind%20%5BTARGET%5D%20from%20camera%20%5BCAMERA%5D%22%3A%22slega%20%5BTARGET%5D%20da%20camera%20%5BCAMERA%5D%22%2C%22_video%20layer%22%3A%22livello%20video%22%7D%2C%22ja%22%3A%7B%22_Add%20Camera%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B%22%2C%22_Camera%20Controls%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%E5%88%B6%E5%BE%A1%22%2C%22_Camera%20Manager%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%E3%83%9E%E3%83%8D%E3%83%BC%E3%82%B8%E3%83%A3%E3%83%BC%22%2C%22_Camera%20V2%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%20V2%22%2C%22_New%20Camera%20name%3A%22%3A%22%E6%96%B0%E3%81%97%E3%81%84%E3%82%AB%E3%83%A1%E3%83%A9%E3%81%AE%E5%90%8D%E5%89%8D%3A%22%2C%22_Remove%20Camera%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%E3%82%92%E6%B6%88%E3%81%99%22%2C%22_Remove%20Camera%20named%3A%22%3A%22%E3%81%93%E3%81%AE%E5%90%8D%E5%89%8D%E3%81%AE%E3%82%AB%E3%83%A1%E3%83%A9%E3%82%92%E6%B6%88%E3%81%99%3A%22%2C%22_Stage%22%3A%22%E3%82%B9%E3%83%86%E3%83%BC%E3%82%B8%22%2C%22_Utility%22%3A%22%E3%83%A6%E3%83%BC%E3%83%86%E3%82%A3%E3%83%AA%E3%83%86%E3%82%A3%22%2C%22_%5BCAMERA%5D%20camera%20direction%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%5BCAMERA%5D%E3%81%AE%E5%90%91%E3%81%8D%22%2C%22_%5BCAMERA%5D%20camera%20x%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%5BCAMERA%5D%E3%81%AEx%E5%BA%A7%E6%A8%99%22%2C%22_%5BCAMERA%5D%20camera%20y%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%5BCAMERA%5D%E3%81%AEy%E5%BA%A7%E6%A8%99%22%2C%22_%5BCAMERA%5D%20camera%20zoom%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%5BCAMERA%5D%E3%81%AE%E3%82%BA%E3%83%BC%E3%83%A0%22%2C%22_all%20objects%22%3A%22%E3%81%99%E3%81%B9%E3%81%A6%E3%81%AE%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%22%2C%22_background%20color%22%3A%22%E8%83%8C%E6%99%AF%E8%89%B2%22%2C%22_bind%22%3A%22%E7%B5%90%E3%81%B3%E3%81%A4%E3%81%91%E3%82%8B%22%2C%22_bind%20%5BTARGET%5D%20to%20camera%20%5BCAMERA%5D%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%5BCAMERA%5D%E3%81%AB%5BTARGET%5D%E3%82%92%E7%B5%90%E3%81%B3%E3%81%A4%E3%81%91%E3%82%8B%22%2C%22_camera%20of%20%5BTARGET%5D%22%3A%22%5BTARGET%5D%E3%81%AE%E3%82%AB%E3%83%A1%E3%83%A9%22%2C%22_change%20%5BCAMERA%5D%20camera%20x%20by%20%5BNUM%5D%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%5BCAMERA%5D%E3%81%AEx%E5%BA%A7%E6%A8%99%E3%82%92%5BNUM%5D%E3%81%9A%E3%81%A4%E5%A4%89%E3%81%88%E3%82%8B%22%2C%22_change%20%5BCAMERA%5D%20camera%20y%20by%20%5BNUM%5D%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%5BCAMERA%5D%E3%81%AEy%E5%BA%A7%E6%A8%99%E3%82%92%5BNUM%5D%E3%81%9A%E3%81%A4%E5%A4%89%E3%81%88%E3%82%8B%22%2C%22_change%20%5BCAMERA%5D%20camera%20zoom%20by%20%5BNUM%5D%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%5BCAMERA%5D%E3%81%AE%E3%82%BA%E3%83%BC%E3%83%A0%E3%82%92%5BNUM%5D%E3%81%9A%E3%81%A4%E5%A4%89%E3%81%88%E3%82%8B%22%2C%22_default%22%3A%22%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%22%2C%22_mouse%20x%20in%20camera%20%5BCAMERA%5D%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%5BCAMERA%5D%E3%81%A7%E3%81%AE%E3%83%9E%E3%82%A6%E3%82%B9%E3%81%AEx%E5%BA%A7%E6%A8%99%22%2C%22_mouse%20y%20in%20camera%20%5BCAMERA%5D%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%5BCAMERA%5D%E3%81%A7%E3%81%AE%E3%83%9E%E3%82%A6%E3%82%B9%E3%81%AEy%E5%BA%A7%E6%A8%99%22%2C%22_move%20%5BCAMERA%5D%20camera%20%5BNUM%5D%20steps%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%5BCAMERA%5D%E3%82%92%5BNUM%5D%E6%AD%A9%E5%8B%95%E3%81%8B%E3%81%99%22%2C%22_move%20%5BCAMERA%5D%20camera%20to%20%5BTARGET%5D%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%5BCAMERA%5D%E3%82%92%5BTARGET%5D%E3%81%AB%E5%8B%95%E3%81%8B%E3%81%99%22%2C%22_myself%22%3A%22%E8%87%AA%E5%88%86%E8%87%AA%E8%BA%AB%22%2C%22_pen%20layer%22%3A%22%E3%83%9A%E3%83%B3%E3%81%AE%E3%83%AC%E3%82%A4%E3%83%A4%E3%83%BC%22%2C%22_point%20%5BCAMERA%5D%20camera%20towards%20%5BTARGET%5D%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%5BCAMERA%5D%E3%82%92%5BTARGET%5D%E3%81%AE%E6%96%B9%E5%90%91%E3%81%AB%E5%90%91%E3%81%91%E3%82%8B%22%2C%22_rendered%20x%20position%20of%20%5BTARGET%5D%22%3A%22%E6%8F%8F%E3%81%8B%E3%82%8C%E3%81%9F%5BTARGET%5D%E3%81%AEx%E5%BA%A7%E6%A8%99%22%2C%22_rendered%20y%20position%20of%20%5BTARGET%5D%22%3A%22%E6%8F%8F%E3%81%8B%E3%82%8C%E3%81%9F%5BTARGET%5D%E3%81%AEy%E5%BA%A7%E6%A8%99%22%2C%22_set%20%5BCAMERA%5D%20camera%20direction%20to%20%5BNUM%5D%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%5BCAMERA%5D%E3%82%92%5BNUM%5D%E5%BA%A6%E3%81%AB%E5%90%91%E3%81%91%E3%82%8B%22%2C%22_set%20%5BCAMERA%5D%20camera%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%5BCAMERA%5D%E3%81%AEx%E5%BA%A7%E6%A8%99%E3%82%92%5BX%5D%E3%80%81y%E5%BA%A7%E6%A8%99%E3%82%92%5BY%5D%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_set%20%5BCAMERA%5D%20camera%20x%20to%20%5BNUM%5D%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%5BCAMERA%5D%E3%81%AEx%E5%BA%A7%E6%A8%99%E3%82%92%5BNUM%5D%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_set%20%5BCAMERA%5D%20camera%20y%20to%20%5BNUM%5D%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%5BCAMERA%5D%E3%81%AEy%E5%BA%A7%E6%A8%99%E3%82%92%5BNUM%5D%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_set%20%5BCAMERA%5D%20camera%20zoom%20to%20%5BNUM%5D%25%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%5BCAMERA%5D%E3%81%AE%E3%82%BA%E3%83%BC%E3%83%A0%E3%82%92%5BNUM%5D%25%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_set%20background%20color%20to%20%5BCOLOR%5D%22%3A%22%E8%83%8C%E6%99%AF%E8%89%B2%E3%82%92%5BCOLOR%5D%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_turn%20%5BCAMERA%5D%20camera%20%5BIMG%5D%20%5BNUM%5D%20degrees%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%5BCAMERA%5D%E3%82%92%5BIMG%5D%5BNUM%5D%E5%BA%A6%E5%9B%9E%E3%81%99%22%2C%22_unbind%22%3A%22%E7%B5%90%E3%81%B3%E3%81%A4%E3%81%8D%E3%82%92%E3%81%AA%E3%81%8F%E3%81%99%22%2C%22_unbind%20%5BTARGET%5D%20from%20camera%20%5BCAMERA%5D%22%3A%22%E3%82%AB%E3%83%A1%E3%83%A9%5BCAMERA%5D%E3%81%8B%E3%82%89%5BTARGET%5D%E3%81%B8%E3%81%AE%E7%B5%90%E3%81%B3%E3%81%A4%E3%81%8D%E3%82%92%E3%81%AA%E3%81%8F%E3%81%99%22%2C%22_video%20layer%22%3A%22%E3%83%93%E3%83%87%E3%82%AA%E3%81%AE%E3%83%AC%E3%82%A4%E3%83%A4%E3%83%BC%22%7D%2C%22ja-hira%22%3A%7B%22_Stage%22%3A%22%E3%82%B9%E3%83%86%E3%83%BC%E3%82%B8%22%7D%2C%22ko%22%3A%7B%22_Camera%20V2%22%3A%22%EC%B9%B4%EB%A9%94%EB%9D%BC%20V2%22%2C%22_Stage%22%3A%22%EB%AC%B4%EB%8C%80%22%2C%22_background%20color%22%3A%22%EB%B0%B0%EA%B2%BD%EC%83%89%22%2C%22_default%22%3A%22%EA%B8%B0%EB%B3%B8%22%2C%22_myself%22%3A%22%EB%82%98%20%EC%9E%90%EC%8B%A0%22%7D%2C%22lt%22%3A%7B%22_Stage%22%3A%22Scena%22%7D%2C%22nb%22%3A%7B%22_Stage%22%3A%22Scene%22%2C%22_background%20color%22%3A%22Bakgrunnsfarge%22%7D%2C%22nl%22%3A%7B%22_Stage%22%3A%22Speelveld%22%2C%22_background%20color%22%3A%22achtergrondkleur%22%2C%22_default%22%3A%22standaard%22%2C%22_myself%22%3A%22mijzelf%22%7D%2C%22pl%22%3A%7B%22_Stage%22%3A%22Scena%22%2C%22_background%20color%22%3A%22kolor%20t%C5%82a%22%7D%2C%22pt%22%3A%7B%22_Stage%22%3A%22Palco%22%7D%2C%22pt-br%22%3A%7B%22_Stage%22%3A%22Palco%22%7D%2C%22ru%22%3A%7B%22_Add%20Camera%22%3A%22%D0%94%D0%BE%D0%B1%D0%B0%D0%B2%D0%B8%D1%82%D1%8C%20%D0%9A%D0%B0%D0%BC%D0%B5%D1%80%D1%83%22%2C%22_Camera%20Controls%22%3A%22%D0%9A%D0%BE%D0%BD%D1%82%D1%80%D0%BE%D0%BB%D1%8C%20%D0%9A%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%22%2C%22_Camera%20Manager%22%3A%22%D0%9C%D0%B5%D0%BD%D0%B5%D0%B4%D0%B6%D0%B5%D1%80%20%D0%9A%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%22%2C%22_Camera%20V2%22%3A%22%D0%9A%D0%B0%D0%BC%D0%B5%D1%80%D0%B0%20V2%22%2C%22_New%20Camera%20name%3A%22%3A%22%D0%9D%D0%BE%D0%B2%D0%BE%D0%B5%20%D0%B8%D0%BC%D1%8F%20%D0%9A%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%3A%22%2C%22_Remove%20Camera%22%3A%22%D0%A3%D0%B4%D0%B0%D0%BB%D0%B8%D1%82%D1%8C%20%D0%9A%D0%B0%D0%BC%D0%B5%D1%80%D1%83%22%2C%22_Remove%20Camera%20named%3A%22%3A%22%D0%98%D0%BC%D1%8F%20%D0%A3%D0%B4%D0%B0%D0%BB%D1%91%D0%BD%D0%BD%D0%BE%D0%B9%20%D0%9A%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%3A%22%2C%22_Stage%22%3A%22%D0%A1%D1%86%D0%B5%D0%BD%D0%B0%22%2C%22_Utility%22%3A%22%D0%A3%D1%82%D0%B8%D0%BB%D0%B8%D1%82%D0%B0%22%2C%22_%5BCAMERA%5D%20camera%20direction%22%3A%22%D0%BD%D0%B0%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%20%5BCAMERA%5D%22%2C%22_%5BCAMERA%5D%20camera%20x%22%3A%22x%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%20%5BCAMERA%5D%22%2C%22_%5BCAMERA%5D%20camera%20y%22%3A%22y%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%20%5BCAMERA%5D%22%2C%22_%5BCAMERA%5D%20camera%20zoom%22%3A%22%D0%BF%D1%80%D0%B8%D0%B1%D0%BB%D0%B8%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%20%5BCAMERA%5D%22%2C%22_all%20objects%22%3A%22%D0%B2%D1%81%D0%B5%20%D0%BE%D0%B1%D1%8A%D0%B5%D0%BA%D1%82%D1%8B%22%2C%22_background%20color%22%3A%22%D1%86%D0%B2%D0%B5%D1%82%20%D0%B7%D0%B0%D0%B4%D0%BD%D0%B5%D0%B3%D0%BE%20%D1%84%D0%BE%D0%BD%D0%B0%22%2C%22_bind%22%3A%22%D0%BF%D1%80%D0%B8%D0%B2%D1%8F%D0%B7%D0%BA%D0%B0%22%2C%22_bind%20%5BTARGET%5D%20to%20camera%20%5BCAMERA%5D%22%3A%22%D0%BF%D1%80%D0%B8%D0%B2%D1%8F%D0%B7%D0%B0%D1%82%D1%8C%20%5BTARGET%5D%20%D0%BD%D0%B0%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%83%20%5BCAMERA%5D%22%2C%22_camera%20of%20%5BTARGET%5D%22%3A%22%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D0%B0%20%5BTARGET%5D%22%2C%22_change%20%5BCAMERA%5D%20camera%20x%20by%20%5BNUM%5D%22%3A%22%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20x%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%20%5BCAMERA%5D%20%D0%BD%D0%B0%20%5BNUM%5D%22%2C%22_change%20%5BCAMERA%5D%20camera%20y%20by%20%5BNUM%5D%22%3A%22%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20y%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%20%5BCAMERA%5D%20%D0%BD%D0%B0%20%5BNUM%5D%22%2C%22_change%20%5BCAMERA%5D%20camera%20zoom%20by%20%5BNUM%5D%22%3A%22%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20%D0%BF%D1%80%D0%B8%D0%B1%D0%BB%D0%B8%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%20%5BCAMERA%5D%20%D0%BD%D0%B0%20%5BNUM%5D%22%2C%22_default%22%3A%22%D0%BF%D0%BE%20%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E%22%2C%22_mouse%20x%20in%20camera%20%5BCAMERA%5D%22%3A%22x%20%D0%BA%D1%83%D1%80%D1%81%D0%BE%D1%80%D0%B0%20%D0%BC%D1%8B%D1%88%D0%B8%20%D0%B2%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D0%B5%20%5BCAMERA%5D%22%2C%22_mouse%20y%20in%20camera%20%5BCAMERA%5D%22%3A%22y%20%D0%BA%D1%83%D1%80%D1%81%D0%BE%D1%80%D0%B0%20%D0%BC%D1%8B%D1%88%D0%B8%20%D0%B2%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D0%B5%20%5BCAMERA%5D%22%2C%22_move%20%5BCAMERA%5D%20camera%20%5BNUM%5D%20steps%22%3A%22%D0%B8%D0%B4%D1%82%D0%B8%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D0%BE%D0%B9%20%5BCAMERA%5D%20%D0%BD%D0%B0%20%5BNUM%5D%20%D1%88%D0%B0%D0%B3%D0%BE%D0%B2%22%2C%22_move%20%5BCAMERA%5D%20camera%20to%20%5BTARGET%5D%22%3A%22%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D1%81%D1%82%D0%B8%D1%82%D1%8C%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%83%20%5BCAMERA%5D%20%D0%BD%D0%B0%20%5BTARGET%5D%22%2C%22_myself%22%3A%22%D1%81%D0%B0%D0%BC%D0%BE%D0%B3%D0%BE%20%D1%81%D0%B5%D0%B1%D1%8F%22%2C%22_pen%20layer%22%3A%22%D1%81%D0%BB%D0%BE%D0%B9%20%D1%80%D1%83%D1%87%D0%BA%D0%B8%22%2C%22_point%20%5BCAMERA%5D%20camera%20towards%20%5BTARGET%5D%22%3A%22%D1%83%D0%BA%D0%B0%D0%B7%D0%B0%D1%82%D1%8C%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%83%20%5BCAMERA%5D%20%D0%BD%D0%B0%20%5BTARGET%5D%22%2C%22_rendered%20x%20position%20of%20%5BTARGET%5D%22%3A%22%D0%B2%D0%B8%D0%B7%D1%83%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D0%B0%D1%8F%20%D0%BF%D0%BE%D0%B7%D0%B8%D1%86%D0%B8%D1%8F%20x%20%D0%B8%D0%B7%20%5BTARGET%5D%22%2C%22_rendered%20y%20position%20of%20%5BTARGET%5D%22%3A%22%D0%B2%D0%B8%D0%B7%D1%83%D0%B0%D0%BB%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D0%B0%D1%8F%20%D0%BF%D0%BE%D0%B7%D0%B8%D1%86%D0%B8%D1%8F%20y%20%D0%B8%D0%B7%20%5BTARGET%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20direction%20to%20%5BNUM%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D0%BD%D0%B0%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%20%5BCAMERA%5D%20%D0%BD%D0%B0%20%5BNUM%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%83%20%5BCAMERA%5D%20%D0%BD%D0%B0%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20x%20to%20%5BNUM%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20x%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%20%5BCAMERA%5D%20%D0%BD%D0%B0%20%5BNUM%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20y%20to%20%5BNUM%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20y%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%20%5BCAMERA%5D%20%D0%BD%D0%B0%20%5BNUM%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20zoom%20to%20%5BNUM%5D%25%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D0%BF%D1%80%D0%B8%D0%B1%D0%BB%D0%B8%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%20%5BCAMERA%5D%20%D0%BD%D0%B0%20%5BNUM%5D%25%22%2C%22_set%20background%20color%20to%20%5BCOLOR%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%86%D0%B2%D0%B5%D1%82%20%D0%B7%D0%B0%D0%B4%D0%BD%D0%B5%D0%B3%D0%BE%20%D1%84%D0%BE%D0%BD%D0%B0%20%D0%BD%D0%B0%20%5BCOLOR%5D%22%2C%22_turn%20%5BCAMERA%5D%20camera%20%5BIMG%5D%20%5BNUM%5D%20degrees%22%3A%22%D0%BF%D0%BE%D0%B2%D0%B5%D1%80%D0%BD%D1%83%D1%82%D1%8C%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%83%20%5BCAMERA%5D%20%5BIMG%5D%20%D0%BD%D0%B0%20%5BNUM%5D%20%D0%B3%D1%80%D0%B0%D0%B4%D1%83%D1%81%D0%BE%D0%B2%22%2C%22_unbind%22%3A%22%D0%BE%D1%82%D0%B2%D1%8F%D0%B7%D0%B0%D1%82%D1%8C%22%2C%22_unbind%20%5BTARGET%5D%20from%20camera%20%5BCAMERA%5D%22%3A%22%D0%BE%D1%82%D0%B2%D1%8F%D0%B7%D0%B0%D1%82%D1%8C%20%5BTARGET%5D%20%D1%81%20%D0%BA%D0%B0%D0%BC%D0%B5%D1%80%D1%8B%20%5BCAMERA%5D%22%2C%22_video%20layer%22%3A%22%D1%81%D0%BB%D0%BE%D0%B9%20%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE%22%7D%2C%22sl%22%3A%7B%22_Stage%22%3A%22Oder%22%7D%2C%22sv%22%3A%7B%22_Stage%22%3A%22Scen%22%7D%2C%22tr%22%3A%7B%22_Stage%22%3A%22Sahne%22%7D%2C%22uk%22%3A%7B%22_Stage%22%3A%22%D0%A1%D1%86%D0%B5%D0%BD%D0%B0%22%7D%2C%22zh-cn%22%3A%7B%22_Add%20Camera%22%3A%22%E6%B7%BB%E5%8A%A0%E6%91%84%E5%83%8F%E6%9C%BA%22%2C%22_Camera%20Controls%22%3A%22%E6%91%84%E5%83%8F%E6%9C%BA%E6%8E%A7%E5%88%B6%22%2C%22_Camera%20Manager%22%3A%22%E6%91%84%E5%83%8F%E6%9C%BA%E7%AE%A1%E7%90%86%E5%99%A8%22%2C%22_Camera%20V2%22%3A%22%E6%91%84%E5%83%8F%E6%9C%BA%20V2%22%2C%22_New%20Camera%20name%3A%22%3A%22%E6%96%B0%E6%91%84%E5%83%8F%E6%9C%BA%E5%90%8D%E7%A7%B0%EF%BC%9A%22%2C%22_Remove%20Camera%22%3A%22%E7%A7%BB%E9%99%A4%E6%91%84%E5%83%8F%E6%9C%BA%22%2C%22_Remove%20Camera%20named%3A%22%3A%22%E8%A6%81%E7%A7%BB%E9%99%A4%E7%9A%84%E6%91%84%E5%83%8F%E6%9C%BA%E5%90%8D%E7%A7%B0%EF%BC%9A%22%2C%22_Stage%22%3A%22%E8%88%9E%E5%8F%B0%22%2C%22_Utility%22%3A%22%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7%22%2C%22_%5BCAMERA%5D%20camera%20direction%22%3A%22%5BCAMERA%5D%E6%91%84%E5%83%8F%E6%9C%BA%E6%96%B9%E5%90%91%22%2C%22_%5BCAMERA%5D%20camera%20x%22%3A%22%5BCAMERA%5D%E6%91%84%E5%83%8F%E6%9C%BA%E7%9A%84x%E5%9D%90%E6%A0%87%22%2C%22_%5BCAMERA%5D%20camera%20y%22%3A%22%5BCAMERA%5D%E6%91%84%E5%83%8F%E6%9C%BA%E7%9A%84y%E5%9D%90%E6%A0%87%22%2C%22_%5BCAMERA%5D%20camera%20zoom%22%3A%22%5BCAMERA%5D%E6%91%84%E5%83%8F%E6%9C%BA%E5%8F%98%E7%84%A6%22%2C%22_all%20objects%22%3A%22%E6%89%80%E6%9C%89%E5%AF%B9%E8%B1%A1%22%2C%22_background%20color%22%3A%22%E8%83%8C%E6%99%AF%E9%A2%9C%E8%89%B2%22%2C%22_bind%22%3A%22%E7%BB%91%E5%AE%9A%22%2C%22_bind%20%5BTARGET%5D%20to%20camera%20%5BCAMERA%5D%22%3A%22%E5%B0%86%5BTARGET%5D%E7%BB%91%E5%AE%9A%E5%88%B0%E6%91%84%E5%83%8F%E6%9C%BA%5BCAMERA%5D%22%2C%22_camera%20of%20%5BTARGET%5D%22%3A%22%5BTARGET%5D%E7%9A%84%E6%91%84%E5%83%8F%E6%9C%BA%22%2C%22_change%20%5BCAMERA%5D%20camera%20x%20by%20%5BNUM%5D%22%3A%22%E5%B0%86%5BCAMERA%5D%E6%91%84%E5%83%8F%E6%9C%BA%E7%9A%84x%E5%9D%90%E6%A0%87%E5%A2%9E%E5%8A%A0%5BNUM%5D%22%2C%22_change%20%5BCAMERA%5D%20camera%20y%20by%20%5BNUM%5D%22%3A%22%E5%B0%86%5BCAMERA%5D%E6%91%84%E5%83%8F%E6%9C%BA%E7%9A%84y%E5%9D%90%E6%A0%87%E5%A2%9E%E5%8A%A0%5BNUM%5D%22%2C%22_change%20%5BCAMERA%5D%20camera%20zoom%20by%20%5BNUM%5D%22%3A%22%E5%B0%86%5BCAMERA%5D%E6%91%84%E5%83%8F%E6%9C%BA%E7%9A%84%E5%8F%98%E7%84%A6%E5%A2%9E%E5%8A%A0%5BNUM%5D%22%2C%22_default%22%3A%22%E9%BB%98%E8%AE%A4%22%2C%22_mouse%20x%20in%20camera%20%5BCAMERA%5D%22%3A%22%E6%91%84%E5%83%8F%E6%9C%BA%5BCAMERA%5D%E4%B8%AD%E7%9A%84%E9%BC%A0%E6%A0%87x%22%2C%22_mouse%20y%20in%20camera%20%5BCAMERA%5D%22%3A%22%E6%91%84%E5%83%8F%E6%9C%BA%5BCAMERA%5D%E4%B8%AD%E7%9A%84%E9%BC%A0%E6%A0%87y%22%2C%22_move%20%5BCAMERA%5D%20camera%20%5BNUM%5D%20steps%22%3A%22%E7%A7%BB%E5%8A%A8%5BCAMERA%5D%E6%91%84%E5%83%8F%E6%9C%BA%5BNUM%5D%E6%AD%A5%22%2C%22_move%20%5BCAMERA%5D%20camera%20to%20%5BTARGET%5D%22%3A%22%E5%B0%86%5BCAMERA%5D%E6%91%84%E5%83%8F%E6%9C%BA%E7%A7%BB%E5%88%B0%5BTARGET%5D%22%2C%22_myself%22%3A%22%E8%87%AA%E5%B7%B1%22%2C%22_pen%20layer%22%3A%22%E7%94%BB%E7%AC%94%E5%9B%BE%E5%B1%82%22%2C%22_point%20%5BCAMERA%5D%20camera%20towards%20%5BTARGET%5D%22%3A%22%E5%B0%86%5BCAMERA%5D%E6%91%84%E5%83%8F%E6%9C%BA%E5%AF%B9%E5%87%86%5BTARGET%5D%22%2C%22_rendered%20x%20position%20of%20%5BTARGET%5D%22%3A%22%5BTARGET%5D%E7%9A%84%E6%B8%B2%E6%9F%93x%E5%9D%90%E6%A0%87%22%2C%22_rendered%20y%20position%20of%20%5BTARGET%5D%22%3A%22%5BTARGET%5D%E7%9A%84%E6%B8%B2%E6%9F%93y%E5%9D%90%E6%A0%87%22%2C%22_set%20%5BCAMERA%5D%20camera%20direction%20to%20%5BNUM%5D%22%3A%22%E5%B0%86%5BCAMERA%5D%E6%91%84%E5%83%8F%E6%9C%BA%E7%9A%84%E6%96%B9%E5%90%91%E8%AE%BE%E4%B8%BA%5BNUM%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22%3A%22%E5%B0%86%5BCAMERA%5D%E6%91%84%E5%83%8F%E6%9C%BA%E7%A7%BB%E5%88%B0%20x%EF%BC%9A%5BX%5Dy%EF%BC%9A%5BY%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20x%20to%20%5BNUM%5D%22%3A%22%E5%B0%86%5BCAMERA%5D%E6%91%84%E5%83%8F%E6%9C%BA%E7%9A%84x%E5%9D%90%E6%A0%87%E8%AE%BE%E4%B8%BA%5BNUM%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20y%20to%20%5BNUM%5D%22%3A%22%E5%B0%86%5BCAMERA%5D%E6%91%84%E5%83%8F%E6%9C%BA%E7%9A%84y%E5%9D%90%E6%A0%87%E8%AE%BE%E4%B8%BA%5BNUM%5D%22%2C%22_set%20%5BCAMERA%5D%20camera%20zoom%20to%20%5BNUM%5D%25%22%3A%22%E5%B0%86%5BCAMERA%5D%E6%91%84%E5%83%8F%E6%9C%BA%E7%9A%84%E5%8F%98%E7%84%A6%E8%AE%BE%E4%B8%BA%5BNUM%5D%25%22%2C%22_set%20background%20color%20to%20%5BCOLOR%5D%22%3A%22%E5%B0%86%E8%83%8C%E6%99%AF%E9%A2%9C%E8%89%B2%E8%AE%BE%E4%B8%BA%5BCOLOR%5D%22%2C%22_turn%20%5BCAMERA%5D%20camera%20%5BIMG%5D%20%5BNUM%5D%20degrees%22%3A%22%E5%B0%86%5BCAMERA%5D%E6%91%84%E5%83%8F%E6%9C%BA%E6%97%8B%E8%BD%AC%5BIMG%5D%5BNUM%5D%E5%BA%A6%22%2C%22_unbind%22%3A%22%E8%A7%A3%E9%99%A4%E7%BB%91%E5%AE%9A%22%2C%22_unbind%20%5BTARGET%5D%20from%20camera%20%5BCAMERA%5D%22%3A%22%E5%B0%86%5BTARGET%5D%E4%BB%8E%E6%91%84%E5%83%8F%E6%9C%BA%5BCAMERA%5D%E8%A7%A3%E7%BB%91%22%2C%22_video%20layer%22%3A%22%E8%A7%86%E9%A2%91%E5%9B%BE%E5%B1%82%22%7D%7D)%3B%2F*%20end%20generated%20l10n%20code%20*%2F(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20if%20(!Scratch.extensions.unsandboxed)%0A%20%20%20%20throw%20new%20Error(%22Camera%20must%20run%20unsandboxed!%22)%3B%0A%0A%20%20const%20menuIconURI%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MSIgaGVpZ2h0PSI0MSIgdmlld0JveD0iMCAwIDQxIDQxIj48ZyBzdHJva2Utd2lkdGg9IjAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCI%2BPHBhdGggZD0iTTAgMjAuNUMwIDkuMTc4IDkuMTc4IDAgMjAuNSAwUzQxIDkuMTc4IDQxIDIwLjUgMzEuODIyIDQxIDIwLjUgNDEgMCAzMS44MjIgMCAyMC41IiBmaWxsPSIjMjg1MWM5Ii8%2BPHBhdGggZD0iTTIuMzc4IDIwLjVjMC0xMC4wMDkgOC4xMTMtMTguMTIyIDE4LjEyMi0xOC4xMjJTMzguNjIyIDEwLjQ5MSAzOC42MjIgMjAuNSAzMC41MDkgMzguNjIyIDIwLjUgMzguNjIyIDIuMzc4IDMwLjUwOSAyLjM3OCAyMC41IiBmaWxsPSIjNTE3YWY1Ii8%2BPHBhdGggZD0iTTMxLjg3MSAxNS4wMDdjLjA3My4xNDkuMTI5LjI4LjEyOS4yNDN2MTAuM2MwIC4yODMtLjIzMy41LS41LjVhLjMuMyAwIDAgMS0uMTQ2LS4wNTRsLS4wOTctLjA3NUwyNSAyMi4xNjd2Mi4yODNjMCAxLjk0Ny0xLjU5OCAzLjYtMy41IDMuNmgtOC45Yy0yLjAxNS0uMDg4LTMuNi0xLjY3My0zLjYtMy42di03LjljMC0yLjAyNCAxLjU3Ni0zLjYgMy42LTMuNmg4LjljMS45MzcgMCAzLjUgMS41OSAzLjUgMy42djIuMzJsNi4xNzItNGMuMjctLjE2Mi41NTQtLjEwNS43LjEzN3oiIGZpbGw9IiNmZmYiLz48L2c%2BPC9zdmc%2B%22%3B%0A%20%20const%20rightArrow%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI%2BPHBhdGggZD0iTTIyLjY4IDEyLjJhMS42IDEuNiAwIDAgMS0xLjI3LjYzaC03LjY5YTEuNTkgMS41OSAwIDAgMS0xLjE2LTIuNThsMS4xMi0xLjQxYTQuODIgNC44MiAwIDAgMC0zLjE0LS43NyA0LjMgNC4zIDAgMCAwLTIgLjhBNC4yNSA0LjI1IDAgMCAwIDcuMiAxMC42YTUuMDYgNS4wNiAwIDAgMCAuNTQgNC42MkE1LjU4IDUuNTggMCAwIDAgMTIgMTcuNzRhMi4yNiAyLjI2IDAgMCAxLS4xNiA0LjUyQTEwLjI1IDEwLjI1IDAgMCAxIDMuNzQgMThhMTAuMTQgMTAuMTQgMCAwIDEtMS40OS05LjIyIDkuNyA5LjcgMCAwIDEgMi44My00LjE0QTkuOSA5LjkgMCAwIDEgOS42NiAyLjVhMTAuNjYgMTAuNjYgMCAwIDEgNy43MiAxLjY4bDEuMDgtMS4zNWExLjU3IDEuNTcgMCAwIDEgMS4yNC0uNiAxLjYgMS42IDAgMCAxIDEuNTQgMS4yMWwxLjcgNy4zN2ExLjU3IDEuNTcgMCAwIDEtLjI2IDEuMzkiIHN0eWxlPSJmaWxsOiMwMDA7b3BhY2l0eTouMiIvPjxwYXRoIGQ9Ik0yMS4zOCAxMS44M2gtNy42MWEuNTkuNTkgMCAwIDEtLjQzLTFsMS43NS0yLjE5YTUuOSA1LjkgMCAwIDAtNC43LTEuNTggNS4wNyA1LjA3IDAgMCAwLTQuMTEgMy4xN0E2IDYgMCAwIDAgNyAxNS43N2E2LjUxIDYuNTEgMCAwIDAgNSAyLjkyIDEuMzEgMS4zMSAwIDAgMS0uMDggMi42MiA5LjMgOS4zIDAgMCAxLTcuMzUtMy44MiA5LjE2IDkuMTYgMCAwIDEtMS40LTguMzdBOC41IDguNSAwIDAgMSA1LjcxIDUuNGE4Ljc2IDguNzYgMCAwIDEgNC4xMS0xLjkyIDkuNyA5LjcgMCAwIDEgNy43NSAyLjA3bDEuNjctMi4xYS41OS41OSAwIDAgMSAxIC4yMUwyMiAxMS4wOGEuNTkuNTkgMCAwIDEtLjYyLjc1IiBzdHlsZT0iZmlsbDojZmZmIi8%2BPC9zdmc%2B%22%3B%0A%20%20const%20leftArrow%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCI%2BPHBhdGggZD0iTTIwLjM0IDE4LjIxYTEwLjI0IDEwLjI0IDAgMCAxLTguMSA0LjIyIDIuMjYgMi4yNiAwIDAgMS0uMTYtNC41MiA1LjU4IDUuNTggMCAwIDAgNC4yNS0yLjUzIDUuMDYgNS4wNiAwIDAgMCAuNTQtNC42MkE0LjI1IDQuMjUgMCAwIDAgMTUuNTUgOWE0LjMgNC4zIDAgMCAwLTItLjggNC44MiA0LjgyIDAgMCAwLTMuMTUuOGwxLjEyIDEuNDFBMS41OSAxLjU5IDAgMCAxIDEwLjM2IDEzSDIuNjdhMS41NiAxLjU2IDAgMCAxLTEuMjYtLjYzQTEuNTQgMS41NCAwIDAgMSAxLjEzIDExbDEuNzItNy40M0ExLjU5IDEuNTkgMCAwIDEgNC4zOCAyLjRhMS41NyAxLjU3IDAgMCAxIDEuMjQuNkw2LjcgNC4zNWExMC42NiAxMC42NiAwIDAgMSA3LjcyLTEuNjhBOS45IDkuOSAwIDAgMSAxOSA0LjgxIDkuNiA5LjYgMCAwIDEgMjEuODMgOWExMC4wOCAxMC4wOCAwIDAgMS0xLjQ5IDkuMjEiIHN0eWxlPSJmaWxsOiMwMDA7b3BhY2l0eTouMiIvPjxwYXRoIGQ9Ik0xOS41NiAxNy42NWE5LjI5IDkuMjkgMCAwIDEtNy4zNSAzLjgzIDEuMzEgMS4zMSAwIDAgMS0uMDgtMi42MiA2LjUzIDYuNTMgMCAwIDAgNS0yLjkyIDYuMDUgNi4wNSAwIDAgMCAuNjctNS41MSA1LjMgNS4zIDAgMCAwLTEuNjQtMi4xNiA1LjIgNS4yIDAgMCAwLTIuNDgtMUE1Ljg2IDUuODYgMCAwIDAgOSA4Ljg0TDEwLjc0IDExYS41OS41OSAwIDAgMS0uNDMgMUgyLjdhLjYuNiAwIDAgMS0uNi0uNzVsMS43MS03LjQyYS41OS41OSAwIDAgMSAxLS4yMWwxLjY3IDIuMWE5LjcgOS43IDAgMCAxIDcuNzUtMi4wNyA4Ljg0IDguODQgMCAwIDEgNC4xMiAxLjkyIDguNyA4LjcgMCAwIDEgMi41NCAzLjcyIDkuMTQgOS4xNCAwIDAgMS0xLjMzIDguMzYiIHN0eWxlPSJmaWxsOiNmZmYiLz48L3N2Zz4%3D%22%3B%0A%0A%20%20const%20Cast%20%3D%20Scratch.Cast%3B%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0A%20%20const%20render%20%3D%20vm.renderer%3B%0A%20%20const%20cameraSymbol%20%3D%20Symbol(%22SPcameraData%22)%3B%0A%0A%20%20let%20allCameras%20%3D%20%7B%0A%20%20%20%20default%3A%20%7B%0A%20%20%20%20%20%20xy%3A%20%5B0%2C%200%5D%2C%0A%20%20%20%20%20%20zoom%3A%201%2C%0A%20%20%20%20%20%20dir%3A%200%2C%0A%20%20%20%20%20%20binds%3A%20undefined%2C%0A%20%20%20%20%7D%2C%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20TODO%20add%20support%20for%20interpolation%20at%20some%20point%0A%20%20%2F%2F%20we%20need%20a%20api%20to%20allow%20pushing%20interpolation%20data%0A%20%20runtime.setInterpolation(false)%3B%0A%20%20runtime.runtimeOptions.fencing%20%3D%20false%3B%0A%20%20render.offscreenTouching%20%3D%20true%3B%0A%0A%20%20%2F%2F%20custom%20gui%0A%20%20function%20openModal(titleName%2C%20func)%20%7B%0A%20%20%20%20%2F%2F%20in%20a%20Button%20Context%2C%20ScratchBlocks%20always%20exists%0A%20%20%20%20ScratchBlocks.prompt(%0A%20%20%20%20%20%20titleName%2C%0A%20%20%20%20%20%20%22%22%2C%0A%20%20%20%20%20%20(value)%20%3D%3E%20func(value)%2C%0A%20%20%20%20%20%20Scratch.translate(%22Camera%20Manager%22)%2C%0A%20%20%20%20%20%20%22broadcast_msg%22%0A%20%20%20%20)%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20camera%20utils%0A%20%20const%20radianConstant%20%3D%20Math.PI%20%2F%20180%3B%0A%20%20const%20epsilon%20%3D%201e-12%3B%0A%20%20const%20applyEpsilon%20%3D%20(value)%20%3D%3E%20(Math.abs(value)%20%3C%20epsilon%20%3F%200%20%3A%20value)%3B%0A%0A%20%20function%20setupState(drawable)%20%7B%0A%20%20%20%20drawable%5BcameraSymbol%5D%20%3D%20%7B%0A%20%20%20%20%20%20name%3A%20%22default%22%2C%0A%20%20%20%20%20%20needsRefresh%3A%20false%2C%0A%20%20%20%20%20%20ogXY%3A%20%5B0%2C%200%5D%2C%0A%20%20%20%20%20%20ogSZ%3A%201%2C%0A%20%20%20%20%20%20ogDir%3A%200%2C%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%0A%20%20function%20translatePosition(xy%2C%20invert%2C%20camData)%20%7B%0A%20%20%20%20if%20(invert)%20%7B%0A%20%20%20%20%20%20const%20invRads%20%3D%20camData.ogDir%20*%20radianConstant%3B%0A%20%20%20%20%20%20const%20invSin%20%3D%20Math.sin(invRads)%2C%0A%20%20%20%20%20%20%20%20invCos%20%3D%20Math.cos(invRads)%3B%0A%20%20%20%20%20%20const%20scaledX%20%3D%20xy%5B0%5D%20%2F%20camData.ogSZ%3B%0A%20%20%20%20%20%20const%20scaledY%20%3D%20xy%5B1%5D%20%2F%20camData.ogSZ%3B%0A%20%20%20%20%20%20const%20invOffX%20%3D%20scaledX%20*%20invCos%20%2B%20scaledY%20*%20invSin%3B%0A%20%20%20%20%20%20const%20invOffY%20%3D%20-scaledX%20*%20invSin%20%2B%20scaledY%20*%20invCos%3B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20applyEpsilon(invOffX%20-%20camData.ogXY%5B0%5D)%2C%0A%20%20%20%20%20%20%20%20applyEpsilon(invOffY%20-%20camData.ogXY%5B1%5D)%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20const%20rads%20%3D%20camData.dir%20*%20radianConstant%3B%0A%20%20%20%20%20%20const%20sin%20%3D%20Math.sin(rads)%2C%0A%20%20%20%20%20%20%20%20cos%20%3D%20Math.cos(rads)%3B%0A%20%20%20%20%20%20const%20offX%20%3D%20xy%5B0%5D%20%2B%20camData.xy%5B0%5D%3B%0A%20%20%20%20%20%20const%20offY%20%3D%20xy%5B1%5D%20%2B%20camData.xy%5B1%5D%3B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20applyEpsilon(camData.zoom%20*%20(offX%20*%20cos%20-%20offY%20*%20sin))%2C%0A%20%20%20%20%20%20%20%20applyEpsilon(camData.zoom%20*%20(offX%20*%20sin%20%2B%20offY%20*%20cos))%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20bindDrawable(drawable%2C%20camera)%20%7B%0A%20%20%20%20if%20(!drawable%5BcameraSymbol%5D)%20setupState(drawable)%3B%0A%20%20%20%20const%20camSystem%20%3D%20drawable%5BcameraSymbol%5D%3B%0A%20%20%20%20if%20(camSystem.name%20%3D%3D%3D%20camera)%20return%3B%0A%0A%20%20%20%20%2F%2F%20invert%20camera%20transformations%0A%20%20%20%20const%20fixedPos%20%3D%20translatePosition(drawable._position%2C%20true%2C%20camSystem)%3B%0A%20%20%20%20const%20fixedDir%20%3D%20drawable._direction%20%2B%20camSystem.ogDir%3B%0A%20%20%20%20const%20fixedScale%20%3D%20%5B%0A%20%20%20%20%20%20drawable._scale%5B0%5D%20%2F%20camSystem.ogSZ%2C%0A%20%20%20%20%20%20drawable._scale%5B1%5D%20%2F%20camSystem.ogSZ%2C%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20drawable%5BcameraSymbol%5D%20%3D%20%7B%0A%20%20%20%20%20%20name%3A%20camera%2C%0A%20%20%20%20%20%20ogXY%3A%20%5B0%2C%200%5D%2C%0A%20%20%20%20%20%20ogSZ%3A%201%2C%0A%20%20%20%20%20%20ogDir%3A%200%2C%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20const%20id%20%3D%20drawable._id%3B%0A%20%20%20%20render.updateDrawablePosition(id%2C%20fixedPos)%3B%0A%20%20%20%20render.updateDrawableDirection(id%2C%20fixedDir)%3B%0A%20%20%20%20render.updateDrawableScale(id%2C%20fixedScale)%3B%0A%20%20%7D%0A%0A%20%20function%20updateCamera(camera)%20%7B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20render._drawList.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20const%20drawableId%20%3D%20render._drawList%5Bi%5D%3B%0A%20%20%20%20%20%20const%20drawable%20%3D%20render._allDrawables%5BdrawableId%5D%3B%0A%20%20%20%20%20%20if%20(!drawable.getVisible()%20%7C%7C%20!drawable.skin)%20continue%3B%0A%20%20%20%20%20%20if%20(!drawable%5BcameraSymbol%5D)%20setupState(drawable)%3B%0A%0A%20%20%20%20%20%20const%20camSystem%20%3D%20drawable%5BcameraSymbol%5D%3B%0A%20%20%20%20%20%20if%20(camSystem.name%20%3D%3D%3D%20camera)%20%7B%0A%20%20%20%20%20%20%20%20camSystem.needsRefresh%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20drawable.updatePosition(drawable._position)%3B%0A%20%20%20%20%20%20%20%20drawable.updateDirection(drawable._direction)%3B%0A%20%20%20%20%20%20%20%20drawable.updateScale(drawable._scale)%3B%0A%20%20%20%20%20%20%20%20camSystem.needsRefresh%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20runtime.requestRedraw()%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20camera%20system%20patches%0A%20%20const%20ogPostSpriteInfo%20%3D%20vm.postSpriteInfo%3B%0A%20%20vm.postSpriteInfo%20%3D%20function%20(data)%20%7B%0A%20%20%20%20if%20(this._dragTarget%20%26%26%20data.x%20!%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20const%20drawable%20%3D%20render._allDrawables%5Bthis._dragTarget.drawableID%5D%3B%0A%20%20%20%20%20%20if%20(!drawable%5BcameraSymbol%5D)%20setupState(drawable)%3B%0A%20%20%20%20%20%20const%20camSystem%20%3D%20drawable%5BcameraSymbol%5D%3B%0A%20%20%20%20%20%20camSystem.needsRefresh%20%3D%20false%3B%0A%20%20%20%20%20%20camSystem.ogXY%20%3D%20%5B0%2C%200%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20ogPostSpriteInfo.call(this%2C%20data)%3B%0A%20%20%7D%3B%0A%0A%20%20const%20ogPositionBubble%20%3D%20runtime.ext_scratch3_looks._positionBubble%3B%0A%20%20runtime.ext_scratch3_looks._positionBubble%20%3D%20function%20(target)%20%7B%0A%20%20%20%20%2F%2F%20Expand%20the%20Bubble%20Limits%20to%20a%20Infinite%20Stage%20size%20if%20the%20camera%0A%20%20%20%20%2F%2F%20goes%20beyond%20the%20set%20stage%20size%0A%20%20%20%20const%20drawable%20%3D%20render._allDrawables%5Btarget.drawableID%5D%3B%0A%20%20%20%20if%20(!drawable%5BcameraSymbol%5D)%20setupState(drawable)%3B%0A%20%20%20%20const%20camSystem%20%3D%20allCameras%5Bdrawable%5BcameraSymbol%5D.name%5D%3B%0A%0A%20%20%20%20const%20ogNativeSize%20%3D%20render._nativeSize%3B%0A%20%20%20%20if%20(%0A%20%20%20%20%20%20Math.abs(camSystem.xy%5B0%5D)%20%3E%20runtime.stageWidth%20%7C%7C%0A%20%20%20%20%20%20Math.abs(camSystem.xy%5B1%5D)%20%3E%20runtime.stageHeight%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20render._nativeSize%20%3D%20%5BInfinity%2C%20Infinity%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20ogPositionBubble.call(this%2C%20target)%3B%0A%20%20%20%20render._nativeSize%20%3D%20ogNativeSize%3B%0A%20%20%7D%3B%0A%0A%20%20const%20ogGetBubbleBounds%20%3D%20render.getBoundsForBubble%3B%0A%20%20render.getBoundsForBubble%20%3D%20function%20(drawableID)%20%7B%0A%20%20%20%20const%20drawable%20%3D%20render._allDrawables%5BdrawableID%5D%3B%0A%20%20%20%20if%20(!drawable%5BcameraSymbol%5D)%20setupState(drawable)%3B%0A%20%20%20%20const%20camSystem%20%3D%20drawable%5BcameraSymbol%5D%3B%0A%0A%20%20%20%20const%20bounds%20%3D%20ogGetBubbleBounds.call(this%2C%20drawableID)%3B%0A%20%20%20%20const%20realTopLeft%20%3D%20translatePosition(%0A%20%20%20%20%20%20%5Bbounds.left%2C%20bounds.top%5D%2C%0A%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%20camSystem%0A%20%20%20%20)%3B%0A%20%20%20%20const%20realBottomRight%20%3D%20translatePosition(%0A%20%20%20%20%20%20%5Bbounds.right%2C%20bounds.bottom%5D%2C%0A%20%20%20%20%20%20true%2C%0A%20%20%20%20%20%20camSystem%0A%20%20%20%20)%3B%0A%0A%20%20%20%20bounds.top%20%3D%20realTopLeft%5B1%5D%3B%0A%20%20%20%20bounds.left%20%3D%20realTopLeft%5B0%5D%3B%0A%20%20%20%20bounds.bottom%20%3D%20realBottomRight%5B1%5D%3B%0A%20%20%20%20bounds.right%20%3D%20realBottomRight%5B0%5D%3B%0A%20%20%20%20return%20bounds%3B%0A%20%20%7D%3B%0A%0A%20%20const%20ogUpdatePosition%20%3D%20render.exports.Drawable.prototype.updatePosition%3B%0A%20%20render.exports.Drawable.prototype.updatePosition%20%3D%20function%20(position)%20%7B%0A%20%20%20%20if%20(!this%5BcameraSymbol%5D)%20setupState(this)%3B%0A%20%20%20%20const%20camSystem%20%3D%20this%5BcameraSymbol%5D%3B%0A%20%20%20%20const%20thisCam%20%3D%20allCameras%5BcamSystem.name%5D%3B%0A%20%20%20%20let%20shouldEmit%20%3D%20false%3B%0A%20%20%20%20if%20(camSystem.needsRefresh)%20%7B%0A%20%20%20%20%20%20%2F%2F%20invert%20camera%20transformations%0A%20%20%20%20%20%20position%20%3D%20translatePosition(position%2C%20true%2C%20camSystem)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20shouldEmit%20%3D%0A%20%20%20%20%20%20camSystem.ogXY%5B0%5D%20!%3D%3D%20thisCam.xy%5B0%5D%20%7C%7C%0A%20%20%20%20%20%20camSystem.ogXY%5B1%5D%20!%3D%3D%20thisCam.xy%5B1%5D%3B%0A%20%20%20%20camSystem.ogXY%20%3D%20%5B...thisCam.xy%5D%3B%0A%20%20%20%20position%20%3D%20translatePosition(position%2C%20false%2C%20thisCam)%3B%0A%20%20%20%20if%20(camSystem.needsRefresh)%20%7B%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20this._position%5B0%5D%20!%3D%3D%20position%5B0%5D%20%7C%7C%0A%20%20%20%20%20%20%20%20this._position%5B1%5D%20!%3D%3D%20position%5B1%5D%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20this._position%5B0%5D%20%3D%20position%5B0%5D%3B%0A%20%20%20%20%20%20%20%20this._position%5B1%5D%20%3D%20position%5B1%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(shouldEmit)%20%7B%0A%20%20%20%20%20%20%20%20render.dirty%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.setTransformDirty()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20ogUpdatePosition.call(this%2C%20position)%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20const%20ogUpdateDirection%20%3D%20render.exports.Drawable.prototype.updateDirection%3B%0A%20%20render.exports.Drawable.prototype.updateDirection%20%3D%20function%20(direction)%20%7B%0A%20%20%20%20if%20(!this%5BcameraSymbol%5D)%20setupState(this)%3B%0A%20%20%20%20const%20camSystem%20%3D%20this%5BcameraSymbol%5D%3B%0A%20%20%20%20const%20thisCam%20%3D%20allCameras%5BcamSystem.name%5D%3B%0A%20%20%20%20if%20(camSystem.needsRefresh)%20%7B%0A%20%20%20%20%20%20%2F%2F%20invert%20camera%20transformations%0A%20%20%20%20%20%20direction%20%2B%3D%20camSystem.ogDir%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20camSystem.ogDir%20%3D%20thisCam.dir%3B%0A%20%20%20%20direction%20-%3D%20thisCam.dir%3B%0A%20%20%20%20ogUpdateDirection.call(this%2C%20direction)%3B%0A%20%20%7D%3B%0A%0A%20%20const%20ogUpdateScale%20%3D%20render.exports.Drawable.prototype.updateScale%3B%0A%20%20render.exports.Drawable.prototype.updateScale%20%3D%20function%20(scale)%20%7B%0A%20%20%20%20if%20(!this%5BcameraSymbol%5D)%20setupState(this)%3B%0A%20%20%20%20const%20camSystem%20%3D%20this%5BcameraSymbol%5D%3B%0A%20%20%20%20const%20thisCam%20%3D%20allCameras%5BcamSystem.name%5D%3B%0A%20%20%20%20let%20shouldEmit%20%3D%20false%3B%0A%20%20%20%20if%20(camSystem.needsRefresh)%20%7B%0A%20%20%20%20%20%20%2F%2F%20invert%20camera%20transformations%0A%20%20%20%20%20%20const%20safeOgSZ%20%3D%20camSystem.ogSZ%20!%3D%3D%200%20%3F%20camSystem.ogSZ%20%3A%201e-10%3B%0A%20%20%20%20%20%20scale%5B0%5D%20%2F%3D%20safeOgSZ%3B%0A%20%20%20%20%20%20scale%5B1%5D%20%2F%3D%20safeOgSZ%3B%0A%20%20%20%20%20%20shouldEmit%20%3D%20safeOgSZ%20!%3D%3D%20thisCam.zoom%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20avoid%20dividing%200%20by%200%0A%20%20%20%20camSystem.ogSZ%20%3D%20thisCam.zoom%20%7C%7C%201e-10%3B%0A%20%20%20%20const%20safeZoom%20%3D%20thisCam.zoom%20%7C%7C%201e-10%3B%0A%20%20%20%20scale%5B0%5D%20*%3D%20safeZoom%3B%0A%20%20%20%20scale%5B1%5D%20*%3D%20safeZoom%3B%0A%20%20%20%20if%20(scale%5B0%5D%20%3D%3D%3D%200)%20scale%5B0%5D%20%3D%201e-10%20*%20Math.sign(safeZoom)%3B%0A%20%20%20%20if%20(scale%5B1%5D%20%3D%3D%3D%200)%20scale%5B1%5D%20%3D%201e-10%20*%20Math.sign(safeZoom)%3B%0A%0A%20%20%20%20ogUpdateScale.call(this%2C%20scale)%3B%0A%20%20%20%20if%20(shouldEmit)%20%7B%0A%20%20%20%20%20%20this._renderer.dirty%20%3D%20true%3B%0A%20%20%20%20%20%20this._rotationCenterDirty%20%3D%20true%3B%0A%20%20%20%20%20%20this._skinScaleDirty%20%3D%20true%3B%0A%20%20%20%20%20%20this.setTransformDirty()%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20const%20ogUpdateVisible%20%3D%20render.exports.Drawable.prototype.updateVisible%3B%0A%20%20render.exports.Drawable.prototype.updateVisible%20%3D%20function%20(isVisible)%20%7B%0A%20%20%20%20if%20(!this%5BcameraSymbol%5D)%20setupState(this)%3B%0A%20%20%20%20if%20(isVisible%20%26%26%20this._visible%20!%3D%3D%20isVisible)%20%7B%0A%20%20%20%20%20%20const%20camSystem%20%3D%20this%5BcameraSymbol%5D%3B%0A%20%20%20%20%20%20const%20safeOgSZ%20%3D%20camSystem.ogSZ%20!%3D%3D%200%20%3F%20camSystem.ogSZ%20%3A%201e-10%3B%0A%20%20%20%20%20%20const%20updatedScale%20%3D%20%5Bthis.scale%5B0%5D%20%2F%20safeOgSZ%2C%20this.scale%5B1%5D%20%2F%20safeOgSZ%5D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20save%20some%20renderer%20calls%2C%20packing%20this%20all%20into%20one%0A%20%20%20%20%20%20%2F%2F%20while%20running%20only%20when%20isVisible%20is%20true%20combines%20this%0A%20%20%20%20%20%20%2F%2F%20into%20a%20single%20renderer%20call%0A%20%20%20%20%20%20this.updateProperties(%7B%0A%20%20%20%20%20%20%20%20position%3A%20translatePosition(this._position%2C%20true%2C%20camSystem)%2C%0A%20%20%20%20%20%20%20%20direction%3A%20this._direction%20%2B%20camSystem.ogDir%2C%0A%20%20%20%20%20%20%20%20scale%3A%20updatedScale%2C%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%20%20ogUpdateVisible.call(this%2C%20isVisible)%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20Clones%20should%20inherit%20the%20parents%20camera%0A%20%20const%20ogInitDrawable%20%3D%20vm.exports.RenderedTarget.prototype.initDrawable%3B%0A%20%20vm.exports.RenderedTarget.prototype.initDrawable%20%3D%20function%20(layerGroup)%20%7B%0A%20%20%20%20ogInitDrawable.call(this%2C%20layerGroup)%3B%0A%20%20%20%20if%20(this.isOriginal)%20return%3B%0A%0A%20%20%20%20const%20parentSprite%20%3D%20this.sprite.clones%5B0%5D%3B%20%2F%2F%20clone%5B0%5D%20is%20always%20the%20original%0A%20%20%20%20const%20parentDrawable%20%3D%20render._allDrawables%5BparentSprite.drawableID%5D%3B%0A%20%20%20%20const%20name%20%3D%20parentDrawable%5BcameraSymbol%5D%3F.name%20%3F%3F%20%22default%22%3B%0A%0A%20%20%20%20const%20drawable%20%3D%20render._allDrawables%5Bthis.drawableID%5D%3B%0A%20%20%20%20bindDrawable(drawable%2C%20name)%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20Turbowarp%20Extension%20Storage%0A%20%20runtime.on(%22PROJECT_LOADED%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20const%20stored%20%3D%20runtime.extensionStorage%5B%22SPcamera%22%5D%3B%0A%20%20%20%20if%20(stored)%0A%20%20%20%20%20%20stored.cams.forEach((cam)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20allCameras%5Bcam%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20xy%3A%20%5B0%2C%200%5D%2C%0A%20%20%20%20%20%20%20%20%20%20zoom%3A%201%2C%0A%20%20%20%20%20%20%20%20%20%20dir%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20binds%3A%20cam%20%3D%3D%3D%20%22default%22%20%3F%20undefined%20%3A%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%7D)%3B%0A%0A%20%20class%20SPcamera%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22SPcamera%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%22Camera%20V2%22)%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%23517af5%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%233460e3%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%232851c9%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22addCamera%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BUTTON%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22Add%20Camera%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22removeCamera%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BUTTON%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22Remove%20Camera%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22bindTarget%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22bind%20%5BTARGET%5D%20to%20camera%20%5BCAMERA%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22OBJECTS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22unbindTarget%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22unbind%20%5BTARGET%5D%20from%20camera%20%5BCAMERA%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22OBJECTS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22targetCamera%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22camera%20of%20%5BTARGET%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22EXACT_OBJECTS%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setSpaceColor%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20background%20color%20to%20%5BCOLOR%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spaceColor%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22background%20color%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22Camera%20Controls%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setXY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20%5BCAMERA%5D%20camera%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22goToObject%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22move%20%5BCAMERA%5D%20camera%20to%20%5BTARGET%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22moveSteps%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22move%20%5BCAMERA%5D%20camera%20%5BNUM%5D%20steps%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2010%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20%5BCAMERA%5D%20camera%20x%20to%20%5BNUM%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22change%20%5BCAMERA%5D%20camera%20x%20by%20%5BNUM%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2010%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20%5BCAMERA%5D%20camera%20y%20to%20%5BNUM%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22change%20%5BCAMERA%5D%20camera%20y%20by%20%5BNUM%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2010%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BCAMERA%5D%20camera%20x%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BCAMERA%5D%20camera%20y%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setDirectionNew%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20%5BCAMERA%5D%20camera%20direction%20to%20%5BNUM%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.ANGLE%2C%20defaultValue%3A%2090%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setDirection%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20%5BCAMERA%5D%20camera%20direction%20to%20%5BNUM%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%20%2F%2F%20deprecated%2C%20needed%20for%20compatibility%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.ANGLE%2C%20defaultValue%3A%2090%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22pointCamera%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22point%20%5BCAMERA%5D%20camera%20towards%20%5BTARGET%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22turnCamRight%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22turn%20%5BCAMERA%5D%20camera%20%5BIMG%5D%20%5BNUM%5D%20degrees%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20IMG%3A%20%7B%20type%3A%20Scratch.ArgumentType.IMAGE%2C%20dataURI%3A%20rightArrow%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2015%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22turnCamLeft%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22turn%20%5BCAMERA%5D%20camera%20%5BIMG%5D%20%5BNUM%5D%20degrees%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20IMG%3A%20%7B%20type%3A%20Scratch.ArgumentType.IMAGE%2C%20dataURI%3A%20leftArrow%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2015%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getDirectionNew%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BCAMERA%5D%20camera%20direction%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getDirection%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BCAMERA%5D%20camera%20direction%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%20%2F%2F%20deprecated%2C%20needed%20for%20compatibility%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setZoom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20%5BCAMERA%5D%20camera%20zoom%20to%20%5BNUM%5D%25%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeZoom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22change%20%5BCAMERA%5D%20camera%20zoom%20by%20%5BNUM%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2010%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getZoom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BCAMERA%5D%20camera%20zoom%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22Utility%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22fixedMouseX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22mouse%20x%20in%20camera%20%5BCAMERA%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22fixedMouseY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22mouse%20y%20in%20camera%20%5BCAMERA%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CAMERA%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22CAMERAS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22renderedX%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22rendered%20x%20position%20of%20%5BTARGET%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22EXACT_OBJECTS%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22renderedY%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22rendered%20y%20position%20of%20%5BTARGET%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22EXACT_OBJECTS%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20CAMERAS%3A%20%7B%20acceptReporters%3A%20false%2C%20items%3A%20%22getCameras%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20TARGETS%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20%22getTargets%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20OBJECTS%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20%22getObjects%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20EXACT_OBJECTS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20this.getObjects(false)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20BINDS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22bind%22)%2C%20value%3A%20%22bind%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22unbind%22)%2C%20value%3A%20%22unbind%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Helper%20Funcs%0A%20%20%20%20getObjects(includeAll)%20%7B%0A%20%20%20%20%20%20const%20objectNames%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22myself%22)%2C%20value%3A%20%22_myself_%22%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20if%20(includeAll)%0A%20%20%20%20%20%20%20%20objectNames.push(%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22all%20objects%22)%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20%22_all_%22%2C%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20objectNames.push(%7B%20text%3A%20Scratch.translate(%22Stage%22)%2C%20value%3A%20%22_stage_%22%20%7D)%3B%0A%0A%20%20%20%20%20%20if%20(runtime.ext_videoSensing)%0A%20%20%20%20%20%20%20%20objectNames.push(%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22video%20layer%22)%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20%22_video_%22%2C%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20if%20(runtime.ext_pen)%0A%20%20%20%20%20%20%20%20objectNames.push(%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22pen%20layer%22)%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20%22_pen_%22%2C%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Custom%20Drawable%20Layer%20(CST's%203D%20or%20Simple3D%20Exts%20for%20Example)%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20render._drawList.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20drawableId%20%3D%20render._drawList%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20const%20drawable%20%3D%20render._allDrawables%5BdrawableId%5D%3B%0A%20%20%20%20%20%20%20%20if%20(drawable.customDrawableName%20!%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20%20%20objectNames.push(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20drawable.customDrawableName%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%60%24%7BdrawableId%7D%3DSP-custLayer%60%2C%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Sprites%0A%20%20%20%20%20%20const%20targets%20%3D%20runtime.targets%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20targets.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20targets%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20(target.isOriginal)%0A%20%20%20%20%20%20%20%20%20%20objectNames.push(%7B%20text%3A%20target.getName()%2C%20value%3A%20target.getName()%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20objectNames.length%20%3E%200%20%3F%20objectNames%20%3A%20%5B%22%22%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getTargets()%20%7B%0A%20%20%20%20%20%20const%20targetNames%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22myself%22)%2C%20value%3A%20%22_myself_%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22Stage%22)%2C%20value%3A%20%22_stage_%22%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20const%20targets%20%3D%20runtime.targets%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20targets.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20targets%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20(target.isOriginal)%0A%20%20%20%20%20%20%20%20%20%20targetNames.push(%7B%20text%3A%20target.getName()%2C%20value%3A%20target.getName()%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20targetNames.length%20%3E%200%20%3F%20targetNames%20%3A%20%5B%22%22%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getCameras()%20%7B%0A%20%20%20%20%20%20const%20cameraNames%20%3D%20Object.keys(allCameras)%3B%0A%20%20%20%20%20%20return%20cameraNames.map((i)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(i%20%3D%3D%3D%20%22default%22)%0A%20%20%20%20%20%20%20%20%20%20return%20%7B%20text%3A%20Scratch.translate(%22default%22)%2C%20value%3A%20%22default%22%20%7D%3B%0A%20%20%20%20%20%20%20%20else%20return%20%7B%20text%3A%20i%2C%20value%3A%20i%20%7D%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20refreshBlocks()%20%7B%0A%20%20%20%20%20%20runtime.requestBlocksUpdate()%3B%0A%20%20%20%20%20%20runtime.extensionStorage%5B%22SPcamera%22%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20cams%3A%20Object.keys(allCameras)%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20addCamera()%20%7B%0A%20%20%20%20%20%20openModal(Scratch.translate(%22New%20Camera%20name%3A%22)%2C%20(name)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20allCameras%5Bname%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20xy%3A%20%5B0%2C%200%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20zoom%3A%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20dir%3A%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20binds%3A%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20this.refreshBlocks()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20removeCamera()%20%7B%0A%20%20%20%20%20%20openModal(Scratch.translate(%22Remove%20Camera%20named%3A%22)%2C%20(name)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(name)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(name%20%3D%3D%3D%20%22default%22)%20return%3B%20%2F%2F%20never%20delete%20the%20placeholder%0A%20%20%20%20%20%20%20%20%20%20delete%20allCameras%5Bname%5D%3B%0A%20%20%20%20%20%20%20%20%20%20this.refreshBlocks()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getTarget(name%2C%20util)%20%7B%0A%20%20%20%20%20%20name%20%3D%20Cast.toString(name)%3B%0A%20%20%20%20%20%20if%20(name%20%3D%3D%3D%20%22_all_%22)%20return%20%22_all_%22%3B%0A%20%20%20%20%20%20else%20if%20(name%20%3D%3D%3D%20%22_stage_%22)%20return%20runtime.getTargetForStage()%3B%0A%20%20%20%20%20%20else%20if%20(name%20%3D%3D%3D%20%22_myself_%22)%20return%20util.target%3B%0A%20%20%20%20%20%20const%20penLayer%20%3D%20runtime.ext_pen%3F._penDrawableId%3B%0A%20%20%20%20%20%20const%20videoLayer%20%3D%20runtime.ioDevices.video._drawable%3B%0A%0A%20%20%20%20%20%20if%20(name%20%3D%3D%3D%20%22_pen_%22)%0A%20%20%20%20%20%20%20%20return%20penLayer%20%3E%20-1%20%3F%20%7B%20drawableID%3A%20penLayer%20%7D%20%3A%20undefined%3B%0A%20%20%20%20%20%20else%20if%20(name%20%3D%3D%3D%20%22_video_%22)%0A%20%20%20%20%20%20%20%20return%20videoLayer%20%3E%20-1%20%3F%20%7B%20drawableID%3A%20videoLayer%20%7D%20%3A%20undefined%3B%0A%20%20%20%20%20%20else%20if%20(name.includes(%22%3DSP-custLayer%22))%20%7B%0A%20%20%20%20%20%20%20%20const%20drawableID%20%3D%20parseInt(name)%3B%0A%20%20%20%20%20%20%20%20if%20(render._allDrawables%5BdrawableID%5D%3F.customDrawableName%20!%3D%3D%20undefined)%0A%20%20%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20drawableID%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20runtime.getSpriteTargetByName(name)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20translateAngledMovement(xy%2C%20steps%2C%20direction)%20%7B%0A%20%20%20%20%20%20const%20radians%20%3D%20direction%20*%20radianConstant%3B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20applyEpsilon(xy%5B0%5D%20%2B%20steps%20*%20Math.cos(radians))%2C%0A%20%20%20%20%20%20%20%20applyEpsilon(xy%5B1%5D%20%2B%20steps%20*%20Math.sin(radians))%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Block%20Funcs%0A%20%20%20%20bindTarget(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%3B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%3B%0A%20%20%20%20%20%20if%20(target%20%3D%3D%3D%20%22_all_%22)%20%7B%0A%20%20%20%20%20%20%20%20render._allDrawables.forEach((drawable)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20bindDrawable(drawable%2C%20args.CAMERA)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20const%20drawable%20%3D%20render._allDrawables%5Btarget.drawableID%5D%3B%0A%20%20%20%20%20%20%20%20bindDrawable(drawable%2C%20args.CAMERA)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20unbindTarget(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%3B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%3B%0A%20%20%20%20%20%20if%20(target%20%3D%3D%3D%20%22_all_%22)%20%7B%0A%20%20%20%20%20%20%20%20render._allDrawables.forEach((drawable)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20bindDrawable(drawable%2C%20%22default%22)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20const%20drawable%20%3D%20render._allDrawables%5Btarget.drawableID%5D%3B%0A%20%20%20%20%20%20%20%20bindDrawable(drawable%2C%20%22default%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20targetCamera(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%20%22%22%3B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20render._allDrawables%5Btarget.drawableID%5D%5BcameraSymbol%5D%3F.name%20%7C%7C%20%22default%22%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setSpaceColor(args)%20%7B%0A%20%20%20%20%20%20const%20rgb%20%3D%20Cast.toRgbColorList(args.COLOR)%3B%0A%20%20%20%20%20%20render.setBackgroundColor(rgb%5B0%5D%20%2F%20255%2C%20rgb%5B1%5D%20%2F%20255%2C%20rgb%5B2%5D%20%2F%20255)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20spaceColor()%20%7B%0A%20%20%20%20%20%20const%20rgb%20%3D%20render._backgroundColor3b%3B%0A%20%20%20%20%20%20let%20decimal%20%3D%20(rgb%5B0%5D%20%3C%3C%2016)%20%2B%20(rgb%5B1%5D%20%3C%3C%208)%20%2B%20rgb%5B2%5D%3B%0A%20%20%20%20%20%20if%20(decimal%20%3C%200)%20decimal%20%2B%3D%200xffffff%20%2B%201%3B%0A%20%20%20%20%20%20const%20hex%20%3D%20Number(decimal).toString(16)%3B%0A%20%20%20%20%20%20return%20%60%23%24%7B%22000000%22.substr(0%2C%206%20-%20hex.length)%7D%24%7Bhex%7D%60%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setXY(args)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%3B%0A%20%20%20%20%20%20allCameras%5Bargs.CAMERA%5D.xy%20%3D%20%5B%0A%20%20%20%20%20%20%20%20Cast.toNumber(args.X)%20*%20-1%2C%0A%20%20%20%20%20%20%20%20Cast.toNumber(args.Y)%20*%20-1%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20updateCamera(args.CAMERA)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20moveSteps(args)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%3B%0A%20%20%20%20%20%20const%20cam%20%3D%20allCameras%5Bargs.CAMERA%5D%3B%0A%20%20%20%20%20%20const%20steps%20%3D%20Cast.toNumber(args.NUM)%20*%20-1%3B%0A%20%20%20%20%20%20cam.xy%20%3D%20this.translateAngledMovement(cam.xy%2C%20steps%2C%20cam.dir)%3B%0A%20%20%20%20%20%20updateCamera(args.CAMERA)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setX(args)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%3B%0A%20%20%20%20%20%20allCameras%5Bargs.CAMERA%5D.xy%5B0%5D%20%3D%20Cast.toNumber(args.NUM)%20*%20-1%3B%0A%20%20%20%20%20%20updateCamera(args.CAMERA)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20changeX(args)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%3B%0A%20%20%20%20%20%20const%20cam%20%3D%20allCameras%5Bargs.CAMERA%5D%3B%0A%20%20%20%20%20%20const%20steps%20%3D%20Cast.toNumber(args.NUM)%20*%20-1%3B%0A%20%20%20%20%20%20cam.xy%20%3D%20this.translateAngledMovement(cam.xy%2C%20steps%2C%200)%3B%0A%20%20%20%20%20%20updateCamera(args.CAMERA)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setY(args)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%3B%0A%20%20%20%20%20%20allCameras%5Bargs.CAMERA%5D.xy%5B1%5D%20%3D%20Cast.toNumber(args.NUM)%20*%20-1%3B%0A%20%20%20%20%20%20updateCamera(args.CAMERA)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20changeY(args)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%3B%0A%20%20%20%20%20%20const%20cam%20%3D%20allCameras%5Bargs.CAMERA%5D%3B%0A%20%20%20%20%20%20const%20steps%20%3D%20Cast.toNumber(args.NUM)%20*%20-1%3B%0A%20%20%20%20%20%20cam.xy%20%3D%20this.translateAngledMovement(cam.xy%2C%20steps%2C%2090)%3B%0A%20%20%20%20%20%20updateCamera(args.CAMERA)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20goToObject(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%3B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(target)%20%7B%0A%20%20%20%20%20%20%20%20allCameras%5Bargs.CAMERA%5D.xy%20%3D%20%5Btarget.x%20*%20-1%2C%20target.y%20*%20-1%5D%3B%0A%20%20%20%20%20%20%20%20updateCamera(args.CAMERA)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getX(args)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%200%3B%0A%20%20%20%20%20%20return%20allCameras%5Bargs.CAMERA%5D.xy%5B0%5D%20*%20-1%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getY(args)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%200%3B%0A%20%20%20%20%20%20return%20allCameras%5Bargs.CAMERA%5D.xy%5B1%5D%20*%20-1%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setDirectionNew(args)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%3B%0A%20%20%20%20%20%20allCameras%5Bargs.CAMERA%5D.dir%20%3D%2090%20-%20Cast.toNumber(args.NUM)%3B%0A%20%20%20%20%20%20updateCamera(args.CAMERA)%3B%0A%20%20%20%20%7D%0A%20%20%20%20setDirection(args)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%3B%0A%20%20%20%20%20%20allCameras%5Bargs.CAMERA%5D.dir%20%3D%20Cast.toNumber(args.NUM)%20-%2090%3B%0A%20%20%20%20%20%20updateCamera(args.CAMERA)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20turnCamRight(args)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%3B%0A%20%20%20%20%20%20allCameras%5Bargs.CAMERA%5D.dir%20-%3D%20Cast.toNumber(args.NUM)%3B%0A%20%20%20%20%20%20updateCamera(args.CAMERA)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20turnCamLeft(args)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%3B%0A%20%20%20%20%20%20allCameras%5Bargs.CAMERA%5D.dir%20%2B%3D%20Cast.toNumber(args.NUM)%3B%0A%20%20%20%20%20%20updateCamera(args.CAMERA)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20pointCamera(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%3B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(target)%20%7B%0A%20%20%20%20%20%20%20%20allCameras%5Bargs.CAMERA%5D.dir%20%3D%20target.direction%20-%2090%3B%0A%20%20%20%20%20%20%20%20updateCamera(args.CAMERA)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getDirectionNew(args)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%200%3B%0A%20%20%20%20%20%20return%2090%20-%20allCameras%5Bargs.CAMERA%5D.dir%3B%0A%20%20%20%20%7D%0A%20%20%20%20getDirection(args)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%200%3B%0A%20%20%20%20%20%20return%20allCameras%5Bargs.CAMERA%5D.dir%20%2B%2090%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setZoom(args)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%3B%0A%20%20%20%20%20%20allCameras%5Bargs.CAMERA%5D.zoom%20%3D%20Cast.toNumber(args.NUM)%20%2F%20100%3B%0A%20%20%20%20%20%20updateCamera(args.CAMERA)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20changeZoom(args)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%3B%0A%20%20%20%20%20%20allCameras%5Bargs.CAMERA%5D.zoom%20%2B%3D%20Cast.toNumber(args.NUM)%20%2F%20100%3B%0A%20%20%20%20%20%20updateCamera(args.CAMERA)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getZoom(args)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%200%3B%0A%20%20%20%20%20%20return%20allCameras%5Bargs.CAMERA%5D.zoom%20*%20100%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20fixedMouseX(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%200%3B%0A%20%20%20%20%20%20const%20camData%20%3D%20allCameras%5Bargs.CAMERA%5D%3B%0A%20%20%20%20%20%20return%20translatePosition(%0A%20%20%20%20%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%20%20util.ioQuery(%22mouse%22%2C%20%22getScratchX%22)%2C%0A%20%20%20%20%20%20%20%20%20%20util.ioQuery(%22mouse%22%2C%20%22getScratchY%22)%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20false%2C%0A%20%20%20%20%20%20%20%20camData%0A%20%20%20%20%20%20)%5B0%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20fixedMouseY(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(!allCameras%5Bargs.CAMERA%5D)%20return%200%3B%0A%20%20%20%20%20%20const%20camData%20%3D%20allCameras%5Bargs.CAMERA%5D%3B%0A%20%20%20%20%20%20return%20translatePosition(%0A%20%20%20%20%20%20%20%20%5B%0A%20%20%20%20%20%20%20%20%20%20util.ioQuery(%22mouse%22%2C%20%22getScratchX%22)%2C%0A%20%20%20%20%20%20%20%20%20%20util.ioQuery(%22mouse%22%2C%20%22getScratchY%22)%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20false%2C%0A%20%20%20%20%20%20%20%20camData%0A%20%20%20%20%20%20)%5B1%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20renderedX(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%20%22%22%3B%0A%20%20%20%20%20%20const%20drawable%20%3D%20render._allDrawables%5Btarget.drawableID%5D%3B%0A%20%20%20%20%20%20return%20drawable._position%5B0%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20renderedY(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%20%22%22%3B%0A%20%20%20%20%20%20const%20drawable%20%3D%20render._allDrawables%5Btarget.drawableID%5D%3B%0A%20%20%20%20%20%20return%20drawable._position%5B1%5D%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20SPcamera())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Tween%0D%0A%2F%2F%20ID%3A%20jeremygamerTweening%0D%0A%2F%2F%20Description%3A%20Easing%20methods%20for%20smooth%20animations.%0D%0A%2F%2F%20By%3A%20JeremyGamer13%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FJeremyGamer13%2F%3E%0D%0A%2F%2F%20By%3A%20Fath11%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FFath11%2F%3E%0D%0A%2F%2F%20License%3A%20MIT%0D%0A%0D%0A%2F*%20generated%20l10n%20code%20*%2FScratch.translate.setup(%7B%22fi%22%3A%7B%22_Tweening%22%3A%22Interpolointi%22%2C%22_%5BMODE%5D%20ease%20%5BDIRECTION%5D%20%5BSTART%5D%20to%20%5BEND%5D%20by%20%5BAMOUNT%5D%25%22%3A%22%5BMODE%5D-muotoinen%20%5BDIRECTION%5Dpehmennys%20kohdasta%20%5BSTART%5D%20kohtaan%20%5BEND%5D%20%5BAMOUNT%5D%20%25%3Alla%22%2C%22_back%22%3A%22taaksep%C3%A4in%22%2C%22_bounce%22%3A%22kimmoisuus%22%2C%22_circ%22%3A%22ympyr%C3%A4%22%2C%22_cubic%22%3A%22kuutiollinen%22%2C%22_direction%22%3A%22suunnaksi%22%2C%22_elastic%22%3A%22joustava%22%2C%22_expo%22%3A%22eksponentiaalinen%22%2C%22_in%22%3A%22sis%C3%A4%C3%A4n%22%2C%22_in%20out%22%3A%22sis%C3%A4%C3%A4n-%20ja%20ulos%22%2C%22_linear%22%3A%22tasainen%22%2C%22_out%22%3A%22ulos%22%2C%22_quad%22%3A%22kvadraattinen%22%2C%22_quart%22%3A%22nelj%C3%A4s%20aste%22%2C%22_quint%22%3A%22viides%20aste%22%2C%22_sine%22%3A%22sini%22%2C%22_size%22%3A%22kooksi%22%2C%22_tween%20%5BPROPERTY%5D%20to%20%5BVALUE%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%3A%22interpoloi%20%5BPROPERTY%5D%20%5BVALUE%5D%20%5BSEC%5D%20s%3An%20aikana%20%5BMODE%5D-muotoisella%20%5BDIRECTION%5Dpehmennyksell%C3%A4%22%2C%22_tween%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%3A%22interpoloi%20sijaintiin%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%20%5BSEC%5D%20s%3An%20aikana%20%5BMODE%5D-muotoisella%20%5BDIRECTION%5Dpehmennyksell%C3%A4%22%2C%22_tween%20variable%20%5BVAR%5D%20to%20%5BVALUE%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%3A%22interpoloi%20muuttuja%20%5BVAR%5D%20arvoon%20%5BVALUE%5D%20%5BSEC%5D%20s%3An%20aikana%20%5BMODE%5D-muotoisella%20%5BDIRECTION%5Dpehmennyksell%C3%A4%22%2C%22_x%20position%22%3A%22x-sijainniksi%22%2C%22_y%20position%22%3A%22y-sijainniksi%22%7D%2C%22it%22%3A%7B%22_Tweening%22%3A%22Animazioni%20Interpolate%22%2C%22_%5BMODE%5D%20ease%20%5BDIRECTION%5D%20%5BSTART%5D%20to%20%5BEND%5D%20by%20%5BAMOUNT%5D%25%22%3A%22anima%20con%20ease%20%5BMODE%5D%20in%20direzione%20%5BDIRECTION%5D%20da%20%5BSTART%5D%20a%20%5BEND%5D%20percentuale%20%5BAMOUNT%5D%25%22%2C%22_back%22%3A%22rimbalzo%22%2C%22_bounce%22%3A%22elasticit%C3%A0%22%2C%22_circ%22%3A%22circolare%22%2C%22_cubic%22%3A%22cubica%22%2C%22_direction%22%3A%22direzione%22%2C%22_elastic%22%3A%22elastica%22%2C%22_expo%22%3A%22esponenziale%22%2C%22_linear%22%3A%22lineare%22%2C%22_quad%22%3A%22quadratica%22%2C%22_quart%22%3A%22quarto%20grado%22%2C%22_quint%22%3A%22quinto%20grado%22%2C%22_sine%22%3A%22seno%22%2C%22_size%22%3A%22dimensione%22%2C%22_tween%20%5BPROPERTY%5D%20to%20%5BVALUE%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%3A%22porta%20gradualmente%20%5BPROPERTY%5D%20a%20%5BVALUE%5D%20in%20%5BSEC%5D%20secondi%20usando%20ease%20%5BMODE%5D%20in%20direzione%20%5BDIRECTION%5D%22%2C%22_tween%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%3A%22anima%20fino%20a%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%20in%20%5BSEC%5D%20secondi%20usando%20ease%20%5BMODE%5D%20in%20direzione%20%5BDIRECTION%5D%22%2C%22_tween%20variable%20%5BVAR%5D%20to%20%5BVALUE%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%3A%22porta%20gradualmente%20variabile%20%5BVAR%5D%20a%20%5BVALUE%5D%20in%20%5BSEC%5D%20secondi%20usando%20ease%20%5BMODE%5D%20in%20direzione%20%5BDIRECTION%5D%22%2C%22_x%20position%22%3A%22posizione%20x%22%2C%22_y%20position%22%3A%22posizione%20y%22%7D%2C%22ja%22%3A%7B%22_Tweening%22%3A%22%E3%83%88%E3%82%A5%E3%82%A4%E3%83%BC%E3%83%B3%22%2C%22_%5BMODE%5D%20ease%20%5BDIRECTION%5D%20%5BSTART%5D%20to%20%5BEND%5D%20by%20%5BAMOUNT%5D%25%22%3A%22%5BMODE%5D%E3%81%AE%E3%82%A4%E3%83%BC%E3%82%BA%5BDIRECTION%5D%E3%81%A7%E3%80%81%E9%80%B2%E8%A1%8C%E5%BA%A6%E3%82%92%5BSTART%5D%E3%81%8B%E3%82%89%5BEND%5D%E3%81%BE%E3%81%A7%E3%81%AE%E3%81%86%E3%81%A1%E3%81%AE%5BAMOUNT%5D%25%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_back%22%3A%22%E6%88%BB%E3%82%8B%22%2C%22_bounce%22%3A%22%E3%83%90%E3%82%A6%E3%83%B3%E3%83%89%22%2C%22_circ%22%3A%22%E5%86%86%E5%BC%A7%22%2C%22_cubic%22%3A%22%E4%B8%89%E4%B9%97%22%2C%22_direction%22%3A%22%E5%90%91%E3%81%8D%22%2C%22_elastic%22%3A%22%E5%BC%BE%E5%8A%9B%E6%80%A7%22%2C%22_expo%22%3A%22%E6%8C%87%E6%95%B0%22%2C%22_in%22%3A%22%E3%82%A4%E3%83%B3%22%2C%22_in%20out%22%3A%22%E3%82%A4%E3%83%B3%E3%82%A2%E3%82%A6%E3%83%88%22%2C%22_linear%22%3A%22%E7%AD%89%E9%80%9F%22%2C%22_out%22%3A%22%E3%82%A2%E3%82%A6%E3%83%88%22%2C%22_quad%22%3A%22%E4%BA%8C%E4%B9%97%22%2C%22_quart%22%3A%22%E5%9B%9B%E4%B9%97%22%2C%22_quint%22%3A%22%E4%BA%94%E4%B9%97%22%2C%22_sine%22%3A%22sin%22%2C%22_size%22%3A%22%E5%A4%A7%E3%81%8D%E3%81%95%22%2C%22_tween%20%5BPROPERTY%5D%20to%20%5BVALUE%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%3A%22%5BMODE%5D%E3%81%AE%E3%82%A4%E3%83%BC%E3%82%BA%5BDIRECTION%5D%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%80%81%5BSEC%5D%E7%A7%92%E3%81%A7%5BPROPERTY%5D%E3%82%92%5BVALUE%5D%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_tween%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%3A%22%5BMODE%5D%E3%81%AE%E3%82%A4%E3%83%BC%E3%82%BA%5BDIRECTION%5D%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%80%81%5BSEC%5D%20%E7%A7%92%E3%81%A7x%E5%BA%A7%E6%A8%99%E3%82%92%5BX%5D%E3%80%81y%E5%BA%A7%E6%A8%99%E3%82%92%5BY%5D%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_tween%20variable%20%5BVAR%5D%20to%20%5BVALUE%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%3A%22%5BMODE%5D%E3%81%AE%E3%82%A4%E3%83%BC%E3%82%BA%5BDIRECTION%5D%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%80%81%5BSEC%5D%E7%A7%92%E3%81%A7%E5%A4%89%E6%95%B0%5BVAR%5D%E3%82%92%5BVALUE%5D%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_x%20position%22%3A%22x%E5%BA%A7%E6%A8%99%22%2C%22_y%20position%22%3A%22y%E5%BA%A7%E6%A8%99%22%7D%2C%22ko%22%3A%7B%22_Tweening%22%3A%22%ED%8A%B8%EC%9C%84%EB%8B%9D%22%2C%22_%5BMODE%5D%20ease%20%5BDIRECTION%5D%20%5BSTART%5D%20to%20%5BEND%5D%20by%20%5BAMOUNT%5D%25%22%3A%22%5BMODE%5D%20ease%5BDIRECTION%5D%20%5BSTART%5D%EC%97%90%EC%84%9C%20%5BEND%5D(%EC%9C%BC)%EB%A1%9C%EC%9D%98%20%5BAMOUNT%5D%25%20%EA%B0%92%22%2C%22_direction%22%3A%22%EB%B0%A9%ED%96%A5%22%2C%22_in%22%3A%22%EC%9D%B8%22%2C%22_in%20out%22%3A%22%EC%9D%B8%20%EC%95%84%EC%9B%83%22%2C%22_out%22%3A%22%EC%95%84%EC%9B%83%22%2C%22_size%22%3A%22%ED%81%AC%EA%B8%B0%22%2C%22_tween%20%5BPROPERTY%5D%20to%20%5BVALUE%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%3A%22%5BPROPERTY%5D%EC%9D%84(%EB%A5%BC)%20%5BVALUE%5D(%EC%9C%BC)%EB%A1%9C%20%5BSEC%5D%EC%B4%88%20%EB%8F%99%EC%95%88%20%5BMODE%5D%20ease%5BDIRECTION%5D%20(%EC%9C%BC)%EB%A1%9C%20%EB%B0%94%EA%BE%B8%EA%B8%B0%22%2C%22_tween%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%3A%22x%3A%5BX%5D%20y%3A%5BY%5D%20(%EC%9C%BC)%EB%A1%9C%20%5BSEC%5D%EC%B4%88%20%EB%8F%99%EC%95%88%20%5BMODE%5D%20ease%5BDIRECTION%5D%20(%EC%9C%BC)%EB%A1%9C%20%EC%9D%B4%EB%8F%99%ED%95%98%EA%B8%B0%22%2C%22_tween%20variable%20%5BVAR%5D%20to%20%5BVALUE%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%3A%22%EB%B3%80%EC%88%98%20%5BVAR%5D%EC%9D%84(%EB%A5%BC)%20%5BVALUE%5D(%EC%9C%BC)%EB%A1%9C%20%5BSEC%5D%EC%B4%88%20%EB%8F%99%EC%95%88%20%5BMODE%5D%20ease%5BDIRECTION%5D(%EC%9C%BC)%EB%A1%9C%20%EB%B0%94%EA%BE%B8%EA%B8%B0%22%2C%22_x%20position%22%3A%22x%EC%A2%8C%ED%91%9C%22%2C%22_y%20position%22%3A%22y%EC%A2%8C%ED%91%9C%22%7D%2C%22nb%22%3A%7B%22_bounce%22%3A%22sprette%22%7D%2C%22nl%22%3A%7B%22_Tweening%22%3A%22Overgangen%22%2C%22_%5BMODE%5D%20ease%20%5BDIRECTION%5D%20%5BSTART%5D%20to%20%5BEND%5D%20by%20%5BAMOUNT%5D%25%22%3A%22overgang%20%5BMODE%5D%20%5BDIRECTION%5D%20van%20%5BSTART%5D%20naar%20%5BEND%5D%20op%20%5BAMOUNT%5D%25%22%2C%22_back%22%3A%22terugslag%22%2C%22_bounce%22%3A%22stuiter%22%2C%22_circ%22%3A%22circulair%22%2C%22_cubic%22%3A%22kubisch%22%2C%22_direction%22%3A%22richting%22%2C%22_elastic%22%3A%22elastisch%22%2C%22_expo%22%3A%22exponentieel%22%2C%22_in%20out%22%3A%22in%20uit%22%2C%22_out%22%3A%22uit%22%2C%22_quad%22%3A%22kwadratisch%22%2C%22_quart%22%3A%22kwartisch%22%2C%22_quint%22%3A%22kwintisch%22%2C%22_sine%22%3A%22sinus%22%2C%22_size%22%3A%22grootte%22%2C%22_tween%20%5BPROPERTY%5D%20to%20%5BVALUE%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%3A%22animeer%20%5BPROPERTY%5D%20naar%20%5BVALUE%5D%20gedurende%20%5BSEC%5D%20seconden%20met%20overgang%20%5BMODE%5D%20%5BDIRECTION%5D%22%2C%22_tween%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%3A%22animeer%20naar%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%20gedurende%20%5BSEC%5D%20seconden%20met%20overgang%20%5BMODE%5D%20%5BDIRECTION%5D%22%2C%22_tween%20variable%20%5BVAR%5D%20to%20%5BVALUE%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%3A%22animeer%20variabele%20%5BVAR%5D%20naar%20%5BVALUE%5D%20gedurende%20%5BSEC%5D%20seconden%20met%20overgang%20%5BMODE%5D%20%5BDIRECTION%5D%22%2C%22_x%20position%22%3A%22x-positie%22%2C%22_y%20position%22%3A%22y-positie%22%7D%2C%22pl%22%3A%7B%22_direction%22%3A%22kierunek%22%2C%22_size%22%3A%22wielko%C5%9B%C4%87%22%2C%22_x%20position%22%3A%22pozycja%20x%22%2C%22_y%20position%22%3A%22pozycja%20y%22%7D%2C%22ru%22%3A%7B%22_Tweening%22%3A%22%D0%9F%D0%BB%D0%B0%D0%B2%D0%BD%D0%BE%D1%81%D1%82%D1%8C%22%2C%22_%5BMODE%5D%20ease%20%5BDIRECTION%5D%20%5BSTART%5D%20to%20%5BEND%5D%20by%20%5BAMOUNT%5D%25%22%3A%22%5BMODE%5D%20%D0%B2%20%5BDIRECTION%5D%20%5BSTART%5D%20%D0%B4%D0%BE%20%5BEND%5D%20%D0%BD%D0%B0%20%5BAMOUNT%5D%25%22%2C%22_back%22%3A%22%D0%BD%D0%B0%D0%B7%D0%B0%D0%B4%22%2C%22_bounce%22%3A%22%D1%83%D0%BF%D1%80%D1%83%D0%B3%D0%BE%D1%81%D1%82%D1%8C%22%2C%22_circ%22%3A%22%D1%86%D0%B8%D1%80%D0%BA%D1%83%D0%BB%D1%8F%D1%80%D0%BD%D0%BE%22%2C%22_cubic%22%3A%22%D0%BA%D1%83%D0%B1%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%22%2C%22_direction%22%3A%22%D0%BD%D0%B0%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%22%2C%22_elastic%22%3A%22%D1%8D%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D1%87%D0%BD%D0%BE%22%2C%22_expo%22%3A%22%D1%8D%D0%BA%D1%81%D0%BF%D0%BE%22%2C%22_in%22%3A%22%D0%B2%22%2C%22_in%20out%22%3A%22%D0%B2%20%D0%B8%D0%B7%22%2C%22_linear%22%3A%22%D0%BB%D0%B8%D0%BD%D0%B5%D0%B9%D0%BD%D0%BE%22%2C%22_out%22%3A%22%D0%B8%D0%B7%22%2C%22_quad%22%3A%22%D1%87%D0%B5%D1%82%D1%8B%D1%80%D1%91%D1%85%D1%83%D0%B3%D0%BE%D0%BB%D1%8C%D0%BD%D0%BE%22%2C%22_quart%22%3A%22%D0%BA%D0%B2%D0%B0%D1%80%D1%82%D0%BE%D0%B2%D0%BE%22%2C%22_quint%22%3A%22%D0%BA%D0%B2%D0%B8%D0%BD%D1%82%D0%BE%D0%B2%D0%BE%22%2C%22_sine%22%3A%22%D0%B1%D0%B5%D0%B7%22%2C%22_size%22%3A%22%D1%80%D0%B0%D0%B7%D0%BC%D0%B5%D1%80%22%2C%22_tween%20%5BPROPERTY%5D%20to%20%5BVALUE%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%3A%22%D0%BF%D0%BB%D0%B0%D0%B2%D0%BD%D0%BE%20%5BPROPERTY%5D%20%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%20%5BVALUE%5D%20%D0%BD%D0%B0%20%5BSEC%5D%20%D1%81%D0%B5%D0%BA%D1%83%D0%BD%D0%B4%20%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F%20%5BMODE%5D%20%D0%B2%20%5BDIRECTION%5D%22%2C%22_tween%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%3A%22%D0%BF%D0%BB%D0%B0%D0%B2%D0%BD%D0%BE%20%D0%B2%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%20%D0%BD%D0%B0%20%5BSEC%5D%20%D1%81%D0%B5%D0%BA%D1%83%D0%BD%D0%B4%20%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F%20%5BMODE%5D%20%D0%B2%20%5BDIRECTION%5D%22%2C%22_tween%20variable%20%5BVAR%5D%20to%20%5BVALUE%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%3A%22%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%B0%D1%8F%20%D0%BF%D0%BB%D0%B0%D0%B2%D0%BD%D0%BE%D1%81%D1%82%D0%B8%20%5BVAR%5D%20%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%20%5BVALUE%5D%20%D0%BD%D0%B0%20%5BSEC%5D%20%D1%81%D0%B5%D0%BA%D1%83%D0%BD%D0%B4%20%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8F%20%5BMODE%5D%20%D0%B2%20%5BDIRECTION%5D%22%2C%22_x%20position%22%3A%22%D0%BF%D0%BE%D0%B7%D0%B8%D1%86%D0%B8%D1%8F%20x%22%2C%22_y%20position%22%3A%22%D0%BF%D0%BE%D0%B7%D0%B8%D1%86%D0%B8%D1%8F%20y%22%7D%2C%22zh-cn%22%3A%7B%22_Tweening%22%3A%22%E8%A1%A5%E9%97%B4%22%2C%22_%5BMODE%5D%20ease%20%5BDIRECTION%5D%20%5BSTART%5D%20to%20%5BEND%5D%20by%20%5BAMOUNT%5D%25%22%3A%22%5BMODE%5D%E7%BC%93%5BDIRECTION%5D%E4%BB%8E%5BSTART%5D%E5%88%B0%5BEND%5D%E8%BF%9B%E5%BA%A6%5BAMOUNT%5D%25%22%2C%22_back%22%3A%22%E5%9B%9E%E5%BC%B9%22%2C%22_bounce%22%3A%22%E5%BC%B9%E6%80%A7%22%2C%22_circ%22%3A%22%E5%9C%86%E5%BD%A2%22%2C%22_cubic%22%3A%22%E4%B8%89%E6%AC%A1%22%2C%22_direction%22%3A%22%E6%96%B9%E5%90%91%22%2C%22_elastic%22%3A%22%E5%BC%B9%E8%B7%B3%22%2C%22_expo%22%3A%22%E6%8C%87%E6%95%B0%22%2C%22_in%22%3A%22%E5%85%A5%22%2C%22_in%20out%22%3A%22%E5%85%A5%E5%92%8C%E5%87%BA%22%2C%22_linear%22%3A%22%E7%BA%BF%E6%80%A7%22%2C%22_out%22%3A%22%E5%87%BA%22%2C%22_quad%22%3A%22%E4%BA%8C%E6%AC%A1%22%2C%22_quart%22%3A%22%E5%9B%9B%E6%AC%A1%22%2C%22_quint%22%3A%22%E4%BA%94%E6%AC%A1%22%2C%22_sine%22%3A%22%E6%AD%A3%E5%BC%A6%22%2C%22_size%22%3A%22%E5%A4%A7%E5%B0%8F%22%2C%22_tween%20%5BPROPERTY%5D%20to%20%5BVALUE%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%3A%22%E5%B0%86%5BPROPERTY%5D%E5%9C%A8%5BSEC%5D%E7%A7%92%E5%86%85%E4%BD%BF%E7%94%A8%5BMODE%5D%E7%BC%93%5BDIRECTION%5D%E6%B8%90%E5%8F%98%E5%88%B0%5BVALUE%5D%22%2C%22_tween%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%3A%22%E5%9C%A8%5BSEC%5D%E7%A7%92%E5%86%85%E4%BD%BF%E7%94%A8%5BMODE%5D%E7%BC%93%5BDIRECTION%5D%E5%8F%98%E9%80%9F%E7%A7%BB%E5%88%B0x%3A%5BX%5Dy%3A%5BY%5D%22%2C%22_tween%20variable%20%5BVAR%5D%20to%20%5BVALUE%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%3A%22%E5%B0%86%E5%8F%98%E9%87%8F%5BVAR%5D%E5%9C%A8%5BSEC%5D%E7%A7%92%E5%86%85%E4%BD%BF%E7%94%A8%5BMODE%5D%E7%BC%93%5BDIRECTION%5D%E6%95%88%E6%9E%9C%E6%B8%90%E5%8F%98%E5%88%B0%5BVALUE%5D%22%2C%22_x%20position%22%3A%22x%E5%9D%90%E6%A0%87%22%2C%22_y%20position%22%3A%22y%E5%9D%90%E6%A0%87%22%7D%7D)%3B%2F*%20end%20generated%20l10n%20code%20*%2F(function%20(Scratch)%20%7B%0D%0A%20%20%22use%20strict%22%3B%0D%0A%0D%0A%20%20const%20BlockType%20%3D%20Scratch.BlockType%3B%0D%0A%20%20const%20ArgumentType%20%3D%20Scratch.ArgumentType%3B%0D%0A%20%20const%20Cast%20%3D%20Scratch.Cast%3B%0D%0A%0D%0A%20%20%2F**%0D%0A%20%20%20*%20%40param%20%7Bnumber%7D%20time%20should%20be%200-1%0D%0A%20%20%20*%20%40param%20%7Bnumber%7D%20a%20value%20at%200%0D%0A%20%20%20*%20%40param%20%7Bnumber%7D%20b%20value%20at%201%0D%0A%20%20%20*%20%40returns%20%7Bnumber%7D%0D%0A%20%20%20*%2F%0D%0A%20%20const%20interpolate%20%3D%20(time%2C%20a%2C%20b)%20%3D%3E%20%7B%0D%0A%20%20%20%20%2F%2F%20don't%20restrict%20range%20of%20time%20as%20some%20easing%20functions%20are%20expected%20to%20go%20outside%20the%20range%0D%0A%20%20%20%20const%20multiplier%20%3D%20b%20-%20a%3B%0D%0A%20%20%20%20const%20result%20%3D%20time%20*%20multiplier%20%2B%20a%3B%0D%0A%20%20%20%20return%20result%3B%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20linear%20%3D%20(x)%20%3D%3E%20x%3B%0D%0A%0D%0A%20%20const%20sine%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%201%20-%20Math.cos((x%20*%20Math.PI)%20%2F%202)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20Math.sin((x%20*%20Math.PI)%20%2F%202)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20-(Math.cos(Math.PI%20*%20x)%20-%201)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20quad%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20*%20x%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%201%20-%20(1%20-%20x)%20*%20(1%20-%20x)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3C%200.5%20%3F%202%20*%20x%20*%20x%20%3A%201%20-%20Math.pow(-2%20*%20x%20%2B%202%2C%202)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20cubic%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20*%20x%20*%20x%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%201%20-%20Math.pow(1%20-%20x%2C%203)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3C%200.5%20%3F%204%20*%20x%20*%20x%20*%20x%20%3A%201%20-%20Math.pow(-2%20*%20x%20%2B%202%2C%203)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20quart%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20*%20x%20*%20x%20*%20x%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%201%20-%20Math.pow(1%20-%20x%2C%204)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3C%200.5%20%3F%208%20*%20x%20*%20x%20*%20x%20*%20x%20%3A%201%20-%20Math.pow(-2%20*%20x%20%2B%202%2C%204)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20quint%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20*%20x%20*%20x%20*%20x%20*%20x%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%201%20-%20Math.pow(1%20-%20x%2C%205)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3C%200.5%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%2016%20*%20x%20*%20x%20*%20x%20*%20x%20*%20x%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%201%20-%20Math.pow(-2%20*%20x%20%2B%202%2C%205)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20expo%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3D%3D%3D%200%20%3F%200%20%3A%20Math.pow(2%2C%2010%20*%20x%20-%2010)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3D%3D%3D%201%20%3F%201%20%3A%201%20-%20Math.pow(2%2C%20-10%20*%20x)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3D%3D%3D%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20x%20%3D%3D%3D%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20x%20%3C%200.5%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3F%20Math.pow(2%2C%2020%20*%20x%20-%2010)%20%2F%202%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20(2%20-%20Math.pow(2%2C%20-20%20*%20x%20%2B%2010))%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20circ%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%201%20-%20Math.sqrt(1%20-%20Math.pow(x%2C%202))%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20Math.sqrt(1%20-%20Math.pow(x%20-%201%2C%202))%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3C%200.5%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%20(1%20-%20Math.sqrt(1%20-%20Math.pow(2%20*%20x%2C%202)))%20%2F%202%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20(Math.sqrt(1%20-%20Math.pow(-2%20*%20x%20%2B%202%2C%202))%20%2B%201)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20back%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20c1%20%3D%201.70158%3B%0D%0A%20%20%20%20%20%20%20%20const%20c3%20%3D%20c1%20%2B%201%3B%0D%0A%20%20%20%20%20%20%20%20return%20c3%20*%20x%20*%20x%20*%20x%20-%20c1%20*%20x%20*%20x%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20c1%20%3D%201.70158%3B%0D%0A%20%20%20%20%20%20%20%20const%20c3%20%3D%20c1%20%2B%201%3B%0D%0A%20%20%20%20%20%20%20%20return%201%20%2B%20c3%20*%20Math.pow(x%20-%201%2C%203)%20%2B%20c1%20*%20Math.pow(x%20-%201%2C%202)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20c1%20%3D%201.70158%3B%0D%0A%20%20%20%20%20%20%20%20const%20c2%20%3D%20c1%20*%201.525%3B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3C%200.5%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%20(Math.pow(2%20*%20x%2C%202)%20*%20((c2%20%2B%201)%20*%202%20*%20x%20-%20c2))%20%2F%202%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20(Math.pow(2%20*%20x%20-%202%2C%202)%20*%20((c2%20%2B%201)%20*%20(x%20*%202%20-%202)%20%2B%20c2)%20%2B%202)%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20elastic%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20c4%20%3D%20(2%20*%20Math.PI)%20%2F%203%3B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3D%3D%3D%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20x%20%3D%3D%3D%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20-Math.pow(2%2C%2010%20*%20x%20-%2010)%20*%20Math.sin((x%20*%2010%20-%2010.75)%20*%20c4)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20c4%20%3D%20(2%20*%20Math.PI)%20%2F%203%3B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3D%3D%3D%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20x%20%3D%3D%3D%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20Math.pow(2%2C%20-10%20*%20x)%20*%20Math.sin((x%20*%2010%20-%200.75)%20*%20c4)%20%2B%201%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20c5%20%3D%20(2%20*%20Math.PI)%20%2F%204.5%3B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3D%3D%3D%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%200%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20x%20%3D%3D%3D%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20x%20%3C%200.5%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3F%20-(Math.pow(2%2C%2020%20*%20x%20-%2010)%20*%20Math.sin((20%20*%20x%20-%2011.125)%20*%20c5))%20%2F%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%202%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20(Math.pow(2%2C%20-20%20*%20x%20%2B%2010)%20*%20Math.sin((20%20*%20x%20-%2011.125)%20*%20c5))%20%2F%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%202%20%2B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%201%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20bounce%20%3D%20(x%2C%20dir)%20%3D%3E%20%7B%0D%0A%20%20%20%20switch%20(dir)%20%7B%0D%0A%20%20%20%20%20%20case%20%22in%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%201%20-%20bounce(1%20-%20x%2C%20%22out%22)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20n1%20%3D%207.5625%3B%0D%0A%20%20%20%20%20%20%20%20const%20d1%20%3D%202.75%3B%0D%0A%20%20%20%20%20%20%20%20if%20(x%20%3C%201%20%2F%20d1)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20n1%20*%20x%20*%20x%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(x%20%3C%202%20%2F%20d1)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20n1%20*%20(x%20-%3D%201.5%20%2F%20d1)%20*%20x%20%2B%200.75%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(x%20%3C%202.5%20%2F%20d1)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20n1%20*%20(x%20-%3D%202.25%20%2F%20d1)%20*%20x%20%2B%200.9375%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20return%20n1%20*%20(x%20-%3D%202.625%20%2F%20d1)%20*%20x%20%2B%200.984375%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20case%20%22in%20out%22%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20x%20%3C%200.5%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%20(1%20-%20bounce(1%20-%202%20*%20x%2C%20%22out%22))%20%2F%202%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20(1%20%2B%20bounce(2%20*%20x%20-%201%2C%20%22out%22))%20%2F%202%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20const%20EasingMethods%20%3D%20%7B%0D%0A%20%20%20%20linear%2C%0D%0A%20%20%20%20sine%2C%0D%0A%20%20%20%20quad%2C%0D%0A%20%20%20%20cubic%2C%0D%0A%20%20%20%20quart%2C%0D%0A%20%20%20%20quint%2C%0D%0A%20%20%20%20expo%2C%0D%0A%20%20%20%20circ%2C%0D%0A%20%20%20%20back%2C%0D%0A%20%20%20%20elastic%2C%0D%0A%20%20%20%20bounce%2C%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20class%20Tween%20%7B%0D%0A%20%20%20%20getInfo()%20%7B%0D%0A%20%20%20%20%20%20return%20%7B%0D%0A%20%20%20%20%20%20%20%20id%3A%20%22jeremygamerTweening%22%2C%0D%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%22Tweening%22)%2C%0D%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22tweenValue%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22%5BMODE%5D%20ease%20%5BDIRECTION%5D%20%5BSTART%5D%20to%20%5BEND%5D%20by%20%5BAMOUNT%5D%25%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MODE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22modes%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIRECTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22direction%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20START%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20END%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20AMOUNT%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2050%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22tweenVariable%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22tween%20variable%20%5BVAR%5D%20to%20%5BVALUE%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAR%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22vars%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SEC%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MODE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22modes%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIRECTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22direction%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22tweenXY%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22tween%20to%20x%3A%20%5BX%5D%20y%3A%20%5BY%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PROPERTY%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22properties%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SEC%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MODE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22modes%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIRECTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22direction%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22tweenProperty%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22tween%20%5BPROPERTY%5D%20to%20%5BVALUE%5D%20over%20%5BSEC%5D%20seconds%20using%20%5BMODE%5D%20ease%20%5BDIRECTION%5D%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PROPERTY%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22properties%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SEC%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MODE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22modes%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIRECTION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22direction%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20modes%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22linear%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22linear%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22sine%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22sine%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22quad%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22quad%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22cubic%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22cubic%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22quart%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22quart%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22quint%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22quint%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22expo%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22expo%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22circ%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22circ%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22back%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22back%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22elastic%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22elastic%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22bounce%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22bounce%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20direction%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22in%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22in%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22out%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22out%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22in%20out%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22in%20out%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20vars%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%20%2F%2F%20for%20Scratch%20parity%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%22getVariables%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20properties%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22x%20position%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22x%20position%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22y%20position%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22y%20position%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22direction%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22direction%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22size%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22size%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getVariables()%20%7B%0D%0A%20%20%20%20%20%20const%20variables%20%3D%0D%0A%20%20%20%20%20%20%20%20typeof%20Blockly%20%3D%3D%3D%20%22undefined%22%0D%0A%20%20%20%20%20%20%20%20%20%20%3F%20%5B%5D%0D%0A%20%20%20%20%20%20%20%20%20%20%3A%20Blockly.getMainWorkspace()%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.getVariableMap()%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%40ts-expect-error%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.getVariablesOfType(%22%22)%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20.map((model)%20%3D%3E%20(%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20model.name%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20model.getId()%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D))%3B%0D%0A%20%20%20%20%20%20if%20(variables.length%20%3E%200)%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20variables%3B%0D%0A%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20%5B%7B%20text%3A%20%22%22%2C%20value%3A%20%22%22%20%7D%5D%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20tweenValue(args)%20%7B%0D%0A%20%20%20%20%20%20const%20easeMethod%20%3D%20Cast.toString(args.MODE)%3B%0D%0A%20%20%20%20%20%20const%20easeDirection%20%3D%20Cast.toString(args.DIRECTION)%3B%0D%0A%20%20%20%20%20%20const%20start%20%3D%20Cast.toNumber(args.START)%3B%0D%0A%20%20%20%20%20%20const%20end%20%3D%20Cast.toNumber(args.END)%3B%0D%0A%20%20%20%20%20%20const%20progress%20%3D%20Cast.toNumber(args.AMOUNT)%20%2F%20100%3B%0D%0A%0D%0A%20%20%20%20%20%20if%20(!Object.prototype.hasOwnProperty.call(EasingMethods%2C%20easeMethod))%20%7B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20Unknown%20method%0D%0A%20%20%20%20%20%20%20%20return%20start%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20const%20easingFunction%20%3D%20EasingMethods%5BeaseMethod%5D%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20tweened%20%3D%20easingFunction(progress%2C%20easeDirection)%3B%0D%0A%20%20%20%20%20%20return%20interpolate(tweened%2C%20start%2C%20end)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20_tweenValue(args%2C%20util%2C%20id%2C%20valueArgName%2C%20currentValue)%20%7B%0D%0A%20%20%20%20%20%20%2F%2F%20Only%20use%20args%20on%20first%20run.%20For%20later%20executions%20grab%20everything%20from%20stackframe.%0D%0A%20%20%20%20%20%20%2F%2F%20This%20ensures%20that%20if%20the%20arguments%20change%2C%20the%20tweening%20won't%20change.%20This%20matches%0D%0A%20%20%20%20%20%20%2F%2F%20the%20vanilla%20Scratch%20glide%20blocks.%0D%0A%20%20%20%20%20%20const%20state%20%3D%20util.stackFrame%5Bid%5D%3B%0D%0A%0D%0A%20%20%20%20%20%20if%20(!state)%20%7B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20First%20run%2C%20need%20to%20start%20timer%0D%0A%20%20%20%20%20%20%20%20util.yield()%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20If%20multiple%20values%20being%20tweened%20in%20same%20block%2C%20only%20start%20timer%20stack%20timer%20once.%0D%0A%20%20%20%20%20%20%20%20if%20(util.stackTimerNeedsInit())%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20const%20durationMS%20%3D%20Math.max(0%2C%201000%20*%20Cast.toNumber(args.SEC))%3B%0D%0A%20%20%20%20%20%20%20%20%20%20util.startStackTimer(durationMS)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20%20%20const%20easeMethod%20%3D%20Cast.toString(args.MODE)%3B%0D%0A%20%20%20%20%20%20%20%20const%20easeDirection%20%3D%20Cast.toString(args.DIRECTION)%3B%0D%0A%20%20%20%20%20%20%20%20const%20start%20%3D%20currentValue%3B%0D%0A%20%20%20%20%20%20%20%20const%20end%20%3D%20Cast.toNumber(args%5BvalueArgName%5D)%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20let%20easingFunction%3B%0D%0A%20%20%20%20%20%20%20%20if%20(Object.prototype.hasOwnProperty.call(EasingMethods%2C%20easeMethod))%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20easingFunction%20%3D%20EasingMethods%5BeaseMethod%5D%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20easingFunction%20%3D%20EasingMethods.linear%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20%20%20util.stackFrame%5Bid%5D%20%3D%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20easingFunction%2C%0D%0A%20%20%20%20%20%20%20%20%20%20easeDirection%2C%0D%0A%20%20%20%20%20%20%20%20%20%20start%2C%0D%0A%20%20%20%20%20%20%20%20%20%20end%2C%0D%0A%20%20%20%20%20%20%20%20%7D%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20return%20start%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(util.stackTimerFinished())%20%7B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20Done%0D%0A%20%20%20%20%20%20%20%20return%20util.stackFrame%5Bid%5D.end%3B%0D%0A%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20Still%20running%0D%0A%20%20%20%20%20%20%20%20util.yield()%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20const%20progress%20%3D%0D%0A%20%20%20%20%20%20%20%20%20%20util.stackFrame.timer.timeElapsed()%20%2F%20util.stackFrame.duration%3B%0D%0A%20%20%20%20%20%20%20%20const%20tweened%20%3D%20state.easingFunction(progress%2C%20state.easeDirection)%3B%0D%0A%20%20%20%20%20%20%20%20return%20interpolate(tweened%2C%20state.start%2C%20state.end)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20tweenVariable(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20variable%20%3D%20util.target.lookupVariableById(args.VAR)%3B%0D%0A%20%20%20%20%20%20const%20value%20%3D%20this._tweenValue(args%2C%20util%2C%20%22%22%2C%20%22VALUE%22%2C%20variable.value)%3B%0D%0A%20%20%20%20%20%20if%20(variable%20%26%26%20variable.type%20%3D%3D%3D%20%22%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20variable.value%20%3D%20value%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20tweenXY(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20x%20%3D%20this._tweenValue(args%2C%20util%2C%20%22x%22%2C%20%22X%22%2C%20util.target.x)%3B%0D%0A%20%20%20%20%20%20const%20y%20%3D%20this._tweenValue(args%2C%20util%2C%20%22y%22%2C%20%22Y%22%2C%20util.target.y)%3B%0D%0A%20%20%20%20%20%20util.target.setXY(x%2C%20y)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20tweenProperty(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20let%20currentValue%20%3D%200%3B%0D%0A%20%20%20%20%20%20if%20(args.PROPERTY%20%3D%3D%3D%20%22x%20position%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20currentValue%20%3D%20util.target.x%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(args.PROPERTY%20%3D%3D%3D%20%22y%20position%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20currentValue%20%3D%20util.target.y%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(args.PROPERTY%20%3D%3D%3D%20%22direction%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20currentValue%20%3D%20util.target.direction%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(args.PROPERTY%20%3D%3D%3D%20%22size%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20currentValue%20%3D%20util.target.size%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20const%20value%20%3D%20this._tweenValue(args%2C%20util%2C%20%22%22%2C%20%22VALUE%22%2C%20currentValue)%3B%0D%0A%0D%0A%20%20%20%20%20%20if%20(args.PROPERTY%20%3D%3D%3D%20%22x%20position%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20util.target.setXY(value%2C%20util.target.y)%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(args.PROPERTY%20%3D%3D%3D%20%22y%20position%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20util.target.setXY(util.target.x%2C%20value)%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(args.PROPERTY%20%3D%3D%3D%20%22direction%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20util.target.setDirection(value)%3B%0D%0A%20%20%20%20%20%20%7D%20else%20if%20(args.PROPERTY%20%3D%3D%3D%20%22size%22)%20%7B%0D%0A%20%20%20%20%20%20%20%20util.target.setSize(value)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%0D%0A%0D%0A%20%20Scratch.extensions.register(new%20Tween())%3B%0D%0A%7D)(Scratch)%3B%0D%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Local%20Storage%0A%2F%2F%20ID%3A%20localstorage%0A%2F%2F%20Description%3A%20Store%20data%20persistently.%20Like%20cookies%2C%20but%20better.%0A%2F%2F%20License%3A%20MIT%20AND%20MPL-2.0%0A%0A%2F*%20generated%20l10n%20code%20*%2FScratch.translate.setup(%7B%22de%22%3A%7B%22_Local%20Storage%22%3A%22Speicherplatz%22%7D%2C%22es%22%3A%7B%22_Local%20Storage%22%3A%22Almacenaje%20Local%22%2C%22_No%20namespace%20set%22%3A%22No%20namespace%20establecido%22%2C%22_delete%20%5BKEY%5D%20from%20storage%22%3A%22borrar%20%5BKEY%5D%20del%20almacenaje%22%2C%22_delete%20storage%22%3A%22borrar%20almacenaje%22%2C%22_get%20%5BKEY%5D%20from%20storage%22%3A%22obtener%20%5BKEY%5D%20del%20almacenaje%22%2C%22_project%20title%22%3A%22t%C3%ADtulo%20del%20proyecto%22%2C%22_score%22%3A%22puntos%22%2C%22_set%20%5BKEY%5D%20to%20%5BVALUE%5D%20in%20storage%22%3A%22fijar%20%5BKEY%5D%20a%20%5BVALUE%5D%20en%20almacenaje%22%2C%22_set%20namespace%20to%20%5BID%5D%22%3A%22fijar%20namespace%20a%20%5BID%5D%22%2C%22_when%20another%20window%20changes%20storage%22%3A%22cuando%20otra%20ventana%20cambia%20el%20almacenaje%22%7D%2C%22fi%22%3A%7B%22_Local%20Storage%22%3A%22Paikallinen%20muisti%22%2C%22_Local%20Storage%20extension%3A%20project%20must%20run%20the%20%5C%22set%20storage%20namespace%20ID%5C%22%20block%20before%20it%20can%20use%20other%20blocks%22%3A%22Paikallinen%20muisti%20-laajennus%3A%20projektissa%20t%C3%A4ytyy%20suorittaa%20%5C%22aseta%20muistin%20nimiavaruustunnisteeksi%5C%22%20-lohko%20ennen%20kuin%20muita%20lohkoja%20voidaan%20suorittaa.%22%2C%22_project%20title%22%3A%22projektin%20otsikko%22%2C%22_score%22%3A%22pisteet%22%2C%22_when%20another%20window%20changes%20storage%22%3A%22kun%20toinen%20ikkuna%20muuttaa%20muistia%22%7D%2C%22it%22%3A%7B%22_Local%20Storage%22%3A%22Memoria%20Locale%22%2C%22_Local%20Storage%20extension%3A%20project%20must%20run%20the%20%5C%22set%20storage%20namespace%20ID%5C%22%20block%20before%20it%20can%20use%20other%20blocks%22%3A%22Estensione%20Archiviazione%20Locale%3A%20il%20progetto%20deve%20eseguire%20il%20blocco%20%5C%22imposta%20ID%20spazio%20di%20archiviazione%5C%22%20prima%20di%20usare%20gli%20altri%20blocchi%22%2C%22_No%20namespace%20set%22%3A%22Nessun%20namespace%20impostato%22%2C%22_delete%20%5BKEY%5D%20from%20storage%22%3A%22rimuovi%20%5BKEY%5D%20da%20archivio%22%2C%22_delete%20storage%22%3A%22svuota%20archivio%22%2C%22_get%20%5BKEY%5D%20from%20storage%22%3A%22ottieni%20%5BKEY%5D%20da%20archivio%22%2C%22_project%20title%22%3A%22titolo%20progetto%22%2C%22_score%22%3A%22punteggio%22%2C%22_set%20%5BKEY%5D%20to%20%5BVALUE%5D%20in%20storage%22%3A%22porta%20%5BKEY%5D%20a%20%5BVALUE%5D%20in%20archivio%22%2C%22_set%20namespace%20to%20%5BID%5D%22%3A%22imposta%20namespace%20a%20%5BID%5D%22%2C%22_when%20another%20window%20changes%20storage%22%3A%22quando%20altra%20finestra%20cambia%20spazio%20di%20archiviazione%22%7D%2C%22ja%22%3A%7B%22_Local%20Storage%22%3A%22%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%82%B9%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B8%22%2C%22_Local%20Storage%20extension%3A%20project%20must%20run%20the%20%5C%22set%20storage%20namespace%20ID%5C%22%20block%20before%20it%20can%20use%20other%20blocks%22%3A%22%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%82%B9%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B8%E6%8B%A1%E5%BC%B5%E6%A9%9F%E8%83%BD%EF%BC%9A%E4%BB%96%E3%81%AE%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B%E5%89%8D%E3%81%AB%E3%80%81%E3%80%8C%E3%82%B9%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B8%E3%81%AE%E5%90%8D%E5%89%8D%E3%82%92()%E3%81%AB%E3%81%99%E3%82%8B%E3%80%8D%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B%E5%BF%85%E8%A6%81%E3%81%8C%E3%81%82%E3%82%8A%E3%81%BE%E3%81%99%E3%80%82%22%2C%22_project%20title%22%3A%22%E3%83%97%E3%83%AD%E3%83%B3%E3%83%97%E3%83%88%E3%81%AE%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB%22%2C%22_score%22%3A%22%E3%82%B9%E3%82%B3%E3%82%A2%22%2C%22_when%20another%20window%20changes%20storage%22%3A%22%E4%BB%96%E3%81%AE%E3%82%A6%E3%82%A3%E3%83%B3%E3%83%89%E3%82%A6%E3%81%8C%E3%82%B9%E3%83%88%E3%83%AC%E3%83%BC%E3%82%B8%E3%82%92%E5%A4%89%E3%81%88%E3%81%9F%E3%81%A8%E3%81%8D%22%7D%2C%22ko%22%3A%7B%22_Local%20Storage%22%3A%22%EB%A1%9C%EC%BB%AC%20%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80%22%2C%22_Local%20Storage%20extension%3A%20project%20must%20run%20the%20%5C%22set%20storage%20namespace%20ID%5C%22%20block%20before%20it%20can%20use%20other%20blocks%22%3A%22%EB%A1%9C%EC%BB%AC%20%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80%20%ED%99%95%EC%9E%A5%20%EA%B8%B0%EB%8A%A5%3A%20%ED%99%95%EC%9E%A5%20%EA%B8%B0%EB%8A%A5%EC%9D%98%20%EB%B8%94%EB%A1%9D%EC%9D%84%20%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0%20%EC%A0%84%EC%97%90%20%EB%B0%98%EB%93%9C%EC%8B%9C%20%5C%22%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80%EC%9D%98%20%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4%20ID%EB%A5%BC%20...(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%5C%22%20%EB%B8%94%EB%A1%9D%EC%9D%84%20%EC%8B%A4%ED%96%89%ED%95%B4%EC%95%BC%20%ED%95%A9%EB%8B%88%EB%8B%A4%22%2C%22_project%20title%22%3A%22%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%20%EC%A0%9C%EB%AA%A9%22%2C%22_score%22%3A%22%EC%A0%90%EC%88%98%22%2C%22_when%20another%20window%20changes%20storage%22%3A%22%EB%8B%A4%EB%A5%B8%20%EC%B0%BD%EC%97%90%EC%84%9C%20%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80%EB%A5%BC%20%EB%B3%80%EA%B2%BD%ED%96%88%EC%9D%84%20%EB%95%8C%22%7D%2C%22nb%22%3A%7B%22_Local%20Storage%22%3A%22Lokal%20lagring%22%2C%22_Local%20Storage%20extension%3A%20project%20must%20run%20the%20%5C%22set%20storage%20namespace%20ID%5C%22%20block%20before%20it%20can%20use%20other%20blocks%22%3A%22Lokal%20lagring%20utvidelse%3A%20prosjektet%20m%C3%A5%20kj%C3%B8re%20blokken%20%5C%22sett%20lagringsnavnerom-ID%5C%22%20f%C3%B8r%20det%20kan%20bruke%20andre%20blokker%22%2C%22_project%20title%22%3A%22prosjekttittel%22%2C%22_score%22%3A%22poengsum%22%2C%22_when%20another%20window%20changes%20storage%22%3A%22n%C3%A5r%20et%20annet%20vindu%20endrer%20lagring%22%7D%2C%22nl%22%3A%7B%22_Local%20Storage%22%3A%22Lokale%20opslag%22%2C%22_Local%20Storage%20extension%3A%20project%20must%20run%20the%20%5C%22set%20storage%20namespace%20ID%5C%22%20block%20before%20it%20can%20use%20other%20blocks%22%3A%22Lokale%20opslag-extensie%3A%20het%20project%20moet%20eerst%20een%20opslagnaamruimte-ID%20toegewezen%20krijgen%20voordat%20de%20andere%20blokken%20kunnen%20werken.%22%2C%22_project%20title%22%3A%22projecttitel%22%2C%22_when%20another%20window%20changes%20storage%22%3A%22wanneer%20een%20ander%20venster%20de%20opslag%20aanpast%22%7D%2C%22pl%22%3A%7B%22_project%20title%22%3A%22tytu%C5%82%20projektu%22%2C%22_score%22%3A%22wynik%22%7D%2C%22ru%22%3A%7B%22_Local%20Storage%22%3A%22%D0%9B%D0%BE%D0%BA%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5%20%D0%A5%D1%80%D0%B0%D0%BD%D0%B8%D0%BB%D0%B8%D1%89%D0%B5%22%2C%22_Local%20Storage%20extension%3A%20project%20must%20run%20the%20%5C%22set%20storage%20namespace%20ID%5C%22%20block%20before%20it%20can%20use%20other%20blocks%22%3A%22%D0%A0%D0%B0%D1%81%D1%88%D0%B8%D1%80%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%9B%D0%BE%D0%BA%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5%20%D0%A5%D1%80%D0%B0%D0%BD%D0%B8%D0%BB%D0%B8%D1%89%D0%B5%3A%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%20%D0%B4%D0%BE%D0%BB%D0%B6%D0%B5%D0%BD%20%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D1%82%D0%B8%D1%82%D1%8C%20%D0%B1%D0%BB%D0%BE%D0%BA%20%5C%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20ID%20%D0%BF%D1%80%D0%BE%D1%81%D1%82%D1%80%D0%B0%D0%BD%D1%81%D1%82%D0%B2%D0%B0%20%D0%B8%D0%BC%D0%B5%D0%BD%20%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D0%BB%D0%B8%D1%89%D0%B0%5C%22%2C%20%D0%BF%D1%80%D0%B5%D0%B6%D0%B4%D0%B5%20%D1%87%D0%B5%D0%BC%20%D0%BE%D0%BD%20%D1%81%D0%BC%D0%BE%D0%B6%D0%B5%D1%82%20%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D1%8C%20%D0%B4%D1%80%D1%83%D0%B3%D0%B8%D0%B5%20%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%22%2C%22_Namespace%3A%20%7Bnamespace%7D%22%3A%22%D0%9F%D1%80%D0%BE%D1%81%D1%82%D1%80%D0%B0%D0%BD%D1%81%D1%82%D0%B2%D0%BE%3A%20%7Bnamespace%7D%22%2C%22_No%20namespace%20set%22%3A%22%D0%9D%D0%B5%D1%82%20%D0%B7%D0%B0%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%BF%D1%80%D0%BE%D1%81%D1%82%D1%80%D0%B0%D0%BD%D1%81%D1%82%D0%B2%22%2C%22_delete%20%5BKEY%5D%20from%20storage%22%3A%22%D1%83%D0%B4%D0%B0%D0%BB%D0%B8%D1%82%D1%8C%20%5BKEY%5D%20%D0%B8%D0%B7%20%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D0%BB%D0%B8%D1%89%D0%B0%22%2C%22_delete%20storage%22%3A%22%D1%83%D0%B4%D0%B0%D0%BB%D0%B8%D1%82%D1%8C%20%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D0%BB%D0%B8%D1%89%D0%B5%22%2C%22_get%20%5BKEY%5D%20from%20storage%22%3A%22%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B8%D1%82%D1%8C%20%5BKEY%5D%20%D0%B8%D0%B7%20%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D0%BB%D0%B8%D1%89%D0%B0%22%2C%22_project%20title%22%3A%22%D0%BD%D0%B0%D0%B7%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0%22%2C%22_score%22%3A%22%D0%BE%D1%87%D0%BA%D0%B8%22%2C%22_set%20%5BKEY%5D%20to%20%5BVALUE%5D%20in%20storage%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%5BKEY%5D%20%D0%BD%D0%B0%20%5BVALUE%5D%20%D0%B2%20%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D0%BB%D0%B8%D1%89%D0%B5%22%2C%22_set%20namespace%20to%20%5BID%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D0%BF%D1%80%D0%BE%D1%81%D1%82%D1%80%D0%B0%D0%BD%D1%81%D1%82%D0%B2%D0%BE%20%D0%BD%D0%B0%20%5BID%5D%22%2C%22_when%20another%20window%20changes%20storage%22%3A%22%D0%BA%D0%BE%D0%B3%D0%B4%D0%B0%20%D0%B4%D1%80%D1%83%D0%B3%D0%BE%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%BE%20%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D1%8F%D0%B5%D1%82%20%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D0%BB%D0%B8%D1%89%D0%B5%22%7D%2C%22uk%22%3A%7B%22_Local%20Storage%22%3A%22%D0%9B%D0%BE%D0%BA%D0%B0%D0%BB%D1%8C%D0%BD%D0%B5%20%D0%A1%D1%85%D0%BE%D0%B2%D0%B8%D1%89%D0%B5%22%7D%2C%22zh-cn%22%3A%7B%22_Local%20Storage%22%3A%22%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8%22%2C%22_Local%20Storage%20extension%3A%20project%20must%20run%20the%20%5C%22set%20storage%20namespace%20ID%5C%22%20block%20before%20it%20can%20use%20other%20blocks%22%3A%22%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8%E6%8B%93%E5%B1%95%EF%BC%9A%E8%AF%B7%E5%85%88%E8%BF%90%E8%A1%8C%E2%80%9C%E5%B0%86%E5%AD%98%E5%82%A8%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4ID%E8%AE%BE%E4%B8%BA%E2%80%9D%E7%A7%AF%E6%9C%A8%E6%89%8D%E8%83%BD%E4%BD%BF%E7%94%A8%E4%B8%8B%E9%9D%A2%E7%9A%84%E7%A7%AF%E6%9C%A8%22%2C%22_Namespace%3A%20%7Bnamespace%7D%22%3A%22%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%EF%BC%9A%7Bnamespace%7D%22%2C%22_No%20namespace%20set%22%3A%22%E6%9C%AA%E8%AE%BE%E7%BD%AE%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%22%2C%22_delete%20%5BKEY%5D%20from%20storage%22%3A%22%E4%BB%8E%E5%AD%98%E5%82%A8%E4%B8%AD%E5%88%A0%E9%99%A4%5BKEY%5D%22%2C%22_delete%20storage%22%3A%22%E5%88%A0%E9%99%A4%E5%AD%98%E5%82%A8%22%2C%22_get%20%5BKEY%5D%20from%20storage%22%3A%22%E4%BB%8E%E5%AD%98%E5%82%A8%E4%B8%AD%E8%8E%B7%E5%8F%96%5BKEY%5D%22%2C%22_project%20title%22%3A%22%E4%BD%9C%E5%93%81%E6%A0%87%E9%A2%98%22%2C%22_score%22%3A%22%E5%88%86%E6%95%B0%22%2C%22_set%20%5BKEY%5D%20to%20%5BVALUE%5D%20in%20storage%22%3A%22%E5%B0%86%E5%AD%98%E5%82%A8%E4%B8%AD%E7%9A%84%5BKEY%5D%E8%AE%BE%E4%B8%BA%5BVALUE%5D%22%2C%22_set%20namespace%20to%20%5BID%5D%22%3A%22%E5%B0%86%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E8%AE%BE%E4%B8%BA%5BID%5D%22%2C%22_when%20another%20window%20changes%20storage%22%3A%22%E5%BD%93%E5%85%B6%E4%BB%96%E9%A1%B5%E9%9D%A2%E4%BF%AE%E6%94%B9%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE%22%7D%7D)%3B%2F*%20end%20generated%20l10n%20code%20*%2F(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20%7B%0A%20%20%20%20throw%20new%20Error(%22Local%20Storage%20must%20be%20run%20unsandboxed%22)%3B%0A%20%20%7D%0A%0A%20%20const%20getNamespace%20%3D%20()%20%3D%3E%0A%20%20%20%20Scratch.vm.runtime.extensionStorage%5B%22localstorage%22%5D%3F.namespace%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7Bstring%7D%20newNamespace%0A%20%20%20*%2F%0A%20%20const%20setNamespace%20%3D%20(newNamespace)%20%3D%3E%20%7B%0A%20%20%20%20Scratch.vm.runtime.extensionStorage%5B%22localstorage%22%5D%20%3D%20%7B%0A%20%20%20%20%20%20namespace%3A%20newNamespace%2C%0A%20%20%20%20%7D%3B%0A%20%20%20%20readFromStorage()%3B%0A%0A%20%20%20%20%2F%2F%20We%20can%20generate%20namespace%20before%20we%20have%20fully%20loaded%0A%20%20%20%20if%20(Scratch.vm.extensionManager.isExtensionLoaded(%22localstorage%22))%20%7B%0A%20%20%20%20%20%20Scratch.vm.extensionManager.refreshBlocks(%22localstorage%22)%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20const%20STORAGE_PREFIX%20%3D%20%22extensions.turbowarp.org%2Flocal-storage%3A%22%3B%0A%20%20const%20getStorageKey%20%3D%20()%20%3D%3E%20%60%24%7BSTORAGE_PREFIX%7D%24%7BgetNamespace()%7D%60%3B%0A%0A%20%20%2F**%0A%20%20%20*%20Cached%20in%20memory%20for%20performance.%0A%20%20%20*%20%40type%20%7BRecord%3Cstring%2C%20string%7Cnumber%7Cboolean%3E%7D%0A%20%20%20*%2F%0A%20%20let%20namespaceValues%20%3D%20Object.create(null)%3B%0A%0A%20%20const%20readFromStorage%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20namespaceValues%20%3D%20Object.create(null)%3B%0A%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%2F%2F%20localStorage%20could%20throw%20if%20unsupported%0A%20%20%20%20%20%20const%20data%20%3D%20localStorage.getItem(getStorageKey())%3B%0A%20%20%20%20%20%20if%20(data)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20JSON.parse%20could%20throw%20if%20data%20is%20invalid%0A%20%20%20%20%20%20%20%20const%20parsed%20%3D%20JSON.parse(data)%3B%0A%20%20%20%20%20%20%20%20if%20(parsed%20%26%26%20parsed.data)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Remove%20invalid%20values%20from%20the%20JSON%0A%20%20%20%20%20%20%20%20%20%20for%20(const%20%5Bkey%2C%20value%5D%20of%20Object.entries(parsed.data))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20typeof%20value%20%3D%3D%3D%20%22string%22%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20typeof%20value%20%3D%3D%3D%20%22number%22%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20typeof%20value%20%3D%3D%3D%20%22boolean%22%0A%20%20%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20namespaceValues%5Bkey%5D%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20console.error(%22Error%20reading%20from%20local%20storage%22%2C%20error)%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20const%20saveToLocalStorage%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20if%20(Object.keys(namespaceValues).length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20localStorage.setItem(%0A%20%20%20%20%20%20%20%20%20%20getStorageKey()%2C%0A%20%20%20%20%20%20%20%20%20%20JSON.stringify(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20If%20we%20find%20that%20turbowarp.org%20is%20commonly%20running%20out%20of%20shared%20space%20in%20local%20storage%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20having%20a%20timestamp%20here%20makes%20it%20at%20least%20theoretically%20possible%20to%20delete%20storage%20based%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20on%20last%20used%20time.%0A%20%20%20%20%20%20%20%20%20%20%20%20time%3A%20Math.round(Date.now()%20%2F%201000)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20data%3A%20namespaceValues%2C%0A%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20localStorage.removeItem(getStorageKey())%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20console.error(%22Error%20saving%20to%20local%20storage%22%2C%20error)%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20window.addEventListener(%22storage%22%2C%20(event)%20%3D%3E%20%7B%0A%20%20%20%20if%20(%0A%20%20%20%20%20%20getNamespace()%20%26%26%0A%20%20%20%20%20%20event.key%20%3D%3D%3D%20getStorageKey()%20%26%26%0A%20%20%20%20%20%20event.storageArea%20%3D%3D%3D%20localStorage%0A%20%20%20%20)%20%7B%0A%20%20%20%20%20%20readFromStorage()%3B%0A%20%20%20%20%20%20Scratch.vm.runtime.startHats(%22localstorage_whenChanged%22)%3B%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%0A%20%20const%20generateRandomNamespace%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20doesn't%20need%20to%20be%20cryptographically%20secure%20and%20doesn't%20need%20to%20have%20excessive%20length%0A%20%20%20%20%2F%2F%20this%20has%2016%5E16%20%3D%2018446744073709551616%20possible%20namespaces%20which%20is%20plenty%0A%20%20%20%20const%20soup%20%3D%20%220123456789abcdef%22%3B%0A%20%20%20%20let%20id%20%3D%20%22%22%3B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%2016%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20id%20%2B%3D%20soup%5BMath.floor(Math.random()%20*%20soup.length)%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20id%3B%0A%20%20%7D%3B%0A%0A%20%20const%20prepareInitialNamespace%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20if%20(getNamespace())%20%7B%0A%20%20%20%20%20%20readFromStorage()%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20setNamespace(generateRandomNamespace())%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20Scratch.vm.runtime.on(%22PROJECT_LOADED%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20prepareInitialNamespace()%3B%0A%20%20%7D)%3B%0A%0A%20%20Scratch.vm.runtime.on(%22RUNTIME_DISPOSED%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20Will%20always%20be%20followed%20by%20a%20PROJECT_LOADED%20event%20later%0A%20%20%20%20namespaceValues%20%3D%20Object.create(null)%3B%0A%20%20%7D)%3B%0A%0A%20%20prepareInitialNamespace()%3B%0A%0A%20%20let%20lastNamespaceWarning%20%3D%200%3B%0A%20%20const%20validNamespace%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20const%20valid%20%3D%20!!getNamespace()%3B%0A%20%20%20%20if%20(!valid%20%26%26%20Date.now()%20-%20lastNamespaceWarning%20%3E%203000)%20%7B%0A%20%20%20%20%20%20alert(%0A%20%20%20%20%20%20%20%20Scratch.translate(%0A%20%20%20%20%20%20%20%20%20%20'Local%20Storage%20extension%3A%20project%20must%20run%20the%20%22set%20storage%20namespace%20ID%22%20block%20before%20it%20can%20use%20other%20blocks'%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20lastNamespaceWarning%20%3D%20Date.now()%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20valid%3B%0A%20%20%7D%3B%0A%0A%20%20class%20LocalStorage%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22localstorage%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%22Local%20Storage%22)%2C%0A%20%20%20%20%20%20%20%20docsURI%3A%20%22https%3A%2F%2Fextensions.turbowarp.org%2Flocal-storage%22%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20getNamespace()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3F%20Scratch.translate(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22Namespace%3A%20%7Bnamespace%7D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20namespace%3A%20getNamespace()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20Scratch.translate(%22No%20namespace%20set%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22get%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22get%20%5BKEY%5D%20from%20storage%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20KEY%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22score%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22set%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20%5BKEY%5D%20to%20%5BVALUE%5D%20in%20storage%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20KEY%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22score%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%221000%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22remove%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22delete%20%5BKEY%5D%20from%20storage%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20KEY%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22score%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22removeAll%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22delete%20storage%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22whenChanged%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.EVENT%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22when%20another%20window%20changes%20storage%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setProjectId%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20namespace%20to%20%5BID%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20getNamespace()%20%7C%7C%20Scratch.translate(%22project%20title%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setProjectId(%7B%20ID%20%7D)%20%7B%0A%20%20%20%20%20%20setNamespace(Scratch.Cast.toString(ID))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20get(%7B%20KEY%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(!validNamespace())%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20KEY%20%3D%20Scratch.Cast.toString(KEY)%3B%0A%20%20%20%20%20%20if%20(!Object.prototype.hasOwnProperty.call(namespaceValues%2C%20KEY))%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20namespaceValues%5BKEY%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20set(%7B%20KEY%2C%20VALUE%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(!validNamespace())%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20namespaceValues%5BScratch.Cast.toString(KEY)%5D%20%3D%20VALUE%3B%0A%20%20%20%20%20%20saveToLocalStorage()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20remove(%7B%20KEY%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(!validNamespace())%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20delete%20namespaceValues%5BScratch.Cast.toString(KEY)%5D%3B%0A%20%20%20%20%20%20saveToLocalStorage()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20removeAll()%20%7B%0A%20%20%20%20%20%20if%20(!validNamespace())%20%7B%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20namespaceValues%20%3D%20Object.create(null)%3B%0A%20%20%20%20%20%20saveToLocalStorage()%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20LocalStorage())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Video%0D%0A%2F%2F%20ID%3A%20lmsVideo%0D%0A%2F%2F%20Description%3A%20Play%20videos%20from%20URLs.%0D%0A%2F%2F%20By%3A%20LilyMakesThings%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FLilyMakesThings%2F%3E%0D%0A%2F%2F%20By%3A%20SharkPool%0D%0A%2F%2F%20By%3A%20Fath11%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2Ffath11%2F%3E%0D%0A%2F%2F%20License%3A%20MIT%20AND%20LGPL-3.0%0D%0A%0D%0A%2F%2F%20Attribution%20is%20not%20required%2C%20but%20greatly%20appreciated.%0D%0A%0D%0A%2F*%20generated%20l10n%20code%20*%2FScratch.translate.setup(%7B%22de%22%3A%7B%22_height%22%3A%22H%C3%B6he%22%2C%22_width%22%3A%22Weite%22%7D%2C%22fi%22%3A%7B%22_%5BATTRIBUTE%5D%20of%20video%20%5BNAME%5D%22%3A%22videon%20%5BNAME%5D%20%5BATTRIBUTE%5D%22%2C%22_current%20time%22%3A%22nykyinen%20aika%22%2C%22_current%20video%20on%20%5BTARGET%5D%22%3A%22hahmon%20%5BTARGET%5D%20t%C3%A4m%C3%A4nhetkinen%20video%22%2C%22_delete%20video%20%5BNAME%5D%22%3A%22poista%20video%20%5BNAME%5D%22%2C%22_duration%22%3A%22kesto%22%2C%22_height%22%3A%22korkeus%22%2C%22_load%20video%20from%20URL%20%5BURL%5D%20as%20%5BNAME%5D%22%3A%22lataa%20video%20URL-osoitteesta%20%5BURL%5D%20nimell%C3%A4%20%5BNAME%5D%22%2C%22_loaded%20videos%22%3A%22ladatut%20videot%22%2C%22_loop%22%3A%22toista%20silmukassa%22%2C%22_looping%22%3A%22silmukassa%22%2C%22_not%20loop%22%3A%22%C3%A4l%C3%A4%20toista%20silmukassa%22%2C%22_pause%20video%20%5BNAME%5D%22%3A%22keskeyt%C3%A4%20video%20%5BNAME%5D%22%2C%22_paused%22%3A%22keskeytetty%22%2C%22_playback%20rate%22%3A%22toistonopeus%22%2C%22_playing%22%3A%22k%C3%A4ynniss%C3%A4%22%2C%22_resume%20video%20%5BNAME%5D%22%3A%22jatka%20videota%20%5BNAME%5D%22%2C%22_screenshot%20of%20video%20%5BNAME%5D%20at%20current%20time%22%3A%22ruutukaappaus%20videon%20%5BNAME%5D%20nykyhetkest%C3%A4%22%2C%22_set%20playback%20rate%20of%20video%20%5BNAME%5D%20to%20%5BRATE%5D%22%3A%22aseta%20videon%20%5BNAME%5D%20toistonopeudeksi%20%5BRATE%5D%22%2C%22_set%20video%20%5BNAME%5D%20to%20%5BLOOP%5D%22%3A%22aseta%20videon%20%5BNAME%5D%20tilaksi%20%5BLOOP%5D%22%2C%22_set%20volume%20of%20video%20%5BNAME%5D%20to%20%5BVALUE%5D%22%3A%22aseta%20videon%20%5BNAME%5D%20%C3%A4%C3%A4nenvoimakkuudeksi%20%5BVALUE%5D%22%2C%22_show%20video%20%5BNAME%5D%20on%20%5BTARGET%5D%22%3A%22n%C3%A4yt%C3%A4%20video%20%5BNAME%5D%20hahmossa%20%5BTARGET%5D%22%2C%22_start%20video%20%5BNAME%5D%20at%20%5BDURATION%5D%20seconds%22%3A%22k%C3%A4ynnist%C3%A4%20video%20%5BNAME%5D%20%5BDURATION%5D%20s%3An%20kohdalta%20%22%2C%22_start%20video%20%5BNAME%5D%20at%20%5BDURATION%5D%20seconds%20and%20wait%20until%20done%22%3A%22k%C3%A4ynnist%C3%A4%20video%20%5BNAME%5D%20%5BDURATION%5D%20s%3An%20kohdalta%20ja%20odota%22%2C%22_stop%20showing%20video%20on%20%5BTARGET%5D%22%3A%22lopeta%20videon%20n%C3%A4ytt%C3%A4minen%20hahmossa%20%5BTARGET%5D%22%2C%22_video%20%5BNAME%5D%20is%20%5BSTATE%5D%3F%22%3A%22onko%20video%20%5BNAME%5D%20%5BSTATE%5D%3F%22%2C%22_volume%22%3A%22%C3%A4%C3%A4nenvoimakkuus%22%2C%22_width%22%3A%22leveys%22%7D%2C%22fr%22%3A%7B%22_height%22%3A%22hauteur%22%2C%22_width%22%3A%22largeur%22%7D%2C%22it%22%3A%7B%22_%5BATTRIBUTE%5D%20of%20video%20%5BNAME%5D%22%3A%22%5BATTRIBUTE%5D%20del%20video%20%5BNAME%5D%22%2C%22_current%20time%22%3A%22ora%20attuale%22%2C%22_current%20video%20on%20%5BTARGET%5D%22%3A%22video%20attuale%20di%20%5BTARGET%5D%22%2C%22_delete%20video%20%5BNAME%5D%22%3A%22rimuovi%20video%20%5BNAME%5D%22%2C%22_duration%22%3A%22durata%22%2C%22_height%22%3A%22altezza%22%2C%22_load%20video%20from%20URL%20%5BURL%5D%20as%20%5BNAME%5D%22%3A%22carica%20video%20da%20URL%20%5BURL%5D%20come%20%5BNAME%5D%22%2C%22_loaded%20videos%22%3A%22video%20caricati%22%2C%22_loop%22%3A%22ciclo%22%2C%22_looping%22%3A%22ciclica%22%2C%22_not%20loop%22%3A%22una%20sola%20volta%22%2C%22_pause%20video%20%5BNAME%5D%22%3A%22metti%20in%20pausa%20video%20%5BNAME%5D%22%2C%22_paused%22%3A%22in%20pausa%22%2C%22_playback%20rate%22%3A%22velocit%C3%A0%20riproduzione%22%2C%22_playing%22%3A%22in%20riproduzione%22%2C%22_resume%20video%20%5BNAME%5D%22%3A%22riprendi%20video%20%5BNAME%5D%22%2C%22_screenshot%20of%20video%20%5BNAME%5D%20at%20current%20time%22%3A%22schermata%20del%20video%20%5BNAME%5D%20nel%20punto%20attuale%22%2C%22_set%20playback%20rate%20of%20video%20%5BNAME%5D%20to%20%5BRATE%5D%22%3A%22porta%20velocit%C3%A0%20riproduzione%20video%20%5BNAME%5D%20a%20%5BRATE%5D%22%2C%22_set%20video%20%5BNAME%5D%20to%20%5BLOOP%5D%22%3A%22imposta%20riproduzione%20video%20%5BNAME%5D%20a%20%5BLOOP%5D%22%2C%22_set%20volume%20of%20video%20%5BNAME%5D%20to%20%5BVALUE%5D%22%3A%22imposta%20volume%20video%20%5BNAME%5D%20a%20%5BVALUE%5D%22%2C%22_show%20video%20%5BNAME%5D%20on%20%5BTARGET%5D%22%3A%22mostra%20video%20%5BNAME%5D%20di%20%5BTARGET%5D%22%2C%22_start%20video%20%5BNAME%5D%20at%20%5BDURATION%5D%20seconds%22%3A%22avvia%20video%20%5BNAME%5D%20a%20partire%20da%20%5BDURATION%5D%20secondi%22%2C%22_start%20video%20%5BNAME%5D%20at%20%5BDURATION%5D%20seconds%20and%20wait%20until%20done%22%3A%22avvia%20video%20%5BNAME%5D%20da%20%5BDURATION%5D%20secondi%20e%20attendi%20la%20fine%22%2C%22_stop%20showing%20video%20on%20%5BTARGET%5D%22%3A%22arresta%20riproduzione%20video%20di%20%5BTARGET%5D%22%2C%22_video%20%5BNAME%5D%20is%20%5BSTATE%5D%3F%22%3A%22video%20%5BNAME%5D%20%C3%A8%20%5BSTATE%5D%22%2C%22_width%22%3A%22larghezza%22%7D%2C%22ja%22%3A%7B%22_Video%22%3A%22%E5%8B%95%E7%94%BB%22%2C%22_%5BATTRIBUTE%5D%20of%20video%20%5BNAME%5D%22%3A%22%E5%8B%95%E7%94%BB%5BNAME%5D%E3%81%AE%5BATTRIBUTE%5D%22%2C%22_current%20time%22%3A%22%E7%8F%BE%E5%9C%A8%E3%81%AE%E5%86%8D%E7%94%9F%E6%99%82%E9%96%93%22%2C%22_current%20video%20on%20%5BTARGET%5D%22%3A%22%E7%8F%BE%E5%9C%A8%E3%81%AE%5BTARGET%5D%E4%B8%8A%E3%81%AE%E5%8B%95%E7%94%BB%22%2C%22_delete%20video%20%5BNAME%5D%22%3A%22%E5%8B%95%E7%94%BB%5BNAME%5D%E3%82%92%E5%89%8A%E9%99%A4%E3%81%99%E3%82%8B%22%2C%22_duration%22%3A%22%E9%95%B7%E3%81%95%22%2C%22_height%22%3A%22%E9%AB%98%E3%81%95%22%2C%22_load%20video%20from%20URL%20%5BURL%5D%20as%20%5BNAME%5D%22%3A%22%E5%8B%95%E7%94%BB%E3%82%92URL%5BURL%5D%E3%81%8B%E3%82%89%5BNAME%5D%E3%81%A8%E3%81%97%E3%81%A6%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%82%80%22%2C%22_loaded%20videos%22%3A%22%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%81%BE%E3%82%8C%E3%81%9F%E5%8B%95%E7%94%BB%22%2C%22_loop%22%3A%22%E3%83%AB%E3%83%BC%E3%83%97%E5%86%8D%E7%94%9F%22%2C%22_looping%22%3A%22%E3%83%AB%E3%83%BC%E3%83%97%E5%86%8D%E7%94%9F%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%22%2C%22_not%20loop%22%3A%22%E3%83%AB%E3%83%BC%E3%83%97%E5%86%8D%E7%94%9F%E3%81%97%E3%81%AA%E3%81%84%22%2C%22_pause%20video%20%5BNAME%5D%22%3A%22%E5%8B%95%E7%94%BB%5BNAME%5D%E3%82%92%E4%B8%80%E6%99%82%E5%81%9C%E6%AD%A2%E3%81%99%E3%82%8B%22%2C%22_paused%22%3A%22%E4%B8%80%E6%99%82%E5%81%9C%E6%AD%A2%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%22%2C%22_playback%20rate%22%3A%22%E5%86%8D%E7%94%9F%E9%80%9F%E5%BA%A6%22%2C%22_playing%22%3A%22%E5%86%8D%E7%94%9F%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%22%2C%22_resume%20video%20%5BNAME%5D%22%3A%22%E5%8B%95%E7%94%BB%5BNAME%5D%E3%82%92%E5%86%8D%E9%96%8B%E3%81%99%E3%82%8B%22%2C%22_screenshot%20of%20video%20%5BNAME%5D%20at%20current%20time%22%3A%22%E7%8F%BE%E5%9C%A8%E6%99%82%E9%96%93%E3%81%AE%E5%8B%95%E7%94%BB%5BNAME%5D%E3%81%AE%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%22%2C%22_set%20playback%20rate%20of%20video%20%5BNAME%5D%20to%20%5BRATE%5D%22%3A%22%E5%8B%95%E7%94%BB%5BNAME%5D%E3%81%AE%E5%86%8D%E7%94%9F%E9%80%9F%E5%BA%A6%E3%82%92%5BRATE%5D%E5%80%8D%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_set%20video%20%5BNAME%5D%20to%20%5BLOOP%5D%22%3A%22%E5%8B%95%E7%94%BB%5BNAME%5D%E3%82%92%5BLOOP%5D%22%2C%22_set%20volume%20of%20video%20%5BNAME%5D%20to%20%5BVALUE%5D%22%3A%22%E5%8B%95%E7%94%BB%5BNAME%5D%E3%81%AE%E9%9F%B3%E9%87%8F%E3%82%92%5BVALUE%5D%E3%81%AB%E3%82%BB%E3%83%83%E3%83%88%E3%81%99%E3%82%8B%22%2C%22_show%20video%20%5BNAME%5D%20on%20%5BTARGET%5D%22%3A%22%E5%8B%95%E7%94%BB%5BNAME%5D%E3%82%92%5BTARGET%5D%E3%81%AB%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B%22%2C%22_start%20video%20%5BNAME%5D%20at%20%5BDURATION%5D%20seconds%22%3A%22%E5%8B%95%E7%94%BB%5BNAME%5D%E3%82%92%5BDURATION%5D%E7%A7%92%E3%81%8B%E3%82%89%E5%86%8D%E7%94%9F%E3%81%99%E3%82%8B%22%2C%22_start%20video%20%5BNAME%5D%20at%20%5BDURATION%5D%20seconds%20and%20wait%20until%20done%22%3A%22%E7%B5%82%E3%82%8F%E3%82%8B%E3%81%BE%E3%81%A7%E5%8B%95%E7%94%BB%5BNAME%5D%E3%82%92%5BDURATION%5D%E7%A7%92%E3%81%8B%E3%82%89%E5%86%8D%E7%94%9F%E3%81%99%E3%82%8B%22%2C%22_stop%20showing%20video%20on%20%5BTARGET%5D%22%3A%22%5BTARGET%5D%E3%81%A7%E5%8B%95%E7%94%BB%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B%E3%81%AE%E3%82%92%E6%AD%A2%E3%82%81%E3%82%8B%22%2C%22_video%20%5BNAME%5D%20is%20%5BSTATE%5D%3F%22%3A%22%E5%8B%95%E7%94%BB%5BNAME%5D%E3%81%8C%5BSTATE%5D%22%2C%22_volume%22%3A%22%E9%9F%B3%E9%87%8F%22%2C%22_width%22%3A%22%E6%A8%AA%E5%B9%85%22%7D%2C%22ko%22%3A%7B%22_Video%22%3A%22%EB%B9%84%EB%94%94%EC%98%A4%22%2C%22_%5BATTRIBUTE%5D%20of%20video%20%5BNAME%5D%22%3A%22%EB%B9%84%EB%94%94%EC%98%A4%20%5BNAME%5D%EC%9D%98%20%5BATTRIBUTE%5D%22%2C%22_current%20time%22%3A%22%ED%98%84%EC%9E%AC%20%EC%9E%AC%EC%83%9D%20%EC%8B%9C%EA%B0%84%22%2C%22_current%20video%20on%20%5BTARGET%5D%22%3A%22%5BTARGET%5D%EC%9D%98%20%ED%98%84%EC%9E%AC%20%EB%B9%84%EB%94%94%EC%98%A4%22%2C%22_delete%20video%20%5BNAME%5D%22%3A%22%EB%B9%84%EB%94%94%EC%98%A4%20%5BNAME%5D%EC%9D%84(%EB%A5%BC)%20%EC%82%AD%EC%A0%9C%ED%95%98%EA%B8%B0%22%2C%22_duration%22%3A%22%EC%9E%AC%EC%83%9D%20%EA%B8%B8%EC%9D%B4%22%2C%22_height%22%3A%22%EB%86%92%EC%9D%B4%22%2C%22_load%20video%20from%20URL%20%5BURL%5D%20as%20%5BNAME%5D%22%3A%22%EB%B9%84%EB%94%94%EC%98%A4%20%5BNAME%5D%EC%9D%84(%EB%A5%BC)%20URL%EC%97%90%EC%84%9C%20%EB%B6%88%EB%9F%AC%EC%98%A4%EA%B8%B0%20%5BURL%5D%22%2C%22_loaded%20videos%22%3A%22%EB%B6%88%EB%9F%AC%EC%98%A8%20%EB%B9%84%EB%94%94%EC%98%A4%20%EB%AA%A9%EB%A1%9D%22%2C%22_pause%20video%20%5BNAME%5D%22%3A%22%EB%B9%84%EB%94%94%EC%98%A4%20%5BNAME%5D%20%EC%9D%BC%EC%8B%9C%EC%A0%95%EC%A7%80%ED%95%98%EA%B8%B0%22%2C%22_paused%22%3A%22%EC%9D%BC%EC%8B%9C%EC%A0%95%EC%A7%80%20%EC%A4%91%22%2C%22_playback%20rate%22%3A%22%EC%9E%AC%EC%83%9D%20%EC%86%8D%EB%8F%84%22%2C%22_playing%22%3A%22%EC%9E%AC%EC%83%9D%20%EC%A4%91%22%2C%22_resume%20video%20%5BNAME%5D%22%3A%22%EB%B9%84%EB%94%94%EC%98%A4%20%5BNAME%5D%20%EC%9E%AC%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0%22%2C%22_screenshot%20of%20video%20%5BNAME%5D%20at%20current%20time%22%3A%22%EB%B9%84%EB%94%94%EC%98%A4%20%5BNAME%5D%EC%9D%98%20%ED%98%84%EC%9E%AC%20%ED%99%94%EB%A9%B4%20%EC%BA%A1%EC%B3%90%ED%95%98%EA%B8%B0%22%2C%22_set%20playback%20rate%20of%20video%20%5BNAME%5D%20to%20%5BRATE%5D%22%3A%22%EB%B9%84%EB%94%94%EC%98%A4%20%5BNAME%5D%EC%9D%98%20%EC%9E%AC%EC%83%9D%20%EC%86%8D%EB%8F%84%EB%A5%BC%20%5BRATE%5D(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22_set%20volume%20of%20video%20%5BNAME%5D%20to%20%5BVALUE%5D%22%3A%22%EB%B9%84%EB%94%94%EC%98%A4%20%5BNAME%5D%EC%9D%98%20%EC%9D%8C%EB%9F%89%EC%9D%84%20%5BVALUE%5D(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22_show%20video%20%5BNAME%5D%20on%20%5BTARGET%5D%22%3A%22%EB%B9%84%EB%94%94%EC%98%A4%20%5BNAME%5D%EC%9D%84(%EB%A5%BC)%20%5BTARGET%5D%EC%97%90%20%EB%B3%B4%EC%9D%B4%EA%B8%B0%22%2C%22_start%20video%20%5BNAME%5D%20at%20%5BDURATION%5D%20seconds%22%3A%22%EB%B9%84%EB%94%94%EC%98%A4%20%5BNAME%5D%EC%9D%84(%EB%A5%BC)%20%5BDURATION%5D%EC%B4%88%20%EB%B6%80%ED%84%B0%20%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0%22%2C%22_stop%20showing%20video%20on%20%5BTARGET%5D%22%3A%22%5BTARGET%5D%EC%9D%98%20%EB%B9%84%EB%94%94%EC%98%A4%20%EC%88%A8%EA%B8%B0%EA%B8%B0%22%2C%22_video%20%5BNAME%5D%20is%20%5BSTATE%5D%3F%22%3A%22%EB%B9%84%EB%94%94%EC%98%A4%20%5BNAME%5D%EC%9D%B4(%EA%B0%80)%20%5BSTATE%5D%EC%9D%B8%EA%B0%80%3F%22%2C%22_volume%22%3A%22%EC%9D%8C%EB%9F%89%22%2C%22_width%22%3A%22%EB%84%93%EC%9D%B4%22%7D%2C%22nb%22%3A%7B%22_height%22%3A%22h%C3%B8yde%22%2C%22_width%22%3A%22bredde%22%7D%2C%22nl%22%3A%7B%22_%5BATTRIBUTE%5D%20of%20video%20%5BNAME%5D%22%3A%22%5BATTRIBUTE%5D%20van%20video%20%5BNAME%5D%22%2C%22_current%20time%22%3A%22huidige%20tijd%22%2C%22_current%20video%20on%20%5BTARGET%5D%22%3A%22huidige%20video%20op%20%5BTARGET%5D%22%2C%22_delete%20video%20%5BNAME%5D%22%3A%22verwijder%20video%20%5BNAME%5D%22%2C%22_duration%22%3A%22duur%22%2C%22_height%22%3A%22hoogte%22%2C%22_load%20video%20from%20URL%20%5BURL%5D%20as%20%5BNAME%5D%22%3A%22laad%20video%20van%20URL%20%5BURL%5D%20als%20%5BNAME%5D%22%2C%22_loaded%20videos%22%3A%22geladen%20video's%22%2C%22_pause%20video%20%5BNAME%5D%22%3A%22pauzeer%20video%20%5BNAME%5D%22%2C%22_paused%22%3A%22gepauzeerd%22%2C%22_playing%22%3A%22aan%20het%20afspelen%22%2C%22_resume%20video%20%5BNAME%5D%22%3A%22hervat%20video%20%5BNAME%5D%22%2C%22_set%20volume%20of%20video%20%5BNAME%5D%20to%20%5BVALUE%5D%22%3A%22zet%20volume%20van%20video%20%5BNAME%5D%20op%20%5BVALUE%5D%22%2C%22_show%20video%20%5BNAME%5D%20on%20%5BTARGET%5D%22%3A%22toon%20video%20%5BNAME%5D%20op%20%5BTARGET%5D%22%2C%22_start%20video%20%5BNAME%5D%20at%20%5BDURATION%5D%20seconds%22%3A%22start%20video%20%5BNAME%5D%20op%20%5BDURATION%5D%20seconden%22%2C%22_stop%20showing%20video%20on%20%5BTARGET%5D%22%3A%22stop%20met%20video%20tonen%20op%20%5BTARGET%5D%22%2C%22_width%22%3A%22breedte%22%7D%2C%22pl%22%3A%7B%22_Video%22%3A%22Film%22%2C%22_height%22%3A%22wysoko%C5%9B%C4%87%22%2C%22_volume%22%3A%22g%C5%82o%C5%9Bno%C5%9B%C4%87%22%2C%22_width%22%3A%22szeroko%C5%9B%C4%87%22%7D%2C%22ru%22%3A%7B%22_Video%22%3A%22%D0%92%D0%B8%D0%B4%D0%B5%D0%BE%22%2C%22_%5BATTRIBUTE%5D%20of%20video%20%5BNAME%5D%22%3A%22%5BATTRIBUTE%5D%20%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE%20%5BNAME%5D%22%2C%22_current%20time%22%3A%22%D0%BF%D1%80%D0%BE%D1%88%D0%B5%D0%B4%D1%88%D0%B5%D0%B5%20%D0%B2%D1%80%D0%B5%D0%BC%D1%8F%22%2C%22_current%20video%20on%20%5BTARGET%5D%22%3A%22%D1%82%D0%B5%D0%BA%D1%83%D1%89%D0%B5%D0%B5%20%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE%20%D0%BD%D0%B0%20%5BTARGET%5D%22%2C%22_delete%20video%20%5BNAME%5D%22%3A%22%D1%83%D0%B4%D0%B0%D0%BB%D0%B8%D1%82%D1%8C%20%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE%20%5BNAME%5D%22%2C%22_duration%22%3A%22%D0%B4%D0%BB%D0%B8%D0%BD%D0%B0%22%2C%22_height%22%3A%22%D0%B2%D1%8B%D1%81%D0%BE%D1%82%D0%B0%22%2C%22_load%20video%20from%20URL%20%5BURL%5D%20as%20%5BNAME%5D%22%3A%22%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%B8%D1%82%D1%8C%20%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE%20%D0%B8%D0%B7%20URL%20%5BURL%5D%20%D0%BA%D0%B0%D0%BA%20%5BNAME%5D%22%2C%22_loaded%20videos%22%3A%22%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5%20%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE%22%2C%22_loop%22%3A%22%D0%BF%D0%BE%D0%B2%D1%82%D0%BE%D1%80%22%2C%22_looping%22%3A%22%D0%BF%D0%BE%D0%B2%D1%82%D0%BE%D1%80%D0%B5%D0%BD%D0%B8%D0%B5%22%2C%22_not%20loop%22%3A%22%D0%B1%D0%B5%D0%B7%20%D0%BF%D0%BE%D0%B2%D1%82%D0%BE%D1%80%D0%B0%22%2C%22_pause%20video%20%5BNAME%5D%22%3A%22%D0%BF%D1%80%D0%B8%D0%BE%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE%20%5BNAME%5D%22%2C%22_paused%22%3A%22%D0%BF%D1%80%D0%B8%D0%BE%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%BE%22%2C%22_playback%20rate%22%3A%22%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D1%8C%20%D0%B2%D0%BE%D1%81%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D1%8F%22%2C%22_playing%22%3A%22%D0%B8%D0%B3%D1%80%D0%B0%D0%B5%D1%82%22%2C%22_resume%20video%20%5BNAME%5D%22%3A%22%D0%BF%D1%80%D0%BE%D0%B4%D0%BE%D0%BB%D0%B6%D0%B8%D1%82%D1%8C%20%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE%20%5BNAME%5D%22%2C%22_screenshot%20of%20video%20%5BNAME%5D%20at%20current%20time%22%3A%22%D1%81%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE%20%5BNAME%5D%20%D0%BD%D0%B0%20%D1%82%D0%B5%D0%BA%D1%83%D1%89%D0%B8%D0%B9%20%D0%BC%D0%BE%D0%BC%D0%B5%D0%BD%D1%82%22%2C%22_set%20playback%20rate%20of%20video%20%5BNAME%5D%20to%20%5BRATE%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D1%8C%20%D0%B2%D0%BE%D1%81%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE%20%5BNAME%5D%20%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%20%5BRATE%5D%22%2C%22_set%20video%20%5BNAME%5D%20to%20%5BLOOP%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE%20%5BNAME%5D%20%D0%BD%D0%B0%20%5BLOOP%5D%22%2C%22_set%20volume%20of%20video%20%5BNAME%5D%20to%20%5BVALUE%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D0%B7%D0%B2%D1%83%D0%BA%20%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE%20%5BNAME%5D%20%D0%BD%D0%B0%20%5BVALUE%5D%22%2C%22_show%20video%20%5BNAME%5D%20on%20%5BTARGET%5D%22%3A%22%D0%BF%D0%BE%D0%BA%D0%B0%D0%B7%D0%B0%D1%82%D1%8C%20%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE%20%5BNAME%5D%20%D0%BD%D0%B0%5BTARGET%5D%22%2C%22_start%20video%20%5BNAME%5D%20at%20%5BDURATION%5D%20seconds%22%3A%22%D0%BD%D0%B0%D1%87%D0%B0%D1%82%D1%8C%20%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE%20%5BNAME%5D%20%D0%BD%D0%B0%20%5BDURATION%5D%20%D1%81%D0%B5%D0%BA%D1%83%D0%BD%D0%B4%D0%B0%D1%85%22%2C%22_start%20video%20%5BNAME%5D%20at%20%5BDURATION%5D%20seconds%20and%20wait%20until%20done%22%3A%22%D0%B2%D0%BE%D1%81%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%B5%D1%81%D1%82%D0%B8%20%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE%20%5BNAME%5D%20%D0%BD%D0%B0%20%5BDURATION%5D%20%D1%81%D0%B5%D0%BA%D1%83%D0%BD%D0%B4%20%D0%B8%20%D0%B6%D0%B4%D0%B0%D1%82%D1%8C%20%D0%B4%D0%BE%20%D0%BA%D0%BE%D0%BD%D1%86%D0%B0%20%22%2C%22_stop%20showing%20video%20on%20%5BTARGET%5D%22%3A%22%D0%BE%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C%20%D0%BF%D0%BE%D0%BA%D0%B0%D0%B7%D1%8B%D0%B2%D0%B0%D1%8E%D1%89%D0%B8%D0%B9%D1%81%D1%8F%20%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE%20%D0%BD%D0%B0%20%5BTARGET%5D%22%2C%22_video%20%5BNAME%5D%20is%20%5BSTATE%5D%3F%22%3A%22%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE%20%5BNAME%5D%20%5BSTATE%5D%3F%22%2C%22_volume%22%3A%22%D0%BE%D0%B1%D1%8A%D1%91%D0%BC%22%2C%22_width%22%3A%22%D1%88%D0%B8%D1%80%D0%B8%D0%BD%D0%B0%22%7D%2C%22uk%22%3A%7B%22_Video%22%3A%22%D0%92%D1%96%D0%B4%D0%B5%D0%BE%22%2C%22_height%22%3A%22%D0%B2%D0%B8%D1%81%D0%BE%D1%82%D0%B0%22%2C%22_width%22%3A%22%D1%88%D0%B8%D1%80%D0%B8%D0%BD%D0%B0%22%7D%2C%22zh-cn%22%3A%7B%22_Video%22%3A%22%E8%A7%86%E9%A2%91%22%2C%22_%5BATTRIBUTE%5D%20of%20video%20%5BNAME%5D%22%3A%22%E8%A7%86%E9%A2%91%5BNAME%5D%E7%9A%84%5BATTRIBUTE%5D%22%2C%22_current%20time%22%3A%22%E5%BD%93%E5%89%8D%E6%97%B6%E9%97%B4%22%2C%22_current%20video%20on%20%5BTARGET%5D%22%3A%22%5BTARGET%5D%E5%BD%93%E5%89%8D%E6%92%AD%E6%94%BE%E7%9A%84%E8%A7%86%E9%A2%91%22%2C%22_delete%20video%20%5BNAME%5D%22%3A%22%E5%88%A0%E9%99%A4%E5%90%8D%E4%B8%BA%5BNAME%5D%E7%9A%84%E8%A7%86%E9%A2%91%22%2C%22_duration%22%3A%22%E6%97%B6%E9%95%BF%22%2C%22_height%22%3A%22%E9%AB%98%E5%BA%A6%22%2C%22_load%20video%20from%20URL%20%5BURL%5D%20as%20%5BNAME%5D%22%3A%22%E4%BB%8EURL%5BURL%5D%E5%8A%A0%E8%BD%BD%E8%A7%86%E9%A2%91%E5%B9%B6%E5%91%BD%E5%90%8D%E4%B8%BA%5BNAME%5D%22%2C%22_loaded%20videos%22%3A%22%E5%B7%B2%E5%8A%A0%E8%BD%BD%E7%9A%84%E8%A7%86%E9%A2%91%22%2C%22_loop%22%3A%22%E5%BE%AA%E7%8E%AF%22%2C%22_looping%22%3A%22%E5%BE%AA%E7%8E%AF%E6%A8%A1%E5%BC%8F%22%2C%22_not%20loop%22%3A%22%E4%B8%8D%E5%BE%AA%E7%8E%AF%22%2C%22_pause%20video%20%5BNAME%5D%22%3A%22%E6%9A%82%E5%81%9C%E8%A7%86%E9%A2%91%5BNAME%5D%22%2C%22_paused%22%3A%22%E6%9A%82%E5%81%9C%22%2C%22_playback%20rate%22%3A%22%E6%92%AD%E6%94%BE%E9%80%9F%E5%BA%A6%22%2C%22_playing%22%3A%22%E6%92%AD%E6%94%BE%22%2C%22_resume%20video%20%5BNAME%5D%22%3A%22%E7%BB%A7%E7%BB%AD%E8%A7%86%E9%A2%91%5BNAME%5D%22%2C%22_screenshot%20of%20video%20%5BNAME%5D%20at%20current%20time%22%3A%22%E8%A7%86%E9%A2%91%5BNAME%5D%E5%BD%93%E5%89%8D%E6%97%B6%E9%97%B4%E7%9A%84%E6%88%AA%E5%9B%BE%22%2C%22_set%20playback%20rate%20of%20video%20%5BNAME%5D%20to%20%5BRATE%5D%22%3A%22%E5%B0%86%E8%A7%86%E9%A2%91%5BNAME%5D%E7%9A%84%E6%92%AD%E6%94%BE%E9%80%9F%E5%BA%A6%E8%AE%BE%E4%B8%BA%5BRATE%5D%22%2C%22_set%20video%20%5BNAME%5D%20to%20%5BLOOP%5D%22%3A%22%E5%B0%86%E8%A7%86%E9%A2%91%5BNAME%5D%E8%AE%BE%E4%B8%BA%5BLOOP%5D%22%2C%22_set%20volume%20of%20video%20%5BNAME%5D%20to%20%5BVALUE%5D%22%3A%22%E5%B0%86%E8%A7%86%E9%A2%91%5BNAME%5D%E7%9A%84%E9%9F%B3%E9%87%8F%E8%AE%BE%E4%B8%BA%5BVALUE%5D%22%2C%22_show%20video%20%5BNAME%5D%20on%20%5BTARGET%5D%22%3A%22%E5%9C%A8%5BTARGET%5D%E4%B8%8A%E6%98%BE%E7%A4%BA%E8%A7%86%E9%A2%91%5BNAME%5D%22%2C%22_start%20video%20%5BNAME%5D%20at%20%5BDURATION%5D%20seconds%22%3A%22%E4%BB%8E%5BDURATION%5D%E7%A7%92%E5%BC%80%E5%A7%8B%E6%92%AD%E6%94%BE%E8%A7%86%E9%A2%91%5BNAME%5D%22%2C%22_start%20video%20%5BNAME%5D%20at%20%5BDURATION%5D%20seconds%20and%20wait%20until%20done%22%3A%22%E4%BB%8E%5BDURATION%5D%E7%A7%92%E5%BC%80%E5%A7%8B%E6%92%AD%E6%94%BE%E8%A7%86%E9%A2%91%5BNAME%5D%E5%B9%B6%E7%AD%89%E5%BE%85%E7%BB%93%E6%9D%9F%22%2C%22_stop%20showing%20video%20on%20%5BTARGET%5D%22%3A%22%E5%81%9C%E6%AD%A2%E5%9C%A8%5BTARGET%5D%E4%B8%8A%E6%98%BE%E7%A4%BA%E8%A7%86%E9%A2%91%22%2C%22_video%20%5BNAME%5D%20is%20%5BSTATE%5D%3F%22%3A%22%E8%A7%86%E9%A2%91%5BNAME%5D%E5%9C%A8%5BSTATE%5D%EF%BC%9F%22%2C%22_volume%22%3A%22%E9%9F%B3%E9%87%8F%22%2C%22_width%22%3A%22%E5%AE%BD%E5%BA%A6%22%7D%7D)%3B%2F*%20end%20generated%20l10n%20code%20*%2F(function%20(Scratch)%20%7B%0D%0A%20%20%22use%20strict%22%3B%0D%0A%0D%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0D%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0D%0A%20%20const%20renderer%20%3D%20vm.renderer%3B%0D%0A%20%20const%20Cast%20%3D%20Scratch.Cast%3B%0D%0A%0D%0A%20%20%2F%2F%20In%20some%20versions%20of%20Chrome%2C%20it%20seems%20that%20trying%20to%20render%20a%20%3Cvideo%3E%20returns%20pure%20black%0D%0A%20%20%2F%2F%20if%20it's%20not%20in%20the%20DOM%20in%20a%20place%20the%20browser%20thinks%20is%20visible.%20That%20means%20we%20can't%0D%0A%20%20%2F%2F%20use%20display%3A%20none.%0D%0A%20%20%2F%2F%20See%20https%3A%2F%2Fgithub.com%2FTurboWarp%2Fscratch-render%2Fissues%2F12%0D%0A%20%20const%20elementContainer%20%3D%20document.createElement(%22div%22)%3B%0D%0A%20%20elementContainer.className%20%3D%20%22tw-extensions-lily-videos-container%22%3B%0D%0A%20%20elementContainer.style.pointerEvents%20%3D%20%22none%22%3B%0D%0A%20%20elementContainer.style.position%20%3D%20%22absolute%22%3B%0D%0A%20%20elementContainer.style.opacity%20%3D%20%220%22%3B%0D%0A%20%20elementContainer.style.width%20%3D%20%220%22%3B%0D%0A%20%20elementContainer.style.height%20%3D%20%220%22%3B%0D%0A%20%20elementContainer.style.visibility%20%3D%20%22hidden%22%3B%0D%0A%20%20elementContainer.ariaHidden%20%3D%20%22true%22%3B%0D%0A%20%20document.body.appendChild(elementContainer)%3B%0D%0A%0D%0A%20%20const%20BitmapSkin%20%3D%20runtime.renderer.exports.BitmapSkin%3B%0D%0A%20%20class%20VideoSkin%20extends%20BitmapSkin%20%7B%0D%0A%20%20%20%20constructor(id%2C%20renderer%2C%20videoName%2C%20videoSrc)%20%7B%0D%0A%20%20%20%20%20%20super(id%2C%20renderer)%3B%0D%0A%0D%0A%20%20%20%20%20%20%2F**%20%40type%20%7Bstring%7D%20*%2F%0D%0A%20%20%20%20%20%20this.videoName%20%3D%20videoName%3B%0D%0A%0D%0A%20%20%20%20%20%20%2F**%20%40type%20%7Bstring%7D%20*%2F%0D%0A%20%20%20%20%20%20this.videoSrc%20%3D%20videoSrc%3B%0D%0A%0D%0A%20%20%20%20%20%20%2F**%0D%0A%20%20%20%20%20%20%20*%20Base%20volume%20as%20set%20by%20the%20scripts%20in%20the%20project%2C%20from%200%20to%201.%0D%0A%20%20%20%20%20%20%20*%20Does%20not%20account%20for%20eg.%20the%20project%20being%20muted.%0D%0A%20%20%20%20%20%20%20*%20%40type%20%7Bnumber%7D%0D%0A%20%20%20%20%20%20%20*%2F%0D%0A%20%20%20%20%20%20this.videoVolume%20%3D%201%3B%0D%0A%0D%0A%20%20%20%20%20%20this.videoError%20%3D%20false%3B%0D%0A%0D%0A%20%20%20%20%20%20this.readyPromise%20%3D%20new%20Promise((resolve)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20this.readyCallback%20%3D%20resolve%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%0D%0A%20%20%20%20%20%20this.videoElement%20%3D%20document.createElement(%22video%22)%3B%0D%0A%20%20%20%20%20%20%2F%2F%20Need%20to%20set%20non-zero%20dimensions%2C%20otherwise%20scratch-render%20thinks%20this%20is%20an%20empty%20image%0D%0A%20%20%20%20%20%20this.videoElement.width%20%3D%201%3B%0D%0A%20%20%20%20%20%20this.videoElement.height%20%3D%201%3B%0D%0A%20%20%20%20%20%20this.videoElement.crossOrigin%20%3D%20%22anonymous%22%3B%0D%0A%20%20%20%20%20%20this.videoElement.onloadeddata%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20First%20frame%20loaded%0D%0A%20%20%20%20%20%20%20%20this.readyCallback()%3B%0D%0A%20%20%20%20%20%20%20%20this.markVideoDirty()%3B%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20this.videoElement.onerror%20%3D%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20this.videoError%20%3D%20true%3B%0D%0A%20%20%20%20%20%20%20%20this.readyCallback()%3B%0D%0A%20%20%20%20%20%20%20%20this.markVideoDirty()%3B%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20this.videoElement.src%20%3D%20videoSrc%3B%0D%0A%20%20%20%20%20%20this.videoElement.currentTime%20%3D%200%3B%0D%0A%0D%0A%20%20%20%20%20%20%2F%2F%20%3Cvideo%3E%20must%20be%20in%20the%20DOM%20for%20it%20to%20render%20(see%20comments%20above)%0D%0A%20%20%20%20%20%20elementContainer.appendChild(this.videoElement)%3B%0D%0A%20%20%20%20%20%20this.videoElement.tabIndex%20%3D%20-1%3B%0D%0A%0D%0A%20%20%20%20%20%20this.videoDirty%20%3D%20true%3B%0D%0A%0D%0A%20%20%20%20%20%20this.reuploadVideo()%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20reuploadVideo()%20%7B%0D%0A%20%20%20%20%20%20this.videoDirty%20%3D%20false%3B%0D%0A%20%20%20%20%20%20if%20(this.videoError)%20%7B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20Draw%20an%20image%20that%20looks%20similar%20to%20Scratch's%20normal%20costume%20loading%20errors%0D%0A%20%20%20%20%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0D%0A%20%20%20%20%20%20%20%20canvas.width%20%3D%20this.videoElement.videoWidth%20%7C%7C%20128%3B%0D%0A%20%20%20%20%20%20%20%20canvas.height%20%3D%20this.videoElement.videoHeight%20%7C%7C%20128%3B%0D%0A%20%20%20%20%20%20%20%20const%20ctx%20%3D%20canvas.getContext(%222d%22)%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20if%20(ctx)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.fillStyle%20%3D%20%22%23cccccc%22%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.fillRect(0%2C%200%2C%20canvas.width%2C%20canvas.height)%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20%20%20const%20fontSize%20%3D%20Math.min(canvas.width%2C%20canvas.height)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.fillStyle%20%3D%20%22%23000000%22%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.font%20%3D%20%60%24%7BfontSize%7Dpx%20serif%60%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.textBaseline%20%3D%20%22middle%22%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.textAlign%20%3D%20%22center%22%3B%0D%0A%20%20%20%20%20%20%20%20%20%20ctx.fillText(%22%3F%22%2C%20canvas.width%20%2F%202%2C%20canvas.height%20%2F%202)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20guess%20we%20can't%20draw%20the%20error%20then%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20%20%20this.setBitmap(canvas)%3B%0D%0A%20%20%20%20%20%20%7D%20else%20%7B%0D%0A%20%20%20%20%20%20%20%20this.setBitmap(this.videoElement)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20markVideoDirty()%20%7B%0D%0A%20%20%20%20%20%20this.videoDirty%20%3D%20true%3B%0D%0A%20%20%20%20%20%20this.emitWasAltered()%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20updateVolume()%20%7B%0D%0A%20%20%20%20%20%20const%20projectVolume%20%3D%20runtime.audioEngine.inputNode.gain.value%3B%0D%0A%20%20%20%20%20%20const%20trueVolume%20%3D%20this.videoVolume%20*%20projectVolume%3B%0D%0A%20%20%20%20%20%20this.videoElement.volume%20%3D%20trueVolume%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20get%20size()%20%7B%0D%0A%20%20%20%20%20%20if%20(this.videoDirty)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.reuploadVideo()%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20return%20super.size%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getTexture(scale)%20%7B%0D%0A%20%20%20%20%20%20if%20(this.videoDirty)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.reuploadVideo()%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20return%20super.getTexture(scale)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20dispose()%20%7B%0D%0A%20%20%20%20%20%20super.dispose()%3B%0D%0A%20%20%20%20%20%20this.videoElement.pause()%3B%0D%0A%20%20%20%20%20%20this.videoElement.remove()%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%0D%0A%0D%0A%20%20class%20Video%20%7B%0D%0A%20%20%20%20constructor()%20%7B%0D%0A%20%20%20%20%20%20%2F**%20%40type%20%7BRecord%3Cstring%2C%20VideoSkin%3E%7D%20*%2F%0D%0A%20%20%20%20%20%20this.videos%20%3D%20Object.create(null)%3B%0D%0A%0D%0A%20%20%20%20%20%20runtime.on(%22PROJECT_STOP_ALL%22%2C%20()%20%3D%3E%20this.resetEverything())%3B%0D%0A%20%20%20%20%20%20runtime.on(%22PROJECT_START%22%2C%20()%20%3D%3E%20this.resetEverything())%3B%0D%0A%0D%0A%20%20%20%20%20%20runtime.on(%22BEFORE_EXECUTE%22%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20for%20(const%20skin%20of%20renderer._allSkins)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(skin%20instanceof%20VideoSkin)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20skin.updateVolume()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!skin.videoElement.paused)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20skin.markVideoDirty()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%0D%0A%20%20%20%20%20%20runtime.on(%22RUNTIME_PAUSED%22%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20for%20(const%20skin%20of%20renderer._allSkins)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(skin%20instanceof%20VideoSkin)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20skin.videoElement.pause()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20skin.markVideoDirty()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%0D%0A%20%20%20%20%20%20runtime.on(%22RUNTIME_UNPAUSED%22%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20for%20(const%20skin%20of%20renderer._allSkins)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20if%20(skin%20instanceof%20VideoSkin)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20skin.videoElement.play()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20skin.markVideoDirty()%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getInfo()%20%7B%0D%0A%20%20%20%20%20%20return%20%7B%0D%0A%20%20%20%20%20%20%20%20id%3A%20%22lmsVideo%22%2C%0D%0A%20%20%20%20%20%20%20%20color1%3A%20%22%23557882%22%2C%0D%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%22Video%22)%2C%0D%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.XML%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20xml%3A%20%22%3Csep%20gap%3D'6'%2F%3E%3Clabel%20text%3D'Only%20direct%20downloads%20will%20work%2C%20use'%2F%3E%3Csep%20gap%3D'-12'%2F%3E%3Clabel%20text%3D'the%20Iframe%20extension%20for%20YouTube.'%2F%3E%3Csep%20gap%3D'24'%2F%3E%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22loadVideoURL%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22load%20video%20from%20URL%20%5BURL%5D%20as%20%5BNAME%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20URL%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22https%3A%2F%2Fextensions.turbowarp.org%2Fdango.mp4%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20video%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22deleteVideoURL%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22delete%20video%20%5BNAME%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20video%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getLoadedVideos%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22loaded%20videos%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22showVideo%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22show%20video%20%5BNAME%5D%20on%20%5BTARGET%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22targets%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20video%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22stopShowingVideo%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22stop%20showing%20video%20on%20%5BTARGET%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22targets%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20video%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getCurrentVideo%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22current%20video%20on%20%5BTARGET%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22targets%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22startVideo%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22start%20video%20%5BNAME%5D%20at%20%5BDURATION%5D%20seconds%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20video%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DURATION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22startVideoAndWait%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22start%20video%20%5BNAME%5D%20at%20%5BDURATION%5D%20seconds%20and%20wait%20until%20done%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20video%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DURATION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getAttribute%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BATTRIBUTE%5D%20of%20video%20%5BNAME%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ATTRIBUTE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22attribute%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20video%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getFrame%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22screenshot%20of%20video%20%5BNAME%5D%20at%20current%20time%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20video%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22pause%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22pause%20video%20%5BNAME%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20video%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22resume%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22resume%20video%20%5BNAME%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20video%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22toggleLooping%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20video%20%5BNAME%5D%20to%20%5BLOOP%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20video%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20LOOP%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22playbackType%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getState%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22video%20%5BNAME%5D%20is%20%5BSTATE%5D%3F%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20video%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STATE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22state%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setVolume%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20volume%20of%20video%20%5BNAME%5D%20to%20%5BVALUE%5D%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20video%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setPlaybackRate%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22set%20playback%20rate%20of%20video%20%5BNAME%5D%20to%20%5BRATE%5D%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NAME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22my%20video%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20RATE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%222%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20targets%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%22_getTargets%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20state%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22playing%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22playing%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22paused%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22paused%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22looping%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22looping%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20attribute%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22current%20time%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22current%20time%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22duration%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22duration%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22volume%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22volume%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22width%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22width%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22height%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22height%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22playback%20rate%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22playback%20rate%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20playbackType%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22loop%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22loop%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22not%20loop%22)%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22not%20loop%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20resetEverything()%20%7B%0D%0A%20%20%20%20%20%20for%20(const%20%7B%20videoElement%20%7D%20of%20Object.values(this.videos))%20%7B%0D%0A%20%20%20%20%20%20%20%20videoElement.pause()%3B%0D%0A%20%20%20%20%20%20%20%20videoElement.currentTime%20%3D%200%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20for%20(const%20target%20of%20runtime.targets)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20drawable%20%3D%20renderer._allDrawables%5Btarget.drawableID%5D%3B%0D%0A%20%20%20%20%20%20%20%20if%20(drawable.skin%20instanceof%20VideoSkin)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20target.setCostume(target.currentCostume)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20async%20loadVideoURL(args)%20%7B%0D%0A%20%20%20%20%20%20%2F%2F%20Always%20delete%20the%20old%20video%20with%20the%20same%20name%2C%20if%20it%20exists.%0D%0A%20%20%20%20%20%20this.deleteVideoURL(args)%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20videoName%20%3D%20Cast.toString(args.NAME)%3B%0D%0A%20%20%20%20%20%20const%20url%20%3D%20Cast.toString(args.URL)%3B%0D%0A%0D%0A%20%20%20%20%20%20if%20(%0D%0A%20%20%20%20%20%20%20%20url.startsWith(%22https%3A%2F%2Fwww.youtube.com%2F%22)%20%7C%7C%0D%0A%20%20%20%20%20%20%20%20url.startsWith(%22https%3A%2F%2Fyoutube.com%2F%22)%20%7C%7C%0D%0A%20%20%20%20%20%20%20%20url.startsWith(%22https%3A%2F%2Fyoutu.be%2F%22)%0D%0A%20%20%20%20%20%20)%20%7B%0D%0A%20%20%20%20%20%20%20%20alert(%0D%0A%20%20%20%20%20%20%20%20%20%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%22The%20video%20extension%20does%20not%20support%20YouTube%20links.%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%22You%20can%20use%20the%20Iframe%20extension%20instead.%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%5D.join(%22%5Cn%5Cn%22)%0D%0A%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%20%20return%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20if%20(!(await%20Scratch.canFetch(url)))%20return%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20skinId%20%3D%20renderer._nextSkinId%2B%2B%3B%0D%0A%20%20%20%20%20%20const%20skin%20%3D%20new%20VideoSkin(skinId%2C%20renderer%2C%20videoName%2C%20url)%3B%0D%0A%20%20%20%20%20%20renderer._allSkins%5BskinId%5D%20%3D%20skin%3B%0D%0A%20%20%20%20%20%20this.videos%5BvideoName%5D%20%3D%20skin%3B%0D%0A%0D%0A%20%20%20%20%20%20return%20skin.readyPromise%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20deleteVideoURL(args)%20%7B%0D%0A%20%20%20%20%20%20const%20videoName%20%3D%20Cast.toString(args.NAME)%3B%0D%0A%20%20%20%20%20%20const%20videoSkin%20%3D%20this.videos%5BvideoName%5D%3B%0D%0A%20%20%20%20%20%20if%20(!videoSkin)%20return%3B%0D%0A%0D%0A%20%20%20%20%20%20for%20(const%20target%20of%20runtime.targets)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20drawable%20%3D%20renderer._allDrawables%5Btarget.drawableID%5D%3B%0D%0A%20%20%20%20%20%20%20%20if%20(drawable%20%26%26%20drawable.skin%20%3D%3D%3D%20videoSkin)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20target.setCostume(target.currentCostume)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20renderer.destroySkin(videoSkin.id)%3B%0D%0A%20%20%20%20%20%20Reflect.deleteProperty(this.videos%2C%20videoName)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getLoadedVideos()%20%7B%0D%0A%20%20%20%20%20%20return%20JSON.stringify(Object.keys(this.videos))%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20showVideo(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20targetName%20%3D%20Cast.toString(args.TARGET)%3B%0D%0A%20%20%20%20%20%20const%20videoName%20%3D%20Cast.toString(args.NAME)%3B%0D%0A%20%20%20%20%20%20const%20target%20%3D%20this._getTargetFromMenu(targetName%2C%20util)%3B%0D%0A%20%20%20%20%20%20const%20videoSkin%20%3D%20this.videos%5BvideoName%5D%3B%0D%0A%20%20%20%20%20%20if%20(!target%20%7C%7C%20!videoSkin)%20return%3B%0D%0A%0D%0A%20%20%20%20%20%20vm.renderer.updateDrawableSkinId(target.drawableID%2C%20videoSkin._id)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20stopShowingVideo(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20targetName%20%3D%20Cast.toString(args.TARGET)%3B%0D%0A%20%20%20%20%20%20const%20target%20%3D%20this._getTargetFromMenu(targetName%2C%20util)%3B%0D%0A%20%20%20%20%20%20if%20(!target)%20return%3B%0D%0A%0D%0A%20%20%20%20%20%20target.setCostume(target.currentCostume)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getCurrentVideo(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20targetName%20%3D%20Cast.toString(args.TARGET)%3B%0D%0A%20%20%20%20%20%20const%20target%20%3D%20this._getTargetFromMenu(targetName%2C%20util)%3B%0D%0A%20%20%20%20%20%20if%20(!target)%20return%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20drawable%20%3D%20renderer._allDrawables%5Btarget.drawableID%5D%3B%0D%0A%20%20%20%20%20%20const%20skin%20%3D%20drawable%20%26%26%20drawable.skin%3B%0D%0A%20%20%20%20%20%20return%20skin%20instanceof%20VideoSkin%20%3F%20skin.videoName%20%3A%20%22%22%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20startVideo(args)%20%7B%0D%0A%20%20%20%20%20%20const%20videoName%20%3D%20Cast.toString(args.NAME)%3B%0D%0A%20%20%20%20%20%20const%20duration%20%3D%20Cast.toNumber(args.DURATION)%3B%0D%0A%20%20%20%20%20%20const%20videoSkin%20%3D%20this.videos%5BvideoName%5D%3B%0D%0A%20%20%20%20%20%20if%20(!videoSkin)%20return%3B%0D%0A%0D%0A%20%20%20%20%20%20videoSkin.videoElement.play()%3B%0D%0A%20%20%20%20%20%20videoSkin.videoElement.currentTime%20%3D%20duration%3B%0D%0A%20%20%20%20%20%20videoSkin.markVideoDirty()%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20startVideoAndWait(args%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20const%20videoName%20%3D%20Cast.toString(args.NAME)%3B%0D%0A%20%20%20%20%20%20const%20duration%20%3D%20Cast.toNumber(args.DURATION)%3B%0D%0A%20%20%20%20%20%20const%20videoSkin%20%3D%20this.videos%5BvideoName%5D%3B%0D%0A%20%20%20%20%20%20if%20(!videoSkin)%20return%3B%0D%0A%0D%0A%20%20%20%20%20%20if%20(!util.stackFrame.hasPlayed)%20%7B%0D%0A%20%20%20%20%20%20%20%20videoSkin.videoElement.play()%3B%0D%0A%20%20%20%20%20%20%20%20videoSkin.videoElement.currentTime%20%3D%20duration%3B%0D%0A%20%20%20%20%20%20%20%20videoSkin.markVideoDirty()%3B%0D%0A%0D%0A%20%20%20%20%20%20%20%20util.stackFrame.hasPlayed%20%3D%20true%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20if%20(!videoSkin.videoElement.ended)%20%7B%0D%0A%20%20%20%20%20%20%20%20util.yield()%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getAttribute(args)%20%7B%0D%0A%20%20%20%20%20%20const%20videoName%20%3D%20Cast.toString(args.NAME)%3B%0D%0A%20%20%20%20%20%20const%20videoSkin%20%3D%20this.videos%5BvideoName%5D%3B%0D%0A%20%20%20%20%20%20if%20(!videoSkin)%20return%200%3B%0D%0A%0D%0A%20%20%20%20%20%20switch%20(args.ATTRIBUTE)%20%7B%0D%0A%20%20%20%20%20%20%20%20case%20%22current%20time%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20videoSkin.videoElement.currentTime%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22duration%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20videoSkin.videoElement.duration%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22volume%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20videoSkin.videoVolume%20*%20100%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22width%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20videoSkin.size%5B0%5D%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22height%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20videoSkin.size%5B1%5D%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22playback%20rate%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20videoSkin.videoElement.playbackRate%3B%0D%0A%20%20%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getFrame(args)%20%7B%0D%0A%20%20%20%20%20%20const%20videoName%20%3D%20Cast.toString(args.NAME)%3B%0D%0A%20%20%20%20%20%20const%20videoSkin%20%3D%20this.videos%5BvideoName%5D%3B%0D%0A%20%20%20%20%20%20if%20(!videoSkin)%20return%20%22%22%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0D%0A%20%20%20%20%20%20const%20ctx%20%3D%20canvas.getContext(%222d%22)%3B%0D%0A%20%20%20%20%20%20if%20(!ctx)%20%7B%0D%0A%20%20%20%20%20%20%20%20console.warn(%222D%20rendering%20context%20not%20available%22)%3B%0D%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20const%20videoElement%20%3D%20videoSkin.videoElement%3B%0D%0A%20%20%20%20%20%20if%20(videoElement.videoWidth%20%3D%3D%3D%200%20%7C%7C%20videoElement.videoHeight%20%3D%3D%3D%200)%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%20%20canvas.width%20%3D%20videoElement.videoWidth%3B%0D%0A%20%20%20%20%20%20canvas.height%20%3D%20videoElement.videoHeight%3B%0D%0A%20%20%20%20%20%20ctx.drawImage(videoElement%2C%200%2C%200)%3B%0D%0A%20%20%20%20%20%20return%20canvas.toDataURL()%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20pause(args)%20%7B%0D%0A%20%20%20%20%20%20const%20videoName%20%3D%20Cast.toString(args.NAME)%3B%0D%0A%20%20%20%20%20%20const%20videoSkin%20%3D%20this.videos%5BvideoName%5D%3B%0D%0A%20%20%20%20%20%20if%20(!videoSkin)%20return%3B%0D%0A%0D%0A%20%20%20%20%20%20videoSkin.videoElement.pause()%3B%0D%0A%20%20%20%20%20%20videoSkin.markVideoDirty()%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20resume(args)%20%7B%0D%0A%20%20%20%20%20%20const%20videoName%20%3D%20Cast.toString(args.NAME)%3B%0D%0A%20%20%20%20%20%20const%20videoSkin%20%3D%20this.videos%5BvideoName%5D%3B%0D%0A%20%20%20%20%20%20if%20(!videoSkin)%20return%3B%0D%0A%0D%0A%20%20%20%20%20%20videoSkin.videoElement.play()%3B%0D%0A%20%20%20%20%20%20videoSkin.markVideoDirty()%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20toggleLooping(args)%20%7B%0D%0A%20%20%20%20%20%20const%20videoName%20%3D%20Cast.toString(args.NAME)%3B%0D%0A%20%20%20%20%20%20const%20videoSkin%20%3D%20this.videos%5BvideoName%5D%3B%0D%0A%20%20%20%20%20%20if%20(!videoSkin)%20return%3B%0D%0A%0D%0A%20%20%20%20%20%20videoSkin.videoElement.loop%20%3D%20args.LOOP%20%3D%3D%20%22loop%22%20%3F%20true%20%3A%20false%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getState(args)%20%7B%0D%0A%20%20%20%20%20%20const%20videoName%20%3D%20Cast.toString(args.NAME)%3B%0D%0A%20%20%20%20%20%20const%20videoSkin%20%3D%20this.videos%5BvideoName%5D%3B%0D%0A%20%20%20%20%20%20if%20(!videoSkin)%20return%20args.STATE%20%3D%3D%3D%20%22paused%22%3B%0D%0A%0D%0A%20%20%20%20%20%20switch%20(args.STATE)%20%7B%0D%0A%20%20%20%20%20%20%20%20case%20%22playing%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20!videoSkin.videoElement.paused%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22paused%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20videoSkin.videoElement.paused%3B%0D%0A%20%20%20%20%20%20%20%20case%20%22looping%22%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20videoSkin.videoElement.loop%3B%0D%0A%20%20%20%20%20%20%20%20default%3A%0D%0A%20%20%20%20%20%20%20%20%20%20return%20false%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setVolume(args)%20%7B%0D%0A%20%20%20%20%20%20const%20videoName%20%3D%20Cast.toString(args.NAME)%3B%0D%0A%20%20%20%20%20%20const%20videoSkin%20%3D%20this.videos%5BvideoName%5D%3B%0D%0A%20%20%20%20%20%20if%20(!videoSkin)%20return%3B%0D%0A%0D%0A%20%20%20%20%20%20const%20value%20%3D%20Cast.toNumber(args.VALUE)%3B%0D%0A%20%20%20%20%20%20videoSkin.videoVolume%20%3D%20Math.min(1%2C%20Math.max(0%2C%20value%20%2F%20100))%3B%0D%0A%20%20%20%20%20%20videoSkin.updateVolume()%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setPlaybackRate(args)%20%7B%0D%0A%20%20%20%20%20%20const%20videoName%20%3D%20Cast.toString(args.NAME)%3B%0D%0A%20%20%20%20%20%20const%20videoSkin%20%3D%20this.videos%5BvideoName%5D%3B%0D%0A%20%20%20%20%20%20if%20(!videoSkin)%20return%3B%0D%0A%0D%0A%20%20%20%20%20%20try%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20value%20%3D%20Cast.toNumber(args.RATE)%3B%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20Supposedly%20negative%20values%20will%20work%20in%20Safari%20but%20people%20probably%20shouldn't%20rely%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20on%20that%20since%20others%20don't.%0D%0A%20%20%20%20%20%20%20%20videoSkin.videoElement.playbackRate%20%3D%20Math.max(0%2C%20value)%3B%0D%0A%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0D%0A%20%20%20%20%20%20%20%20console.warn(e)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%2F**%20%40returns%20%7BVM.Target%7Cundefined%7D%20*%2F%0D%0A%20%20%20%20_getTargetFromMenu(targetName%2C%20util)%20%7B%0D%0A%20%20%20%20%20%20if%20(targetName%20%3D%3D%3D%20%22_myself_%22)%20return%20util.target%3B%0D%0A%20%20%20%20%20%20if%20(targetName%20%3D%3D%3D%20%22_stage_%22)%20return%20runtime.getTargetForStage()%3B%0D%0A%20%20%20%20%20%20return%20Scratch.vm.runtime.getSpriteTargetByName(targetName)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20_getTargets()%20%7B%0D%0A%20%20%20%20%20%20let%20spriteNames%20%3D%20%5B%0D%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22myself%22%2C%20value%3A%20%22_myself_%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20%22Stage%22%2C%20value%3A%20%22_stage_%22%20%7D%2C%0D%0A%20%20%20%20%20%20%5D%3B%0D%0A%20%20%20%20%20%20const%20targets%20%3D%20Scratch.vm.runtime.targets%0D%0A%20%20%20%20%20%20%20%20.filter((target)%20%3D%3E%20target.isOriginal%20%26%26%20!target.isStage)%0D%0A%20%20%20%20%20%20%20%20.map((target)%20%3D%3E%20target.getName())%3B%0D%0A%20%20%20%20%20%20spriteNames%20%3D%20spriteNames.concat(targets)%3B%0D%0A%20%20%20%20%20%20return%20spriteNames%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%7D%0D%0A%0D%0A%20%20Scratch.extensions.register(new%20Video())%3B%0D%0A%7D)(Scratch)%3B%0D%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Mouse%20Cursor%0A%2F%2F%20ID%3A%20MouseCursor%0A%2F%2F%20Description%3A%20Use%20custom%20cursors%20or%20hide%20the%20cursor.%20Also%20allows%20replacing%20the%20cursor%20with%20any%20costume%20image.%0A%2F%2F%20License%3A%20MIT%20AND%20MPL-2.0%0A%0A%2F*%20generated%20l10n%20code%20*%2FScratch.translate.setup(%7B%22de%22%3A%7B%22_Mouse%20Cursor%22%3A%22Mauszeiger%22%2C%22_text%22%3A%22Text%22%2C%22_wait%22%3A%22Warten%22%7D%2C%22es%22%3A%7B%22_Mouse%20Cursor%22%3A%22Cursor%20del%20Rat%C3%B3n%22%2C%22_all-scroll%22%3A%22desplazarse%20todo%22%2C%22_bottom%20left%22%3A%22inferior%20izquierda%22%2C%22_bottom%20right%22%3A%22inferior%20derecha%22%2C%22_cell%22%3A%22c%C3%A9lula%22%2C%22_center%22%3A%22centro%22%2C%22_col-resize%22%3A%22redimensionar%20columna%22%2C%22_context-menu%22%3A%22men%C3%BA%20contextual%22%2C%22_copy%22%3A%22copiar%22%2C%22_crosshair%22%3A%22punto%20de%20mira%22%2C%22_default%22%3A%22por%20defecto%22%2C%22_e-resize%22%3A%22redimensionar%20este%22%2C%22_ew-resize%22%3A%22redimensionar%20este-oeste%22%2C%22_grab%22%3A%22agarrar%22%2C%22_grabbing%22%3A%22agarrando%22%2C%22_help%22%3A%22ayuda%22%2C%22_hide%20cursor%22%3A%22esconder%20cursor%22%2C%22_move%22%3A%22mover%22%2C%22_n-resize%22%3A%22redimensionar%20norte%22%2C%22_ne-resize%22%3A%22redimensionar%20nordeste%22%2C%22_nesw-resize%22%3A%22redimensionar%20norte-este-sur-oeste%22%2C%22_no%20drop%22%3A%22no%20soltar%22%2C%22_not%20allowed%22%3A%22no%20permitido%22%2C%22_ns-resize%22%3A%22redimensionar%20norte-sur%22%2C%22_nw-resize%22%3A%22redimensionar%20noroeste%22%2C%22_nwse-resize%22%3A%22redimensionar%20nor-oeste-sur-este%22%2C%22_pointer%22%3A%22mano%22%2C%22_progress%22%3A%22progreso%22%2C%22_row-resize%22%3A%22redimensionar%20fila%22%2C%22_s-resize%22%3A%22redimensionar%20sur%22%2C%22_se-resize%22%3A%22redimensionar%20sudeste%22%2C%22_set%20cursor%20to%20%5Bcur%5D%22%3A%22fijar%20cursor%20a%20%5Bcur%5D%22%2C%22_set%20cursor%20to%20current%20costume%20center%3A%20%5Bposition%5D%20max%20size%3A%20%5Bsize%5D%22%3A%22fijar%20cursor%20a%20disfraz%20actual%20centro%3A%20%5Bposition%5D%20tama%C3%B1o%20m%C3%A1x%3A%20%5Bsize%5D%22%2C%22_sw-resize%22%3A%22redimensionar%20suroeste%22%2C%22_text%22%3A%22texto%22%2C%22_top%20left%22%3A%22superior%20izquierda%22%2C%22_top%20right%22%3A%22superior%20derecha%22%2C%22_vertical-text%22%3A%22texto%20vertical%22%2C%22_w-resize%22%3A%22redimensionar%20oeste%22%2C%22_wait%22%3A%22esperar%22%2C%22_zoom-in%22%3A%22ampliar%22%2C%22_zoom-out%22%3A%22reducir%22%2C%22_%7Bsize%7D%20(unreliable)%22%3A%22%7Bsize%7D%20(faltoso)%22%7D%2C%22fi%22%3A%7B%22_Mouse%20Cursor%22%3A%22Hiiren%20kohdistin%22%2C%22_bottom%20left%22%3A%22vasempaan%20alakulmaan%22%2C%22_bottom%20right%22%3A%22oikeaan%20alakulmaan%22%2C%22_center%22%3A%22keskelle%22%2C%22_cursor%22%3A%22kohdistin%22%2C%22_default%22%3A%22oletus%22%2C%22_hide%20cursor%22%3A%22piilota%20kohdistin%22%2C%22_set%20cursor%20to%20%5Bcur%5D%22%3A%22aseta%20kohdistimeksi%20%5Bcur%5D%22%2C%22_set%20cursor%20to%20current%20costume%20center%3A%20%5Bposition%5D%20max%20size%3A%20%5Bsize%5D%22%3A%22aseta%20kohdistimeksi%20nykyisen%20asusteen%20keskikohta%3A%20%5Bposition%5D%20enimm%C3%A4iskoko%3A%20%5Bsize%5D%22%2C%22_text%22%3A%22teksti%22%2C%22_top%20left%22%3A%22vasempaan%20yl%C3%A4kulmaan%22%2C%22_top%20right%22%3A%22oikeaan%20yl%C3%A4kulmaan%22%2C%22_wait%22%3A%22odota%22%2C%22_%7Bsize%7D%20(unreliable)%22%3A%22%7Bsize%7D%20(ep%C3%A4luotettava)%22%7D%2C%22it%22%3A%7B%22_Mouse%20Cursor%22%3A%22Puntatore%20Mouse%22%2C%22_alias%22%3A%22collegamento%22%2C%22_all-scroll%22%3A%22scorrimento%20completo%22%2C%22_bottom%20left%22%3A%22angolo%20sinistra%20in%20basso%22%2C%22_bottom%20right%22%3A%22angolo%20destra%20in%20basso%22%2C%22_cell%22%3A%22cella%22%2C%22_center%22%3A%22centro%22%2C%22_col-resize%22%3A%22ridimensiona%20colonna%22%2C%22_context-menu%22%3A%22menu%20contestuale%22%2C%22_copy%22%3A%22copia%22%2C%22_crosshair%22%3A%22mirino%22%2C%22_cursor%22%3A%22puntatore%22%2C%22_default%22%3A%22predefinito%22%2C%22_e-resize%22%3A%22freccia%20destra%22%2C%22_ew-resize%22%3A%22freccia%20destra%20sinistra%22%2C%22_grab%22%3A%22mano%20aperta%22%2C%22_grabbing%22%3A%22mano%20chiusa%22%2C%22_help%22%3A%22aiuto%22%2C%22_hide%20cursor%22%3A%22nascondi%20puntatore%22%2C%22_move%22%3A%22spostamento%22%2C%22_n-resize%22%3A%22freccia%20su%22%2C%22_ne-resize%22%3A%22freccia%20destra%20su%22%2C%22_nesw-resize%22%3A%22freccia%20diagonale%20alto%20destra%20basso%20sinistra%22%2C%22_no%20drop%22%3A%22no%20rilascio%22%2C%22_not%20allowed%22%3A%22divieto%22%2C%22_ns-resize%22%3A%22freccia%20su%20gi%C3%B9%22%2C%22_nw-resize%22%3A%22freccia%20su%20sinistra%22%2C%22_nwse-resize%22%3A%22freccia%20diagonale%20alto%20sinistra%20basso%20destra%22%2C%22_pointer%22%3A%22dito%22%2C%22_progress%22%3A%22freccia%20e%20clessidra%22%2C%22_row-resize%22%3A%22ridimensiona%20riga%22%2C%22_s-resize%22%3A%22freccia%20gi%C3%B9%22%2C%22_se-resize%22%3A%22freccia%20giu%20destra%22%2C%22_set%20cursor%20to%20%5Bcur%5D%22%3A%22usa%20%5Bcur%5D%20come%20puntatore%22%2C%22_set%20cursor%20to%20current%20costume%20center%3A%20%5Bposition%5D%20max%20size%3A%20%5Bsize%5D%22%3A%22usa%20il%20costume%20attuale%20con%20centro%3A%20%5Bposition%5D%20dimensione%20massima%3A%20%5Bsize%5D%20come%20puntatore%22%2C%22_sw-resize%22%3A%22freccia%20gi%C3%B9%20sinistra%22%2C%22_text%22%3A%22cursore%22%2C%22_top%20left%22%3A%22angolo%20sinistra%20in%20alto%22%2C%22_top%20right%22%3A%22angolo%20destra%20in%20alto%22%2C%22_vertical-text%22%3A%22cursore%20verticale%22%2C%22_w-resize%22%3A%22freccia%20sinistra%22%2C%22_wait%22%3A%22attendi%22%2C%22_zoom-in%22%3A%22ingradisci%22%2C%22_zoom-out%22%3A%22riduci%22%2C%22_%7Bsize%7D%20(unreliable)%22%3A%22%7Bsize%7D%20(inaffidabile)%22%7D%2C%22ja%22%3A%7B%22_Mouse%20Cursor%22%3A%22%E3%83%9E%E3%82%A6%E3%82%B9%E3%82%AB%E3%83%BC%E3%82%BD%E3%83%AB%22%2C%22_bottom%20left%22%3A%22%E5%B7%A6%E4%B8%8B%22%2C%22_bottom%20right%22%3A%22%E5%8F%B3%E4%B8%8B%22%2C%22_center%22%3A%22%E4%B8%AD%E5%A4%AE%22%2C%22_cursor%22%3A%22%E3%82%AB%E3%83%BC%E3%82%BD%E3%83%AB%22%2C%22_default%22%3A%22%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%22%2C%22_hide%20cursor%22%3A%22%E3%82%AB%E3%83%BC%E3%82%BD%E3%83%AB%E3%82%92%E9%9A%A0%E3%81%99%22%2C%22_set%20cursor%20to%20%5Bcur%5D%22%3A%22%E3%82%AB%E3%83%BC%E3%82%BD%E3%83%AB%E3%82%92%5Bcur%5D%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_set%20cursor%20to%20current%20costume%20center%3A%20%5Bposition%5D%20max%20size%3A%20%5Bsize%5D%22%3A%22%E3%82%AB%E3%83%BC%E3%82%BD%E3%83%AB%E3%82%92%E3%80%81%E4%B8%AD%E5%A4%AE%5Bposition%5D%E6%9C%80%E5%A4%A7%E3%82%B5%E3%82%A4%E3%82%BA%5Bsize%5D%E3%81%A7%E4%BB%8A%E3%81%AE%E3%82%B3%E3%82%B9%E3%83%81%E3%83%A5%E3%83%BC%E3%83%A0%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_text%22%3A%22%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%22%2C%22_top%20left%22%3A%22%E5%B7%A6%E4%B8%8A%22%2C%22_top%20right%22%3A%22%E5%8F%B3%E4%B8%8A%22%2C%22_wait%22%3A%22%E5%BE%85%E3%81%A4%22%2C%22_%7Bsize%7D%20(unreliable)%22%3A%22%7Bsize%7D%20(%E4%BF%A1%E9%A0%BC%E6%80%A7%E3%81%8C%E3%81%AA%E3%81%84)%22%7D%2C%22ko%22%3A%7B%22_Mouse%20Cursor%22%3A%22%EB%A7%88%EC%9A%B0%EC%8A%A4%20%EC%BB%A4%EC%84%9C%22%2C%22_bottom%20left%22%3A%22%EC%99%BC%EC%AA%BD%20%EC%95%84%EB%9E%98%22%2C%22_bottom%20right%22%3A%22%EC%98%A4%EB%A5%B8%EC%AA%BD%20%EC%95%84%EB%9E%98%22%2C%22_center%22%3A%22%EA%B0%80%EC%9A%B4%EB%8D%B0%22%2C%22_cursor%22%3A%22%EC%BB%A4%EC%84%9C%22%2C%22_default%22%3A%22%EA%B8%B0%EB%B3%B8%22%2C%22_hide%20cursor%22%3A%22%EC%BB%A4%EC%84%9C%20%EC%88%A8%EA%B8%B0%EA%B8%B0%22%2C%22_set%20cursor%20to%20%5Bcur%5D%22%3A%22%EC%BB%A4%EC%84%9C%EB%A5%BC%20%5Bcur%5D(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22_set%20cursor%20to%20current%20costume%20center%3A%20%5Bposition%5D%20max%20size%3A%20%5Bsize%5D%22%3A%22%EC%BB%A4%EC%84%9C%EB%A5%BC%20%ED%98%84%EC%9E%AC%20%EB%AA%A8%EC%96%91%EC%9C%BC%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%20%EC%A4%91%EC%8B%AC%3A%20%5Bposition%5D%20%EC%B5%9C%EB%8C%80%20%ED%81%AC%EA%B8%B0%3A%20%5Bsize%5D%22%2C%22_text%22%3A%22%ED%85%8D%EC%8A%A4%ED%8A%B8%22%2C%22_top%20left%22%3A%22%EC%99%BC%EC%AA%BD%20%EC%9C%84%22%2C%22_top%20right%22%3A%22%EC%98%A4%EB%A5%B8%EC%AA%BD%20%EC%9C%84%22%2C%22_%7Bsize%7D%20(unreliable)%22%3A%22%7Bsize%7D%20(%EB%B6%88%EC%95%88%EC%A0%95)%22%7D%2C%22nb%22%3A%7B%22_Mouse%20Cursor%22%3A%22Mus%20Pekkeren%22%2C%22_bottom%20left%22%3A%22nederst%20til%20venstre%22%2C%22_bottom%20right%22%3A%22nederst%20til%20h%C3%B8yre%22%2C%22_center%22%3A%22senter%22%2C%22_cursor%22%3A%22pekeren%22%2C%22_hide%20cursor%22%3A%22skjul%20pekeren%22%2C%22_set%20cursor%20to%20%5Bcur%5D%22%3A%22sett%20mark%C3%B8ren%20til%20%5Bcur%5D%22%2C%22_set%20cursor%20to%20current%20costume%20center%3A%20%5Bposition%5D%20max%20size%3A%20%5Bsize%5D%22%3A%22sett%20mark%C3%B8ren%20til%20midten%20av%20gjeldende%20drakt%3A%20%5Bposition%5D%20maks%20st%C3%B8rrelse%3A%20%5Bsize%5D%22%2C%22_text%22%3A%22tekst%22%2C%22_top%20left%22%3A%22%C3%B8verst%20til%20venstre%22%2C%22_top%20right%22%3A%22%C3%B8verst%20til%20h%C3%B8yre%22%2C%22_%7Bsize%7D%20(unreliable)%22%3A%22%7Bsize%7D%20(up%C3%A5litelig)%22%7D%2C%22nl%22%3A%7B%22_Mouse%20Cursor%22%3A%22Muisaanwijzer%22%2C%22_bottom%20left%22%3A%22linksonder%22%2C%22_bottom%20right%22%3A%22rechtsonder%22%2C%22_center%22%3A%22midden%22%2C%22_default%22%3A%22standaard%22%2C%22_hide%20cursor%22%3A%22verberg%20cursor%22%2C%22_set%20cursor%20to%20%5Bcur%5D%22%3A%22maak%20cursor%20%5Bcur%5D%22%2C%22_set%20cursor%20to%20current%20costume%20center%3A%20%5Bposition%5D%20max%20size%3A%20%5Bsize%5D%22%3A%22maak%20cursor%20huidig%20uiterlijk%20met%20middelpunt%3A%20%5Bposition%5D%20en%20max.%20grootte%3A%20%5Bsize%5D%22%2C%22_text%22%3A%22tekst%22%2C%22_top%20left%22%3A%22linksboven%22%2C%22_top%20right%22%3A%22rechtsboven%22%2C%22_%7Bsize%7D%20(unreliable)%22%3A%22%7Bsize%7D%20(onbetrouwbaar)%22%7D%2C%22pl%22%3A%7B%22_text%22%3A%22tekst%22%7D%2C%22ru%22%3A%7B%22_Mouse%20Cursor%22%3A%22%D0%9A%D1%83%D1%80%D1%81%D0%BE%D1%80%20%D0%9C%D1%8B%D1%88%D0%B8%22%2C%22_bottom%20left%22%3A%22%D0%BD%D0%B8%D0%B6%D0%BD%D0%B5%D0%BC%20%D0%BB%D0%B5%D0%B2%D0%BE%D0%BC%20%D1%83%D0%B3%D0%BB%D1%83%22%2C%22_bottom%20right%22%3A%22%D0%BD%D0%B8%D0%B6%D0%BD%D0%B5%D0%BC%20%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D0%BC%20%D1%83%D0%B3%D0%BB%D1%83%22%2C%22_center%22%3A%22%D1%86%D0%B5%D0%BD%D1%82%D1%80%D0%B5%22%2C%22_cursor%22%3A%22%D0%BA%D1%83%D1%80%D1%81%D0%BE%D1%80%22%2C%22_default%22%3A%22%D0%BF%D0%BE%20%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E%22%2C%22_hide%20cursor%22%3A%22%D1%81%D0%BF%D1%80%D1%8F%D1%82%D0%B0%D1%82%D1%8C%20%D0%BA%D1%83%D1%80%D1%81%D0%BE%D1%80%22%2C%22_set%20cursor%20to%20%5Bcur%5D%22%3A%22%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20%D0%BA%D1%83%D1%80%D1%81%D0%BE%D1%80%20%D0%BD%D0%B0%20%5Bcur%5D%22%2C%22_set%20cursor%20to%20current%20costume%20center%3A%20%5Bposition%5D%20max%20size%3A%20%5Bsize%5D%22%3A%22%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20%D0%BA%D1%83%D1%80%D1%81%D0%BE%D1%80%20%D0%BD%D0%B0%20%D1%82%D0%B5%D0%BA%D1%83%D1%89%D0%B8%D0%B9%20%D0%BA%D0%BE%D1%81%D1%82%D1%8E%D0%BC%20%D1%81%20%D1%86%D0%B5%D0%BD%D1%82%D1%80%D0%BE%D0%BC%20%D0%B2%3A%20%5Bposition%5D%20%D0%BC%D0%B0%D0%BA%D1%81%D0%B8%D0%BC%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%BC%20%D1%80%D0%B0%D0%B7%D0%BC%D0%B5%D1%80%D0%BE%D0%BC%3A%20%5Bsize%5D%22%2C%22_text%22%3A%22%D1%82%D0%B5%D0%BA%D1%81%D1%82%22%2C%22_top%20left%22%3A%22%D0%B2%D0%B5%D1%80%D1%85%D0%BD%D0%B5%D0%BC%20%D0%BB%D0%B5%D0%B2%D0%BE%D0%BC%20%D1%83%D0%B3%D0%BB%D1%83%22%2C%22_top%20right%22%3A%22%D0%B2%D0%B5%D1%80%D1%85%D0%BD%D0%B5%D0%BC%20%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D0%BC%20%D1%83%D0%B3%D0%BB%D1%83%22%2C%22_wait%22%3A%22%D0%BF%D0%BE%D0%B4%D0%BE%D0%B6%D0%B4%D0%B0%D1%82%D1%8C%22%2C%22_%7Bsize%7D%20(unreliable)%22%3A%22%7Bsize%7D%20(%D0%BD%D0%B5%D0%BD%D0%B0%D0%B4%D0%B5%D0%B6%D0%BD%D0%BE)%22%7D%2C%22uk%22%3A%7B%22_Mouse%20Cursor%22%3A%22%D0%92%D0%BA%D0%B0%D0%B7%D1%96%D0%B2%D0%BD%D0%B8%D0%BA%20%D0%9C%D0%B8%D1%88%D1%96%22%2C%22_bottom%20left%22%3A%22%D0%B7%D0%BB%D1%96%D0%B2%D0%B0%20%D0%B7%D0%BD%D0%B8%D0%B7%D1%83%22%2C%22_bottom%20right%22%3A%22%D1%81%D0%BF%D1%80%D0%B0%D0%B2%D0%B0%20%D0%B7%D0%BD%D0%B8%D0%B7%D1%83%22%2C%22_center%22%3A%22%D1%86%D0%B5%D0%BD%D1%82%D1%80%22%2C%22_cursor%22%3A%22%D0%B2%D0%BA%D0%B0%D0%B7%D1%96%D0%B2%D0%BD%D0%B8%D0%BA%22%2C%22_hide%20cursor%22%3A%22%D1%81%D0%BE%D0%B2%D0%B0%D1%82%D0%B8%20%D0%B2%D0%BA%D0%B0%D0%B7%D1%96%D0%B2%D0%BD%D0%B8%D0%BA%22%2C%22_set%20cursor%20to%20%5Bcur%5D%22%3A%22%D0%B7%D0%BC%D1%96%D0%BD%D0%B8%D1%82%D0%B8%20%D0%B2%D0%BA%D0%B0%D0%B7%D1%96%D0%B2%D0%BD%D0%B8%D0%BA%20%D0%BD%D0%B0%20%5Bcur%5D%22%2C%22_set%20cursor%20to%20current%20costume%20center%3A%20%5Bposition%5D%20max%20size%3A%20%5Bsize%5D%22%3A%22%D0%B7%D0%B0%D0%BC%D1%96%D0%BD%D0%B8%D1%82%D0%B8%20%D0%B2%D0%BA%D0%B0%D0%B7%D1%96%D0%B2%D0%BD%D0%B8%D0%BA%20%D0%BD%D0%B0%20%D0%BE%D0%B1%D1%80%D0%B0%D0%B7%20%D1%86%D0%B5%D0%BD%D1%82%D1%80%3A%20%5Bposition%5D%20%D0%BC%D0%B0%D0%BA%D1%81.%20%D1%80%D0%BE%D0%B7%D0%BC%D1%96%D1%80%3A%20%5Bsize%5D%22%2C%22_text%22%3A%22%D1%82%D0%B5%D0%BA%D1%81%D1%82%22%2C%22_top%20left%22%3A%22%D0%B7%D0%BB%D1%96%D0%B2%D0%B0%20%D0%B7%D0%B2%D0%B5%D1%80%D1%85%D1%83%22%2C%22_top%20right%22%3A%22%D1%81%D0%BF%D1%80%D0%B0%D0%B2%D0%B0%20%D0%B7%D0%B2%D0%B5%D1%80%D1%85%D1%83%22%2C%22_%7Bsize%7D%20(unreliable)%22%3A%22%7Bsize%7D%20(%D0%BD%D0%B5%D0%BD%D0%B0%D0%B4%D1%96%D0%B9%D0%BD%D0%BE)%22%7D%2C%22zh-cn%22%3A%7B%22_Mouse%20Cursor%22%3A%22%E9%BC%A0%E6%A0%87%E5%9B%BE%E6%A0%87%22%2C%22_bottom%20left%22%3A%22%E5%BA%95%E9%83%A8%E5%B7%A6%E4%BE%A7%22%2C%22_bottom%20right%22%3A%22%E5%BA%95%E9%83%A8%E5%8F%B3%E4%BE%A7%22%2C%22_center%22%3A%22%E5%B1%85%E4%B8%AD%22%2C%22_cursor%22%3A%22%E9%BC%A0%E6%A0%87%E6%A0%B7%E5%BC%8F%22%2C%22_default%22%3A%22%E9%BB%98%E8%AE%A4%22%2C%22_hide%20cursor%22%3A%22%E9%9A%90%E8%97%8F%E9%BC%A0%E6%A0%87%22%2C%22_set%20cursor%20to%20%5Bcur%5D%22%3A%22%E5%B0%86%E9%BC%A0%E6%A0%87%E6%A0%B7%E5%BC%8F%E8%AE%BE%E4%B8%BA%5Bcur%5D%22%2C%22_set%20cursor%20to%20current%20costume%20center%3A%20%5Bposition%5D%20max%20size%3A%20%5Bsize%5D%22%3A%22%E5%B0%86%E9%BC%A0%E6%A0%87%E4%B8%AD%E5%BF%83%E8%AE%BE%E4%B8%BA%EF%BC%9A%5Bposition%5D%E6%9C%80%E5%A4%A7%E5%B0%BA%E5%AF%B8%EF%BC%9A%5Bsize%5D%22%2C%22_text%22%3A%22%E9%A2%9D%E5%A4%96%E6%95%B0%E6%8D%AE%22%2C%22_top%20left%22%3A%22%E9%A1%B6%E9%83%A8%E5%B7%A6%E4%BE%A7%22%2C%22_top%20right%22%3A%22%E9%A1%B6%E9%83%A8%E5%8F%B3%E4%BE%A7%22%2C%22_wait%22%3A%22%E7%AD%89%E5%BE%85%22%2C%22_%7Bsize%7D%20(unreliable)%22%3A%22%7Bsize%7D%EF%BC%88%E5%AE%9E%E9%AA%8C%E6%80%A7%EF%BC%89%22%7D%7D)%3B%2F*%20end%20generated%20l10n%20code%20*%2F(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20%7B%0A%20%20%20%20throw%20new%20Error(%22MouseCursor%20extension%20must%20be%20run%20unsandboxed%22)%3B%0A%20%20%7D%0A%0A%20%20const%20lazilyCreatedCanvas%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%2F**%20%40type%20%7BHTMLCanvasElement%7D%20*%2F%0A%20%20%20%20let%20canvas%20%3D%20null%3B%0A%20%20%20%20%2F**%20%40type%20%7BCanvasRenderingContext2D%7D%20*%2F%0A%20%20%20%20let%20ctx%20%3D%20null%3B%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20width%0A%20%20%20%20%20*%20%40param%20%7Bnumber%7D%20height%0A%20%20%20%20%20*%20%40returns%20%7B%5BHTMLCanvasElement%2C%20CanvasRenderingContext2D%5D%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20return%20(width%2C%20height)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(!canvas)%20%7B%0A%20%20%20%20%20%20%20%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0A%20%20%20%20%20%20%20%20ctx%20%3D%20canvas.getContext(%222d%22)%3B%0A%20%20%20%20%20%20%20%20if%20(!ctx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(%22Could%20not%20get%202d%20rendering%20context%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%20Setting%20canvas%20size%20also%20clears%20it%0A%20%20%20%20%20%20canvas.width%20%3D%20width%3B%0A%20%20%20%20%20%20canvas.height%20%3D%20height%3B%0A%20%20%20%20%20%20return%20%5Bcanvas%2C%20ctx%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%3B%0A%20%20const%20getRawSkinCanvas%20%3D%20lazilyCreatedCanvas()%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BRenderWebGL.Skin%7D%20skin%0A%20%20%20*%20%40returns%20%7Bstring%7D%20A%20data%3A%20URI%20for%20the%20skin.%0A%20%20%20*%2F%0A%20%20const%20encodeSkinToURL%20%3D%20(skin)%20%3D%3E%20%7B%0A%20%20%20%20const%20svgSkin%20%3D%20%2F**%20%40type%20%7BRenderWebGL.SVGSkin%7D%20*%2F%20(skin)%3B%0A%20%20%20%20if%20(svgSkin._svgImage)%20%7B%0A%20%20%20%20%20%20%2F%2F%20This%20is%20an%20SVG%20skin%0A%20%20%20%20%20%20return%20svgSkin._svgImage.src%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20It's%20probably%20a%20bitmap%20skin.%0A%20%20%20%20%2F%2F%20The%20most%20reliable%20way%20to%20get%20the%20bitmap%20in%20every%20runtime%20is%20through%20the%20silhouette.%0A%20%20%20%20%2F%2F%20This%20is%20very%20slow%20and%20could%20involve%20reading%20the%20texture%20from%20the%20GPU.%0A%20%20%20%20const%20silhouette%20%3D%20skin._silhouette%3B%0A%20%20%20%20%2F%2F%20unlazy()%20only%20exists%20in%20TW%0A%20%20%20%20if%20(silhouette.unlazy)%20%7B%0A%20%20%20%20%20%20silhouette.unlazy()%3B%0A%20%20%20%20%7D%0A%20%20%20%20const%20colorData%20%3D%20silhouette._colorData%3B%0A%20%20%20%20const%20width%20%3D%20silhouette._width%3B%0A%20%20%20%20const%20height%20%3D%20silhouette._height%3B%0A%20%20%20%20const%20imageData%20%3D%20new%20ImageData(%0A%20%20%20%20%20%20colorData%2C%0A%20%20%20%20%20%20silhouette._width%2C%0A%20%20%20%20%20%20silhouette._height%0A%20%20%20%20)%3B%0A%20%20%20%20const%20%5Bcanvas%2C%20ctx%5D%20%3D%20getRawSkinCanvas(width%2C%20height)%3B%0A%20%20%20%20ctx.putImageData(imageData%2C%200%2C%200)%3B%0A%20%20%20%20return%20canvas.toDataURL()%3B%0A%20%20%7D%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BVM.Costume%7D%20costume%0A%20%20%20*%20%40param%20%7Bnumber%7D%20maxWidth%0A%20%20%20*%20%40param%20%7Bnumber%7D%20maxHeight%0A%20%20%20*%20%40returns%20%7B%7Buri%3A%20string%2C%20width%3A%20number%2C%20height%3A%20number%7D%7D%0A%20%20%20*%2F%0A%20%20const%20costumeToCursor%20%3D%20(costume%2C%20maxWidth%2C%20maxHeight)%20%3D%3E%20%7B%0A%20%20%20%20const%20skin%20%3D%20Scratch.vm.renderer._allSkins%5Bcostume.skinId%5D%3B%0A%20%20%20%20const%20imageURI%20%3D%20encodeSkinToURL(skin)%3B%0A%0A%20%20%20%20let%20width%20%3D%20skin.size%5B0%5D%3B%0A%20%20%20%20let%20height%20%3D%20skin.size%5B1%5D%3B%0A%20%20%20%20if%20(width%20%3E%20maxWidth)%20%7B%0A%20%20%20%20%20%20height%20%3D%20height%20*%20(maxWidth%20%2F%20width)%3B%0A%20%20%20%20%20%20width%20%3D%20maxWidth%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(height%20%3E%20maxHeight)%20%7B%0A%20%20%20%20%20%20width%20%3D%20width%20*%20(maxHeight%20%2F%20height)%3B%0A%20%20%20%20%20%20height%20%3D%20maxHeight%3B%0A%20%20%20%20%7D%0A%20%20%20%20width%20%3D%20Math.round(width)%3B%0A%20%20%20%20height%20%3D%20Math.round(height)%3B%0A%0A%20%20%20%20%2F%2F%20We%20wrap%20the%20encoded%20image%20in%20an%20%3Csvg%3E.%20This%20lets%20us%20do%20some%20clever%20things%3A%0A%20%20%20%20%2F%2F%20%20-%20We%20can%20resize%20the%20image%20without%20a%20canvas.%0A%20%20%20%20%2F%2F%20%20-%20We%20can%20give%20the%20browser%20an%20image%20with%20more%20raw%20pixels%20than%20its%20DPI%20independent%20size.%0A%20%20%20%20%2F%2F%20The%20latter%20is%20important%20so%20that%20cursors%20won't%20look%20horrible%20on%20high%20DPI%20displays.%20For%0A%20%20%20%20%2F%2F%20example%2C%20if%20the%20cursor%20will%20display%20at%2032x32%20in%20DPI%20independent%20units%20on%20a%202x%20high%20DPI%0A%20%20%20%20%2F%2F%20display%2C%20we%20actually%20need%20to%20send%20a%2064x64%20image%20for%20it%20to%20look%20good.%20This%20lets%20us%20do%0A%20%20%20%20%2F%2F%20that%20automatically.%0A%20%20%20%20let%20svg%20%3D%20%60%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22%24%7Bwidth%7D%22%20height%3D%22%24%7Bheight%7D%22%3E%60%3B%0A%20%20%20%20svg%20%2B%3D%20%60%3Cimage%20href%3D%22%24%7BimageURI%7D%22%20width%3D%22%24%7Bwidth%7D%22%20height%3D%22%24%7Bheight%7D%22%20%2F%3E%60%3B%0A%20%20%20%20svg%20%2B%3D%20%22%3C%2Fsvg%3E%22%3B%0A%20%20%20%20%2F%2F%20URI%20encoding%20usually%20results%20in%20smaller%20string%20than%20base%2064%20for%20the%20types%20of%20data%20we%20get%20here.%0A%20%20%20%20const%20svgURI%20%3D%20%60data%3Aimage%2Fsvg%2Bxml%3B%2C%24%7BencodeURIComponent(svg)%7D%60%3B%0A%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20uri%3A%20svgURI%2C%0A%20%20%20%20%20%20width%2C%0A%20%20%20%20%20%20height%2C%0A%20%20%20%20%7D%3B%0A%20%20%7D%3B%0A%0A%20%20%2F**%20%40type%20%7Bstring%7D%20*%2F%0A%20%20let%20nativeCursor%20%3D%20%22default%22%3B%0A%20%20%2F**%20%40type%20%7Bnull%7Cstring%7D%20*%2F%0A%20%20let%20customCursorImageName%20%3D%20null%3B%0A%0A%20%20const%20canvas%20%3D%20Scratch.renderer.canvas%3B%0A%20%20%2F**%20%40type%20%7Bstring%7D%20*%2F%0A%20%20let%20currentCanvasCursor%20%3D%20nativeCursor%3B%0A%20%20const%20updateCanvasCursor%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20if%20(canvas.style.cursor%20!%3D%3D%20currentCanvasCursor)%20%7B%0A%20%20%20%20%20%20canvas.style.cursor%20%3D%20currentCanvasCursor%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20scratch-gui%20will%20sometimes%20reset%20the%20cursor%20when%20resizing%20the%20window%20or%20going%20in%2Fout%20of%20fullscreen%0A%20%20new%20MutationObserver(updateCanvasCursor).observe(canvas%2C%20%7B%0A%20%20%20%20attributeFilter%3A%20%5B%22style%22%5D%2C%0A%20%20%20%20attributes%3A%20true%2C%0A%20%20%7D)%3B%0A%0A%20%20%2F**%0A%20%20%20*%20Parse%20strings%20like%20%2260x12%22%20or%20%2277%2C1%22%0A%20%20%20*%20%40param%20%7Bstring%7D%20string%0A%20%20%20*%20%40returns%20%7B%5Bnumber%2C%20number%5D%7D%0A%20%20%20*%2F%0A%20%20const%20parseTuple%20%3D%20(string)%20%3D%3E%20%7B%0A%20%20%20%20const%20%5Ba%2C%20b%5D%20%3D%20(%22%22%20%2B%20string).split(%2F%5B%20%2Cx%5D%2F)%3B%0A%20%20%20%20return%20%5B%2Ba%20%7C%7C%200%2C%20%2Bb%20%7C%7C%200%5D%3B%0A%20%20%7D%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7Bstring%7D%20size%20eg.%20%2248x84%22%0A%20%20%20*%20%40returns%20%7Bstring%7D%0A%20%20%20*%2F%0A%20%20const%20formatUnreliableSize%20%3D%20(size)%20%3D%3E%0A%20%20%20%20Scratch.translate(%0A%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20default%3A%20%22%7Bsize%7D%20(unreliable)%22%2C%0A%20%20%20%20%20%20%20%20description%3A%20%22%5Bsize%5D%20is%20replaced%20with%20a%20size%20in%20pixels%20such%20as%20'48x48'%22%2C%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7B%20size%20%7D%0A%20%20%20%20)%3B%0A%0A%20%20const%20ALL_ALLOWED_CURSORS%20%3D%20%5B%0A%20%20%20%20%2F%2F%20This%20list%20includes%20%22none%22%20while%20the%20dropdown's%20list%20does%20not%0A%20%20%20%20%22none%22%2C%0A%0A%20%20%20%20%22default%22%2C%0A%20%20%20%20%22pointer%22%2C%0A%20%20%20%20%22move%22%2C%0A%20%20%20%20%22grab%22%2C%0A%20%20%20%20%22grabbing%22%2C%0A%20%20%20%20%22text%22%2C%0A%20%20%20%20%22vertical-text%22%2C%0A%20%20%20%20%22wait%22%2C%0A%20%20%20%20%22progress%22%2C%0A%20%20%20%20%22help%22%2C%0A%20%20%20%20%22context-menu%22%2C%0A%20%20%20%20%22zoom-in%22%2C%0A%20%20%20%20%22zoom-out%22%2C%0A%20%20%20%20%22crosshair%22%2C%0A%20%20%20%20%22cell%22%2C%0A%20%20%20%20%22not-allowed%22%2C%0A%20%20%20%20%22copy%22%2C%0A%20%20%20%20%22alias%22%2C%0A%20%20%20%20%22no-drop%22%2C%0A%20%20%20%20%22all-scroll%22%2C%0A%20%20%20%20%22col-resize%22%2C%0A%20%20%20%20%22row-resize%22%2C%0A%20%20%20%20%22n-resize%22%2C%0A%20%20%20%20%22e-resize%22%2C%0A%20%20%20%20%22s-resize%22%2C%0A%20%20%20%20%22w-resize%22%2C%0A%20%20%20%20%22ne-resize%22%2C%0A%20%20%20%20%22nw-resize%22%2C%0A%20%20%20%20%22se-resize%22%2C%0A%20%20%20%20%22sw-resize%22%2C%0A%20%20%20%20%22ew-resize%22%2C%0A%20%20%20%20%22ns-resize%22%2C%0A%20%20%20%20%22nesw-resize%22%2C%0A%20%20%20%20%22nwse-resize%22%2C%0A%20%20%5D%3B%0A%0A%20%20class%20MouseCursor%20%7B%0A%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20Scratch.vm.runtime.on(%22RUNTIME_DISPOSED%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.setCur(%7B%0A%20%20%20%20%20%20%20%20%20%20cur%3A%20%22default%22%2C%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22MouseCursor%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%22Mouse%20Cursor%22)%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setCur%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20cursor%20to%20%5Bcur%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20cur%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22pointer%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22cursors%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setCursorImage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22set%20cursor%20to%20current%20costume%20center%3A%20%5Bposition%5D%20max%20size%3A%20%5Bsize%5D%22%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20position%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%2C0%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22imagePositions%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20size%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%2232x32%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22imageSizes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22hideCur%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22hide%20cursor%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getCur%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22cursor%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20cursors%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22default%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22default%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22pointer%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22pointer%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22move%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22move%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22grab%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22grab%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22grabbing%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22grabbing%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22vertical-text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22vertical-text%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22wait%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22wait%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22progress%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22progress%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22help%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22help%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22context-menu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22context-menu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22zoom-in%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22zoom-in%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22zoom-out%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22zoom-out%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22crosshair%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22crosshair%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22cell%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22cell%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22not%20allowed%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22not-allowed%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22copy%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22copy%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22alias%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22alias%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22no%20drop%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22no-drop%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22all-scroll%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22all-scroll%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22col-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22col-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22row-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22row-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22n-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22n-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22e-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22e-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22s-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22s-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22w-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22w-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22ne-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22ne-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22nw-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22nw-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22se-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22se-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22sw-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22sw-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22ew-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22ew-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22ns-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22ns-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22nesw-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22nesw-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22nwse-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Part%20of%20cursor%20dropdown.%20See%20https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FProperties%2Fcursor%23keyword%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22nwse-resize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20imagePositions%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%5Bx%2C%20y%5D%20where%20x%20is%20%5B0%3Dleft%2C%20100%3Dright%5D%20and%20y%20is%20%5B0%3Dtop%2C%20100%3Dbottom%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22top%20left%22)%2C%20value%3A%20%220%2C0%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22top%20right%22)%2C%20value%3A%20%22100%2C0%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22bottom%20left%22)%2C%20value%3A%20%220%2C100%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22bottom%20right%22)%2C%20value%3A%20%22100%2C100%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22center%22)%2C%20value%3A%20%2250%2C50%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20imageSizes%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Some%20important%20numbers%20to%20keep%20in%20mind%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Browsers%20ignore%20cursor%20images%20%3E128%20in%20any%20dimension%20(https%3A%2F%2Fsearchfox.org%2Fmozilla-central%2Frev%2F43ee5e789b079e94837a21336e9ce2420658fd19%2Fwidget%2Fgtk%2FnsWindow.cpp%233393-3402)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Browsers%20may%20refuse%20to%20display%20a%20cursor%20near%20window%20borders%20for%20images%20%3E32%20in%20any%20dimension%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20%224x4%22%2C%20value%3A%20%224x4%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20%228x8%22%2C%20value%3A%20%228x4%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20%2212x12%22%2C%20value%3A%20%2212x12%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20%2216x16%22%2C%20value%3A%20%2216x16%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20%2232x32%22%2C%20value%3A%20%2232x32%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20formatUnreliableSize(%2248x48%22)%2C%20value%3A%20%2248x48%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20formatUnreliableSize(%2264x64%22)%2C%20value%3A%20%2264x64%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20formatUnreliableSize(%22128x128%22)%2C%20value%3A%20%22128x128%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setCur(args)%20%7B%0A%20%20%20%20%20%20const%20newCursor%20%3D%20Scratch.Cast.toString(args.cur)%3B%0A%20%20%20%20%20%20%2F%2F%20Prevent%20setting%20cursor%20to%20%22url(...)%2C%20default%22%20from%20causing%20fetch.%0A%20%20%20%20%20%20if%20(ALL_ALLOWED_CURSORS.includes(newCursor))%20%7B%0A%20%20%20%20%20%20%20%20nativeCursor%20%3D%20newCursor%3B%0A%20%20%20%20%20%20%20%20customCursorImageName%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20currentCanvasCursor%20%3D%20newCursor%3B%0A%20%20%20%20%20%20%20%20updateCanvasCursor()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setCursorImage(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20%5BmaxWidth%2C%20maxHeight%5D%20%3D%20parseTuple(args.size).map((i)%20%3D%3E%0A%20%20%20%20%20%20%20%20Math.max(0%2C%20i)%0A%20%20%20%20%20%20)%3B%0A%0A%20%20%20%20%20%20const%20currentCostume%20%3D%0A%20%20%20%20%20%20%20%20util.target.getCostumes()%5Butil.target.currentCostume%5D%3B%0A%20%20%20%20%20%20const%20costumeName%20%3D%20currentCostume.name%3B%0A%0A%20%20%20%20%20%20let%20encodedCostume%3B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20encodedCostume%20%3D%20costumeToCursor(currentCostume%2C%20maxWidth%2C%20maxHeight)%3B%0A%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20could%20happen%20for%20a%20variety%20of%20reasons.%0A%20%20%20%20%20%20%20%20console.error(e)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(encodedCostume)%20%7B%0A%20%20%20%20%20%20%20%20const%20%5BpercentX%2C%20percentY%5D%20%3D%20parseTuple(args.position).map(%0A%20%20%20%20%20%20%20%20%20%20(i)%20%3D%3E%20Math.max(0%2C%20Math.min(100%2C%20i))%20%2F%20100%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20const%20x%20%3D%20percentX%20*%20encodedCostume.width%3B%0A%20%20%20%20%20%20%20%20const%20y%20%3D%20percentY%20*%20encodedCostume.height%3B%0A%0A%20%20%20%20%20%20%20%20currentCanvasCursor%20%3D%20%60url(%22%24%7BencodedCostume.uri%7D%22)%20%24%7Bx%7D%20%24%7By%7D%2C%20%24%7BnativeCursor%7D%60%3B%0A%20%20%20%20%20%20%20%20updateCanvasCursor()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20If%20for%20some%20reason%20the%20costume%20couldn't%20be%20encoded%2C%20we'll%20leave%20the%20cursor%20unchanged.%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20is%20the%20same%20behavior%20that%20would%20happen%20if%20we%20successfully%20encode%20a%20cursor%20but%20the%20browser%0A%20%20%20%20%20%20%20%20%2F%2F%20is%20unable%20to%20parse%20it%20for%20some%20reason.%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20customCursorImageName%20%3D%20costumeName%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20hideCur()%20%7B%0A%20%20%20%20%20%20this.setCur(%7B%0A%20%20%20%20%20%20%20%20cur%3A%20%22none%22%2C%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getCur()%20%7B%0A%20%20%20%20%20%20if%20(customCursorImageName%20!%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20return%20customCursorImageName%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20nativeCursor%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20MouseCursor())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Clipping%20%26%20Blending%0A%2F%2F%20ID%3A%20xeltallivclipblend%0A%2F%2F%20Description%3A%20Clipping%20outside%20of%20a%20specified%20rectangular%20area%20and%20different%20color%20blending%20modes.%0A%2F%2F%20By%3A%20Vadik1%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FVadik1%2F%3E%0A%2F%2F%20License%3A%20MIT%0A%0A%2F*%20generated%20l10n%20code%20*%2FScratch.translate.setup(%7B%22de%22%3A%7B%22_Clipping%20%26%20Blending%22%3A%22R%C3%A4nder%20ver%C3%A4ndern%20%26%20Farben%20mischen%22%2C%22_height%22%3A%22H%C3%B6he%22%2C%22_width%22%3A%22Weite%22%7D%2C%22es%22%3A%7B%22_default%22%3A%22por%20defecto%22%7D%2C%22fi%22%3A%7B%22_Clipping%20%26%20Blending%22%3A%22Leikkaaminen%20ja%20sekoitus%22%2C%22_Stage%20selected%3A%20no%20blocks%22%3A%22Esiintymislava%20valittu%3A%20ei%20lohkoja%22%2C%22_additive%22%3A%22additiivista%22%2C%22_additive%20with%20alpha%22%3A%22alfa-additiivista%22%2C%22_blending%22%3A%22sekoitus%22%2C%22_clear%20clipping%20box%22%3A%22poista%20leikkauslaatikko%22%2C%22_clipping%20box%20%5BPROP%5D%22%3A%22leikkauslaatikon%20%5BPROP%5D%22%2C%22_default%22%3A%22oletus%22%2C%22_default%20behind%22%3A%22tausta%22%2C%22_erase%22%3A%22pyyhint%C3%A4%22%2C%22_height%22%3A%22korkeus%22%2C%22_invert%22%3A%22k%C3%A4%C3%A4nteis%22%2C%22_is%20additive%20blending%20on%3F%22%3A%22onko%20additiivinen%20sekoitus%20p%C3%A4%C3%A4ll%C3%A4%3F%22%2C%22_mask%22%3A%22maski%22%2C%22_max%20x%22%3A%22suurin%20x-sijainti%22%2C%22_max%20y%22%3A%22suurin%20y-sijainti%22%2C%22_min%20x%22%3A%22pienin%20x-sijainti%22%2C%22_min%20y%22%3A%22pienin%20y-sijainti%22%2C%22_multiply%22%3A%22monistus%22%2C%22_off%22%3A%22pois%20p%C3%A4%C3%A4lt%C3%A4%22%2C%22_on%22%3A%22p%C3%A4%C3%A4lle%22%2C%22_set%20clipping%20box%20x1%3A%5BX1%5D%20y1%3A%5BY1%5D%20x2%3A%5BX2%5D%20y2%3A%5BY2%5D%22%3A%22aseta%20leikkauslaatikoksi%20x1%3A%20%5BX1%5D%20y1%3A%20%5BY1%5D%20x2%3A%20%5BX2%5D%20y2%3A%20%5BY2%5D%22%2C%22_subtract%22%3A%22v%C3%A4hennys%22%2C%22_subtract%20with%20alpha%22%3A%22alfav%C3%A4hennys%22%2C%22_turn%20additive%20blending%20%5BSTATE%5D%22%3A%22kytke%20additiivinen%20sekoitus%20%5BSTATE%5D%22%2C%22_use%20%5BBLENDMODE%5D%20blending%22%3A%22k%C3%A4yt%C3%A4%20%5BBLENDMODE%5D%20sekoitusta%22%2C%22_use%20%5BBLENDMODE%5D%20blending%20(old)%22%3A%22k%C3%A4yt%C3%A4%20%5BBLENDMODE%5D%20sekoitusta%20(vanha)%22%2C%22_width%22%3A%22leveys%22%7D%2C%22fr%22%3A%7B%22_height%22%3A%22hauteur%22%2C%22_width%22%3A%22largeur%22%7D%2C%22it%22%3A%7B%22_Clipping%20%26%20Blending%22%3A%22Ritaglio%20e%20Fusione%22%2C%22_Stage%20selected%3A%20no%20blocks%22%3A%22Stage%20selezionato%3A%20nessun%20blocco%22%2C%22_additive%22%3A%22additiva%22%2C%22_additive%20with%20alpha%22%3A%22additiva%20con%20alfa%22%2C%22_blending%22%3A%22fusione%22%2C%22_clear%20clipping%20box%22%3A%22cancella%20area%20ritaglio%22%2C%22_clipping%20box%20%5BPROP%5D%22%3A%22%5BPROP%5D%20area%20ritaglio%22%2C%22_default%22%3A%22predefinito%22%2C%22_default%20behind%22%3A%22predefinito%20dietro%22%2C%22_erase%22%3A%22cancellazione%22%2C%22_height%22%3A%22altezza%22%2C%22_invert%22%3A%22colori%20invertiti%22%2C%22_is%20additive%20blending%20on%3F%22%3A%22fusione%20additiva%20attiva%22%2C%22_mask%22%3A%22maschera%22%2C%22_max%20x%22%3A%22x%20man%22%2C%22_max%20y%22%3A%22y%20max%22%2C%22_min%20x%22%3A%22x%20min%22%2C%22_min%20y%22%3A%22y%20min%22%2C%22_multiply%22%3A%22moltiplicativa%22%2C%22_off%22%3A%22disabilita%22%2C%22_on%22%3A%22abilita%22%2C%22_set%20clipping%20box%20x1%3A%5BX1%5D%20y1%3A%5BY1%5D%20x2%3A%5BX2%5D%20y2%3A%5BY2%5D%22%3A%22usa%20area%20ritaglio%20x1%3A%5BX1%5D%20y1%3A%5BY1%5D%20x2%3A%5BX2%5D%20y2%3A%5BY2%5D%22%2C%22_subtract%22%3A%22sottrattiva%22%2C%22_subtract%20with%20alpha%22%3A%22sottrattiva%20con%20alfa%22%2C%22_turn%20additive%20blending%20%5BSTATE%5D%22%3A%22%5BSTATE%5D%20fusione%20additiva%20%22%2C%22_use%20%5BBLENDMODE%5D%20blending%22%3A%22usa%20fusione%20%5BBLENDMODE%5D%22%2C%22_use%20%5BBLENDMODE%5D%20blending%20(old)%22%3A%22usa%20blending%20%5BBLENDMODE%5D%20(vecchio)%22%2C%22_width%22%3A%22larghezza%22%7D%2C%22ja%22%3A%7B%22_Stage%20selected%3A%20no%20blocks%22%3A%22%E3%82%B9%E3%83%86%E3%83%BC%E3%82%B8%E9%81%B8%E6%8A%9E%3A%20%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E3%81%8C%E3%81%82%E3%82%8A%E3%81%BE%E3%81%9B%E3%82%93%E3%80%82%22%2C%22_additive%22%3A%22%E5%8A%A0%E7%AE%97%22%2C%22_blending%22%3A%22%E3%83%96%E3%83%AC%E3%83%B3%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%22%2C%22_clear%20clipping%20box%22%3A%22%E3%82%AF%E3%83%AA%E3%83%83%E3%83%94%E3%83%B3%E3%82%B0%E3%83%9C%E3%83%83%E3%82%AF%E3%82%B9%E3%82%92%E3%82%AF%E3%83%AA%E3%82%A2%22%2C%22_clipping%20box%20%5BPROP%5D%22%3A%22%E3%82%AF%E3%83%AA%E3%83%83%E3%83%94%E3%83%B3%E3%82%B0%E3%83%9C%E3%83%83%E3%82%AF%E3%82%B9%E3%81%AE%5BPROP%5D%22%2C%22_default%22%3A%22%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%22%2C%22_height%22%3A%22%E9%AB%98%E3%81%95%22%2C%22_invert%22%3A%22%E8%89%B2%E3%81%AE%E5%8F%8D%E8%BB%A2%22%2C%22_max%20x%22%3A%22%E6%9C%80%E5%A4%A7%E3%81%AEx%22%2C%22_max%20y%22%3A%22%E6%9C%80%E5%A4%A7%E3%81%AEy%22%2C%22_min%20x%22%3A%22%E6%9C%80%E5%B0%8F%E3%81%AEx%22%2C%22_min%20y%22%3A%22%E6%9C%80%E5%B0%8F%E3%81%AEy%22%2C%22_multiply%22%3A%22%E4%B9%97%E7%AE%97%22%2C%22_off%22%3A%22%E3%82%AA%E3%83%95%22%2C%22_on%22%3A%22%E3%82%AA%E3%83%B3%22%2C%22_set%20clipping%20box%20x1%3A%5BX1%5D%20y1%3A%5BY1%5D%20x2%3A%5BX2%5D%20y2%3A%5BY2%5D%22%3A%22%E3%82%AF%E3%83%AA%E3%83%83%E3%83%94%E3%83%B3%E3%82%B0%E3%83%9C%E3%83%83%E3%82%AF%E3%82%B9%E3%82%92x1%3A%5BX1%5Dy1%3A%5BY1%5Dx2%3A%5BX2%5Dy2%3A%5BY2%5D%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_subtract%22%3A%22%E6%B8%9B%E7%AE%97%22%2C%22_use%20%5BBLENDMODE%5D%20blending%22%3A%22%5BBLENDMODE%5D%E3%83%96%E3%83%AC%E3%83%B3%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0%E3%82%92%E4%BD%BF%E3%81%86%22%2C%22_width%22%3A%22%E6%A8%AA%E5%B9%85%22%7D%2C%22ko%22%3A%7B%22_Clipping%20%26%20Blending%22%3A%22%ED%81%B4%EB%A6%AC%ED%95%91%20%EB%B0%8F%20%EB%B8%94%EB%A0%8C%EB%94%A9%22%2C%22_additive%22%3A%22%EB%8D%94%ED%95%98%EA%B8%B0%22%2C%22_blending%22%3A%22%EB%B8%94%EB%A0%8C%EB%94%A9%22%2C%22_clear%20clipping%20box%22%3A%22%ED%81%B4%EB%A6%AC%ED%95%91%20%EC%98%81%EC%97%AD%20%EC%B4%88%EA%B8%B0%ED%99%94%22%2C%22_clipping%20box%20%5BPROP%5D%22%3A%22%ED%81%B4%EB%A6%AC%ED%95%91%20%EC%98%81%EC%97%AD%20%5BPROP%5D%22%2C%22_default%22%3A%22%EA%B8%B0%EB%B3%B8%22%2C%22_height%22%3A%22%EB%86%92%EC%9D%B4%22%2C%22_invert%22%3A%22%EB%B0%98%EC%A0%84%22%2C%22_is%20additive%20blending%20on%3F%22%3A%22%EB%8D%94%ED%95%98%EA%B8%B0%20%EB%B8%94%EB%A0%8C%EB%94%A9%EC%9D%B4%20%EC%BC%9C%EC%A0%B8%EC%9E%88%EB%8A%94%EA%B0%80%3F%22%2C%22_max%20x%22%3A%22%EC%B5%9C%EB%8C%80%20x%22%2C%22_max%20y%22%3A%22%EC%B5%9C%EB%8C%80%20y%22%2C%22_min%20x%22%3A%22%EC%B5%9C%EC%86%8C%20x%22%2C%22_min%20y%22%3A%22%EC%B5%9C%EC%86%8C%20y%22%2C%22_multiply%22%3A%22%EA%B3%B1%ED%95%98%EA%B8%B0%22%2C%22_off%22%3A%22%EB%81%84%EA%B8%B0%22%2C%22_on%22%3A%22%EC%BC%9C%EA%B8%B0%22%2C%22_set%20clipping%20box%20x1%3A%5BX1%5D%20y1%3A%5BY1%5D%20x2%3A%5BX2%5D%20y2%3A%5BY2%5D%22%3A%22%ED%81%B4%EB%A6%AC%ED%95%91%20%EC%98%81%EC%97%AD%EC%9D%84%20x1%3A%5BX1%5D%20y1%3A%5BY1%5D%20x2%3A%5BX2%5D%20y2%3A%5BY2%5D%20(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22_subtract%22%3A%22%EB%B9%BC%EA%B8%B0%22%2C%22_turn%20additive%20blending%20%5BSTATE%5D%22%3A%22%EB%8D%94%ED%95%98%EA%B8%B0%20%EB%B8%94%EB%A0%8C%EB%94%A9%20%5BSTATE%5D%22%2C%22_use%20%5BBLENDMODE%5D%20blending%22%3A%22%5BBLENDMODE%5D%20%EB%B8%94%EB%A0%8C%EB%94%A9%ED%95%98%EA%B8%B0%22%2C%22_width%22%3A%22%EB%84%93%EC%9D%B4%22%7D%2C%22nb%22%3A%7B%22_Clipping%20%26%20Blending%22%3A%22Klipping%20og%20blanding%22%2C%22_height%22%3A%22h%C3%B8yde%22%2C%22_off%22%3A%22av%22%2C%22_on%22%3A%22p%C3%A5%22%2C%22_width%22%3A%22bredde%22%7D%2C%22nl%22%3A%7B%22_Clipping%20%26%20Blending%22%3A%22Knippen%20%26%20mengen%22%2C%22_default%22%3A%22standaard%22%2C%22_height%22%3A%22hoogte%22%2C%22_invert%22%3A%22omgekeerd%22%2C%22_off%22%3A%22uit%22%2C%22_on%22%3A%22aan%22%2C%22_width%22%3A%22breedte%22%7D%2C%22pl%22%3A%7B%22_height%22%3A%22wysoko%C5%9B%C4%87%22%2C%22_width%22%3A%22szeroko%C5%9B%C4%87%22%7D%2C%22ru%22%3A%7B%22_Clipping%20%26%20Blending%22%3A%22%D0%9E%D0%B1%D1%80%D0%B5%D0%B7%D0%BA%D0%B0%20%D0%B8%20%D0%A1%D0%BC%D0%B5%D1%88%D0%B8%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%22%2C%22_Stage%20selected%3A%20no%20blocks%22%3A%22%D0%92%D1%8B%D0%B1%D1%80%D0%B0%D0%BD%D0%B0%20%D1%81%D1%86%D0%B5%D0%BD%D0%B0%3A%20%D0%BD%D0%B5%D1%82%20%D0%B1%D0%BB%D0%BE%D0%BA%D0%BE%D0%B2%22%2C%22_additive%22%3A%22%D0%BF%D1%80%D0%B8%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%22%2C%22_additive%20with%20alpha%22%3A%22%D0%B4%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5%20%D1%81%20%D0%BF%D1%80%D0%BE%D0%B7%D1%80%D0%B0%D1%87%D0%BD%D0%BE%D1%81%D1%82%D1%8C%D1%8E%22%2C%22_blending%22%3A%22%D1%81%D0%BC%D0%B5%D1%88%D0%B8%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%22%2C%22_clear%20clipping%20box%22%3A%22%D0%BE%D1%82%D1%87%D0%B8%D1%81%D1%82%D0%B8%D1%82%D1%8C%20%D1%80%D0%B0%D0%BC%D0%BA%D1%83%20%D0%BE%D1%82%D1%81%D0%B5%D1%87%D0%B5%D0%BD%D0%B8%D1%8F%22%2C%22_clipping%20box%20%5BPROP%5D%22%3A%22%5BPROP%5D%20%D1%80%D0%B0%D0%BC%D0%BA%D0%B8%20%D0%BE%D1%82%D1%81%D0%B5%D1%87%D0%B5%D0%BD%D0%B8%D1%8F%22%2C%22_default%22%3A%22%D0%BF%D0%BE%20%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E%22%2C%22_default%20behind%22%3A%22%D0%BE%D0%B1%D1%8B%D1%87%D0%BD%D0%BE%D0%B5%20%D0%BF%D0%BE%D0%B7%D0%B0%D0%B4%D0%B8%22%2C%22_erase%22%3A%22%D1%81%D1%82%D0%B5%D1%80%D0%B5%D1%82%D1%8C%22%2C%22_height%22%3A%22%D0%B2%D1%8B%D1%81%D0%BE%D1%82%D0%B0%22%2C%22_invert%22%3A%22%D0%B8%D0%BD%D0%B2%D0%B5%D1%80%D1%82%22%2C%22_is%20additive%20blending%20on%3F%22%3A%22%D0%B2%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%BE%20%D0%BB%D0%B8%20%D1%81%D0%BC%D0%B5%D1%88%D0%B8%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%BF%D1%80%D0%B8%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%3F%22%2C%22_mask%22%3A%22%D0%BC%D0%B0%D1%81%D0%BA%D0%B0%22%2C%22_max%20x%22%3A%22%D0%BC%D0%B0%D0%BA%D1%81%D0%B8%D0%BC%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9%20x%22%2C%22_max%20y%22%3A%22%D0%BC%D0%B0%D0%BA%D1%81%D0%B8%D0%BC%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9%20y%22%2C%22_min%20x%22%3A%22%D0%BC%D0%B8%D0%BD%D0%B8%D0%BC%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9%20x%22%2C%22_min%20y%22%3A%22%D0%BC%D0%B8%D0%BD%D0%B8%D0%BC%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9%20y%22%2C%22_multiply%22%3A%22%D1%83%D0%BC%D0%BD%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%22%2C%22_off%22%3A%22%D0%B2%D1%8B%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D1%8C%22%2C%22_on%22%3A%22%D0%B2%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D1%8C%22%2C%22_set%20clipping%20box%20x1%3A%5BX1%5D%20y1%3A%5BY1%5D%20x2%3A%5BX2%5D%20y2%3A%5BY2%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%80%D0%B0%D0%BC%D0%BA%D1%83%20%D0%BE%D1%82%D1%81%D0%B5%D1%87%D0%B5%D0%BD%D0%B8%D1%8F%20x1%3A%5BX1%5D%20y1%3A%5BY1%5D%20x2%3A%5BX2%5D%20y2%3A%5BY2%5D%22%2C%22_subtract%22%3A%22%D0%B2%D1%8B%D1%87%D0%B8%D1%82%D0%B0%D0%BD%D0%B8%D0%B5%22%2C%22_subtract%20with%20alpha%22%3A%22%D0%B2%D1%8B%D1%87%D0%B8%D1%82%D0%B0%D0%BD%D0%B8%D0%B5%20%D1%81%20%D0%BF%D1%80%D0%BE%D0%B7%D1%80%D0%B0%D1%87%D0%BD%D0%BE%D1%81%D1%82%D1%8C%D1%8E%22%2C%22_turn%20additive%20blending%20%5BSTATE%5D%22%3A%22%D0%B2%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D1%8C%20%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%20%D1%81%D0%BC%D0%B5%D1%88%D0%B8%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F%20%D0%BF%D1%80%D0%B8%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%20%5BSTATE%5D%22%2C%22_use%20%5BBLENDMODE%5D%20blending%22%3A%22%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D1%8C%20%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%20%D1%81%D0%BC%D0%B5%D1%88%D0%B8%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F%20%5BBLENDMODE%5D%22%2C%22_use%20%5BBLENDMODE%5D%20blending%20(old)%22%3A%22%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D1%8C%20%5BBLENDMODE%5D%20%D0%BE%D1%82%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5%20(%D1%81%D1%82%D0%B0%D1%80%D0%BE%D0%B5)%22%2C%22_width%22%3A%22%D1%88%D0%B8%D1%80%D0%B8%D0%BD%D0%B0%22%7D%2C%22tr%22%3A%7B%22_Clipping%20%26%20Blending%22%3A%22K%C4%B1rpma%20ve%20Kar%C4%B1%C5%9Ft%C4%B1rma%22%7D%2C%22uk%22%3A%7B%22_Clipping%20%26%20Blending%22%3A%22%D0%9E%D0%B1%D1%80%D1%96%D0%B7%D0%B0%D0%BD%D0%BD%D1%8F%20%D1%82%D0%B0%20%D0%97%D0%BC%D1%96%D1%88%D1%83%D0%B2%D0%B0%D0%BD%D0%BD%D1%8F%22%2C%22_height%22%3A%22%D0%B2%D0%B8%D1%81%D0%BE%D1%82%D0%B0%22%2C%22_off%22%3A%22%D0%B2%D0%B8%D0%BC%D0%BA%D0%BD%D1%83%D1%82%D0%B8%22%2C%22_on%22%3A%22%D1%83%D0%B2%D1%96%D0%BC%D0%BA%D0%BD%D1%83%D1%82%D0%B8%22%2C%22_width%22%3A%22%D1%88%D0%B8%D1%80%D0%B8%D0%BD%D0%B0%22%7D%2C%22zh-cn%22%3A%7B%22_Clipping%20%26%20Blending%22%3A%22%E8%A3%81%E5%89%AA%E4%B8%8E%E9%A2%9C%E8%89%B2%E6%B7%B7%E5%90%88%22%2C%22_Stage%20selected%3A%20no%20blocks%22%3A%22%E9%80%89%E4%B8%AD%E8%88%9E%E5%8F%B0%E6%97%B6%E6%97%A0%E5%8F%AF%E7%94%A8%E7%A7%AF%E6%9C%A8%22%2C%22_additive%22%3A%22%E5%8A%A0%E6%B3%95%22%2C%22_additive%20with%20alpha%22%3A%22%E5%B8%A6%E6%9C%89%E9%80%8F%E6%98%8E%E5%BA%A6%E7%9A%84%E5%8A%A0%E6%B3%95%22%2C%22_blending%22%3A%22%E6%B7%B7%E5%90%88%E6%A8%A1%E5%BC%8F%22%2C%22_clear%20clipping%20box%22%3A%22%E6%B8%85%E9%99%A4%E8%A3%81%E5%89%AA%E6%A1%86%22%2C%22_clipping%20box%20%5BPROP%5D%22%3A%22%E8%A3%81%E5%89%AA%E6%A1%86%5BPROP%5D%22%2C%22_default%22%3A%22%E9%BB%98%E8%AE%A4%22%2C%22_default%20behind%22%3A%22%E9%BB%98%E8%AE%A4%E5%90%8E%E6%96%B9%22%2C%22_erase%22%3A%22%E6%93%A6%E9%99%A4%22%2C%22_height%22%3A%22%E9%AB%98%E5%BA%A6%22%2C%22_invert%22%3A%22%E5%8F%8D%E8%89%B2%22%2C%22_is%20additive%20blending%20on%3F%22%3A%22%E5%8A%A0%E6%B3%95%E6%B7%B7%E5%90%88%E5%BC%80%E5%90%AF%EF%BC%9F%22%2C%22_mask%22%3A%22%E9%81%AE%E7%BD%A9%22%2C%22_max%20x%22%3A%22%E5%8F%B3x%22%2C%22_max%20y%22%3A%22%E4%B8%8Ay%22%2C%22_min%20x%22%3A%22%E5%B7%A6x%22%2C%22_min%20y%22%3A%22%E4%B8%8By%22%2C%22_multiply%22%3A%22%E6%AD%A3%E7%89%87%E5%8F%A0%E5%BA%95%22%2C%22_off%22%3A%22%E5%85%B3%E9%97%AD%22%2C%22_on%22%3A%22%E6%89%93%E5%BC%80%22%2C%22_set%20clipping%20box%20x1%3A%5BX1%5D%20y1%3A%5BY1%5D%20x2%3A%5BX2%5D%20y2%3A%5BY2%5D%22%3A%22%E5%B0%86%E8%A3%81%E5%89%AA%E6%A1%86%E8%AE%BE%E4%B8%BAx1%EF%BC%9A%5BX1%5D%20y1%EF%BC%9A%5BY1%5D%20x2%EF%BC%9A%5BX2%5D%20y2%EF%BC%9A%5BY2%5D%22%2C%22_subtract%22%3A%22%E5%87%8F%E6%B3%95%22%2C%22_subtract%20with%20alpha%22%3A%22%E5%B8%A6%E6%9C%89%E9%80%8F%E6%98%8E%E5%BA%A6%E7%9A%84%E5%87%8F%E6%B3%95%22%2C%22_turn%20additive%20blending%20%5BSTATE%5D%22%3A%22%E5%8A%A0%E6%B3%95%E6%B7%B7%E5%90%88%20%5BSTATE%5D%22%2C%22_use%20%5BBLENDMODE%5D%20blending%22%3A%22%E4%BD%BF%E7%94%A8%5BBLENDMODE%5D%E6%B7%B7%E5%90%88%E6%A8%A1%E5%BC%8F%22%2C%22_use%20%5BBLENDMODE%5D%20blending%20(old)%22%3A%22%E4%BD%BF%E7%94%A8%5BBLENDMODE%5D%E6%B7%B7%E5%90%88%E6%A8%A1%E5%BC%8F(%E6%97%A7)%22%2C%22_width%22%3A%22%E5%AE%BD%E5%BA%A6%22%7D%7D)%3B%2F*%20end%20generated%20l10n%20code%20*%2F(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20%7B%0A%20%20%20%20throw%20new%20Error(%22Clipping%20%26%20Blending%20extension%20must%20be%20run%20unsandboxed%22)%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Simplified%20remake%20of%20an%20icon%20by%20True-Fantom%0A%20%20const%20icon%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%2C%22%20%2B%0A%20%20%20%20encodeURIComponent(%60%0A%20%20%20%20%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20viewBox%3D%220%2C0%2C200%2C200%22%3E%0A%20%20%20%20%20%20%3Ccircle%20r%3D%22100%22%20cx%3D%22100%22%20cy%3D%22100%22%20fill%3D%22%239966ff%22%2F%3E%0A%20%20%20%20%20%20%3Cpath%20d%3D%22M122%2C61v-4a12%2C12%200%2C0%2C0%20-12%2C-12h-4m-17%2C0h-16m-17%2C0h-4a12%2C12%200%2C0%2C0%20-12%2C12v4m0%2C17v16m0%2C17v4a12%2C12%200%2C0%2C0%2012%2C12h4%22%20stroke%3D%22%23ffffff%22%20stroke-width%3D%2211%22%20stroke-linecap%3D%22round%22%20fill%3D%22none%22%2F%3E%0A%20%20%20%20%20%20%3Cg%20fill%3D%22%23ffffff%22%20stroke%3D%22%239966ff%22%20stroke-width%3D%227.5%22%3E%0A%20%20%20%20%20%20%20%20%3Ccircle%20r%3D%2232%22%20cx%3D%22118%22%20cy%3D%22102%22%2F%3E%0A%20%20%20%20%20%20%20%20%3Ccircle%20r%3D%2232%22%20cx%3D%2296%22%20cy%3D%22137%22%2F%3E%0A%20%20%20%20%20%20%20%20%3Ccircle%20r%3D%2232%22%20cx%3D%22140%22%20cy%3D%22137%22%2F%3E%0A%20%20%20%20%20%20%3C%2Fg%3E%0A%20%20%20%20%3C%2Fsvg%3E%60)%3B%0A%0A%20%20let%20toCorrectThing%20%3D%20null%3B%0A%20%20let%20active%20%3D%20false%3B%0A%20%20let%20flipY%20%3D%20false%3B%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0A%20%20const%20renderer%20%3D%20vm.renderer%3B%0A%20%20const%20_drawThese%20%3D%20renderer._drawThese%3B%0A%20%20const%20gl%20%3D%20renderer.gl%3B%0A%20%20const%20canvas%20%3D%20renderer.canvas%3B%0A%20%20let%20Drawable%20%3D%20renderer.exports.Drawable%3B%0A%20%20let%20width%20%3D%200%3B%0A%20%20let%20height%20%3D%200%3B%0A%20%20let%20scratchUnitWidth%20%3D%20480%3B%0A%20%20let%20scratchUnitHeight%20%3D%20360%3B%0A%20%20let%20penDirty%20%3D%20false%3B%0A%20%20const%20publicApi%20%3D%0A%20%20%20%20runtime.ext_clippingblendingapi%20%3F%3F%20(runtime.ext_clippingblendingapi%20%3D%20%7B%7D)%3B%0A%20%20if%20(!publicApi.mainFramebuffer)%20publicApi.mainFramebuffer%20%3D%20null%3B%0A%20%20if%20(!publicApi.setActive)%0A%20%20%20%20publicApi.setActive%20%3D%20(value)%20%3D%3E%20%7B%0A%20%20%20%20%20%20active%20%3D%20value%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%2F%2F%20prettier-ignore%0A%20%20const%20Blendings%20%3D%20Object.assign(Object.create(null)%2C%20%7B%0A%20%20%20%20%22default%22%3A%20%5Bgl.ONE%2C%20gl.ONE_MINUS_SRC_ALPHA%2C%20gl.ONE%2C%20gl.ONE_MINUS_SRC_ALPHA%2C%20gl.FUNC_ADD%5D%2C%0A%20%20%20%20%22default%20behind%22%3A%20%5Bgl.ONE_MINUS_DST_ALPHA%2C%20gl.ONE%2C%20gl.ONE_MINUS_DST_ALPHA%2C%20gl.ONE%2C%20gl.FUNC_ADD%5D%2C%0A%20%20%20%20%22additive%22%3A%20%5Bgl.ONE%2C%20gl.ONE%2C%20gl.ZERO%2C%20gl.ONE%2C%20gl.FUNC_ADD%5D%2C%0A%20%20%20%20%22additive%20with%20alpha%22%3A%20%5Bgl.ONE%2C%20gl.ONE%2C%20gl.ONE%2C%20gl.ONE%2C%20gl.FUNC_ADD%5D%2C%0A%20%20%20%20%22additive%20legacy%22%3A%20%5Bgl.ONE%2C%20gl.ONE%2C%20gl.ONE%2C%20gl.ONE%2C%20gl.FUNC_ADD%5D%2C%0A%20%20%20%20%22subtract%22%3A%20%5Bgl.ONE%2C%20gl.ONE%2C%20gl.ZERO%2C%20gl.ONE%2C%20gl.FUNC_REVERSE_SUBTRACT%5D%2C%0A%20%20%20%20%22subtract%20with%20alpha%22%3A%20%5Bgl.ONE%2C%20gl.ONE%2C%20gl.ONE%2C%20gl.ONE%2C%20gl.FUNC_REVERSE_SUBTRACT%5D%2C%0A%20%20%20%20%22subtract%20legacy%22%3A%20%5Bgl.ONE%2C%20gl.ONE%2C%20gl.ONE%2C%20gl.ONE%2C%20gl.FUNC_REVERSE_SUBTRACT%5D%2C%0A%20%20%20%20%22multiply%22%3A%20%5Bgl.DST_COLOR%2C%20gl.ONE_MINUS_SRC_ALPHA%2C%20gl.DST_COLOR%2C%20gl.ONE_MINUS_SRC_ALPHA%2C%20gl.FUNC_ADD%5D%2C%0A%20%20%20%20%22invert%22%3A%20%5Bgl.ONE_MINUS_DST_COLOR%2C%20gl.ONE_MINUS_SRC_COLOR%2C%20gl.ZERO%2C%20gl.ONE%2C%20gl.FUNC_ADD%5D%2C%0A%20%20%20%20%22invert%20legacy%22%3A%20%5Bgl.ONE_MINUS_DST_COLOR%2C%20gl.ONE_MINUS_SRC_COLOR%2C%20gl.ONE_MINUS_DST_COLOR%2C%20gl.ONE_MINUS_SRC_COLOR%2C%20gl.FUNC_ADD%5D%2C%0A%20%20%20%20%22mask%22%3A%20%5Bgl.ZERO%2C%20gl.SRC_ALPHA%2C%20gl.ZERO%2C%20gl.SRC_ALPHA%2C%20gl.FUNC_ADD%5D%2C%0A%20%20%20%20%22erase%22%3A%20%5Bgl.ZERO%2C%20gl.ONE_MINUS_SRC_ALPHA%2C%20gl.ZERO%2C%20gl.ONE_MINUS_SRC_ALPHA%2C%20gl.FUNC_ADD%5D%2C%0A%20%20%7D)%3B%0A%0A%20%20renderer._drawThese%20%3D%20function%20(drawables%2C%20drawMode%2C%20projection%2C%20opts)%20%7B%0A%20%20%20%20active%20%3D%20true%3B%0A%20%20%20%20%5BscratchUnitWidth%2C%20scratchUnitHeight%5D%20%3D%20renderer.getNativeSize()%3B%0A%20%20%20%20_drawThese.call(this%2C%20drawables%2C%20drawMode%2C%20projection%2C%20opts)%3B%0A%20%20%20%20gl.disable(gl.SCISSOR_TEST)%3B%0A%20%20%20%20gl.blendFunc(gl.ONE%2C%20gl.ONE_MINUS_SRC_ALPHA)%3B%0A%20%20%20%20active%20%3D%20false%3B%0A%20%20%7D%3B%0A%0A%20%20const%20bfb%20%3D%20gl.bindFramebuffer%3B%0A%20%20gl.bindFramebuffer%20%3D%20function%20(target%2C%20framebuffer)%20%7B%0A%20%20%20%20let%20toCanvas%20%3D%20false%3B%0A%20%20%20%20if%20(target%20%3D%3D%20gl.FRAMEBUFFER)%20%7B%0A%20%20%20%20%20%20if%20(framebuffer%20%3D%3D%20publicApi.mainFramebuffer)%20%7B%0A%20%20%20%20%20%20%20%20toCanvas%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20toCorrectThing%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20flipY%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20width%20%3D%20canvas.width%3B%0A%20%20%20%20%20%20%20%20height%20%3D%20canvas.height%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(renderer._penSkinId%20!%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20const%20fbInfo%20%3D%20renderer._allSkins%5Brenderer._penSkinId%5D._framebuffer%3B%0A%20%20%20%20%20%20%20%20if%20(framebuffer%20%3D%3D%20fbInfo.framebuffer)%20%7B%0A%20%20%20%20%20%20%20%20%20%20toCorrectThing%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20flipY%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20width%20%3D%20fbInfo.width%3B%0A%20%20%20%20%20%20%20%20%20%20height%20%3D%20fbInfo.height%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20toCorrectThing%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20toCorrectThing%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20if%20(toCanvas%20%3D%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20Blendings%5B%22subtract%20legacy%22%5D%5B2%5D%20%3D%20gl.ZERO%3B%0A%20%20%20%20%20%20Blendings%5B%22invert%20legacy%22%5D%5B2%5D%20%3D%20gl.ZERO%3B%0A%20%20%20%20%20%20Blendings%5B%22invert%20legacy%22%5D%5B3%5D%20%3D%20gl.ONE%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20Blendings%5B%22subtract%20legacy%22%5D%5B2%5D%20%3D%20gl.ONE%3B%0A%20%20%20%20%20%20Blendings%5B%22invert%20legacy%22%5D%5B2%5D%20%3D%20gl.ONE_MINUS_DST_COLOR%3B%0A%20%20%20%20%20%20Blendings%5B%22invert%20legacy%22%5D%5B3%5D%20%3D%20gl.ONE_MINUS_SRC_COLOR%3B%0A%20%20%20%20%7D%0A%20%20%20%20bfb.call(this%2C%20target%2C%20framebuffer)%3B%0A%20%20%7D%3B%0A%0A%20%20function%20setupModes(clipbox%2C%20blendMode%2C%20flipY)%20%7B%0A%20%20%20%20if%20(clipbox)%20%7B%0A%20%20%20%20%20%20gl.enable(gl.SCISSOR_TEST)%3B%0A%20%20%20%20%20%20let%20x%20%3D%20((clipbox.x_min%20%2F%20scratchUnitWidth%20%2B%200.5)%20*%20width)%20%7C%200%3B%0A%20%20%20%20%20%20let%20y%20%3D%20((clipbox.y_min%20%2F%20scratchUnitHeight%20%2B%200.5)%20*%20height)%20%7C%200%3B%0A%20%20%20%20%20%20let%20x2%20%3D%20((clipbox.x_max%20%2F%20scratchUnitWidth%20%2B%200.5)%20*%20width)%20%7C%200%3B%0A%20%20%20%20%20%20let%20y2%20%3D%20((clipbox.y_max%20%2F%20scratchUnitHeight%20%2B%200.5)%20*%20height)%20%7C%200%3B%0A%20%20%20%20%20%20let%20w%20%3D%20x2%20-%20x%3B%0A%20%20%20%20%20%20let%20h%20%3D%20y2%20-%20y%3B%0A%20%20%20%20%20%20if%20(flipY)%20%7B%0A%20%20%20%20%20%20%20%20y%20%3D%20((-clipbox.y_max%20%2F%20scratchUnitHeight%20%2B%200.5)%20*%20height)%20%7C%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20gl.scissor(x%2C%20y%2C%20w%2C%20h)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20gl.disable(gl.SCISSOR_TEST)%3B%0A%20%20%20%20%7D%0A%20%20%20%20const%20blend%20%3D%20Blendings%5BblendMode%5D%20%3F%3F%20Blendings.default%3B%0A%20%20%20%20gl.blendEquation(blend%5B4%5D)%3B%0A%20%20%20%20gl.blendFuncSeparate(blend%5B0%5D%2C%20blend%5B1%5D%2C%20blend%5B2%5D%2C%20blend%5B3%5D)%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Modifying%20and%20expanding%20Drawable%0A%20%20const%20gu%20%3D%20Drawable.prototype.getUniforms%3B%0A%20%20Drawable.prototype.getUniforms%20%3D%20function%20()%20%7B%0A%20%20%20%20if%20(active%20%26%26%20toCorrectThing)%20%7B%0A%20%20%20%20%20%20setupModes(this.clipbox%2C%20this.blendMode%2C%20flipY)%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20gu.call(this)%3B%0A%20%20%7D%3B%0A%20%20Drawable.prototype.updateClipBox%20%3D%20function%20(clipbox)%20%7B%0A%20%20%20%20this.clipbox%20%3D%20clipbox%3B%0A%20%20%7D%3B%0A%20%20Drawable.prototype.updateBlendMode%20%3D%20function%20(blendMode)%20%7B%0A%20%20%20%20this.blendMode%20%3D%20blendMode%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20Expanding%20renderer%0A%20%20renderer.updateDrawableClipBox%20%3D%20function%20(drawableID%2C%20clipbox)%20%7B%0A%20%20%20%20const%20drawable%20%3D%20this._allDrawables%5BdrawableID%5D%3B%0A%20%20%20%20if%20(!drawable)%20return%3B%0A%20%20%20%20drawable.updateClipBox(clipbox)%3B%0A%20%20%7D%3B%0A%20%20renderer.updateDrawableBlendMode%20%3D%20function%20(drawableID%2C%20blendMode)%20%7B%0A%20%20%20%20const%20drawable%20%3D%20this._allDrawables%5BdrawableID%5D%3B%0A%20%20%20%20if%20(!drawable)%20return%3B%0A%20%20%20%20drawable.updateBlendMode(blendMode)%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20Reset%20on%20stop%20%26%20clones%20inherit%20effects%0A%20%20const%20regTargetStuff%20%3D%20function%20(args)%20%7B%0A%20%20%20%20if%20(args.editingTarget)%20%7B%0A%20%20%20%20%20%20vm.removeListener(%22targetsUpdate%22%2C%20regTargetStuff)%3B%0A%20%20%20%20%20%20const%20proto%20%3D%20vm.runtime.targets%5B0%5D.__proto__%3B%0A%20%20%20%20%20%20const%20osa%20%3D%20proto.onStopAll%3B%0A%20%20%20%20%20%20proto.onStopAll%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20this.clipbox%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.blendMode%20%3D%20%22default%22%3B%0A%20%20%20%20%20%20%20%20this.renderer.updateDrawableClipBox.call(%0A%20%20%20%20%20%20%20%20%20%20renderer%2C%0A%20%20%20%20%20%20%20%20%20%20this.drawableID%2C%0A%20%20%20%20%20%20%20%20%20%20null%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20this.renderer.updateDrawableBlendMode.call(%0A%20%20%20%20%20%20%20%20%20%20renderer%2C%0A%20%20%20%20%20%20%20%20%20%20this.drawableID%2C%0A%20%20%20%20%20%20%20%20%20%20null%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20osa.call(this)%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20const%20mc%20%3D%20proto.makeClone%3B%0A%20%20%20%20%20%20proto.makeClone%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20const%20newTarget%20%3D%20mc.call(this)%3B%0A%20%20%20%20%20%20%20%20if%20(this.clipbox%20%7C%7C%20this.blendMode)%20%7B%0A%20%20%20%20%20%20%20%20%20%20newTarget.clipbox%20%3D%20this.clipbox%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%20Object.assign(%7B%7D%2C%20this.clipbox)%0A%20%20%20%20%20%20%20%20%20%20%20%20%3A%20null%3B%0A%20%20%20%20%20%20%20%20%20%20newTarget.blendMode%20%3D%20this.blendMode%3B%0A%20%20%20%20%20%20%20%20%20%20renderer.updateDrawableClipBox.call(%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20newTarget.drawableID%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20this.clipbox%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20renderer.updateDrawableBlendMode.call(%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20newTarget.drawableID%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20this.blendMode%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20newTarget%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%20%20vm.on(%22targetsUpdate%22%2C%20regTargetStuff)%3B%0A%0A%20%20%2F%2F%20Pen%20lines%20support%0A%20%20let%20emptyObject%20%3D%20%7B%7D%3B%0A%20%20let%20lastTarget%20%3D%20emptyObject%3B%0A%20%20let%20lastClipbox%20%3D%20%7B%7D%3B%0A%20%20let%20lastBlendMode%20%3D%20%22default%22%3B%0A%20%20function%20patchPen(skin)%20%7B%0A%20%20%20%20const%20ext_pen%20%3D%20runtime.ext_pen%3B%0A%20%20%20%20skin._lineOnBufferDrawRegionId.exit%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20skin._exitDrawLineOnBuffer()%3B%0A%20%20%20%20%20%20gl.blendFunc(gl.ONE%2C%20gl.ONE_MINUS_SRC_ALPHA)%3B%0A%20%20%20%20%20%20gl.disable(gl.SCISSOR_TEST)%3B%0A%20%20%20%20%20%20lastTarget%20%3D%20emptyObject%3B%0A%20%20%20%20%20%20lastClipbox%20%3D%20null%3B%0A%20%20%20%20%20%20lastBlendMode%20%3D%20%22default%22%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20const%20willDrawPenWithTarget%20%3D%20function%20(target)%20%7B%0A%20%20%20%20%20%20if%20(!penDirty%20%26%26%20target%20%3D%3D%20lastTarget)%20return%3B%0A%20%20%20%20%20%20penDirty%20%3D%20false%3B%0A%0A%20%20%20%20%20%20const%20clipbox%20%3D%20target.clipbox%3B%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20!lastClipbox%20%5E%20!clipbox%20%7C%7C%0A%20%20%20%20%20%20%20%20lastBlendMode%20!%3D%20target.blendMode%20%7C%7C%0A%20%20%20%20%20%20%20%20(clipbox%20%26%26%0A%20%20%20%20%20%20%20%20%20%20(clipbox.x_min%20!%3D%20lastClipbox.x_min%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20clipbox.y_min%20!%3D%20lastClipbox.y_min%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20clipbox.x_max%20!%3D%20lastClipbox.x_max%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20clipbox.y_max%20!%3D%20lastClipbox.y_max))%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20if%20(skin.attribute_index%20%7C%7C%20skin.a_lineColorIndex)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Supporting%20both%20before%20and%20after%20https%3A%2F%2Fgithub.com%2FTurboWarp%2Fscratch-render%2Fpull%2F11%0A%20%20%20%20%20%20%20%20%20%20skin._flushLines()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20lastTarget%20%3D%20target%3B%0A%20%20%20%20%20%20%20%20if%20(clipbox)%20%7B%0A%20%20%20%20%20%20%20%20%20%20lastClipbox%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20x_min%3A%20clipbox.x_min%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y_min%3A%20clipbox.y_min%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20x_max%3A%20clipbox.x_max%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20y_max%3A%20clipbox.y_max%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20lastClipbox%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20lastBlendMode%20%3D%20target.blendMode%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20onTargetMoved%20function%20of%20pen%20draws%20a%20line.%0A%20%20%20%20%2F%2F%20When%20drawing%20a%20line%20it%20is%20important%20to%20know%20the%20target.%0A%20%20%20%20%2F%2F%20This%20saves%20target.%0A%20%20%20%20const%20onTargetMoved%20%3D%20ext_pen._onTargetMoved%3B%0A%20%20%20%20ext_pen._onTargetMoved%20%3D%20function%20(target%2C%20oldX%2C%20oldY%2C%20isForce)%20%7B%0A%20%20%20%20%20%20willDrawPenWithTarget(target)%3B%0A%20%20%20%20%20%20onTargetMoved.call(this%2C%20target%2C%20oldX%2C%20oldY%2C%20isForce)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20Existing%20tragets%20may%20still%20have%20old%20onTargetMoved%0A%20%20%20%20for%20(let%20target%20in%20runtime.tragets)%20%7B%0A%20%20%20%20%20%20if%20(target.onTargetMoved%20%3D%3D%20onTargetMoved)%20%7B%0A%20%20%20%20%20%20%20%20target.onTargetMoved%20%3D%20ext_pen._onTargetMoved%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20When%20drawing%20a%20dot%20it%20is%20important%20to%20know%20the%20target.%0A%20%20%20%20%2F%2F%20This%20saves%20target.%0A%20%20%20%20const%20penDown%20%3D%20ext_pen._penDown%3B%0A%20%20%20%20ext_pen._penDown%20%3D%20function%20(target)%20%7B%0A%20%20%20%20%20%20willDrawPenWithTarget(target)%3B%0A%20%20%20%20%20%20penDown.call(this%2C%20target)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20Set%20up%20correct%20clipping%2Fblending%20before%20drawing%0A%20%20%20%20const%20flushLines%20%3D%20skin.__proto__._flushLines%3B%0A%20%20%20%20skin.__proto__._flushLines%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20setupModes(lastClipbox%2C%20lastBlendMode%2C%20true)%3B%0A%20%20%20%20%20%20flushLines.call(this)%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20if%20(renderer._allSkins%5Brenderer._penSkinId%5D)%20%7B%0A%20%20%20%20%2F%2F%20If%20pen%20skin%20already%20exists%2C%20things%20can%20be%20patched%0A%20%20%20%20patchPen(renderer._allSkins%5Brenderer._penSkinId%5D)%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20%2F%2F%20If%20pen%20skin%20does%20not%20exist%2C%20wait%20until%20it%20will%2C%0A%20%20%20%20%2F%2F%20trigger%20code%20once%2C%20and%20return%20everything%20as%20it%20was%0A%20%20%20%20const%20createPenSkin%20%3D%20renderer.createPenSkin%3B%0A%20%20%20%20renderer.createPenSkin%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20let%20skinId%20%3D%20createPenSkin.call(this)%3B%0A%20%20%20%20%20%20patchPen(renderer._allSkins%5BskinId%5D)%3B%0A%20%20%20%20%20%20renderer.createPenSkin%20%3D%20createPenSkin%3B%0A%20%20%20%20%20%20return%20skinId%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%0A%20%20class%20Extension%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22xeltallivclipblend%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%22Clipping%20%26%20Blending%22)%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%239966FF%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%23855CD6%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%23774DCB%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%3A%20icon%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22Stage%20selected%3A%20no%20blocks%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.STAGE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setClipbox%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22set%20clipping%20box%20x1%3A%5BX1%5D%20y1%3A%5BY1%5D%20x2%3A%5BX2%5D%20y2%3A%5BY2%5D%22%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%220%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20X2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22100%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20Y2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22100%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22clearClipbox%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22clear%20clipping%20box%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getClipbox%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22clipping%20box%20%5BPROP%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PROP%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22width%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22props%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setBlend2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22use%20%5BBLENDMODE%5D%20blending%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BLENDMODE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22default%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22blends2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setBlend%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22use%20%5BBLENDMODE%5D%20blending%20(old)%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BLENDMODE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22default%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22blends%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getBlend%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22blending%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setAdditiveBlend%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22turn%20additive%20blending%20%5BSTATE%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STATE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22on%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22states%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getAdditiveBlend%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22is%20additive%20blending%20on%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20states%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22on%22)%2C%20value%3A%20%22on%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22off%22)%2C%20value%3A%20%22off%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20blends%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22default%22)%2C%20value%3A%20%22default%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22additive%22)%2C%20value%3A%20%22additive%22%20%7D%2C%20%2F%2F%20-%3E%20additive%20legacy%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22subtract%22)%2C%20value%3A%20%22subtract%22%20%7D%2C%20%2F%2F%20-%3E%20subtract%20legacy%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22multiply%22)%2C%20value%3A%20%22multiply%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22invert%22)%2C%20value%3A%20%22invert%22%20%7D%2C%20%2F%2F%20-%3E%20invert%20legacy%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20blends2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22default%22)%2C%20value%3A%20%22default%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22default%20behind%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22default%20behind%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22additive%22)%2C%20value%3A%20%22additive%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22additive%20with%20alpha%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22additive%20with%20alpha%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22subtract%22)%2C%20value%3A%20%22subtract%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22subtract%20with%20alpha%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22subtract%20with%20alpha%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22multiply%22)%2C%20value%3A%20%22multiply%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22invert%22)%2C%20value%3A%20%22invert%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22mask%22)%2C%20value%3A%20%22mask%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22erase%22)%2C%20value%3A%20%22erase%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20props%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22width%22)%2C%20value%3A%20%22width%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22height%22)%2C%20value%3A%20%22height%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22min%20x%22)%2C%20value%3A%20%22min%20x%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22min%20y%22)%2C%20value%3A%20%22min%20y%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22max%20x%22)%2C%20value%3A%20%22max%20x%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22max%20y%22)%2C%20value%3A%20%22max%20y%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setClipbox(%7B%20X1%2C%20Y1%2C%20X2%2C%20Y2%20%7D%2C%20%7B%20target%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(target.isStage)%20return%3B%0A%20%20%20%20%20%20const%20newClipbox%20%3D%20%7B%0A%20%20%20%20%20%20%20%20x_min%3A%20Math.min(X1%2C%20X2)%2C%0A%20%20%20%20%20%20%20%20y_min%3A%20Math.min(Y1%2C%20Y2)%2C%0A%20%20%20%20%20%20%20%20x_max%3A%20Math.max(X1%2C%20X2)%2C%0A%20%20%20%20%20%20%20%20y_max%3A%20Math.max(Y1%2C%20Y2)%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20penDirty%20%3D%20true%3B%0A%20%20%20%20%20%20target.clipbox%20%3D%20newClipbox%3B%0A%20%20%20%20%20%20renderer.updateDrawableClipBox.call(%0A%20%20%20%20%20%20%20%20renderer%2C%0A%20%20%20%20%20%20%20%20target.drawableID%2C%0A%20%20%20%20%20%20%20%20newClipbox%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20if%20(target.visible)%20%7B%0A%20%20%20%20%20%20%20%20renderer.dirty%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20target.emitVisualChange()%3B%0A%20%20%20%20%20%20%20%20target.runtime.requestRedraw()%3B%0A%20%20%20%20%20%20%20%20target.runtime.requestTargetsUpdate(target)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20clearClipbox(args%2C%20%7B%20target%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(target.isStage)%20return%3B%0A%20%20%20%20%20%20target.clipbox%20%3D%20null%3B%0A%20%20%20%20%20%20penDirty%20%3D%20true%3B%0A%20%20%20%20%20%20renderer.updateDrawableClipBox.call(renderer%2C%20target.drawableID%2C%20null)%3B%0A%20%20%20%20%20%20if%20(target.visible)%20%7B%0A%20%20%20%20%20%20%20%20renderer.dirty%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20target.emitVisualChange()%3B%0A%20%20%20%20%20%20%20%20target.runtime.requestRedraw()%3B%0A%20%20%20%20%20%20%20%20target.runtime.requestTargetsUpdate(target)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getClipbox(%7B%20PROP%20%7D%2C%20%7B%20target%20%7D)%20%7B%0A%20%20%20%20%20%20const%20clipbox%20%3D%20target.clipbox%3B%0A%20%20%20%20%20%20if%20(!clipbox)%20return%20%22%22%3B%0A%20%20%20%20%20%20switch%20(PROP)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22width%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20clipbox.x_max%20-%20clipbox.x_min%3B%0A%20%20%20%20%20%20%20%20case%20%22height%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20clipbox.y_max%20-%20clipbox.y_min%3B%0A%20%20%20%20%20%20%20%20case%20%22min%20x%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20clipbox.x_min%3B%0A%20%20%20%20%20%20%20%20case%20%22min%20y%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20clipbox.y_min%3B%0A%20%20%20%20%20%20%20%20case%20%22max%20x%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20clipbox.x_max%3B%0A%20%20%20%20%20%20%20%20case%20%22max%20y%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20clipbox.y_max%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setBlend(%7B%20BLENDMODE%20%7D%2C%20%7B%20target%20%7D)%20%7B%0A%20%20%20%20%20%20switch%20(BLENDMODE)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22additive%22%3A%0A%20%20%20%20%20%20%20%20%20%20this._setBlend(%22additive%20legacy%22%2C%20target)%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20case%20%22subtract%22%3A%0A%20%20%20%20%20%20%20%20%20%20this._setBlend(%22subtract%20legacy%22%2C%20target)%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20case%20%22invert%22%3A%0A%20%20%20%20%20%20%20%20%20%20this._setBlend(%22invert%20legacy%22%2C%20target)%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20case%20%22default%22%3A%0A%20%20%20%20%20%20%20%20case%20%22multiply%22%3A%0A%20%20%20%20%20%20%20%20%20%20this._setBlend(BLENDMODE%2C%20target)%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setBlend2(%7B%20BLENDMODE%20%7D%2C%20%7B%20target%20%7D)%20%7B%0A%20%20%20%20%20%20switch%20(BLENDMODE)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22default%22%3A%0A%20%20%20%20%20%20%20%20case%20%22default%20behind%22%3A%0A%20%20%20%20%20%20%20%20case%20%22additive%22%3A%0A%20%20%20%20%20%20%20%20case%20%22additive%20with%20alpha%22%3A%0A%20%20%20%20%20%20%20%20case%20%22subtract%22%3A%0A%20%20%20%20%20%20%20%20case%20%22subtract%20with%20alpha%22%3A%0A%20%20%20%20%20%20%20%20case%20%22multiply%22%3A%0A%20%20%20%20%20%20%20%20case%20%22invert%22%3A%0A%20%20%20%20%20%20%20%20case%20%22mask%22%3A%0A%20%20%20%20%20%20%20%20case%20%22erase%22%3A%0A%20%20%20%20%20%20%20%20%20%20this._setBlend(BLENDMODE%2C%20target)%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20_setBlend(newValue%2C%20target)%20%7B%0A%20%20%20%20%20%20if%20(target.isStage)%20return%3B%0A%20%20%20%20%20%20penDirty%20%3D%20true%3B%0A%20%20%20%20%20%20target.blendMode%20%3D%20newValue%3B%0A%20%20%20%20%20%20renderer.updateDrawableBlendMode.call(%0A%20%20%20%20%20%20%20%20renderer%2C%0A%20%20%20%20%20%20%20%20target.drawableID%2C%0A%20%20%20%20%20%20%20%20newValue%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20if%20(target.visible)%20%7B%0A%20%20%20%20%20%20%20%20renderer.dirty%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20target.emitVisualChange()%3B%0A%20%20%20%20%20%20%20%20target.runtime.requestRedraw()%3B%0A%20%20%20%20%20%20%20%20target.runtime.requestTargetsUpdate(target)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getBlend(args%2C%20%7B%20target%20%7D)%20%7B%0A%20%20%20%20%20%20switch%20(target.blendMode)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22additive%20legacy%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20%22additive%22%3B%0A%20%20%20%20%20%20%20%20case%20%22subtract%20legacy%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20%22subtract%22%3B%0A%20%20%20%20%20%20%20%20case%20%22invert%20legacy%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20%22invert%22%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20return%20target.blendMode%20%3F%3F%20%22default%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setAdditiveBlend(%7B%20STATE%20%7D%2C%20%7B%20target%20%7D)%20%7B%0A%20%20%20%20%20%20if%20(STATE%20%3D%3D%3D%20%22on%22)%20this._setBlend(%22additive%20legacy%22%2C%20target)%3B%0A%20%20%20%20%20%20if%20(STATE%20%3D%3D%3D%20%22off%22)%20this._setBlend(%22default%22%2C%20target)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getAdditiveBlend(args%2C%20%7B%20target%20%7D)%20%7B%0A%20%20%20%20%20%20switch%20(target.blendMode)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22additive%22%3A%0A%20%20%20%20%20%20%20%20case%20%22additive%20legacy%22%3A%0A%20%20%20%20%20%20%20%20case%20%22additive%20with%20alpha%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20Extension())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20class%20GoogleAuthExtension%20%7B%0A%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%20%20this.accountName%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.fullName%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.profilePicture%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.userId%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.locale%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.emailVerified%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.authWindow%20%3D%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20'googleAuth'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20name%3A%20'Google%20Auth'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20color1%3A%20'%234285F4'%2C%20%2F%2F%20main%20color%20(google%20blue)%0A%20%20%20%20%20%20%20%20%20%20%20%20color2%3A%20'%23357AE8'%2C%20%2F%2F%20darker%20shade%20of%20first%20color%0A%20%20%20%20%20%20%20%20%20%20%20%20color3%3A%20'%232A56C6'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'login'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Open%20Google%20Login%20Page'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'clearData'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Clear%20data'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'isLoginWindowOpen'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Is%20login%20window%20open%3F'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getAccountName'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Account%20Email'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getFullName'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Full%20Name'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getProfilePicture'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Profile%20Picture%20URL'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getUserId'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'User%20ID'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getLocale'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22User's%20preferred%20language%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'isEmailVerified'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'Email%20verified%3F'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20menus%3A%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20login()%20%7B%0A%20%20%20%20%20%20%20%20const%20clientId%20%3D%20'382430967410-3svk456rj8ntlu3d3gd9oma09i96cpr9.apps.googleusercontent.com'%3B%0A%20%20%20%20%20%20%20%20const%20redirectUri%20%3D%20'https%3A%2F%2Fikelene.dev%2Fgoogle%2FgoogleLogin.php'%3B%0A%20%20%20%20%20%20%20%20const%20scope%20%3D%20'profile%20email'%3B%0A%0A%20%20%20%20%20%20%20%20const%20sourceDomain%20%3D%20window.location.hostname%3B%0A%0A%20%20%20%20%20%20%20%20const%20state%20%3D%20encodeURIComponent(JSON.stringify(%7B%20source%3A%20sourceDomain%20%7D))%3B%0A%0A%20%20%20%20%20%20%20%20const%20authUrl%20%3D%20%60https%3A%2F%2Faccounts.google.com%2Fo%2Foauth2%2Fv2%2Fauth%3Fresponse_type%3Dcode%26client_id%3D%24%7BclientId%7D%26redirect_uri%3D%24%7BencodeURIComponent(redirectUri)%7D%26scope%3D%24%7BencodeURIComponent(scope)%7D%26prompt%3Dselect_account%26state%3D%24%7Bstate%7D%60%3B%0A%0A%20%20%20%20%20%20%20%20this.authWindow%20%3D%20window.open(authUrl%2C%20'Google%20Login'%2C%20'width%3D500%2Cheight%3D600')%3B%0A%0A%20%20%20%20%20%20%20%20window.addEventListener('message'%2C%20(event)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(event.origin%20%3D%3D%3D%20'https%3A%2F%2Fikelene.dev')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20%7B%20accountName%2C%20fullName%2C%20profilePicture%2C%20userId%2C%20locale%2C%20emailVerified%20%7D%20%3D%20event.data%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.accountName%20%3D%20accountName%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.fullName%20%3D%20fullName%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.profilePicture%20%3D%20profilePicture%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.userId%20%3D%20userId%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.locale%20%3D%20locale%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.emailVerified%20%3D%20emailVerified%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.authWindow)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.authWindow.close()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.authWindow%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20clearData()%20%7B%0A%20%20%20%20%20%20%20%20this.accountName%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.fullName%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.profilePicture%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.userId%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.locale%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20this.emailVerified%20%3D%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20isLoginWindowOpen()%20%7B%0A%20%20%20%20%20%20%20%20return%20!!(this.authWindow%20%26%26%20!this.authWindow.closed)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getAccountName()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.accountName%20%7C%7C%20''%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getFullName()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.fullName%20%7C%7C%20''%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getProfilePicture()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.profilePicture%20%7C%7C%20''%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getUserId()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.userId%20%7C%7C%20''%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getLocale()%20%7B%0A%20%20%20%20%20%20%20%20return%20this.locale%20%7C%7C%20''%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20isEmailVerified()%20%7B%0A%20%20%20%20%20%20%20%20return%20!!this.emailVerified%3B%0A%20%20%20%20%7D%0A%7D%0A%0AScratch.extensions.register(new%20GoogleAuthExtension())%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Animated%20Text%0A%2F%2F%20ID%3A%20text%0A%2F%2F%20Description%3A%20An%20easy%20way%20to%20display%20and%20animate%20text.%20Compatible%20with%20Scratch%20Lab's%20Animated%20Text%20experiment.%0A%2F%2F%20By%3A%20LilyMakesThings%0A%2F%2F%20License%3A%20MIT%20AND%20LGPL-3.0%0A%0A%2F*%20generated%20l10n%20code%20*%2FScratch.translate.setup(%7B%22de%22%3A%7B%22_Animated%20Text%22%3A%22Animierter%20Text%22%2C%22_Hello!%22%3A%22Hallo!%22%2C%22_left%22%3A%22Links%22%2C%22_right%22%3A%22Rechts%22%7D%2C%22es%22%3A%7B%22_%23%20of%20lines%22%3A%22%23%20de%20l%C3%ADneas%22%2C%22_%23%20of%20lines%20%5BWITH_WORD_WRAP%5D%22%3A%22%23%20de%20l%C3%ADneas%20%5BWITH_WORD_WRAP%5D%22%2C%22_Animated%20Text%22%3A%22Texto%20Animado%22%2C%22_Enable%20Non-Scratch%20Lab%20Features%22%3A%22Habilitar%20bloques%20no%20de%20Scratch%20Lab%22%2C%22_Hello!%22%3A%22%C2%A1Hola!%22%2C%22_Here%20we%20go!%22%3A%22%C2%A1Aqu%C3%AD%20vamos!%22%2C%22_Incompatible%20with%20Scratch%20Lab%3A%22%3A%22No%20es%20compatible%20con%20Scratch%20Lab%3A%22%2C%22_Welcome%20to%20my%20project!%22%3A%22%C2%A1Bienvenidos%20a%20mi%20proyecto!%22%2C%22_%5BANIMATE%5D%20duration%22%3A%22duraci%C3%B3n%20de%20%5BANIMATE%5D%22%2C%22_%5BANIMATE%5D%20text%20%5BTEXT%5D%22%3A%22%5BANIMATE%5D%20texto%20%5BTEXT%5D%22%2C%22_add%20line%20%5BTEXT%5D%22%3A%22agregar%20l%C3%ADnea%20%5BTEXT%5D%22%2C%22_align%20text%20to%20%5BALIGN%5D%22%3A%22alinear%20texto%20a%20%5BALIGN%5D%22%2C%22_animate%20%5BANIMATE%5D%20until%20done%22%3A%22animar%20%5BANIMATE%5D%20hasta%20que%20termine%22%2C%22_center%22%3A%22centro%22%2C%22_displayed%20text%22%3A%22texto%20mostrado%22%2C%22_is%20animating%3F%22%3A%22%C2%BFanimando%3F%22%2C%22_is%20showing%20text%3F%22%3A%22%C2%BFmostrando%20texto%3F%22%2C%22_left%22%3A%22izquierda%22%2C%22_rainbow%22%3A%22arco%C3%ADris%22%2C%22_random%20font%22%3A%22fuente%20aleatoria%22%2C%22_reset%20%5BANIMATE%5D%20duration%22%3A%22restablecer%20duraci%C3%B3n%20de%20%5BANIMATE%5D%22%2C%22_reset%20text%20width%22%3A%22restablecer%20ancho%20del%20texto%22%2C%22_reset%20typing%20delay%22%3A%22restablecer%20retraso%20de%20escritura%22%2C%22_right%22%3A%22derecha%22%2C%22_set%20%5BANIMATE%5D%20duration%20to%20%5BNUM%5D%20seconds%22%3A%22fijar%20duraci%C3%B3n%20de%20%5BANIMATE%5D%20a%20%5BNUM%5D%20segundos%22%2C%22_set%20font%20to%20%5BFONT%5D%22%3A%22fijar%20fuente%20a%20%5BFONT%5D%22%2C%22_set%20outline%20color%20to%20%5BCOLOR%5D%22%3A%22fijar%20color%20del%20contorno%20a%20%5BCOLOR%5D%22%2C%22_set%20outline%20width%20to%20%5BWIDTH%5D%22%3A%22fijar%20tama%C3%B1o%20del%20contorno%20a%20%5BWIDTH%5D%22%2C%22_set%20shake%20intensity%20to%20%5BNUM%5D%25%22%3A%22fijar%20intensidad%20de%20temblor%20a%20%5BNUM%5D%25%22%2C%22_set%20text%20color%20to%20%5BCOLOR%5D%22%3A%22fijar%20color%20del%20texto%20a%20%5BCOLOR%5D%22%2C%22_set%20typing%20delay%20to%20%5BNUM%5D%20seconds%22%3A%22fijar%20retraso%20de%20escritura%20a%20%5BNUM%5D%20segundos%22%2C%22_set%20width%20to%20%5BWIDTH%5D%22%3A%22fijar%20ancho%20a%20%5BWIDTH%5D%22%2C%22_set%20width%20to%20%5BWIDTH%5D%20aligned%20%5BALIGN%5D%22%3A%22fijar%20ancho%20a%20%5BWIDTH%5D%20alineado%20%5BALIGN%5D%22%2C%22_show%20sprite%22%3A%22mostrar%20objeto%22%2C%22_show%20text%20%5BTEXT%5D%22%3A%22mostrar%20texto%20%5BTEXT%5D%22%2C%22_start%20%5BANIMATE%5D%20animation%22%3A%22empezar%20animaci%C3%B3n%20de%20%5BANIMATE%5D%22%2C%22_text%20%5BATTRIBUTE%5D%22%3A%22%5BATTRIBUTE%5D%20del%20texto%22%2C%22_type%22%3A%22escritura%22%2C%22_typing%20delay%22%3A%22retraso%20de%20escritura%22%2C%22_with%20word%20wrap%22%3A%22con%20ajuste%20de%20texto%22%2C%22_without%20word%20wrap%22%3A%22sin%20ajuste%20de%20texto%22%2C%22disableCompatibilityMode%22%3A%22Esto%20habilitar%C3%A1%20nuevos%20bloques%20y%20funciones%20que%20NO%20FUNCIONAR%C3%81N%20en%20el%20Scratch%20Lab%20oficial.%5Cn%5Cn%C2%BFA%C3%BAn%20desea%20continuar%3F%22%7D%2C%22fi%22%3A%7B%22_%23%20of%20lines%22%3A%22rivien%20m%C3%A4%C3%A4r%C3%A4%22%2C%22_%23%20of%20lines%20%5BWITH_WORD_WRAP%5D%22%3A%22rivien%20m%C3%A4%C3%A4r%C3%A4%20%5BWITH_WORD_WRAP%5D%22%2C%22_Animated%20Text%22%3A%22Animoitu%20teksti%22%2C%22_Enable%20Non-Scratch%20Lab%20Features%22%3A%22Ota%20Scratch%20Labin%20ulkopuoliset%20ominaisuudet%20k%C3%A4ytt%C3%B6%C3%B6n%22%2C%22_Hello!%22%3A%22Hei!%22%2C%22_Here%20we%20go!%22%3A%22Aloitetaan!%22%2C%22_Incompatible%20with%20Scratch%20Lab%3A%22%3A%22Ei-yhteensopivia%20Scratch%20Labin%20kanssa%3A%22%2C%22_Welcome%20to%20my%20project!%22%3A%22Tervetuloa%20projektiini!%22%2C%22_%5BANIMATE%5D%20duration%22%3A%22animaation%20%5BANIMATE%5D%20kesto%22%2C%22_%5BANIMATE%5D%20text%20%5BTEXT%5D%22%3A%22%5BANIMATE%5D%20teksti%20%5BTEXT%5D%22%2C%22_add%20line%20%5BTEXT%5D%22%3A%22lis%C3%A4%C3%A4%20rivi%20%5BTEXT%5D%22%2C%22_align%20text%20to%20%5BALIGN%5D%22%3A%22tasaa%20teksti%20%5BALIGN%5D%22%2C%22_animate%20%5BANIMATE%5D%20until%20done%22%3A%22suorita%20%5BANIMATE%5D%20animaatio%20loppuun%22%2C%22_center%22%3A%22keskelle%22%2C%22_displayed%20text%22%3A%22n%C3%A4ytetty%20teksti%22%2C%22_is%20animating%3F%22%3A%22onko%20animaatio%20k%C3%A4ynniss%C3%A4%3F%22%2C%22_is%20showing%20text%3F%22%3A%22n%C3%A4ytet%C3%A4%C3%A4nk%C3%B6%20teksti%C3%A4%3F%22%2C%22_left%22%3A%22vasemmalle%22%2C%22_rainbow%22%3A%22sateenkaari%22%2C%22_random%20font%22%3A%22satunnainen%20fontti%22%2C%22_reset%20%5BANIMATE%5D%20duration%22%3A%22palauta%20%5BANIMATE%5D%20animaatio%20normaalikestoiseksi%22%2C%22_reset%20text%20width%22%3A%22nollaa%20tekstin%20leveys%22%2C%22_reset%20typing%20delay%22%3A%22nollaa%20kirjoitusv%C3%A4li%22%2C%22_right%22%3A%22oikealle%22%2C%22_set%20%5BANIMATE%5D%20duration%20to%20%5BNUM%5D%20seconds%22%3A%22aseta%20%5BANIMATE%5D%20animaatio%20%5BNUM%5D%20sekunnin%20pituiseksi%22%2C%22_set%20font%20to%20%5BFONT%5D%22%3A%22aseta%20fontiksi%20%5BFONT%5D%22%2C%22_set%20outline%20color%20to%20%5BCOLOR%5D%22%3A%22aseta%20reunuksen%20v%C3%A4riksi%20%5BCOLOR%5D%22%2C%22_set%20outline%20width%20to%20%5BWIDTH%5D%22%3A%22aseta%20reunuksen%20paksuudeksi%20%5BWIDTH%5D%22%2C%22_set%20shake%20intensity%20to%20%5BNUM%5D%25%22%3A%22aseta%20heilumisen%20voimakkuudeksi%20%5BNUM%5D%20%25%22%2C%22_set%20text%20color%20to%20%5BCOLOR%5D%22%3A%22aseta%20tekstin%20v%C3%A4riksi%20%5BCOLOR%5D%22%2C%22_set%20typing%20delay%20to%20%5BNUM%5D%20seconds%22%3A%22aseta%20kirjoitusv%C3%A4liksi%20%5BNUM%5D%20sekuntia%22%2C%22_set%20width%20to%20%5BWIDTH%5D%22%3A%22aseta%20leveydeksi%20%5BWIDTH%5D%22%2C%22_set%20width%20to%20%5BWIDTH%5D%20aligned%20%5BALIGN%5D%22%3A%22aseta%20leveydeksi%20%5BWIDTH%5D%20ja%20tasaa%20%5BALIGN%5D%22%2C%22_show%20sprite%22%3A%22n%C3%A4yt%C3%A4%20hahmo%22%2C%22_show%20text%20%5BTEXT%5D%22%3A%22n%C3%A4yt%C3%A4%20teksti%20%5BTEXT%5D%22%2C%22_start%20%5BANIMATE%5D%20animation%22%3A%22aloita%20%5BANIMATE%5D%20animaatio%22%2C%22_text%20%5BATTRIBUTE%5D%22%3A%22tekstin%20%5BATTRIBUTE%5D%22%2C%22_type%22%3A%22kirjoittuva%22%2C%22_typing%20delay%22%3A%22kirjoitusv%C3%A4li%22%2C%22_with%20word%20wrap%22%3A%22tekstin%20rivitys%20mukaan%20lukien%22%2C%22_without%20word%20wrap%22%3A%22ilman%20tekstin%20rivityst%C3%A4%22%2C%22_zoom%22%3A%22l%C3%A4henev%C3%A4%22%2C%22disableCompatibilityMode%22%3A%22T%C3%A4m%C3%A4%20ottaa%20k%C3%A4ytt%C3%B6%C3%B6n%20uusia%20lohkoja%20ja%20ominaisuuksia%2C%20jotka%20EIV%C3%84T%20TOIMI%20virallisessa%20Scratch%20Labissa.%5Cn%5CnHaluatko%20jatkaa%3F%22%7D%2C%22fr%22%3A%7B%22_left%22%3A%22gauche%22%2C%22_right%22%3A%22droite%22%7D%2C%22it%22%3A%7B%22_%23%20of%20lines%22%3A%22numero%20di%20righe%22%2C%22_%23%20of%20lines%20%5BWITH_WORD_WRAP%5D%22%3A%22numero%20linee%20%5BWITH_WORD_WRAP%5D%22%2C%22_Animated%20Text%22%3A%22Testo%20Animato%22%2C%22_Enable%20Non-Scratch%20Lab%20Features%22%3A%22Abilita%20blocchi%20non%20presenti%20in%20Scratch%20Lab%22%2C%22_Hello!%22%3A%22Ciao!%22%2C%22_Here%20we%20go!%22%3A%22Ecco%20fatto!%22%2C%22_Incompatible%20with%20Scratch%20Lab%3A%22%3A%22Non%20compatibili%20con%20Scratch%20Lab%3A%22%2C%22_Welcome%20to%20my%20project!%22%3A%22Bevenuti%20nel%20mio%20progetto!%22%2C%22_%5BANIMATE%5D%20duration%22%3A%22durata%20%5BANIMATE%5D%22%2C%22_%5BANIMATE%5D%20text%20%5BTEXT%5D%22%3A%22testo%20%5BTEXT%5D%20con%20effetto%20%5BANIMATE%5D%22%2C%22_add%20line%20%5BTEXT%5D%22%3A%22aggiugi%20riga%20%5BTEXT%5D%22%2C%22_align%20text%20to%20%5BALIGN%5D%22%3A%22allinea%20il%20testo%20%5BALIGN%5D%22%2C%22_animate%20%5BANIMATE%5D%20until%20done%22%3A%22inizia%20animazione%20%5BANIMATE%5D%20e%20attendi%20la%20fine%22%2C%22_center%22%3A%22centro%22%2C%22_displayed%20text%22%3A%22testo%20animato%22%2C%22_is%20animating%3F%22%3A%22animato%22%2C%22_is%20showing%20text%3F%22%3A%22testo%20visibile%22%2C%22_left%22%3A%22a%20sinistra%22%2C%22_rainbow%22%3A%22effetto%20arcobaleno%22%2C%22_random%20font%22%3A%22scelto%20a%20caso%22%2C%22_reset%20%5BANIMATE%5D%20duration%22%3A%22resetta%20durata%20animazione%20%5BANIMATE%5D%22%2C%22_reset%20text%20width%22%3A%22resetta%20larghezza%20testo%22%2C%22_reset%20typing%20delay%22%3A%22resetta%20intervallo%20effetto%20digitazione%22%2C%22_right%22%3A%22a%20destra%22%2C%22_set%20%5BANIMATE%5D%20duration%20to%20%5BNUM%5D%20seconds%22%3A%22imposta%20durata%20%5BANIMATE%5D%20a%20%5BNUM%5D%20secondi%22%2C%22_set%20font%20to%20%5BFONT%5D%22%3A%22usa%20carattere%20%5BFONT%5D%22%2C%22_set%20outline%20color%20to%20%5BCOLOR%5D%22%3A%22usa%20%5BCOLOR%5D%20come%20colore%20del%20bordo%22%2C%22_set%20outline%20width%20to%20%5BWIDTH%5D%22%3A%22usa%20uno%20spessore%20del%20bordo%20pari%20a%20%5BWIDTH%5D%22%2C%22_set%20shake%20intensity%20to%20%5BNUM%5D%25%22%3A%22porta%20l'intensit%C3%A0%20di%20vibrazione%20al%20%5BNUM%5D%25%22%2C%22_set%20text%20color%20to%20%5BCOLOR%5D%22%3A%22imposta%20colore%20del%20testo%20a%20%5BCOLOR%5D%22%2C%22_set%20typing%20delay%20to%20%5BNUM%5D%20seconds%22%3A%22imposta%20intervallo%20effetto%20digitazione%20a%20%5BNUM%5D%20secondi%22%2C%22_set%20width%20to%20%5BWIDTH%5D%22%3A%22imposta%20larghezza%20a%20%5BWIDTH%5D%22%2C%22_set%20width%20to%20%5BWIDTH%5D%20aligned%20%5BALIGN%5D%22%3A%22imposta%20larghezza%20a%20%5BWIDTH%5D%20con%20allineamento%20%5BALIGN%5D%22%2C%22_show%20sprite%22%3A%22mostra%20sprite%22%2C%22_show%20text%20%5BTEXT%5D%22%3A%22mostra%20testo%20%5BTEXT%5D%22%2C%22_start%20%5BANIMATE%5D%20animation%22%3A%22inizia%20animazione%20%5BANIMATE%5D%22%2C%22_text%20%5BATTRIBUTE%5D%22%3A%22%5BATTRIBUTE%5D%20del%20testo%22%2C%22_type%22%3A%22effetto%20digitazione%22%2C%22_typing%20delay%22%3A%22intervallo%20effetto%20digitazione%22%2C%22_with%20word%20wrap%22%3A%22con%20accapo%22%2C%22_without%20word%20wrap%22%3A%22senza%20accapo%22%2C%22_zoom%22%3A%22effetto%20zoom%22%2C%22disableCompatibilityMode%22%3A%22Verranno%20abilitati%20blocchi%20e%20funzioni%20che%20NON%20FUNZIONERANNO%20in%20Scratch%20Lab%20ufficiale..%5Cn%5CnVuoi%20continuare%3F%22%7D%2C%22ja%22%3A%7B%22_%23%20of%20lines%22%3A%22%E8%A1%8C%E6%95%B0%22%2C%22_%23%20of%20lines%20%5BWITH_WORD_WRAP%5D%22%3A%22%5BWITH_WORD_WRAP%5D%E3%81%AE%E8%A1%8C%E6%95%B0%22%2C%22_Animated%20Text%22%3A%22%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%22%2C%22_Enable%20Non-Scratch%20Lab%20Features%22%3A%22Scratch%20Lab%E4%BB%A5%E5%A4%96%E3%81%AE%E6%A9%9F%E8%83%BD%E3%82%92%E6%9C%89%E5%8A%B9%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_Hello!%22%3A%22%E3%81%93%E3%82%93%E3%81%AB%E3%81%A1%E3%81%AF!%22%2C%22_Here%20we%20go!%22%3A%22%E3%81%95%E3%81%81%E8%A1%8C%E3%81%93%E3%81%86!%22%2C%22_Incompatible%20with%20Scratch%20Lab%3A%22%3A%22Scratch%20Lab%E3%81%A8%E3%81%AE%E4%BA%92%E6%8F%9B%E6%80%A7%E3%81%AA%E3%81%97%22%2C%22_Welcome%20to%20my%20project!%22%3A%22%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%B8%E3%82%88%E3%81%86%E3%81%93%E3%81%9D!%22%2C%22_%5BANIMATE%5D%20duration%22%3A%22%5BANIMATE%5D%E3%81%AE%E9%95%B7%E3%81%95%22%2C%22_%5BANIMATE%5D%20text%20%5BTEXT%5D%22%3A%22%5BANIMATE%5D%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%A7%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%5BTEXT%5D%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B%22%2C%22_add%20line%20%5BTEXT%5D%22%3A%22%E8%A1%8C%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%97%E3%81%A6%5BTEXT%5D%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B%22%2C%22_align%20text%20to%20%5BALIGN%5D%22%3A%22%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%82%92%5BALIGN%5D%E5%AF%84%E3%82%8A%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_animate%20%5BANIMATE%5D%20until%20done%22%3A%22%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%5BANIMATE%5D%E3%82%92%E9%96%8B%E5%A7%8B%E3%81%97%E3%81%A6%E5%BE%85%E3%81%A4%22%2C%22_center%22%3A%22%E4%B8%AD%E5%A4%AE%22%2C%22_displayed%20text%22%3A%22%E8%A1%A8%E7%A4%BA%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%22%2C%22_is%20animating%3F%22%3A%22%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%3F%22%2C%22_is%20showing%20text%3F%22%3A%22%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%81%8C%E8%A1%A8%E7%A4%BA%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%81%8B%3F%22%2C%22_left%22%3A%22%E5%B7%A6%22%2C%22_rainbow%22%3A%22%E3%83%AC%E3%82%A4%E3%83%B3%E3%83%9C%E3%83%BC%22%2C%22_random%20font%22%3A%22%E3%83%A9%E3%83%B3%E3%83%80%E3%83%A0%E3%81%AA%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88%22%2C%22_reset%20%5BANIMATE%5D%20duration%22%3A%22%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%5BANIMATE%5D%E3%81%AE%E9%95%B7%E3%81%95%E3%82%92%E3%83%AA%E3%82%BB%E3%83%83%E3%83%88%E3%81%99%E3%82%8B%22%2C%22_reset%20text%20width%22%3A%22%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%81%AE%E5%B9%85%E3%82%92%E3%83%AA%E3%82%BB%E3%83%83%E3%83%88%E3%81%99%E3%82%8B%22%2C%22_reset%20typing%20delay%22%3A%22%E3%82%BF%E3%82%A4%E3%83%94%E3%83%B3%E3%82%B0%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E9%96%93%E9%9A%94%E3%82%92%E3%83%AA%E3%82%BB%E3%83%83%E3%83%88%22%2C%22_right%22%3A%22%E5%8F%B3%22%2C%22_set%20%5BANIMATE%5D%20duration%20to%20%5BNUM%5D%20seconds%22%3A%22%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%5BANIMATE%5D%E3%81%AE%E9%95%B7%E3%81%95%E3%82%92%5BNUM%5D%E7%A7%92%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_set%20font%20to%20%5BFONT%5D%22%3A%22%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88%E3%82%92%5BFONT%5D%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_set%20outline%20color%20to%20%5BCOLOR%5D%22%3A%22%E8%BC%AA%E9%83%AD%E3%81%AE%E8%89%B2%E3%82%92%5BCOLOR%5D%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_set%20outline%20width%20to%20%5BWIDTH%5D%22%3A%22%E8%BC%AA%E9%83%AD%E3%81%AE%E5%B9%85%E3%82%92%5BWIDTH%5D%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_set%20shake%20intensity%20to%20%5BNUM%5D%25%22%3A%22%E3%82%B7%E3%82%A7%E3%82%A4%E3%82%AF%E3%81%AE%E5%BC%B7%E5%BA%A6%E3%82%92%5BNUM%5D%25%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_set%20text%20color%20to%20%5BCOLOR%5D%22%3A%22%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%81%AE%E8%89%B2%E3%82%92%5BCOLOR%5D%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_set%20typing%20delay%20to%20%5BNUM%5D%20seconds%22%3A%22%E3%82%BF%E3%82%A4%E3%83%94%E3%83%B3%E3%82%B0%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E9%96%93%E9%9A%94%E3%82%92%5BNUM%5D%E7%A7%92%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_set%20width%20to%20%5BWIDTH%5D%22%3A%22%E5%B9%85%E3%82%92%5BWIDTH%5D%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_set%20width%20to%20%5BWIDTH%5D%20aligned%20%5BALIGN%5D%22%3A%22%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%81%AE%E5%B9%85%E3%82%92%5BWIDTH%5D%E3%80%81%5BALIGN%5D%E5%AF%84%E3%81%9B%E3%81%AB%E3%81%99%E3%82%8B%22%2C%22_show%20sprite%22%3A%22%E3%82%B9%E3%83%97%E3%83%A9%E3%82%A4%E3%83%88%E3%82%92%E8%A1%A8%E7%A4%BA%22%2C%22_show%20text%20%5BTEXT%5D%22%3A%22%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%5BTEXT%5D%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B%22%2C%22_start%20%5BANIMATE%5D%20animation%22%3A%22%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%5BANIMATE%5D%E3%82%92%E9%96%8B%E5%A7%8B%E3%81%99%E3%82%8B%22%2C%22_text%20%5BATTRIBUTE%5D%22%3A%22%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%81%AE%5BATTRIBUTE%5D%22%2C%22_type%22%3A%22%E3%82%BF%E3%82%A4%E3%83%94%E3%83%B3%E3%82%B0%22%2C%22_typing%20delay%22%3A%22%E3%82%BF%E3%82%A4%E3%83%94%E3%83%B3%E3%82%B0%E3%82%A2%E3%83%8B%E3%83%A1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%AE%E9%96%93%E9%9A%94%22%2C%22_with%20word%20wrap%22%3A%22%E9%80%94%E4%B8%AD%E6%94%B9%E8%A1%8C%E3%82%92%E5%90%AB%E3%82%93%E3%81%A7%22%2C%22_without%20word%20wrap%22%3A%22%E9%80%94%E4%B8%AD%E6%94%B9%E8%A1%8C%E3%82%92%E5%90%AB%E3%81%BE%E3%81%AA%E3%81%84%E3%81%A7%22%2C%22_zoom%22%3A%22%E3%82%BA%E3%83%BC%E3%83%A0%22%2C%22disableCompatibilityMode%22%3A%22%E3%81%93%E3%82%8C%E3%81%AFScratch%20Lab%E3%81%A7%E3%81%AF%E5%8B%95%E3%81%8B%E3%81%AA%E3%81%84%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E3%82%84%E6%A9%9F%E8%83%BD%E3%82%92%E6%9C%89%E5%8A%B9%E3%81%AB%E3%81%97%E3%81%BE%E3%81%99%E3%80%82%5Cn%5Cn%E7%B6%9A%E8%A1%8C%E3%81%97%E3%81%BE%E3%81%99%E3%81%8B%3F%22%7D%2C%22ko%22%3A%7B%22_%23%20of%20lines%22%3A%22%EC%A4%84%20%EC%88%98%22%2C%22_%23%20of%20lines%20%5BWITH_WORD_WRAP%5D%22%3A%22%5BWITH_WORD_WRAP%5D%20%EC%A4%84%20%EC%88%98%22%2C%22_Animated%20Text%22%3A%22%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98%20%ED%85%8D%EC%8A%A4%ED%8A%B8%22%2C%22_Enable%20Non-Scratch%20Lab%20Features%22%3A%22%EB%B9%84%20Scratch%20Lab%20%EA%B8%B0%EB%8A%A5%20%ED%99%9C%EC%84%B1%ED%99%94%ED%95%98%EA%B8%B0%22%2C%22_Hello!%22%3A%22%EC%95%88%EB%85%95!%22%2C%22_Here%20we%20go!%22%3A%22%EA%B0%84%EB%8B%A4!%22%2C%22_Incompatible%20with%20Scratch%20Lab%3A%22%3A%22Scratch%20Lab%EA%B3%BC%20%ED%98%B8%ED%99%98%EB%90%98%EC%A7%80%20%EC%95%8A%EC%9D%8C%3A%22%2C%22_Welcome%20to%20my%20project!%22%3A%22%EC%A0%9C%20%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EC%97%90%20%EC%98%A4%EC%8B%A0%EA%B1%B8%20%ED%99%98%EC%98%81%ED%95%B4%EC%9A%94!%22%2C%22_%5BANIMATE%5D%20duration%22%3A%22%5BANIMATE%5D%EC%9D%98%20%EB%8F%99%EC%9E%91%20%EC%8B%9C%EA%B0%84%22%2C%22_%5BANIMATE%5D%20text%20%5BTEXT%5D%22%3A%22%5BANIMATE%5D%20%ED%85%8D%EC%8A%A4%ED%8A%B8%20%5BTEXT%5D%22%2C%22_add%20line%20%5BTEXT%5D%22%3A%22%EB%AC%B8%EA%B5%AC%20%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0%20%5BTEXT%5D%22%2C%22_align%20text%20to%20%5BALIGN%5D%22%3A%22%ED%85%8D%EC%8A%A4%ED%8A%B8%EB%A5%BC%20%5BALIGN%5D%20%EC%A0%95%EB%A0%AC%ED%95%98%EA%B8%B0%22%2C%22_animate%20%5BANIMATE%5D%20until%20done%22%3A%22%5BANIMATE%5D%20%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98%20%EC%8B%9C%EC%9E%91%ED%95%98%EA%B3%A0%20%EA%B8%B0%EB%8B%A4%EB%A6%AC%EA%B8%B0%22%2C%22_center%22%3A%22%EA%B0%80%EC%9A%B4%EB%8D%B0%22%2C%22_displayed%20text%22%3A%22%EB%82%98%ED%83%80%EB%82%9C%20%ED%85%8D%EC%8A%A4%ED%8A%B8%22%2C%22_is%20animating%3F%22%3A%22%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98%20%EC%A4%91%EC%9D%B8%EA%B0%80%3F%22%2C%22_is%20showing%20text%3F%22%3A%22%ED%85%8D%EC%8A%A4%ED%8A%B8%EA%B0%80%20%EB%82%98%ED%83%80%EB%82%AC%EB%8A%94%EA%B0%80%3F%22%2C%22_left%22%3A%22%EC%99%BC%EC%AA%BD%22%2C%22_rainbow%22%3A%22%EB%AC%B4%EC%A7%80%EA%B0%9C%22%2C%22_random%20font%22%3A%22%EB%AC%B4%EC%9E%91%EC%9C%84%20%EA%B8%80%EA%BC%B4%22%2C%22_reset%20%5BANIMATE%5D%20duration%22%3A%22%5BANIMATE%5D%EC%9D%98%20%EB%8F%99%EC%9E%91%20%EC%8B%9C%EA%B0%84%20%EC%B4%88%EA%B8%B0%ED%99%94%ED%95%98%EA%B8%B0%22%2C%22_reset%20text%20width%22%3A%22%ED%85%8D%EC%8A%A4%ED%8A%B8%20%EB%84%93%EC%9D%B4%EB%A5%BC%20%EC%B4%88%EA%B8%B0%ED%99%94%ED%95%98%EA%B8%B0%22%2C%22_reset%20typing%20delay%22%3A%22%ED%83%80%EC%9E%90%20%ED%9A%A8%EA%B3%BC%EC%9D%98%20%EA%B0%84%EA%B2%A9%20%EC%B4%88%EA%B8%B0%ED%99%94%ED%95%98%EA%B8%B0%22%2C%22_right%22%3A%22%EC%98%A4%EB%A5%B8%EC%AA%BD%22%2C%22_set%20%5BANIMATE%5D%20duration%20to%20%5BNUM%5D%20seconds%22%3A%22%5BANIMATE%5D%EC%9D%98%20%EB%8F%99%EC%9E%91%20%EC%8B%9C%EA%B0%84%EC%9D%84%20%5BNUM%5D%EC%B4%88%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22_set%20font%20to%20%5BFONT%5D%22%3A%22%EA%B8%80%EA%BC%B4%EC%9D%84%20%5BFONT%5D(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22_set%20outline%20color%20to%20%5BCOLOR%5D%22%3A%22%ED%85%8C%EB%91%90%EB%A6%AC%20%EC%83%89%EC%9D%84%20%5BCOLOR%5D(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22_set%20outline%20width%20to%20%5BWIDTH%5D%22%3A%22%ED%85%8C%EB%91%90%EB%A6%AC%20%EB%91%90%EA%BB%98%EB%A5%BC%20%5BWIDTH%5D(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22_set%20text%20color%20to%20%5BCOLOR%5D%22%3A%22%ED%85%8D%EC%8A%A4%ED%8A%B8%20%EC%83%89%EC%9D%84%20%5BCOLOR%5D(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22_set%20typing%20delay%20to%20%5BNUM%5D%20seconds%22%3A%22%ED%83%80%EC%9E%90%20%ED%9A%A8%EA%B3%BC%EC%9D%98%20%EA%B0%84%EA%B2%A9%EC%9D%84%20%5BNUM%5D%EC%B4%88%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22_set%20width%20to%20%5BWIDTH%5D%22%3A%22%EB%84%93%EC%9D%B4%EB%A5%BC%20%5BWIDTH%5D(%EC%9C%BC)%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22_set%20width%20to%20%5BWIDTH%5D%20aligned%20%5BALIGN%5D%22%3A%22%EB%84%93%EC%9D%B4%20%5BWIDTH%5D%EC%9D%98%20%5BALIGN%5D%20%EC%A0%95%EB%A0%AC%EB%A1%9C%20%EC%A0%95%ED%95%98%EA%B8%B0%22%2C%22_show%20sprite%22%3A%22%EC%8A%A4%ED%94%84%EB%9D%BC%EC%9D%B4%ED%8A%B8%EB%A1%9C%20%EB%B3%B4%EC%9D%B4%EA%B8%B0%22%2C%22_show%20text%20%5BTEXT%5D%22%3A%22%ED%85%8D%EC%8A%A4%ED%8A%B8%20%5BTEXT%5D%20%EB%B3%B4%EC%9D%B4%EA%B8%B0%22%2C%22_start%20%5BANIMATE%5D%20animation%22%3A%22%5BANIMATE%5D%20%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98%20%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0%22%2C%22_text%20%5BATTRIBUTE%5D%22%3A%22%ED%85%8D%EC%8A%A4%ED%8A%B8%EC%9D%98%20%5BATTRIBUTE%5D%22%2C%22_type%22%3A%22%ED%83%80%EC%9E%90%22%2C%22_typing%20delay%22%3A%22%ED%83%80%EC%9E%90%20%ED%9A%A8%EA%B3%BC%EC%9D%98%20%EA%B0%84%EA%B2%A9%22%2C%22_with%20word%20wrap%22%3A%22%EC%A4%84%EB%B0%94%EA%BF%88%EC%9D%84%20%ED%8F%AC%ED%95%A8%ED%95%9C%22%2C%22_without%20word%20wrap%22%3A%22%EC%A4%84%EB%B0%94%EA%BF%88%EC%9D%84%20%EC%A0%9C%EC%99%B8%ED%95%9C%22%2C%22_zoom%22%3A%22%EC%BB%A4%EC%A7%80%EA%B8%B0%22%2C%22disableCompatibilityMode%22%3A%22%EC%95%9E%EC%9C%BC%EB%A1%9C%20%EC%B6%94%EA%B0%80%EB%90%98%EB%8A%94%20%EA%B8%B0%EB%93%B1%EB%93%A4%EC%9D%80%20%EA%B3%B5%EC%8B%9D%20Scratch%20Lab%EA%B3%BC%20%ED%98%B8%ED%99%98%EB%90%98%EC%A7%80%20%EC%95%8A%EC%8A%B5%EB%8B%88%EB%8B%A4.%5Cn%5Cn%EA%B3%84%EC%86%8D%ED%95%98%EC%8B%9C%EA%B2%A0%EC%8A%B5%EB%8B%88%EA%B9%8C%3F%22%7D%2C%22nb%22%3A%7B%22_%23%20of%20lines%22%3A%22%23%20av%20linjer%22%2C%22_Animated%20Text%22%3A%22Animert%20Tekst%22%2C%22_Enable%20Non-Scratch%20Lab%20Features%22%3A%22Aktiver%20funksjoner%20som%20er%20ikke%20tilgjengelig%20i%20scratch%20lab%22%2C%22_Hello!%22%3A%22Hei!%22%2C%22_Here%20we%20go!%22%3A%22Her%20g%C3%A5r%20vi!%22%2C%22_Incompatible%20with%20Scratch%20Lab%3A%22%3A%22Inkompatibel%20med%20Scratch%20Lab.%22%2C%22_Welcome%20to%20my%20project!%22%3A%22Velkommen%20til%20mitt%20prosjekt!%22%2C%22_%5BANIMATE%5D%20duration%22%3A%22%5BANIMATE%5D%20varighet%22%2C%22_%5BANIMATE%5D%20text%20%5BTEXT%5D%22%3A%22%5BANIMATE%5D%20tekst%20%5BTEXT%5D%22%2C%22_add%20line%20%5BTEXT%5D%22%3A%22legg%20til%20linje%20%5BTEXT%5D%22%2C%22_align%20text%20to%20%5BALIGN%5D%22%3A%22juster%20teksten%20til%20%5BALIGN%5D%22%2C%22_animate%20%5BANIMATE%5D%20until%20done%22%3A%22animere%20%5BANIMATE%5D%20til%20ferdig%22%2C%22_center%22%3A%22senter%22%2C%22_displayed%20text%22%3A%22vist%20tekst%22%2C%22_is%20animating%3F%22%3A%22er%20animerer%3F%22%2C%22_is%20showing%20text%3F%22%3A%22viser%20teksten%3F%22%2C%22_left%22%3A%22venstre%22%2C%22_rainbow%22%3A%22regnbue%22%2C%22_random%20font%22%3A%22tilfeldig%20skrifttype%22%2C%22_reset%20%5BANIMATE%5D%20duration%22%3A%22tilbakestill%20%5BANIMATE%5D%20varighet%22%2C%22_reset%20text%20width%22%3A%22tilbakestill%20tekstbredde%22%2C%22_reset%20typing%20delay%22%3A%22nullstill%20skriveforsinkelse%22%2C%22_right%22%3A%22riktig%22%2C%22_set%20%5BANIMATE%5D%20duration%20to%20%5BNUM%5D%20seconds%22%3A%22sett%20%5BANIMATE%5D%20varighet%20til%20%5BNUM%5D%20sekunder%22%2C%22_set%20font%20to%20%5BFONT%5D%22%3A%22sett%20skrifttype%20til%20%5BFONT%5D%22%2C%22_set%20text%20color%20to%20%5BCOLOR%5D%22%3A%22sett%20tekstfarge%20til%20%5BCOLOR%5D%22%2C%22_set%20typing%20delay%20to%20%5BNUM%5D%20seconds%22%3A%22sett%20skriveforsinkelse%20til%20%5BNUM%5D%20sekunder%22%2C%22_set%20width%20to%20%5BWIDTH%5D%22%3A%22sett%20bredde%20til%20%5BWIDTH%5D%22%2C%22_set%20width%20to%20%5BWIDTH%5D%20aligned%20%5BALIGN%5D%22%3A%22sett%20bredde%20til%20%5BWIDTH%5D%20justert%20%5BALIGN%5D%22%2C%22_show%20sprite%22%3A%22vis%20sprite%22%2C%22_show%20text%20%5BTEXT%5D%22%3A%22vis%20tekst%20%5BTEXT%5D%22%2C%22_start%20%5BANIMATE%5D%20animation%22%3A%22start%20%5BANIMATE%5D%20animasjon%22%2C%22_text%20%5BATTRIBUTE%5D%22%3A%22tekst%20%5BATTRIBUTE%5D%22%2C%22_typing%20delay%22%3A%22skriveforsinkelse%22%2C%22disableCompatibilityMode%22%3A%22Dette%20vil%20aktivere%20nye%20blokker%20og%20funksjoner%20som%20ikke%20vil%20fungere%20i%20den%20offisielle%20Scratch%20Lab.%5Cn%5Cn%C3%98nsker%20du%20%C3%A5%20fortsette%3F%22%7D%2C%22nl%22%3A%7B%22_%23%20of%20lines%22%3A%22aantal%20regels%22%2C%22_%23%20of%20lines%20%5BWITH_WORD_WRAP%5D%22%3A%22aantal%20regels%20%5BWITH_WORD_WRAP%5D%22%2C%22_Animated%20Text%22%3A%22Geanimeerde%20tekst%22%2C%22_Enable%20Non-Scratch%20Lab%20Features%22%3A%22Niet-Scratch%20Lab%20Functies%20Inschakelen%22%2C%22_Hello!%22%3A%22Hallo!%22%2C%22_Here%20we%20go!%22%3A%22Daar%20gaan%20we!%22%2C%22_Incompatible%20with%20Scratch%20Lab%3A%22%3A%22Incompatibel%20met%20Scratch%20Lab%3A%22%2C%22_Welcome%20to%20my%20project!%22%3A%22Welkom%20bij%20mijn%20project!%22%2C%22_%5BANIMATE%5D%20duration%22%3A%22duur%20van%20%5BANIMATE%5D%22%2C%22_%5BANIMATE%5D%20text%20%5BTEXT%5D%22%3A%22%5BANIMATE%5D%20tekst%20%5BTEXT%5D%22%2C%22_add%20line%20%5BTEXT%5D%22%3A%22voeg%20regel%20%5BTEXT%5D%20toe%22%2C%22_align%20text%20to%20%5BALIGN%5D%22%3A%22lijn%20tekst%20%5BALIGN%5D%20uit%22%2C%22_animate%20%5BANIMATE%5D%20until%20done%22%3A%22start%20animatie%20%5BANIMATE%5D%20en%20wacht%22%2C%22_center%22%3A%22midden%22%2C%22_displayed%20text%22%3A%22weergegeven%20tekst%22%2C%22_is%20animating%3F%22%3A%22animatie%20bezig%3F%22%2C%22_is%20showing%20text%3F%22%3A%22tekst%20aan%20het%20tonen%3F%22%2C%22_left%22%3A%22links%22%2C%22_rainbow%22%3A%22regenboog%22%2C%22_random%20font%22%3A%22willekeurig%20lettertype%22%2C%22_reset%20%5BANIMATE%5D%20duration%22%3A%22reset%20duur%20van%20%5BANIMATE%5D%22%2C%22_reset%20text%20width%22%3A%22reset%20tekstbreedte%22%2C%22_reset%20typing%20delay%22%3A%22reset%20wachttijd%20van%20typ-animatie%22%2C%22_right%22%3A%22rechts%22%2C%22_set%20%5BANIMATE%5D%20duration%20to%20%5BNUM%5D%20seconds%22%3A%22maak%20duur%20van%20%5BANIMATE%5D%20%5BNUM%5D%20seconden%22%2C%22_set%20font%20to%20%5BFONT%5D%22%3A%22maak%20lettertype%20%5BFONT%5D%22%2C%22_set%20text%20color%20to%20%5BCOLOR%5D%22%3A%22maak%20tekstkleur%20%5BCOLOR%5D%22%2C%22_set%20typing%20delay%20to%20%5BNUM%5D%20seconds%22%3A%22maak%20wachttijd%20van%20typ-animatie%20%5BNUM%5D%20seconden%22%2C%22_set%20width%20to%20%5BWIDTH%5D%22%3A%22maak%20breedte%20%5BWIDTH%5D%22%2C%22_set%20width%20to%20%5BWIDTH%5D%20aligned%20%5BALIGN%5D%22%3A%22maak%20breedte%20%5BWIDTH%5D%20%5BALIGN%5D%20uitgelijnd%22%2C%22_show%20sprite%22%3A%22toon%20sprite%22%2C%22_show%20text%20%5BTEXT%5D%22%3A%22toon%20tekst%20%5BTEXT%5D%22%2C%22_start%20%5BANIMATE%5D%20animation%22%3A%22start%20animatie%20%5BANIMATE%5D%22%2C%22_text%20%5BATTRIBUTE%5D%22%3A%22%5BATTRIBUTE%5D%20van%20tekst%22%2C%22_type%22%3A%22typen%22%2C%22_typing%20delay%22%3A%22wachttijd%20van%20typ-animatie%22%2C%22_with%20word%20wrap%22%3A%22met%20tekstterugloop%22%2C%22_without%20word%20wrap%22%3A%22zonder%20tekstterugloop%22%2C%22disableCompatibilityMode%22%3A%22Dit%20voegt%20nieuwe%20blokken%20en%20functies%20toe%20die%20NIET%20werken%20in%20het%20offici%C3%ABle%20Scratch%20Lab.%5Cn%5CnWil%20je%20verdergaan%3F%22%7D%2C%22pl%22%3A%7B%22_Animated%20Text%22%3A%22Animowany%20Tekst%22%2C%22_Hello!%22%3A%22Cze%C5%9B%C4%87!%22%7D%2C%22ru%22%3A%7B%22_%23%20of%20lines%22%3A%22%D0%BA%D0%BE%D0%BB-%D0%B2%D0%BE%20%D1%81%D1%82%D1%80%D0%BE%D0%BA%22%2C%22_%23%20of%20lines%20%5BWITH_WORD_WRAP%5D%22%3A%22%23%20%5BWITH_WORD_WRAP%5D%22%2C%22_Animated%20Text%22%3A%22%D0%90%D0%BD%D0%B8%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%B9%20%D0%A2%D0%B5%D0%BA%D1%81%D1%82%22%2C%22_Enable%20Non-Scratch%20Lab%20Features%22%3A%22%D0%92%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D1%8C%20%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B8%20%D0%BD%D0%B5%20%D0%B8%D0%B7%20Scratch%20Lab%22%2C%22_Hello!%22%3A%22%D0%9F%D1%80%D0%B8%D0%B2%D0%B5%D1%82!%22%2C%22_Here%20we%20go!%22%3A%22%D0%9F%D0%BE%D0%B5%D1%85%D0%B0%D0%BB%D0%B8!%22%2C%22_Incompatible%20with%20Scratch%20Lab%3A%22%3A%22%D0%9D%D0%B5%D1%81%D0%BE%D0%B2%D0%BC%D0%B5%D1%81%D1%82%D0%B8%D0%BC%D0%BE%20%D1%81%D0%BE%20Scratch%20Lab%3A%22%2C%22_Welcome%20to%20my%20project!%22%3A%22%D0%94%D0%BE%D0%B1%D1%80%D0%BE%20%D0%BF%D0%BE%D0%B6%D0%B0%D0%BB%D0%BE%D0%B2%D0%B0%D1%82%D1%8C%20%D0%B2%20%D0%BC%D0%BE%D0%B9%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82!%22%2C%22_%5BANIMATE%5D%20duration%22%3A%22%D0%BF%D1%80%D0%BE%D0%B4%D0%BE%D0%BB%D0%B6%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C%20%D0%B0%D0%BD%D0%B8%D0%BC%D0%B0%D1%86%D0%B8%D0%B8%20%5BANIMATE%5D%20%22%2C%22_%5BANIMATE%5D%20text%20%5BTEXT%5D%22%3A%22%5BANIMATE%5D%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%20%5BTEXT%5D%22%2C%22_add%20line%20%5BTEXT%5D%22%3A%22%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%B8%D1%82%D1%8C%20%D1%81%D1%82%D1%80%D0%BE%D0%BA%D1%83%20%5BTEXT%5D%22%2C%22_align%20text%20to%20%5BALIGN%5D%22%3A%22%D0%B2%D1%8B%D1%80%D0%BE%D0%B2%D0%BD%D1%8F%D1%82%D1%8C%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%20%D0%BF%D0%BE%20%5BALIGN%5D%22%2C%22_animate%20%5BANIMATE%5D%20until%20done%22%3A%22%D0%B0%D0%BD%D0%B8%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C%20%5BANIMATE%5D%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%20%D0%B4%D0%BE%20%D0%BA%D0%BE%D0%BD%D1%86%D0%B0%22%2C%22_center%22%3A%22%D1%86%D0%B5%D0%BD%D1%82%D1%80%D1%83%22%2C%22_displayed%20text%22%3A%22%D0%BF%D0%BE%D0%BA%D0%B0%D0%B7%D0%B0%D0%BD%D0%BD%D1%8B%D0%B9%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%22%2C%22_is%20animating%3F%22%3A%22%D0%B0%D0%BD%D0%B8%D0%BC%D0%B8%D1%80%D1%83%D0%B5%D1%82%D1%81%D1%8F%3F%22%2C%22_is%20showing%20text%3F%22%3A%22%D0%BF%D0%BE%D0%BA%D0%B0%D0%B7%D1%8B%D0%B2%D0%B0%D0%B5%D1%82%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%3F%22%2C%22_left%22%3A%22%D0%BB%D0%B5%D0%B2%D0%BE%D0%BC%D1%83%20%D0%BA%D1%80%D0%B0%D1%8E%22%2C%22_rainbow%22%3A%22%D1%80%D0%B0%D0%B4%D1%83%D0%B6%D0%BD%D1%8B%D0%B9%22%2C%22_random%20font%22%3A%22%D1%81%D0%BB%D1%83%D1%87%D0%B0%D0%B9%D0%BD%D1%8B%D0%B9%20%D1%88%D1%80%D0%B8%D1%84%D1%82%22%2C%22_reset%20%5BANIMATE%5D%20duration%22%3A%22%D1%81%D0%B1%D1%80%D0%BE%D1%81%D0%B8%D1%82%D1%8C%20%D0%BF%D1%80%D0%BE%D0%B4%D0%BE%D0%BB%D0%B6%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C%20%D0%B0%D0%BD%D0%B8%D0%BC%D0%B0%D1%86%D0%B8%D0%B8%20%5BANIMATE%5D%22%2C%22_reset%20text%20width%22%3A%22%D1%81%D0%B1%D1%80%D0%BE%D1%81%D0%B8%D1%82%D1%8C%20%D1%88%D0%B8%D1%80%D0%B8%D0%BD%D1%83%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%D0%B0%22%2C%22_reset%20typing%20delay%22%3A%22%D1%81%D0%B1%D1%80%D0%BE%D1%81%D0%B8%D1%82%D1%8C%20%D0%B7%D0%B0%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D1%83%20%D0%BF%D0%B5%D1%87%D0%B0%D1%82%D0%B0%D0%BD%D0%B8%D1%8F%22%2C%22_right%22%3A%22%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D0%BC%D1%83%20%D0%BA%D1%80%D0%B0%D1%8E%22%2C%22_set%20%5BANIMATE%5D%20duration%20to%20%5BNUM%5D%20seconds%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D0%BF%D1%80%D0%BE%D0%B4%D0%BE%D0%BB%D0%B6%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D1%8C%20%D0%B0%D0%BD%D0%B8%D0%BC%D0%B0%D1%86%D0%B8%D0%B8%20%5BANIMATE%5D%20%D0%B2%20%5BNUM%5D%20%D1%81%D0%B5%D0%BA%D1%83%D0%BD%D0%B4%22%2C%22_set%20font%20to%20%5BFONT%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%88%D1%80%D0%B8%D1%84%D1%82%20%D0%B2%20%5BFONT%5D%22%2C%22_set%20outline%20color%20to%20%5BCOLOR%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%86%D0%B2%D0%B5%D1%82%20%D0%BE%D0%B1%D0%B2%D0%BE%D0%B4%D0%BA%D0%B5%20%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%20%5BCOLOR%5D%22%2C%22_set%20outline%20width%20to%20%5BWIDTH%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%88%D0%B8%D1%80%D0%B8%D0%BD%D0%B5%20%D0%BE%D0%B1%D0%B2%D0%BE%D0%B4%D0%BA%D0%B8%20%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%20%5BWIDTH%5D%22%2C%22_set%20shake%20intensity%20to%20%5BNUM%5D%25%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%81%D0%B8%D0%BB%D1%83%20%D1%82%D1%80%D1%8F%D1%81%D0%BA%D0%B8%20%D0%BD%D0%B0%5BNUM%5D%25%22%2C%22_set%20text%20color%20to%20%5BCOLOR%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%86%D0%B2%D0%B5%D1%82%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%D0%B0%20%D0%B2%20%5BCOLOR%5D%22%2C%22_set%20typing%20delay%20to%20%5BNUM%5D%20seconds%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D0%B7%D0%B0%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D1%83%20%D0%BF%D0%B5%D1%87%D0%B0%D1%82%D0%B0%D0%BD%D0%B8%D1%8F%20%D0%B2%20%5BNUM%5D%20%D1%81%D0%B5%D0%BA%D1%83%D0%BD%D0%B4%22%2C%22_set%20width%20to%20%5BWIDTH%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%88%D0%B8%D1%80%D0%B8%D0%BD%D1%83%20%D0%B2%20%5BWIDTH%5D%22%2C%22_set%20width%20to%20%5BWIDTH%5D%20aligned%20%5BALIGN%5D%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B0%D1%82%D1%8C%20%D1%88%D0%B8%D1%80%D0%B8%D0%BD%D1%83%20%D0%B2%20%5BWIDTH%5D%20%D0%B2%D1%8B%D1%80%D0%BE%D0%B2%D0%BD%D0%B5%D0%BD%D0%BD%D1%83%D1%8E%20%D0%BF%D0%BE%20%5BALIGN%5D%22%2C%22_show%20sprite%22%3A%22%D0%BF%D0%BE%D0%BA%D0%B0%D0%B7%D0%B0%D1%82%D1%8C%20%D1%81%D0%BF%D1%80%D0%B0%D0%B9%D1%82%22%2C%22_show%20text%20%5BTEXT%5D%22%3A%22%D0%BF%D0%BE%D0%BA%D0%B0%D0%B7%D0%B0%D1%82%D1%8C%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%20%5BTEXT%5D%22%2C%22_start%20%5BANIMATE%5D%20animation%22%3A%22%D0%BD%D0%B0%D1%87%D0%B0%D1%82%D1%8C%20%D0%B0%D0%BD%D0%B8%D0%BC%D0%B0%D1%86%D0%B8%D1%8E%20%5BANIMATE%5D%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%22%2C%22_text%20%5BATTRIBUTE%5D%22%3A%22%5BATTRIBUTE%5D%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%D0%B0%22%2C%22_type%22%3A%22%D0%BF%D0%B5%D1%87%D0%B0%D1%82%D0%B0%D1%8E%D1%89%D0%B8%D0%B9%D1%81%D1%8F%22%2C%22_typing%20delay%22%3A%22%D0%B7%D0%B0%D0%B4%D0%B5%D1%80%D0%B6%D0%BA%D0%B0%20%D0%BF%D0%B5%D1%87%D0%B0%D1%82%D0%B0%D0%BD%D0%B8%D1%8F%22%2C%22_with%20word%20wrap%22%3A%22%D1%81%20%D0%BF%D0%B5%D1%80%D0%B5%D0%BD%D0%BE%D1%81%D0%BE%D0%BC%20%D1%81%D0%BB%D0%BE%D0%B2%22%2C%22_without%20word%20wrap%22%3A%22%D0%B1%D0%B5%D0%B7%20%D0%BF%D0%B5%D1%80%D0%B5%D0%BD%D0%BE%D1%81%D0%B0%20%D1%81%D0%BB%D0%BE%D0%B2%22%2C%22_zoom%22%3A%22%D0%B2%D1%8B%D1%80%D0%B0%D1%81%D1%82%D0%B0%D1%8E%D1%89%D0%B8%D0%B9%22%2C%22disableCompatibilityMode%22%3A%22%D0%AD%D1%82%D0%BE%20%D0%B2%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%20%D0%BD%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%20%D0%B8%20%D0%BE%D1%81%D0%BE%D0%B1%D0%B5%D0%BD%D0%BD%D0%BE%D1%81%D1%82%D0%B8%20%D0%BA%D0%BE%D1%82%D0%BE%D1%80%D1%8B%D0%B5%20%D0%9D%D0%95%20%D0%91%D0%A3%D0%94%D0%A3%D0%A2%20%D0%A0%D0%90%D0%91%D0%9E%D0%A2%D0%90%D0%A2%D0%AC%20%D0%B2%20%D0%BE%D1%84%D0%B8%D1%86%D0%B8%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B9%20%D0%BB%D0%B0%D0%B1%D0%BE%D1%80%D0%B0%D1%82%D0%BE%D1%80%D0%B8%D0%B8%20Scratch.%5Cn%5Cn%D0%92%D1%8B%20%D0%B6%D0%B5%D0%BB%D0%B0%D0%B5%D1%82%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B4%D0%BE%D0%BB%D0%B6%D0%B8%D1%82%D1%8C%3F%22%7D%2C%22uk%22%3A%7B%22_%23%20of%20lines%22%3A%22%D0%BA%D1%96%D0%BB%D1%8C%D0%BA%D1%96%D1%81%D1%82%D1%8C%20%D0%BB%D1%96%D0%BD%D1%96%D0%B9%22%2C%22_%23%20of%20lines%20%5BWITH_WORD_WRAP%5D%22%3A%22%D0%BA%D1%96%D0%BB%D1%8C%D0%BA%D1%96%D1%81%D1%82%D1%8C%20%D0%BB%D1%96%D0%BD%D1%96%D0%B9%20%5BWITH_WORD_WRAP%5D%22%2C%22_Animated%20Text%22%3A%22%D0%90%D0%BD%D1%96%D0%BC%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B9%20%D0%A2%D0%B5%D0%BA%D1%81%D1%82%22%2C%22_Enable%20Non-Scratch%20Lab%20Features%22%3A%22%D0%A3%D0%B2%D1%96%D0%BC%D0%BA%D0%BD%D1%83%D1%82%D0%B8%20%D0%91%D0%BB%D0%BE%D0%BA%D0%B8%20%D0%9F%D0%BE%D0%B7%D0%B0%20Scratch%20Lab%22%2C%22_Hello!%22%3A%22%D0%9F%D1%80%D0%B8%D0%B2%D1%96%D1%82!%22%2C%22_Here%20we%20go!%22%3A%22%D0%9F%D0%BE%D1%87%D0%B8%D0%BD%D0%B0%D1%94%D0%BC%D0%BE!%22%2C%22_Incompatible%20with%20Scratch%20Lab%3A%22%3A%22%D0%9D%D0%B5%D1%81%D1%83%D0%BC%D1%96%D1%81%D0%BD%D1%96%20%D1%96%D0%B7%20Scratch%20Lab%3A%22%2C%22_Welcome%20to%20my%20project!%22%3A%22%D0%92%D1%96%D1%82%D0%B0%D1%94%D0%BC%D0%BE%20%D1%83%20%D0%BC%D0%BE%D1%94%D0%BC%D1%83%20%D0%BF%D1%80%D0%BE%D1%94%D0%BA%D1%82%D1%96!%22%2C%22_%5BANIMATE%5D%20duration%22%3A%22%D1%82%D1%80%D0%B8%D0%B2%D0%B0%D0%BB%D1%96%D1%81%D1%82%D1%8C%20%5BANIMATE%5D%22%2C%22_%5BANIMATE%5D%20text%20%5BTEXT%5D%22%3A%22%5BANIMATE%5D%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%20%5BTEXT%5D%22%2C%22_add%20line%20%5BTEXT%5D%22%3A%22%D0%B4%D0%BE%D0%B4%D0%B0%D1%82%D0%B8%20%D0%BB%D1%96%D0%BD%D1%96%D1%8E%20%5BTEXT%5D%22%2C%22_animate%20%5BANIMATE%5D%20until%20done%22%3A%22%D0%B0%D0%BD%D1%96%D0%BC%D1%83%D0%B2%D0%B0%D1%82%D0%B8%5BANIMATE%5D%20%D0%B4%D0%BE%20%D0%BA%D1%96%D0%BD%D1%86%D1%8F%22%2C%22_center%22%3A%22%D1%86%D0%B5%D0%BD%D1%82%D1%80%22%2C%22_displayed%20text%22%3A%22%D0%BF%D0%BE%D0%BA%D0%B0%D0%B7%D0%B0%D0%BD%D0%B8%D0%B9%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%22%2C%22_is%20animating%3F%22%3A%22%D0%B0%D0%BD%D1%96%D0%BC%D1%83%D1%94%D1%82%D1%8C%D1%81%D1%8F%3F%22%2C%22_is%20showing%20text%3F%22%3A%22%D0%BF%D0%BE%D0%BA%D0%B0%D0%B7%D1%83%D1%94%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%3F%22%2C%22_left%22%3A%22%D0%BB%D1%96%D0%B2%D0%BE%22%2C%22_rainbow%22%3A%22%D0%B2%D0%B5%D1%81%D0%B5%D0%BB%D0%BA%D0%B0%22%2C%22_random%20font%22%3A%22%D0%B2%D0%B8%D0%BF%D0%B0%D0%B4%D0%BA%D0%BE%D0%B2%D0%B8%D0%B9%20%D1%88%D1%80%D0%B8%D1%84%D1%82%22%2C%22_reset%20%5BANIMATE%5D%20duration%22%3A%22%D1%81%D0%BA%D0%B8%D0%BD%D1%83%D1%82%D0%B8%20%D1%82%D1%80%D0%B8%D0%B2%D0%B0%D0%BB%D1%96%D1%81%D1%82%D1%8C%20%5BANIMATE%5D%22%2C%22_reset%20text%20width%22%3A%22%D1%81%D0%BA%D0%B8%D0%BD%D1%83%D1%82%D0%B8%20%D1%88%D0%B8%D1%80%D0%B8%D0%BD%D1%83%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%D1%83%22%2C%22_reset%20typing%20delay%22%3A%22%D1%81%D0%BA%D0%B8%D0%BD%D1%83%D1%82%D0%B8%20%D0%B7%D0%B0%D1%82%D1%80%D0%B8%D0%BC%D0%BA%D1%83%20%D0%BD%D0%B0%D0%B1%D0%B8%D1%80%D0%B0%D0%BD%D0%BD%D1%8F%22%2C%22_right%22%3A%22%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%22%2C%22_set%20%5BANIMATE%5D%20duration%20to%20%5BNUM%5D%20seconds%22%3A%22%D0%B2%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D0%B8%20%D1%82%D1%80%D0%B8%D0%B2%D0%B0%D0%BB%D1%96%D1%81%D1%82%D1%8C%20%5BANIMATE%5D%20%D0%B4%D0%BE%20%5BNUM%5D%20%D1%81%D0%B5%D0%BA%D1%83%D0%BD%D0%B4%22%2C%22_set%20font%20to%20%5BFONT%5D%22%3A%22%D0%B2%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D0%B8%20%D1%88%D1%80%D0%B8%D1%84%D1%82%20%5BFONT%5D%22%2C%22_set%20text%20color%20to%20%5BCOLOR%5D%22%3A%22%D0%B2%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D0%B8%20%D0%BA%D0%BE%D0%BB%D1%96%D1%80%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%D1%83%20%5BCOLOR%5D%22%2C%22_set%20typing%20delay%20to%20%5BNUM%5D%20seconds%22%3A%22%D0%B2%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D0%B8%20%D0%B7%D0%B0%D1%82%D1%80%D0%B8%D0%BC%D0%BA%D1%83%20%D0%BD%D0%B0%D0%B1%D0%B8%D1%80%D0%B0%D0%BD%D0%BD%D1%8F%20%5BNUM%5D%20%D1%81%D0%B5%D0%BA%D1%83%D0%BD%D0%B4%22%2C%22_set%20width%20to%20%5BWIDTH%5D%22%3A%22%D0%B2%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D0%B8%20%D1%88%D0%B8%D1%80%D0%B8%D0%BD%D1%83%20%5BWIDTH%5D%22%2C%22_set%20width%20to%20%5BWIDTH%5D%20aligned%20%5BALIGN%5D%22%3A%22%D0%B2%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D0%B8%20%D1%88%D0%B8%D1%80%D0%B8%D0%BD%D1%83%20%5BWIDTH%5D%20%D0%BF%D0%BE%20%5BALIGN%5D%22%2C%22_show%20sprite%22%3A%22%D0%BF%D0%BE%D0%BA%D0%B0%D0%B7%D0%B0%D1%82%D0%B8%20%D1%81%D0%BF%D1%80%D0%B0%D0%B9%D1%82%22%2C%22_show%20text%20%5BTEXT%5D%22%3A%22%D0%BF%D0%BE%D0%BA%D0%B0%D0%B7%D0%B0%D1%82%D0%B8%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%20%5BTEXT%5D%22%2C%22_start%20%5BANIMATE%5D%20animation%22%3A%22%D0%BF%D0%BE%D1%87%D0%B0%D1%82%D0%B8%20%D0%B0%D0%BD%D1%96%D0%BC%D0%B0%D1%86%D1%96%D1%8E%20%5BANIMATE%5D%22%2C%22_text%20%5BATTRIBUTE%5D%22%3A%22%5BATTRIBUTE%5D%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%D1%83%22%2C%22_type%22%3A%22%D0%BD%D0%B0%D0%B1%D0%B8%D1%80%D0%B0%D0%BD%D0%BD%D1%8F%22%2C%22_typing%20delay%22%3A%22%D0%B7%D0%B0%D1%82%D1%80%D0%B8%D0%BC%D0%BA%D0%B0%20%D0%BD%D0%B0%D0%B1%D0%B8%D1%80%D0%B0%D0%BD%D0%BD%D1%8F%22%2C%22_with%20word%20wrap%22%3A%22%D0%B7%20%D0%BF%D0%B5%D1%80%D0%B5%D0%BD%D0%BE%D1%81%D0%BE%D0%BC%20%D1%81%D0%BB%D1%96%D0%B2%22%2C%22_without%20word%20wrap%22%3A%22%D0%B1%D0%B5%D0%B7%20%D0%BF%D0%B5%D1%80%D0%B5%D0%BD%D0%BE%D1%81%D1%83%20%D1%81%D0%BB%D1%96%D0%B2%22%2C%22_zoom%22%3A%22%D0%B7%D1%83%D0%BC%22%2C%22disableCompatibilityMode%22%3A%22%D0%A6%D0%B5%20%D0%B4%D0%BE%D0%B4%D0%B0%D1%94%20%D0%BD%D0%BE%D0%B2%D1%96%20%D0%B1%D0%BB%D0%BE%D0%BA%D0%B8%20%D1%8F%D0%BA%D1%96%20%D0%9D%D0%95%20%D0%9F%D0%A0%D0%90%D0%A6%D0%AE%D0%92%D0%90%D0%A2%D0%98%D0%9C%D0%A3%D0%A2%D0%AC%20%D0%BD%D0%B0%20%D0%BE%D1%84%D1%96%D1%86%D1%96%D0%B9%D0%BD%D1%96%D0%B9%20Scratch%20Lab.%5Cn%5Cn%D0%91%D0%B0%D0%B6%D0%B0%D1%94%D1%82%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B4%D0%BE%D0%B2%D0%B6%D0%B8%D1%82%D0%B8%3F%22%7D%2C%22zh-cn%22%3A%7B%22_%23%20of%20lines%22%3A%22%E6%96%87%E6%9C%AC%E8%A1%8C%E6%95%B0%22%2C%22_%23%20of%20lines%20%5BWITH_WORD_WRAP%5D%22%3A%22%5BWITH_WORD_WRAP%5D%E6%97%B6%E7%9A%84%E8%A1%8C%E6%95%B0%22%2C%22_Animated%20Text%22%3A%22%E8%89%BA%E6%9C%AF%E5%AD%97%22%2C%22_Enable%20Non-Scratch%20Lab%20Features%22%3A%22%E6%98%BE%E7%A4%BA%E4%B8%8EScratch%20Lab%E4%B8%8D%E5%85%BC%E5%AE%B9%E7%9A%84%E7%A7%AF%E6%9C%A8%22%2C%22_Hello!%22%3A%22%E4%BD%A0%E5%A5%BD%EF%BC%81%22%2C%22_Here%20we%20go!%22%3A%22%E7%8E%B0%E5%9C%A8%E5%87%BA%E5%8F%91%EF%BC%81%22%2C%22_Incompatible%20with%20Scratch%20Lab%3A%22%3A%22%E4%BB%A5%E4%B8%8B%E7%A7%AF%E6%9C%A8%E4%B8%8EScratch%20Lab%E4%B8%8D%E5%85%BC%E5%AE%B9%EF%BC%9A%22%2C%22_Welcome%20to%20my%20project!%22%3A%22%E6%AC%A2%E8%BF%8E%E6%9D%A5%E5%88%B0%E6%88%91%E7%9A%84%E4%BD%9C%E5%93%81%EF%BC%81%22%2C%22_%5BANIMATE%5D%20duration%22%3A%22%E5%8A%A8%E7%94%BB%E6%A0%B7%E5%BC%8F%5BANIMATE%5D%E7%9A%84%E5%AE%8C%E6%88%90%E6%97%B6%E9%97%B4%22%2C%22_%5BANIMATE%5D%20text%20%5BTEXT%5D%22%3A%22%E6%98%BE%E7%A4%BA%E5%8A%A8%E7%94%BB%E6%A0%B7%E5%BC%8F%E6%98%AF%5BANIMATE%5D%E7%9A%84%E6%96%87%E6%9C%AC%5BTEXT%5D%22%2C%22_add%20line%20%5BTEXT%5D%22%3A%22%E5%A2%9E%E5%8A%A0%E4%B8%80%E8%A1%8C%E6%96%87%E6%9C%AC%5BTEXT%5D%22%2C%22_align%20text%20to%20%5BALIGN%5D%22%3A%22%E5%B0%86%E6%96%87%E6%9C%AC%E7%9A%84%E5%B1%95%E7%A4%BA%E6%A0%B7%E5%BC%8F%E8%AE%BE%E4%B8%BA%5BALIGN%5D%22%2C%22_animate%20%5BANIMATE%5D%20until%20done%22%3A%22%E6%98%BE%E7%A4%BA%E5%8A%A8%E7%94%BB%E6%A0%B7%E5%BC%8F%5BANIMATE%5D%E5%B9%B6%E7%AD%89%E5%BE%85%22%2C%22_center%22%3A%22%E5%B1%85%E4%B8%AD%22%2C%22_displayed%20text%22%3A%22%E6%98%BE%E7%A4%BA%E7%9A%84%E6%96%87%E6%9C%AC%22%2C%22_is%20animating%3F%22%3A%22%E6%AD%A3%E5%9C%A8%E6%98%BE%E7%A4%BA%E8%89%BA%E6%9C%AF%E5%AD%97%EF%BC%9F%22%2C%22_is%20showing%20text%3F%22%3A%22%E6%96%87%E6%9C%AC%E6%98%BE%E7%A4%BA%E4%BA%86%EF%BC%9F%22%2C%22_left%22%3A%22%E5%B1%85%E5%B7%A6%22%2C%22_rainbow%22%3A%22%E5%BD%A9%E8%99%B9%E8%89%B2%22%2C%22_random%20font%22%3A%22%E9%9A%8F%E6%9C%BA%E5%AD%97%E4%BD%93%22%2C%22_reset%20%5BANIMATE%5D%20duration%22%3A%22%E9%87%8D%E7%BD%AE%E5%8A%A8%E7%94%BB%E6%A0%B7%E5%BC%8F%5BANIMATE%5D%E7%9A%84%E5%AE%8C%E6%88%90%E6%97%B6%E9%97%B4%22%2C%22_reset%20text%20width%22%3A%22%E9%87%8D%E7%BD%AE%E6%96%87%E6%9C%AC%E5%AE%BD%E5%BA%A6%22%2C%22_reset%20typing%20delay%22%3A%22%E9%87%8D%E7%BD%AE%E9%80%90%E5%AD%97%E6%98%BE%E7%A4%BA%E9%80%9F%E5%BA%A6%22%2C%22_right%22%3A%22%E5%B1%85%E5%8F%B3%22%2C%22_set%20%5BANIMATE%5D%20duration%20to%20%5BNUM%5D%20seconds%22%3A%22%E5%B0%86%E5%8A%A8%E7%94%BB%E6%A0%B7%E5%BC%8F%5BANIMATE%5D%E7%9A%84%E5%AE%8C%E6%88%90%E6%97%B6%E9%97%B4%E8%AE%BE%E4%B8%BA%5BNUM%5D%E7%A7%92%22%2C%22_set%20font%20to%20%5BFONT%5D%22%3A%22%E5%B0%86%E5%AD%97%E4%BD%93%E8%AE%BE%E4%B8%BA%5BFONT%5D%22%2C%22_set%20outline%20color%20to%20%5BCOLOR%5D%22%3A%22%E5%B0%86%E8%BD%AE%E5%BB%93%E9%A2%9C%E8%89%B2%E8%AE%BE%E4%B8%BA%5BCOLOR%5D%22%2C%22_set%20outline%20width%20to%20%5BWIDTH%5D%22%3A%22%E5%B0%86%E8%BD%AE%E5%BB%93%E5%A4%A7%E5%B0%8F%E8%AE%BE%E4%B8%BA%5BWIDTH%5D%22%2C%22_set%20shake%20intensity%20to%20%5BNUM%5D%25%22%3A%22%E5%B0%86%E6%8A%96%E5%8A%A8%E5%BC%BA%E5%BA%A6%E8%AE%BE%E4%B8%BA%5BNUM%5D%25%22%2C%22_set%20text%20color%20to%20%5BCOLOR%5D%22%3A%22%E5%B0%86%E6%96%87%E6%9C%AC%E9%A2%9C%E8%89%B2%E8%AE%BE%E4%B8%BA%5BCOLOR%5D%22%2C%22_set%20typing%20delay%20to%20%5BNUM%5D%20seconds%22%3A%22%E5%B0%86%E9%80%90%E5%AD%97%E6%98%BE%E7%A4%BA%E9%80%9F%E5%BA%A6%E8%AE%BE%E4%B8%BA%5BNUM%5D%E7%A7%92%2F%E5%AD%97%22%2C%22_set%20width%20to%20%5BWIDTH%5D%22%3A%22%E5%B0%86%E6%96%87%E6%9C%AC%E7%9A%84%E5%AE%BD%E5%BA%A6%E8%AE%BE%E4%B8%BA%5BWIDTH%5D%22%2C%22_set%20width%20to%20%5BWIDTH%5D%20aligned%20%5BALIGN%5D%22%3A%22%E5%B0%86%E5%AE%BD%E5%BA%A6%E8%AE%BE%E4%B8%BA%5BWIDTH%5D%E6%A0%B7%E5%BC%8F%5BALIGN%5D%22%2C%22_show%20sprite%22%3A%22%E6%98%BE%E7%A4%BA%E8%A7%92%E8%89%B2%22%2C%22_show%20text%20%5BTEXT%5D%22%3A%22%E6%98%BE%E7%A4%BA%E6%96%87%E6%9C%AC%5BTEXT%5D%22%2C%22_start%20%5BANIMATE%5D%20animation%22%3A%22%E6%98%BE%E7%A4%BA%E5%8A%A8%E7%94%BB%E6%A0%B7%E5%BC%8F%5BANIMATE%5D%22%2C%22_text%20%5BATTRIBUTE%5D%22%3A%22%E6%96%87%E6%9C%AC%E7%9A%84%5BATTRIBUTE%5D%22%2C%22_type%22%3A%22%E9%80%90%E5%AD%97%E6%98%BE%E7%A4%BA%22%2C%22_typing%20delay%22%3A%22%E9%80%90%E5%AD%97%E6%98%BE%E7%A4%BA%E9%80%9F%E5%BA%A6%22%2C%22_with%20word%20wrap%22%3A%22%E6%9C%89%E8%87%AA%E5%8A%A8%E6%8D%A2%E8%A1%8C%22%2C%22_without%20word%20wrap%22%3A%22%E4%B8%8D%E6%8D%A2%E8%A1%8C%22%2C%22_zoom%22%3A%22%E7%A7%BB%E5%8A%A8%E5%8A%A8%E7%94%BB%22%2C%22disableCompatibilityMode%22%3A%22%E8%BF%99%E5%B0%86%E4%BC%9A%E5%90%AF%E7%94%A8%E6%96%B0%E7%9A%84%E5%8A%9F%E8%83%BD%EF%BC%8C%E8%BF%99%E4%BA%9B%E7%A7%AF%E6%9C%A8%E6%98%AF%E4%B8%8D%E5%85%BC%E5%AE%B9Scratch%20Lab%E3%80%82%5Cn%5Cn%E6%98%AF%E5%90%A6%E5%90%AF%E7%94%A8%E6%96%B0%E5%8A%9F%E8%83%BD%EF%BC%9F%22%7D%7D)%3B%2F*%20end%20generated%20l10n%20code%20*%2F(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20%2F%2F%20This%20extension%20was%20created%20by%20making%20projects%20with%20https%3A%2F%2Flab.scratch.mit.edu%2Ftext%2F%0A%20%20%2F%2F%20To%20determine%20block%20and%20argument%20IDs%2C%20we%20extracted%20project.json%20and%20examined%20the%20result.%0A%20%20%2F%2F%20To%20determine%20block%20behaviors%20we%20simply%20experiment%20with%20Scratch%20Lab%20and%20made%20sure%20our%0A%20%20%2F%2F%20blocks%20do%20the%20same%20things.%0A%20%20%2F%2F%20This%20extension's%20code%20is%20not%20based%20on%20the%20source%20code%20of%20Scratch%20Lab's.%0A%0A%20%20%2F%2F%20by%20%40LilyMakesThings%0A%20%20const%20blockIconURI%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3B%2C%253Csvg%2520xmlns%253D%2522http%253A%252F%252Fwww.w3.org%252F2000%252Fsvg%2522%2520width%253D%2522284.242%2522%2520height%253D%2522284.242%2522%253E%253Cg%2520fill-rule%253D%2522evenodd%2522%2520stroke-miterlimit%253D%252210%2522%2520data-paper-data%253D%2522%257B%2526quot%253BisPaintingLayer%2526quot%253B%253Atrue%257D%2522%2520style%253D%2522mix-blend-mode%253Anormal%2522%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M188.894%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.48%25209.888a1671.47%25201671.47%25200%25200%25200-4.174%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.83%2520522.83%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.329%2520157.508H225.43l-9.636-26.111h-54.08l-9.636%252026.11h-43.432l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522%252396f%2522%2520stroke%253D%2522%25237240d6%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%252229%2522%2520d%253D%2522M188.894%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.48%25209.888a1671.47%25201671.47%25200%25200%25200-4.174%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.83%2520522.83%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.329%2520157.508H225.43l-9.636-26.111h-54.08l-9.636%252026.11h-43.432l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M188.894%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.48%25209.888a1671.47%25201671.47%25200%25200%25200-4.174%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.302%2520408.302%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.329%2520157.508H225.43l-9.636-26.111h-54.08l-9.636%252026.11h-43.432l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522%2523ffa24d%2522%2520stroke%253D%2522%2523fff%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%25229%2522%2520d%253D%2522M188.894%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.48%25209.888a1671.47%25201671.47%25200%25200%25200-4.174%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.302%2520408.302%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.329%2520157.508H225.43l-9.636-26.111h-54.08l-9.636%252026.11h-43.432l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M143.696%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888a1671.47%25201671.47%25200%25200%25200-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.33%2520157.508h-44.312l-9.637-26.111h-54.08l-9.636%252026.11H63.448l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522%252396f%2522%2520stroke%253D%2522%25237240d6%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%252229%2522%2520d%253D%2522M143.696%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888a1671.47%25201671.47%25200%25200%25200-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.33%2520157.508h-44.312l-9.637-26.111h-54.08l-9.636%252026.11H63.448l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M143.696%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888a1671.47%25201671.47%25200%25200%25200-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.33%2520157.508h-44.312l-9.637-26.111h-54.08l-9.636%252026.11H63.448l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522%2523ff774d%2522%2520stroke%253D%2522%2523fff%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%25229%2522%2520d%253D%2522M143.696%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888a1671.47%25201671.47%25200%25200%25200-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.827%2520522.827%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.519-56.092%252062.33%2520157.508h-44.312l-9.637-26.111h-54.08l-9.636%252026.11H63.448l62.768-157.507Z%2522%252F%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M94.748%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888-1.27%25203.442-2.66%25207.263-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.885%2520522.885%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.52-56.092%252062.328%2520157.508h-44.311l-9.637-26.111h-54.08l-9.635%252026.11H14.5L77.269%252063.368Z%2522%252F%253E%253Cpath%2520fill%253D%2522%252396f%2522%2520stroke%253D%2522%25237240d6%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%252229%2522%2520d%253D%2522M94.748%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888-1.27%25203.442-2.66%25207.263-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.885%2520522.885%25200%25200%25201-4.065-11.242%2520408.343%2520408.343%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.52-56.092%252062.328%2520157.508h-44.311l-9.637-26.111h-54.08l-9.635%252026.11H14.5L77.269%252063.368Z%2522%252F%253E%253Cpath%2520fill%253D%2522none%2522%2520d%253D%2522M94.748%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888-1.27%25203.442-2.66%25207.263-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.885%2520522.885%25200%25200%25201-4.065-11.242%2520408.302%2520408.302%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.52-56.092%252062.328%2520157.508h-44.311l-9.637-26.111h-54.08l-9.635%252026.11H14.5L77.269%252063.368Z%2522%252F%253E%253Cpath%2520fill%253D%2522%2523ff4c4c%2522%2520stroke%253D%2522%2523fff%2522%2520stroke-linejoin%253D%2522round%2522%2520stroke-width%253D%25229%2522%2520d%253D%2522M94.748%2520119.459c-.706%25202.378-1.43%25204.69-2.172%25206.933-1.05%25203.15-2.21%25206.445-3.479%25209.888-1.27%25203.442-2.66%25207.263-4.175%252011.462l-5.73%252015.528h30.833l-5.73-15.528a522.885%2520522.885%25200%25200%25201-4.065-11.242%2520408.302%2520408.302%25200%25200%25201-3.37-10.108%2520350.767%2520350.767%25200%25200%25201-2.112-6.933zm18.52-56.092%252062.328%2520157.508h-44.311l-9.637-26.111h-54.08l-9.635%252026.11H14.5L77.269%252063.368Z%2522%252F%253E%253C%252Fg%253E%253C%252Fsvg%253E%22%3B%0A%0A%20%20const%20CUSTOM_STATE_KEY%20%3D%20Symbol()%3B%0A%0A%20%20const%20ALIGN_LEFT%20%3D%200%3B%0A%20%20const%20ALIGN_RIGHT%20%3D%201%3B%0A%20%20const%20ALIGN_CENTER%20%3D%202%3B%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20renderer%20%3D%20vm.renderer%3B%0A%20%20const%20gl%20%3D%20renderer.gl%3B%0A%0A%20%20let%20compatibilityMode%20%3D%20true%3B%0A%0A%20%20const%20FONTS%20%3D%20%5B%0A%20%20%20%20%22Sans%20Serif%22%2C%0A%20%20%20%20%22Serif%22%2C%0A%20%20%20%20%22Handwriting%22%2C%0A%20%20%20%20%22Marker%22%2C%0A%20%20%20%20%22Curly%22%2C%0A%20%20%20%20%22Pixel%22%2C%0A%20%20%20%20%22Scratch%22%2C%0A%20%20%5D%3B%0A%0A%20%20const%20DEFAULT_COLOR%20%3D%20%22%23575e75%22%3B%0A%20%20const%20DEFAULT_FONT%20%3D%20%22Handwriting%22%3B%0A%20%20const%20DEFAULT_ALIGN%20%3D%20ALIGN_CENTER%3B%0A%20%20const%20DEFAULT_FONT_SIZE%20%3D%2024%3B%0A%20%20const%20DEFAULT_OUTLINE_WIDTH%20%3D%200%3B%20%2F%2F%200%20%3D%20no%20outline%0A%20%20const%20DEFAULT_OUTLINE_COLOR%20%3D%20%22%23000000%22%3B%0A%0A%20%20const%20DEFAULT_TYPE_DELAY%20%3D%201000%20%2F%2015%3B%0A%0A%20%20const%20RAINBOW_TIME_PER%20%3D%201000%3B%0A%20%20const%20DEFAULT_RAINBOW_DURATION%20%3D%202000%3B%0A%0A%20%20const%20DEFAULT_ZOOM_DURATION%20%3D%20500%3B%0A%0A%20%20const%20DEFAULT_SHAKE_INTENSITY%20%3D%20100%3B%0A%20%20const%20DEFAULT_SHAKE_DURATION%20%3D%20500%3B%0A%0A%20%20let%20globalFrameTime%20%3D%200%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40typedef%20TextState%0A%20%20%20*%20%40property%20%7BTextCostumeSkin%7D%20skin%0A%20%20%20*%2F%0A%0A%20%20%2F%2F%20temporary%0A%20%20if%20(!renderer.exports%20%7C%7C%20!renderer.exports.Skin%20%7C%7C%20!vm.exports)%20%7B%0A%20%20%20%20alert(%22VM%20is%20too%20old%20for%20animated%20text%20extension%22)%3B%0A%20%20%20%20throw%20new%20Error(%22VM%20is%20too%20old%22)%3B%0A%20%20%7D%0A%0A%20%20const%20Skin%20%3D%20renderer.exports.Skin%3B%0A%20%20const%20CanvasMeasurementProvider%20%3D%20renderer.exports.CanvasMeasurementProvider%3B%0A%20%20const%20twgl%20%3D%20renderer.exports.twgl%3B%0A%20%20const%20RenderedTarget%20%3D%20vm.exports.RenderedTarget%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7Bnumber%7D%20c%0A%20%20%20*%20%40returns%20%7Bstring%7D%0A%20%20%20*%2F%0A%20%20const%20formatComponent%20%3D%20(c)%20%3D%3E%20Math.round(c).toString(16).padStart(2%2C%20%220%22)%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7B%5Bnumber%2C%20number%2C%20number%5D%7D%20color%0A%20%20%20*%20%40returns%20%7Bstring%7D%0A%20%20%20*%2F%0A%20%20const%20formatColor%20%3D%20(color)%20%3D%3E%0A%20%20%20%20%60%23%24%7BformatComponent(color%5B0%5D)%7D%24%7BformatComponent(color%5B1%5D)%7D%24%7BformatComponent(%0A%20%20%20%20%20%20color%5B2%5D%0A%20%20%20%20)%7D%60%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7Bnumber%7D%20h%20hue%20from%200-1%0A%20%20%20*%20%40param%20%7Bnumber%7D%20s%20saturation%20from%200-1%0A%20%20%20*%20%40param%20%7Bnumber%7D%20v%20value%20from%200-1%0A%20%20%20*%20%40returns%20%7B%5Bnumber%2C%20number%2C%20number%5D%7D%20RGB%20channels%20from%200-255%0A%20%20%20*%2F%0A%20%20const%20hsvToRGB%20%3D%20(h%2C%20s%2C%20v)%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FHSL_and_HSV%0A%20%20%20%20var%20r%2C%20g%2C%20b%3B%0A%20%20%20%20var%20i%20%3D%20Math.floor(h%20*%206)%3B%0A%20%20%20%20var%20f%20%3D%20h%20*%206%20-%20i%3B%0A%20%20%20%20var%20p%20%3D%20v%20*%20(1%20-%20s)%3B%0A%20%20%20%20var%20q%20%3D%20v%20*%20(1%20-%20f%20*%20s)%3B%0A%20%20%20%20var%20t%20%3D%20v%20*%20(1%20-%20(1%20-%20f)%20*%20s)%3B%0A%20%20%20%20switch%20(i%20%25%206)%20%7B%0A%20%20%20%20%20%20case%200%3A%0A%20%20%20%20%20%20%20%20((r%20%3D%20v)%2C%20(g%20%3D%20t)%2C%20(b%20%3D%20p))%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%201%3A%0A%20%20%20%20%20%20%20%20((r%20%3D%20q)%2C%20(g%20%3D%20v)%2C%20(b%20%3D%20p))%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%202%3A%0A%20%20%20%20%20%20%20%20((r%20%3D%20p)%2C%20(g%20%3D%20v)%2C%20(b%20%3D%20t))%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%203%3A%0A%20%20%20%20%20%20%20%20((r%20%3D%20p)%2C%20(g%20%3D%20q)%2C%20(b%20%3D%20v))%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%204%3A%0A%20%20%20%20%20%20%20%20((r%20%3D%20t)%2C%20(g%20%3D%20p)%2C%20(b%20%3D%20v))%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20case%205%3A%0A%20%20%20%20%20%20%20%20((r%20%3D%20v)%2C%20(g%20%3D%20p)%2C%20(b%20%3D%20q))%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20%5B(r%20*%20255)%20%7C%200%2C%20(g%20*%20255)%20%7C%200%2C%20(b%20*%20255)%20%7C%200%5D%3B%0A%20%20%7D%3B%0A%0A%20%20%2F**%0A%20%20%20*%20%40param%20%7BCanvasGradient%7D%20gradient%0A%20%20%20*%20%40param%20%7Bnumber%7D%20offset%20number%20of%20cycles%20to%20offset%20by%0A%20%20%20*%2F%0A%20%20const%20addRainbowStops%20%3D%20(gradient%2C%20offset)%20%3D%3E%20%7B%0A%20%20%20%20const%20NUMBER_STOPS%20%3D%2020%3B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20NUMBER_STOPS%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20const%20exactPosition%20%3D%20i%20%2F%20NUMBER_STOPS%3B%0A%20%20%20%20%20%20let%20offsetPosition%20%3D%20(exactPosition%20-%20offset)%20%25%201%3B%0A%20%20%20%20%20%20if%20(offsetPosition%20%3C%200)%20%7B%0A%20%20%20%20%20%20%20%20offsetPosition%20%2B%3D%201%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20rgb%20%3D%20hsvToRGB(offsetPosition%2C%201%2C%201)%3B%0A%20%20%20%20%20%20gradient.addColorStop(exactPosition%2C%20formatColor(rgb))%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20class%20TextCostumeSkin%20extends%20Skin%20%7B%0A%20%20%20%20constructor(id%2C%20drawable)%20%7B%0A%20%20%20%20%20%20super(id%2C%20renderer)%3B%0A%0A%20%20%20%20%20%20%2F**%20%40type%20%7BRenderWebGL.Drawable%7D%20*%2F%0A%20%20%20%20%20%20this.drawable%20%3D%20drawable%3B%0A%20%20%20%20%20%20%2F**%20%40type%20%7Bnumber%7D%20*%2F%0A%20%20%20%20%20%20this._previousDrawableXScale%20%3D%20100%3B%0A%0A%20%20%20%20%20%20this.canvas%20%3D%20document.createElement(%22canvas%22)%3B%0A%20%20%20%20%20%20this.canvas.width%20%3D%200%3B%0A%20%20%20%20%20%20this.canvas.height%20%3D%200%3B%0A%20%20%20%20%20%20this.ctx%20%3D%20this.canvas.getContext(%222d%22)%3B%0A%0A%20%20%20%20%20%20this.text%20%3D%20%22%22%3B%0A%20%20%20%20%20%20this.color%20%3D%20DEFAULT_COLOR%3B%0A%20%20%20%20%20%20this.textWidth%20%3D%20vm.runtime.stageWidth%3B%0A%20%20%20%20%20%20this.fontFamily%20%3D%20DEFAULT_FONT%3B%0A%20%20%20%20%20%20this.baseFontSize%20%3D%20DEFAULT_FONT_SIZE%3B%0A%20%20%20%20%20%20this.align%20%3D%20DEFAULT_ALIGN%3B%0A%20%20%20%20%20%20this.outlineWidth%20%3D%20DEFAULT_OUTLINE_WIDTH%3B%0A%20%20%20%20%20%20this.outlineColor%20%3D%20DEFAULT_OUTLINE_COLOR%3B%0A%0A%20%20%20%20%20%20%2F**%20%40type%20%7BArray%3C%7Btext%3A%20string%3B%20width%3A%20number%3B%7D%3E%7D%20*%2F%0A%20%20%20%20%20%20this.lines%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%2F**%20%40type%20%7B%5Bnumber%2C%20number%5D%7D%20*%2F%0A%20%20%20%20%20%20this._size%20%3D%20%5B0%2C%200%5D%3B%0A%20%20%20%20%20%20%2F**%20%40type%20%7B%5Bnumber%2C%20number%5D%7D%20*%2F%0A%20%20%20%20%20%20this._rotationCenter%20%3D%20%5B0%2C%200%5D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Updated%20in%20_updateFontDimensions%0A%20%20%20%20%20%20this.calculatedFontSize%20%3D%200%3B%0A%20%20%20%20%20%20this.lineHeight%20%3D%200%3B%0A%20%20%20%20%20%20this.verticalPadding%20%3D%200%3B%0A%20%20%20%20%20%20this.wrapWidth%20%3D%200%3B%0A%0A%20%20%20%20%20%20this._textDirty%20%3D%20false%3B%0A%20%20%20%20%20%20this._textureDirty%20%3D%20false%3B%0A%20%20%20%20%20%20this._renderedAtScale%20%3D%201%3B%0A%20%20%20%20%20%20this._renderTime%20%3D%200%3B%0A%20%20%20%20%20%20this._reflowTime%20%3D%200%3B%0A%0A%20%20%20%20%20%20this.isTyping%20%3D%20false%3B%0A%20%20%20%20%20%20this.typeAnimationInterval%20%3D%20null%3B%0A%20%20%20%20%20%20this.typeDelay%20%3D%20DEFAULT_TYPE_DELAY%3B%0A%0A%20%20%20%20%20%20this.isRainbow%20%3D%20false%3B%0A%20%20%20%20%20%20this.rainbowStartTime%20%3D%200%3B%0A%20%20%20%20%20%20this.rainbowTimeout%20%3D%20null%3B%0A%20%20%20%20%20%20this.rainbowDuration%20%3D%20DEFAULT_RAINBOW_DURATION%3B%0A%0A%20%20%20%20%20%20this.isZooming%20%3D%20false%3B%0A%20%20%20%20%20%20this.zoomStartTime%20%3D%200%3B%0A%20%20%20%20%20%20this.zoomTimeout%20%3D%20null%3B%0A%20%20%20%20%20%20this.zoomDuration%20%3D%20DEFAULT_ZOOM_DURATION%3B%0A%0A%20%20%20%20%20%20this.isShaking%20%3D%20false%3B%0A%20%20%20%20%20%20this.shakeStartTime%20%3D%200%3B%0A%20%20%20%20%20%20this.shakeTimeout%20%3D%20null%3B%0A%20%20%20%20%20%20this.shakeDuration%20%3D%20DEFAULT_SHAKE_DURATION%3B%0A%20%20%20%20%20%20this.shakeIntensity%20%3D%20DEFAULT_SHAKE_INTENSITY%3B%0A%0A%20%20%20%20%20%20%2F**%20%40type%20%7B(()%20%3D%3E%20void)%7Cnull%7D%20*%2F%0A%20%20%20%20%20%20this.resolveOngoingAnimation%20%3D%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Part%20of%20Skin%20API%0A%20%20%20%20dispose()%20%7B%0A%20%20%20%20%20%20if%20(this._texture)%20%7B%0A%20%20%20%20%20%20%20%20gl.deleteTexture(this._texture)%3B%0A%20%20%20%20%20%20%20%20this._texture%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.canvas%20%3D%20null%3B%0A%20%20%20%20%20%20this.ctx%20%3D%20null%3B%0A%20%20%20%20%20%20super.dispose()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Part%20of%20Skin%20API%0A%20%20%20%20get%20size()%20%7B%0A%20%20%20%20%20%20if%20(this._needsReflow())%20%7B%0A%20%20%20%20%20%20%20%20this._reflowText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20this._size%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Part%20of%20Skin%20API%0A%20%20%20%20useNearest()%20%7B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_needsReflow()%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20this._textDirty%20%7C%7C%0A%20%20%20%20%20%20%20%20(this.isZooming%20%26%26%20this._reflowTime%20!%3D%3D%20globalFrameTime)%20%7C%7C%0A%20%20%20%20%20%20%20%20(this.isShaking%20%26%26%20this._reflowTime%20!%3D%3D%20globalFrameTime)%20%7C%7C%0A%20%20%20%20%20%20%20%20this._previousDrawableXScale%20!%3D%3D%20Math.abs(this.drawable.scale%5B0%5D)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_updateFontDimensions()%20%7B%0A%20%20%20%20%20%20this.calculatedFontSize%20%3D%20this.baseFontSize%3B%0A%20%20%20%20%20%20if%20(this.isZooming)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20it%20looks%20like%20Scratch's%20animation%20always%20starts%20at%20least%20a%20little%20visible%0A%20%20%20%20%20%20%20%20const%20time%20%3D%20globalFrameTime%20-%20this.zoomStartTime%3B%0A%20%20%20%20%20%20%20%20const%20progress%20%3D%20Math.max(0%2C%20Math.min(1%2C%20time%20%2F%20this.zoomDuration))%3B%0A%20%20%20%20%20%20%20%20this.calculatedFontSize%20*%3D%20progress%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.lineHeight%20%3D%20(this.baseFontSize%20*%208)%20%2F%207%3B%0A%20%20%20%20%20%20%2F%2F%20Always%20use%20the%20base%20size%20for%20padding.%20This%20makes%20the%20zoom%20animation%20look%20better.%0A%20%20%20%20%20%20this.verticalPadding%20%3D%20this.baseFontSize%20%2F%207%3B%0A%20%20%20%20%20%20%2F%2F%20Only%20use%20horizontal%20scale%20for%20wrap%20width%20for%20compatibility%20with%20stretch%20extension.%0A%20%20%20%20%20%20this.wrapWidth%20%3D%0A%20%20%20%20%20%20%20%20this.textWidth%20%2F%20(Math.abs(this.drawable.scale%5B0%5D)%20%2F%20100)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_getFontStyle()%20%7B%0A%20%20%20%20%20%20return%20%60%24%7Bthis.calculatedFontSize%7Dpx%20%24%7Bthis.fontFamily%7D%2C%20sans-serif%60%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_reflowText()%20%7B%0A%20%20%20%20%20%20this._textDirty%20%3D%20false%3B%0A%20%20%20%20%20%20this._textureDirty%20%3D%20true%3B%0A%20%20%20%20%20%20this._reflowTime%20%3D%20globalFrameTime%3B%0A%20%20%20%20%20%20this._previousDrawableXScale%20%3D%20Math.abs(this.drawable.scale%5B0%5D)%3B%0A%0A%20%20%20%20%20%20this._updateFontDimensions()%3B%0A%20%20%20%20%20%20this.ctx.font%20%3D%20this._getFontStyle()%3B%0A%0A%20%20%20%20%20%20%2F%2F%20need%20to%20make%20new%20ones%20each%20time%20to%20avoid%20caching%20incorrectly%20across%20fonts%0A%20%20%20%20%20%20const%20measurementProvider%20%3D%20new%20CanvasMeasurementProvider(this.ctx)%3B%0A%20%20%20%20%20%20%2F**%20%40type%20%7BRenderWebGL.TextWrapper%7D%20*%2F%0A%20%20%20%20%20%20const%20textWrapper%20%3D%20renderer.createTextWrapper(measurementProvider)%3B%0A%0A%20%20%20%20%20%20const%20lines%20%3D%20textWrapper.wrapText(this.wrapWidth%2C%20this.text)%3B%0A%20%20%20%20%20%20this.lines%20%3D%20lines.map((line)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20trimmed%20%3D%20line.trimEnd()%3B%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20trimmed%2C%0A%20%20%20%20%20%20%20%20%20%20width%3A%20measurementProvider.measureText(trimmed)%2C%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20this._size%5B0%5D%20%3D%20this.wrapWidth%20%2B%202%20*%20this.outlineWidth%3B%0A%20%20%20%20%20%20this._size%5B1%5D%20%3D%0A%20%20%20%20%20%20%20%20this.lines.length%20*%20this.lineHeight%20%2B%0A%20%20%20%20%20%20%20%202%20*%20this.verticalPadding%20%2B%0A%20%20%20%20%20%20%20%202%20*%20this.outlineWidth%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Centered%20horizontally%0A%20%20%20%20%20%20this._rotationCenter%5B0%5D%20%3D%20this._size%5B0%5D%20%2F%202%3B%0A%20%20%20%20%20%20%2F%2F%20Vertical%20center%20is%20roughly%20below%20the%20first%20line%20of%20text%0A%20%20%20%20%20%20this._rotationCenter%5B1%5D%20%3D%0A%20%20%20%20%20%20%20%20this.calculatedFontSize%20*%200.9%20%2B%0A%20%20%20%20%20%20%20%20this.verticalPadding%20%2B%0A%20%20%20%20%20%20%20%20this.outlineWidth%3B%0A%0A%20%20%20%20%20%20if%20(this.isShaking)%20%7B%0A%20%20%20%20%20%20%20%20const%20padding%20%3D%20Math.max(0%2C%20this.shakeIntensity%20%2F%2020)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20offsets%20should%20be%20in%20range%20%5B-padding%2C%20%2Bpadding%5D%0A%20%20%20%20%20%20%20%20this._rotationCenter%5B0%5D%20%2B%3D%202%20*%20Math.random()%20*%20padding%20-%20padding%3B%0A%20%20%20%20%20%20%20%20this._rotationCenter%5B1%5D%20%2B%3D%202%20*%20Math.random()%20*%20padding%20-%20padding%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20_renderAtScale(requestedScale)%20%7B%0A%20%20%20%20%20%20this._renderedAtScale%20%3D%20requestedScale%3B%0A%20%20%20%20%20%20this._textureDirty%20%3D%20false%3B%0A%20%20%20%20%20%20this._renderTime%20%3D%20globalFrameTime%3B%0A%0A%20%20%20%20%20%20const%20scratchWidth%20%3D%20this._size%5B0%5D%3B%0A%20%20%20%20%20%20const%20scratchHeight%20%3D%20this._size%5B1%5D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Renderer's%20requested%20scale%20is%20accounted%20for%20at%20this%20point.%20Do%20not%20touch%20%60requestedScale%60%0A%20%20%20%20%20%20%2F%2F%20ever%20after%20this%20point.%0A%20%20%20%20%20%20this.canvas.width%20%3D%20Math.ceil(scratchWidth%20*%20requestedScale)%3B%0A%20%20%20%20%20%20this.canvas.height%20%3D%20Math.ceil(scratchHeight%20*%20requestedScale)%3B%0A%20%20%20%20%20%20this.ctx.scale(requestedScale%2C%20requestedScale)%3B%0A%0A%20%20%20%20%20%20this.ctx.translate(this.outlineWidth%2C%20this.outlineWidth)%3B%0A%0A%20%20%20%20%20%20const%20rainbowOffset%20%3D%20this.isRainbow%0A%20%20%20%20%20%20%20%20%3F%20(globalFrameTime%20-%20this.rainbowStartTime)%20%2F%20RAINBOW_TIME_PER%0A%20%20%20%20%20%20%20%20%3A%200%3B%0A%20%20%20%20%20%20this.ctx.fillStyle%20%3D%20this.color%3B%0A%20%20%20%20%20%20this.ctx.font%20%3D%20this._getFontStyle()%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.lines.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20line%20%3D%20this.lines%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20const%20text%20%3D%20line.text%3B%0A%20%20%20%20%20%20%20%20const%20lineWidth%20%3D%20line.width%3B%0A%0A%20%20%20%20%20%20%20%20let%20xOffset%3B%0A%20%20%20%20%20%20%20%20const%20yOffset%20%3D%0A%20%20%20%20%20%20%20%20%20%20this.verticalPadding%20%2B%20i%20*%20this.lineHeight%20%2B%20this.baseFontSize%3B%0A%20%20%20%20%20%20%20%20if%20(this.align%20%3D%3D%3D%20ALIGN_LEFT)%20%7B%0A%20%20%20%20%20%20%20%20%20%20xOffset%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(this.align%20%3D%3D%3D%20ALIGN_CENTER)%20%7B%0A%20%20%20%20%20%20%20%20%20%20xOffset%20%3D%20(this.wrapWidth%20-%20lineWidth)%20%2F%202%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20xOffset%20%3D%20this.wrapWidth%20-%20lineWidth%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(this.isRainbow)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20gradient%20%3D%20this.ctx.createLinearGradient(%0A%20%20%20%20%20%20%20%20%20%20%20%20xOffset%2C%0A%20%20%20%20%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20xOffset%20%2B%20lineWidth%2C%0A%20%20%20%20%20%20%20%20%20%20%20%200%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20addRainbowStops(gradient%2C%20rainbowOffset)%3B%0A%20%20%20%20%20%20%20%20%20%20this.ctx.fillStyle%20%3D%20gradient%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20(this.outlineWidth%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.ctx.lineWidth%20%3D%20this.outlineWidth%3B%0A%20%20%20%20%20%20%20%20%20%20this.ctx.strokeStyle%20%3D%20this.outlineColor%3B%0A%20%20%20%20%20%20%20%20%20%20this.ctx.lineCap%20%3D%20%22round%22%3B%0A%20%20%20%20%20%20%20%20%20%20this.ctx.lineJoin%20%3D%20%22round%22%3B%0A%20%20%20%20%20%20%20%20%20%20this.ctx.strokeText(text%2C%20xOffset%2C%20yOffset)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20we're%20still%20a%20few%20pixels%20off%20of%20Scratch%20Lab%0A%20%20%20%20%20%20%20%20this.ctx.fillText(text%2C%20xOffset%2C%20yOffset)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(!this._texture)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20%40ts-expect-error%20-%20twgl%20not%20typed%20yet%0A%20%20%20%20%20%20%20%20this._texture%20%3D%20twgl.createTexture(gl%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20auto%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20wrap%3A%20gl.CLAMP_TO_EDGE%2C%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this._setTexture(this.canvas)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_invalidateTexture()%20%7B%0A%20%20%20%20%20%20this._textureDirty%20%3D%20true%3B%0A%20%20%20%20%20%20this._renderTime%20%3D%200%3B%0A%20%20%20%20%20%20this.emitWasAltered()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_invalidateText()%20%7B%0A%20%20%20%20%20%20this._textDirty%20%3D%20true%3B%0A%20%20%20%20%20%20this._textureDirty%20%3D%20true%3B%0A%20%20%20%20%20%20this._reflowTime%20%3D%200%3B%0A%20%20%20%20%20%20this.emitWasAltered()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setText(text)%20%7B%0A%20%20%20%20%20%20if%20(text%20!%3D%3D%20this.text)%20%7B%0A%20%20%20%20%20%20%20%20this.text%20%3D%20text%3B%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setColor(color)%20%7B%0A%20%20%20%20%20%20if%20(color%20!%3D%3D%20this.color)%20%7B%0A%20%20%20%20%20%20%20%20this.color%20%3D%20color%3B%0A%20%20%20%20%20%20%20%20this._invalidateTexture()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setOutlineColor(color)%20%7B%0A%20%20%20%20%20%20if%20(color%20!%3D%3D%20this.color)%20%7B%0A%20%20%20%20%20%20%20%20this.outlineColor%20%3D%20color%3B%0A%20%20%20%20%20%20%20%20this._invalidateTexture()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setOutlineWidth(width)%20%7B%0A%20%20%20%20%20%20this.outlineWidth%20%3D%20width%3B%0A%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setAlign(align)%20%7B%0A%20%20%20%20%20%20if%20(align%20!%3D%3D%20this.align)%20%7B%0A%20%20%20%20%20%20%20%20this.align%20%3D%20align%3B%0A%20%20%20%20%20%20%20%20this._invalidateTexture()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setWidth(width)%20%7B%0A%20%20%20%20%20%20if%20(width%20!%3D%3D%20this.textWidth)%20%7B%0A%20%20%20%20%20%20%20%20this.textWidth%20%3D%20width%3B%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setFontFamily(font)%20%7B%0A%20%20%20%20%20%20if%20(font%20!%3D%3D%20this.fontFamily)%20%7B%0A%20%20%20%20%20%20%20%20this.fontFamily%20%3D%20font%3B%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getFontFamily()%20%7B%0A%20%20%20%20%20%20return%20this.fontFamily%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getColor()%20%7B%0A%20%20%20%20%20%20return%20this.color%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getWidth()%20%7B%0A%20%20%20%20%20%20return%20this.textWidth%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getOutlineColor()%20%7B%0A%20%20%20%20%20%20return%20this.outlineColor%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getOutlineWidth()%20%7B%0A%20%20%20%20%20%20return%20this.outlineWidth%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getAlign()%20%7B%0A%20%20%20%20%20%20return%20this.align%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_oneAnimationAtATime(newCallback)%20%7B%0A%20%20%20%20%20%20this.cancelAnimation()%3B%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.resolveOngoingAnimation%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.resolveOngoingAnimation%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20newCallback(this.resolveOngoingAnimation)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20startTypeAnimation()%20%7B%0A%20%20%20%20%20%20return%20this._oneAnimationAtATime((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.isTyping%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20const%20originalText%20%3D%20this.text%3B%0A%20%20%20%20%20%20%20%20let%20i%20%3D%201%3B%0A%20%20%20%20%20%20%20%20const%20update%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.setText(originalText.substring(0%2C%20i))%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20update()%3B%0A%0A%20%20%20%20%20%20%20%20this.typeAnimationInterval%20%3D%20setInterval(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20i%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20update()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(i%20%3E%3D%20originalText.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20clearInterval(this.typeAnimationInterval)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.isTyping%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%20this.typeDelay)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setTypeDelay(delay)%20%7B%0A%20%20%20%20%20%20this.typeDelay%20%3D%20delay%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20startRainbowAnimation()%20%7B%0A%20%20%20%20%20%20return%20this._oneAnimationAtATime((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.isRainbow%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.rainbowStartTime%20%3D%20Date.now()%3B%0A%20%20%20%20%20%20%20%20this._invalidateTexture()%3B%0A%20%20%20%20%20%20%20%20this.rainbowTimeout%20%3D%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.isRainbow%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%20%20this._invalidateTexture()%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20this.rainbowDuration)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setRainbowDuration(duration)%20%7B%0A%20%20%20%20%20%20this.rainbowDuration%20%3D%20duration%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20startZoomAnimation()%20%7B%0A%20%20%20%20%20%20return%20this._oneAnimationAtATime((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.isZooming%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.zoomStartTime%20%3D%20Date.now()%3B%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%20%20this.zoomTimeout%20%3D%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.isZooming%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20this.zoomDuration)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setZoomDuration(duration)%20%7B%0A%20%20%20%20%20%20this.zoomDuration%20%3D%20duration%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20startShakeAnimation()%20%7B%0A%20%20%20%20%20%20return%20this._oneAnimationAtATime((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.isShaking%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20this.shakeStartTime%20%3D%20Date.now()%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20_invalidateText()%20is%20not%20smart%20enough%20to%20realize%20that%20we%20don't%20need%20to%20actually%0A%20%20%20%20%20%20%20%20%2F%2F%20do%20a%20full%20reflow%2C%20just%20update%20rotation%20center...%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%20%20this.shakeTimeout%20%3D%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.isShaking%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%20%20%7D%2C%20this.shakeDuration)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setShakeDuration(duration)%20%7B%0A%20%20%20%20%20%20this.shakeDuration%20%3D%20duration%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setShakeIntensity(intensity)%20%7B%0A%20%20%20%20%20%20this.shakeIntensity%20%3D%20intensity%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20cancelAnimation()%20%7B%0A%20%20%20%20%20%20if%20(this.resolveOngoingAnimation)%20%7B%0A%20%20%20%20%20%20%20%20this.resolveOngoingAnimation()%3B%0A%20%20%20%20%20%20%20%20this.resolveOngoingAnimation%20%3D%20null%3B%0A%0A%20%20%20%20%20%20%20%20this.isTyping%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20clearInterval(this.typeAnimationInterval)%3B%0A%0A%20%20%20%20%20%20%20%20this.isRainbow%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20clearTimeout(this.rainbowTimeout)%3B%0A%0A%20%20%20%20%20%20%20%20this.isZooming%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20clearTimeout(this.zoomTimeout)%3B%0A%0A%20%20%20%20%20%20%20%20this.isShaking%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20clearTimeout(this.shakeTimeout)%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20sometimes%20we%20only%20need%20to%20invalidate%20the%20texture%20at%20this%20point%0A%20%20%20%20%20%20%20%20this._invalidateText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Part%20of%20Skin%20API%0A%20%20%20%20updateSilhouette(scale)%20%7B%0A%20%20%20%20%20%20this.getTexture(scale)%3B%0A%20%20%20%20%20%20this._silhouette.unlazy()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Part%20of%20Skin%20API%0A%20%20%20%20getTexture(scale)%20%7B%0A%20%20%20%20%20%20const%20MAX_SCALE%20%3D%2010%3B%0A%20%20%20%20%20%20const%20upperScale%20%3D%20scale%0A%20%20%20%20%20%20%20%20%3F%20Math.max(Math.abs(scale%5B0%5D)%2C%20Math.abs(scale%5B1%5D))%0A%20%20%20%20%20%20%20%20%3A%20100%3B%0A%20%20%20%20%20%20const%20calculatedScale%20%3D%20Math.min(MAX_SCALE%2C%20upperScale%20%2F%20100)%3B%0A%0A%20%20%20%20%20%20if%20(this._needsReflow())%20%7B%0A%20%20%20%20%20%20%20%20this._reflowText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20this._textureDirty%20%7C%7C%0A%20%20%20%20%20%20%20%20(this.isRainbow%20%26%26%20this._renderTime%20!%3D%3D%20globalFrameTime)%20%7C%7C%0A%20%20%20%20%20%20%20%20calculatedScale%20!%3D%3D%20this._renderedAtScale%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20this._renderAtScale(calculatedScale)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20this._texture%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20isMetricsReady()%20%7B%0A%20%20%20%20%20%20if%20(this._needsReflow())%20%7B%0A%20%20%20%20%20%20%20%20this._reflowText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F**%0A%20%20%20*%20Note%20that%20the%20returned%20skin%20is%20only%20usable%20by%20the%20given%20target.%20Things%20will%20break%20if%20another%0A%20%20%20*%20target%20tries%20to%20use%20it.%0A%20%20%20*%20%40param%20%7BVM.Target%7D%20target%0A%20%20%20*%20%40returns%20%7BTextCostumeSkin%7D%0A%20%20%20*%2F%0A%20%20const%20createTextCostumeSkin%20%3D%20(target)%20%3D%3E%20%7B%0A%20%20%20%20const%20drawable%20%3D%20renderer._allDrawables%5Btarget.drawableID%5D%3B%0A%20%20%20%20const%20id%20%3D%20renderer._nextSkinId%2B%2B%3B%0A%20%20%20%20const%20skin%20%3D%20new%20TextCostumeSkin(id%2C%20drawable)%3B%0A%20%20%20%20renderer._allSkins%5Bid%5D%20%3D%20skin%3B%0A%20%20%20%20return%20skin%3B%0A%20%20%7D%3B%0A%0A%20%20vm.runtime.on(%22BEFORE_EXECUTE%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20globalFrameTime%20%3D%20Date.now()%3B%0A%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20renderer._allSkins.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20const%20skin%20%3D%20renderer._allSkins%5Bi%5D%3B%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20skin%20instanceof%20TextCostumeSkin%20%26%26%0A%20%20%20%20%20%20%20%20(skin.isRainbow%20%7C%7C%20skin.isZooming%20%7C%7C%20skin.isShaking)%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20skin.emitWasAltered()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%0A%20%20class%20AnimatedText%20%7B%0A%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20vm.runtime.on(%22PROJECT_START%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this._hideAllText()%3B%0A%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20vm.runtime.on(%22PROJECT_STOP_ALL%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this._hideAllText()%3B%0A%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%2F%2F%20targetWasCreated%20does%20not%20work%20because%20it%20runs%20before%20the%20Drawable%20is%20set%20up%0A%20%20%20%20%20%20const%20extension%20%3D%20this%3B%0A%20%20%20%20%20%20const%20originalMakeClone%20%3D%20RenderedTarget.prototype.makeClone%3B%0A%20%20%20%20%20%20RenderedTarget.prototype.makeClone%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20const%20newClone%20%3D%20originalMakeClone.call(this)%3B%0A%20%20%20%20%20%20%20%20if%20(extension._hasState(this))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20TODO%3A%20creates%20much%20unneeded%20state%0A%20%20%20%20%20%20%20%20%20%20const%20originalSkin%20%3D%20extension._getState(this).skin%3B%0A%20%20%20%20%20%20%20%20%20%20const%20newSkin%20%3D%20extension._getState(newClone).skin%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setAlign(originalSkin.align)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setColor(originalSkin.color)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setFontFamily(originalSkin.fontFamily)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setWidth(originalSkin.textWidth)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setText(originalSkin.text)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setRainbowDuration(originalSkin.rainbowDuration)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setZoomDuration(originalSkin.zoomDuration)%3B%0A%20%20%20%20%20%20%20%20%20%20newSkin.setTypeDelay(originalSkin.typeDelay)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer._allDrawables%5Bthis.drawableID%5D.skin%20instanceof%0A%20%20%20%20%20%20%20%20%20%20%20%20TextCostumeSkin%0A%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20renderer.updateDrawableSkinId(newClone.drawableID%2C%20newSkin.id)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20newClone%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20vm.runtime.on(%22targetWasRemoved%22%2C%20(target)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(this._hasState(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20state%20%3D%20this._getState(target)%3B%0A%20%20%20%20%20%20%20%20%20%20renderer.destroySkin(state.skin.id)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%22Animated%20Text%22)%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%239966FF%22%2C%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20blockIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setText%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22show%20text%20%5BTEXT%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TEXT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22Welcome%20to%20my%20project!%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22animateText%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BANIMATE%5D%20text%20%5BTEXT%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANIMATE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22animate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22rainbow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TEXT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22Here%20we%20go!%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22animateTextInput%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22animateText%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BANIMATE%5D%20text%20%5BTEXT%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANIMATE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22twAnimate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22rainbow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TEXT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22Here%20we%20go!%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22clearText%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22show%20sprite%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setFont%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20font%20to%20%5BFONT%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FONT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22font%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setFontInput%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22setFont%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20font%20to%20%5BFONT%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FONT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22twFont%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setColor%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20text%20color%20to%20%5BCOLOR%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setWidth%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20width%20to%20%5BWIDTH%5D%20aligned%20%5BALIGN%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WIDTH%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22200%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ALIGN%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22align%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setWidthInput%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22setWidth%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20width%20to%20%5BWIDTH%5D%20aligned%20%5BALIGN%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WIDTH%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22200%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ALIGN%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22twAlign%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%2F**%0A%20%20%20%20%20%20%20%20%20%20%20*%20Contributors%3A%0A%20%20%20%20%20%20%20%20%20%20%20*%20-%20LilyMakesThings%0A%20%20%20%20%20%20%20%20%20%20%20*%2F%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22disableCompatibilityMode%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BUTTON%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22Enable%20Non-Scratch%20Lab%20Features%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20!compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.LABEL%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22Incompatible%20with%20Scratch%20Lab%3A%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setOutlineWidth%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20outline%20width%20to%20%5BWIDTH%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WIDTH%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%223%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setOutlineColor%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20outline%20color%20to%20%5BCOLOR%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.COLOR%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22addLine%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22add%20line%20%5BTEXT%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TEXT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22Hello!%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getLines%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%23%20of%20lines%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getLinesV2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22%23%20of%20lines%20%5BWITH_WORD_WRAP%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22%5BWITH_WORD_WRAP%5D%20is%20a%20menu%20with%20choices%20'with%20word%20wrap'%20and%20'without%20word%20wrap'%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WITH_WORD_WRAP%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22twWordWrap%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setAlignment%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22align%20text%20to%20%5BALIGN%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ALIGN%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22twAlign%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20why%20is%20the%20other%20block%20called%20%22setWidth%22%20%3A(%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setWidthValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20width%20to%20%5BWIDTH%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WIDTH%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22resetWidth%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22reset%20text%20width%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22startAnimate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22start%20%5BANIMATE%5D%20animation%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANIMATE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22twAnimate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22rainbow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22animateUntilDone%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22animate%20%5BANIMATE%5D%20until%20done%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANIMATE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22twAnimate%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22rainbow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22isAnimating%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22is%20animating%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setAnimateDuration%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20%5BANIMATE%5D%20duration%20to%20%5BNUM%5D%20seconds%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANIMATE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22twAnimateDuration%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22rainbow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%203%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22resetAnimateDuration%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22reset%20%5BANIMATE%5D%20duration%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANIMATE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22twAnimateDuration%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22rainbow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getAnimateDuration%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BANIMATE%5D%20duration%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ANIMATE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22twAnimateDuration%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22rainbow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setShakeIntensity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20shake%20intensity%20to%20%5BNUM%5D%25%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setTypeDelay%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20typing%20delay%20to%20%5BNUM%5D%20seconds%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200.1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22resetTypeDelay%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22reset%20typing%20delay%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getTypeDelay%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22typing%20delay%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22textActive%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22is%20showing%20text%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getDisplayedText%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22displayed%20text%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getTextAttribute%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22text%20%5BATTRIBUTE%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ATTRIBUTE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22attribute%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20compatibilityMode%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20These%20all%20need%20acceptReporters%3A%20false%20for%20parity%20with%20the%20Scratch%20Labs%20version.%0A%20%20%20%20%20%20%20%20%20%20animate%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22type%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22type%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22rainbow%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22rainbow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22zoom%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22zoom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20font%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%22getFonts%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20align%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22left%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22left%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22center%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22center%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22right%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22right%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20attribute%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22font%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22color%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22width%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22outline%20color%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22outline%20width%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22alignment%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20TurboWarp%20menus%20(acceptReporters%3A%20true)%0A%20%20%20%20%20%20%20%20%20%20twAnimate%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22type%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22type%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22rainbow%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22rainbow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22zoom%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22zoom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22shake%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20twAnimateDuration%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22rainbow%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22rainbow%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22zoom%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22zoom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22shake%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20twAlign%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22left%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22left%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22center%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22center%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22right%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22right%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20twFont%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%22getFonts%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20twWordWrap%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22with%20word%20wrap%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22with%20word%20wrap%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22without%20word%20wrap%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22without%20word%20wrap%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getFonts()%20%7B%0A%20%20%20%20%20%20const%20customFonts%20%3D%20this._getFontsMap()%3B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20...FONTS%2C%0A%20%20%20%20%20%20%20%20...customFonts%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22random%20font%22)%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20%22Random%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_getFontsMap()%20%7B%0A%20%20%20%20%20%20return%20Scratch.vm.runtime.fontManager%0A%20%20%20%20%20%20%20%20%3F%20Scratch.vm.runtime.fontManager.getFonts().map((i)%20%3D%3E%20(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20i.name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20i.family%2C%0A%20%20%20%20%20%20%20%20%20%20%7D))%0A%20%20%20%20%20%20%20%20%3A%20%5B%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7BVM.Target%7D%20target%0A%20%20%20%20%20*%20%40returns%20%7BTextState%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20_getState(target)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20target%5BCUSTOM_STATE_KEY%5D%3B%0A%20%20%20%20%20%20if%20(!state)%20%7B%0A%20%20%20%20%20%20%20%20%2F**%20%40type%20%7BTextState%7D%20*%2F%0A%20%20%20%20%20%20%20%20const%20newState%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20skin%3A%20createTextCostumeSkin(target)%2C%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20target%5BCUSTOM_STATE_KEY%5D%20%3D%20newState%3B%0A%20%20%20%20%20%20%20%20return%20newState%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20state%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7BVM.Target%7D%20target%0A%20%20%20%20%20*%20%40returns%20%7Bboolean%7D%0A%20%20%20%20%20*%2F%0A%20%20%20%20_hasState(target)%20%7B%0A%20%20%20%20%20%20return%20!!target%5BCUSTOM_STATE_KEY%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_hideAllText()%20%7B%0A%20%20%20%20%20%20for%20(const%20target%20of%20vm.runtime.targets)%20%7B%0A%20%20%20%20%20%20%20%20if%20(this._hasState(target))%20%7B%0A%20%20%20%20%20%20%20%20%20%20this._hideText(target%2C%20this._getState(target))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7BVM.Target%7D%20target%0A%20%20%20%20%20*%20%40param%20%7BTextState%7D%20state%0A%20%20%20%20%20*%2F%0A%20%20%20%20_renderText(target%2C%20state)%20%7B%0A%20%20%20%20%20%20state.skin.cancelAnimation()%3B%0A%20%20%20%20%20%20renderer.updateDrawableSkinId(target.drawableID%2C%20state.skin.id)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%40param%20%7BVM.Target%7D%20target%0A%20%20%20%20%20*%20%40param%20%7BTextState%7D%20state%0A%20%20%20%20%20*%2F%0A%20%20%20%20_hideText(target%2C%20state)%20%7B%0A%20%20%20%20%20%20state.skin.cancelAnimation()%3B%0A%20%20%20%20%20%20target.setCostume(target.currentCostume)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setText(%7B%20TEXT%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20this._renderText(util.target%2C%20state)%3B%0A%20%20%20%20%20%20state.skin.setText(Scratch.Cast.toString(TEXT))%3B%0A%20%20%20%20%20%20%2F%2F%20Scratch%20forces%201%20frame%20delay%20by%20returning%20promise.%20I%20think%20that's%20silly.%0A%20%20%20%20%20%20util.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20animateText(%7B%20ANIMATE%2C%20TEXT%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20this._renderText(util.target%2C%20state)%3B%0A%0A%20%20%20%20%20%20state.skin.setText(Scratch.Cast.toString(TEXT))%3B%0A%20%20%20%20%20%20state.skin.cancelAnimation()%3B%0A%0A%20%20%20%20%20%20if%20(ANIMATE%20%3D%3D%3D%20%22type%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startTypeAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(ANIMATE%20%3D%3D%3D%20%22rainbow%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startRainbowAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(ANIMATE%20%3D%3D%3D%20%22zoom%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startZoomAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(ANIMATE%20%3D%3D%3D%20%22shake%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startShakeAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Scratch%20does%20nothing%20here%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20clearText(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(this._hasState(util.target))%20%7B%0A%20%20%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20%20%20this._hideText(util.target%2C%20state)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%20Scratch%20forces%201%20frame%20delay%20by%20returning%20promise.%20I%20think%20that's%20silly.%0A%20%20%20%20%20%20util.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setFont(%7B%20FONT%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20font%20%3D%20Scratch.Cast.toString(FONT)%3B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%0A%20%20%20%20%20%20if%20(font%20%3D%3D%3D%20%22Random%22)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Random%20font%20always%20switches%20to%20a%20new%20font%2C%20never%20the%20same%20one%0A%20%20%20%20%20%20%20%20const%20possibleFonts%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20...FONTS%2C%0A%20%20%20%20%20%20%20%20%20%20...this._getFontsMap().map((i)%20%3D%3E%20i.value)%2C%0A%20%20%20%20%20%20%20%20%5D.filter((i)%20%3D%3E%20i%20!%3D%3D%20state.skin.fontFamily)%3B%0A%20%20%20%20%20%20%20%20state.skin.setFontFamily(%0A%20%20%20%20%20%20%20%20%20%20possibleFonts%5BMath.floor(Math.random()%20*%20possibleFonts.length)%5D%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setFontFamily(font)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setColor(%7B%20COLOR%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20state.skin.setColor(Scratch.Cast.toString(COLOR))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setWidth(%7B%20WIDTH%2C%20ALIGN%20%7D%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%0A%20%20%20%20%20%20if%20(ALIGN%20%3D%3D%3D%20%22center%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setAlign(ALIGN_CENTER)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(ALIGN%20%3D%3D%3D%20%22right%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setAlign(ALIGN_RIGHT)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Scratch%20treats%20unknown%20values%20as%20left%20alignment.%0A%20%20%20%20%20%20%20%20state.skin.setAlign(ALIGN_LEFT)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20state.skin.setWidth(Scratch.Cast.toNumber(WIDTH))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F*%0A%20%20%20%20%20*%20Extra%20blocks%2C%20not%20compatible%20with%20Scratch%3A%0A%20%20%20%20%20*%2F%0A%0A%20%20%20%20disableCompatibilityMode()%20%7B%0A%20%20%20%20%20%20const%20popup%20%3D%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22disableCompatibilityMode%22%2C%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%22This%20will%20enable%20new%20blocks%20and%20features%20that%20WILL%20NOT%20WORK%20in%20the%20official%20Scratch%20Lab.%5Cn%5CnDo%20you%20wish%20to%20continue%3F%22%2C%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20if%20(confirm(popup))%20%7B%0A%20%20%20%20%20%20%20%20compatibilityMode%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20Scratch.vm.extensionManager.refreshBlocks()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setOutlineWidth(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20const%20width%20%3D%20Scratch.Cast.toNumber(args.WIDTH)%3B%0A%0A%20%20%20%20%20%20state.skin.setOutlineWidth(width)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setOutlineColor(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20const%20color%20%3D%20Scratch.Cast.toString(args.COLOR)%3B%0A%0A%20%20%20%20%20%20state.skin.setOutlineColor(color)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20addLine(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20this._renderText(util.target%2C%20state)%3B%0A%0A%20%20%20%20%20%20const%20originalText%20%3D%20state.skin.text%3B%0A%20%20%20%20%20%20const%20addingText%20%3D%20Scratch.Cast.toString(args.TEXT)%3B%0A%20%20%20%20%20%20state.skin.setText(%0A%20%20%20%20%20%20%20%20originalText%20%3F%20%60%24%7BoriginalText%7D%5Cn%24%7BaddingText%7D%60%20%3A%20addingText%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20util.runtime.requestRedraw()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getLines(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20drawableID%20%3D%20util.target.drawableID%3B%0A%20%20%20%20%20%20const%20skin%20%3D%20renderer._allDrawables%5BdrawableID%5D.skin%3B%0A%20%20%20%20%20%20if%20(!(skin%20instanceof%20TextCostumeSkin))%20return%200%3B%0A%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20const%20text%20%3D%20state.skin.text%3B%0A%20%20%20%20%20%20return%20text.split(%22%5Cn%22).length%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getLinesV2(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20drawableID%20%3D%20util.target.drawableID%3B%0A%20%20%20%20%20%20const%20skin%20%3D%20renderer._allDrawables%5BdrawableID%5D.skin%3B%0A%20%20%20%20%20%20if%20(!(skin%20instanceof%20TextCostumeSkin))%20return%200%3B%0A%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20if%20(Scratch.Cast.toString(args.WITH_WORD_WRAP)%20%3D%3D%3D%20%22with%20word%20wrap%22)%20%7B%0A%20%20%20%20%20%20%20%20if%20(state.skin._needsReflow())%20%7B%0A%20%20%20%20%20%20%20%20%20%20state.skin._reflowText()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20state.skin.lines.length%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20state.skin.text.split(%22%5Cn%22).length%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setAlignment(args%2C%20util)%20%7B%0A%20%20%20%20%20%20%2F%2F%20see%20setWidth%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20if%20(args.ALIGN%20%3D%3D%3D%20%22center%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setAlign(ALIGN_CENTER)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(args.ALIGN%20%3D%3D%3D%20%22right%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setAlign(ALIGN_RIGHT)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setAlign(ALIGN_LEFT)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setWidthValue(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20state.skin.setWidth(Scratch.Cast.toNumber(args.WIDTH))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20resetWidth(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20state.skin.setWidth(vm.runtime.stageWidth)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20startAnimate(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20drawableID%20%3D%20util.target.drawableID%3B%0A%20%20%20%20%20%20const%20skin%20%3D%20renderer._allDrawables%5BdrawableID%5D.skin%3B%0A%20%20%20%20%20%20if%20(!(skin%20instanceof%20TextCostumeSkin))%20return%3B%0A%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20state.skin.cancelAnimation()%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Don't%20return%20the%20promise%0A%20%20%20%20%20%20if%20(args.ANIMATE%20%3D%3D%20%22type%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.startTypeAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(args.ANIMATE%20%3D%3D%20%22rainbow%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.startRainbowAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(args.ANIMATE%20%3D%3D%20%22zoom%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.startZoomAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(args.ANIMATE%20%3D%3D%20%22shake%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.startShakeAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Scratch%20does%20nothing%20here%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20animateUntilDone(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20drawableID%20%3D%20util.target.drawableID%3B%0A%20%20%20%20%20%20const%20skin%20%3D%20renderer._allDrawables%5BdrawableID%5D.skin%3B%0A%20%20%20%20%20%20if%20(!(skin%20instanceof%20TextCostumeSkin))%20return%3B%0A%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20state.skin.cancelAnimation()%3B%0A%0A%20%20%20%20%20%20if%20(args.ANIMATE%20%3D%3D%20%22type%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startTypeAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(args.ANIMATE%20%3D%3D%20%22rainbow%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startRainbowAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(args.ANIMATE%20%3D%3D%20%22zoom%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startZoomAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(args.ANIMATE%20%3D%3D%20%22shake%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.startShakeAnimation()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Scratch%20does%20nothing%20here%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20isAnimating(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20skin%20%3D%20this._getState(util.target).skin%3B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20skin.isTyping%20%7C%7C%20skin.isRainbow%20%7C%7C%20skin.isZooming%20%7C%7C%20skin.isShaking%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setAnimateDuration(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20const%20animation%20%3D%20args.ANIMATE%3B%0A%20%20%20%20%20%20const%20milliseconds%20%3D%20Scratch.Cast.toNumber(args.NUM)%20*%201000%3B%0A%20%20%20%20%20%20if%20(animation%20%3D%3D%3D%20%22rainbow%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setRainbowDuration(milliseconds)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(animation%20%3D%3D%3D%20%22zoom%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setZoomDuration(milliseconds)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(animation%20%3D%3D%3D%20%22shake%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setShakeDuration(milliseconds)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20resetAnimateDuration(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20const%20animation%20%3D%20args.ANIMATE%3B%0A%20%20%20%20%20%20if%20(animation%20%3D%3D%3D%20%22rainbow%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setRainbowDuration(DEFAULT_RAINBOW_DURATION)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(animation%20%3D%3D%3D%20%22zoom%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setZoomDuration(DEFAULT_ZOOM_DURATION)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(animation%20%3D%3D%3D%20%22shake%22)%20%7B%0A%20%20%20%20%20%20%20%20state.skin.setShakeDuration(DEFAULT_SHAKE_DURATION)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getAnimateDuration(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20const%20animation%20%3D%20args.ANIMATE%3B%0A%20%20%20%20%20%20if%20(animation%20%3D%3D%3D%20%22rainbow%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.rainbowDuration%20%2F%201000%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(animation%20%3D%3D%3D%20%22zoom%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.zoomDuration%20%2F%201000%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(animation%20%3D%3D%3D%20%22shake%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.shakeDuration%20%2F%201000%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20should%20never%20happen%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setShakeIntensity(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20state.skin.setShakeIntensity(Scratch.Cast.toNumber(args.NUM))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setTypeDelay(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20state.skin.setTypeDelay(Scratch.Cast.toNumber(args.NUM)%20*%201000)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20resetTypeDelay(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20state.skin.setTypeDelay(DEFAULT_TYPE_DELAY)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getTypeDelay(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20%2F%2F%20TODO%3A%20Should%20we%20round%20this%3F%0A%20%20%20%20%20%20return%20state.skin.typeDelay%20%2F%201000%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20textActive(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20drawableID%20%3D%20util.target.drawableID%3B%0A%20%20%20%20%20%20const%20skin%20%3D%20renderer._allDrawables%5BdrawableID%5D.skin%3B%0A%20%20%20%20%20%20return%20skin%20instanceof%20TextCostumeSkin%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getDisplayedText(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20return%20state.skin.text%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getTextAttribute(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20state%20%3D%20this._getState(util.target)%3B%0A%20%20%20%20%20%20const%20attrib%20%3D%20args.ATTRIBUTE%3B%0A%20%20%20%20%20%20if%20(attrib%20%3D%3D%3D%20%22font%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.getFontFamily()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attrib%20%3D%3D%3D%20%22color%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.getColor()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attrib%20%3D%3D%3D%20%22width%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.getWidth()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attrib%20%3D%3D%3D%20%22outline%20color%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.getOutlineColor()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attrib%20%3D%3D%3D%20%22outline%20width%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20state.skin.getOutlineWidth()%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(attrib%20%3D%3D%3D%20%22alignment%22)%20%7B%0A%20%20%20%20%20%20%20%20switch%20(state.skin.getAlign())%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%20ALIGN_LEFT%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22left%22%3B%0A%20%20%20%20%20%20%20%20%20%20case%20ALIGN_RIGHT%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22right%22%3B%0A%20%20%20%20%20%20%20%20%20%20case%20ALIGN_CENTER%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22center%22%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20should%20never%20happen%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20AnimatedText())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Boxed%20Physics%0A%2F%2F%20ID%3A%20P7BoxPhys%0A%2F%2F%20Description%3A%20An%20implementation%20the%20Box2D%20physics%20engine%20with%20support%20for%20joints%2C%20springs%2C%20sliders%2C%20and%20more.%0A%2F%2F%20By%3A%20pooiod7%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2Fpooiod7%2F%3E%0A%2F%2F%20Original%3A%20Griffpatch%0A%2F%2F%20License%3A%20zlib%0A%0A%2F%2F%20Report%20issues%20with%20this%20extension%20at%20https%3A%2F%2Fp7scratchextensions.pages.dev%2Freportissue%0A%2F*%20This%20extension%20was%20originally%20a%20port%20of%20the%20Box2D%20Physics%20extension%20for%20ScratchX%20by%20Griffpatch%2C%20%0Abut%20has%20since%20deviated%20to%20be%20its%20own%20thing.%20(made%20with%20box2D%20js%20es6)%20*%2F%0A%0A(function(Scratch)%20%7B%0A%09'use%20strict'%3B%0A%0A%09var%20b2Dupdated%20%3D%20%2206%2F09%2F2025%22%3B%0A%09var%20publishedUpdateIndex%20%3D%2025%3B%0A%0A%09if%20(!Scratch.extensions.unsandboxed)%20%7B%0A%09%09throw%20new%20Error('Boxed%20Physics%20can%5C't%20run%20in%20the%20sandbox')%3B%0A%09%7D%0A%0A%09var%20b2Vec2%2C%20b2AABB%2C%20b2BodyDef%2C%20b2Body%2C%20b2FixtureDef%2C%20b2Fixture%2C%20b2World%2C%20b2MassData%2C%20b2PolygonShape%2C%20b2CircleShape%2C%20b2DebugDraw%2C%20b2MouseJointDef%3B%0A%09var%20b2Dworld%2C%20fixDef%3B%20var%20mousePVec%2C%20selectedBody%2C%20prb2djaxisX%2C%20prb2djaxisY%2C%20prb2djl%2C%20prb2dju%3B%0A%09var%20b2Dzoom%20%3D%2050%3B%20var%20b2Math%3B%0A%0A%09var%20physdebugmode%20%3D%20false%3B%0A%09var%20wipblocks%20%3D%20physdebugmode%3B%0A%09var%20legacymode%20%3D%20false%3B%0A%0A%09var%20positerations%20%3D%2010%3B%0A%09var%20veliterations%20%3D%2010%3B%0A%0A%09var%20defSpring%20%3D%20%7B%20len%3A%20100%2C%20damp%3A%200.7%2C%20freq%3A%205%20%7D%3B%0A%0A%09var%20bodyDef%3B%0A%0A%09var%20uid_seq%20%3D%200%3B%20var%20ujid_seq%20%3D%200%3B%0A%09var%20categorySeq%20%3D%200%3B%0A%0A%09var%20bodies%20%3D%20%7B%7D%3B%0A%09var%20joints%20%3D%20%7B%7D%3B%0A%0A%09var%20bodyCategoryBits%20%3D%201%3B%0A%09var%20bodyMaskBits%20%3D%201%3B%0A%09var%20noCollideSeq%20%3D%20682%3B%0A%0A%09const%20toRad%20%3D%20Math.PI%20%2F%20180%3B%0A%0A%09var%20simspeed%20%3D%200%3B%0A%0A%09const%20menuIconURI%20%3D%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiDQoJIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOmE9Imh0dHA6Ly9ucy5hZG9iZS5jb20vQWRvYmVTVkdWaWV3ZXJFeHRlbnNpb25zLzMuMC8iDQoJIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNDBweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSItMy43IC0zLjcgNDAgNDAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgLTMuNyAtMy43IDQwIDQwIg0KCSB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxkZWZzPg0KPC9kZWZzPg0KPHJlY3QgeD0iOC45IiB5PSIxLjUiIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzE2OUZCMCIgc3Ryb2tlLXdpZHRoPSIzIiB3aWR0aD0iMTQuOCIgaGVpZ2h0PSIxNC44Ii8%2BDQo8cmVjdCB4PSIxLjUiIHk9IjE2LjMiIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzE2OUZCMCIgc3Ryb2tlLXdpZHRoPSIzIiB3aWR0aD0iMTQuOCIgaGVpZ2h0PSIxNC44Ii8%2BDQo8cmVjdCB4PSIxNi4zIiB5PSIxNi4zIiBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiMxNjlGQjAiIHN0cm9rZS13aWR0aD0iMyIgd2lkdGg9IjE0LjgiIGhlaWdodD0iMTQuOCIvPg0KPC9zdmc%2B%22%3B%0A%0A%09class%20BoxedPhys%20%7B%0A%09%09constructor()%20%7B%0A%09%09%09this.vm%20%3D%20Scratch.vm%3B%0A%09%09%09this.runtime%20%3D%20this.vm.runtime%0A%0A%09%09%09this.isFromPenguinMod%20%3D%20true%3B%0A%09%09%09this.onPenguinMod%20%3D%20Scratch.extensions.isPenguinMod%3B%0A%0A%09%09%09this.origin%20%3D%20%22https%3A%2F%2Fp7scratchextensions.pages.dev%2F%23%2FBoxedPhysics%22%3B%0A%09%09%09this.docs%20%3D%20'https%3A%2F%2Fp7scratchextensions.pages.dev%2Fdocs%2F%23%2FBoxedPhysics'%3B%0A%0A%09%09%09this.scraping%20%3D%20%5B%5D%3B%0A%09%09%09this.impacts%20%3D%20%5B%5D%3B%0A%09%09%09%0A%09%09%09this.vm.runtime.on('PROJECT_LOADED'%2C%20()%20%3D%3E%20%7B%0A%09%09%09%09this.physoptions(%7B%20%22CONPHYS%22%3A%20true%2C%20%22WARMSTART%22%3A%20true%2C%20%22POS%22%3A%2010%2C%20%22VEL%22%3A%2010%20%7D)%3B%0A%09%09%09%7D)%3B%0A%09%09%09this.vm.runtime.on('PROJECT_STOP'%2C%20()%20%3D%3E%20%7B%0A%09%09%09%09this.init(%7B%20%22SCALE%22%3A%20b2Dzoom%2C%20%22GRAVITY%22%3A%20-10%2C%20%22SCENE%22%3A%20%22stage%22%20%7D)%3B%0A%09%09%09%7D)%3B%0A%09%09%09this.%20vm.runtime.on('PROJECT_START'%2C%20()%20%3D%3E%20%7B%0A%09%09%09%09this.init(%7B%20%22SCALE%22%3A%20b2Dzoom%2C%20%22GRAVITY%22%3A%20-10%2C%20%22SCENE%22%3A%20%22stage%22%20%7D)%3B%0A%09%09%09%7D)%3B%0A%09%09%09this.init(%7B%20%22SCALE%22%3A%20b2Dzoom%2C%20%22GRAVITY%22%3A%20-10%2C%20%22SCENE%22%3A%20%22stage%22%20%7D)%3B%0A%09%09%7D%0A%09%09getInfo()%20%7B%0A%09%09%09return%20%7B%0A%09%09%09%09id%3A%20'P7BoxPhys'%2C%0A%09%09%09%09name%3A%20physdebugmode%20%7C%7C%20wipblocks%20%3F%20'Boxed%20Physics%20(debug)'%20%3A%20'Boxed%20Physics'%2C%0A%09%09%09%09color1%3A%20physdebugmode%20%7C%7C%20wipblocks%20%3F%20%22%234b4a60%22%20%3A%20%22%232cb0c0%22%2C%0A%09%09%09%09color2%3A%20physdebugmode%20%7C%7C%20wipblocks%20%3F%20%22%23383747%22%20%3A%20%22%234eb88a%22%2C%0A%09%09%09%09menuIconURI%3A%20menuIconURI%2C%0A%09%09%09%09docsURI%3A%20this.docs%2C%0A%09%09%09%09blocks%3A%20%5B%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'get_debug'%2C%0A%09%09%09%09%09%09hideFromPalette%3A%20!physdebugmode%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%09%09%09%09%09%09text%3A%20'Get%20debug%20%5BVAL%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09VAL%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20%22version%22%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%0A%09%09%09%09%09%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Define%20objects%22%20%7D%2C%20%2F%2F%20----%20Define%20objects%20---%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'setBodyAttrs'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Define%20base%2C%20Type%3A%20%5BBODYTYPE%5D%20Density%3A%20%5BDENSITY%5D%20Friction%3A%20%5BFRICTION%5D%20Bounce%3A%20%5BBOUNCE%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09BODYTYPE%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09menu%3A%20'BodyTypePK'%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'dynamic'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09DENSITY%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%201.0%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09FRICTION%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200.5%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09BOUNCE%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200.2%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'defineCircle'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Define%20Circle%2C%20Size%3A%20%5BSIZE%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09SIZE%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20100%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'defineRect'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Define%20Box%2C%20Width%3A%20%5BWIDTH%5D%20Height%3A%20%5BHEIGHT%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09WIDTH%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20100%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09HEIGHT%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20100%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'definePoly'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Define%20polygon%2C%20Points%3A%20%5BPOINTS%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09POINTS%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20%220%2050%20%20%2040%20-50%20%20%20-40%20-50%22%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'difineCostume'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09filter%3A%20%5BScratch.TargetType.SPRITE%5D%2C%0A%09%09%09%09%09%09text%3A%20'Define%20polygon%20as%20this%20costume'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09TYPE%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09menu%3A%20'costumeType'%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'placeBody'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Make%20object%20%5BNAME%5D%20at%20X%3A%20%5BX%5D%20%20y%3A%20%5BY%5D%20%20Dir%3A%20%5BDIR%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09NAME%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Object'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09X%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09Y%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09DIR%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%2090%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'ispoly'%2C%0A%09%09%09%09%09%09hideFromPalette%3A%20!wipblocks%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%09%09%09%09%09%09text%3A%20'Is%20%5BPOINTS%5D%20a%20polygon%3F'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09POINTS%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20%220%2050%20%20%2040%20-50%20%20%20-40%20-50%22%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%0A%09%09%09%09%09%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Modify%20objects%22%20%7D%2C%20%2F%2F%20----%20Modify%20objects%20---%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'destroyBody'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Destroy%20object%20%5BNAME%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09NAME%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Object'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%20%2F%2F%20I%20know%20this%20opcode%20is%20spelled%20wrong%0A%09%09%09%09%09%09opcode%3A%20'destroyBodys'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Destroy%20every%20object'%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'setObjectLayer'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Set%20object%20%5BNAME%5D%20to%20be%20on%20collision%20layer%20%5BLAYERS%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09LAYERS%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'1'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09NAME%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Object'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'setBodyAttr'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Set%20%5BBODYATTR%5D%20of%20object%20%5BNAME%5D%20to%20%5BVALUE%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09BODYATTR%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09menu%3A%20'bodyAttr'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09NAME%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Object'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09VALUE%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200.1%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'applyForceToBody'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Apply%20%5BFORCETYPE%5D%20to%20object%20%5BNAME%5D%20at%20X%3A%20%5BX%5D%20Y%3A%20%5BY%5D%20with%20power%20%5BPOWER%5D%20in%20direction%20%5BDIR%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09FORCETYPE%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09menu%3A%20'ForceType'%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Impulse'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09NAME%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Object'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09X%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09Y%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09POWER%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%2050%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09DIR%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%2090%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'applyAngForceToBody'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Apply%20Angular%20Impulse%20to%20object%20%5BNAME%5D%20power%3A%20%5BPOWER%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09ANGFORCETYPE%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09menu%3A%20'AngForceType'%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Impulse'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09NAME%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Object'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09POWER%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'changevel'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Set%20Velocity%20of%20object%20%5BNAME%5D%20to%20X%3A%20%5BX%5D%20Y%3A%20%5BY%5D%20Dir%3A%20%5BDIR%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09X%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09Y%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09DIR%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09NAME%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20%22Object%22%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'moveto'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Move%20object%20%5BNAME%5D%20to%20X%3A%20%5BX%5D%20Y%3A%20%5BY%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09X%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09Y%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09NAME%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20%22Object%22%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'rotateto'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Set%20rotation%20of%20object%20%5BNAME%5D%20to%20%5BROT%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09ROT%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%2090%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09NAME%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20%22Object%22%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'clearvel'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Clear%20velocity%20of%20object%20%5BNAME%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09NAME%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20%22Object%22%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.HAT%2C%0A%09%09%09%09%09%09opcode%3A%20'whenImpactDetected'%2C%0A%09%09%09%09%09%09text%3A%20'When%20%5BNAME%5D%20has%20an%20impact'%2C%0A%09%09%09%09%09%09shouldRestartExistingThreads%3A%20false%2C%0A%09%09%09%09%09%09isEdgeActivated%3A%20false%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09NAME%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Object'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%09%09%09%09%09%09opcode%3A%20'impactDetectionBool'%2C%0A%09%09%09%09%09%09text%3A%20'%5BNAME%5D%20had%20an%20impact'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09NAME%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Object'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%09%09%09%09%09%09opcode%3A%20'scrapingDetectionBool'%2C%0A%09%09%09%09%09%09text%3A%20'%5BNAME%5D%20is%20touching%20anything'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09NAME%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Object'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'getTouching'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%09%09%09%09%09%09text%3A%20'Get%20all%20objects%20touching%20%5BNAME%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09NAME%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20%22Object1%22%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'getBodyIDAt'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%09%09%09%09%09%09text%3A%20'Get%20object%20of%20type%20%5Btype%5D%20at%20x%3A%20%5BX%5D%20%20y%3A%20%5BY%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09type%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09menu%3A%20'BodyTypePK2'%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'any'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09X%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09Y%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'getBodyAttr'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%09%09%09%09%09%09text%3A%20'Get%20%5BBODYATTRREAD%5D%20from%20object%20%5BNAME%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09BODYATTRREAD%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09menu%3A%20'bodyAttrRead'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09NAME%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Object'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'getobjects'%2C%0A%09%09%09%09%09%09disableMonitor%3A%20true%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%09%09%09%09%09%09text%3A%20'All%20objects'%2C%0A%09%09%09%09%09%7D%2C%0A%0A%09%09%09%09%09%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Define%20joints%22%20%7D%2C%20%2F%2F%20----%20Define%20joints%20-----%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'defineSpring'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Define%20Spring%2C%20Length%3A%20%5BLENGTH%5D%20Damping%3A%20%5BDAMPING%5D%20Freq%3A%20%5BFREQ%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09LENGTH%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20100%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09DAMPING%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200.7%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09FREQ%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%205%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'definePrismatic'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Define%20Slider%2C%20Angle%3A%20%5BDIR%5D%20Lower%20stop%3A%20%5BLOW%5D%20Upper%20stop%3A%20%5BHIGH%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09DIR%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'90'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09LOW%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'-100'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09HIGH%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'100'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'createJointOfType'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Create%20joint%20%5BJOINTID%5D%20of%20type%20%5BJOINTTYPE%5D%20between%20%5BBODY1%5D%20at%20%5BX1%5D%20%5BY1%5D%20and%20%5BBODY2%5D%20at%20%5BX2%5D%20%5BY2%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09JOINTID%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Joint'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09JOINTTYPE%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09menu%3A%20'JointType'%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Rotating'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09BODY1%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Object1'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09X1%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09Y1%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09BODY2%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Object2'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09X2%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09Y2%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'CreateMouseJoint'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Create%20pin%20%5BJOINTID%5D%20with%20force%20%5BFORCE%5D%20for%20%5BBODY1%5D%20at%20%5BX1%5D%20%5BY1%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09JOINTID%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Joint'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09FORCE%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20300%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09BODY1%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Object1'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09X1%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09Y1%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%0A%09%09%09%09%09%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Modify%20joints%22%20%7D%2C%20%2F%2F%20------%20Modify%20joints%20---%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'destroyJoint'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Destroy%20Joint%20%5BJOINTID%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09JOINTID%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Joint%20ID'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'destroyJoints'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Destroy%20every%20joint'%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'setJointAttr'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Set%20%5BJOINTATTR%5D%20of%20joint%20%5BJOINTID%5D%20to%20%5BVALUE%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09JOINTATTR%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09menu%3A%20'JointAttr'%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Motor%20On'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09JOINTID%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Joint%20ID'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09VALUE%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'setJointTarget'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09hideFromPalette%3A%20!wipblocks%2C%0A%09%09%09%09%09%09text%3A%20'Move%20pin%20%5BJOINTID%5D%20to%20x%3A%20%5BX%5D%20%20y%3A%20%5BY%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09JOINTID%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Joint%20ID'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09X%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09Y%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'getJointAttr'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%09%09%09%09%09%09text%3A%20'Get%20%5BJOINTATTRREAD%5D%20of%20joint%3A%20%5BJOINTID%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09JOINTATTRREAD%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09menu%3A%20'JointAttrRead'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09JOINTID%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Joint%20ID'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'getjoints'%2C%0A%09%09%09%09%09%09disableMonitor%3A%20true%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%09%09%09%09%09%09text%3A%20'All%20joints'%2C%0A%09%09%09%09%09%7D%2C%0A%0A%09%09%09%09%09%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22World%20functions%22%20%7D%2C%20%2F%2F%20---%20World%20functions%20--%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'init'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Make%20world%2C%20Scale%201m%3A%20%5BSCALE%5D%20Gravity%3A%20%5BGRAVITY%5D%20Wind%3A%20%5BWIND%5D%20Scene%3A%20%5BSCENE%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09SCALE%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%2050%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09GRAVITY%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20-10%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09WIND%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09SCENE%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09menu%3A%20'sceneType'%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'closed%20stage'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'physoptions'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Set%20physics%20options%2C%20Position%20iterations%3A%20%5BPOS%5D%20Velocity%20iterations%3A%20%5BVEL%5D%20Continuous%20physics%3A%20%5BCONPHYS%5D%20Warm%20starting%3A%20%5BWARMSTART%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09POS%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%2010%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09VEL%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%2010%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09CONPHYS%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.BOOLEAN%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20true%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09WARMSTART%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.BOOLEAN%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20true%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'setWorldForces'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Set%20world%20options%2C%20Gravity%3A%20%5BGRAVITY%5D%20Wind%3A%20%5BWIND%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09GRAVITY%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20-10%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09WIND%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'getsimspeed'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%09%09%09%09%09%09text%3A%20'Slow%20motion'%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'setsimspeed'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Set%20slow%20motion%20to%20%5BVALUE%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09VALUE%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%2030%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'stepSimulation'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Step%20Simulation'%2C%0A%09%09%09%09%09%7D%2C%0A%0A%09%09%09%09%09%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Math%20functions%22%20%7D%2C%20%2F%2F%20----%20Math%20functions%20-----%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'rotatePoint'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%09%09%09%09%09%09text%3A%20'Get%20%5BPART%5D%20from%20point%20x%20%5BX%5D%20y%20%5BY%5D%20rotated%20by%20%5BANGLE%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09X%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09Y%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09ANGLE%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09PART%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09menu%3A%20'xy'%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'x'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'rotationFromPoint'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%09%09%09%09%09%09text%3A%20'Get%20rotation%20from%20x%20%5Bx1%5D%20y%20%5By1%5D%20to%20x%20%5Bx2%5D%20y%20%5By2%5D'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09x1%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09y1%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09x2%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09y2%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%200%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20%22magnitudeOfPoint%22%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%09%09%09%09%09%09text%3A%20%22Magnitude%20of%20x%20%5Ba1%5D%20y%20%5Ba2%5D%22%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09a1%3A%20%7B%20%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%20%0A%09%09%09%09%09%09%09%09defaultValue%3A%20%220%22%20%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09a2%3A%20%7B%20%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%20%0A%09%09%09%09%09%09%09%09defaultValue%3A%20%220%22%20%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20%22distanceOfPoint%22%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%09%09%09%09%09%09text%3A%20%22Distance%20between%20x%20%5Ba1%5D%20y%20%5Ba2%5D%20and%20x%20%5Bb1%5D%20y%20%5Bb2%5D%22%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09a1%3A%20%7B%20%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%20%0A%09%09%09%09%09%09%09%09defaultValue%3A%20%220%22%20%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09a2%3A%20%7B%20%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%20%0A%09%09%09%09%09%09%09%09defaultValue%3A%20%220%22%20%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09b1%3A%20%7B%20%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%20%0A%09%09%09%09%09%09%09%09defaultValue%3A%20%220%22%20%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%09b2%3A%20%7B%20%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%20%0A%09%09%09%09%09%09%09%09defaultValue%3A%20%220%22%20%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09hideFromPalette%3A%20!legacymode%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.LABEL%2C%20%20%2F%2F%20----%20Legacy%20blocks%20(old%20and%20not%20recomended%20for%20use)%20----%0A%09%09%09%09%09%09text%3A%20%60Legacy%20blocks%60%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'createNoCollideSet'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Disable%20collision%20between%20%5BNAMES%5D'%2C%0A%09%09%09%09%09%09hideFromPalette%3A%20!legacymode%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09NAMES%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Object1%20Object2'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'createYesCollideSet'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'Reset%20collision%20of%20objects%20%5BNAMES%5D'%2C%0A%09%09%09%09%09%09hideFromPalette%3A%20!legacymode%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09NAMES%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20'Object1%20Object2'%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%0A%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09hideFromPalette%3A%20!physdebugmode%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.LABEL%2C%20%2F%2F%20---------------------%20Debug%20blocks%20----%0A%09%09%09%09%09%09text%3A%20%22Debug%20blocks%20(can%20brake%20projects)%22%0A%09%09%09%09%09%7D%2C%20%2F%2F%20the%20ids%20on%20any%20of%20the%20following%20can%20change%20because%20these%20are%20used%20for%20debugging%20while%20making%20the%20extension%20(not%20for%20debugging%20projects)%2C%20so%20it's%20YOUR%20fault%20if%20you%20use%20them%20and%20your%20project%20brakes%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'ignore'%2C%0A%09%09%09%09%09%09hideFromPalette%3A%20!wipblocks%20%26%26%20!physdebugmode%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%09%09%09%09%09%09text%3A%20'the%20ids%20on%20any%20of%20the%20following%20blocks%20can%20change%20or%20be%20removed%2C%20so%20it%5C's%20YOUR%20fault%20if%20you%20use%20them%20and%20your%20project%20brakes'%2C%0A%09%09%09%09%09%09arguments%3A%20%7B%0A%09%09%09%09%09%09%09VALUE%3A%20%7B%0A%09%09%09%09%09%09%09%09type%3A%20Scratch.ArgumentType.STRING%2C%0A%09%09%09%09%09%09%09%09defaultValue%3A%20%22%22%2C%0A%09%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%09%7D%2C%0A%09%09%09%09%09%7D%2C%0A%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09opcode%3A%20'getImpacts'%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%09%09%09%09%09%09hideFromPalette%3A%20!physdebugmode%2C%0A%09%09%09%09%09%09text%3A%20'Get%20all%20impacts'%2C%0A%09%09%09%09%09%7D%2C%0A%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09hideFromPalette%3A%20!wipblocks%2C%0A%09%09%09%09%09%09blockType%3A%20Scratch.BlockType.LABEL%2C%20%2F%2F%20---------------------%20Work%20in%20progress%20blocks%20----%0A%09%09%09%09%09%09text%3A%20%22Upcoming%20blocks%20(project%20corruption%20warning)%22%0A%09%09%09%09%09%7D%0A%09%09%09%09%5D%2C%0A%09%09%09%09menus%3A%20%7B%0A%09%09%09%09%09sceneType%3A%20%5B'semi-closed%20stage'%2C%20'boxed%20stage'%2C%20'opened%20stage'%2C%20'nothing'%5D%2C%0A%09%09%09%09%09BodyTypePK%3A%20%5B'dynamic'%2C%20'static'%5D%2C%0A%09%09%09%09%09BodyTypePK2%3A%20%5B'dynamic'%2C%20'static'%2C%20'any'%5D%2C%0A%09%09%09%09%09bodyAttr%3A%20%5B'damping'%2C%20'rotational%20damping'%5D%2C%0A%09%09%09%09%09bodyAttrRead%3A%20%5B'x'%2C%20'y'%2C%20'Xvel'%2C%20'Yvel'%2C%20'Dvel'%2C%20'direction'%2C%20'awake'%2C%20'type'%2C%20'friction'%2C%20'pressure'%5D%2C%0A%09%09%09%09%09ForceType%3A%20%5B'Impulse'%2C%20'World%20Impulse'%5D%2C%0A%09%09%09%09%09AngForceType%3A%20%5B'Impulse'%5D%2C%0A%09%09%09%09%09JointType%3A%20%5B'Rotating'%2C%20'Spring'%2C%20'Weld'%2C%20'Slider'%2F*%2C%20'Mouse'*%2F%5D%2C%0A%09%09%09%09%09JointAttr%3A%20%5B'Motor%20On'%2C%20'Motor%20Speed'%2C%20'Max%20Torque'%2C%20'Limits%20On'%2C%20'Lower%20Limit'%2C%20'Upper%20Limit'%5D%2C%0A%09%09%09%09%09JointAttrRead%3A%20%5B'Angle'%2C%20'Speed'%2C%20'Motor%20Torque'%2C%20'Reaction%20Torque'%2C%20'tension'%5D%2C%0A%09%09%09%09%09xyp%3A%20%5B'x'%2C%20'y'%2C%20'point'%5D%2C%0A%09%09%09%09%09xy%3A%20%5B'x'%2C%20'y'%5D%2C%0A%09%09%09%09%09costumeType%3A%20%5B%0A%09%09%09%09%09%09%7B%20text%3A%20%22Convex%20Hull%22%2C%20value%3A%20%22hull%22%20%7D%2C%0A%09%09%09%09%09%09%7B%20text%3A%20%22Edge%20points%22%2C%20value%3A%20%22img%22%20%7D%0A%09%09%09%09%09%5D%2C%0A%09%09%09%09%7D%2C%0A%09%09%09%7D%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20this%20is%20not%20a%20commonly%20used%20fucntion%2C%20but%20it%20is%20nice%20to%20have.%0A%09%09get_debug(input)%20%7B%0A%09%09%09try%20%7B%20input%20%3D%20input.VAL%20%7D%20catch%20(error)%20%7B%20input%20%3D%20input%3B%20%7D%0A%09%09%09if%20(input%20%3D%3D%20%22version%22)%20%7B%0A%09%09%09%09return%20publishedUpdateIndex%3B%0A%09%09%09%7D%20else%20if%20(input%20%3D%3D%20%22lib%22)%20%7B%0A%09%09%09%09return%20%22Box2D%20JS%20es6%20(Uli%20Hecht's%20port%20of%20Box2D%20flash)%22%3B%0A%09%09%09%7D%20else%20if%20(input%20%3D%3D%20%22maker%22)%20%7B%0A%09%09%09%09return%20%22pooiod7%22%3B%0A%09%09%09%7D%20else%20if%20(input%20%3D%3D%20%22base%22)%20%7B%0A%09%09%09%09return%20%22Box2D%20Physics%20by%20griffpatch%20for%20ScratchX%20(Scratch%202.0)%22%3B%0A%09%09%09%7D%20else%20if%20(input%20%3D%3D%20%22docs%22)%20%7B%0A%09%09%09%09return%20this.docs%3B%0A%09%09%09%7D%20else%20if%20(input%20%3D%3D%20%22lastupdated%22)%20%7B%0A%09%09%09%09return%20b2Dupdated%3B%0A%09%09%09%7D%20else%20if%20(input%20%3D%3D%20%22fromPenguinMod%22)%20%7B%0A%09%09%09%09return%20this.isFromPenguinMod%3B%0A%09%09%09%7D%20else%20if%20(input%20%3D%3D%20%22origin%22)%20%7B%0A%09%09%09%09return%20this.origin%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09return%20'%5B%22version%22%2C%20%22lib%22%2C%20%22maker%22%2C%20%22base%22%2C%20%22docs%22%2C%20%22lastupdated%22%2C%20%22fromPenguinMod%22%2C%20%22origin%22%5D'%3B%0A%09%09%09%7D%0A%09%09%7D%3B%20ignore()%7B%7D%0A%0A%09%09init(args)%20%7B%0A%09%09%09b2Math%20%3D%20Box2D.Common.Math.b2Math%3B%0A%09%09%09b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%3B%0A%09%09%09b2AABB%20%3D%20Box2D.Collision.b2AABB%3B%0A%09%09%09b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%3B%0A%09%09%09b2Body%20%3D%20Box2D.Dynamics.b2Body%3B%0A%09%09%09b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%3B%0A%09%09%09b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%3B%0A%09%09%09b2World%20%3D%20Box2D.Dynamics.b2World%3B%0A%09%09%09b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%3B%0A%09%09%09b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%3B%0A%09%09%09b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%3B%0A%09%09%09b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%3B%0A%09%09%09b2MouseJointDef%20%3D%20Box2D.Dynamics.Joints.b2MouseJointDef%3B%0A%0A%09%09%09b2Dworld%20%3D%20new%20b2World(%0A%09%09%09%09new%20b2Vec2(args.WIND%2C%20args.GRAVITY)%20%2F%2F%20args.GRAVITY%20(10)%0A%09%09%09%09%2C%20true%20%2F%2F%20allow%20sleep%20(for%20performance)%0A%09%09%09)%3B%0A%0A%09%09%09b2Dzoom%20%3D%20args.SCALE%3B%0A%0A%09%09%09fixDef%20%3D%20new%20b2FixtureDef%3B%0A%09%09%09fixDef.density%20%3D%201.0%3B%20%20%20%20%20%20%20%20%20%20%20%2F%2F%201.0%0A%09%09%09fixDef.friction%20%3D%200.5%3B%20%20%20%20%20%20%20%20%20%2F%2F%200.5%0A%09%09%09fixDef.restitution%20%3D%200.2%3B%20%20%20%20%20%2F%2F%200.2%0A%0A%09%09%09bodyDef%20%3D%20new%20b2BodyDef%3B%0A%0A%09%09%09if%20(args.SCENE%20%3D%3D%20'stage'%20%7C%7C%20args.SCENE%20%3D%3D%20'semi-closed%20stage')%20%7B%0A%09%09%09%09bodyDef.type%20%3D%20b2Body.b2_staticBody%3B%0A%09%09%09%09fixDef.shape%20%3D%20new%20b2PolygonShape%3B%0A%09%09%09%09fixDef.shape.SetAsBox(250%20%2F%20b2Dzoom%2C%2010%20%2F%20b2Dzoom)%3B%0A%09%09%09%09bodyDef.position.Set(0%2C%20-190%20%2F%20b2Dzoom)%3B%0A%09%09%09%09b2Dworld.CreateBody(bodyDef).CreateFixture(fixDef)%3B%0A%09%09%09%09bodyDef.position.Set(0%2C%201000%20%2F%20b2Dzoom)%3B%0A%09%09%09%09b2Dworld.CreateBody(bodyDef).CreateFixture(fixDef)%3B%0A%09%09%09%09fixDef.shape.SetAsBox(10%20%2F%20b2Dzoom%2C%20800%20%2F%20b2Dzoom)%3B%0A%09%09%09%09bodyDef.position.Set(-250%20%2F%20b2Dzoom%2C%20540%20%2F%20b2Dzoom)%3B%0A%09%09%09%09b2Dworld.CreateBody(bodyDef).CreateFixture(fixDef)%3B%0A%09%09%09%09bodyDef.position.Set(250%20%2F%20b2Dzoom%2C%20540%20%2F%20b2Dzoom)%3B%0A%09%09%09%09b2Dworld.CreateBody(bodyDef).CreateFixture(fixDef)%3B%0A%09%09%09%7D%20else%20if%20(args.SCENE%20%3D%3D%20'opened%20stage')%20%7B%0A%09%09%09%09bodyDef.type%20%3D%20b2Body.b2_staticBody%3B%0A%09%09%09%09fixDef.shape%20%3D%20new%20b2PolygonShape%3B%0A%09%09%09%09fixDef.shape.SetAsBox(9999999%2C%2010%20%2F%20b2Dzoom)%3B%0A%09%09%09%09bodyDef.position.Set(0%2C%20-190%20%2F%20b2Dzoom)%3B%0A%09%09%09%09b2Dworld.CreateBody(bodyDef).CreateFixture(fixDef)%3B%0A%09%09%09%7D%20else%20if%20(args.SCENE%20%3D%3D%20'boxed%20stage'%20%7C%7C%20args.SCENE%20%3D%3D%20'closed%20stage')%20%7B%0A%09%09%09%09bodyDef.type%20%3D%20b2Body.b2_staticBody%3B%0A%09%09%09%09fixDef.shape%20%3D%20new%20b2PolygonShape%3B%0A%09%09%09%09fixDef.shape.SetAsBox(250%20%2F%20b2Dzoom%2C%2010%20%2F%20b2Dzoom)%3B%0A%09%09%09%09bodyDef.position.Set(0%2C%20-190%20%2F%20b2Dzoom)%3B%0A%09%09%09%09b2Dworld.CreateBody(bodyDef).CreateFixture(fixDef)%3B%0A%09%09%09%09bodyDef.position.Set(0%2C%201000%20%2F%20b2Dzoom)%3B%0A%09%09%09%09b2Dworld.CreateBody(bodyDef).CreateFixture(fixDef)%3B%0A%09%09%09%09fixDef.shape.SetAsBox(10%20%2F%20b2Dzoom%2C%20800%20%2F%20b2Dzoom)%3B%0A%09%09%09%09bodyDef.position.Set(-250%20%2F%20b2Dzoom%2C%20540%20%2F%20b2Dzoom)%3B%0A%09%09%09%09b2Dworld.CreateBody(bodyDef).CreateFixture(fixDef)%3B%0A%09%09%09%09bodyDef.position.Set(250%20%2F%20b2Dzoom%2C%20540%20%2F%20b2Dzoom)%3B%0A%09%09%09%09b2Dworld.CreateBody(bodyDef).CreateFixture(fixDef)%3B%0A%09%09%09%09fixDef.shape.SetAsBox(250%20%2F%20b2Dzoom%2C%2010%20%2F%20b2Dzoom)%3B%0A%09%09%09%09bodyDef.position.Set(0%2C%20190%20%2F%20b2Dzoom)%3B%0A%09%09%09%09b2Dworld.CreateBody(bodyDef).CreateFixture(fixDef)%3B%0A%09%09%09%7D%0A%0A%09%09%09bodies%20%3D%20%7B%7D%3B%0A%09%09%09joints%20%3D%20%7B%7D%3B%0A%09%09%09uid_seq%20%3D%200%3B%0A%09%09%09ujid_seq%20%3D%200%3B%0A%0A%09%09%09categorySeq%20%3D%200%3B%0A%09%09%09bodyCategoryBits%20%3D%201%3B%0A%09%09%09noCollideSeq%20%3D%20839%3B%0A%0A%09%09%09bodyDef.type%20%3D%20b2Body.b2_dynamicBody%3B%0A%0A%09%09%09fixDef.shape%20%3D%20new%20b2CircleShape%3B%20%2F%2F%20Default%20shape%20is%20circle%20100%0A%09%09%09fixDef.shape.SetRadius(100%20%2F%202%20%2F%20b2Dzoom)%3B%0A%0A%09%09%09this.impacts%20%3D%20%5B%5D%3B%0A%09%09%09this.scraping%20%3D%20%5B%5D%3B%0A%09%09%7D%0A%0A%09%09setWorldForces(args)%20%7B%0A%09%09%09b2Dworld.SetGravity(new%20b2Vec2(args.WIND%2C%20args.GRAVITY))%3B%0A%09%09%09for%20(var%20body%20in%20bodies)%20%7B%0A%09%09%09%09body%20%3D%20bodies%5Bbody%5D%0A%09%09%09%09body.SetAwake(true)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%0A%09%09rotatePoint(args)%20%7B%0A%09%09%09var%20radians%20%3D%20args.ANGLE%20*%20Math.PI%20%2F%20180%3B%0A%09%09%09var%20cos%20%3D%20Math.cos(radians)%3B%0A%09%09%09var%20sin%20%3D%20Math.sin(radians)%3B%0A%09%09%09var%20nx%20%3D%20(cos%20*%20args.X)%20-%20(sin%20*%20args.Y)%3B%0A%09%09%09var%20ny%20%3D%20(sin%20*%20args.X)%20%2B%20(cos%20*%20args.Y)%3B%0A%09%09%09if%20(args.PART%20%3D%3D%20%22x%22)%20%7B%0A%09%09%09%09return%20nx%3B%0A%09%09%09%7D%20else%20if%20(args.PART%20%3D%3D%20%22y%22)%20%7B%0A%09%09%09%09return%20ny%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09return%20'%5B%22'%2Bnx%2B'%22%2C%20%22'%2Bny%2B'%22%5D'%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09magnitudeOfPoint(args)%20%7B%0A%09%09%09if%20(args)%20%7B%0A%09%09%09%09return%20Math.sqrt(Math.pow(args.a1%2C%202)%20%2B%20Math.pow(args.a2%2C%202))%3B%0A%09%09%09%7D%0A%09%09%09return%200%3B%0A%09%09%7D%0A%09%09%0A%09%09distanceOfPoint(args)%20%7B%0A%09%09%09if%20(args.a1%20%26%26%20args.a2%20%26%26%20args.b1%20%26%26%20args.b2)%20%7B%0A%09%09%09%09return%20Math.sqrt(Math.pow(args.a1%20-%20args.b1%2C%202)%20%2B%20Math.pow(args.a2%20-%20args.b2%2C%202))%3B%0A%09%09%09%7D%0A%09%09%09return%200%3B%0A%09%09%7D%0A%0A%09%09rotationFromPoint(%7B%20x1%2C%20x2%2C%20y1%2C%20y2%7D)%20%7B%0A%09%09%09let%20angleRad%20%3D%20Math.atan2(y2%20-%20y1%2C%20x2%20-%20x1)%3B%0A%09%09%09let%20angleDeg%20%3D%20angleRad%20*%20(180%20%2F%20Math.PI)%3B%0A%09%09%09let%20Angle%20%3D%2090%20-%20angleDeg%3B%0A%09%09%09if%20(Angle%20%3E%20180)%20%7B%0A%09%09%09%09Angle%20-%3D%20360%3B%0A%09%09%09%7D%0A%09%09%09return%20Angle%3B%0A%09%09%7D%0A%0A%09%09clearvel(args)%20%7B%0A%09%09%09var%20body%20%3D%20bodies%5Bargs.NAME%5D%3B%0A%09%09%09if%20(!body)%20return%20''%3B%0A%0A%09%09%09body.SetLinearVelocity(new%20b2Vec2(0%2C%200))%3B%0A%09%09%09body.SetAngularVelocity(0)%3B%0A%09%09%7D%0A%0A%09%09changevel(args)%20%7B%0A%09%09%09var%20body%20%3D%20bodies%5Bargs.NAME%5D%3B%0A%09%09%09if%20(!body)%20return%20''%3B%0A%0A%09%09%09body.SetLinearVelocity(new%20b2Vec2(args.X%2C%20args.Y))%3B%0A%09%09%09body.SetAngularVelocity(args.DIR)%3B%0A%09%09%09body.SetAwake(true)%3B%0A%09%09%7D%0A%0A%09%09setBodyAttrs(args)%20%7B%0A%09%09%09var%20stat%20%3D%20args.BODYTYPE%3B%0A%09%09%09var%20dens%20%3D%20args.DENSITY%3B%0A%09%09%09var%20fric%20%3D%20args.FRICTION%3B%0A%09%09%09var%20rest%20%3D%20args.BOUNCE%3B%0A%0A%09%09%09bodyDef.type%20%3D%20stat%20%3D%3D%3D%20'static'%20%3F%20b2Body.b2_staticBody%20%3A%20b2Body.b2_dynamicBody%3B%0A%09%09%09fixDef.density%20%3D%20dens%3B%20%20%20%20%20%20%20%20%20%20%2F%2F%201.0%0A%09%09%09fixDef.friction%20%3D%20fric%3B%20%20%20%20%20%20%20%20%2F%2F%200.5%0A%09%09%09fixDef.restitution%20%3D%20rest%3B%20%20%20%20%2F%2F%200.2%0A%09%09%7D%0A%0A%09%09defineCircle(args)%20%7B%0A%09%09%09fixDef.shape%20%3D%20new%20b2CircleShape%3B%0A%09%09%09fixDef.shape.SetRadius(args.SIZE%20%2F%202%20%2F%20b2Dzoom)%3B%0A%09%09%7D%0A%0A%09%09defineRect(args)%20%7B%0A%09%09%09fixDef.shape%20%3D%20new%20b2PolygonShape%3B%0A%09%09%09fixDef.shape.SetAsBox(args.WIDTH%20%2F%202%20%2F%20b2Dzoom%2C%20args.HEIGHT%20%2F%202%20%2F%20b2Dzoom)%3B%0A%09%09%7D%0A%0A%09%09difineCostume(_%2C%20util)%20%7B%0A%09%09%09try%20%7B%20%2F%2F%20does%20not%20work%20with%20hidden%20sprites%0A%09%09%09%09const%20target%20%3D%20util.target%3B%0A%09%09%09%09if%20(target.isStage)%20%7B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%0A%09%09%09%09const%20r%20%3D%20this.runtime.renderer%3B%0A%09%09%09%09const%20drawable%20%3D%20r._allDrawables%5Btarget.drawableID%5D%3B%0A%0A%09%09%09%09%2F%2F%20if%20(TYPE%20%3D%3D%20%22img%22)%20%7B%0A%09%09%09%09%2F%2F%20%09function%20uint8ArrayToBase64(uint8Array)%20%7B%0A%09%09%09%09%2F%2F%20%09%09let%20binary%20%3D%20''%3B%0A%09%09%09%09%2F%2F%20%09%09const%20len%20%3D%20uint8Array.byteLength%3B%0A%09%09%09%09%2F%2F%20%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20len%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%2F%2F%20%09%09%09binary%20%2B%3D%20String.fromCharCode(uint8Array%5Bi%5D)%3B%0A%09%09%09%09%2F%2F%20%09%09%7D%0A%09%09%09%09%2F%2F%20%09%09return%20window.btoa(binary)%3B%0A%09%09%09%09%2F%2F%20%09%7D%0A%0A%09%09%09%09%2F%2F%20%09var%20costume%20%3D%20sprite.costumes_%5Butil.target.currentCostume%5D%3B%0A%09%09%09%09%2F%2F%20%09const%20costumeData%20%3D%20costume.asset.data%3B%0A%09%09%09%09%2F%2F%20%09const%20mimeType%20%3D%20costume.asset.assetType.contentType%3B%0A%0A%09%09%09%09%2F%2F%20%09if%20(costumeData)%20%7B%0A%09%09%09%09%2F%2F%20%09%09const%20base64Data%20%3D%20uint8ArrayToBase64(costumeData)%3B%0A%09%09%09%09%2F%2F%20%09%09this.definePoly(%60data%3A%24%7BmimeType%7D%3Bbase64%2C%24%7Bbase64Data%7D%60)%3B%0A%09%09%09%09%2F%2F%20%09%09return%3B%0A%09%09%09%09%2F%2F%20%09%7D%20else%20%7B%0A%09%09%09%09%2F%2F%20%09%09console.warn(%22Unable%20to%20ubtain%20costume%20data%2C%20using%20hull%20method%22)%0A%09%09%09%09%2F%2F%20%09%7D%0A%09%09%09%09%2F%2F%20%7D%0A%0A%09%09%09%09%2F%2F%20Tell%20the%20Drawable%20about%20its%20updated%20convex%20hullPoints%2C%20if%20necessary.%0A%09%09%09%09if%20(drawable.needsConvexHullPoints())%20%7B%0A%09%09%09%09%09const%20points%20%3D%20r._getConvexHullPointsForDrawable(target.drawableID)%3B%0A%09%09%09%09%09drawable.setConvexHullPoints(points)%3B%0A%09%09%09%09%7D%0A%0A%09%09%09%09const%20points%20%3D%20drawable._convexHullPoints%3B%0A%09%09%09%09const%20scaleX%20%3D%20drawable.scale%5B0%5D%20%2F%20100%3B%0A%09%09%09%09const%20scaleY%20%3D%20drawable.scale%5B1%5D%20%2F%20-100%3B%20%2F%2F%20Flip%20Y%20for%20hulls%0A%09%09%09%09const%20offset%20%3D%20drawable.skin.rotationCenter%3B%0A%09%09%09%09let%20allHulls%20%3D%20null%3B%0A%0A%09%09%09%09const%20hullPoints%20%3D%20%5B%5D%3B%0A%09%09%09%09for%20(const%20i%20in%20points)%20%7B%0A%09%09%09%09%09hullPoints.push(%7B%0A%09%09%09%09%09%09x%3A%20(points%5Bi%5D%5B0%5D%20-%20offset%5B0%5D)%20*%20scaleX%2C%0A%09%09%09%09%09%09y%3A%20(points%5Bi%5D%5B1%5D%20-%20offset%5B1%5D)%20*%20scaleY%2C%0A%09%09%09%09%09%7D)%3B%0A%09%09%09%09%7D%0A%0A%09%09%09%09fixDef.shape%20%3D%20new%20b2PolygonShape()%3B%0A%0A%09%09%09%09const%20vertices%20%3D%20%5B%5D%3B%0A%0A%09%09%09%09let%20prev%20%3D%20null%3B%0A%09%09%09%09for%20(let%20i%20%3D%20hullPoints.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--)%20%7B%0A%09%09%09%09%09const%20b2Vec%20%3D%20new%20b2Vec2(hullPoints%5Bi%5D.x%20%2F%20b2Dzoom%2C%20hullPoints%5Bi%5D.y%20%2F%20b2Dzoom)%3B%0A%09%09%09%09%09if%20(prev%20!%3D%3D%20null%20%26%26%20b2Math.SubtractVV(b2Vec%2C%20prev).LengthSquared()%20%3E%20Number.MIN_VALUE)%20%7B%0A%09%09%09%09%09%09vertices.push(b2Vec)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09prev%20%3D%20b2Vec%3B%0A%09%09%09%09%7D%0A%0A%09%09%09%09fixDef.shape.SetAsArray(vertices)%3B%0A%09%09%09%7D%20catch%20(error)%20%7B%0A%09%09%09%09%2F%2F%20console.warn(error)%3B%0A%09%09%09%09fixDef.shape%20%3D%20new%20b2CircleShape%3B%0A%09%09%09%09fixDef.shape.SetRadius(100%20%2F%202%20%2F%20b2Dzoom)%3B%0A%09%09%09%09console.error(%22Unable%20to%20create%20hull%20for%20hidden%20sprite.%22)%3B%0A%09%09%09%09console.warn(%22Defaulting%20to%20%5C%22circle%20100%5C%22%22)%3B%0A%09%09%09%09return%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09async%20svgtopoints(source)%20%7B%0A%09%09%09return%20new%20Promise(resolve%20%3D%3E%20%7B%0A%09%09%09%09let%20url%2C%20isBlob%20%3D%20false%3B%0A%09%09%09%09const%20img%20%3D%20new%20Image()%3B%0A%09%09%09%09img.onload%20%3D%20function()%20%7B%0A%09%09%09%09%09const%20canvas%20%3D%20document.createElement('canvas')%3B%0A%09%09%09%09%09const%20ctx%20%3D%20canvas.getContext('2d')%3B%0A%09%09%09%09%09canvas.width%20%3D%20img.width%3B%0A%09%09%09%09%09canvas.height%20%3D%20img.height%3B%0A%09%09%09%09%09ctx.drawImage(img%2C%200%2C%200)%3B%0A%0A%09%09%09%09%09const%20%7B%20width%2C%20height%20%7D%20%3D%20canvas%3B%0A%09%09%09%09%09const%20data%20%3D%20ctx.getImageData(0%2C%200%2C%20width%2C%20height).data%3B%0A%09%09%09%09%09const%20edges%20%3D%20%5B%5D%3B%0A%0A%09%09%09%09%09for%20(let%20y%20%3D%200%3B%20y%20%3C%20height%3B%20y%2B%2B)%20%7B%0A%09%09%09%09%09%09for%20(let%20x%20%3D%200%3B%20x%20%3C%20width%3B%20x%2B%2B)%20%7B%0A%09%09%09%09%09%09%09const%20i%20%3D%20(y%20*%20width%20%2B%20x)%20*%204%3B%0A%09%09%09%09%09%09%09const%20a%20%3D%20data%5Bi%20%2B%203%5D%3B%0A%09%09%09%09%09%09%09if%20(a%20%3E%200)%20%7B%0A%09%09%09%09%09%09%09%09if%20(%0A%09%09%09%09%09%09%09%09%09x%20%3D%3D%3D%200%20%7C%7C%0A%09%09%09%09%09%09%09%09%09y%20%3D%3D%3D%200%20%7C%7C%0A%09%09%09%09%09%09%09%09%09x%20%3D%3D%3D%20width%20-%201%20%7C%7C%0A%09%09%09%09%09%09%09%09%09y%20%3D%3D%3D%20height%20-%201%20%7C%7C%0A%09%09%09%09%09%09%09%09%09data%5B((y%20-%201)%20*%20width%20%2B%20x)%20*%204%20%2B%203%5D%20%3D%3D%3D%200%20%7C%7C%0A%09%09%09%09%09%09%09%09%09data%5B((y%20%2B%201)%20*%20width%20%2B%20x)%20*%204%20%2B%203%5D%20%3D%3D%3D%200%20%7C%7C%0A%09%09%09%09%09%09%09%09%09data%5B(y%20*%20width%20%2B%20(x%20-%201))%20*%204%20%2B%203%5D%20%3D%3D%3D%200%20%7C%7C%0A%09%09%09%09%09%09%09%09%09data%5B(y%20*%20width%20%2B%20(x%20%2B%201))%20*%204%20%2B%203%5D%20%3D%3D%3D%200%0A%09%09%09%09%09%09%09%09)%20%7B%0A%09%09%09%09%09%09%09%09%09edges.push(x%20%2B%20'%20'%20%2B%20y)%3B%0A%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if%20(isBlob)%20URL.revokeObjectURL(url)%3B%0A%09%09%09%09%09resolve(edges.join('%20%20%20%20'))%3B%0A%09%09%09%09%7D%3B%0A%0A%09%09%09%09const%20trimmed%20%3D%20source.trim()%3B%0A%09%09%09%09if%20(trimmed.startsWith('%3Csvg'))%20%7B%0A%09%09%09%09%09const%20blob%20%3D%20new%20Blob(%5Bsource%5D%2C%20%7B%20type%3A%20'image%2Fsvg%2Bxml'%20%7D)%3B%0A%09%09%09%09%09url%20%3D%20URL.createObjectURL(blob)%3B%0A%09%09%09%09%09isBlob%20%3D%20true%3B%0A%09%09%09%09%09img.src%20%3D%20url%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09img.src%20%3D%20source%3B%0A%09%09%09%09%7D%0A%09%09%09%7D)%3B%0A%09%09%7D%0A%0A%09%09ispoly(args)%20%7B%0A%09%09%09let%20tmpshape%20%3D%20new%20b2PolygonShape%3B%0A%09%09%09var%20points%20%3D%20args.POINTS%3B%0A%0A%09%09%09try%20%7B%0A%09%09%09%09var%20pts%20%3D%20points.split('%20')%3B%0A%09%09%09%09for%20(var%20i%20%3D%200%3B%20i%20%3C%20pts.length%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09if%20(pts%5Bi%5D.length%20%3D%3D%200)%20%7B%0A%09%09%09%09%09%09pts.splice(i%2C%201)%3B%0A%09%09%09%09%09%09i--%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%0A%09%09%09%09var%20vertices%20%3D%20%5B%5D%3B%0A%09%09%09%09for%20(var%20i%20%3D%20pts.length%3B%20i%20%3E%200%3B%20i%20-%3D%202)%20%7B%0A%09%09%09%09%09if%20(isNaN(Number(pts%5Bi%20-%202%5D))%20%7C%7C%20isNaN(Number(pts%5Bi%20-%201%5D)))%20return%20false%3B%0A%09%09%09%09%09vertices.push(new%20b2Vec2(parseFloat(pts%5Bi%20-%202%5D)%20%2F%20b2Dzoom%2C%20parseFloat(pts%5Bi%20-%201%5D)%20%2F%20b2Dzoom))%3B%0A%09%09%09%09%7D%0A%09%09%09%09tmpshape.SetAsArray(vertices)%3B%0A%09%09%09%09return%20true%3B%0A%09%09%09%7D%20catch%20(error)%20%7B%0A%09%09%09%09return%20false%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09async%20definePoly(args)%20%7B%0A%09%09%09fixDef.shape%20%3D%20new%20b2PolygonShape%3B%0A%09%09%09var%20points%20%3D%20args.POINTS%3B%0A%09%09%09if%20(points.includes(%22data%3A%22)%20%7C%7C%20points.includes(%22svg%22))%20%7B%0A%09%09%09%09points%20%3D%20await%20this.svgtopoints(points)%3B%0A%09%09%09%7D%0A%0A%09%09%09try%20%7B%0A%09%09%09%09var%20pts%20%3D%20points.split('%20')%3B%0A%09%09%09%09for%20(var%20i%20%3D%200%3B%20i%20%3C%20pts.length%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09if%20(pts%5Bi%5D.length%20%3D%3D%200)%20%7B%0A%09%09%09%09%09%09pts.splice(i%2C%201)%3B%0A%09%09%09%09%09%09i--%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%0A%09%09%09%09var%20vertices%20%3D%20%5B%5D%3B%0A%09%09%09%09for%20(var%20i%20%3D%20pts.length%3B%20i%20%3E%200%3B%20i%20-%3D%202)%20%7B%0A%09%09%09%09%09vertices.push(new%20b2Vec2(parseFloat(pts%5Bi%20-%202%5D)%20%2F%20b2Dzoom%2C%20parseFloat(pts%5Bi%20-%201%5D)%20%2F%20b2Dzoom))%3B%0A%09%09%09%09%7D%0A%09%09%09%09fixDef.shape.SetAsArray(vertices)%3B%0A%09%09%09%09return%20true%3B%0A%09%09%09%7D%20catch%20(error)%20%7B%0A%09%09%09%09fixDef.shape%20%3D%20new%20b2CircleShape%3B%0A%09%09%09%09fixDef.shape.SetRadius(100%20%2F%202%20%2F%20b2Dzoom)%3B%0A%09%09%09%09console.error(%22Incorrect%20polly%20format%22%2C%20points)%3B%0A%09%09%09%09console.warn(%22Defaulting%20to%20%5C%22circle%20100%5C%22%22)%3B%0A%09%09%09%09return%20false%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09placeBody(args)%20%7B%0A%09%09%09var%20id%20%3D%20args.NAME%3B%0A%0A%09%09%09if%20(bodies%5Bid%5D)%20%7B%0A%09%09%09%09b2Dworld.DestroyBody(bodies%5Bid%5D)%3B%0A%09%09%09%7D%0A%0A%09%09%09fixDef.filter.categoryBits%20%3D%20bodyCategoryBits%3B%0A%09%09%09fixDef.filter.maskBits%20%3D%20bodyMaskBits%3B%0A%0A%09%09%09bodyDef.position.x%20%3D%20args.X%20%2F%20b2Dzoom%3B%0A%09%09%09bodyDef.position.y%20%3D%20args.Y%20%2F%20b2Dzoom%3B%0A%09%09%09bodyDef.angle%20%3D%20(90%20-%20args.DIR)%20*%20toRad%3B%0A%09%09%09var%20body%20%3D%20b2Dworld.CreateBody(bodyDef)%3B%0A%09%09%09body.uid%20%3D%20id%3B%0A%09%09%09body.CreateFixture(fixDef)%3B%0A%09%09%09bodies%5Bid%5D%20%3D%20body%3B%0A%09%09%7D%0A%0A%09%09setObjectLayer(%7B%20NAME%2C%20LAYERS%20%7D)%20%7B%0A%09%09%09var%20body%20%3D%20bodies%5BNAME%5D%3B%0A%09%09%09if%20(!body)%20return%20''%3B%0A%09%09%0A%09%09%09LAYERS%20%3D%20LAYERS.toString()%3B%0A%09%09%09var%20layers%20%3D%20LAYERS.split('%20').map(Number)%3B%0A%09%09%09if%20(!layers.length)%20return%20''%3B%0A%09%09%0A%09%09%09var%20positiveLayers%20%3D%20%5B%5D%3B%0A%09%09%09var%20negativeLayers%20%3D%20%5B%5D%3B%0A%09%09%0A%09%09%09layers.forEach(layer%20%3D%3E%20%7B%0A%09%09%09%09if%20(layer%20%3C%200)%20%7B%0A%09%09%09%09%09negativeLayers.push(layer)%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09positiveLayers.push(layer)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D)%3B%0A%09%09%0A%09%09%09body.layers%20%3D%20layers%3B%0A%09%09%0A%09%09%09var%20categoryBits%20%3D%200%3B%0A%09%09%09var%20maskBits%20%3D%200%3B%0A%09%09%0A%09%09%09positiveLayers.forEach(layer%20%3D%3E%20%7B%0A%09%09%09%09categoryBits%20%2B%3D%20Math.pow(2%2C%20layer%20-%201)%3B%0A%09%09%09%09maskBits%20%2B%3D%20Math.pow(2%2C%20layer%20-%201)%3B%0A%09%09%09%7D)%3B%0A%0A%09%09%09if%20(negativeLayers.length%20%3E%201)%20console.warn(%22Only%20one%20negative%20layer%20can%20be%20enabled%20at%20a%20time.%22)%3B%0A%09%09%09if%20(negativeLayers.length%20%3E%200)%20%7B%0A%09%09%09%09negativeLayers.forEach(layer%20%3D%3E%20%7B%0A%09%09%09%09%09var%20fix%20%3D%20body.GetFixtureList()%3B%0A%09%09%09%09%09while%20(fix)%20%7B%0A%09%09%09%09%09%09var%20fdata%20%3D%20fix.GetFilterData()%3B%0A%09%09%09%09%09%09fdata.groupIndex%20%3D%20layer%3B%0A%09%09%09%09%09%09fix.SetFilterData(fdata)%3B%0A%09%09%09%09%09%09fix%20%3D%20fix.GetNext()%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D)%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09var%20fix%20%3D%20body.GetFixtureList()%3B%0A%09%09%09%09while%20(fix)%20%7B%0A%09%09%09%09%09var%20fdata%20%3D%20fix.GetFilterData()%3B%0A%09%09%09%09%09fdata.groupIndex%20%3D%201%3B%0A%09%09%09%09%09fix.SetFilterData(fdata)%3B%0A%09%09%09%09%09fix%20%3D%20fix.GetNext()%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%0A%09%09%09var%20fixture%20%3D%20body.GetFixtureList()%3B%0A%09%09%09while%20(fixture)%20%7B%0A%09%09%09%09var%20filter%20%3D%20fixture.GetFilterData()%3B%0A%09%09%0A%09%09%09%09filter.categoryBits%20%3D%20categoryBits%3B%0A%09%09%09%09filter.maskBits%20%3D%20maskBits%3B%0A%09%09%0A%09%09%09%09fixture.SetFilterData(filter)%3B%0A%09%09%09%09fixture%20%3D%20fixture.GetNext()%3B%0A%09%09%09%7D%0A%09%09%0A%09%09%09body.SetAwake(true)%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20Collision%20groups%20have%20been%20depricated%20for%20being%20too%20buggy%0A%09%09%2F%2F%20These%20blocks%20just%20set%20the%20object%20layers%20now%0A%09%09createNoCollideSet(%7B%20NAMES%20%7D)%20%7B%0A%09%09%09noCollideSeq%20%2B%3D%201%3B%0A%09%09%09NAMES%20%3D%20NAMES.toString().split('%20')%3B%0A%09%09%09if%20(!NAMES.length)%20return%20''%3B%0A%09%09%09NAMES.forEach(NAME%20%3D%3E%20%7B%0A%09%09%09%09this.setObjectLayer(%7B%20NAME%3A%20NAME%2C%20LAYERS%3A%20%221%20-%22%20%2B%20noCollideSeq%20%7D)%3B%0A%09%09%09%7D)%3B%0A%09%09%7D%0A%09%09createYesCollideSet(%7B%20NAMES%20%7D)%20%7B%0A%09%09%09NAMES%20%3D%20NAMES.toString().split('%20')%3B%0A%09%09%09if%20(!NAMES.length)%20return%20''%3B%0A%09%09%09NAMES.forEach(NAME%20%3D%3E%20%7B%0A%09%09%09%09this.setObjectLayer(%7B%20NAME%3A%20NAME%2C%20LAYERS%3A%20%221%22%20%7D)%3B%0A%09%09%09%7D)%3B%0A%09%09%7D%0A%09%09%0A%09%09getobjects()%20%7B%0A%09%09%09var%20bodynames%20%3D%20%5B%5D%3B%0A%09%09%09for%20(var%20bodyName%20in%20bodies)%20%7B%0A%09%09%09%09if%20(bodies.hasOwnProperty(bodyName))%20%7B%0A%09%09%09%09%09if%20(bodynames.length%20%3E%200)%20%7B%0A%09%09%09%09%09%09bodynames.push(%22%20%22%20%2B%20bodyName)%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09bodynames.push(bodyName)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09return%20Scratch.Cast.toString(bodynames)%3B%0A%09%09%7D%0A%0A%09%09destroyBodys()%20%7B%0A%09%09%09this.destroyJoints()%3B%0A%09%09%09for%20(var%20bodyName%20in%20bodies)%20%7B%0A%09%09%09%09if%20(bodies.hasOwnProperty(bodyName))%20%7B%0A%09%09%09%09%09this.destroyBody(%7BNAME%3AbodyName%7D)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09destroyBody(args)%20%7B%0A%09%09%09if%20(bodies%5Bargs.NAME%5D)%20%7B%0A%09%09%09%09b2Dworld.DestroyBody(bodies%5Bargs.NAME%5D)%3B%0A%09%09%09%09delete%20bodies%5Bargs.NAME%5D%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09setBodyAttr(args)%20%7B%0A%09%09%09var%20bds%20%3D%20args.NAME.split('%20')%3B%0A%09%09%09for%20(var%20i%20%3D%200%3B%20i%20%3C%20bds.length%3B%20i%2B%2B)%20%7B%0A%09%09%09%09var%20id%20%3D%20bds%5Bi%5D%3B%0A%09%09%09%09if%20(id.length%20%3E%200)%20%7B%0A%09%09%09%09%09var%20body%20%3D%20bodies%5Bid%5D%3B%0A%09%09%09%09%09if%20(body)%20%7B%0A%09%09%09%09%09%09switch%20(args.BODYATTR)%20%7B%0A%09%09%09%09%09%09%09case%20'damping'%3A%20body.SetLinearDamping(args.VALUE)%3B%20break%3B%0A%09%09%09%09%09%09%09case%20'rotational%20damping'%3A%20body.SetAngularDamping(args.VALUE)%3B%20break%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09getPressure(body)%20%7B%0A%09%09%09const%20world%20%3D%20body.GetWorld()%3B%0A%09%09%09const%20gravity%20%3D%20world.GetGravity()%3B%0A%09%09%09const%20gx%20%3D%20gravity.x%3B%0A%09%09%09const%20gy%20%3D%20gravity.y%3B%0A%09%09%09const%20gMag%20%3D%20Math.hypot(gx%2C%20gy)%3B%0A%09%09%09const%20mass%20%3D%20body.GetMass()%3B%0A%09%09%09const%20weight%20%3D%20mass%20*%20gMag%3B%0A%09%09%09const%20v%20%3D%20body.GetLinearVelocity()%3B%0A%0A%09%09%09let%20area%20%3D%200%3B%0A%09%09%09for%20(let%20f%20%3D%20body.GetFixtureList()%3B%20f%3B%20f%20%3D%20f.GetNext())%20%7B%0A%09%09%09%09const%20shape%20%3D%20f.GetShape()%3B%0A%09%09%09%09if%20(shape%20instanceof%20b2CircleShape)%20%7B%0A%09%09%09%09%09const%20r%20%3D%20shape.GetRadius()%3B%0A%09%09%09%09%09const%20a%20%3D%20Math.PI%20*%20r%20*%20r%3B%0A%09%09%09%09%09area%20%2B%3D%20a%3B%0A%09%09%09%09%7D%20else%20if%20(shape%20instanceof%20b2PolygonShape)%20%7B%0A%09%09%09%09%09const%20count%20%3D%20shape.GetVertexCount()%3B%0A%09%09%09%09%09const%20verts%20%3D%20shape.GetVertices()%3B%0A%09%09%09%09%09let%20a%20%3D%200%3B%0A%0A%09%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20count%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09%09const%20v0%20%3D%20verts%5Bi%5D%3B%0A%09%09%09%09%09%09const%20v1%20%3D%20verts%5B(i%20%2B%201)%20%25%20count%5D%3B%0A%09%09%09%09%09%09a%20%2B%3D%20v0.x%20*%20v1.y%20-%20v1.x%20*%20v0.y%3B%0A%09%09%09%09%09%7D%0A%0A%09%09%09%09%09const%20polyArea%20%3D%20Math.abs(a)%20*%200.5%3B%0A%09%09%09%09%09area%20%2B%3D%20polyArea%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09let%20contactForce%20%3D%200%3B%0A%09%09%09for%20(let%20ce%20%3D%20body.GetContactList()%3B%20ce%3B%20ce%20%3D%20ce.next)%20%7B%0A%09%09%09%09const%20contact%20%3D%20ce.contact%3B%0A%09%09%09%09if%20(!contact.IsTouching())%20continue%3B%0A%0A%09%09%09%09const%20manifold%20%3D%20contact.GetManifold()%3B%0A%09%09%09%09const%20pc%20%3D%20manifold.m_pointCount%3B%0A%0A%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20pc%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09contactForce%20%2B%3D%20manifold.m_points%5Bi%5D.m_normalImpulse%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09let%20velAdjust%20%3D%200%3B%0A%09%09%09if%20(gx%20!%3D%3D%200)%20%7B%0A%09%09%09%09const%20valX%20%3D%20v.x%20%2F%20(100%20%2F%20Math.abs(gx))%3B%0A%09%09%09%09if%20(v.x%20*%20gx%20%3E%200)%20velAdjust%20-%3D%20Math.abs(valX)%3B%0A%09%09%09%09else%20velAdjust%20%2B%3D%20Math.abs(valX)%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09const%20valX%20%3D%20Math.abs(v.x)%20%2F%20100%3B%0A%09%09%09%09velAdjust%20%2B%3D%20valX%3B%0A%09%09%09%7D%0A%0A%09%09%09if%20(gy%20!%3D%3D%200)%20%7B%0A%09%09%09%09const%20valY%20%3D%20v.y%20%2F%20(100%20%2F%20Math.abs(gy))%3B%0A%09%09%09%09if%20(v.y%20*%20gy%20%3E%200)%20velAdjust%20-%3D%20Math.abs(valY)%3B%0A%09%09%09%09else%20velAdjust%20%2B%3D%20Math.abs(valY)%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09const%20valY%20%3D%20Math.abs(v.y)%20%2F%20100%3B%0A%09%09%09%09velAdjust%20%2B%3D%20valY%3B%0A%09%09%09%7D%0A%0A%09%09%09if%20(area%20%3D%3D%3D%200)%20%7B%0A%09%09%09%09return%200%3B%0A%09%09%09%7D%0A%0A%09%09%09const%20effectiveForce%20%3D%20weight%20%2B%20contactForce%20%2B%20velAdjust%3B%0A%09%09%09const%20pressure%20%3D%20effectiveForce%20%2F%20area%3B%0A%0A%09%09%09return%20pressure%3B%0A%09%09%7D%0A%0A%09%09getBodyAttr(args)%20%7B%0A%09%09%09var%20body%20%3D%20bodies%5Bargs.NAME%5D%3B%0A%09%09%09if%20(!body)%20return%20''%3B%0A%09%09%09switch%20(args.BODYATTRREAD)%20%7B%0A%09%09%09%09case%20'x'%3A%20return%20body.GetPosition().x%20*%20b2Dzoom%3B%0A%09%09%09%09case%20'y'%3A%20return%20body.GetPosition().y%20*%20b2Dzoom%3B%0A%09%09%09%09case%20'direction'%3A%20return%2090%20-%20(body.GetAngle()%20%2F%20toRad)%3B%0A%0A%09%09%09%09case%20'Xvel'%3A%20return%20body.GetLinearVelocity().x%3B%0A%09%09%09%09case%20'Yvel'%3A%20return%20body.GetLinearVelocity().y%3B%0A%09%09%09%09case%20'Dvel'%3A%20return%20body.GetAngularVelocity()%3B%0A%0A%09%09%09%09case%20'damping'%3A%20return%20body.GetAngularDamping()%3B%0A%09%09%09%09case%20'rotational%20damping'%3A%20return%20body.GetLinearDamping()%3B%0A%0A%09%09%09%09case%20'awake'%3A%20return%20body.IsAwake()%20%3F%201%20%3A%200%3B%0A%0A%09%09%09%09case%20'type'%3A%20return%20body.GetType()%20%3D%3D%3D%20Box2D.Dynamics.b2Body.b2_staticBody%20%3F%201%20%3A%200%3B%0A%0A%09%09%09%09case%20'friction'%3A%20return%20this.getFriction(%7B%20NAME%3A%20args.NAME%20%7D)%3B%0A%09%09%09%09case%20'pressure'%3A%20return%20this.getPressure(body)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09moveto(args)%20%7B%0A%09%09%09var%20body%20%3D%20bodies%5Bargs.NAME%5D%3B%0A%09%09%09if%20(!body)%20return%20''%3B%0A%0A%09%09%09var%20desiredPosition%20%3D%20new%20b2Vec2(args.X%20%2F%20b2Dzoom%2C%20args.Y%20%2F%20b2Dzoom)%3B%0A%09%09%09body.SetPosition(desiredPosition)%3B%0A%09%09%09body.SetAwake(true)%3B%0A%09%09%7D%0A%0A%09%09rotateto(args)%20%7B%0A%09%09%09var%20body%20%3D%20bodies%5Bargs.NAME%5D%3B%0A%09%09%09if%20(!body)%20return%20''%3B%0A%0A%09%09%09var%20desiredRotation%20%3D%20(180%20-%20args.ROT%20-%2090)%20*%20toRad%3B%0A%09%09%09body.SetAngle(desiredRotation)%3B%0A%09%09%09body.SetAwake(true)%3B%0A%09%09%7D%0A%0A%09%09getBodyCB(fixture)%20%7B%0A%09%09%09if%20(fixture.GetBody().GetType()%20!%3D%20b2Body.b2_staticBody)%20%7B%0A%09%09%09%09if%20(fixture.GetShape().TestPoint(fixture.GetBody().GetTransform()%2C%20mousePVec))%20%7B%0A%09%09%09%09%09selectedBody%20%3D%20fixture.GetBody()%3B%0A%09%09%09%09%09return%20false%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09return%20true%3B%0A%09%09%7D%3B%0A%0A%09%09getImpacts()%20%7B%0A%09%09%09return%20this.impacts.join('%2C%20')%3B%0A%09%09%7D%0A%0A%09%09lastimpacts%20%3D%20%5B%5D%0A%09%09whenImpactDetected(%7B%20NAME%20%7D)%20%7B%0A%09%09%09var%20body%20%3D%20bodies%5BNAME%5D%3B%0A%09%09%09if%20(!body)%20return%20''%3B%0A%09%09%09return%20this.impacts.includes(NAME)%20%26%26%20(this.lastimpacts.filter(item%20%3D%3E%20item%20%3D%3D%3D%20NAME).length%20!%3D%20this.impacts.filter(item%20%3D%3E%20item%20%3D%3D%3D%20NAME).length)%3B%0A%09%09%7D%0A%0A%09%09impactDetectionBool(%7B%20NAME%20%7D)%20%7B%0A%09%09%09var%20body%20%3D%20bodies%5BNAME%5D%3B%0A%09%09%09if%20(!body)%20return%20''%3B%0A%09%09%09return%20this.impacts.includes(NAME)%20%26%26%20(this.lastimpacts.filter(item%20%3D%3E%20item%20%3D%3D%3D%20NAME).length%20%3E%20this.impacts.filter(item%20%3D%3E%20item%20%3D%3D%3D%20NAME).length)%3B%0A%09%09%7D%0A%0A%09%09scrapingDetectionBool(%7B%20NAME%20%7D)%20%7B%0A%09%09%09var%20body%20%3D%20bodies%5BNAME%5D%3B%0A%09%09%09if%20(!body)%20return%20''%3B%0A%09%09%09var%20result%20%3D%20this.scraping.includes(NAME)%3B%0A%09%09%09return%20result%3B%0A%09%09%7D%0A%0A%09%09getFriction(%7B%20NAME%20%7D)%20%7B%0A%09%09%09const%20body%20%3D%20bodies%5BNAME%5D%3B%0A%09%09%09if%20(!body)%20return%200%3B%0A%0A%09%09%09let%20totalFrictionForce%20%3D%200%3B%0A%0A%09%09%09for%20(let%20contactEdge%20%3D%20body.GetContactList()%3B%20contactEdge%3B%20contactEdge%20%3D%20contactEdge.next)%20%7B%0A%09%09%09%09const%20contact%20%3D%20contactEdge.contact%3B%0A%09%09%09%09if%20(!contact.IsTouching())%20continue%3B%0A%0A%09%09%09%09const%20fixtureA%20%3D%20contact.GetFixtureA()%3B%0A%09%09%09%09const%20fixtureB%20%3D%20contact.GetFixtureB()%3B%0A%0A%09%09%09%09const%20manifold%20%3D%20contact.GetManifold()%3B%0A%09%09%09%09if%20(!manifold%20%7C%7C%20manifold.m_points.length%20%3D%3D%3D%200)%20continue%3B%0A%0A%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20manifold.m_points.length%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09const%20contactPoint%20%3D%20manifold.m_points%5Bi%5D%3B%0A%0A%09%09%09%09%09const%20normalImpulse%20%3D%20contactPoint.normalImpulse%3B%0A%09%09%09%09%09if%20(normalImpulse%20%3D%3D%3D%200)%20continue%3B%0A%0A%09%09%09%09%09const%20frictionCoefficient%20%3D%20Math.sqrt(fixtureA.GetFriction()%20*%20fixtureB.GetFriction())%3B%0A%0A%09%09%09%09%09console.log(frictionCoefficient%2C%20normalImpulse)%3B%0A%09%09%09%09%09const%20frictionForce%20%3D%20frictionCoefficient%20*%20normalImpulse%3B%0A%0A%09%09%09%09%09totalFrictionForce%20%2B%3D%20frictionForce%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09return%20totalFrictionForce%3B%0A%09%09%7D%0A%0A%09%09getTouching(%7B%20NAME%20%7D)%20%7B%0A%09%09%09var%20body%20%3D%20bodies%5BNAME%5D%3B%0A%09%09%09if%20(!body)%20return%20''%3B%0A%09%09%09%0A%09%09%09var%20touchingObjects%20%3D%20%5B%5D%3B%0A%09%09%09var%20contacts%20%3D%20body.GetContactList()%3B%0A%09%09%09%0A%09%09%09while%20(contacts)%20%7B%0A%09%09%09%09if%20(contacts.contact.IsTouching())%20%7B%0A%09%09%09%09%09var%20otherBody%20%3D%20contacts.contact.GetFixtureA().GetBody()%20%3D%3D%3D%20body%20%3F%20contacts.contact.GetFixtureB().GetBody()%20%3A%20contacts.contact.GetFixtureA().GetBody()%3B%0A%09%09%09%09%09if%20(otherBody%20%26%26%20otherBody.uid)%20%7B%0A%09%09%09%09%09%09touchingObjects.push(otherBody.uid)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09contacts%20%3D%20contacts.next%3B%0A%09%09%09%7D%0A%09%09%09%0A%09%09%09return%20touchingObjects.join('%2C%20')%3B%0A%09%09%7D%0A%0A%09%09getBodyIDAt(args)%20%7B%0A%09%09%09if%20(args.type%20%3D%3D%20%22static%22)%20%7B%0A%09%09%09%09return%20this.getBodyIDAtstatic(args)%3B%0A%09%09%09%7D%20else%20if%20(args.type%20%3D%3D%20%22dynamic%22)%20%7B%0A%09%09%09%09return%20this.getBodyIDAtdynamic(args)%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09return%20this.getBodyIDAtany(args)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09getBodyIDAtany(args)%20%7B%0A%09%09%09var%20x%20%3D%20args.X%3B%0A%09%09%09var%20y%20%3D%20args.Y%3B%0A%0A%09%09%09var%20mousePVec%20%3D%20new%20b2Vec2(x%20%2F%20b2Dzoom%2C%20y%20%2F%20b2Dzoom)%3B%0A%09%09%09var%20aabb%20%3D%20new%20b2AABB()%3B%0A%09%09%09aabb.lowerBound.Set(mousePVec.x%20-%200.001%2C%20mousePVec.y%20-%200.001)%3B%0A%09%09%09aabb.upperBound.Set(mousePVec.x%20%2B%200.001%2C%20mousePVec.y%20%2B%200.001)%3B%0A%0A%09%09%09selectedBody%20%3D%20null%3B%0A%0A%09%09%09%2F%2F%20Define%20the%20callback%20to%20check%20fixtures%20within%20the%20AABB%0A%09%09%09var%20getStaticBodyCB%20%3D%20function(fixture)%20%7B%0A%09%09%09%09var%20body%20%3D%20fixture.GetBody()%3B%0A%09%09%09%09if%20(fixture.TestPoint(mousePVec))%20%7B%20%20%2F%2F%20Check%20if%20the%20point%20is%20within%20the%20fixture%0A%09%09%09%09%09selectedBody%20%3D%20body%3B%0A%09%09%09%09%09return%20false%3B%20%2F%2F%20Stop%20querying%20once%20a%20hit%20is%20found%0A%09%09%09%09%7D%0A%09%09%09%09return%20true%3B%20%2F%2F%20Continue%20querying%20other%20fixtures%0A%09%09%09%7D%3B%0A%0A%09%09%09b2Dworld.QueryAABB(getStaticBodyCB%2C%20aabb)%3B%0A%0A%09%09%09return%20selectedBody%20%3F%20selectedBody.uid%20%3A%20''%3B%0A%09%09%7D%0A%0A%09%09getBodyIDAtdynamic(args)%20%7B%0A%09%09%09var%20x%20%3D%20args.X%3B%0A%09%09%09var%20y%20%3D%20args.Y%3B%0A%0A%09%09%09mousePVec%20%3D%20new%20b2Vec2(x%20%2F%20b2Dzoom%2C%20y%20%2F%20b2Dzoom)%3B%0A%09%09%09var%20aabb%20%3D%20new%20b2AABB()%3B%0A%09%09%09aabb.lowerBound.Set(mousePVec.x%20-%200.001%2C%20mousePVec.y%20-%200.001)%3B%0A%09%09%09aabb.upperBound.Set(mousePVec.x%20%2B%200.001%2C%20mousePVec.y%20%2B%200.001)%3B%0A%0A%09%09%09%2F%2F%20Query%20the%20b2Dworld%20for%20overlapping%20shapes.%0A%09%09%09selectedBody%20%3D%20null%3B%0A%09%09%09b2Dworld.QueryAABB(this.getBodyCB%2C%20aabb)%3B%0A%0A%09%09%09return%20selectedBody%20%3F%20selectedBody.uid%20%3A%20''%3B%0A%09%09%7D%0A%0A%09%09getBodyIDAtstatic(args)%20%7B%0A%09%09%09var%20x%20%3D%20args.X%3B%0A%09%09%09var%20y%20%3D%20args.Y%3B%0A%0A%09%09%09var%20mousePVec%20%3D%20new%20b2Vec2(x%20%2F%20b2Dzoom%2C%20y%20%2F%20b2Dzoom)%3B%0A%09%09%09var%20aabb%20%3D%20new%20b2AABB()%3B%0A%09%09%09aabb.lowerBound.Set(mousePVec.x%20-%200.001%2C%20mousePVec.y%20-%200.001)%3B%0A%09%09%09aabb.upperBound.Set(mousePVec.x%20%2B%200.001%2C%20mousePVec.y%20%2B%200.001)%3B%0A%0A%09%09%09selectedBody%20%3D%20null%3B%0A%0A%09%09%09var%20getStaticBodyCB%20%3D%20function(fixture)%20%7B%0A%09%09%09%09var%20body%20%3D%20fixture.GetBody()%3B%0A%09%09%09%09if%20(body.GetType()%20%3D%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%09%09%09%09%09if%20(fixture.TestPoint(mousePVec))%20%7B%0A%09%09%09%09%09%09selectedBody%20%3D%20body%3B%0A%09%09%09%09%09%09return%20false%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09return%20true%3B%0A%09%09%09%7D%3B%0A%0A%09%09%09b2Dworld.QueryAABB(getStaticBodyCB%2C%20aabb)%3B%0A%0A%09%09%09return%20selectedBody%20%3F%20selectedBody.uid%20%3A%20''%3B%0A%09%09%7D%0A%0A%09%09applyAngForceToBody(args)%20%7B%0A%09%09%09var%20ftype%20%3D%20%2F*args.ANGFORCETYPE*%2F%20'Impulse'%3B%0A%09%09%09var%20bodyID%20%3D%20args.NAME%3B%0A%09%09%09var%20pow%20%3D%20args.POWER%3B%0A%0A%09%09%09var%20body%20%3D%20bodies%5BbodyID%5D%3B%0A%09%09%09if%20(!body)%0A%09%09%09%09return%3B%0A%0A%09%09%09if%20(ftype%20%3D%3D%3D%20'Impulse')%20%7B%0A%09%09%09%09body.ApplyTorque(-pow)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09applyForceToBody(args)%20%7B%0A%09%09%09var%20x%20%3D%20args.X%3B%0A%09%09%09var%20y%20%3D%20args.Y%3B%0A%09%09%09var%20ftype%20%3D%20args.FORCETYPE%3B%0A%09%09%09var%20pow%20%3D%20args.POWER%3B%0A%09%09%09var%20dir%20%3D%20args.DIR%3B%0A%0A%09%09%09var%20body%20%3D%20bodies%5Bargs.NAME%5D%3B%0A%09%09%09if%20(!body)%0A%09%09%09%09return%3B%0A%0A%09%09%09dir%20%3D%20(90%20-%20dir)%20*%20toRad%3B%0A%0A%09%09%09if%20(ftype%20%3D%3D%3D%20'Impulse')%20%7B%0A%09%09%09%09body.ApplyImpulse(%7B%20x%3A%20pow%20*%20Math.cos(dir)%2C%20y%3A%20pow%20*%20Math.sin(dir)%20%7D%2C%20body.GetWorldPoint(%7B%20x%3A%20x%20%2F%20b2Dzoom%2C%20y%3A%20y%20%2F%20b2Dzoom%20%7D))%3B%0A%09%09%09%7D%20else%20if%20(ftype%20%3D%3D%3D%20'World%20Impulse')%20%7B%0A%09%09%09%09body.ApplyForce(%7B%20x%3A%20pow%20*%20Math.cos(dir)%2C%20y%3A%20pow%20*%20Math.sin(dir)%20%7D%2C%20%7B%20x%3A%20x%20%2F%20b2Dzoom%2C%20y%3A%20y%20%2F%20b2Dzoom%20%7D)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09defineSpring(args)%20%7B%0A%09%09%09var%20len%20%3D%20args.LENGTH%3B%0A%09%09%09var%20damp%20%3D%20args.DAMPING%3B%0A%09%09%09var%20freq%20%3D%20args.FREQ%3B%0A%0A%09%09%09defSpring.len%20%3D%20len%20%3C%200.1%20%3F%200.1%20%3A%20len%20%2F%20b2Dzoom%3B%0A%09%09%09defSpring.damp%20%3D%20damp%20%3C%200%20%3F%200.7%20%3A%20damp%3B%0A%09%09%09defSpring.freq%20%3D%20freq%20%3E%200%20%3F%20freq%20%3A%205%3B%0A%09%09%7D%0A%0A%09%09definePrismatic(args)%20%7B%0A%09%09%09var%20directionRadians%20%3D%20args.DIR%20-%2090%20*%20Math.PI%20%2F%20180%3B%0A%09%09%09prb2djaxisX%20%3D%20Math.cos(directionRadians)%3B%0A%09%09%09prb2djaxisY%20%3D%20Math.sin(directionRadians)%3B%0A%09%09%09prb2dju%20%3D%20args.HIGH%3B%0A%09%09%09prb2djl%20%3D%20args.LOW%3B%0A%09%09%7D%0A%0A%09%09getjoints()%20%7B%0A%09%09%09var%20jointnames%20%3D%20%5B%5D%3B%0A%09%09%09for%20(var%20jointName%20in%20joints)%20%7B%0A%09%09%09%09if%20(joints.hasOwnProperty(jointName))%20%7B%0A%09%09%09%09%09if%20(jointnames.length%20%3E%200)%20%7B%0A%09%09%09%09%09%09jointnames.push(%22%20%22%20%2B%20jointName)%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09jointnames.push(jointName)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09return%20Scratch.Cast.toString(jointnames)%3B%0A%09%09%7D%0A%0A%09%09destroyJoints()%20%7B%0A%09%09%09for%20(var%20jointName%20in%20joints)%20%7B%0A%09%09%09%09if%20(joints.hasOwnProperty(jointName))%20%7B%0A%09%09%09%09%09this.destroyJoint(%7B%20JOINTID%20%3A%20jointName%20%7D)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09setJointTarget(args)%20%7B%0A%09%09%09var%20joint%20%3D%20joints%5Bargs.JOINTID%5D%3B%0A%09%09%09if%20(joint)%20%7B%0A%09%09%09%09joint.SetTarget(new%20b2Vec2(args.X%20%2F%20b2Dzoom%2C%20args.Y%20%2F%20b2Dzoom))%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09CreateMouseJoint(args)%20%7B%0A%09%09%09var%20jName%20%3D%20args.JOINTID%3B%0A%09%09%09var%20force%20%3D%20args.FORCE%3B%0A%09%09%09var%20bodyID%20%3D%20args.BODY1%3B%0A%09%09%09var%20x%20%3D%20args.X1%3B%0A%09%09%09var%20y%20%3D%20args.Y1%3B%0A%0A%09%09%09if%20(jName.length%20%3E%200)%20this.destroyJoint(%7B%20JOINTID%20%3A%20jName%7D)%3B%0A%0A%09%09%09if%20(bodyID%20%3D%3D%20'')%20bodyID%20%3D%20null%3B%0A%09%09%09if%20(!bodyID)%20return%20''%3B%0A%0A%09%09%09var%20body%20%3D%20bodyID%20%3F%20bodies%5BbodyID%5D%20%3A%20b2Dworld.GetGroundBody()%3B%0A%0A%09%09%09if%20(!body)%20return%20''%3B%0A%0A%09%09%09var%20md%20%3D%20new%20b2MouseJointDef()%3B%0A%09%09%09md.bodyB%20%3D%20body%3B%0A%09%09%09var%20wc%20%3D%20body.GetWorldCenter()%0A%09%09%09md.target.Set(wc.x%20-%20(x%20%2F%20b2Dzoom)%2C%20wc.y%20-%20(y%20%2F%20b2Dzoom))%0A%09%09%09md.bodyA%20%3D%20b2Dworld.GetGroundBody()%3B%0A%0A%09%09%09md.collideConnected%20%3D%20true%3B%0A%09%09%09md.maxForce%20%3D%20force%20*%20body.GetMass()%3B%0A%0A%09%09%09var%20joint%20%3D%20b2Dworld.CreateJoint(md)%3B%0A%09%09%09body.SetAwake(true)%3B%0A%0A%09%09%09if%20(jName.length%20%3D%3D%200)%20jName%20%3D%20'_'%20%2B%20(%2B%2Bujid_seq)%3B%0A%09%09%09joints%5BjName%5D%20%3D%20joint%3B%0A%09%09%7D%0A%0A%09%09createJointOfType(args)%20%7B%0A%09%09%09var%20jName%20%3D%20args.JOINTID%3B%0A%09%09%09var%20typ%20%3D%20args.JOINTTYPE%3B%0A%09%09%09var%20bodyID%20%3D%20args.BODY1%3B%0A%09%09%09var%20x%20%3D%20args.X1%3B%0A%09%09%09var%20y%20%3D%20args.Y1%3B%0A%09%09%09var%20bodyID2%20%3D%20args.BODY2%0A%09%09%09var%20x2%20%3D%20args.X2%3B%0A%09%09%09var%20y2%20%3D%20args.Y2%3B%0A%0A%09%09%09if%20(jName.length%20%3E%200)%20this.destroyJoint(%7B%20JOINTID%20%3A%20jName%7D)%3B%0A%0A%09%09%09if%20(bodyID%20%3D%3D%20'')%20bodyID%20%3D%20null%3B%0A%09%09%09if%20(bodyID2%20%3D%3D%20'')%20bodyID2%20%3D%20null%3B%0A%09%09%09if%20(!bodyID%20%26%26%20!bodyID2)%20return%20''%3B%0A%0A%09%09%09var%20body%20%3D%20bodyID%20%3F%20bodies%5BbodyID%5D%20%3A%20b2Dworld.GetGroundBody()%3B%0A%09%09%09var%20body2%20%3D%20bodyID2%20%3F%20bodies%5BbodyID2%5D%20%3A%20b2Dworld.GetGroundBody()%3B%0A%0A%09%09%09if%20(!body%20%7C%7C%20!body2)%20return%20''%3B%0A%0A%09%09%09var%20md%3B%0A%09%09%09switch%20(typ)%20%7B%0A%09%09%09%09case%20'Spring'%3A%0A%09%09%09%09%09md%20%3D%20new%20Box2D.Dynamics.Joints.b2DistanceJointDef()%3B%0A%09%09%09%09%09md.length%20%3D%20defSpring.len%3B%0A%09%09%09%09%09md.dampingRatio%20%3D%20defSpring.damp%3B%0A%09%09%09%09%09md.frequencyHz%20%3D%20defSpring.freq%3B%0A%09%09%09%09%09md.bodyA%20%3D%20body%3B%0A%09%09%09%09%09md.bodyB%20%3D%20body2%3B%0A%09%09%09%09%09md.localAnchorA%20%3D%20%7B%20x%3A%20x%20%2F%20b2Dzoom%2C%20y%3A%20y%20%2F%20b2Dzoom%20%7D%3B%0A%09%09%09%09%09md.localAnchorB%20%3D%20%7B%20x%3A%20x2%20%2F%20b2Dzoom%2C%20y%3A%20y2%20%2F%20b2Dzoom%20%7D%3B%0A%09%09%09%09break%3B%0A%0A%09%09%09%09case%20'Rotating'%3A%0A%09%09%09%09%09md%20%3D%20new%20Box2D.Dynamics.Joints.b2RevoluteJointDef()%3B%0A%09%09%09%09%09md.bodyA%20%3D%20body%3B%0A%09%09%09%09%09md.bodyB%20%3D%20body2%3B%0A%09%09%09%09%09md.localAnchorA%20%3D%20%7B%20x%3A%20x%20%2F%20b2Dzoom%2C%20y%3A%20y%20%2F%20b2Dzoom%20%7D%3B%0A%09%09%09%09%09md.localAnchorB%20%3D%20%7B%20x%3A%20x2%20%2F%20b2Dzoom%2C%20y%3A%20y2%20%2F%20b2Dzoom%20%7D%3B%0A%09%09%09%09break%3B%0A%0A%09%09%09%09case%20'Slider'%3A%0A%09%09%09%09%09md%20%3D%20new%20Box2D.Dynamics.Joints.b2PrismaticJointDef()%3B%0A%09%09%09%09%09md.Initialize(body%2C%20body2%2C%20body.GetWorldCenter()%2C%20new%20b2Vec2(prb2djaxisX%2C%20prb2djaxisY))%3B%0A%09%09%09%09%09md.localAnchorA%20%3D%20%7B%20x%3A%20x%20%2F%20b2Dzoom%2C%20y%3A%20y%20%2F%20b2Dzoom%20%7D%3B%0A%09%09%09%09%09md.localAnchorB%20%3D%20%7B%20x%3A%20x2%20%2F%20b2Dzoom%2C%20y%3A%20y2%20%2F%20b2Dzoom%20%7D%3B%0A%09%09%09%09%09md.enableLimit%20%3D%20true%3B%0A%09%09%09%09%09md.lowerTranslation%20%3D%20prb2djl%20%2F%20(b2Dzoom%20%2F%201.1)%3B%0A%09%09%09%09%09md.upperTranslation%20%3D%20prb2dju%20%2F%20(b2Dzoom%20%2F%201.1)%3B%0A%09%09%09%09break%3B%0A%0A%09%09%09%09case%20'Weld'%3A%0A%09%09%09%09%09md%20%3D%20new%20Box2D.Dynamics.Joints.b2WeldJointDef()%3B%0A%09%09%09%09%09md.bodyA%20%3D%20body%3B%0A%09%09%09%09%09md.bodyB%20%3D%20body2%3B%0A%09%09%09%09%09md.localAnchorA%20%3D%20%7B%20x%3A%20x%20%2F%20b2Dzoom%2C%20y%3A%20y%20%2F%20b2Dzoom%20%7D%3B%0A%09%09%09%09%09md.localAnchorB%20%3D%20%7B%20x%3A%20x2%20%2F%20b2Dzoom%2C%20y%3A%20y2%20%2F%20b2Dzoom%20%7D%3B%0A%09%09%09%09%09const%20angleDifference%20%3D%20body2.GetAngle()%20-%20body.GetAngle()%3B%0A%09%09%09%09%09md.referenceAngle%20%3D%20angleDifference%3B%0A%09%09%09%09break%3B%0A%0A%09%09%09%09case%20'Mouse'%3A%0A%09%09%09%09%09var%20md%20%3D%20new%20b2MouseJointDef()%3B%0A%09%09%09%09%09if%20(bodyID%20%3D%3D%20'')%20%7B%0A%09%09%09%09%09%09md.bodyB%20%3D%20body2%3B%0A%09%09%09%09%09%09md.target.Set(x2%20%2F%20b2Dzoom%2C%20y2%20%2F%20b2Dzoom)%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09md.bodyB%20%3D%20body%3B%0A%09%09%09%09%09%09md.target.Set(x%20%2F%20b2Dzoom%2C%20y%20%2F%20b2Dzoom)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09md.bodyA%20%3D%20b2Dworld.GetGroundBody()%3B%0A%09%09%09%09%09md.collideConnected%20%3D%20true%3B%0A%09%09%09%09%09md.maxForce%20%3D%20300.0%20*%20body.GetMass()%3B%0A%09%09%09%09break%3B%0A%09%09%09%7D%0A%0A%09%09%09%2F%2Fmd.collideConnected%20%3D%20true%3B%0A%09%09%09%2F%2Fmd.maxForce%20%3D%20300.0%20*%20body.GetMass()%3B%0A%09%09%09var%20joint%20%3D%20b2Dworld.CreateJoint(md)%3B%0A%09%09%09if%20(bodyID.length%20%3E%200)%20%7B%0A%09%09%09%09body.SetAwake(true)%3B%0A%09%09%09%7D%0A%09%09%09if%20(bodyID2.length%20%3E%200)%20%7B%0A%09%09%09%09body2.SetAwake(true)%3B%0A%09%09%09%7D%0A%0A%09%09%09if%20(jName.length%20%3D%3D%200)%20jName%20%3D%20'_'%20%2B%20(%2B%2Bujid_seq)%3B%0A%09%09%09joints%5BjName%5D%20%3D%20joint%3B%0A%09%09%7D%0A%0A%09%09destroyJoint(args)%20%7B%0A%09%09%09var%20joint%20%3D%20joints%5Bargs.JOINTID%5D%3B%0A%09%09%09if%20(joint)%20%7B%0A%09%09%09%09b2Dworld.DestroyJoint(joint)%3B%0A%09%09%09%09delete%20joints%5Bargs.JOINTID%5D%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09setJointAttr(args)%20%7B%0A%09%09%09var%20attr%20%3D%20args.JOINTATTR%3B%0A%09%09%09var%20jointID%20%3D%20args.JOINTID%3B%0A%09%09%09var%20val%20%3D%20args.VALUE%3B%0A%0A%09%09%09%2F%2F%20JointAttr%3A%20%5B'Motor%20On'%2C'Motor%20Speed'%2C'Max%20Torque'%2C%20'Limits%20On'%2C'Lower%20Limit'%2C'Upper%20Limit'%5D%2C%0A%09%09%09var%20jointids%20%3D%20jointID.split('%20')%3B%0A%09%09%09for%20(var%20i%20%3D%200%3B%20i%20%3C%20jointids.length%3B%20i%2B%2B)%20%7B%0A%09%09%09%09var%20joint%20%3D%20joints%5Bjointids%5Bi%5D%5D%3B%0A%09%09%09%09if%20(joint)%20%7B%0A%09%09%09%09%09try%20%7B%0A%09%09%09%09%09%09switch%20(attr)%20%7B%0A%09%09%09%09%09%09%09case%20'Motor%20On'%3A%20joint.EnableMotor(val%20%3E%200)%3B%20break%3B%0A%09%09%09%09%09%09%09case%20'Motor%20Speed'%3A%20joint.SetMotorSpeed(val)%3B%20break%3B%0A%09%09%09%09%09%09%09case%20'Max%20Torque'%3A%20joint.SetMaxMotorTorque(val)%3B%20break%3B%0A%0A%09%09%09%09%09%09%09case%20'Limits%20On'%3A%20joint.EnableLimit(val%20%3E%200)%3B%20break%3B%0A%0A%09%09%09%09%09%09%09case%20'Lower%20Limit'%3A%20joint.SetLimits(joint.GetJointAngle()%20%2B%20val%20*%20toRad%2C%20joint.GetUpperLimit())%3B%20break%3B%0A%09%09%09%09%09%09%09case%20'Upper%20Limit'%3A%20joint.SetLimits(joint.GetLowerLimit()%2C%20joint.GetJointAngle()%20%2B%20val%20*%20toRad)%3B%20break%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%20catch%20(error)%20%7B%0A%09%09%09%09%09%09switch%20(attr)%20%7B%0A%09%09%09%09%09%09%09case%20'Lower%20Limit'%3A%20joint.GetLowerLimit().Set(new%20b2Vec2(val%2C%20val))%3B%20joint.SetLimits()%3B%20break%3B%0A%09%09%09%09%09%09%09case%20'Upper%20Limit'%3A%20joint.GetUpperLimit().Set(new%20b2Vec2(val%2C%20val))%3B%20joint.SetLimits()%3B%20break%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09getJointAttr(args)%20%7B%0A%09%09%09var%20attr%20%3D%20args.JOINTATTRREAD%3B%0A%09%09%09var%20jointID%20%3D%20args.JOINTID%3B%0A%0A%09%09%09%2F%2F%20JointAttrRead%3A%20%5B'Angle'%2C'Speed'%2C'Motor%20Torque'%2C%20'Reaction%20Torque'%5D%2C%0A%09%09%09var%20joint%20%3D%20joints%5BjointID%5D%3B%0A%09%09%09if%20(joint)%20%7B%0A%09%09%09%09try%20%7B%0A%09%09%09%09%09switch%20(attr)%20%7B%0A%09%09%09%09%09%09case%20'Angle'%3A%20return%20joint.GetJointAngle()%20%2F%20toRad%3B%0A%09%09%09%09%09%09case%20'Speed'%3A%20return%20joint.GetJointSpeed()%3B%0A%09%09%09%09%09%09case%20'Motor%20Torque'%3A%20return%20joint.GetMotorTorque()%3B%0A%09%09%09%09%09%09case%20'Reaction%20Torque'%3A%20return%20joint.GetReactionTorque()%3B%0A%0A%09%09%09%09%09%09case%20'Tension'%3A%0A%09%09%09%09%09%09%09var%20force%20%3D%20joint.GetReactionForce(1)%3B%0A%09%09%09%09%09%09%09var%20tension%20%3D%20Math.sqrt(force.x%20*%20force.x%20%2B%20force.y%20*%20force.y)%3B%0A%09%09%09%09%09%09%09if%20(!joint.GetBodyA().IsAwake()%20%26%26%20!joint.GetBodyB().IsAwake())%20%7B%0A%09%09%09%09%09%09%09%09tension%20%3D%200%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09return%20Math.floor(tension%20*%20100)%20%2F%2010%3B%0A%0A%09%09%09%09%09%09%2F%2F%20Sliders%20only%0A%09%09%09%09%09%09case%20'Lower%20Limit'%3A%20return%20joint.GetLowerLimit()%3B%0A%09%09%09%09%09%09case%20'Upper%20Limit'%3A%20return%20joint.GetUpperLimit()%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%20catch%20(error)%20%7B%0A%09%09%09%09%09return%20''%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09setsimspeed(args)%20%7B%0A%09%09%09simspeed%20%3D%20args.VALUE%3B%0A%09%09%7D%0A%0A%09%09getsimspeed()%20%7B%0A%09%09%09return%20simspeed%3B%0A%09%09%7D%0A%0A%09%09physoptions(args)%20%7B%0A%09%09%09b2Dworld.SetContinuousPhysics(args.CONPHYS)%3B%0A%09%09%09b2Dworld.SetWarmStarting(args.WARMSTART)%3B%0A%09%09%09positerations%20%3D%20args.POS%3B%0A%09%09%09if%20(positerations%20%3C%3D%200)%20%7B%0A%09%09%09%09positerations%20%3D%200.0001%3B%0A%09%09%09%7D%0A%09%09%09veliterations%20%3D%20args.VEL%3B%0A%09%09%09if%20(veliterations%20%3C%3D%200)%20%7B%0A%09%09%09%09veliterations%20%3D%200.0001%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09stepSimulation()%20%7B%0A%09%09%09var%20secondsimspeed%20%3D%20Math.abs(simspeed%20%2B%2030)%3B%0A%09%09%09if%20(secondsimspeed%20%3D%3D%200)%20secondsimspeed%20%3D%201%3B%0A%0A%09%09%09this.impacts%20%3D%20%5B%5D%3B%0A%09%09%09this.scraping%20%3D%20%5B%5D%3B%0A%0A%09%09%09for%20(let%20name%20in%20bodies)%20%7B%0A%09%09%09%09const%20body%20%3D%20bodies%5Bname%5D%3B%0A%09%09%09%09if%20(!body)%20continue%3B%0A%0A%09%09%09%09let%20contacts%20%3D%20body.GetContactList()%3B%0A%09%09%09%09while%20(contacts)%20%7B%0A%09%09%09%09%09const%20contact%20%3D%20contacts.contact%3B%0A%09%09%09%09%09if%20(contact.IsTouching())%20%7B%0A%09%09%09%09%09%09this.scraping.push(name)%3B%0A%09%09%09%09%09%09this.impacts.push(name)%3B%0A%0A%09%09%09%09%09%09%2F%2F%20const%20manifold%20%3D%20contact.GetManifold()%3B%0A%09%09%09%09%09%09%2F%2F%20if%20(manifold%20%26%26%20manifold.m_pointCount%20%3E%200)%20%7B%0A%09%09%09%09%09%09%2F%2F%20%20%20const%20impulse%20%3D%20manifold.m_points%5B0%5D.normalImpulse%20%7C%7C%200%3B%0A%09%09%09%09%09%09%2F%2F%20%20%20if%20(impulse%20%3E%200)%20%7B%0A%09%09%09%09%09%09%2F%2F%20%20%20%20%20this.impacts.push(name)%3B%0A%09%09%09%09%09%09%2F%2F%20%20%20%7D%0A%09%09%09%09%09%09%2F%2F%20%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%09contacts%20%3D%20contacts.next%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09Scratch.vm.runtime.startHats('P7BoxPhys_whenImpactDetected')%3B%0A%0A%09%09%09b2Dworld.Step(1%20%2F%20secondsimspeed%2C%20veliterations%2C%20positerations)%3B%0A%09%09%09b2Dworld.ClearForces()%3B%0A%0A%09%09%09setTimeout(()%3D%3E%7B%0A%09%09%09%09this.lastimpacts%20%3D%20this.impacts%3B%0A%09%09%09%7D%2C%2010)%3B%0A%09%09%7D%0A%09%7D%0A%0A%09%2F*%20Incoming%20ugly%20hack%0A%09*%20(I%20pasted%20the%20whole%20box2D%20lib%20into%20here)%0A%09%5C%5C%20%0A%09%09*%20Copyright%20(c)%202006-2007%20Erin%20Catto%20http%3A%2F%2Fwww.gphysics.com%0A%09%09*%20This%20software%20is%20provided%20'as-is'%2C%20without%20any%20express%20or%20implied%0A%09%09*%20warranty.%20%20In%20no%20event%20will%20the%20authors%20be%20held%20liable%20for%20any%20damages%0A%09%09*%20arising%20from%20the%20use%20of%20this%20software.%0A%09%09*%20Permission%20is%20granted%20to%20anyone%20to%20use%20this%20software%20for%20any%20purpose%2C%0A%09%09*%20including%20commercial%20applications%2C%20and%20to%20alter%20it%20and%20redistribute%20it%0A%09%09*%20freely%2C%20subject%20to%20the%20following%20restrictions%3A%0A%09%09*%201.%20The%20origin%20of%20this%20software%20must%20not%20be%20misrepresented%3B%20you%20must%20not%0A%09%09*%20claim%20that%20you%20wrote%20the%20original%20software.%20If%20you%20use%20this%20software%0A%09%09*%20in%20a%20product%2C%20an%20acknowledgment%20in%20the%20product%20documentation%20would%20be%0A%09%09*%20appreciated%20but%20is%20not%20required.%0A%09%09*%202.%20Altered%20source%20versions%20must%20be%20plainly%20marked%20as%20such%2C%20and%20must%20not%20be%0A%09%09*%20misrepresented%20as%20being%20the%20original%20software.%0A%09%09*%203.%20This%20notice%20may%20not%20be%20removed%20or%20altered%20from%20any%20source%20distribution.%0A%09%09%7C%20%2F%2F%2F%20https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fbox2d-es6%20(the%20lib%20by%20itself)%0A%09%09*%2F%2F%2F%20Prepare%20for%2090%25%20of%20this%20extensions%20code%3A%20the%20box2D_es6%20lib.%0A%0A%09let%20Box2D%20%3D%20%7B%7D%3B%0A%0A%09(((a2j%2C%20undefined)%20%3D%3E%20%7B%0A%0A%09%09a2j.generateCallback%20%3D%20function%20generateCallback(context%2C%20cb)%20%7B%0A%09%09%09return%20function()%20%7B%0A%09%09%09%09cb.apply(context%2C%20arguments)%3B%0A%09%09%09%7D%3B%0A%09%09%7D%3B%0A%0A%09%09a2j.NVector%20%3D%20function%20NVector(length)%20%7B%0A%09%09%09if%20(length%20%3D%3D%3D%20undefined)%20length%20%3D%200%3B%0A%09%09%09const%20tmp%20%3D%20new%20Array(length%20%7C%7C%200)%3B%0A%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20length%3B%20%2B%2Bi)%20%7B%20tmp%5Bi%5D%20%3D%200%3B%20%7D%0A%09%09%09return%20tmp%3B%0A%09%09%7D%3B%0A%0A%09%09a2j.is%20%3D%20function%20is(o1%2C%20o2)%20%7B%0A%09%09%09if%20(o1%20%3D%3D%3D%20null)%20return%20false%3B%0A%09%09%09if%20((o2%20instanceof%20Function)%20%26%26%20(o1%20instanceof%20o2))%20return%20true%3B%0A%09%09%09if%20((o1.constructor.__implements%20!%3D%20undefined)%20%26%26%20(o1.constructor.__implements%5Bo2%5D))%20return%20true%3B%0A%09%09%09return%20false%3B%0A%09%09%7D%3B%0A%0A%09%09a2j.parseUInt%20%3D%20v%20%3D%3E%20Math.abs(parseInt(v))%3B%0A%09%7D))(Box2D)%3B%0A%0A%09const%20Vector%20%3D%20Array%3B%0A%09const%20Vector_a2j_Number%20%3D%20Box2D.NVector%3B%0A%09%2F%2F%20package%20structure%0A%09if%20(typeof%20(Box2D)%20%3D%3D%3D%20'undefined')%20Box2D%20%3D%20%7B%7D%3B%0A%09if%20(typeof%20(Box2D.Collision)%20%3D%3D%3D%20'undefined')%20Box2D.Collision%20%3D%20%7B%7D%3B%0A%09if%20(typeof%20(Box2D.Collision.Shapes)%20%3D%3D%3D%20'undefined')%20Box2D.Collision.Shapes%20%3D%20%7B%7D%3B%0A%09if%20(typeof%20(Box2D.Common)%20%3D%3D%3D%20'undefined')%20Box2D.Common%20%3D%20%7B%7D%3B%0A%09if%20(typeof%20(Box2D.Common.Math)%20%3D%3D%3D%20'undefined')%20Box2D.Common.Math%20%3D%20%7B%7D%3B%0A%09if%20(typeof%20(Box2D.Dynamics)%20%3D%3D%3D%20'undefined')%20Box2D.Dynamics%20%3D%20%7B%7D%3B%0A%09if%20(typeof%20(Box2D.Dynamics.Contacts)%20%3D%3D%3D%20'undefined')%20Box2D.Dynamics.Contacts%20%3D%20%7B%7D%3B%0A%09if%20(typeof%20(Box2D.Dynamics.Controllers)%20%3D%3D%3D%20'undefined')%20Box2D.Dynamics.Controllers%20%3D%20%7B%7D%3B%0A%09if%20(typeof%20(Box2D.Dynamics.Joints)%20%3D%3D%3D%20'undefined')%20Box2D.Dynamics.Joints%20%3D%20%7B%7D%3B%0A%09%2F%2F%20pre-definitions%0A%09((()%20%3D%3E%20%7B%0A%09%09Box2D.Collision.IBroadPhase%20%3D%20'Box2D.Collision.IBroadPhase'%3B%0A%0A%09%09class%20b2AABB%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2AABB.b2AABB.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2AABB()%20%7B%0A%09%09%09%09this.lowerBound%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.upperBound%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09IsValid()%20%7B%0A%09%09%09%09const%20dX%20%3D%20this.upperBound.x%20-%20this.lowerBound.x%3B%0A%09%09%09%09const%20dY%20%3D%20this.upperBound.y%20-%20this.lowerBound.y%3B%0A%09%09%09%09let%20valid%20%3D%20dX%20%3E%3D%200.0%20%26%26%20dY%20%3E%3D%200.0%3B%0A%09%09%09%09valid%20%3D%20valid%20%26%26%20this.lowerBound.IsValid()%20%26%26%20this.upperBound.IsValid()%3B%0A%09%09%09%09return%20valid%3B%0A%09%09%09%7D%0A%0A%09%09%09GetCenter()%20%7B%0A%09%09%09%09return%20new%20b2Vec2((this.lowerBound.x%20%2B%20this.upperBound.x)%20%2F%202%2C%20(this.lowerBound.y%20%2B%20this.upperBound.y)%20%2F%202)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetExtents()%20%7B%0A%09%09%09%09return%20new%20b2Vec2((this.upperBound.x%20-%20this.lowerBound.x)%20%2F%202%2C%20(this.upperBound.y%20-%20this.lowerBound.y)%20%2F%202)%3B%0A%09%09%09%7D%0A%0A%09%09%09Contains(aabb)%20%7B%0A%09%09%09%09let%20result%20%3D%20true%3B%0A%09%09%09%09result%20%3D%20result%20%26%26%20this.lowerBound.x%20%3C%3D%20aabb.lowerBound.x%3B%0A%09%09%09%09result%20%3D%20result%20%26%26%20this.lowerBound.y%20%3C%3D%20aabb.lowerBound.y%3B%0A%09%09%09%09result%20%3D%20result%20%26%26%20aabb.upperBound.x%20%3C%3D%20this.upperBound.x%3B%0A%09%09%09%09result%20%3D%20result%20%26%26%20aabb.upperBound.y%20%3C%3D%20this.upperBound.y%3B%0A%09%09%09%09return%20result%3B%0A%09%09%09%7D%0A%0A%09%09%09RayCast(output%2C%20input)%20%7B%0A%09%09%09%09let%20tmin%20%3D%20(-Number.MAX_VALUE)%3B%0A%09%09%09%09let%20tmax%20%3D%20Number.MAX_VALUE%3B%0A%09%09%09%09const%20pX%20%3D%20input.p1.x%3B%0A%09%09%09%09const%20pY%20%3D%20input.p1.y%3B%0A%09%09%09%09const%20dX%20%3D%20input.p2.x%20-%20input.p1.x%3B%0A%09%09%09%09const%20dY%20%3D%20input.p2.y%20-%20input.p1.y%3B%0A%09%09%09%09const%20absDX%20%3D%20Math.abs(dX)%3B%0A%09%09%09%09const%20absDY%20%3D%20Math.abs(dY)%3B%0A%09%09%09%09const%20normal%20%3D%20output.normal%3B%0A%09%09%09%09let%20inv_d%20%3D%200%3B%0A%09%09%09%09let%20t1%20%3D%200%3B%0A%09%09%09%09let%20t2%20%3D%200%3B%0A%09%09%09%09let%20t3%20%3D%200%3B%0A%09%09%09%09let%20s%20%3D%200%3B%20%7B%0A%09%09%09%09%09if%20(absDX%20%3C%20Number.MIN_VALUE)%20%7B%0A%09%09%09%09%09%09if%20(pX%20%3C%20this.lowerBound.x%20%7C%7C%20this.upperBound.x%20%3C%20pX)%20return%20false%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09inv_d%20%3D%201.0%20%2F%20dX%3B%0A%09%09%09%09%09%09t1%20%3D%20(this.lowerBound.x%20-%20pX)%20*%20inv_d%3B%0A%09%09%09%09%09%09t2%20%3D%20(this.upperBound.x%20-%20pX)%20*%20inv_d%3B%0A%09%09%09%09%09%09s%20%3D%20(-1.0)%3B%0A%09%09%09%09%09%09if%20(t1%20%3E%20t2)%20%7B%0A%09%09%09%09%09%09%09t3%20%3D%20t1%3B%0A%09%09%09%09%09%09%09t1%20%3D%20t2%3B%0A%09%09%09%09%09%09%09t2%20%3D%20t3%3B%0A%09%09%09%09%09%09%09s%20%3D%201.0%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09if%20(t1%20%3E%20tmin)%20%7B%0A%09%09%09%09%09%09%09normal.x%20%3D%20s%3B%0A%09%09%09%09%09%09%09normal.y%20%3D%200%3B%0A%09%09%09%09%09%09%09tmin%20%3D%20t1%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09tmax%20%3D%20Math.min(tmax%2C%20t2)%3B%0A%09%09%09%09%09%09if%20(tmin%20%3E%20tmax)%20return%20false%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%20%7B%0A%09%09%09%09%09if%20(absDY%20%3C%20Number.MIN_VALUE)%20%7B%0A%09%09%09%09%09%09if%20(pY%20%3C%20this.lowerBound.y%20%7C%7C%20this.upperBound.y%20%3C%20pY)%20return%20false%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09inv_d%20%3D%201.0%20%2F%20dY%3B%0A%09%09%09%09%09%09t1%20%3D%20(this.lowerBound.y%20-%20pY)%20*%20inv_d%3B%0A%09%09%09%09%09%09t2%20%3D%20(this.upperBound.y%20-%20pY)%20*%20inv_d%3B%0A%09%09%09%09%09%09s%20%3D%20(-1.0)%3B%0A%09%09%09%09%09%09if%20(t1%20%3E%20t2)%20%7B%0A%09%09%09%09%09%09%09t3%20%3D%20t1%3B%0A%09%09%09%09%09%09%09t1%20%3D%20t2%3B%0A%09%09%09%09%09%09%09t2%20%3D%20t3%3B%0A%09%09%09%09%09%09%09s%20%3D%201.0%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09if%20(t1%20%3E%20tmin)%20%7B%0A%09%09%09%09%09%09%09normal.y%20%3D%20s%3B%0A%09%09%09%09%09%09%09normal.x%20%3D%200%3B%0A%09%09%09%09%09%09%09tmin%20%3D%20t1%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09tmax%20%3D%20Math.min(tmax%2C%20t2)%3B%0A%09%09%09%09%09%09if%20(tmin%20%3E%20tmax)%20return%20false%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09output.fraction%20%3D%20tmin%3B%0A%09%09%09%09return%20true%3B%0A%09%09%09%7D%0A%0A%09%09%09TestOverlap(other)%20%7B%0A%09%09%09%09const%20d1X%20%3D%20other.lowerBound.x%20-%20this.upperBound.x%3B%0A%09%09%09%09const%20d1Y%20%3D%20other.lowerBound.y%20-%20this.upperBound.y%3B%0A%09%09%09%09const%20d2X%20%3D%20this.lowerBound.x%20-%20other.upperBound.x%3B%0A%09%09%09%09const%20d2Y%20%3D%20this.lowerBound.y%20-%20other.upperBound.y%3B%0A%09%09%09%09if%20(d1X%20%3E%200.0%20%7C%7C%20d1Y%20%3E%200.0)%20return%20false%3B%0A%09%09%09%09if%20(d2X%20%3E%200.0%20%7C%7C%20d2Y%20%3E%200.0)%20return%20false%3B%0A%09%09%09%09return%20true%3B%0A%09%09%09%7D%0A%0A%09%09%09Combine(aabb1%2C%20aabb2)%20%7B%0A%09%09%09%09this.lowerBound.x%20%3D%20Math.min(aabb1.lowerBound.x%2C%20aabb2.lowerBound.x)%3B%0A%09%09%09%09this.lowerBound.y%20%3D%20Math.min(aabb1.lowerBound.y%2C%20aabb2.lowerBound.y)%3B%0A%09%09%09%09this.upperBound.x%20%3D%20Math.max(aabb1.upperBound.x%2C%20aabb2.upperBound.x)%3B%0A%09%09%09%09this.upperBound.y%20%3D%20Math.max(aabb1.upperBound.y%2C%20aabb2.upperBound.y)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2AABB%20%3D%20b2AABB%3B%0A%0A%09%09class%20b2Bound%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2Bound.b2Bound.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09IsLower()%20%7B%0A%09%09%09%09return%20(this.value%20%26%201)%20%3D%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09IsUpper()%20%7B%0A%09%09%09%09return%20(this.value%20%26%201)%20%3D%3D%201%3B%0A%09%09%09%7D%0A%0A%09%09%09Swap(b)%20%7B%0A%09%09%09%09const%20tempValue%20%3D%20this.value%3B%0A%09%09%09%09const%20tempProxy%20%3D%20this.proxy%3B%0A%09%09%09%09const%20tempStabbingCount%20%3D%20this.stabbingCount%3B%0A%09%09%09%09this.value%20%3D%20b.value%3B%0A%09%09%09%09this.proxy%20%3D%20b.proxy%3B%0A%09%09%09%09this.stabbingCount%20%3D%20b.stabbingCount%3B%0A%09%09%09%09b.value%20%3D%20tempValue%3B%0A%09%09%09%09b.proxy%20%3D%20tempProxy%3B%0A%09%09%09%09b.stabbingCount%20%3D%20tempStabbingCount%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2Bound%20%3D%20b2Bound%3B%0A%0A%09%09class%20b2BoundValues%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2BoundValues.b2BoundValues.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2BoundValues)%20this.b2BoundValues.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09b2BoundValues()%20%7B%0A%09%09%09%09this.lowerValues%20%3D%20new%20Vector_a2j_Number()%3B%0A%09%09%09%09this.lowerValues%5B0%5D%20%3D%200.0%3B%0A%09%09%09%09this.lowerValues%5B1%5D%20%3D%200.0%3B%0A%09%09%09%09this.upperValues%20%3D%20new%20Vector_a2j_Number()%3B%0A%09%09%09%09this.upperValues%5B0%5D%20%3D%200.0%3B%0A%09%09%09%09this.upperValues%5B1%5D%20%3D%200.0%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2BoundValues%20%3D%20b2BoundValues%3B%0A%0A%09%09function%20b2Collision()%20%7B%0A%09%09%09b2Collision.b2Collision.apply(this%2C%20arguments)%3B%0A%09%09%7D%0A%09%09Box2D.Collision.b2Collision%20%3D%20b2Collision%3B%0A%0A%09%09class%20b2ContactID%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2ContactID.b2ContactID.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2ContactID)%20this.b2ContactID.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2ContactID()%20%7B%0A%09%09%09%09this.features%20%3D%20new%20Features()%3B%0A%09%09%09%7D%0A%0A%09%09%09b2ContactID()%20%7B%0A%09%09%09%09this.features._m_id%20%3D%20this%3B%0A%09%09%09%7D%0A%0A%09%09%09Set(id)%20%7B%0A%09%09%09%09this.key%20%3D%20id._key%3B%0A%09%09%09%7D%0A%0A%09%09%09Copy()%20%7B%0A%09%09%09%09const%20id%20%3D%20new%20b2ContactID()%3B%0A%09%09%09%09id.key%20%3D%20this.key%3B%0A%09%09%09%09return%20id%3B%0A%09%09%09%7D%0A%0A%09%09%09get%20key()%20%7B%0A%09%09%09%09return%20this._key%3B%0A%09%09%09%7D%0A%0A%09%09%09set%20key(value)%20%7B%0A%09%09%09%09if%20(value%20%3D%3D%3D%20undefined)%20value%20%3D%200%3B%0A%09%09%09%09this._key%20%3D%20value%3B%0A%09%09%09%09this.features._referenceEdge%20%3D%20this._key%20%26%200x000000ff%3B%0A%09%09%09%09this.features._incidentEdge%20%3D%20((this._key%20%26%200x0000ff00)%20%3E%3E%208)%20%26%200x000000ff%3B%0A%09%09%09%09this.features._incidentVertex%20%3D%20((this._key%20%26%200x00ff0000)%20%3E%3E%2016)%20%26%200x000000ff%3B%0A%09%09%09%09this.features._flip%20%3D%20((this._key%20%26%200xff000000)%20%3E%3E%2024)%20%26%200x000000ff%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2ContactID%20%3D%20b2ContactID%3B%0A%0A%09%09class%20b2ContactPoint%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2ContactPoint.b2ContactPoint.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2ContactPoint()%20%7B%0A%09%09%09%09this.position%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.velocity%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.normal%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.id%20%3D%20new%20b2ContactID()%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2ContactPoint%20%3D%20b2ContactPoint%3B%0A%0A%09%09function%20b2Distance()%20%7B%0A%09%09%09b2Distance.b2Distance.apply(this%2C%20arguments)%3B%0A%09%09%7D%0A%09%09Box2D.Collision.b2Distance%20%3D%20b2Distance%3B%0A%0A%09%09function%20b2DistanceInput()%20%7B%0A%09%09%09b2DistanceInput.b2DistanceInput.apply(this%2C%20arguments)%3B%0A%09%09%7D%0A%09%09Box2D.Collision.b2DistanceInput%20%3D%20b2DistanceInput%3B%0A%0A%09%09class%20b2DistanceOutput%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2DistanceOutput.b2DistanceOutput.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2DistanceOutput()%20%7B%0A%09%09%09%09this.pointA%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.pointB%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2DistanceOutput%20%3D%20b2DistanceOutput%3B%0A%0A%09%09class%20b2DistanceProxy%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2DistanceProxy.b2DistanceProxy.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09Set(shape)%20%7B%0A%09%09%09%09switch%20(shape.GetType())%20%7B%0A%09%09%09%09%09case%20b2Shape.e_circleShape%3A%0A%09%09%09%09%09%09%7B%0A%09%09%09%09%09%09%09const%20circle%20%3D%20(shape%20instanceof%20b2CircleShape%20%3F%20shape%20%3A%20null)%3B%0A%09%09%09%09%09%09%09this.m_vertices%20%3D%20new%20Vector(1%2C%20true)%3B%0A%09%09%09%09%09%09%09this.m_vertices%5B0%5D%20%3D%20circle.m_p%3B%0A%09%09%09%09%09%09%09this.m_count%20%3D%201%3B%0A%09%09%09%09%09%09%09this.m_radius%20%3D%20circle.m_radius%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20b2Shape.e_polygonShape%3A%0A%09%09%09%09%09%09%7B%0A%09%09%09%09%09%09%09const%20polygon%20%3D%20(shape%20instanceof%20b2PolygonShape%20%3F%20shape%20%3A%20null)%3B%0A%09%09%09%09%09%09%09this.m_vertices%20%3D%20polygon.m_vertices%3B%0A%09%09%09%09%09%09%09this.m_count%20%3D%20polygon.m_vertexCount%3B%0A%09%09%09%09%09%09%09this.m_radius%20%3D%20polygon.m_radius%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09default%3A%0A%09%09%09%09%09%09b2Settings.b2Assert(false)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09GetSupport(d)%20%7B%0A%09%09%09%09let%20bestIndex%20%3D%200%3B%0A%09%09%09%09let%20bestValue%20%3D%20this.m_vertices%5B0%5D.x%20*%20d.x%20%2B%20this.m_vertices%5B0%5D.y%20*%20d.y%3B%0A%09%09%09%09for%20(let%20i%20%3D%201%3B%20i%20%3C%20this.m_count%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09const%20value%20%3D%20this.m_vertices%5Bi%5D.x%20*%20d.x%20%2B%20this.m_vertices%5Bi%5D.y%20*%20d.y%3B%0A%09%09%09%09%09if%20(value%20%3E%20bestValue)%20%7B%0A%09%09%09%09%09%09bestIndex%20%3D%20i%3B%0A%09%09%09%09%09%09bestValue%20%3D%20value%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09return%20bestIndex%3B%0A%09%09%09%7D%0A%0A%09%09%09GetSupportVertex(d)%20%7B%0A%09%09%09%09let%20bestIndex%20%3D%200%3B%0A%09%09%09%09let%20bestValue%20%3D%20this.m_vertices%5B0%5D.x%20*%20d.x%20%2B%20this.m_vertices%5B0%5D.y%20*%20d.y%3B%0A%09%09%09%09for%20(let%20i%20%3D%201%3B%20i%20%3C%20this.m_count%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09const%20value%20%3D%20this.m_vertices%5Bi%5D.x%20*%20d.x%20%2B%20this.m_vertices%5Bi%5D.y%20*%20d.y%3B%0A%09%09%09%09%09if%20(value%20%3E%20bestValue)%20%7B%0A%09%09%09%09%09%09bestIndex%20%3D%20i%3B%0A%09%09%09%09%09%09bestValue%20%3D%20value%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09return%20this.m_vertices%5BbestIndex%5D%3B%0A%09%09%09%7D%0A%0A%09%09%09GetVertexCount()%20%7B%0A%09%09%09%09return%20this.m_count%3B%0A%09%09%09%7D%0A%0A%09%09%09GetVertex(index)%20%7B%0A%09%09%09%09if%20(index%20%3D%3D%3D%20undefined)%20index%20%3D%200%3B%0A%09%09%09%09b2Settings.b2Assert(index%20%3E%3D%200%20%26%26%20index%20%3C%20this.m_count)%3B%0A%09%09%09%09return%20this.m_vertices%5Bindex%5D%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2DistanceProxy%20%3D%20b2DistanceProxy%3B%0A%0A%09%09class%20b2DynamicTree%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2DynamicTree.b2DynamicTree.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2DynamicTree)%20this.b2DynamicTree.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09b2DynamicTree()%20%7B%0A%09%09%09%09this.m_root%20%3D%20null%3B%0A%09%09%09%09this.m_freeList%20%3D%20null%3B%0A%09%09%09%09this.m_path%20%3D%200%3B%0A%09%09%09%09this.m_insertionCount%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09CreateProxy(aabb%2C%20userData)%20%7B%0A%09%09%09%09const%20node%20%3D%20this.AllocateNode()%3B%0A%09%09%09%09const%20extendX%20%3D%20b2Settings.b2_aabbExtension%3B%0A%09%09%09%09const%20extendY%20%3D%20b2Settings.b2_aabbExtension%3B%0A%09%09%09%09node.aabb.lowerBound.x%20%3D%20aabb.lowerBound.x%20-%20extendX%3B%0A%09%09%09%09node.aabb.lowerBound.y%20%3D%20aabb.lowerBound.y%20-%20extendY%3B%0A%09%09%09%09node.aabb.upperBound.x%20%3D%20aabb.upperBound.x%20%2B%20extendX%3B%0A%09%09%09%09node.aabb.upperBound.y%20%3D%20aabb.upperBound.y%20%2B%20extendY%3B%0A%09%09%09%09node.userData%20%3D%20userData%3B%0A%09%09%09%09this.InsertLeaf(node)%3B%0A%09%09%09%09return%20node%3B%0A%09%09%09%7D%0A%0A%09%09%09DestroyProxy(proxy)%20%7B%0A%09%09%09%09this.RemoveLeaf(proxy)%3B%0A%09%09%09%09this.FreeNode(proxy)%3B%0A%09%09%09%7D%0A%0A%09%09%09MoveProxy(proxy%2C%20aabb%2C%20displacement)%20%7B%0A%09%09%09%09b2Settings.b2Assert(proxy.IsLeaf())%3B%0A%09%09%09%09if%20(proxy.aabb.Contains(aabb))%20%7B%0A%09%09%09%09%09return%20false%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.RemoveLeaf(proxy)%3B%0A%09%09%09%09const%20extendX%20%3D%20b2Settings.b2_aabbExtension%20%2B%20b2Settings.b2_aabbMultiplier%20*%20(displacement.x%20%3E%200%20%3F%20displacement.x%20%3A%20(-displacement.x))%3B%0A%09%09%09%09const%20extendY%20%3D%20b2Settings.b2_aabbExtension%20%2B%20b2Settings.b2_aabbMultiplier%20*%20(displacement.y%20%3E%200%20%3F%20displacement.y%20%3A%20(-displacement.y))%3B%0A%09%09%09%09proxy.aabb.lowerBound.x%20%3D%20aabb.lowerBound.x%20-%20extendX%3B%0A%09%09%09%09proxy.aabb.lowerBound.y%20%3D%20aabb.lowerBound.y%20-%20extendY%3B%0A%09%09%09%09proxy.aabb.upperBound.x%20%3D%20aabb.upperBound.x%20%2B%20extendX%3B%0A%09%09%09%09proxy.aabb.upperBound.y%20%3D%20aabb.upperBound.y%20%2B%20extendY%3B%0A%09%09%09%09this.InsertLeaf(proxy)%3B%0A%09%09%09%09return%20true%3B%0A%09%09%09%7D%0A%0A%09%09%09Rebalance(iterations)%20%7B%0A%09%09%09%09if%20(iterations%20%3D%3D%3D%20undefined)%20iterations%20%3D%200%3B%0A%09%09%09%09if%20(this.m_root%20%3D%3D%20null)%20return%3B%0A%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20iterations%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09let%20node%20%3D%20this.m_root%3B%0A%09%09%09%09%09let%20bit%20%3D%200%3B%0A%09%09%09%09%09while%20(node.IsLeaf()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09node%20%3D%20(this.m_path%20%3E%3E%20bit)%20%26%201%20%3F%20node.child2%20%3A%20node.child1%3B%0A%09%09%09%09%09%09bit%20%3D%20(bit%20%2B%201)%20%26%2031%3B%0A%09%09%09%09%09%7D%20%2B%2Bthis.m_path%3B%0A%09%09%09%09%09this.RemoveLeaf(node)%3B%0A%09%09%09%09%09this.InsertLeaf(node)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09GetFatAABB(proxy)%20%7B%0A%09%09%09%09return%20proxy.aabb%3B%0A%09%09%09%7D%0A%0A%09%09%09GetUserData(proxy)%20%7B%0A%09%09%09%09return%20proxy.userData%3B%0A%09%09%09%7D%0A%0A%09%09%09Query(callback%2C%20aabb)%20%7B%0A%09%09%09%09if%20(this.m_root%20%3D%3D%20null)%20return%3B%0A%09%09%09%09const%20stack%20%3D%20new%20Vector()%3B%0A%09%09%09%09let%20count%20%3D%200%3B%0A%09%09%09%09stack%5Bcount%2B%2B%5D%20%3D%20this.m_root%3B%0A%09%09%09%09while%20(count%20%3E%200)%20%7B%0A%09%09%09%09%09const%20node%20%3D%20stack%5B--count%5D%3B%0A%09%09%09%09%09if%20(node.aabb.TestOverlap(aabb))%20%7B%0A%09%09%09%09%09%09if%20(node.IsLeaf())%20%7B%0A%09%09%09%09%09%09%09const%20proceed%20%3D%20callback(node)%3B%0A%09%09%09%09%09%09%09if%20(!proceed)%20return%3B%0A%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09stack%5Bcount%2B%2B%5D%20%3D%20node.child1%3B%0A%09%09%09%09%09%09%09stack%5Bcount%2B%2B%5D%20%3D%20node.child2%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09RayCast(callback%2C%20input)%20%7B%0A%09%09%09%09if%20(this.m_root%20%3D%3D%20null)%20return%3B%0A%09%09%09%09const%20p1%20%3D%20input.p1%3B%0A%09%09%09%09const%20p2%20%3D%20input.p2%3B%0A%09%09%09%09const%20r%20%3D%20b2Math.SubtractVV(p1%2C%20p2)%3B%0A%09%09%09%09r.Normalize()%3B%0A%09%09%09%09const%20v%20%3D%20b2Math.CrossFV(1.0%2C%20r)%3B%0A%09%09%09%09const%20abs_v%20%3D%20b2Math.AbsV(v)%3B%0A%09%09%09%09let%20maxFraction%20%3D%20input.maxFraction%3B%0A%09%09%09%09const%20segmentAABB%20%3D%20new%20b2AABB()%3B%0A%09%09%09%09let%20tX%20%3D%200%3B%0A%09%09%09%09let%20tY%20%3D%200%3B%20%7B%0A%09%09%09%09%09tX%20%3D%20p1.x%20%2B%20maxFraction%20*%20(p2.x%20-%20p1.x)%3B%0A%09%09%09%09%09tY%20%3D%20p1.y%20%2B%20maxFraction%20*%20(p2.y%20-%20p1.y)%3B%0A%09%09%09%09%09segmentAABB.lowerBound.x%20%3D%20Math.min(p1.x%2C%20tX)%3B%0A%09%09%09%09%09segmentAABB.lowerBound.y%20%3D%20Math.min(p1.y%2C%20tY)%3B%0A%09%09%09%09%09segmentAABB.upperBound.x%20%3D%20Math.max(p1.x%2C%20tX)%3B%0A%09%09%09%09%09segmentAABB.upperBound.y%20%3D%20Math.max(p1.y%2C%20tY)%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20stack%20%3D%20new%20Vector()%3B%0A%09%09%09%09let%20count%20%3D%200%3B%0A%09%09%09%09stack%5Bcount%2B%2B%5D%20%3D%20this.m_root%3B%0A%09%09%09%09while%20(count%20%3E%200)%20%7B%0A%09%09%09%09%09const%20node%20%3D%20stack%5B--count%5D%3B%0A%09%09%09%09%09if%20(node.aabb.TestOverlap(segmentAABB)%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09const%20c%20%3D%20node.aabb.GetCenter()%3B%0A%09%09%09%09%09const%20h%20%3D%20node.aabb.GetExtents()%3B%0A%09%09%09%09%09const%20separation%20%3D%20Math.abs(v.x%20*%20(p1.x%20-%20c.x)%20%2B%20v.y%20*%20(p1.y%20-%20c.y))%20-%20abs_v.x%20*%20h.x%20-%20abs_v.y%20*%20h.y%3B%0A%09%09%09%09%09if%20(separation%20%3E%200.0)%20continue%3B%0A%09%09%09%09%09if%20(node.IsLeaf())%20%7B%0A%09%09%09%09%09%09const%20subInput%20%3D%20new%20b2RayCastInput()%3B%0A%09%09%09%09%09%09subInput.p1%20%3D%20input.p1%3B%0A%09%09%09%09%09%09subInput.p2%20%3D%20input.p2%3B%0A%09%09%09%09%09%09subInput.maxFraction%20%3D%20input.maxFraction%3B%0A%09%09%09%09%09%09maxFraction%20%3D%20callback(subInput%2C%20node)%3B%0A%09%09%09%09%09%09if%20(maxFraction%20%3D%3D%200.0)%20return%3B%0A%09%09%09%09%09%09if%20(maxFraction%20%3E%200.0)%20%7B%0A%09%09%09%09%09%09%09tX%20%3D%20p1.x%20%2B%20maxFraction%20*%20(p2.x%20-%20p1.x)%3B%0A%09%09%09%09%09%09%09tY%20%3D%20p1.y%20%2B%20maxFraction%20*%20(p2.y%20-%20p1.y)%3B%0A%09%09%09%09%09%09%09segmentAABB.lowerBound.x%20%3D%20Math.min(p1.x%2C%20tX)%3B%0A%09%09%09%09%09%09%09segmentAABB.lowerBound.y%20%3D%20Math.min(p1.y%2C%20tY)%3B%0A%09%09%09%09%09%09%09segmentAABB.upperBound.x%20%3D%20Math.max(p1.x%2C%20tX)%3B%0A%09%09%09%09%09%09%09segmentAABB.upperBound.y%20%3D%20Math.max(p1.y%2C%20tY)%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09stack%5Bcount%2B%2B%5D%20%3D%20node.child1%3B%0A%09%09%09%09%09%09stack%5Bcount%2B%2B%5D%20%3D%20node.child2%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09AllocateNode()%20%7B%0A%09%09%09%09if%20(this.m_freeList)%20%7B%0A%09%09%09%09%09const%20node%20%3D%20this.m_freeList%3B%0A%09%09%09%09%09this.m_freeList%20%3D%20node.parent%3B%0A%09%09%09%09%09node.parent%20%3D%20null%3B%0A%09%09%09%09%09node.child1%20%3D%20null%3B%0A%09%09%09%09%09node.child2%20%3D%20null%3B%0A%09%09%09%09%09return%20node%3B%0A%09%09%09%09%7D%0A%09%09%09%09return%20new%20b2DynamicTreeNode()%3B%0A%09%09%09%7D%0A%0A%09%09%09FreeNode(node)%20%7B%0A%09%09%09%09node.parent%20%3D%20this.m_freeList%3B%0A%09%09%09%09this.m_freeList%20%3D%20node%3B%0A%09%09%09%7D%0A%0A%09%09%09InsertLeaf(leaf)%20%7B%0A%09%09%09%09%2B%2Bthis.m_insertionCount%3B%0A%09%09%09%09if%20(this.m_root%20%3D%3D%20null)%20%7B%0A%09%09%09%09%09this.m_root%20%3D%20leaf%3B%0A%09%09%09%09%09this.m_root.parent%20%3D%20null%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20center%20%3D%20leaf.aabb.GetCenter()%3B%0A%09%09%09%09let%20sibling%20%3D%20this.m_root%3B%0A%09%09%09%09if%20(sibling.IsLeaf()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09do%20%7B%0A%09%09%09%09%09%09const%20child1%20%3D%20sibling.child1%3B%0A%09%09%09%09%09%09const%20child2%20%3D%20sibling.child2%3B%0A%09%09%09%09%09%09const%20norm1%20%3D%20Math.abs((child1.aabb.lowerBound.x%20%2B%20child1.aabb.upperBound.x)%20%2F%202%20-%20center.x)%20%2B%20Math.abs((child1.aabb.lowerBound.y%20%2B%20child1.aabb.upperBound.y)%20%2F%202%20-%20center.y)%3B%0A%09%09%09%09%09%09const%20norm2%20%3D%20Math.abs((child2.aabb.lowerBound.x%20%2B%20child2.aabb.upperBound.x)%20%2F%202%20-%20center.x)%20%2B%20Math.abs((child2.aabb.lowerBound.y%20%2B%20child2.aabb.upperBound.y)%20%2F%202%20-%20center.y)%3B%0A%09%09%09%09%09%09if%20(norm1%20%3C%20norm2)%20%7B%0A%09%09%09%09%09%09%09sibling%20%3D%20child1%3B%0A%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09sibling%20%3D%20child2%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%09while%20(sibling.IsLeaf()%20%3D%3D%20false)%3B%0A%09%09%09%09%7D%0A%09%09%09%09let%20node1%20%3D%20sibling.parent%3B%0A%09%09%09%09let%20node2%20%3D%20this.AllocateNode()%3B%0A%09%09%09%09node2.parent%20%3D%20node1%3B%0A%09%09%09%09node2.userData%20%3D%20null%3B%0A%09%09%09%09node2.aabb.Combine(leaf.aabb%2C%20sibling.aabb)%3B%0A%09%09%09%09if%20(node1)%20%7B%0A%09%09%09%09%09if%20(sibling.parent.child1%20%3D%3D%20sibling)%20%7B%0A%09%09%09%09%09%09node1.child1%20%3D%20node2%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09node1.child2%20%3D%20node2%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09node2.child1%20%3D%20sibling%3B%0A%09%09%09%09%09node2.child2%20%3D%20leaf%3B%0A%09%09%09%09%09sibling.parent%20%3D%20node2%3B%0A%09%09%09%09%09leaf.parent%20%3D%20node2%3B%0A%09%09%09%09%09do%20%7B%0A%09%09%09%09%09%09if%20(node1.aabb.Contains(node2.aabb))%20break%3B%0A%09%09%09%09%09%09node1.aabb.Combine(node1.child1.aabb%2C%20node1.child2.aabb)%3B%0A%09%09%09%09%09%09node2%20%3D%20node1%3B%0A%09%09%09%09%09%09node1%20%3D%20node1.parent%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09while%20(node1)%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09node2.child1%20%3D%20sibling%3B%0A%09%09%09%09%09node2.child2%20%3D%20leaf%3B%0A%09%09%09%09%09sibling.parent%20%3D%20node2%3B%0A%09%09%09%09%09leaf.parent%20%3D%20node2%3B%0A%09%09%09%09%09this.m_root%20%3D%20node2%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09RemoveLeaf(leaf)%20%7B%0A%09%09%09%09if%20(leaf%20%3D%3D%20this.m_root)%20%7B%0A%09%09%09%09%09this.m_root%20%3D%20null%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20node2%20%3D%20leaf.parent%3B%0A%09%09%09%09let%20node1%20%3D%20node2.parent%3B%0A%09%09%09%09let%20sibling%3B%0A%09%09%09%09if%20(node2.child1%20%3D%3D%20leaf)%20%7B%0A%09%09%09%09%09sibling%20%3D%20node2.child2%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09sibling%20%3D%20node2.child1%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(node1)%20%7B%0A%09%09%09%09%09if%20(node1.child1%20%3D%3D%20node2)%20%7B%0A%09%09%09%09%09%09node1.child1%20%3D%20sibling%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09node1.child2%20%3D%20sibling%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09sibling.parent%20%3D%20node1%3B%0A%09%09%09%09%09this.FreeNode(node2)%3B%0A%09%09%09%09%09while%20(node1)%20%7B%0A%09%09%09%09%09%09const%20oldAABB%20%3D%20node1.aabb%3B%0A%09%09%09%09%09%09node1.aabb%20%3D%20b2AABB.Combine(node1.child1.aabb%2C%20node1.child2.aabb)%3B%0A%09%09%09%09%09%09if%20(oldAABB.Contains(node1.aabb))%20break%3B%0A%09%09%09%09%09%09node1%20%3D%20node1.parent%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_root%20%3D%20sibling%3B%0A%09%09%09%09%09sibling.parent%20%3D%20null%3B%0A%09%09%09%09%09this.FreeNode(node2)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2DynamicTree%20%3D%20b2DynamicTree%3B%0A%0A%09%09class%20b2DynamicTreeBroadPhase%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2DynamicTreeBroadPhase.b2DynamicTreeBroadPhase.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2DynamicTreeBroadPhase()%20%7B%0A%09%09%09%09this.m_tree%20%3D%20new%20b2DynamicTree()%3B%0A%09%09%09%09this.m_moveBuffer%20%3D%20new%20Vector()%3B%0A%09%09%09%09this.m_pairBuffer%20%3D%20new%20Vector()%3B%0A%09%09%09%09this.m_pairCount%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09CreateProxy(aabb%2C%20userData)%20%7B%0A%09%09%09%09const%20proxy%20%3D%20this.m_tree.CreateProxy(aabb%2C%20userData)%3B%0A%09%09%09%09%2B%2Bthis.m_proxyCount%3B%0A%09%09%09%09this.BufferMove(proxy)%3B%0A%09%09%09%09return%20proxy%3B%0A%09%09%09%7D%0A%0A%09%09%09DestroyProxy(proxy)%20%7B%0A%09%09%09%09this.UnBufferMove(proxy)%3B%0A%09%09%09%09--this.m_proxyCount%3B%0A%09%09%09%09this.m_tree.DestroyProxy(proxy)%3B%0A%09%09%09%7D%0A%0A%09%09%09MoveProxy(proxy%2C%20aabb%2C%20displacement)%20%7B%0A%09%09%09%09const%20buffer%20%3D%20this.m_tree.MoveProxy(proxy%2C%20aabb%2C%20displacement)%3B%0A%09%09%09%09if%20(buffer)%20%7B%0A%09%09%09%09%09this.BufferMove(proxy)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09TestOverlap(proxyA%2C%20proxyB)%20%7B%0A%09%09%09%09const%20aabbA%20%3D%20this.m_tree.GetFatAABB(proxyA)%3B%0A%09%09%09%09const%20aabbB%20%3D%20this.m_tree.GetFatAABB(proxyB)%3B%0A%09%09%09%09return%20aabbA.TestOverlap(aabbB)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetUserData(proxy)%20%7B%0A%09%09%09%09return%20this.m_tree.GetUserData(proxy)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetFatAABB(proxy)%20%7B%0A%09%09%09%09return%20this.m_tree.GetFatAABB(proxy)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetProxyCount()%20%7B%0A%09%09%09%09return%20this.m_proxyCount%3B%0A%09%09%09%7D%0A%0A%09%09%09UpdatePairs(callback)%20%7B%0A%09%09%09%09const%20__this%20%3D%20this%3B%0A%09%09%09%09__this.m_pairCount%20%3D%200%3B%0A%09%09%09%09var%20i%20%3D%200%3B%0A%09%09%09%09let%20queryProxy%3B%0A%09%09%09%09function%20QueryCallback(proxy)%20%7B%0A%09%09%09%09%09if%20(proxy%20%3D%3D%20queryProxy)%20return%20true%3B%0A%09%09%09%09%09if%20(__this.m_pairCount%20%3D%3D%20__this.m_pairBuffer.length)%20%7B%0A%09%09%09%09%09%09__this.m_pairBuffer%5B__this.m_pairCount%5D%20%3D%20new%20b2DynamicTreePair()%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09const%20pair%20%3D%20__this.m_pairBuffer%5B__this.m_pairCount%5D%3B%0A%09%09%09%09%09pair.proxyA%20%3D%20proxy%20%3C%20queryProxy%20%3F%20proxy%20%3A%20queryProxy%3B%0A%09%09%09%09%09pair.proxyB%20%3D%20proxy%20%3E%3D%20queryProxy%20%3F%20proxy%20%3A%20queryProxy%3B%20%2B%2B__this.m_pairCount%3B%0A%09%09%09%09%09return%20true%3B%0A%09%09%09%09%7D%0A%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09i%20%3C%20__this.m_moveBuffer.length%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09queryProxy%20%3D%20__this.m_moveBuffer%5Bi%5D%3B%0A%09%09%09%09%09const%20fatAABB%20%3D%20__this.m_tree.GetFatAABB(queryProxy)%3B%0A%09%09%09%09%09__this.m_tree.Query(QueryCallback%2C%20fatAABB)%3B%0A%09%09%09%09%7D%0A%09%09%09%09__this.m_moveBuffer.length%20%3D%200%3B%0A%09%09%09%09for%20(var%20i%20%3D%200%3B%20i%20%3C%20__this.m_pairCount%3B)%20%7B%0A%09%09%09%09%09const%20primaryPair%20%3D%20__this.m_pairBuffer%5Bi%5D%3B%0A%09%09%09%09%09const%20userDataA%20%3D%20__this.m_tree.GetUserData(primaryPair.proxyA)%3B%0A%09%09%09%09%09const%20userDataB%20%3D%20__this.m_tree.GetUserData(primaryPair.proxyB)%3B%0A%09%09%09%09%09callback(userDataA%2C%20userDataB)%3B%0A%09%09%09%09%09%2B%2Bi%3B%0A%09%09%09%09%09while%20(i%20%3C%20__this.m_pairCount)%20%7B%0A%09%09%09%09%09%09const%20pair%20%3D%20__this.m_pairBuffer%5Bi%5D%3B%0A%09%09%09%09%09%09if%20(pair.proxyA%20!%3D%20primaryPair.proxyA%20%7C%7C%20pair.proxyB%20!%3D%20primaryPair.proxyB)%20%7B%0A%09%09%09%09%09%09%09break%3B%0A%09%09%09%09%09%09%7D%20%2B%2Bi%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09Query(callback%2C%20aabb)%20%7B%0A%09%09%09%09this.m_tree.Query(callback%2C%20aabb)%3B%0A%09%09%09%7D%0A%0A%09%09%09RayCast(callback%2C%20input)%20%7B%0A%09%09%09%09this.m_tree.RayCast(callback%2C%20input)%3B%0A%09%09%09%7D%0A%0A%09%09%09Validate()%20%7B%20%7D%0A%0A%09%09%09Rebalance(iterations)%20%7B%0A%09%09%09%09if%20(iterations%20%3D%3D%3D%20undefined)%20iterations%20%3D%200%3B%0A%09%09%09%09this.m_tree.Rebalance(iterations)%3B%0A%09%09%09%7D%0A%0A%09%09%09BufferMove(proxy)%20%7B%0A%09%09%09%09this.m_moveBuffer%5Bthis.m_moveBuffer.length%5D%20%3D%20proxy%3B%0A%09%09%09%7D%0A%0A%09%09%09UnBufferMove(proxy)%20%7B%0A%09%09%09%09const%20i%20%3D%20parseInt(this.m_moveBuffer.indexOf(proxy))%3B%0A%09%09%09%09this.m_moveBuffer.splice(i%2C%201)%3B%0A%09%09%09%7D%0A%0A%09%09%09ComparePairs(pair1%2C%20pair2)%20%7B%0A%09%09%09%09return%200%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2DynamicTreeBroadPhase%20%3D%20b2DynamicTreeBroadPhase%3B%0A%0A%09%09class%20b2DynamicTreeNode%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2DynamicTreeNode.b2DynamicTreeNode.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2DynamicTreeNode()%20%7B%0A%09%09%09%09this.aabb%20%3D%20new%20b2AABB()%3B%0A%09%09%09%7D%0A%0A%09%09%09IsLeaf()%20%7B%0A%09%09%09%09return%20this.child1%20%3D%3D%20null%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2DynamicTreeNode%20%3D%20b2DynamicTreeNode%3B%0A%0A%09%09function%20b2DynamicTreePair()%20%7B%0A%09%09%09b2DynamicTreePair.b2DynamicTreePair.apply(this%2C%20arguments)%3B%0A%09%09%7D%0A%09%09Box2D.Collision.b2DynamicTreePair%20%3D%20b2DynamicTreePair%3B%0A%0A%09%09class%20b2Manifold%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2Manifold.b2Manifold.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2Manifold)%20this.b2Manifold.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2Manifold()%20%7B%0A%09%09%09%09this.m_pointCount%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09b2Manifold()%20%7B%0A%09%09%09%09this.m_points%20%3D%20new%20Vector(b2Settings.b2_maxManifoldPoints)%3B%0A%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09this.m_points%5Bi%5D%20%3D%20new%20b2ManifoldPoint()%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_localPlaneNormal%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_localPoint%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09Reset()%20%7B%0A%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09((this.m_points%5Bi%5D%20instanceof%20b2ManifoldPoint%20%3F%20this.m_points%5Bi%5D%20%3A%20null)).Reset()%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_localPlaneNormal.SetZero()%3B%0A%09%09%09%09this.m_localPoint.SetZero()%3B%0A%09%09%09%09this.m_type%20%3D%200%3B%0A%09%09%09%09this.m_pointCount%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09Set(m)%20%7B%0A%09%09%09%09this.m_pointCount%20%3D%20m.m_pointCount%3B%0A%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09((this.m_points%5Bi%5D%20instanceof%20b2ManifoldPoint%20%3F%20this.m_points%5Bi%5D%20%3A%20null)).Set(m.m_points%5Bi%5D)%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_localPlaneNormal.SetV(m.m_localPlaneNormal)%3B%0A%09%09%09%09this.m_localPoint.SetV(m.m_localPoint)%3B%0A%09%09%09%09this.m_type%20%3D%20m.m_type%3B%0A%09%09%09%7D%0A%0A%09%09%09Copy()%20%7B%0A%09%09%09%09const%20copy%20%3D%20new%20b2Manifold()%3B%0A%09%09%09%09copy.Set(this)%3B%0A%09%09%09%09return%20copy%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2Manifold%20%3D%20b2Manifold%3B%0A%0A%09%09class%20b2ManifoldPoint%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2ManifoldPoint.b2ManifoldPoint.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2ManifoldPoint)%20this.b2ManifoldPoint.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2ManifoldPoint()%20%7B%0A%09%09%09%09this.m_localPoint%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_id%20%3D%20new%20b2ContactID()%3B%0A%09%09%09%7D%0A%0A%09%09%09b2ManifoldPoint()%20%7B%0A%09%09%09%09this.Reset()%3B%0A%09%09%09%7D%0A%0A%09%09%09Reset()%20%7B%0A%09%09%09%09this.m_localPoint.SetZero()%3B%0A%09%09%09%09this.m_normalImpulse%20%3D%200.0%3B%0A%09%09%09%09this.m_tangentImpulse%20%3D%200.0%3B%0A%09%09%09%09this.m_id.key%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09Set(m)%20%7B%0A%09%09%09%09this.m_localPoint.SetV(m.m_localPoint)%3B%0A%09%09%09%09this.m_normalImpulse%20%3D%20m.m_normalImpulse%3B%0A%09%09%09%09this.m_tangentImpulse%20%3D%20m.m_tangentImpulse%3B%0A%09%09%09%09this.m_id.Set(m.m_id)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2ManifoldPoint%20%3D%20b2ManifoldPoint%3B%0A%0A%09%09class%20b2Point%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2Point.b2Point.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2Point()%20%7B%0A%09%09%09%09this.p%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09Support(xf%2C%20vX%2C%20vY)%20%7B%0A%09%09%09%09if%20(vX%20%3D%3D%3D%20undefined)%20vX%20%3D%200%3B%0A%09%09%09%09if%20(vY%20%3D%3D%3D%20undefined)%20vY%20%3D%200%3B%0A%09%09%09%09return%20this.p%3B%0A%09%09%09%7D%0A%0A%09%09%09GetFirstVertex(xf)%20%7B%0A%09%09%09%09return%20this.p%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2Point%20%3D%20b2Point%3B%0A%0A%09%09class%20b2RayCastInput%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2RayCastInput.b2RayCastInput.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2RayCastInput)%20this.b2RayCastInput.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2RayCastInput()%20%7B%0A%09%09%09%09this.p1%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.p2%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09b2RayCastInput(p1%2C%20p2%2C%20maxFraction)%20%7B%0A%09%09%09%09if%20(p1%20%3D%3D%3D%20undefined)%20p1%20%3D%20null%3B%0A%09%09%09%09if%20(p2%20%3D%3D%3D%20undefined)%20p2%20%3D%20null%3B%0A%09%09%09%09if%20(maxFraction%20%3D%3D%3D%20undefined)%20maxFraction%20%3D%201%3B%0A%09%09%09%09if%20(p1)%20this.p1.SetV(p1)%3B%0A%09%09%09%09if%20(p2)%20this.p2.SetV(p2)%3B%0A%09%09%09%09this.maxFraction%20%3D%20maxFraction%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2RayCastInput%20%3D%20b2RayCastInput%3B%0A%0A%09%09class%20b2RayCastOutput%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2RayCastOutput.b2RayCastOutput.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2RayCastOutput()%20%7B%0A%09%09%09%09this.normal%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2RayCastOutput%20%3D%20b2RayCastOutput%3B%0A%0A%09%09class%20b2Segment%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2Segment.b2Segment.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2Segment()%20%7B%0A%09%09%09%09this.p1%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.p2%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09TestSegment(lambda%2C%20normal%2C%20segment%2C%20maxLambda)%20%7B%0A%09%09%09%09if%20(maxLambda%20%3D%3D%3D%20undefined)%20maxLambda%20%3D%200%3B%0A%09%09%09%09const%20s%20%3D%20segment.p1%3B%0A%09%09%09%09const%20rX%20%3D%20segment.p2.x%20-%20s.x%3B%0A%09%09%09%09const%20rY%20%3D%20segment.p2.y%20-%20s.y%3B%0A%09%09%09%09const%20dX%20%3D%20this.p2.x%20-%20this.p1.x%3B%0A%09%09%09%09const%20dY%20%3D%20this.p2.y%20-%20this.p1.y%3B%0A%09%09%09%09let%20nX%20%3D%20dY%3B%0A%09%09%09%09let%20nY%20%3D%20(-dX)%3B%0A%09%09%09%09const%20k_slop%20%3D%20100.0%20*%20Number.MIN_VALUE%3B%0A%09%09%09%09const%20denom%20%3D%20(-(rX%20*%20nX%20%2B%20rY%20*%20nY))%3B%0A%09%09%09%09if%20(denom%20%3E%20k_slop)%20%7B%0A%09%09%09%09%09const%20bX%20%3D%20s.x%20-%20this.p1.x%3B%0A%09%09%09%09%09const%20bY%20%3D%20s.y%20-%20this.p1.y%3B%0A%09%09%09%09%09let%20a%20%3D%20(bX%20*%20nX%20%2B%20bY%20*%20nY)%3B%0A%09%09%09%09%09if%20(a%20%3E%3D%200.0%20%26%26%20a%20%3C%3D%20maxLambda%20*%20denom)%20%7B%0A%09%09%09%09%09%09const%20mu2%20%3D%20(-rX%20*%20bY)%20%2B%20rY%20*%20bX%3B%0A%09%09%09%09%09%09if%20((-k_slop%20*%20denom)%20%3C%3D%20mu2%20%26%26%20mu2%20%3C%3D%20denom%20*%20(1.0%20%2B%20k_slop))%20%7B%0A%09%09%09%09%09%09%09a%20%2F%3D%20denom%3B%0A%09%09%09%09%09%09%09const%20nLen%20%3D%20Math.sqrt(nX%20*%20nX%20%2B%20nY%20*%20nY)%3B%0A%09%09%09%09%09%09%09nX%20%2F%3D%20nLen%3B%0A%09%09%09%09%09%09%09nY%20%2F%3D%20nLen%3B%0A%09%09%09%09%09%09%09lambda%5B0%5D%20%3D%20a%3B%0A%09%09%09%09%09%09%09normal.Set(nX%2C%20nY)%3B%0A%09%09%09%09%09%09%09return%20true%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09return%20false%3B%0A%09%09%09%7D%0A%0A%09%09%09Extend(aabb)%20%7B%0A%09%09%09%09this.ExtendForward(aabb)%3B%0A%09%09%09%09this.ExtendBackward(aabb)%3B%0A%09%09%09%7D%0A%0A%09%09%09ExtendForward(aabb)%20%7B%0A%09%09%09%09const%20dX%20%3D%20this.p2.x%20-%20this.p1.x%3B%0A%09%09%09%09const%20dY%20%3D%20this.p2.y%20-%20this.p1.y%3B%0A%09%09%09%09const%20lambda%20%3D%20Math.min(dX%20%3E%200%20%3F%20(aabb.upperBound.x%20-%20this.p1.x)%20%2F%20dX%20%3A%20dX%20%3C%200%20%3F%20(aabb.lowerBound.x%20-%20this.p1.x)%20%2F%20dX%20%3A%20Number.POSITIVE_INFINITY%2C%0A%09%09%09%09%09dY%20%3E%200%20%3F%20(aabb.upperBound.y%20-%20this.p1.y)%20%2F%20dY%20%3A%20dY%20%3C%200%20%3F%20(aabb.lowerBound.y%20-%20this.p1.y)%20%2F%20dY%20%3A%20Number.POSITIVE_INFINITY)%3B%0A%09%09%09%09this.p2.x%20%3D%20this.p1.x%20%2B%20dX%20*%20lambda%3B%0A%09%09%09%09this.p2.y%20%3D%20this.p1.y%20%2B%20dY%20*%20lambda%3B%0A%09%09%09%7D%0A%0A%09%09%09ExtendBackward(aabb)%20%7B%0A%09%09%09%09const%20dX%20%3D%20(-this.p2.x)%20%2B%20this.p1.x%3B%0A%09%09%09%09const%20dY%20%3D%20(-this.p2.y)%20%2B%20this.p1.y%3B%0A%09%09%09%09const%20lambda%20%3D%20Math.min(dX%20%3E%200%20%3F%20(aabb.upperBound.x%20-%20this.p2.x)%20%2F%20dX%20%3A%20dX%20%3C%200%20%3F%20(aabb.lowerBound.x%20-%20this.p2.x)%20%2F%20dX%20%3A%20Number.POSITIVE_INFINITY%2C%0A%09%09%09%09%09dY%20%3E%200%20%3F%20(aabb.upperBound.y%20-%20this.p2.y)%20%2F%20dY%20%3A%20dY%20%3C%200%20%3F%20(aabb.lowerBound.y%20-%20this.p2.y)%20%2F%20dY%20%3A%20Number.POSITIVE_INFINITY)%3B%0A%09%09%09%09this.p1.x%20%3D%20this.p2.x%20%2B%20dX%20*%20lambda%3B%0A%09%09%09%09this.p1.y%20%3D%20this.p2.y%20%2B%20dY%20*%20lambda%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2Segment%20%3D%20b2Segment%3B%0A%0A%09%09class%20b2SeparationFunction%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2SeparationFunction.b2SeparationFunction.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2SeparationFunction()%20%7B%0A%09%09%09%09this.m_localPoint%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_axis%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09Initialize(cache%2C%20proxyA%2C%20transformA%2C%20proxyB%2C%20transformB)%20%7B%0A%09%09%09%09this.m_proxyA%20%3D%20proxyA%3B%0A%09%09%09%09this.m_proxyB%20%3D%20proxyB%3B%0A%09%09%09%09const%20count%20%3D%20parseInt(cache.count)%3B%0A%09%09%09%09b2Settings.b2Assert(count%20%3E%200%20%26%26%20count%20%3C%203)%3B%0A%09%09%09%09let%20localPointA%3B%0A%09%09%09%09let%20localPointA1%3B%0A%09%09%09%09let%20localPointA2%3B%0A%09%09%09%09let%20localPointB%3B%0A%09%09%09%09let%20localPointB1%3B%0A%09%09%09%09let%20localPointB2%3B%0A%09%09%09%09let%20pointAX%20%3D%200%3B%0A%09%09%09%09let%20pointAY%20%3D%200%3B%0A%09%09%09%09let%20pointBX%20%3D%200%3B%0A%09%09%09%09let%20pointBY%20%3D%200%3B%0A%09%09%09%09let%20normalX%20%3D%200%3B%0A%09%09%09%09let%20normalY%20%3D%200%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09let%20tVec%3B%0A%09%09%09%09let%20s%20%3D%200%3B%0A%09%09%09%09let%20sgn%20%3D%200%3B%0A%09%09%09%09if%20(count%20%3D%3D%201)%20%7B%0A%09%09%09%09%09this.m_type%20%3D%20b2SeparationFunction.e_points%3B%0A%09%09%09%09%09localPointA%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B0%5D)%3B%0A%09%09%09%09%09localPointB%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B0%5D)%3B%0A%09%09%09%09%09tVec%20%3D%20localPointA%3B%0A%09%09%09%09%09tMat%20%3D%20transformA.R%3B%0A%09%09%09%09%09pointAX%20%3D%20transformA.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09%09pointAY%20%3D%20transformA.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09%09tVec%20%3D%20localPointB%3B%0A%09%09%09%09%09tMat%20%3D%20transformB.R%3B%0A%09%09%09%09%09pointBX%20%3D%20transformB.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09%09pointBY%20%3D%20transformB.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09%09this.m_axis.x%20%3D%20pointBX%20-%20pointAX%3B%0A%09%09%09%09%09this.m_axis.y%20%3D%20pointBY%20-%20pointAY%3B%0A%09%09%09%09%09this.m_axis.Normalize()%3B%0A%09%09%09%09%7D%20else%20if%20(cache.indexB%5B0%5D%20%3D%3D%20cache.indexB%5B1%5D)%20%7B%0A%09%09%09%09%09this.m_type%20%3D%20b2SeparationFunction.e_faceA%3B%0A%09%09%09%09%09localPointA1%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B0%5D)%3B%0A%09%09%09%09%09localPointA2%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B1%5D)%3B%0A%09%09%09%09%09localPointB%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B0%5D)%3B%0A%09%09%09%09%09this.m_localPoint.x%20%3D%200.5%20*%20(localPointA1.x%20%2B%20localPointA2.x)%3B%0A%09%09%09%09%09this.m_localPoint.y%20%3D%200.5%20*%20(localPointA1.y%20%2B%20localPointA2.y)%3B%0A%09%09%09%09%09this.m_axis%20%3D%20b2Math.CrossVF(b2Math.SubtractVV(localPointA2%2C%20localPointA1)%2C%201.0)%3B%0A%09%09%09%09%09this.m_axis.Normalize()%3B%0A%09%09%09%09%09tVec%20%3D%20this.m_axis%3B%0A%09%09%09%09%09tMat%20%3D%20transformA.R%3B%0A%09%09%09%09%09normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%09%09%09%09%09normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%09%09%09%09%09tVec%20%3D%20this.m_localPoint%3B%0A%09%09%09%09%09tMat%20%3D%20transformA.R%3B%0A%09%09%09%09%09pointAX%20%3D%20transformA.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09%09pointAY%20%3D%20transformA.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09%09tVec%20%3D%20localPointB%3B%0A%09%09%09%09%09tMat%20%3D%20transformB.R%3B%0A%09%09%09%09%09pointBX%20%3D%20transformB.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09%09pointBY%20%3D%20transformB.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09%09s%20%3D%20(pointBX%20-%20pointAX)%20*%20normalX%20%2B%20(pointBY%20-%20pointAY)%20*%20normalY%3B%0A%09%09%09%09%09if%20(s%20%3C%200.0)%20%7B%0A%09%09%09%09%09%09this.m_axis.NegativeSelf()%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%20else%20if%20(cache.indexA%5B0%5D%20%3D%3D%20cache.indexA%5B0%5D)%20%7B%0A%09%09%09%09%09this.m_type%20%3D%20b2SeparationFunction.e_faceB%3B%0A%09%09%09%09%09localPointB1%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B0%5D)%3B%0A%09%09%09%09%09localPointB2%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B1%5D)%3B%0A%09%09%09%09%09localPointA%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B0%5D)%3B%0A%09%09%09%09%09this.m_localPoint.x%20%3D%200.5%20*%20(localPointB1.x%20%2B%20localPointB2.x)%3B%0A%09%09%09%09%09this.m_localPoint.y%20%3D%200.5%20*%20(localPointB1.y%20%2B%20localPointB2.y)%3B%0A%09%09%09%09%09this.m_axis%20%3D%20b2Math.CrossVF(b2Math.SubtractVV(localPointB2%2C%20localPointB1)%2C%201.0)%3B%0A%09%09%09%09%09this.m_axis.Normalize()%3B%0A%09%09%09%09%09tVec%20%3D%20this.m_axis%3B%0A%09%09%09%09%09tMat%20%3D%20transformB.R%3B%0A%09%09%09%09%09normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%09%09%09%09%09normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%09%09%09%09%09tVec%20%3D%20this.m_localPoint%3B%0A%09%09%09%09%09tMat%20%3D%20transformB.R%3B%0A%09%09%09%09%09pointBX%20%3D%20transformB.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09%09pointBY%20%3D%20transformB.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09%09tVec%20%3D%20localPointA%3B%0A%09%09%09%09%09tMat%20%3D%20transformA.R%3B%0A%09%09%09%09%09pointAX%20%3D%20transformA.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09%09pointAY%20%3D%20transformA.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09%09s%20%3D%20(pointAX%20-%20pointBX)%20*%20normalX%20%2B%20(pointAY%20-%20pointBY)%20*%20normalY%3B%0A%09%09%09%09%09if%20(s%20%3C%200.0)%20%7B%0A%09%09%09%09%09%09this.m_axis.NegativeSelf()%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09localPointA1%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B0%5D)%3B%0A%09%09%09%09%09localPointA2%20%3D%20this.m_proxyA.GetVertex(cache.indexA%5B1%5D)%3B%0A%09%09%09%09%09localPointB1%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B0%5D)%3B%0A%09%09%09%09%09localPointB2%20%3D%20this.m_proxyB.GetVertex(cache.indexB%5B1%5D)%3B%0A%09%09%09%09%09const%20pA%20%3D%20b2Math.MulX(transformA%2C%20localPointA)%3B%0A%09%09%09%09%09const%20dA%20%3D%20b2Math.MulMV(transformA.R%2C%20b2Math.SubtractVV(localPointA2%2C%20localPointA1))%3B%0A%09%09%09%09%09const%20pB%20%3D%20b2Math.MulX(transformB%2C%20localPointB)%3B%0A%09%09%09%09%09const%20dB%20%3D%20b2Math.MulMV(transformB.R%2C%20b2Math.SubtractVV(localPointB2%2C%20localPointB1))%3B%0A%09%09%09%09%09const%20a%20%3D%20dA.x%20*%20dA.x%20%2B%20dA.y%20*%20dA.y%3B%0A%09%09%09%09%09const%20e%20%3D%20dB.x%20*%20dB.x%20%2B%20dB.y%20*%20dB.y%3B%0A%09%09%09%09%09const%20r%20%3D%20b2Math.SubtractVV(dB%2C%20dA)%3B%0A%09%09%09%09%09const%20c%20%3D%20dA.x%20*%20r.x%20%2B%20dA.y%20*%20r.y%3B%0A%09%09%09%09%09const%20f%20%3D%20dB.x%20*%20r.x%20%2B%20dB.y%20*%20r.y%3B%0A%09%09%09%09%09const%20b%20%3D%20dA.x%20*%20dB.x%20%2B%20dA.y%20*%20dB.y%3B%0A%09%09%09%09%09const%20denom%20%3D%20a%20*%20e%20-%20b%20*%20b%3B%0A%09%09%09%09%09s%20%3D%200.0%3B%0A%09%09%09%09%09if%20(denom%20!%3D%200.0)%20%7B%0A%09%09%09%09%09%09s%20%3D%20b2Math.Clamp((b%20*%20f%20-%20c%20*%20e)%20%2F%20denom%2C%200.0%2C%201.0)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09let%20t%20%3D%20(b%20*%20s%20%2B%20f)%20%2F%20e%3B%0A%09%09%09%09%09if%20(t%20%3C%200.0)%20%7B%0A%09%09%09%09%09%09t%20%3D%200.0%3B%0A%09%09%09%09%09%09s%20%3D%20b2Math.Clamp((b%20-%20c)%20%2F%20a%2C%200.0%2C%201.0)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09localPointA%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09%09localPointA.x%20%3D%20localPointA1.x%20%2B%20s%20*%20(localPointA2.x%20-%20localPointA1.x)%3B%0A%09%09%09%09%09localPointA.y%20%3D%20localPointA1.y%20%2B%20s%20*%20(localPointA2.y%20-%20localPointA1.y)%3B%0A%09%09%09%09%09localPointB%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09%09localPointB.x%20%3D%20localPointB1.x%20%2B%20s%20*%20(localPointB2.x%20-%20localPointB1.x)%3B%0A%09%09%09%09%09localPointB.y%20%3D%20localPointB1.y%20%2B%20s%20*%20(localPointB2.y%20-%20localPointB1.y)%3B%0A%09%09%09%09%09if%20(s%20%3D%3D%200.0%20%7C%7C%20s%20%3D%3D%201.0)%20%7B%0A%09%09%09%09%09%09this.m_type%20%3D%20b2SeparationFunction.e_faceB%3B%0A%09%09%09%09%09%09this.m_axis%20%3D%20b2Math.CrossVF(b2Math.SubtractVV(localPointB2%2C%20localPointB1)%2C%201.0)%3B%0A%09%09%09%09%09%09this.m_axis.Normalize()%3B%0A%09%09%09%09%09%09this.m_localPoint%20%3D%20localPointB%3B%0A%09%09%09%09%09%09tVec%20%3D%20this.m_axis%3B%0A%09%09%09%09%09%09tMat%20%3D%20transformB.R%3B%0A%09%09%09%09%09%09normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%09%09%09%09%09%09normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%09%09%09%09%09%09tVec%20%3D%20this.m_localPoint%3B%0A%09%09%09%09%09%09tMat%20%3D%20transformB.R%3B%0A%09%09%09%09%09%09pointBX%20%3D%20transformB.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09%09%09pointBY%20%3D%20transformB.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09%09%09tVec%20%3D%20localPointA%3B%0A%09%09%09%09%09%09tMat%20%3D%20transformA.R%3B%0A%09%09%09%09%09%09pointAX%20%3D%20transformA.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09%09%09pointAY%20%3D%20transformA.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09%09%09sgn%20%3D%20(pointAX%20-%20pointBX)%20*%20normalX%20%2B%20(pointAY%20-%20pointBY)%20*%20normalY%3B%0A%09%09%09%09%09%09if%20(s%20%3C%200.0)%20%7B%0A%09%09%09%09%09%09%09this.m_axis.NegativeSelf()%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09this.m_type%20%3D%20b2SeparationFunction.e_faceA%3B%0A%09%09%09%09%09%09this.m_axis%20%3D%20b2Math.CrossVF(b2Math.SubtractVV(localPointA2%2C%20localPointA1)%2C%201.0)%3B%0A%09%09%09%09%09%09this.m_localPoint%20%3D%20localPointA%3B%0A%09%09%09%09%09%09tVec%20%3D%20this.m_axis%3B%0A%09%09%09%09%09%09tMat%20%3D%20transformA.R%3B%0A%09%09%09%09%09%09normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%09%09%09%09%09%09normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%09%09%09%09%09%09tVec%20%3D%20this.m_localPoint%3B%0A%09%09%09%09%09%09tMat%20%3D%20transformA.R%3B%0A%09%09%09%09%09%09pointAX%20%3D%20transformA.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09%09%09pointAY%20%3D%20transformA.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09%09%09tVec%20%3D%20localPointB%3B%0A%09%09%09%09%09%09tMat%20%3D%20transformB.R%3B%0A%09%09%09%09%09%09pointBX%20%3D%20transformB.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09%09%09pointBY%20%3D%20transformB.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09%09%09sgn%20%3D%20(pointBX%20-%20pointAX)%20*%20normalX%20%2B%20(pointBY%20-%20pointAY)%20*%20normalY%3B%0A%09%09%09%09%09%09if%20(s%20%3C%200.0)%20%7B%0A%09%09%09%09%09%09%09this.m_axis.NegativeSelf()%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09Evaluate(transformA%2C%20transformB)%20%7B%0A%09%09%09%09let%20axisA%3B%0A%09%09%09%09let%20axisB%3B%0A%09%09%09%09let%20localPointA%3B%0A%09%09%09%09let%20localPointB%3B%0A%09%09%09%09let%20pointA%3B%0A%09%09%09%09let%20pointB%3B%0A%09%09%09%09let%20seperation%20%3D%200%3B%0A%09%09%09%09let%20normal%3B%0A%09%09%09%09switch%20(this.m_type)%20%7B%0A%09%09%09%09%09case%20b2SeparationFunction.e_points%3A%0A%09%09%09%09%09%09%7B%0A%09%09%09%09%09%09%09axisA%20%3D%20b2Math.MulTMV(transformA.R%2C%20this.m_axis)%3B%0A%09%09%09%09%09%09%09axisB%20%3D%20b2Math.MulTMV(transformB.R%2C%20this.m_axis.GetNegative())%3B%0A%09%09%09%09%09%09%09localPointA%20%3D%20this.m_proxyA.GetSupportVertex(axisA)%3B%0A%09%09%09%09%09%09%09localPointB%20%3D%20this.m_proxyB.GetSupportVertex(axisB)%3B%0A%09%09%09%09%09%09%09pointA%20%3D%20b2Math.MulX(transformA%2C%20localPointA)%3B%0A%09%09%09%09%09%09%09pointB%20%3D%20b2Math.MulX(transformB%2C%20localPointB)%3B%0A%09%09%09%09%09%09%09seperation%20%3D%20(pointB.x%20-%20pointA.x)%20*%20this.m_axis.x%20%2B%20(pointB.y%20-%20pointA.y)%20*%20this.m_axis.y%3B%0A%09%09%09%09%09%09%09return%20seperation%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09case%20b2SeparationFunction.e_faceA%3A%0A%09%09%09%09%09%09%7B%0A%09%09%09%09%09%09%09normal%20%3D%20b2Math.MulMV(transformA.R%2C%20this.m_axis)%3B%0A%09%09%09%09%09%09%09pointA%20%3D%20b2Math.MulX(transformA%2C%20this.m_localPoint)%3B%0A%09%09%09%09%09%09%09axisB%20%3D%20b2Math.MulTMV(transformB.R%2C%20normal.GetNegative())%3B%0A%09%09%09%09%09%09%09localPointB%20%3D%20this.m_proxyB.GetSupportVertex(axisB)%3B%0A%09%09%09%09%09%09%09pointB%20%3D%20b2Math.MulX(transformB%2C%20localPointB)%3B%0A%09%09%09%09%09%09%09seperation%20%3D%20(pointB.x%20-%20pointA.x)%20*%20normal.x%20%2B%20(pointB.y%20-%20pointA.y)%20*%20normal.y%3B%0A%09%09%09%09%09%09%09return%20seperation%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09case%20b2SeparationFunction.e_faceB%3A%0A%09%09%09%09%09%09%7B%0A%09%09%09%09%09%09%09normal%20%3D%20b2Math.MulMV(transformB.R%2C%20this.m_axis)%3B%0A%09%09%09%09%09%09%09pointB%20%3D%20b2Math.MulX(transformB%2C%20this.m_localPoint)%3B%0A%09%09%09%09%09%09%09axisA%20%3D%20b2Math.MulTMV(transformA.R%2C%20normal.GetNegative())%3B%0A%09%09%09%09%09%09%09localPointA%20%3D%20this.m_proxyA.GetSupportVertex(axisA)%3B%0A%09%09%09%09%09%09%09pointA%20%3D%20b2Math.MulX(transformA%2C%20localPointA)%3B%0A%09%09%09%09%09%09%09seperation%20%3D%20(pointA.x%20-%20pointB.x)%20*%20normal.x%20%2B%20(pointA.y%20-%20pointB.y)%20*%20normal.y%3B%0A%09%09%09%09%09%09%09return%20seperation%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09default%3A%0A%09%09%09%09%09%09b2Settings.b2Assert(false)%3B%0A%09%09%09%09%09%09return%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2SeparationFunction%20%3D%20b2SeparationFunction%3B%0A%0A%09%09class%20b2Simplex%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2Simplex.b2Simplex.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2Simplex)%20this.b2Simplex.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2Simplex()%20%7B%0A%09%09%09%09this.m_v1%20%3D%20new%20b2SimplexVertex()%3B%0A%09%09%09%09this.m_v2%20%3D%20new%20b2SimplexVertex()%3B%0A%09%09%09%09this.m_v3%20%3D%20new%20b2SimplexVertex()%3B%0A%09%09%09%09this.m_vertices%20%3D%20new%20Vector(3)%3B%0A%09%09%09%7D%0A%0A%09%09%09b2Simplex()%20%7B%0A%09%09%09%09this.m_vertices%5B0%5D%20%3D%20this.m_v1%3B%0A%09%09%09%09this.m_vertices%5B1%5D%20%3D%20this.m_v2%3B%0A%09%09%09%09this.m_vertices%5B2%5D%20%3D%20this.m_v3%3B%0A%09%09%09%7D%0A%0A%09%09%09ReadCache(cache%2C%20proxyA%2C%20transformA%2C%20proxyB%2C%20transformB)%20%7B%0A%09%09%09%09b2Settings.b2Assert(cache.count%20%3E%3D%200%20%26%26%20cache.count%20%3C%3D%203)%3B%0A%09%09%09%09let%20wALocal%3B%0A%09%09%09%09let%20wBLocal%3B%0A%09%09%09%09this.m_count%20%3D%20cache.count%3B%0A%09%09%09%09const%20vertices%20%3D%20this.m_vertices%3B%0A%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_count%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09var%20v%20%3D%20vertices%5Bi%5D%3B%0A%09%09%09%09%09v.indexA%20%3D%20cache.indexA%5Bi%5D%3B%0A%09%09%09%09%09v.indexB%20%3D%20cache.indexB%5Bi%5D%3B%0A%09%09%09%09%09wALocal%20%3D%20proxyA.GetVertex(v.indexA)%3B%0A%09%09%09%09%09wBLocal%20%3D%20proxyB.GetVertex(v.indexB)%3B%0A%09%09%09%09%09v.wA%20%3D%20b2Math.MulX(transformA%2C%20wALocal)%3B%0A%09%09%09%09%09v.wB%20%3D%20b2Math.MulX(transformB%2C%20wBLocal)%3B%0A%09%09%09%09%09v.w%20%3D%20b2Math.SubtractVV(v.wB%2C%20v.wA)%3B%0A%09%09%09%09%09v.a%20%3D%200%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.m_count%20%3E%201)%20%7B%0A%09%09%09%09%09const%20metric1%20%3D%20cache.metric%3B%0A%09%09%09%09%09const%20metric2%20%3D%20this.GetMetric()%3B%0A%09%09%09%09%09if%20(metric2%20%3C%200.5%20*%20metric1%20%7C%7C%202.0%20*%20metric1%20%3C%20metric2%20%7C%7C%20metric2%20%3C%20Number.MIN_VALUE)%20%7B%0A%09%09%09%09%09%09this.m_count%20%3D%200%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.m_count%20%3D%3D%200)%20%7B%0A%09%09%09%09%09v%20%3D%20vertices%5B0%5D%3B%0A%09%09%09%09%09v.indexA%20%3D%200%3B%0A%09%09%09%09%09v.indexB%20%3D%200%3B%0A%09%09%09%09%09wALocal%20%3D%20proxyA.GetVertex(0)%3B%0A%09%09%09%09%09wBLocal%20%3D%20proxyB.GetVertex(0)%3B%0A%09%09%09%09%09v.wA%20%3D%20b2Math.MulX(transformA%2C%20wALocal)%3B%0A%09%09%09%09%09v.wB%20%3D%20b2Math.MulX(transformB%2C%20wBLocal)%3B%0A%09%09%09%09%09v.w%20%3D%20b2Math.SubtractVV(v.wB%2C%20v.wA)%3B%0A%09%09%09%09%09this.m_count%20%3D%201%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09WriteCache(cache)%20%7B%0A%09%09%09%09cache.metric%20%3D%20this.GetMetric()%3B%0A%09%09%09%09cache.count%20%3D%20Box2D.parseUInt(this.m_count)%3B%0A%09%09%09%09const%20vertices%20%3D%20this.m_vertices%3B%0A%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_count%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09cache.indexA%5Bi%5D%20%3D%20Box2D.parseUInt(vertices%5Bi%5D.indexA)%3B%0A%09%09%09%09%09cache.indexB%5Bi%5D%20%3D%20Box2D.parseUInt(vertices%5Bi%5D.indexB)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09GetSearchDirection()%20%7B%0A%09%09%09%09switch%20(this.m_count)%20%7B%0A%09%09%09%09%09case%201%3A%0A%09%09%09%09%09%09return%20this.m_v1.w.GetNegative()%3B%0A%09%09%09%09%09case%202%3A%0A%09%09%09%09%09%09%7B%0A%09%09%09%09%09%09%09const%20e12%20%3D%20b2Math.SubtractVV(this.m_v2.w%2C%20this.m_v1.w)%3B%0A%09%09%09%09%09%09%09const%20sgn%20%3D%20b2Math.CrossVV(e12%2C%20this.m_v1.w.GetNegative())%3B%0A%09%09%09%09%09%09%09if%20(sgn%20%3E%200.0)%20%7B%0A%09%09%09%09%09%09%09%09return%20b2Math.CrossFV(1.0%2C%20e12)%3B%0A%09%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09%09return%20b2Math.CrossVF(e12%2C%201.0)%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09default%3A%0A%09%09%09%09%09%09b2Settings.b2Assert(false)%3B%0A%09%09%09%09%09%09return%20new%20b2Vec2()%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09GetClosestPoint()%20%7B%0A%09%09%09%09switch%20(this.m_count)%20%7B%0A%09%09%09%09%09case%200%3A%0A%09%09%09%09%09%09b2Settings.b2Assert(false)%3B%0A%09%09%09%09%09%09return%20new%20b2Vec2()%3B%0A%09%09%09%09%09case%201%3A%0A%09%09%09%09%09%09return%20this.m_v1.w%3B%0A%09%09%09%09%09case%202%3A%0A%09%09%09%09%09%09return%20new%20b2Vec2(this.m_v1.a%20*%20this.m_v1.w.x%20%2B%20this.m_v2.a%20*%20this.m_v2.w.x%2C%20this.m_v1.a%20*%20this.m_v1.w.y%20%2B%20this.m_v2.a%20*%20this.m_v2.w.y)%3B%0A%09%09%09%09%09default%3A%0A%09%09%09%09%09%09b2Settings.b2Assert(false)%3B%0A%09%09%09%09%09%09return%20new%20b2Vec2()%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09GetWitnessPoints(pA%2C%20pB)%20%7B%0A%09%09%09%09switch%20(this.m_count)%20%7B%0A%09%09%09%09%09case%200%3A%0A%09%09%09%09%09%09b2Settings.b2Assert(false)%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%201%3A%0A%09%09%09%09%09%09pA.SetV(this.m_v1.wA)%3B%0A%09%09%09%09%09%09pB.SetV(this.m_v1.wB)%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%202%3A%0A%09%09%09%09%09%09pA.x%20%3D%20this.m_v1.a%20*%20this.m_v1.wA.x%20%2B%20this.m_v2.a%20*%20this.m_v2.wA.x%3B%0A%09%09%09%09%09%09pA.y%20%3D%20this.m_v1.a%20*%20this.m_v1.wA.y%20%2B%20this.m_v2.a%20*%20this.m_v2.wA.y%3B%0A%09%09%09%09%09%09pB.x%20%3D%20this.m_v1.a%20*%20this.m_v1.wB.x%20%2B%20this.m_v2.a%20*%20this.m_v2.wB.x%3B%0A%09%09%09%09%09%09pB.y%20%3D%20this.m_v1.a%20*%20this.m_v1.wB.y%20%2B%20this.m_v2.a%20*%20this.m_v2.wB.y%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%203%3A%0A%09%09%09%09%09%09pB.x%20%3D%20pA.x%20%3D%20this.m_v1.a%20*%20this.m_v1.wA.x%20%2B%20this.m_v2.a%20*%20this.m_v2.wA.x%20%2B%20this.m_v3.a%20*%20this.m_v3.wA.x%3B%0A%09%09%09%09%09%09pB.y%20%3D%20pA.y%20%3D%20this.m_v1.a%20*%20this.m_v1.wA.y%20%2B%20this.m_v2.a%20*%20this.m_v2.wA.y%20%2B%20this.m_v3.a%20*%20this.m_v3.wA.y%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09default%3A%0A%09%09%09%09%09%09b2Settings.b2Assert(false)%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09GetMetric()%20%7B%0A%09%09%09%09switch%20(this.m_count)%20%7B%0A%09%09%09%09%09case%200%3A%0A%09%09%09%09%09%09b2Settings.b2Assert(false)%3B%0A%09%09%09%09%09%09return%200.0%3B%0A%09%09%09%09%09case%201%3A%0A%09%09%09%09%09%09return%200.0%3B%0A%09%09%09%09%09case%202%3A%0A%09%09%09%09%09%09return%20b2Math.SubtractVV(this.m_v1.w%2C%20this.m_v2.w).Length()%3B%0A%09%09%09%09%09case%203%3A%0A%09%09%09%09%09%09return%20b2Math.CrossVV(b2Math.SubtractVV(this.m_v2.w%2C%20this.m_v1.w)%2C%20b2Math.SubtractVV(this.m_v3.w%2C%20this.m_v1.w))%3B%0A%09%09%09%09%09default%3A%0A%09%09%09%09%09%09b2Settings.b2Assert(false)%3B%0A%09%09%09%09%09%09return%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09Solve2()%20%7B%0A%09%09%09%09const%20w1%20%3D%20this.m_v1.w%3B%0A%09%09%09%09const%20w2%20%3D%20this.m_v2.w%3B%0A%09%09%09%09const%20e12%20%3D%20b2Math.SubtractVV(w2%2C%20w1)%3B%0A%09%09%09%09const%20d12_2%20%3D%20(-(w1.x%20*%20e12.x%20%2B%20w1.y%20*%20e12.y))%3B%0A%09%09%09%09if%20(d12_2%20%3C%3D%200.0)%20%7B%0A%09%09%09%09%09this.m_v1.a%20%3D%201.0%3B%0A%09%09%09%09%09this.m_count%20%3D%201%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20d12_1%20%3D%20(w2.x%20*%20e12.x%20%2B%20w2.y%20*%20e12.y)%3B%0A%09%09%09%09if%20(d12_1%20%3C%3D%200.0)%20%7B%0A%09%09%09%09%09this.m_v2.a%20%3D%201.0%3B%0A%09%09%09%09%09this.m_count%20%3D%201%3B%0A%09%09%09%09%09this.m_v1.Set(this.m_v2)%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20inv_d12%20%3D%201.0%20%2F%20(d12_1%20%2B%20d12_2)%3B%0A%09%09%09%09this.m_v1.a%20%3D%20d12_1%20*%20inv_d12%3B%0A%09%09%09%09this.m_v2.a%20%3D%20d12_2%20*%20inv_d12%3B%0A%09%09%09%09this.m_count%20%3D%202%3B%0A%09%09%09%7D%0A%0A%09%09%09Solve3()%20%7B%0A%09%09%09%09const%20w1%20%3D%20this.m_v1.w%3B%0A%09%09%09%09const%20w2%20%3D%20this.m_v2.w%3B%0A%09%09%09%09const%20w3%20%3D%20this.m_v3.w%3B%0A%09%09%09%09const%20e12%20%3D%20b2Math.SubtractVV(w2%2C%20w1)%3B%0A%09%09%09%09const%20w1e12%20%3D%20b2Math.Dot(w1%2C%20e12)%3B%0A%09%09%09%09const%20w2e12%20%3D%20b2Math.Dot(w2%2C%20e12)%3B%0A%09%09%09%09const%20d12_1%20%3D%20w2e12%3B%0A%09%09%09%09const%20d12_2%20%3D%20(-w1e12)%3B%0A%09%09%09%09const%20e13%20%3D%20b2Math.SubtractVV(w3%2C%20w1)%3B%0A%09%09%09%09const%20w1e13%20%3D%20b2Math.Dot(w1%2C%20e13)%3B%0A%09%09%09%09const%20w3e13%20%3D%20b2Math.Dot(w3%2C%20e13)%3B%0A%09%09%09%09const%20d13_1%20%3D%20w3e13%3B%0A%09%09%09%09const%20d13_2%20%3D%20(-w1e13)%3B%0A%09%09%09%09const%20e23%20%3D%20b2Math.SubtractVV(w3%2C%20w2)%3B%0A%09%09%09%09const%20w2e23%20%3D%20b2Math.Dot(w2%2C%20e23)%3B%0A%09%09%09%09const%20w3e23%20%3D%20b2Math.Dot(w3%2C%20e23)%3B%0A%09%09%09%09const%20d23_1%20%3D%20w3e23%3B%0A%09%09%09%09const%20d23_2%20%3D%20(-w2e23)%3B%0A%09%09%09%09const%20n123%20%3D%20b2Math.CrossVV(e12%2C%20e13)%3B%0A%09%09%09%09const%20d123_1%20%3D%20n123%20*%20b2Math.CrossVV(w2%2C%20w3)%3B%0A%09%09%09%09const%20d123_2%20%3D%20n123%20*%20b2Math.CrossVV(w3%2C%20w1)%3B%0A%09%09%09%09const%20d123_3%20%3D%20n123%20*%20b2Math.CrossVV(w1%2C%20w2)%3B%0A%09%09%09%09if%20(d12_2%20%3C%3D%200.0%20%26%26%20d13_2%20%3C%3D%200.0)%20%7B%0A%09%09%09%09%09this.m_v1.a%20%3D%201.0%3B%0A%09%09%09%09%09this.m_count%20%3D%201%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(d12_1%20%3E%200.0%20%26%26%20d12_2%20%3E%200.0%20%26%26%20d123_3%20%3C%3D%200.0)%20%7B%0A%09%09%09%09%09const%20inv_d12%20%3D%201.0%20%2F%20(d12_1%20%2B%20d12_2)%3B%0A%09%09%09%09%09this.m_v1.a%20%3D%20d12_1%20*%20inv_d12%3B%0A%09%09%09%09%09this.m_v2.a%20%3D%20d12_2%20*%20inv_d12%3B%0A%09%09%09%09%09this.m_count%20%3D%202%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(d13_1%20%3E%200.0%20%26%26%20d13_2%20%3E%200.0%20%26%26%20d123_2%20%3C%3D%200.0)%20%7B%0A%09%09%09%09%09const%20inv_d13%20%3D%201.0%20%2F%20(d13_1%20%2B%20d13_2)%3B%0A%09%09%09%09%09this.m_v1.a%20%3D%20d13_1%20*%20inv_d13%3B%0A%09%09%09%09%09this.m_v3.a%20%3D%20d13_2%20*%20inv_d13%3B%0A%09%09%09%09%09this.m_count%20%3D%202%3B%0A%09%09%09%09%09this.m_v2.Set(this.m_v3)%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(d12_1%20%3C%3D%200.0%20%26%26%20d23_2%20%3C%3D%200.0)%20%7B%0A%09%09%09%09%09this.m_v2.a%20%3D%201.0%3B%0A%09%09%09%09%09this.m_count%20%3D%201%3B%0A%09%09%09%09%09this.m_v1.Set(this.m_v2)%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(d13_1%20%3C%3D%200.0%20%26%26%20d23_1%20%3C%3D%200.0)%20%7B%0A%09%09%09%09%09this.m_v3.a%20%3D%201.0%3B%0A%09%09%09%09%09this.m_count%20%3D%201%3B%0A%09%09%09%09%09this.m_v1.Set(this.m_v3)%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(d23_1%20%3E%200.0%20%26%26%20d23_2%20%3E%200.0%20%26%26%20d123_1%20%3C%3D%200.0)%20%7B%0A%09%09%09%09%09const%20inv_d23%20%3D%201.0%20%2F%20(d23_1%20%2B%20d23_2)%3B%0A%09%09%09%09%09this.m_v2.a%20%3D%20d23_1%20*%20inv_d23%3B%0A%09%09%09%09%09this.m_v3.a%20%3D%20d23_2%20*%20inv_d23%3B%0A%09%09%09%09%09this.m_count%20%3D%202%3B%0A%09%09%09%09%09this.m_v1.Set(this.m_v3)%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20inv_d123%20%3D%201.0%20%2F%20(d123_1%20%2B%20d123_2%20%2B%20d123_3)%3B%0A%09%09%09%09this.m_v1.a%20%3D%20d123_1%20*%20inv_d123%3B%0A%09%09%09%09this.m_v2.a%20%3D%20d123_2%20*%20inv_d123%3B%0A%09%09%09%09this.m_v3.a%20%3D%20d123_3%20*%20inv_d123%3B%0A%09%09%09%09this.m_count%20%3D%203%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2Simplex%20%3D%20b2Simplex%3B%0A%0A%09%09class%20b2SimplexCache%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2SimplexCache.b2SimplexCache.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2SimplexCache()%20%7B%0A%09%09%09%09this.indexA%20%3D%20new%20Vector_a2j_Number(3)%3B%0A%09%09%09%09this.indexB%20%3D%20new%20Vector_a2j_Number(3)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2SimplexCache%20%3D%20b2SimplexCache%3B%0A%0A%09%09class%20b2SimplexVertex%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2SimplexVertex.b2SimplexVertex.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09Set(other)%20%7B%0A%09%09%09%09this.wA.SetV(other.wA)%3B%0A%09%09%09%09this.wB.SetV(other.wB)%3B%0A%09%09%09%09this.w.SetV(other.w)%3B%0A%09%09%09%09this.a%20%3D%20other.a%3B%0A%09%09%09%09this.indexA%20%3D%20other.indexA%3B%0A%09%09%09%09this.indexB%20%3D%20other.indexB%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2SimplexVertex%20%3D%20b2SimplexVertex%3B%0A%0A%09%09function%20b2TimeOfImpact()%20%7B%0A%09%09%09b2TimeOfImpact.b2TimeOfImpact.apply(this%2C%20arguments)%3B%0A%09%09%7D%0A%09%09Box2D.Collision.b2TimeOfImpact%20%3D%20b2TimeOfImpact%3B%0A%0A%09%09class%20b2TOIInput%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2TOIInput.b2TOIInput.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2TOIInput()%20%7B%0A%09%09%09%09this.proxyA%20%3D%20new%20b2DistanceProxy()%3B%0A%09%09%09%09this.proxyB%20%3D%20new%20b2DistanceProxy()%3B%0A%09%09%09%09this.sweepA%20%3D%20new%20b2Sweep()%3B%0A%09%09%09%09this.sweepB%20%3D%20new%20b2Sweep()%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2TOIInput%20%3D%20b2TOIInput%3B%0A%0A%09%09class%20b2WorldManifold%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2WorldManifold.b2WorldManifold.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2WorldManifold)%20this.b2WorldManifold.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2WorldManifold()%20%7B%0A%09%09%09%09this.m_normal%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09b2WorldManifold()%20%7B%0A%09%09%09%09this.m_points%20%3D%20new%20Vector(b2Settings.b2_maxManifoldPoints)%3B%0A%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09this.m_points%5Bi%5D%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09Initialize(manifold%2C%20xfA%2C%20radiusA%2C%20xfB%2C%20radiusB)%20%7B%0A%09%09%09%09if%20(radiusA%20%3D%3D%3D%20undefined)%20radiusA%20%3D%200%3B%0A%09%09%09%09if%20(radiusB%20%3D%3D%3D%20undefined)%20radiusB%20%3D%200%3B%0A%09%09%09%09if%20(manifold.m_pointCount%20%3D%3D%200)%20%7B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09let%20i%20%3D%200%3B%0A%09%09%09%09let%20tVec%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09let%20normalX%20%3D%200%3B%0A%09%09%09%09let%20normalY%20%3D%200%3B%0A%09%09%09%09let%20planePointX%20%3D%200%3B%0A%09%09%09%09let%20planePointY%20%3D%200%3B%0A%09%09%09%09let%20clipPointX%20%3D%200%3B%0A%09%09%09%09let%20clipPointY%20%3D%200%3B%0A%09%09%09%09switch%20(manifold.m_type)%20%7B%0A%09%09%09%09%09case%20b2Manifold.e_circles%3A%0A%09%09%09%09%09%09%7B%0A%09%09%09%09%09%09%09tMat%20%3D%20xfA.R%3B%0A%09%09%09%09%09%09%09tVec%20%3D%20manifold.m_localPoint%3B%0A%09%09%09%09%09%09%09const%20pointAX%20%3D%20xfA.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%09%09%09%09%09%09%09const%20pointAY%20%3D%20xfA.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%09%09%09%09%09%09%09tMat%20%3D%20xfB.R%3B%0A%09%09%09%09%09%09%09tVec%20%3D%20manifold.m_points%5B0%5D.m_localPoint%3B%0A%09%09%09%09%09%09%09const%20pointBX%20%3D%20xfB.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%09%09%09%09%09%09%09const%20pointBY%20%3D%20xfB.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%09%09%09%09%09%09%09const%20dX%20%3D%20pointBX%20-%20pointAX%3B%0A%09%09%09%09%09%09%09const%20dY%20%3D%20pointBY%20-%20pointAY%3B%0A%09%09%09%09%09%09%09const%20d2%20%3D%20dX%20*%20dX%20%2B%20dY%20*%20dY%3B%0A%09%09%09%09%09%09%09if%20(d2%20%3E%20Number.MIN_VALUE%20*%20Number.MIN_VALUE)%20%7B%0A%09%09%09%09%09%09%09%09const%20d%20%3D%20Math.sqrt(d2)%3B%0A%09%09%09%09%09%09%09%09this.m_normal.x%20%3D%20dX%20%2F%20d%3B%0A%09%09%09%09%09%09%09%09this.m_normal.y%20%3D%20dY%20%2F%20d%3B%0A%09%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09%09this.m_normal.x%20%3D%201%3B%0A%09%09%09%09%09%09%09%09this.m_normal.y%20%3D%200%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09const%20cAX%20%3D%20pointAX%20%2B%20radiusA%20*%20this.m_normal.x%3B%0A%09%09%09%09%09%09%09const%20cAY%20%3D%20pointAY%20%2B%20radiusA%20*%20this.m_normal.y%3B%0A%09%09%09%09%09%09%09const%20cBX%20%3D%20pointBX%20-%20radiusB%20*%20this.m_normal.x%3B%0A%09%09%09%09%09%09%09const%20cBY%20%3D%20pointBY%20-%20radiusB%20*%20this.m_normal.y%3B%0A%09%09%09%09%09%09%09this.m_points%5B0%5D.x%20%3D%200.5%20*%20(cAX%20%2B%20cBX)%3B%0A%09%09%09%09%09%09%09this.m_points%5B0%5D.y%20%3D%200.5%20*%20(cAY%20%2B%20cBY)%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20b2Manifold.e_faceA%3A%0A%09%09%09%09%09%09%7B%0A%09%09%09%09%09%09%09tMat%20%3D%20xfA.R%3B%0A%09%09%09%09%09%09%09tVec%20%3D%20manifold.m_localPlaneNormal%3B%0A%09%09%09%09%09%09%09normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%09%09%09%09%09%09%09normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%09%09%09%09%09%09%09tMat%20%3D%20xfA.R%3B%0A%09%09%09%09%09%09%09tVec%20%3D%20manifold.m_localPoint%3B%0A%09%09%09%09%09%09%09planePointX%20%3D%20xfA.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%09%09%09%09%09%09%09planePointY%20%3D%20xfA.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%09%09%09%09%09%09%09this.m_normal.x%20%3D%20normalX%3B%0A%09%09%09%09%09%09%09this.m_normal.y%20%3D%20normalY%3B%0A%09%09%09%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09%09%09%09i%20%3C%20manifold.m_pointCount%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09%09%09%09tMat%20%3D%20xfB.R%3B%0A%09%09%09%09%09%09%09%09tVec%20%3D%20manifold.m_points%5Bi%5D.m_localPoint%3B%0A%09%09%09%09%09%09%09%09clipPointX%20%3D%20xfB.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%09%09%09%09%09%09%09%09clipPointY%20%3D%20xfB.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%09%09%09%09%09%09%09%09this.m_points%5Bi%5D.x%20%3D%20clipPointX%20%2B%200.5%20*%20(radiusA%20-%20(clipPointX%20-%20planePointX)%20*%20normalX%20-%20(clipPointY%20-%20planePointY)%20*%20normalY%20-%20radiusB)%20*%20normalX%3B%0A%09%09%09%09%09%09%09%09this.m_points%5Bi%5D.y%20%3D%20clipPointY%20%2B%200.5%20*%20(radiusA%20-%20(clipPointX%20-%20planePointX)%20*%20normalX%20-%20(clipPointY%20-%20planePointY)%20*%20normalY%20-%20radiusB)%20*%20normalY%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20b2Manifold.e_faceB%3A%0A%09%09%09%09%09%09%7B%0A%09%09%09%09%09%09%09tMat%20%3D%20xfB.R%3B%0A%09%09%09%09%09%09%09tVec%20%3D%20manifold.m_localPlaneNormal%3B%0A%09%09%09%09%09%09%09normalX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%09%09%09%09%09%09%09normalY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%09%09%09%09%09%09%09tMat%20%3D%20xfB.R%3B%0A%09%09%09%09%09%09%09tVec%20%3D%20manifold.m_localPoint%3B%0A%09%09%09%09%09%09%09planePointX%20%3D%20xfB.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%09%09%09%09%09%09%09planePointY%20%3D%20xfB.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%09%09%09%09%09%09%09this.m_normal.x%20%3D%20(-normalX)%3B%0A%09%09%09%09%09%09%09this.m_normal.y%20%3D%20(-normalY)%3B%0A%09%09%09%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09%09%09%09i%20%3C%20manifold.m_pointCount%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09%09%09%09tMat%20%3D%20xfA.R%3B%0A%09%09%09%09%09%09%09%09tVec%20%3D%20manifold.m_points%5Bi%5D.m_localPoint%3B%0A%09%09%09%09%09%09%09%09clipPointX%20%3D%20xfA.position.x%20%2B%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%09%09%09%09%09%09%09%09clipPointY%20%3D%20xfA.position.y%20%2B%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%09%09%09%09%09%09%09%09this.m_points%5Bi%5D.x%20%3D%20clipPointX%20%2B%200.5%20*%20(radiusB%20-%20(clipPointX%20-%20planePointX)%20*%20normalX%20-%20(clipPointY%20-%20planePointY)%20*%20normalY%20-%20radiusA)%20*%20normalX%3B%0A%09%09%09%09%09%09%09%09this.m_points%5Bi%5D.y%20%3D%20clipPointY%20%2B%200.5%20*%20(radiusB%20-%20(clipPointX%20-%20planePointX)%20*%20normalX%20-%20(clipPointY%20-%20planePointY)%20*%20normalY%20-%20radiusA)%20*%20normalY%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.b2WorldManifold%20%3D%20b2WorldManifold%3B%0A%0A%09%09class%20ClipVertex%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09ClipVertex.ClipVertex.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20ClipVertex()%20%7B%0A%09%09%09%09this.v%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.id%20%3D%20new%20b2ContactID()%3B%0A%09%09%09%7D%0A%0A%09%09%09Set(other)%20%7B%0A%09%09%09%09this.v.SetV(other.v)%3B%0A%09%09%09%09this.id.Set(other.id)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.ClipVertex%20%3D%20ClipVertex%3B%0A%0A%09%09class%20Features%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09Features.Features.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09get%20referenceEdge()%20%7B%0A%09%09%09%09return%20this._referenceEdge%3B%0A%09%09%09%7D%0A%0A%09%09%09set%20referenceEdge(value)%20%7B%0A%09%09%09%09if%20(value%20%3D%3D%3D%20undefined)%20value%20%3D%200%3B%0A%09%09%09%09this._referenceEdge%20%3D%20value%3B%0A%09%09%09%09this._m_id._key%20%3D%20(this._m_id._key%20%26%200xffffff00)%20%7C%20(this._referenceEdge%20%26%200x000000ff)%3B%0A%09%09%09%7D%0A%0A%09%09%09get%20incidentEdge()%20%7B%0A%09%09%09%09return%20this._incidentEdge%3B%0A%09%09%09%7D%0A%0A%09%09%09set%20incidentEdge(value)%20%7B%0A%09%09%09%09if%20(value%20%3D%3D%3D%20undefined)%20value%20%3D%200%3B%0A%09%09%09%09this._incidentEdge%20%3D%20value%3B%0A%09%09%09%09this._m_id._key%20%3D%20(this._m_id._key%20%26%200xffff00ff)%20%7C%20((this._incidentEdge%20%3C%3C%208)%20%26%200x0000ff00)%3B%0A%09%09%09%7D%0A%0A%09%09%09get%20incidentVertex()%20%7B%0A%09%09%09%09return%20this._incidentVertex%3B%0A%09%09%09%7D%0A%0A%09%09%09set%20incidentVertex(value)%20%7B%0A%09%09%09%09if%20(value%20%3D%3D%3D%20undefined)%20value%20%3D%200%3B%0A%09%09%09%09this._incidentVertex%20%3D%20value%3B%0A%09%09%09%09this._m_id._key%20%3D%20(this._m_id._key%20%26%200xff00ffff)%20%7C%20((this._incidentVertex%20%3C%3C%2016)%20%26%200x00ff0000)%3B%0A%09%09%09%7D%0A%0A%09%09%09get%20flip()%20%7B%0A%09%09%09%09return%20this._flip%3B%0A%09%09%09%7D%0A%0A%09%09%09set%20flip(value)%20%7B%0A%09%09%09%09if%20(value%20%3D%3D%3D%20undefined)%20value%20%3D%200%3B%0A%09%09%09%09this._flip%20%3D%20value%3B%0A%09%09%09%09this._m_id._key%20%3D%20(this._m_id._key%20%26%200x00ffffff)%20%7C%20((this._flip%20%3C%3C%2024)%20%26%200xff000000)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.Features%20%3D%20Features%3B%0A%0A%09%09class%20b2Shape%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2Shape.b2Shape.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2Shape)%20this.b2Shape.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09Copy()%20%7B%0A%09%09%09%09return%20null%3B%0A%09%09%09%7D%0A%0A%09%09%09Set(other)%20%7B%0A%09%09%09%09this.m_radius%20%3D%20other.m_radius%3B%0A%09%09%09%7D%0A%0A%09%09%09GetType()%20%7B%0A%09%09%09%09return%20this.m_type%3B%0A%09%09%09%7D%0A%0A%09%09%09TestPoint(xf%2C%20p)%20%7B%0A%09%09%09%09return%20false%3B%0A%09%09%09%7D%0A%0A%09%09%09RayCast(output%2C%20input%2C%20transform)%20%7B%0A%09%09%09%09return%20false%3B%0A%09%09%09%7D%0A%0A%09%09%09ComputeAABB(aabb%2C%20xf)%20%7B%20%7D%0A%0A%09%09%09ComputeMass(massData%2C%20density)%20%7B%0A%09%09%09%09if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09ComputeSubmergedArea(normal%2C%20offset%2C%20xf%2C%20c)%20%7B%0A%09%09%09%09if%20(offset%20%3D%3D%3D%20undefined)%20offset%20%3D%200%3B%0A%09%09%09%09return%200%3B%0A%09%09%09%7D%0A%0A%09%09%09b2Shape()%20%7B%0A%09%09%09%09this.m_type%20%3D%20b2Shape.e_unknownShape%3B%0A%09%09%09%09this.m_radius%20%3D%20b2Settings.b2_linearSlop%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.Shapes.b2Shape%20%3D%20b2Shape%3B%0A%09%09Box2D.Common.b2internal%20%3D%20'Box2D.Common.b2internal'%3B%0A%0A%09%09class%20b2CircleShape%20extends%20b2Shape%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2CircleShape.b2CircleShape.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2CircleShape)%20this.b2CircleShape.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2CircleShape()%20%7B%0A%09%09%09%09Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.m_p%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09Copy()%20%7B%0A%09%09%09%09const%20s%20%3D%20new%20b2CircleShape()%3B%0A%09%09%09%09s.Set(this)%3B%0A%09%09%09%09return%20s%3B%0A%09%09%09%7D%0A%0A%09%09%09Set(other)%20%7B%0A%09%09%09%09this.__super.Set.call(this%2C%20other)%3B%0A%09%09%09%09if%20(Box2D.is(other%2C%20b2CircleShape))%20%7B%0A%09%09%09%09%09const%20other2%20%3D%20(other%20instanceof%20b2CircleShape%20%3F%20other%20%3A%20null)%3B%0A%09%09%09%09%09this.m_p.SetV(other2.m_p)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09TestPoint(transform%2C%20p)%20%7B%0A%09%09%09%09const%20tMat%20%3D%20transform.R%3B%0A%09%09%09%09let%20dX%20%3D%20transform.position.x%20%2B%20(tMat.col1.x%20*%20this.m_p.x%20%2B%20tMat.col2.x%20*%20this.m_p.y)%3B%0A%09%09%09%09let%20dY%20%3D%20transform.position.y%20%2B%20(tMat.col1.y%20*%20this.m_p.x%20%2B%20tMat.col2.y%20*%20this.m_p.y)%3B%0A%09%09%09%09dX%20%3D%20p.x%20-%20dX%3B%0A%09%09%09%09dY%20%3D%20p.y%20-%20dY%3B%0A%09%09%09%09return%20(dX%20*%20dX%20%2B%20dY%20*%20dY)%20%3C%3D%20this.m_radius%20*%20this.m_radius%3B%0A%09%09%09%7D%0A%0A%09%09%09RayCast(output%2C%20input%2C%20transform)%20%7B%0A%09%09%09%09const%20tMat%20%3D%20transform.R%3B%0A%09%09%09%09const%20positionX%20%3D%20transform.position.x%20%2B%20(tMat.col1.x%20*%20this.m_p.x%20%2B%20tMat.col2.x%20*%20this.m_p.y)%3B%0A%09%09%09%09const%20positionY%20%3D%20transform.position.y%20%2B%20(tMat.col1.y%20*%20this.m_p.x%20%2B%20tMat.col2.y%20*%20this.m_p.y)%3B%0A%09%09%09%09const%20sX%20%3D%20input.p1.x%20-%20positionX%3B%0A%09%09%09%09const%20sY%20%3D%20input.p1.y%20-%20positionY%3B%0A%09%09%09%09const%20b%20%3D%20(sX%20*%20sX%20%2B%20sY%20*%20sY)%20-%20this.m_radius%20*%20this.m_radius%3B%0A%09%09%09%09const%20rX%20%3D%20input.p2.x%20-%20input.p1.x%3B%0A%09%09%09%09const%20rY%20%3D%20input.p2.y%20-%20input.p1.y%3B%0A%09%09%09%09const%20c%20%3D%20(sX%20*%20rX%20%2B%20sY%20*%20rY)%3B%0A%09%09%09%09const%20rr%20%3D%20(rX%20*%20rX%20%2B%20rY%20*%20rY)%3B%0A%09%09%09%09const%20sigma%20%3D%20c%20*%20c%20-%20rr%20*%20b%3B%0A%09%09%09%09if%20(sigma%20%3C%200.0%20%7C%7C%20rr%20%3C%20Number.MIN_VALUE)%20%7B%0A%09%09%09%09%09return%20false%3B%0A%09%09%09%09%7D%0A%09%09%09%09let%20a%20%3D%20(-(c%20%2B%20Math.sqrt(sigma)))%3B%0A%09%09%09%09if%20(a%20%3E%3D%200.0%20%26%26%20a%20%3C%3D%20input.maxFraction%20*%20rr)%20%7B%0A%09%09%09%09%09a%20%2F%3D%20rr%3B%0A%09%09%09%09%09output.fraction%20%3D%20a%3B%0A%09%09%09%09%09output.normal.x%20%3D%20sX%20%2B%20a%20*%20rX%3B%0A%09%09%09%09%09output.normal.y%20%3D%20sY%20%2B%20a%20*%20rY%3B%0A%09%09%09%09%09output.normal.Normalize()%3B%0A%09%09%09%09%09return%20true%3B%0A%09%09%09%09%7D%0A%09%09%09%09return%20false%3B%0A%09%09%09%7D%0A%0A%09%09%09ComputeAABB(aabb%2C%20transform)%20%7B%0A%09%09%09%09const%20tMat%20%3D%20transform.R%3B%0A%09%09%09%09const%20pX%20%3D%20transform.position.x%20%2B%20(tMat.col1.x%20*%20this.m_p.x%20%2B%20tMat.col2.x%20*%20this.m_p.y)%3B%0A%09%09%09%09const%20pY%20%3D%20transform.position.y%20%2B%20(tMat.col1.y%20*%20this.m_p.x%20%2B%20tMat.col2.y%20*%20this.m_p.y)%3B%0A%09%09%09%09aabb.lowerBound.Set(pX%20-%20this.m_radius%2C%20pY%20-%20this.m_radius)%3B%0A%09%09%09%09aabb.upperBound.Set(pX%20%2B%20this.m_radius%2C%20pY%20%2B%20this.m_radius)%3B%0A%09%09%09%7D%0A%0A%09%09%09ComputeMass(massData%2C%20density)%20%7B%0A%09%09%09%09if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200%3B%0A%09%09%09%09massData.mass%20%3D%20density%20*%20b2Settings.b2_pi%20*%20this.m_radius%20*%20this.m_radius%3B%0A%09%09%09%09massData.center.SetV(this.m_p)%3B%0A%09%09%09%09massData.I%20%3D%20massData.mass%20*%20(0.5%20*%20this.m_radius%20*%20this.m_radius%20%2B%20(this.m_p.x%20*%20this.m_p.x%20%2B%20this.m_p.y%20*%20this.m_p.y))%3B%0A%09%09%09%7D%0A%0A%09%09%09ComputeSubmergedArea(normal%2C%20offset%2C%20xf%2C%20c)%20%7B%0A%09%09%09%09if%20(offset%20%3D%3D%3D%20undefined)%20offset%20%3D%200%3B%0A%09%09%09%09const%20p%20%3D%20b2Math.MulX(xf%2C%20this.m_p)%3B%0A%09%09%09%09const%20l%20%3D%20(-(b2Math.Dot(normal%2C%20p)%20-%20offset))%3B%0A%09%09%09%09if%20(l%20%3C%20(-this.m_radius)%20%2B%20Number.MIN_VALUE)%20%7B%0A%09%09%09%09%09return%200%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(l%20%3E%20this.m_radius)%20%7B%0A%09%09%09%09%09c.SetV(p)%3B%0A%09%09%09%09%09return%20Math.PI%20*%20this.m_radius%20*%20this.m_radius%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20r2%20%3D%20this.m_radius%20*%20this.m_radius%3B%0A%09%09%09%09const%20l2%20%3D%20l%20*%20l%3B%0A%09%09%09%09const%20area%20%3D%20r2%20*%20(Math.asin(l%20%2F%20this.m_radius)%20%2B%20Math.PI%20%2F%202)%20%2B%20l%20*%20Math.sqrt(r2%20-%20l2)%3B%0A%09%09%09%09const%20com%20%3D%20(-2%20%2F%203%20*%20Math.pow(r2%20-%20l2%2C%201.5)%20%2F%20area)%3B%0A%09%09%09%09c.x%20%3D%20p.x%20%2B%20normal.x%20*%20com%3B%0A%09%09%09%09c.y%20%3D%20p.y%20%2B%20normal.y%20*%20com%3B%0A%09%09%09%09return%20area%3B%0A%09%09%09%7D%0A%0A%09%09%09GetLocalPosition()%20%7B%0A%09%09%09%09return%20this.m_p%3B%0A%09%09%09%7D%0A%0A%09%09%09SetLocalPosition(position)%20%7B%0A%09%09%09%09this.m_p.SetV(position)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetRadius()%20%7B%0A%09%09%09%09return%20this.m_radius%3B%0A%09%09%09%7D%0A%0A%09%09%09SetRadius(radius)%20%7B%0A%09%09%09%09if%20(radius%20%3D%3D%3D%20undefined)%20radius%20%3D%200%3B%0A%09%09%09%09this.m_radius%20%3D%20radius%3B%0A%09%09%09%7D%0A%0A%09%09%09b2CircleShape(radius)%20%7B%0A%09%09%09%09if%20(radius%20%3D%3D%3D%20undefined)%20radius%20%3D%200%3B%0A%09%09%09%09this.__super.b2Shape.call(this)%3B%0A%09%09%09%09this.m_type%20%3D%20b2Shape.e_circleShape%3B%0A%09%09%09%09this.m_radius%20%3D%20radius%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.Shapes.b2CircleShape%20%3D%20b2CircleShape%3B%0A%0A%09%09class%20b2EdgeChainDef%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2EdgeChainDef.b2EdgeChainDef.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2EdgeChainDef)%20this.b2EdgeChainDef.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09b2EdgeChainDef()%20%7B%0A%09%09%09%09this.vertexCount%20%3D%200%3B%0A%09%09%09%09this.isALoop%20%3D%20true%3B%0A%09%09%09%09this.vertices%20%3D%20%5B%5D%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.Shapes.b2EdgeChainDef%20%3D%20b2EdgeChainDef%3B%0A%0A%09%09class%20b2EdgeShape%20extends%20b2Shape%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2EdgeShape.b2EdgeShape.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2EdgeShape)%20this.b2EdgeShape.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2EdgeShape()%20%7B%0A%09%09%09%09Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.s_supportVec%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_v1%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_v2%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_coreV1%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_coreV2%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_normal%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_direction%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_cornerDir1%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_cornerDir2%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09TestPoint(transform%2C%20p)%20%7B%0A%09%09%09%09return%20false%3B%0A%09%09%09%7D%0A%0A%09%09%09RayCast(output%2C%20input%2C%20transform)%20%7B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09const%20rX%20%3D%20input.p2.x%20-%20input.p1.x%3B%0A%09%09%09%09const%20rY%20%3D%20input.p2.y%20-%20input.p1.y%3B%0A%09%09%09%09tMat%20%3D%20transform.R%3B%0A%09%09%09%09const%20v1X%20%3D%20transform.position.x%20%2B%20(tMat.col1.x%20*%20this.m_v1.x%20%2B%20tMat.col2.x%20*%20this.m_v1.y)%3B%0A%09%09%09%09const%20v1Y%20%3D%20transform.position.y%20%2B%20(tMat.col1.y%20*%20this.m_v1.x%20%2B%20tMat.col2.y%20*%20this.m_v1.y)%3B%0A%09%09%09%09const%20nX%20%3D%20transform.position.y%20%2B%20(tMat.col1.y%20*%20this.m_v2.x%20%2B%20tMat.col2.y%20*%20this.m_v2.y)%20-%20v1Y%3B%0A%09%09%09%09const%20nY%20%3D%20(-(transform.position.x%20%2B%20(tMat.col1.x%20*%20this.m_v2.x%20%2B%20tMat.col2.x%20*%20this.m_v2.y)%20-%20v1X))%3B%0A%09%09%09%09const%20k_slop%20%3D%20100.0%20*%20Number.MIN_VALUE%3B%0A%09%09%09%09const%20denom%20%3D%20(-(rX%20*%20nX%20%2B%20rY%20*%20nY))%3B%0A%09%09%09%09if%20(denom%20%3E%20k_slop)%20%7B%0A%09%09%09%09%09const%20bX%20%3D%20input.p1.x%20-%20v1X%3B%0A%09%09%09%09%09const%20bY%20%3D%20input.p1.y%20-%20v1Y%3B%0A%09%09%09%09%09let%20a%20%3D%20(bX%20*%20nX%20%2B%20bY%20*%20nY)%3B%0A%09%09%09%09%09if%20(a%20%3E%3D%200.0%20%26%26%20a%20%3C%3D%20input.maxFraction%20*%20denom)%20%7B%0A%09%09%09%09%09%09const%20mu2%20%3D%20(-rX%20*%20bY)%20%2B%20rY%20*%20bX%3B%0A%09%09%09%09%09%09if%20((-k_slop%20*%20denom)%20%3C%3D%20mu2%20%26%26%20mu2%20%3C%3D%20denom%20*%20(1.0%20%2B%20k_slop))%20%7B%0A%09%09%09%09%09%09%09a%20%2F%3D%20denom%3B%0A%09%09%09%09%09%09%09output.fraction%20%3D%20a%3B%0A%09%09%09%09%09%09%09const%20nLen%20%3D%20Math.sqrt(nX%20*%20nX%20%2B%20nY%20*%20nY)%3B%0A%09%09%09%09%09%09%09output.normal.x%20%3D%20nX%20%2F%20nLen%3B%0A%09%09%09%09%09%09%09output.normal.y%20%3D%20nY%20%2F%20nLen%3B%0A%09%09%09%09%09%09%09return%20true%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09return%20false%3B%0A%09%09%09%7D%0A%0A%09%09%09ComputeAABB(aabb%2C%20transform)%20%7B%0A%09%09%09%09const%20tMat%20%3D%20transform.R%3B%0A%09%09%09%09const%20v1X%20%3D%20transform.position.x%20%2B%20(tMat.col1.x%20*%20this.m_v1.x%20%2B%20tMat.col2.x%20*%20this.m_v1.y)%3B%0A%09%09%09%09const%20v1Y%20%3D%20transform.position.y%20%2B%20(tMat.col1.y%20*%20this.m_v1.x%20%2B%20tMat.col2.y%20*%20this.m_v1.y)%3B%0A%09%09%09%09const%20v2X%20%3D%20transform.position.x%20%2B%20(tMat.col1.x%20*%20this.m_v2.x%20%2B%20tMat.col2.x%20*%20this.m_v2.y)%3B%0A%09%09%09%09const%20v2Y%20%3D%20transform.position.y%20%2B%20(tMat.col1.y%20*%20this.m_v2.x%20%2B%20tMat.col2.y%20*%20this.m_v2.y)%3B%0A%09%09%09%09if%20(v1X%20%3C%20v2X)%20%7B%0A%09%09%09%09%09aabb.lowerBound.x%20%3D%20v1X%3B%0A%09%09%09%09%09aabb.upperBound.x%20%3D%20v2X%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09aabb.lowerBound.x%20%3D%20v2X%3B%0A%09%09%09%09%09aabb.upperBound.x%20%3D%20v1X%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(v1Y%20%3C%20v2Y)%20%7B%0A%09%09%09%09%09aabb.lowerBound.y%20%3D%20v1Y%3B%0A%09%09%09%09%09aabb.upperBound.y%20%3D%20v2Y%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09aabb.lowerBound.y%20%3D%20v2Y%3B%0A%09%09%09%09%09aabb.upperBound.y%20%3D%20v1Y%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09ComputeMass(massData%2C%20density)%20%7B%0A%09%09%09%09if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200%3B%0A%09%09%09%09massData.mass%20%3D%200%3B%0A%09%09%09%09massData.center.SetV(this.m_v1)%3B%0A%09%09%09%09massData.I%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09ComputeSubmergedArea(normal%2C%20offset%2C%20xf%2C%20c)%20%7B%0A%09%09%09%09if%20(offset%20%3D%3D%3D%20undefined)%20offset%20%3D%200%3B%0A%09%09%09%09const%20v0%20%3D%20new%20b2Vec2(normal.x%20*%20offset%2C%20normal.y%20*%20offset)%3B%0A%09%09%09%09const%20v1%20%3D%20b2Math.MulX(xf%2C%20this.m_v1)%3B%0A%09%09%09%09const%20v2%20%3D%20b2Math.MulX(xf%2C%20this.m_v2)%3B%0A%09%09%09%09const%20d1%20%3D%20b2Math.Dot(normal%2C%20v1)%20-%20offset%3B%0A%09%09%09%09const%20d2%20%3D%20b2Math.Dot(normal%2C%20v2)%20-%20offset%3B%0A%09%09%09%09if%20(d1%20%3E%200)%20%7B%0A%09%09%09%09%09if%20(d2%20%3E%200)%20%7B%0A%09%09%09%09%09%09return%200%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09v1.x%20%3D%20(-d2%20%2F%20(d1%20-%20d2)%20*%20v1.x)%20%2B%20d1%20%2F%20(d1%20-%20d2)%20*%20v2.x%3B%0A%09%09%09%09%09%09v1.y%20%3D%20(-d2%20%2F%20(d1%20-%20d2)%20*%20v1.y)%20%2B%20d1%20%2F%20(d1%20-%20d2)%20*%20v2.y%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09if%20(d2%20%3E%200)%20%7B%0A%09%09%09%09%09%09v2.x%20%3D%20(-d2%20%2F%20(d1%20-%20d2)%20*%20v1.x)%20%2B%20d1%20%2F%20(d1%20-%20d2)%20*%20v2.x%3B%0A%09%09%09%09%09%09v2.y%20%3D%20(-d2%20%2F%20(d1%20-%20d2)%20*%20v1.y)%20%2B%20d1%20%2F%20(d1%20-%20d2)%20*%20v2.y%3B%0A%09%09%09%09%09%7D%20else%20%7B%20%7D%0A%09%09%09%09%7D%0A%09%09%09%09c.x%20%3D%20(v0.x%20%2B%20v1.x%20%2B%20v2.x)%20%2F%203%3B%0A%09%09%09%09c.y%20%3D%20(v0.y%20%2B%20v1.y%20%2B%20v2.y)%20%2F%203%3B%0A%09%09%09%09return%200.5%20*%20((v1.x%20-%20v0.x)%20*%20(v2.y%20-%20v0.y)%20-%20(v1.y%20-%20v0.y)%20*%20(v2.x%20-%20v0.x))%3B%0A%09%09%09%7D%0A%0A%09%09%09GetLength()%20%7B%0A%09%09%09%09return%20this.m_length%3B%0A%09%09%09%7D%0A%0A%09%09%09GetVertex1()%20%7B%0A%09%09%09%09return%20this.m_v1%3B%0A%09%09%09%7D%0A%0A%09%09%09GetVertex2()%20%7B%0A%09%09%09%09return%20this.m_v2%3B%0A%09%09%09%7D%0A%0A%09%09%09GetCoreVertex1()%20%7B%0A%09%09%09%09return%20this.m_coreV1%3B%0A%09%09%09%7D%0A%0A%09%09%09GetCoreVertex2()%20%7B%0A%09%09%09%09return%20this.m_coreV2%3B%0A%09%09%09%7D%0A%0A%09%09%09GetNormalVector()%20%7B%0A%09%09%09%09return%20this.m_normal%3B%0A%09%09%09%7D%0A%0A%09%09%09GetDirectionVector()%20%7B%0A%09%09%09%09return%20this.m_direction%3B%0A%09%09%09%7D%0A%0A%09%09%09GetCorner1Vector()%20%7B%0A%09%09%09%09return%20this.m_cornerDir1%3B%0A%09%09%09%7D%0A%0A%09%09%09GetCorner2Vector()%20%7B%0A%09%09%09%09return%20this.m_cornerDir2%3B%0A%09%09%09%7D%0A%0A%09%09%09Corner1IsConvex()%20%7B%0A%09%09%09%09return%20this.m_cornerConvex1%3B%0A%09%09%09%7D%0A%0A%09%09%09Corner2IsConvex()%20%7B%0A%09%09%09%09return%20this.m_cornerConvex2%3B%0A%09%09%09%7D%0A%0A%09%09%09GetFirstVertex(xf)%20%7B%0A%09%09%09%09const%20tMat%20%3D%20xf.R%3B%0A%09%09%09%09return%20new%20b2Vec2(xf.position.x%20%2B%20(tMat.col1.x%20*%20this.m_coreV1.x%20%2B%20tMat.col2.x%20*%20this.m_coreV1.y)%2C%20xf.position.y%20%2B%20(tMat.col1.y%20*%20this.m_coreV1.x%20%2B%20tMat.col2.y%20*%20this.m_coreV1.y))%3B%0A%09%09%09%7D%0A%0A%09%09%09GetNextEdge()%20%7B%0A%09%09%09%09return%20this.m_nextEdge%3B%0A%09%09%09%7D%0A%0A%09%09%09GetPrevEdge()%20%7B%0A%09%09%09%09return%20this.m_prevEdge%3B%0A%09%09%09%7D%0A%0A%09%09%09Support(xf%2C%20dX%2C%20dY)%20%7B%0A%09%09%09%09if%20(dX%20%3D%3D%3D%20undefined)%20dX%20%3D%200%3B%0A%09%09%09%09if%20(dY%20%3D%3D%3D%20undefined)%20dY%20%3D%200%3B%0A%09%09%09%09const%20tMat%20%3D%20xf.R%3B%0A%09%09%09%09const%20v1X%20%3D%20xf.position.x%20%2B%20(tMat.col1.x%20*%20this.m_coreV1.x%20%2B%20tMat.col2.x%20*%20this.m_coreV1.y)%3B%0A%09%09%09%09const%20v1Y%20%3D%20xf.position.y%20%2B%20(tMat.col1.y%20*%20this.m_coreV1.x%20%2B%20tMat.col2.y%20*%20this.m_coreV1.y)%3B%0A%09%09%09%09const%20v2X%20%3D%20xf.position.x%20%2B%20(tMat.col1.x%20*%20this.m_coreV2.x%20%2B%20tMat.col2.x%20*%20this.m_coreV2.y)%3B%0A%09%09%09%09const%20v2Y%20%3D%20xf.position.y%20%2B%20(tMat.col1.y%20*%20this.m_coreV2.x%20%2B%20tMat.col2.y%20*%20this.m_coreV2.y)%3B%0A%09%09%09%09if%20((v1X%20*%20dX%20%2B%20v1Y%20*%20dY)%20%3E%20(v2X%20*%20dX%20%2B%20v2Y%20*%20dY))%20%7B%0A%09%09%09%09%09this.s_supportVec.x%20%3D%20v1X%3B%0A%09%09%09%09%09this.s_supportVec.y%20%3D%20v1Y%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.s_supportVec.x%20%3D%20v2X%3B%0A%09%09%09%09%09this.s_supportVec.y%20%3D%20v2Y%3B%0A%09%09%09%09%7D%0A%09%09%09%09return%20this.s_supportVec%3B%0A%09%09%09%7D%0A%0A%09%09%09b2EdgeShape(v1%2C%20v2)%20%7B%0A%09%09%09%09this.__super.b2Shape.call(this)%3B%0A%09%09%09%09this.m_type%20%3D%20b2Shape.e_edgeShape%3B%0A%09%09%09%09this.m_prevEdge%20%3D%20null%3B%0A%09%09%09%09this.m_nextEdge%20%3D%20null%3B%0A%09%09%09%09this.m_v1%20%3D%20v1%3B%0A%09%09%09%09this.m_v2%20%3D%20v2%3B%0A%09%09%09%09this.m_direction.Set(this.m_v2.x%20-%20this.m_v1.x%2C%20this.m_v2.y%20-%20this.m_v1.y)%3B%0A%09%09%09%09this.m_length%20%3D%20this.m_direction.Normalize()%3B%0A%09%09%09%09this.m_normal.Set(this.m_direction.y%2C%20(-this.m_direction.x))%3B%0A%09%09%09%09this.m_coreV1.Set((-b2Settings.b2_toiSlop%20*%20(this.m_normal.x%20-%20this.m_direction.x))%20%2B%20this.m_v1.x%2C%20(-b2Settings.b2_toiSlop%20*%20(this.m_normal.y%20-%20this.m_direction.y))%20%2B%20this.m_v1.y)%3B%0A%09%09%09%09this.m_coreV2.Set((-b2Settings.b2_toiSlop%20*%20(this.m_normal.x%20%2B%20this.m_direction.x))%20%2B%20this.m_v2.x%2C%20(-b2Settings.b2_toiSlop%20*%20(this.m_normal.y%20%2B%20this.m_direction.y))%20%2B%20this.m_v2.y)%3B%0A%09%09%09%09this.m_cornerDir1%20%3D%20this.m_normal%3B%0A%09%09%09%09this.m_cornerDir2.Set((-this.m_normal.x)%2C%20(-this.m_normal.y))%3B%0A%09%09%09%7D%0A%0A%09%09%09SetPrevEdge(edge%2C%20core%2C%20cornerDir%2C%20convex)%20%7B%0A%09%09%09%09this.m_prevEdge%20%3D%20edge%3B%0A%09%09%09%09this.m_coreV1%20%3D%20core%3B%0A%09%09%09%09this.m_cornerDir1%20%3D%20cornerDir%3B%0A%09%09%09%09this.m_cornerConvex1%20%3D%20convex%3B%0A%09%09%09%7D%0A%0A%09%09%09SetNextEdge(edge%2C%20core%2C%20cornerDir%2C%20convex)%20%7B%0A%09%09%09%09this.m_nextEdge%20%3D%20edge%3B%0A%09%09%09%09this.m_coreV2%20%3D%20core%3B%0A%09%09%09%09this.m_cornerDir2%20%3D%20cornerDir%3B%0A%09%09%09%09this.m_cornerConvex2%20%3D%20convex%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.Shapes.b2EdgeShape%20%3D%20b2EdgeShape%3B%0A%0A%09%09class%20b2MassData%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2MassData.b2MassData.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2MassData()%20%7B%0A%09%09%09%09this.mass%20%3D%200.0%3B%0A%09%09%09%09this.center%20%3D%20new%20b2Vec2(0%2C%200)%3B%0A%09%09%09%09this.I%20%3D%200.0%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.Shapes.b2MassData%20%3D%20b2MassData%3B%0A%0A%09%09class%20b2PolygonShape%20extends%20b2Shape%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2PolygonShape.b2PolygonShape.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2PolygonShape)%20this.b2PolygonShape.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2PolygonShape()%20%7B%0A%09%09%09%09Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09Copy()%20%7B%0A%09%09%09%09const%20s%20%3D%20new%20b2PolygonShape()%3B%0A%09%09%09%09s.Set(this)%3B%0A%09%09%09%09return%20s%3B%0A%09%09%09%7D%0A%0A%09%09%09Set(other)%20%7B%0A%09%09%09%09this.__super.Set.call(this%2C%20other)%3B%0A%09%09%09%09if%20(Box2D.is(other%2C%20b2PolygonShape))%20%7B%0A%09%09%09%09%09const%20other2%20%3D%20(other%20instanceof%20b2PolygonShape%20%3F%20other%20%3A%20null)%3B%0A%09%09%09%09%09this.m_centroid.SetV(other2.m_centroid)%3B%0A%09%09%09%09%09this.m_vertexCount%20%3D%20other2.m_vertexCount%3B%0A%09%09%09%09%09this.Reserve(this.m_vertexCount)%3B%0A%09%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09%09this.m_vertices%5Bi%5D.SetV(other2.m_vertices%5Bi%5D)%3B%0A%09%09%09%09%09%09this.m_normals%5Bi%5D.SetV(other2.m_normals%5Bi%5D)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09SetAsArray(vertices%2C%20vertexCount)%20%7B%0A%09%09%09%09if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%09%09%09%09const%20v%20%3D%20new%20Vector()%3B%0A%09%09%09%09let%20i%20%3D%200%3B%0A%09%09%09%09let%20tVec%3B%0A%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09i%20%3C%20vertices.length%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09tVec%20%3D%20vertices%5Bi%5D%3B%0A%09%09%09%09%09v.push(tVec)%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.SetAsVector(v%2C%20vertexCount)%3B%0A%09%09%09%7D%0A%0A%09%09%09SetAsVector(vertices%2C%20vertexCount)%20%7B%0A%09%09%09%09if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%09%09%09%09if%20(vertexCount%20%3D%3D%200)%20vertexCount%20%3D%20vertices.length%3B%0A%09%09%09%09b2Settings.b2Assert(vertexCount%20%3E%3D%202)%3B%0A%09%09%09%09this.m_vertexCount%20%3D%20vertexCount%3B%0A%09%09%09%09this.Reserve(vertexCount)%3B%0A%09%09%09%09let%20i%20%3D%200%3B%0A%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09i%20%3C%20this.m_vertexCount%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09this.m_vertices%5Bi%5D.SetV(vertices%5Bi%5D)%3B%0A%09%09%09%09%7D%0A%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09const%20i1%20%3D%20parseInt(i)%3B%0A%09%09%09%09%09const%20i2%20%3D%20parseInt(i%20%2B%201%20%3C%20this.m_vertexCount%20%3F%20i%20%2B%201%20%3A%200)%3B%0A%09%09%09%09%09const%20edge%20%3D%20b2Math.SubtractVV(this.m_vertices%5Bi2%5D%2C%20this.m_vertices%5Bi1%5D)%3B%0A%09%09%09%09%09b2Settings.b2Assert(edge.LengthSquared()%20%3E%20Number.MIN_VALUE)%3B%0A%09%09%09%09%09this.m_normals%5Bi%5D.SetV(b2Math.CrossVF(edge%2C%201.0))%3B%0A%09%09%09%09%09this.m_normals%5Bi%5D.Normalize()%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_centroid%20%3D%20b2PolygonShape.ComputeCentroid(this.m_vertices%2C%20this.m_vertexCount)%3B%0A%09%09%09%7D%0A%0A%09%09%09SetAsBox(hx%2C%20hy)%20%7B%0A%09%09%09%09if%20(hx%20%3D%3D%3D%20undefined)%20hx%20%3D%200%3B%0A%09%09%09%09if%20(hy%20%3D%3D%3D%20undefined)%20hy%20%3D%200%3B%0A%09%09%09%09this.m_vertexCount%20%3D%204%3B%0A%09%09%09%09this.Reserve(4)%3B%0A%09%09%09%09this.m_vertices%5B0%5D.Set((-hx)%2C%20(-hy))%3B%0A%09%09%09%09this.m_vertices%5B1%5D.Set(hx%2C%20(-hy))%3B%0A%09%09%09%09this.m_vertices%5B2%5D.Set(hx%2C%20hy)%3B%0A%09%09%09%09this.m_vertices%5B3%5D.Set((-hx)%2C%20hy)%3B%0A%09%09%09%09this.m_normals%5B0%5D.Set(0.0%2C%20(-1.0))%3B%0A%09%09%09%09this.m_normals%5B1%5D.Set(1.0%2C%200.0)%3B%0A%09%09%09%09this.m_normals%5B2%5D.Set(0.0%2C%201.0)%3B%0A%09%09%09%09this.m_normals%5B3%5D.Set((-1.0)%2C%200.0)%3B%0A%09%09%09%09this.m_centroid.SetZero()%3B%0A%09%09%09%7D%0A%0A%09%09%09SetAsOrientedBox(hx%2C%20hy%2C%20center%2C%20angle)%20%7B%0A%09%09%09%09if%20(hx%20%3D%3D%3D%20undefined)%20hx%20%3D%200%3B%0A%09%09%09%09if%20(hy%20%3D%3D%3D%20undefined)%20hy%20%3D%200%3B%0A%09%09%09%09if%20(center%20%3D%3D%3D%20undefined)%20center%20%3D%20null%3B%0A%09%09%09%09if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200.0%3B%0A%09%09%09%09this.m_vertexCount%20%3D%204%3B%0A%09%09%09%09this.Reserve(4)%3B%0A%09%09%09%09this.m_vertices%5B0%5D.Set((-hx)%2C%20(-hy))%3B%0A%09%09%09%09this.m_vertices%5B1%5D.Set(hx%2C%20(-hy))%3B%0A%09%09%09%09this.m_vertices%5B2%5D.Set(hx%2C%20hy)%3B%0A%09%09%09%09this.m_vertices%5B3%5D.Set((-hx)%2C%20hy)%3B%0A%09%09%09%09this.m_normals%5B0%5D.Set(0.0%2C%20(-1.0))%3B%0A%09%09%09%09this.m_normals%5B1%5D.Set(1.0%2C%200.0)%3B%0A%09%09%09%09this.m_normals%5B2%5D.Set(0.0%2C%201.0)%3B%0A%09%09%09%09this.m_normals%5B3%5D.Set((-1.0)%2C%200.0)%3B%0A%09%09%09%09this.m_centroid%20%3D%20center%3B%0A%09%09%09%09const%20xf%20%3D%20new%20b2Transform()%3B%0A%09%09%09%09xf.position%20%3D%20center%3B%0A%09%09%09%09xf.R.Set(angle)%3B%0A%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09this.m_vertices%5Bi%5D%20%3D%20b2Math.MulX(xf%2C%20this.m_vertices%5Bi%5D)%3B%0A%09%09%09%09%09this.m_normals%5Bi%5D%20%3D%20b2Math.MulMV(xf.R%2C%20this.m_normals%5Bi%5D)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09SetAsEdge(v1%2C%20v2)%20%7B%0A%09%09%09%09this.m_vertexCount%20%3D%202%3B%0A%09%09%09%09this.Reserve(2)%3B%0A%09%09%09%09this.m_vertices%5B0%5D.SetV(v1)%3B%0A%09%09%09%09this.m_vertices%5B1%5D.SetV(v2)%3B%0A%09%09%09%09this.m_centroid.x%20%3D%200.5%20*%20(v1.x%20%2B%20v2.x)%3B%0A%09%09%09%09this.m_centroid.y%20%3D%200.5%20*%20(v1.y%20%2B%20v2.y)%3B%0A%09%09%09%09this.m_normals%5B0%5D%20%3D%20b2Math.CrossVF(b2Math.SubtractVV(v2%2C%20v1)%2C%201.0)%3B%0A%09%09%09%09this.m_normals%5B0%5D.Normalize()%3B%0A%09%09%09%09this.m_normals%5B1%5D.x%20%3D%20(-this.m_normals%5B0%5D.x)%3B%0A%09%09%09%09this.m_normals%5B1%5D.y%20%3D%20(-this.m_normals%5B0%5D.y)%3B%0A%09%09%09%7D%0A%0A%09%09%09TestPoint(xf%2C%20p)%20%7B%0A%09%09%09%09let%20tVec%3B%0A%09%09%09%09const%20tMat%20%3D%20xf.R%3B%0A%09%09%09%09let%20tX%20%3D%20p.x%20-%20xf.position.x%3B%0A%09%09%09%09let%20tY%20%3D%20p.y%20-%20xf.position.y%3B%0A%09%09%09%09const%20pLocalX%20%3D%20(tX%20*%20tMat.col1.x%20%2B%20tY%20*%20tMat.col1.y)%3B%0A%09%09%09%09const%20pLocalY%20%3D%20(tX%20*%20tMat.col2.x%20%2B%20tY%20*%20tMat.col2.y)%3B%0A%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09tVec%20%3D%20this.m_vertices%5Bi%5D%3B%0A%09%09%09%09%09tX%20%3D%20pLocalX%20-%20tVec.x%3B%0A%09%09%09%09%09tY%20%3D%20pLocalY%20-%20tVec.y%3B%0A%09%09%09%09%09tVec%20%3D%20this.m_normals%5Bi%5D%3B%0A%09%09%09%09%09const%20dot%20%3D%20(tVec.x%20*%20tX%20%2B%20tVec.y%20*%20tY)%3B%0A%09%09%09%09%09if%20(dot%20%3E%200.0)%20%7B%0A%09%09%09%09%09%09return%20false%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09return%20true%3B%0A%09%09%09%7D%0A%0A%09%09%09RayCast(output%2C%20input%2C%20transform)%20%7B%0A%09%09%09%09let%20lower%20%3D%200.0%3B%0A%09%09%09%09let%20upper%20%3D%20input.maxFraction%3B%0A%09%09%09%09let%20tX%20%3D%200%3B%0A%09%09%09%09let%20tY%20%3D%200%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09let%20tVec%3B%0A%09%09%09%09tX%20%3D%20input.p1.x%20-%20transform.position.x%3B%0A%09%09%09%09tY%20%3D%20input.p1.y%20-%20transform.position.y%3B%0A%09%09%09%09tMat%20%3D%20transform.R%3B%0A%09%09%09%09const%20p1X%20%3D%20(tX%20*%20tMat.col1.x%20%2B%20tY%20*%20tMat.col1.y)%3B%0A%09%09%09%09const%20p1Y%20%3D%20(tX%20*%20tMat.col2.x%20%2B%20tY%20*%20tMat.col2.y)%3B%0A%09%09%09%09tX%20%3D%20input.p2.x%20-%20transform.position.x%3B%0A%09%09%09%09tY%20%3D%20input.p2.y%20-%20transform.position.y%3B%0A%09%09%09%09tMat%20%3D%20transform.R%3B%0A%09%09%09%09const%20p2X%20%3D%20(tX%20*%20tMat.col1.x%20%2B%20tY%20*%20tMat.col1.y)%3B%0A%09%09%09%09const%20p2Y%20%3D%20(tX%20*%20tMat.col2.x%20%2B%20tY%20*%20tMat.col2.y)%3B%0A%09%09%09%09const%20dX%20%3D%20p2X%20-%20p1X%3B%0A%09%09%09%09const%20dY%20%3D%20p2Y%20-%20p1Y%3B%0A%09%09%09%09let%20index%20%3D%20parseInt((-1))%3B%0A%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09tVec%20%3D%20this.m_vertices%5Bi%5D%3B%0A%09%09%09%09%09tX%20%3D%20tVec.x%20-%20p1X%3B%0A%09%09%09%09%09tY%20%3D%20tVec.y%20-%20p1Y%3B%0A%09%09%09%09%09tVec%20%3D%20this.m_normals%5Bi%5D%3B%0A%09%09%09%09%09const%20numerator%20%3D%20(tVec.x%20*%20tX%20%2B%20tVec.y%20*%20tY)%3B%0A%09%09%09%09%09const%20denominator%20%3D%20(tVec.x%20*%20dX%20%2B%20tVec.y%20*%20dY)%3B%0A%09%09%09%09%09if%20(denominator%20%3D%3D%200.0)%20%7B%0A%09%09%09%09%09%09if%20(numerator%20%3C%200.0)%20%7B%0A%09%09%09%09%09%09%09return%20false%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09if%20(denominator%20%3C%200.0%20%26%26%20numerator%20%3C%20lower%20*%20denominator)%20%7B%0A%09%09%09%09%09%09%09lower%20%3D%20numerator%20%2F%20denominator%3B%0A%09%09%09%09%09%09%09index%20%3D%20i%3B%0A%09%09%09%09%09%09%7D%20else%20if%20(denominator%20%3E%200.0%20%26%26%20numerator%20%3C%20upper%20*%20denominator)%20%7B%0A%09%09%09%09%09%09%09upper%20%3D%20numerator%20%2F%20denominator%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if%20(upper%20%3C%20lower%20-%20Number.MIN_VALUE)%20%7B%0A%09%09%09%09%09%09return%20false%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09if%20(index%20%3E%3D%200)%20%7B%0A%09%09%09%09%09output.fraction%20%3D%20lower%3B%0A%09%09%09%09%09tMat%20%3D%20transform.R%3B%0A%09%09%09%09%09tVec%20%3D%20this.m_normals%5Bindex%5D%3B%0A%09%09%09%09%09output.normal.x%20%3D%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09%09output.normal.y%20%3D%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09%09return%20true%3B%0A%09%09%09%09%7D%0A%09%09%09%09return%20false%3B%0A%09%09%09%7D%0A%0A%09%09%09ComputeAABB(aabb%2C%20xf)%20%7B%0A%09%09%09%09const%20tMat%20%3D%20xf.R%3B%0A%09%09%09%09let%20tVec%20%3D%20this.m_vertices%5B0%5D%3B%0A%09%09%09%09let%20lowerX%20%3D%20xf.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09let%20lowerY%20%3D%20xf.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09let%20upperX%20%3D%20lowerX%3B%0A%09%09%09%09let%20upperY%20%3D%20lowerY%3B%0A%09%09%09%09for%20(let%20i%20%3D%201%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09tVec%20%3D%20this.m_vertices%5Bi%5D%3B%0A%09%09%09%09%09const%20vX%20%3D%20xf.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09%09const%20vY%20%3D%20xf.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09%09lowerX%20%3D%20lowerX%20%3C%20vX%20%3F%20lowerX%20%3A%20vX%3B%0A%09%09%09%09%09lowerY%20%3D%20lowerY%20%3C%20vY%20%3F%20lowerY%20%3A%20vY%3B%0A%09%09%09%09%09upperX%20%3D%20upperX%20%3E%20vX%20%3F%20upperX%20%3A%20vX%3B%0A%09%09%09%09%09upperY%20%3D%20upperY%20%3E%20vY%20%3F%20upperY%20%3A%20vY%3B%0A%09%09%09%09%7D%0A%09%09%09%09aabb.lowerBound.x%20%3D%20lowerX%20-%20this.m_radius%3B%0A%09%09%09%09aabb.lowerBound.y%20%3D%20lowerY%20-%20this.m_radius%3B%0A%09%09%09%09aabb.upperBound.x%20%3D%20upperX%20%2B%20this.m_radius%3B%0A%09%09%09%09aabb.upperBound.y%20%3D%20upperY%20%2B%20this.m_radius%3B%0A%09%09%09%7D%0A%0A%09%09%09ComputeMass(massData%2C%20density)%20%7B%0A%09%09%09%09if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200%3B%0A%09%09%09%09if%20(this.m_vertexCount%20%3D%3D%202)%20%7B%0A%09%09%09%09%09massData.center.x%20%3D%200.5%20*%20(this.m_vertices%5B0%5D.x%20%2B%20this.m_vertices%5B1%5D.x)%3B%0A%09%09%09%09%09massData.center.y%20%3D%200.5%20*%20(this.m_vertices%5B0%5D.y%20%2B%20this.m_vertices%5B1%5D.y)%3B%0A%09%09%09%09%09massData.mass%20%3D%200.0%3B%0A%09%09%09%09%09massData.I%20%3D%200.0%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09let%20centerX%20%3D%200.0%3B%0A%09%09%09%09let%20centerY%20%3D%200.0%3B%0A%09%09%09%09let%20area%20%3D%200.0%3B%0A%09%09%09%09let%20I%20%3D%200.0%3B%0A%09%09%09%09const%20p1X%20%3D%200.0%3B%0A%09%09%09%09const%20p1Y%20%3D%200.0%3B%0A%09%09%09%09const%20k_inv3%20%3D%201.0%20%2F%203.0%3B%0A%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09const%20p2%20%3D%20this.m_vertices%5Bi%5D%3B%0A%09%09%09%09%09const%20p3%20%3D%20i%20%2B%201%20%3C%20this.m_vertexCount%20%3F%20this.m_vertices%5BparseInt(i%20%2B%201)%5D%20%3A%20this.m_vertices%5B0%5D%3B%0A%09%09%09%09%09const%20e1X%20%3D%20p2.x%20-%20p1X%3B%0A%09%09%09%09%09const%20e1Y%20%3D%20p2.y%20-%20p1Y%3B%0A%09%09%09%09%09const%20e2X%20%3D%20p3.x%20-%20p1X%3B%0A%09%09%09%09%09const%20e2Y%20%3D%20p3.y%20-%20p1Y%3B%0A%09%09%09%09%09const%20D%20%3D%20e1X%20*%20e2Y%20-%20e1Y%20*%20e2X%3B%0A%09%09%09%09%09const%20triangleArea%20%3D%200.5%20*%20D%3B%20area%20%2B%3D%20triangleArea%3B%0A%09%09%09%09%09centerX%20%2B%3D%20triangleArea%20*%20k_inv3%20*%20(p1X%20%2B%20p2.x%20%2B%20p3.x)%3B%0A%09%09%09%09%09centerY%20%2B%3D%20triangleArea%20*%20k_inv3%20*%20(p1Y%20%2B%20p2.y%20%2B%20p3.y)%3B%0A%09%09%09%09%09const%20px%20%3D%20p1X%3B%0A%09%09%09%09%09const%20py%20%3D%20p1Y%3B%0A%09%09%09%09%09const%20ex1%20%3D%20e1X%3B%0A%09%09%09%09%09const%20ey1%20%3D%20e1Y%3B%0A%09%09%09%09%09const%20ex2%20%3D%20e2X%3B%0A%09%09%09%09%09const%20ey2%20%3D%20e2Y%3B%0A%09%09%09%09%09const%20intx2%20%3D%20k_inv3%20*%20(0.25%20*%20(ex1%20*%20ex1%20%2B%20ex2%20*%20ex1%20%2B%20ex2%20*%20ex2)%20%2B%20(px%20*%20ex1%20%2B%20px%20*%20ex2))%20%2B%200.5%20*%20px%20*%20px%3B%0A%09%09%09%09%09const%20inty2%20%3D%20k_inv3%20*%20(0.25%20*%20(ey1%20*%20ey1%20%2B%20ey2%20*%20ey1%20%2B%20ey2%20*%20ey2)%20%2B%20(py%20*%20ey1%20%2B%20py%20*%20ey2))%20%2B%200.5%20*%20py%20*%20py%3B%20I%20%2B%3D%20D%20*%20(intx2%20%2B%20inty2)%3B%0A%09%09%09%09%7D%0A%09%09%09%09massData.mass%20%3D%20density%20*%20area%3B%0A%09%09%09%09centerX%20*%3D%201.0%20%2F%20area%3B%0A%09%09%09%09centerY%20*%3D%201.0%20%2F%20area%3B%0A%09%09%09%09massData.center.Set(centerX%2C%20centerY)%3B%0A%09%09%09%09massData.I%20%3D%20density%20*%20I%3B%0A%09%09%09%7D%0A%0A%09%09%09ComputeSubmergedArea(normal%2C%20offset%2C%20xf%2C%20c)%20%7B%0A%09%09%09%09if%20(offset%20%3D%3D%3D%20undefined)%20offset%20%3D%200%3B%0A%09%09%09%09const%20normalL%20%3D%20b2Math.MulTMV(xf.R%2C%20normal)%3B%0A%09%09%09%09const%20offsetL%20%3D%20offset%20-%20b2Math.Dot(normal%2C%20xf.position)%3B%0A%09%09%09%09const%20depths%20%3D%20new%20Vector_a2j_Number()%3B%0A%09%09%09%09let%20diveCount%20%3D%200%3B%0A%09%09%09%09let%20intoIndex%20%3D%20parseInt((-1))%3B%0A%09%09%09%09let%20outoIndex%20%3D%20parseInt((-1))%3B%0A%09%09%09%09let%20lastSubmerged%20%3D%20false%3B%0A%09%09%09%09let%20i%20%3D%200%3B%0A%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09depths%5Bi%5D%20%3D%20b2Math.Dot(normalL%2C%20this.m_vertices%5Bi%5D)%20-%20offsetL%3B%0A%09%09%09%09%09const%20isSubmerged%20%3D%20depths%5Bi%5D%20%3C%20(-Number.MIN_VALUE)%3B%0A%09%09%09%09%09if%20(i%20%3E%200)%20%7B%0A%09%09%09%09%09%09if%20(isSubmerged)%20%7B%0A%09%09%09%09%09%09%09if%20(!lastSubmerged)%20%7B%0A%09%09%09%09%09%09%09%09intoIndex%20%3D%20i%20-%201%3B%0A%09%09%09%09%09%09%09%09diveCount%2B%2B%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09if%20(lastSubmerged)%20%7B%0A%09%09%09%09%09%09%09%09outoIndex%20%3D%20i%20-%201%3B%0A%09%09%09%09%09%09%09%09diveCount%2B%2B%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%09lastSubmerged%20%3D%20isSubmerged%3B%0A%09%09%09%09%7D%0A%09%09%09%09switch%20(diveCount)%20%7B%0A%09%09%09%09%09case%200%3A%0A%09%09%09%09%09%09if%20(lastSubmerged)%20%7B%0A%09%09%09%09%09%09%09const%20md%20%3D%20new%20b2MassData()%3B%0A%09%09%09%09%09%09%09this.ComputeMass(md%2C%201)%3B%0A%09%09%09%09%09%09%09c.SetV(b2Math.MulX(xf%2C%20md.center))%3B%0A%09%09%09%09%09%09%09return%20md.mass%3B%0A%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09return%200%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%201%3A%0A%09%09%09%09%09%09if%20(intoIndex%20%3D%3D%20(-1))%20%7B%0A%09%09%09%09%09%09%09intoIndex%20%3D%20this.m_vertexCount%20-%201%3B%0A%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09outoIndex%20%3D%20this.m_vertexCount%20-%201%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20intoIndex2%20%3D%20parseInt((intoIndex%20%2B%201)%20%25%20this.m_vertexCount)%3B%0A%09%09%09%09const%20outoIndex2%20%3D%20parseInt((outoIndex%20%2B%201)%20%25%20this.m_vertexCount)%3B%0A%09%09%09%09const%20intoLamdda%20%3D%20(0%20-%20depths%5BintoIndex%5D)%20%2F%20(depths%5BintoIndex2%5D%20-%20depths%5BintoIndex%5D)%3B%0A%09%09%09%09const%20outoLamdda%20%3D%20(0%20-%20depths%5BoutoIndex%5D)%20%2F%20(depths%5BoutoIndex2%5D%20-%20depths%5BoutoIndex%5D)%3B%0A%09%09%09%09const%20intoVec%20%3D%20new%20b2Vec2(this.m_vertices%5BintoIndex%5D.x%20*%20(1%20-%20intoLamdda)%20%2B%20this.m_vertices%5BintoIndex2%5D.x%20*%20intoLamdda%2C%20this.m_vertices%5BintoIndex%5D.y%20*%20(1%20-%20intoLamdda)%20%2B%20this.m_vertices%5BintoIndex2%5D.y%20*%20intoLamdda)%3B%0A%09%09%09%09const%20outoVec%20%3D%20new%20b2Vec2(this.m_vertices%5BoutoIndex%5D.x%20*%20(1%20-%20outoLamdda)%20%2B%20this.m_vertices%5BoutoIndex2%5D.x%20*%20outoLamdda%2C%20this.m_vertices%5BoutoIndex%5D.y%20*%20(1%20-%20outoLamdda)%20%2B%20this.m_vertices%5BoutoIndex2%5D.y%20*%20outoLamdda)%3B%0A%09%09%09%09let%20area%20%3D%200%3B%0A%09%09%09%09const%20center%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09let%20p2%20%3D%20this.m_vertices%5BintoIndex2%5D%3B%0A%09%09%09%09let%20p3%3B%0A%09%09%09%09i%20%3D%20intoIndex2%3B%0A%09%09%09%09while%20(i%20!%3D%20outoIndex2)%20%7B%0A%09%09%09%09%09i%20%3D%20(i%20%2B%201)%20%25%20this.m_vertexCount%3B%0A%09%09%09%09%09if%20(i%20%3D%3D%20outoIndex2)%20p3%20%3D%20outoVec%3B%0A%09%09%09%09%09else%20p3%20%3D%20this.m_vertices%5Bi%5D%3B%0A%09%09%09%09%09const%20triangleArea%20%3D%200.5%20*%20((p2.x%20-%20intoVec.x)%20*%20(p3.y%20-%20intoVec.y)%20-%20(p2.y%20-%20intoVec.y)%20*%20(p3.x%20-%20intoVec.x))%3B%0A%09%09%09%09%09area%20%2B%3D%20triangleArea%3B%0A%09%09%09%09%09center.x%20%2B%3D%20triangleArea%20*%20(intoVec.x%20%2B%20p2.x%20%2B%20p3.x)%20%2F%203%3B%0A%09%09%09%09%09center.y%20%2B%3D%20triangleArea%20*%20(intoVec.y%20%2B%20p2.y%20%2B%20p3.y)%20%2F%203%3B%0A%09%09%09%09%09p2%20%3D%20p3%3B%0A%09%09%09%09%7D%0A%09%09%09%09center.Multiply(1%20%2F%20area)%3B%0A%09%09%09%09c.SetV(b2Math.MulX(xf%2C%20center))%3B%0A%09%09%09%09return%20area%3B%0A%09%09%09%7D%0A%0A%09%09%09GetVertexCount()%20%7B%0A%09%09%09%09return%20this.m_vertexCount%3B%0A%09%09%09%7D%0A%0A%09%09%09GetVertices()%20%7B%0A%09%09%09%09return%20this.m_vertices%3B%0A%09%09%09%7D%0A%0A%09%09%09GetNormals()%20%7B%0A%09%09%09%09return%20this.m_normals%3B%0A%09%09%09%7D%0A%0A%09%09%09GetSupport(d)%20%7B%0A%09%09%09%09let%20bestIndex%20%3D%200%3B%0A%09%09%09%09let%20bestValue%20%3D%20this.m_vertices%5B0%5D.x%20*%20d.x%20%2B%20this.m_vertices%5B0%5D.y%20*%20d.y%3B%0A%09%09%09%09for%20(let%20i%20%3D%201%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09const%20value%20%3D%20this.m_vertices%5Bi%5D.x%20*%20d.x%20%2B%20this.m_vertices%5Bi%5D.y%20*%20d.y%3B%0A%09%09%09%09%09if%20(value%20%3E%20bestValue)%20%7B%0A%09%09%09%09%09%09bestIndex%20%3D%20i%3B%0A%09%09%09%09%09%09bestValue%20%3D%20value%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09return%20bestIndex%3B%0A%09%09%09%7D%0A%0A%09%09%09GetSupportVertex(d)%20%7B%0A%09%09%09%09let%20bestIndex%20%3D%200%3B%0A%09%09%09%09let%20bestValue%20%3D%20this.m_vertices%5B0%5D.x%20*%20d.x%20%2B%20this.m_vertices%5B0%5D.y%20*%20d.y%3B%0A%09%09%09%09for%20(let%20i%20%3D%201%3B%20i%20%3C%20this.m_vertexCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09const%20value%20%3D%20this.m_vertices%5Bi%5D.x%20*%20d.x%20%2B%20this.m_vertices%5Bi%5D.y%20*%20d.y%3B%0A%09%09%09%09%09if%20(value%20%3E%20bestValue)%20%7B%0A%09%09%09%09%09%09bestIndex%20%3D%20i%3B%0A%09%09%09%09%09%09bestValue%20%3D%20value%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09return%20this.m_vertices%5BbestIndex%5D%3B%0A%09%09%09%7D%0A%0A%09%09%09Validate()%20%7B%0A%09%09%09%09return%20false%3B%0A%09%09%09%7D%0A%0A%09%09%09b2PolygonShape()%20%7B%0A%09%09%09%09this.__super.b2Shape.call(this)%3B%0A%09%09%09%09this.m_type%20%3D%20b2Shape.e_polygonShape%3B%0A%09%09%09%09this.m_centroid%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_vertices%20%3D%20new%20Vector()%3B%0A%09%09%09%09this.m_normals%20%3D%20new%20Vector()%3B%0A%09%09%09%7D%0A%0A%09%09%09Reserve(count)%20%7B%0A%09%09%09%09if%20(count%20%3D%3D%3D%20undefined)%20count%20%3D%200%3B%0A%09%09%09%09for%20(let%20i%20%3D%20parseInt(this.m_vertices.length)%3B%20i%20%3C%20count%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09this.m_vertices%5Bi%5D%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09%09this.m_normals%5Bi%5D%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Collision.Shapes.b2PolygonShape%20%3D%20b2PolygonShape%3B%0A%09%09class%20b2Color%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2Color.b2Color.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2Color)%20this.b2Color.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2Color()%20%7B%0A%09%09%09%09this._r%20%3D%200%3B%0A%09%09%09%09this._g%20%3D%200%3B%0A%09%09%09%09this._b%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09b2Color(rr%2C%20gg%2C%20bb)%20%7B%0A%09%09%09%09if%20(rr%20%3D%3D%3D%20undefined)%20rr%20%3D%200%3B%0A%09%09%09%09if%20(gg%20%3D%3D%3D%20undefined)%20gg%20%3D%200%3B%0A%09%09%09%09if%20(bb%20%3D%3D%3D%20undefined)%20bb%20%3D%200%3B%0A%09%09%09%09this._r%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(rr%2C%200.0%2C%201.0))%3B%0A%09%09%09%09this._g%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(gg%2C%200.0%2C%201.0))%3B%0A%09%09%09%09this._b%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(bb%2C%200.0%2C%201.0))%3B%0A%09%09%09%7D%0A%0A%09%09%09Set(rr%2C%20gg%2C%20bb)%20%7B%0A%09%09%09%09if%20(rr%20%3D%3D%3D%20undefined)%20rr%20%3D%200%3B%0A%09%09%09%09if%20(gg%20%3D%3D%3D%20undefined)%20gg%20%3D%200%3B%0A%09%09%09%09if%20(bb%20%3D%3D%3D%20undefined)%20bb%20%3D%200%3B%0A%09%09%09%09this._r%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(rr%2C%200.0%2C%201.0))%3B%0A%09%09%09%09this._g%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(gg%2C%200.0%2C%201.0))%3B%0A%09%09%09%09this._b%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(bb%2C%200.0%2C%201.0))%3B%0A%09%09%09%7D%0A%0A%09%09%09set%20r(rr)%20%7B%0A%09%09%09%09if%20(rr%20%3D%3D%3D%20undefined)%20rr%20%3D%200%3B%0A%09%09%09%09this._r%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(rr%2C%200.0%2C%201.0))%3B%0A%09%09%09%7D%0A%0A%09%09%09set%20g(gg)%20%7B%0A%09%09%09%09if%20(gg%20%3D%3D%3D%20undefined)%20gg%20%3D%200%3B%0A%09%09%09%09this._g%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(gg%2C%200.0%2C%201.0))%3B%0A%09%09%09%7D%0A%0A%09%09%09set%20b(bb)%20%7B%0A%09%09%09%09if%20(bb%20%3D%3D%3D%20undefined)%20bb%20%3D%200%3B%0A%09%09%09%09this._b%20%3D%20Box2D.parseUInt(255%20*%20b2Math.Clamp(bb%2C%200.0%2C%201.0))%3B%0A%09%09%09%7D%0A%0A%09%09%09get%20color()%20%7B%0A%09%09%09%09return%20(this._r%20%3C%3C%2016)%20%7C%20(this._g%20%3C%3C%208)%20%7C%20(this._b)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Common.b2Color%20%3D%20b2Color%3B%0A%0A%09%09function%20b2Settings()%20%7B%0A%09%09%09b2Settings.b2Settings.apply(this%2C%20arguments)%3B%0A%09%09%7D%0A%09%09Box2D.Common.b2Settings%20%3D%20b2Settings%3B%0A%0A%09%09class%20b2Mat22%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2Mat22.b2Mat22.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2Mat22)%20this.b2Mat22.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2Mat22()%20%7B%0A%09%09%09%09this.col1%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.col2%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09b2Mat22()%20%7B%0A%09%09%09%09this.SetIdentity()%3B%0A%09%09%09%7D%0A%0A%09%09%09Set(angle)%20%7B%0A%09%09%09%09if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200%3B%0A%09%09%09%09const%20c%20%3D%20Math.cos(angle)%3B%0A%09%09%09%09const%20s%20%3D%20Math.sin(angle)%3B%0A%09%09%09%09this.col1.x%20%3D%20c%3B%0A%09%09%09%09this.col2.x%20%3D%20(-s)%3B%0A%09%09%09%09this.col1.y%20%3D%20s%3B%0A%09%09%09%09this.col2.y%20%3D%20c%3B%0A%09%09%09%7D%0A%0A%09%09%09SetVV(c1%2C%20c2)%20%7B%0A%09%09%09%09this.col1.SetV(c1)%3B%0A%09%09%09%09this.col2.SetV(c2)%3B%0A%09%09%09%7D%0A%0A%09%09%09Copy()%20%7B%0A%09%09%09%09const%20mat%20%3D%20new%20b2Mat22()%3B%0A%09%09%09%09mat.SetM(this)%3B%0A%09%09%09%09return%20mat%3B%0A%09%09%09%7D%0A%0A%09%09%09SetM(m)%20%7B%0A%09%09%09%09this.col1.SetV(m.col1)%3B%0A%09%09%09%09this.col2.SetV(m.col2)%3B%0A%09%09%09%7D%0A%0A%09%09%09AddM(m)%20%7B%0A%09%09%09%09this.col1.x%20%2B%3D%20m.col1.x%3B%0A%09%09%09%09this.col1.y%20%2B%3D%20m.col1.y%3B%0A%09%09%09%09this.col2.x%20%2B%3D%20m.col2.x%3B%0A%09%09%09%09this.col2.y%20%2B%3D%20m.col2.y%3B%0A%09%09%09%7D%0A%0A%09%09%09SetIdentity()%20%7B%0A%09%09%09%09this.col1.x%20%3D%201.0%3B%0A%09%09%09%09this.col2.x%20%3D%200.0%3B%0A%09%09%09%09this.col1.y%20%3D%200.0%3B%0A%09%09%09%09this.col2.y%20%3D%201.0%3B%0A%09%09%09%7D%0A%0A%09%09%09SetZero()%20%7B%0A%09%09%09%09this.col1.x%20%3D%200.0%3B%0A%09%09%09%09this.col2.x%20%3D%200.0%3B%0A%09%09%09%09this.col1.y%20%3D%200.0%3B%0A%09%09%09%09this.col2.y%20%3D%200.0%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAngle()%20%7B%0A%09%09%09%09return%20Math.atan2(this.col1.y%2C%20this.col1.x)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetInverse(out)%20%7B%0A%09%09%09%09const%20a%20%3D%20this.col1.x%3B%0A%09%09%09%09const%20b%20%3D%20this.col2.x%3B%0A%09%09%09%09const%20c%20%3D%20this.col1.y%3B%0A%09%09%09%09const%20d%20%3D%20this.col2.y%3B%0A%09%09%09%09let%20det%20%3D%20a%20*%20d%20-%20b%20*%20c%3B%0A%09%09%09%09if%20(det%20!%3D%200.0)%20%7B%0A%09%09%09%09%09det%20%3D%201.0%20%2F%20det%3B%0A%09%09%09%09%7D%0A%09%09%09%09out.col1.x%20%3D%20det%20*%20d%3B%0A%09%09%09%09out.col2.x%20%3D%20(-det%20*%20b)%3B%0A%09%09%09%09out.col1.y%20%3D%20(-det%20*%20c)%3B%0A%09%09%09%09out.col2.y%20%3D%20det%20*%20a%3B%0A%09%09%09%09return%20out%3B%0A%09%09%09%7D%0A%0A%09%09%09Solve(out%2C%20bX%2C%20bY)%20%7B%0A%09%09%09%09if%20(bX%20%3D%3D%3D%20undefined)%20bX%20%3D%200%3B%0A%09%09%09%09if%20(bY%20%3D%3D%3D%20undefined)%20bY%20%3D%200%3B%0A%09%09%09%09const%20a11%20%3D%20this.col1.x%3B%0A%09%09%09%09const%20a12%20%3D%20this.col2.x%3B%0A%09%09%09%09const%20a21%20%3D%20this.col1.y%3B%0A%09%09%09%09const%20a22%20%3D%20this.col2.y%3B%0A%09%09%09%09let%20det%20%3D%20a11%20*%20a22%20-%20a12%20*%20a21%3B%0A%09%09%09%09if%20(det%20!%3D%200.0)%20%7B%0A%09%09%09%09%09det%20%3D%201.0%20%2F%20det%3B%0A%09%09%09%09%7D%0A%09%09%09%09out.x%20%3D%20det%20*%20(a22%20*%20bX%20-%20a12%20*%20bY)%3B%0A%09%09%09%09out.y%20%3D%20det%20*%20(a11%20*%20bY%20-%20a21%20*%20bX)%3B%0A%09%09%09%09return%20out%3B%0A%09%09%09%7D%0A%0A%09%09%09Abs()%20%7B%0A%09%09%09%09this.col1.Abs()%3B%0A%09%09%09%09this.col2.Abs()%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Common.Math.b2Mat22%20%3D%20b2Mat22%3B%0A%0A%09%09class%20b2Mat33%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2Mat33.b2Mat33.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2Mat33)%20this.b2Mat33.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2Mat33()%20%7B%0A%09%09%09%09this.col1%20%3D%20new%20b2Vec3()%3B%0A%09%09%09%09this.col2%20%3D%20new%20b2Vec3()%3B%0A%09%09%09%09this.col3%20%3D%20new%20b2Vec3()%3B%0A%09%09%09%7D%0A%0A%09%09%09b2Mat33(c1%2C%20c2%2C%20c3)%20%7B%0A%09%09%09%09if%20(c1%20%3D%3D%3D%20undefined)%20c1%20%3D%20null%3B%0A%09%09%09%09if%20(c2%20%3D%3D%3D%20undefined)%20c2%20%3D%20null%3B%0A%09%09%09%09if%20(c3%20%3D%3D%3D%20undefined)%20c3%20%3D%20null%3B%0A%09%09%09%09if%20(!c1%20%26%26%20!c2%20%26%26%20!c3)%20%7B%0A%09%09%09%09%09this.col1.SetZero()%3B%0A%09%09%09%09%09this.col2.SetZero()%3B%0A%09%09%09%09%09this.col3.SetZero()%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.col1.SetV(c1)%3B%0A%09%09%09%09%09this.col2.SetV(c2)%3B%0A%09%09%09%09%09this.col3.SetV(c3)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09SetVVV(c1%2C%20c2%2C%20c3)%20%7B%0A%09%09%09%09this.col1.SetV(c1)%3B%0A%09%09%09%09this.col2.SetV(c2)%3B%0A%09%09%09%09this.col3.SetV(c3)%3B%0A%09%09%09%7D%0A%0A%09%09%09Copy()%20%7B%0A%09%09%09%09return%20new%20b2Mat33(this.col1%2C%20this.col2%2C%20this.col3)%3B%0A%09%09%09%7D%0A%0A%09%09%09SetM(m)%20%7B%0A%09%09%09%09this.col1.SetV(m.col1)%3B%0A%09%09%09%09this.col2.SetV(m.col2)%3B%0A%09%09%09%09this.col3.SetV(m.col3)%3B%0A%09%09%09%7D%0A%0A%09%09%09AddM(m)%20%7B%0A%09%09%09%09this.col1.x%20%2B%3D%20m.col1.x%3B%0A%09%09%09%09this.col1.y%20%2B%3D%20m.col1.y%3B%0A%09%09%09%09this.col1.z%20%2B%3D%20m.col1.z%3B%0A%09%09%09%09this.col2.x%20%2B%3D%20m.col2.x%3B%0A%09%09%09%09this.col2.y%20%2B%3D%20m.col2.y%3B%0A%09%09%09%09this.col2.z%20%2B%3D%20m.col2.z%3B%0A%09%09%09%09this.col3.x%20%2B%3D%20m.col3.x%3B%0A%09%09%09%09this.col3.y%20%2B%3D%20m.col3.y%3B%0A%09%09%09%09this.col3.z%20%2B%3D%20m.col3.z%3B%0A%09%09%09%7D%0A%0A%09%09%09SetIdentity()%20%7B%0A%09%09%09%09this.col1.x%20%3D%201.0%3B%0A%09%09%09%09this.col2.x%20%3D%200.0%3B%0A%09%09%09%09this.col3.x%20%3D%200.0%3B%0A%09%09%09%09this.col1.y%20%3D%200.0%3B%0A%09%09%09%09this.col2.y%20%3D%201.0%3B%0A%09%09%09%09this.col3.y%20%3D%200.0%3B%0A%09%09%09%09this.col1.z%20%3D%200.0%3B%0A%09%09%09%09this.col2.z%20%3D%200.0%3B%0A%09%09%09%09this.col3.z%20%3D%201.0%3B%0A%09%09%09%7D%0A%0A%09%09%09SetZero()%20%7B%0A%09%09%09%09this.col1.x%20%3D%200.0%3B%0A%09%09%09%09this.col2.x%20%3D%200.0%3B%0A%09%09%09%09this.col3.x%20%3D%200.0%3B%0A%09%09%09%09this.col1.y%20%3D%200.0%3B%0A%09%09%09%09this.col2.y%20%3D%200.0%3B%0A%09%09%09%09this.col3.y%20%3D%200.0%3B%0A%09%09%09%09this.col1.z%20%3D%200.0%3B%0A%09%09%09%09this.col2.z%20%3D%200.0%3B%0A%09%09%09%09this.col3.z%20%3D%200.0%3B%0A%09%09%09%7D%0A%0A%09%09%09Solve22(out%2C%20bX%2C%20bY)%20%7B%0A%09%09%09%09if%20(bX%20%3D%3D%3D%20undefined)%20bX%20%3D%200%3B%0A%09%09%09%09if%20(bY%20%3D%3D%3D%20undefined)%20bY%20%3D%200%3B%0A%09%09%09%09const%20a11%20%3D%20this.col1.x%3B%0A%09%09%09%09const%20a12%20%3D%20this.col2.x%3B%0A%09%09%09%09const%20a21%20%3D%20this.col1.y%3B%0A%09%09%09%09const%20a22%20%3D%20this.col2.y%3B%0A%09%09%09%09let%20det%20%3D%20a11%20*%20a22%20-%20a12%20*%20a21%3B%0A%09%09%09%09if%20(det%20!%3D%200.0)%20%7B%0A%09%09%09%09%09det%20%3D%201.0%20%2F%20det%3B%0A%09%09%09%09%7D%0A%09%09%09%09out.x%20%3D%20det%20*%20(a22%20*%20bX%20-%20a12%20*%20bY)%3B%0A%09%09%09%09out.y%20%3D%20det%20*%20(a11%20*%20bY%20-%20a21%20*%20bX)%3B%0A%09%09%09%09return%20out%3B%0A%09%09%09%7D%0A%0A%09%09%09Solve33(out%2C%20bX%2C%20bY%2C%20bZ)%20%7B%0A%09%09%09%09if%20(bX%20%3D%3D%3D%20undefined)%20bX%20%3D%200%3B%0A%09%09%09%09if%20(bY%20%3D%3D%3D%20undefined)%20bY%20%3D%200%3B%0A%09%09%09%09if%20(bZ%20%3D%3D%3D%20undefined)%20bZ%20%3D%200%3B%0A%09%09%09%09const%20a11%20%3D%20this.col1.x%3B%0A%09%09%09%09const%20a21%20%3D%20this.col1.y%3B%0A%09%09%09%09const%20a31%20%3D%20this.col1.z%3B%0A%09%09%09%09const%20a12%20%3D%20this.col2.x%3B%0A%09%09%09%09const%20a22%20%3D%20this.col2.y%3B%0A%09%09%09%09const%20a32%20%3D%20this.col2.z%3B%0A%09%09%09%09const%20a13%20%3D%20this.col3.x%3B%0A%09%09%09%09const%20a23%20%3D%20this.col3.y%3B%0A%09%09%09%09const%20a33%20%3D%20this.col3.z%3B%0A%09%09%09%09let%20det%20%3D%20a11%20*%20(a22%20*%20a33%20-%20a32%20*%20a23)%20%2B%20a21%20*%20(a32%20*%20a13%20-%20a12%20*%20a33)%20%2B%20a31%20*%20(a12%20*%20a23%20-%20a22%20*%20a13)%3B%0A%09%09%09%09if%20(det%20!%3D%200.0)%20%7B%0A%09%09%09%09%09det%20%3D%201.0%20%2F%20det%3B%0A%09%09%09%09%7D%0A%09%09%09%09out.x%20%3D%20det%20*%20(bX%20*%20(a22%20*%20a33%20-%20a32%20*%20a23)%20%2B%20bY%20*%20(a32%20*%20a13%20-%20a12%20*%20a33)%20%2B%20bZ%20*%20(a12%20*%20a23%20-%20a22%20*%20a13))%3B%0A%09%09%09%09out.y%20%3D%20det%20*%20(a11%20*%20(bY%20*%20a33%20-%20bZ%20*%20a23)%20%2B%20a21%20*%20(bZ%20*%20a13%20-%20bX%20*%20a33)%20%2B%20a31%20*%20(bX%20*%20a23%20-%20bY%20*%20a13))%3B%0A%09%09%09%09out.z%20%3D%20det%20*%20(a11%20*%20(a22%20*%20bZ%20-%20a32%20*%20bY)%20%2B%20a21%20*%20(a32%20*%20bX%20-%20a12%20*%20bZ)%20%2B%20a31%20*%20(a12%20*%20bY%20-%20a22%20*%20bX))%3B%0A%09%09%09%09return%20out%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Common.Math.b2Mat33%20%3D%20b2Mat33%3B%0A%0A%09%09function%20b2Math()%20%7B%0A%09%09%09b2Math.b2Math.apply(this%2C%20arguments)%3B%0A%09%09%7D%0A%09%09Box2D.Common.Math.b2Math%20%3D%20b2Math%3B%0A%0A%09%09class%20b2Sweep%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2Sweep.b2Sweep.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2Sweep()%20%7B%0A%09%09%09%09this.localCenter%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.c0%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.c%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09Set(other)%20%7B%0A%09%09%09%09this.localCenter.SetV(other.localCenter)%3B%0A%09%09%09%09this.c0.SetV(other.c0)%3B%0A%09%09%09%09this.c.SetV(other.c)%3B%0A%09%09%09%09this.a0%20%3D%20other.a0%3B%0A%09%09%09%09this.a%20%3D%20other.a%3B%0A%09%09%09%09this.t0%20%3D%20other.t0%3B%0A%09%09%09%7D%0A%0A%09%09%09Copy()%20%7B%0A%09%09%09%09const%20copy%20%3D%20new%20b2Sweep()%3B%0A%09%09%09%09copy.localCenter.SetV(this.localCenter)%3B%0A%09%09%09%09copy.c0.SetV(this.c0)%3B%0A%09%09%09%09copy.c.SetV(this.c)%3B%0A%09%09%09%09copy.a0%20%3D%20this.a0%3B%0A%09%09%09%09copy.a%20%3D%20this.a%3B%0A%09%09%09%09copy.t0%20%3D%20this.t0%3B%0A%09%09%09%09return%20copy%3B%0A%09%09%09%7D%0A%0A%09%09%09GetTransform(xf%2C%20alpha)%20%7B%0A%09%09%09%09if%20(alpha%20%3D%3D%3D%20undefined)%20alpha%20%3D%200%3B%0A%09%09%09%09xf.position.x%20%3D%20(1.0%20-%20alpha)%20*%20this.c0.x%20%2B%20alpha%20*%20this.c.x%3B%0A%09%09%09%09xf.position.y%20%3D%20(1.0%20-%20alpha)%20*%20this.c0.y%20%2B%20alpha%20*%20this.c.y%3B%0A%09%09%09%09const%20angle%20%3D%20(1.0%20-%20alpha)%20*%20this.a0%20%2B%20alpha%20*%20this.a%3B%0A%09%09%09%09xf.R.Set(angle)%3B%0A%09%09%09%09const%20tMat%20%3D%20xf.R%3B%0A%09%09%09%09xf.position.x%20-%3D%20(tMat.col1.x%20*%20this.localCenter.x%20%2B%20tMat.col2.x%20*%20this.localCenter.y)%3B%0A%09%09%09%09xf.position.y%20-%3D%20(tMat.col1.y%20*%20this.localCenter.x%20%2B%20tMat.col2.y%20*%20this.localCenter.y)%3B%0A%09%09%09%7D%0A%0A%09%09%09Advance(t)%20%7B%0A%09%09%09%09if%20(t%20%3D%3D%3D%20undefined)%20t%20%3D%200%3B%0A%09%09%09%09if%20(this.t0%20%3C%20t%20%26%26%201.0%20-%20this.t0%20%3E%20Number.MIN_VALUE)%20%7B%0A%09%09%09%09%09const%20alpha%20%3D%20(t%20-%20this.t0)%20%2F%20(1.0%20-%20this.t0)%3B%0A%09%09%09%09%09this.c0.x%20%3D%20(1.0%20-%20alpha)%20*%20this.c0.x%20%2B%20alpha%20*%20this.c.x%3B%0A%09%09%09%09%09this.c0.y%20%3D%20(1.0%20-%20alpha)%20*%20this.c0.y%20%2B%20alpha%20*%20this.c.y%3B%0A%09%09%09%09%09this.a0%20%3D%20(1.0%20-%20alpha)%20*%20this.a0%20%2B%20alpha%20*%20this.a%3B%0A%09%09%09%09%09this.t0%20%3D%20t%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Common.Math.b2Sweep%20%3D%20b2Sweep%3B%0A%0A%09%09class%20b2Transform%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2Transform.b2Transform.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2Transform)%20this.b2Transform.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2Transform()%20%7B%0A%09%09%09%09this.position%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.R%20%3D%20new%20b2Mat22()%3B%0A%09%09%09%7D%0A%0A%09%09%09b2Transform(pos%2C%20r)%20%7B%0A%09%09%09%09if%20(pos%20%3D%3D%3D%20undefined)%20pos%20%3D%20null%3B%0A%09%09%09%09if%20(r%20%3D%3D%3D%20undefined)%20r%20%3D%20null%3B%0A%09%09%09%09if%20(pos)%20%7B%0A%09%09%09%09%09this.position.SetV(pos)%3B%0A%09%09%09%09%09this.R.SetM(r)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09Initialize(pos%2C%20r)%20%7B%0A%09%09%09%09this.position.SetV(pos)%3B%0A%09%09%09%09this.R.SetM(r)%3B%0A%09%09%09%7D%0A%0A%09%09%09SetIdentity()%20%7B%0A%09%09%09%09this.position.SetZero()%3B%0A%09%09%09%09this.R.SetIdentity()%3B%0A%09%09%09%7D%0A%0A%09%09%09Set(x)%20%7B%0A%09%09%09%09this.position.SetV(x.position)%3B%0A%09%09%09%09this.R.SetM(x.R)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAngle()%20%7B%0A%09%09%09%09return%20Math.atan2(this.R.col1.y%2C%20this.R.col1.x)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Common.Math.b2Transform%20%3D%20b2Transform%3B%0A%0A%09%09class%20b2Vec2%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2Vec2.b2Vec2.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2Vec2)%20this.b2Vec2.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09b2Vec2(x_%2C%20y_)%20%7B%0A%09%09%09%09if%20(x_%20%3D%3D%3D%20undefined)%20x_%20%3D%200%3B%0A%09%09%09%09if%20(y_%20%3D%3D%3D%20undefined)%20y_%20%3D%200%3B%0A%09%09%09%09this.x%20%3D%20x_%3B%0A%09%09%09%09this.y%20%3D%20y_%3B%0A%09%09%09%7D%0A%0A%09%09%09SetZero()%20%7B%0A%09%09%09%09this.x%20%3D%200.0%3B%0A%09%09%09%09this.y%20%3D%200.0%3B%0A%09%09%09%7D%0A%0A%09%09%09Set(x_%2C%20y_)%20%7B%0A%09%09%09%09if%20(x_%20%3D%3D%3D%20undefined)%20x_%20%3D%200%3B%0A%09%09%09%09if%20(y_%20%3D%3D%3D%20undefined)%20y_%20%3D%200%3B%0A%09%09%09%09this.x%20%3D%20x_%3B%0A%09%09%09%09this.y%20%3D%20y_%3B%0A%09%09%09%7D%0A%0A%09%09%09SetV(v)%20%7B%0A%09%09%09%09this.x%20%3D%20v.x%3B%0A%09%09%09%09this.y%20%3D%20v.y%3B%0A%09%09%09%7D%0A%0A%09%09%09GetNegative()%20%7B%0A%09%09%09%09return%20new%20b2Vec2((-this.x)%2C%20(-this.y))%3B%0A%09%09%09%7D%0A%0A%09%09%09NegativeSelf()%20%7B%0A%09%09%09%09this.x%20%3D%20(-this.x)%3B%0A%09%09%09%09this.y%20%3D%20(-this.y)%3B%0A%09%09%09%7D%0A%0A%09%09%09Copy()%20%7B%0A%09%09%09%09return%20new%20b2Vec2(this.x%2C%20this.y)%3B%0A%09%09%09%7D%0A%0A%09%09%09Add(v)%20%7B%0A%09%09%09%09this.x%20%2B%3D%20v.x%3B%0A%09%09%09%09this.y%20%2B%3D%20v.y%3B%0A%09%09%09%7D%0A%0A%09%09%09Subtract(v)%20%7B%0A%09%09%09%09this.x%20-%3D%20v.x%3B%0A%09%09%09%09this.y%20-%3D%20v.y%3B%0A%09%09%09%7D%0A%0A%09%09%09Multiply(a)%20%7B%0A%09%09%09%09if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%09%09%09%09this.x%20*%3D%20a%3B%0A%09%09%09%09this.y%20*%3D%20a%3B%0A%09%09%09%7D%0A%0A%09%09%09MulM(A)%20%7B%0A%09%09%09%09const%20tX%20%3D%20this.x%3B%0A%09%09%09%09this.x%20%3D%20A.col1.x%20*%20tX%20%2B%20A.col2.x%20*%20this.y%3B%0A%09%09%09%09this.y%20%3D%20A.col1.y%20*%20tX%20%2B%20A.col2.y%20*%20this.y%3B%0A%09%09%09%7D%0A%0A%09%09%09MulTM(A)%20%7B%0A%09%09%09%09const%20tX%20%3D%20b2Math.Dot(this%2C%20A.col1)%3B%0A%09%09%09%09this.y%20%3D%20b2Math.Dot(this%2C%20A.col2)%3B%0A%09%09%09%09this.x%20%3D%20tX%3B%0A%09%09%09%7D%0A%0A%09%09%09CrossVF(s)%20%7B%0A%09%09%09%09if%20(s%20%3D%3D%3D%20undefined)%20s%20%3D%200%3B%0A%09%09%09%09const%20tX%20%3D%20this.x%3B%0A%09%09%09%09this.x%20%3D%20s%20*%20this.y%3B%0A%09%09%09%09this.y%20%3D%20(-s%20*%20tX)%3B%0A%09%09%09%7D%0A%0A%09%09%09CrossFV(s)%20%7B%0A%09%09%09%09if%20(s%20%3D%3D%3D%20undefined)%20s%20%3D%200%3B%0A%09%09%09%09const%20tX%20%3D%20this.x%3B%0A%09%09%09%09this.x%20%3D%20(-s%20*%20this.y)%3B%0A%09%09%09%09this.y%20%3D%20s%20*%20tX%3B%0A%09%09%09%7D%0A%0A%09%09%09MinV(b)%20%7B%0A%09%09%09%09this.x%20%3D%20this.x%20%3C%20b.x%20%3F%20this.x%20%3A%20b.x%3B%0A%09%09%09%09this.y%20%3D%20this.y%20%3C%20b.y%20%3F%20this.y%20%3A%20b.y%3B%0A%09%09%09%7D%0A%0A%09%09%09MaxV(b)%20%7B%0A%09%09%09%09this.x%20%3D%20this.x%20%3E%20b.x%20%3F%20this.x%20%3A%20b.x%3B%0A%09%09%09%09this.y%20%3D%20this.y%20%3E%20b.y%20%3F%20this.y%20%3A%20b.y%3B%0A%09%09%09%7D%0A%0A%09%09%09Abs()%20%7B%0A%09%09%09%09if%20(this.x%20%3C%200)%20this.x%20%3D%20(-this.x)%3B%0A%09%09%09%09if%20(this.y%20%3C%200)%20this.y%20%3D%20(-this.y)%3B%0A%09%09%09%7D%0A%0A%09%09%09Length()%20%7B%0A%09%09%09%09return%20Math.sqrt(this.x%20*%20this.x%20%2B%20this.y%20*%20this.y)%3B%0A%09%09%09%7D%0A%0A%09%09%09LengthSquared()%20%7B%0A%09%09%09%09return%20(this.x%20*%20this.x%20%2B%20this.y%20*%20this.y)%3B%0A%09%09%09%7D%0A%0A%09%09%09Normalize()%20%7B%0A%09%09%09%09const%20length%20%3D%20Math.sqrt(this.x%20*%20this.x%20%2B%20this.y%20*%20this.y)%3B%0A%09%09%09%09if%20(length%20%3C%20Number.MIN_VALUE)%20%7B%0A%09%09%09%09%09return%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20invLength%20%3D%201.0%20%2F%20length%3B%0A%09%09%09%09this.x%20*%3D%20invLength%3B%0A%09%09%09%09this.y%20*%3D%20invLength%3B%0A%09%09%09%09return%20length%3B%0A%09%09%09%7D%0A%0A%09%09%09IsValid()%20%7B%0A%09%09%09%09return%20b2Math.IsValid(this.x)%20%26%26%20b2Math.IsValid(this.y)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Common.Math.b2Vec2%20%3D%20b2Vec2%3B%0A%0A%09%09class%20b2Vec3%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2Vec3.b2Vec3.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2Vec3)%20this.b2Vec3.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09b2Vec3(x%2C%20y%2C%20z)%20%7B%0A%09%09%09%09if%20(x%20%3D%3D%3D%20undefined)%20x%20%3D%200%3B%0A%09%09%09%09if%20(y%20%3D%3D%3D%20undefined)%20y%20%3D%200%3B%0A%09%09%09%09if%20(z%20%3D%3D%3D%20undefined)%20z%20%3D%200%3B%0A%09%09%09%09this.x%20%3D%20x%3B%0A%09%09%09%09this.y%20%3D%20y%3B%0A%09%09%09%09this.z%20%3D%20z%3B%0A%09%09%09%7D%0A%0A%09%09%09SetZero()%20%7B%0A%09%09%09%09this.x%20%3D%20this.y%20%3D%20this.z%20%3D%200.0%3B%0A%09%09%09%7D%0A%0A%09%09%09Set(x%2C%20y%2C%20z)%20%7B%0A%09%09%09%09if%20(x%20%3D%3D%3D%20undefined)%20x%20%3D%200%3B%0A%09%09%09%09if%20(y%20%3D%3D%3D%20undefined)%20y%20%3D%200%3B%0A%09%09%09%09if%20(z%20%3D%3D%3D%20undefined)%20z%20%3D%200%3B%0A%09%09%09%09this.x%20%3D%20x%3B%0A%09%09%09%09this.y%20%3D%20y%3B%0A%09%09%09%09this.z%20%3D%20z%3B%0A%09%09%09%7D%0A%0A%09%09%09SetV(v)%20%7B%0A%09%09%09%09this.x%20%3D%20v.x%3B%0A%09%09%09%09this.y%20%3D%20v.y%3B%0A%09%09%09%09this.z%20%3D%20v.z%3B%0A%09%09%09%7D%0A%0A%09%09%09GetNegative()%20%7B%0A%09%09%09%09return%20new%20b2Vec3((-this.x)%2C%20(-this.y)%2C%20(-this.z))%3B%0A%09%09%09%7D%0A%0A%09%09%09NegativeSelf()%20%7B%0A%09%09%09%09this.x%20%3D%20(-this.x)%3B%0A%09%09%09%09this.y%20%3D%20(-this.y)%3B%0A%09%09%09%09this.z%20%3D%20(-this.z)%3B%0A%09%09%09%7D%0A%0A%09%09%09Copy()%20%7B%0A%09%09%09%09return%20new%20b2Vec3(this.x%2C%20this.y%2C%20this.z)%3B%0A%09%09%09%7D%0A%0A%09%09%09Add(v)%20%7B%0A%09%09%09%09this.x%20%2B%3D%20v.x%3B%0A%09%09%09%09this.y%20%2B%3D%20v.y%3B%0A%09%09%09%09this.z%20%2B%3D%20v.z%3B%0A%09%09%09%7D%0A%0A%09%09%09Subtract(v)%20%7B%0A%09%09%09%09this.x%20-%3D%20v.x%3B%0A%09%09%09%09this.y%20-%3D%20v.y%3B%0A%09%09%09%09this.z%20-%3D%20v.z%3B%0A%09%09%09%7D%0A%0A%09%09%09Multiply(a)%20%7B%0A%09%09%09%09if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%09%09%09%09this.x%20*%3D%20a%3B%0A%09%09%09%09this.y%20*%3D%20a%3B%0A%09%09%09%09this.z%20*%3D%20a%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Common.Math.b2Vec3%20%3D%20b2Vec3%3B%0A%0A%09%09class%20b2Body%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2Body.b2Body.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2Body)%20this.b2Body.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2Body()%20%7B%0A%09%09%09%09this.m_xf%20%3D%20new%20b2Transform()%3B%0A%09%09%09%09this.m_sweep%20%3D%20new%20b2Sweep()%3B%0A%09%09%09%09this.m_linearVelocity%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_force%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09connectEdges(s1%2C%20s2%2C%20angle1)%20%7B%0A%09%09%09%09if%20(angle1%20%3D%3D%3D%20undefined)%20angle1%20%3D%200%3B%0A%09%09%09%09const%20angle2%20%3D%20Math.atan2(s2.GetDirectionVector().y%2C%20s2.GetDirectionVector().x)%3B%0A%09%09%09%09const%20coreOffset%20%3D%20Math.tan((angle2%20-%20angle1)%20*%200.5)%3B%0A%09%09%09%09let%20core%20%3D%20b2Math.MulFV(coreOffset%2C%20s2.GetDirectionVector())%3B%0A%09%09%09%09core%20%3D%20b2Math.SubtractVV(core%2C%20s2.GetNormalVector())%3B%0A%09%09%09%09core%20%3D%20b2Math.MulFV(b2Settings.b2_toiSlop%2C%20core)%3B%0A%09%09%09%09core%20%3D%20b2Math.AddVV(core%2C%20s2.GetVertex1())%3B%0A%09%09%09%09const%20cornerDir%20%3D%20b2Math.AddVV(s1.GetDirectionVector()%2C%20s2.GetDirectionVector())%3B%0A%09%09%09%09cornerDir.Normalize()%3B%0A%09%09%09%09const%20convex%20%3D%20b2Math.Dot(s1.GetDirectionVector()%2C%20s2.GetNormalVector())%20%3E%200.0%3B%0A%09%09%09%09s1.SetNextEdge(s2%2C%20core%2C%20cornerDir%2C%20convex)%3B%0A%09%09%09%09s2.SetPrevEdge(s1%2C%20core%2C%20cornerDir%2C%20convex)%3B%0A%09%09%09%09return%20angle2%3B%0A%09%09%09%7D%0A%0A%09%09%09CreateFixture(def)%20%7B%0A%09%09%09%09if%20(this.m_world.IsLocked()%20%3D%3D%20true)%20%7B%0A%09%09%09%09%09return%20null%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20fixture%20%3D%20new%20b2Fixture()%3B%0A%09%09%09%09fixture.Create(this%2C%20this.m_xf%2C%20def)%3B%0A%09%09%09%09if%20(this.m_flags%20%26%20b2Body.e_activeFlag)%20%7B%0A%09%09%09%09%09const%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%09%09%09%09%09fixture.CreateProxy(broadPhase%2C%20this.m_xf)%3B%0A%09%09%09%09%7D%0A%09%09%09%09fixture.m_next%20%3D%20this.m_fixtureList%3B%0A%09%09%09%09this.m_fixtureList%20%3D%20fixture%3B%0A%09%09%09%09%2B%2Bthis.m_fixtureCount%3B%0A%09%09%09%09fixture.m_body%20%3D%20this%3B%0A%09%09%09%09if%20(fixture.m_density%20%3E%200.0)%20%7B%0A%09%09%09%09%09this.ResetMassData()%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_world.m_flags%20%7C%3D%20b2World.e_newFixture%3B%0A%09%09%09%09return%20fixture%3B%0A%09%09%09%7D%0A%0A%09%09%09CreateFixture2(shape%2C%20density)%20%7B%0A%09%09%09%09if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200.0%3B%0A%09%09%09%09const%20def%20%3D%20new%20b2FixtureDef()%3B%0A%09%09%09%09def.shape%20%3D%20shape%3B%0A%09%09%09%09def.density%20%3D%20density%3B%0A%09%09%09%09return%20this.CreateFixture(def)%3B%0A%09%09%09%7D%0A%0A%09%09%09DestroyFixture(fixture)%20%7B%0A%09%09%09%09if%20(this.m_world.IsLocked()%20%3D%3D%20true)%20%7B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09let%20node%20%3D%20this.m_fixtureList%3B%0A%09%09%09%09let%20ppF%20%3D%20null%3B%0A%09%09%09%09let%20found%20%3D%20false%3B%0A%09%09%09%09while%20(node%20!%3D%20null)%20%7B%0A%09%09%09%09%09if%20(node%20%3D%3D%20fixture)%20%7B%0A%09%09%09%09%09%09if%20(ppF)%20ppF.m_next%20%3D%20fixture.m_next%3B%0A%09%09%09%09%09%09else%20this.m_fixtureList%20%3D%20fixture.m_next%3B%0A%09%09%09%09%09%09found%20%3D%20true%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09ppF%20%3D%20node%3B%0A%09%09%09%09%09node%20%3D%20node.m_next%3B%0A%09%09%09%09%7D%0A%09%09%09%09let%20edge%20%3D%20this.m_contactList%3B%0A%09%09%09%09while%20(edge)%20%7B%0A%09%09%09%09%09const%20c%20%3D%20edge.contact%3B%0A%09%09%09%09%09edge%20%3D%20edge.next%3B%0A%09%09%09%09%09const%20fixtureA%20%3D%20c.GetFixtureA()%3B%0A%09%09%09%09%09const%20fixtureB%20%3D%20c.GetFixtureB()%3B%0A%09%09%09%09%09if%20(fixture%20%3D%3D%20fixtureA%20%7C%7C%20fixture%20%3D%3D%20fixtureB)%20%7B%0A%09%09%09%09%09%09this.m_world.m_contactManager.Destroy(c)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.m_flags%20%26%20b2Body.e_activeFlag)%20%7B%0A%09%09%09%09%09const%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%09%09%09%09%09fixture.DestroyProxy(broadPhase)%3B%0A%09%09%09%09%7D%20else%20%7B%20%7D%0A%09%09%09%09fixture.Destroy()%3B%0A%09%09%09%09fixture.m_body%20%3D%20null%3B%0A%09%09%09%09fixture.m_next%20%3D%20null%3B%0A%09%09%09%09--this.m_fixtureCount%3B%0A%09%09%09%09this.ResetMassData()%3B%0A%09%09%09%7D%0A%0A%09%09%09SetPositionAndAngle(position%2C%20angle)%20%7B%0A%09%09%09%09if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200%3B%0A%09%09%09%09let%20f%3B%0A%09%09%09%09if%20(this.m_world.IsLocked()%20%3D%3D%20true)%20%7B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_xf.R.Set(angle)%3B%0A%09%09%09%09this.m_xf.position.SetV(position)%3B%0A%09%09%09%09const%20tMat%20%3D%20this.m_xf.R%3B%0A%09%09%09%09const%20tVec%20%3D%20this.m_sweep.localCenter%3B%0A%09%09%09%09this.m_sweep.c.x%20%3D%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09this.m_sweep.c.y%20%3D%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09this.m_sweep.c.x%20%2B%3D%20this.m_xf.position.x%3B%0A%09%09%09%09this.m_sweep.c.y%20%2B%3D%20this.m_xf.position.y%3B%0A%09%09%09%09this.m_sweep.c0.SetV(this.m_sweep.c)%3B%0A%09%09%09%09this.m_sweep.a0%20%3D%20this.m_sweep.a%20%3D%20angle%3B%0A%09%09%09%09const%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%09%09%09%09for%20(f%20%3D%20this.m_fixtureList%3B%0A%09%09%09%09%09f%3B%20f%20%3D%20f.m_next)%20%7B%0A%09%09%09%09%09f.Synchronize(broadPhase%2C%20this.m_xf%2C%20this.m_xf)%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_world.m_contactManager.FindNewContacts()%3B%0A%09%09%09%7D%0A%0A%09%09%09SetTransform(xf)%20%7B%0A%09%09%09%09this.SetPositionAndAngle(xf.position%2C%20xf.GetAngle())%3B%0A%09%09%09%7D%0A%0A%09%09%09GetTransform()%20%7B%0A%09%09%09%09return%20this.m_xf%3B%0A%09%09%09%7D%0A%0A%09%09%09GetPosition()%20%7B%0A%09%09%09%09return%20this.m_xf.position%3B%0A%09%09%09%7D%0A%0A%09%09%09SetPosition(position)%20%7B%0A%09%09%09%09this.SetPositionAndAngle(position%2C%20this.GetAngle())%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAngle()%20%7B%0A%09%09%09%09return%20this.m_sweep.a%3B%0A%09%09%09%7D%0A%0A%09%09%09SetAngle(angle)%20%7B%0A%09%09%09%09if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200%3B%0A%09%09%09%09this.SetPositionAndAngle(this.GetPosition()%2C%20angle)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetWorldCenter()%20%7B%0A%09%09%09%09return%20this.m_sweep.c%3B%0A%09%09%09%7D%0A%0A%09%09%09GetLocalCenter()%20%7B%0A%09%09%09%09return%20this.m_sweep.localCenter%3B%0A%09%09%09%7D%0A%0A%09%09%09SetLinearVelocity(v)%20%7B%0A%09%09%09%09if%20(this.m_type%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_linearVelocity.SetV(v)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetLinearVelocity()%20%7B%0A%09%09%09%09return%20this.m_linearVelocity%3B%0A%09%09%09%7D%0A%0A%09%09%09SetAngularVelocity(omega)%20%7B%0A%09%09%09%09if%20(omega%20%3D%3D%3D%20undefined)%20omega%20%3D%200%3B%0A%09%09%09%09if%20(this.m_type%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_angularVelocity%20%3D%20omega%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAngularVelocity()%20%7B%0A%09%09%09%09return%20this.m_angularVelocity%3B%0A%09%09%09%7D%0A%0A%09%09%09GetDefinition()%20%7B%0A%09%09%09%09const%20bd%20%3D%20new%20b2BodyDef()%3B%0A%09%09%09%09bd.type%20%3D%20this.GetType()%3B%0A%09%09%09%09bd.allowSleep%20%3D%20(this.m_flags%20%26%20b2Body.e_allowSleepFlag)%20%3D%3D%20b2Body.e_allowSleepFlag%3B%0A%09%09%09%09bd.angle%20%3D%20this.GetAngle()%3B%0A%09%09%09%09bd.angularDamping%20%3D%20this.m_angularDamping%3B%0A%09%09%09%09bd.angularVelocity%20%3D%20this.m_angularVelocity%3B%0A%09%09%09%09bd.fixedRotation%20%3D%20(this.m_flags%20%26%20b2Body.e_fixedRotationFlag)%20%3D%3D%20b2Body.e_fixedRotationFlag%3B%0A%09%09%09%09bd.bullet%20%3D%20(this.m_flags%20%26%20b2Body.e_bulletFlag)%20%3D%3D%20b2Body.e_bulletFlag%3B%0A%09%09%09%09bd.awake%20%3D%20(this.m_flags%20%26%20b2Body.e_awakeFlag)%20%3D%3D%20b2Body.e_awakeFlag%3B%0A%09%09%09%09bd.linearDamping%20%3D%20this.m_linearDamping%3B%0A%09%09%09%09bd.linearVelocity.SetV(this.GetLinearVelocity())%3B%0A%09%09%09%09bd.position%20%3D%20this.GetPosition()%3B%0A%09%09%09%09bd.userData%20%3D%20this.GetUserData()%3B%0A%09%09%09%09return%20bd%3B%0A%09%09%09%7D%0A%0A%09%09%09ApplyForce(force%2C%20point)%20%7B%0A%09%09%09%09if%20(this.m_type%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.IsAwake()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09this.SetAwake(true)%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_force.x%20%2B%3D%20force.x%3B%0A%09%09%09%09this.m_force.y%20%2B%3D%20force.y%3B%0A%09%09%09%09this.m_torque%20%2B%3D%20((point.x%20-%20this.m_sweep.c.x)%20*%20force.y%20-%20(point.y%20-%20this.m_sweep.c.y)%20*%20force.x)%3B%0A%09%09%09%7D%0A%0A%09%09%09ApplyTorque(torque)%20%7B%0A%09%09%09%09if%20(torque%20%3D%3D%3D%20undefined)%20torque%20%3D%200%3B%0A%09%09%09%09if%20(this.m_type%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.IsAwake()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09this.SetAwake(true)%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_torque%20%2B%3D%20torque%3B%0A%09%09%09%7D%0A%0A%09%09%09ApplyImpulse(impulse%2C%20point)%20%7B%0A%09%09%09%09if%20(this.m_type%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.IsAwake()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09this.SetAwake(true)%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_linearVelocity.x%20%2B%3D%20this.m_invMass%20*%20impulse.x%3B%0A%09%09%09%09this.m_linearVelocity.y%20%2B%3D%20this.m_invMass%20*%20impulse.y%3B%0A%09%09%09%09this.m_angularVelocity%20%2B%3D%20this.m_invI%20*%20((point.x%20-%20this.m_sweep.c.x)%20*%20impulse.y%20-%20(point.y%20-%20this.m_sweep.c.y)%20*%20impulse.x)%3B%0A%09%09%09%7D%0A%0A%09%09%09Split(callback)%20%7B%0A%09%09%09%09const%20linearVelocity%20%3D%20this.GetLinearVelocity().Copy()%3B%0A%09%09%09%09const%20angularVelocity%20%3D%20this.GetAngularVelocity()%3B%0A%09%09%09%09const%20center%20%3D%20this.GetWorldCenter()%3B%0A%09%09%09%09const%20body1%20%3D%20this%3B%0A%09%09%09%09const%20body2%20%3D%20this.m_world.CreateBody(this.GetDefinition())%3B%0A%09%09%09%09let%20prev%3B%0A%09%09%09%09for%20(let%20f%20%3D%20body1.m_fixtureList%3B%20f%3B)%20%7B%0A%09%09%09%09%09if%20(callback(f))%20%7B%0A%09%09%09%09%09%09const%20next%20%3D%20f.m_next%3B%0A%09%09%09%09%09%09if%20(prev)%20%7B%0A%09%09%09%09%09%09%09prev.m_next%20%3D%20next%3B%0A%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09body1.m_fixtureList%20%3D%20next%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09body1.m_fixtureCount--%3B%0A%09%09%09%09%09%09f.m_next%20%3D%20body2.m_fixtureList%3B%0A%09%09%09%09%09%09body2.m_fixtureList%20%3D%20f%3B%0A%09%09%09%09%09%09body2.m_fixtureCount%2B%2B%3B%0A%09%09%09%09%09%09f.m_body%20%3D%20body2%3B%0A%09%09%09%09%09%09f%20%3D%20next%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09prev%20%3D%20f%3B%0A%09%09%09%09%09%09f%20%3D%20f.m_next%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09body1.ResetMassData()%3B%0A%09%09%09%09body2.ResetMassData()%3B%0A%09%09%09%09const%20center1%20%3D%20body1.GetWorldCenter()%3B%0A%09%09%09%09const%20center2%20%3D%20body2.GetWorldCenter()%3B%0A%09%09%09%09const%20velocity1%20%3D%20b2Math.AddVV(linearVelocity%2C%20b2Math.CrossFV(angularVelocity%2C%20b2Math.SubtractVV(center1%2C%20center)))%3B%0A%09%09%09%09const%20velocity2%20%3D%20b2Math.AddVV(linearVelocity%2C%20b2Math.CrossFV(angularVelocity%2C%20b2Math.SubtractVV(center2%2C%20center)))%3B%0A%09%09%09%09body1.SetLinearVelocity(velocity1)%3B%0A%09%09%09%09body2.SetLinearVelocity(velocity2)%3B%0A%09%09%09%09body1.SetAngularVelocity(angularVelocity)%3B%0A%09%09%09%09body2.SetAngularVelocity(angularVelocity)%3B%0A%09%09%09%09body1.SynchronizeFixtures()%3B%0A%09%09%09%09body2.SynchronizeFixtures()%3B%0A%09%09%09%09return%20body2%3B%0A%09%09%09%7D%0A%0A%09%09%09Merge(other)%20%7B%0A%09%09%09%09let%20f%3B%0A%09%09%09%09for%20(f%20%3D%20other.m_fixtureList%3B%0A%09%09%09%09%09f%3B)%20%7B%0A%09%09%09%09%09const%20next%20%3D%20f.m_next%3B%0A%09%09%09%09%09other.m_fixtureCount--%3B%0A%09%09%09%09%09f.m_next%20%3D%20this.m_fixtureList%3B%0A%09%09%09%09%09this.m_fixtureList%20%3D%20f%3B%0A%09%09%09%09%09this.m_fixtureCount%2B%2B%3B%0A%09%09%09%09%09f.m_body%20%3D%20body2%3B%0A%09%09%09%09%09f%20%3D%20next%3B%0A%09%09%09%09%7D%0A%09%09%09%09body1.m_fixtureCount%20%3D%200%3B%0A%09%09%09%09var%20body1%20%3D%20this%3B%0A%09%09%09%09var%20body2%20%3D%20other%3B%0A%09%09%09%09const%20center1%20%3D%20body1.GetWorldCenter()%3B%0A%09%09%09%09const%20center2%20%3D%20body2.GetWorldCenter()%3B%0A%09%09%09%09const%20velocity1%20%3D%20body1.GetLinearVelocity().Copy()%3B%0A%09%09%09%09const%20velocity2%20%3D%20body2.GetLinearVelocity().Copy()%3B%0A%09%09%09%09const%20angular1%20%3D%20body1.GetAngularVelocity()%3B%0A%09%09%09%09const%20angular%20%3D%20body2.GetAngularVelocity()%3B%0A%09%09%09%09body1.ResetMassData()%3B%0A%09%09%09%09this.SynchronizeFixtures()%3B%0A%09%09%09%7D%0A%0A%09%09%09GetMass()%20%7B%0A%09%09%09%09return%20this.m_mass%3B%0A%09%09%09%7D%0A%0A%09%09%09GetInertia()%20%7B%0A%09%09%09%09return%20this.m_I%3B%0A%09%09%09%7D%0A%0A%09%09%09GetMassData(data)%20%7B%0A%09%09%09%09data.mass%20%3D%20this.m_mass%3B%0A%09%09%09%09data.I%20%3D%20this.m_I%3B%0A%09%09%09%09data.center.SetV(this.m_sweep.localCenter)%3B%0A%09%09%09%7D%0A%0A%09%09%09SetMassData(massData)%20%7B%0A%09%09%09%09b2Settings.b2Assert(this.m_world.IsLocked()%20%3D%3D%20false)%3B%0A%09%09%09%09if%20(this.m_world.IsLocked()%20%3D%3D%20true)%20%7B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.m_type%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_invMass%20%3D%200.0%3B%0A%09%09%09%09this.m_I%20%3D%200.0%3B%0A%09%09%09%09this.m_invI%20%3D%200.0%3B%0A%09%09%09%09this.m_mass%20%3D%20massData.mass%3B%0A%09%09%09%09if%20(this.m_mass%20%3C%3D%200.0)%20%7B%0A%09%09%09%09%09this.m_mass%20%3D%201.0%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_invMass%20%3D%201.0%20%2F%20this.m_mass%3B%0A%09%09%09%09if%20(massData.I%20%3E%200.0%20%26%26%20(this.m_flags%20%26%20b2Body.e_fixedRotationFlag)%20%3D%3D%200)%20%7B%0A%09%09%09%09%09this.m_I%20%3D%20massData.I%20-%20this.m_mass%20*%20(massData.center.x%20*%20massData.center.x%20%2B%20massData.center.y%20*%20massData.center.y)%3B%0A%09%09%09%09%09this.m_invI%20%3D%201.0%20%2F%20this.m_I%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20oldCenter%20%3D%20this.m_sweep.c.Copy()%3B%0A%09%09%09%09this.m_sweep.localCenter.SetV(massData.center)%3B%0A%09%09%09%09this.m_sweep.c0.SetV(b2Math.MulX(this.m_xf%2C%20this.m_sweep.localCenter))%3B%0A%09%09%09%09this.m_sweep.c.SetV(this.m_sweep.c0)%3B%0A%09%09%09%09this.m_linearVelocity.x%20%2B%3D%20this.m_angularVelocity%20*%20(-(this.m_sweep.c.y%20-%20oldCenter.y))%3B%0A%09%09%09%09this.m_linearVelocity.y%20%2B%3D%20this.m_angularVelocity%20*%20(%2B(this.m_sweep.c.x%20-%20oldCenter.x))%3B%0A%09%09%09%7D%0A%0A%09%09%09ResetMassData()%20%7B%0A%09%09%09%09this.m_mass%20%3D%200.0%3B%0A%09%09%09%09this.m_invMass%20%3D%200.0%3B%0A%09%09%09%09this.m_I%20%3D%200.0%3B%0A%09%09%09%09this.m_invI%20%3D%200.0%3B%0A%09%09%09%09this.m_sweep.localCenter.SetZero()%3B%0A%09%09%09%09if%20(this.m_type%20%3D%3D%20b2Body.b2_staticBody%20%7C%7C%20this.m_type%20%3D%3D%20b2Body.b2_kinematicBody)%20%7B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20center%20%3D%20b2Vec2.Make(0%2C%200)%3B%0A%09%09%09%09for%20(let%20f%20%3D%20this.m_fixtureList%3B%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%09%09%09%09%09if%20(f.m_density%20%3D%3D%200.0)%20%7B%0A%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09const%20massData%20%3D%20f.GetMassData()%3B%0A%09%09%09%09%09this.m_mass%20%2B%3D%20massData.mass%3B%0A%09%09%09%09%09center.x%20%2B%3D%20massData.center.x%20*%20massData.mass%3B%0A%09%09%09%09%09center.y%20%2B%3D%20massData.center.y%20*%20massData.mass%3B%0A%09%09%09%09%09this.m_I%20%2B%3D%20massData.I%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.m_mass%20%3E%200.0)%20%7B%0A%09%09%09%09%09this.m_invMass%20%3D%201.0%20%2F%20this.m_mass%3B%0A%09%09%09%09%09center.x%20*%3D%20this.m_invMass%3B%0A%09%09%09%09%09center.y%20*%3D%20this.m_invMass%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_mass%20%3D%201.0%3B%0A%09%09%09%09%09this.m_invMass%20%3D%201.0%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.m_I%20%3E%200.0%20%26%26%20(this.m_flags%20%26%20b2Body.e_fixedRotationFlag)%20%3D%3D%200)%20%7B%0A%09%09%09%09%09this.m_I%20-%3D%20this.m_mass%20*%20(center.x%20*%20center.x%20%2B%20center.y%20*%20center.y)%3B%0A%09%09%09%09%09this.m_I%20*%3D%20this.m_inertiaScale%3B%0A%09%09%09%09%09b2Settings.b2Assert(this.m_I%20%3E%200)%3B%0A%09%09%09%09%09this.m_invI%20%3D%201.0%20%2F%20this.m_I%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_I%20%3D%200.0%3B%0A%09%09%09%09%09this.m_invI%20%3D%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20oldCenter%20%3D%20this.m_sweep.c.Copy()%3B%0A%09%09%09%09this.m_sweep.localCenter.SetV(center)%3B%0A%09%09%09%09this.m_sweep.c0.SetV(b2Math.MulX(this.m_xf%2C%20this.m_sweep.localCenter))%3B%0A%09%09%09%09this.m_sweep.c.SetV(this.m_sweep.c0)%3B%0A%09%09%09%09this.m_linearVelocity.x%20%2B%3D%20this.m_angularVelocity%20*%20(-(this.m_sweep.c.y%20-%20oldCenter.y))%3B%0A%09%09%09%09this.m_linearVelocity.y%20%2B%3D%20this.m_angularVelocity%20*%20(%2B(this.m_sweep.c.x%20-%20oldCenter.x))%3B%0A%09%09%09%7D%0A%0A%09%09%09GetWorldPoint(localPoint)%20%7B%0A%09%09%09%09const%20A%20%3D%20this.m_xf.R%3B%0A%09%09%09%09const%20u%20%3D%20new%20b2Vec2(A.col1.x%20*%20localPoint.x%20%2B%20A.col2.x%20*%20localPoint.y%2C%20A.col1.y%20*%20localPoint.x%20%2B%20A.col2.y%20*%20localPoint.y)%3B%0A%09%09%09%09u.x%20%2B%3D%20this.m_xf.position.x%3B%0A%09%09%09%09u.y%20%2B%3D%20this.m_xf.position.y%3B%0A%09%09%09%09return%20u%3B%0A%09%09%09%7D%0A%0A%09%09%09GetWorldVector(localVector)%20%7B%0A%09%09%09%09return%20b2Math.MulMV(this.m_xf.R%2C%20localVector)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetLocalPoint(worldPoint)%20%7B%0A%09%09%09%09return%20b2Math.MulXT(this.m_xf%2C%20worldPoint)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetLocalVector(worldVector)%20%7B%0A%09%09%09%09return%20b2Math.MulTMV(this.m_xf.R%2C%20worldVector)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetLinearVelocityFromWorldPoint(worldPoint)%20%7B%0A%09%09%09%09return%20new%20b2Vec2(this.m_linearVelocity.x%20-%20this.m_angularVelocity%20*%20(worldPoint.y%20-%20this.m_sweep.c.y)%2C%20this.m_linearVelocity.y%20%2B%20this.m_angularVelocity%20*%20(worldPoint.x%20-%20this.m_sweep.c.x))%3B%0A%09%09%09%7D%0A%0A%09%09%09GetLinearVelocityFromLocalPoint(localPoint)%20%7B%0A%09%09%09%09const%20A%20%3D%20this.m_xf.R%3B%0A%09%09%09%09const%20worldPoint%20%3D%20new%20b2Vec2(A.col1.x%20*%20localPoint.x%20%2B%20A.col2.x%20*%20localPoint.y%2C%20A.col1.y%20*%20localPoint.x%20%2B%20A.col2.y%20*%20localPoint.y)%3B%0A%09%09%09%09worldPoint.x%20%2B%3D%20this.m_xf.position.x%3B%0A%09%09%09%09worldPoint.y%20%2B%3D%20this.m_xf.position.y%3B%0A%09%09%09%09return%20new%20b2Vec2(this.m_linearVelocity.x%20-%20this.m_angularVelocity%20*%20(worldPoint.y%20-%20this.m_sweep.c.y)%2C%20this.m_linearVelocity.y%20%2B%20this.m_angularVelocity%20*%20(worldPoint.x%20-%20this.m_sweep.c.x))%3B%0A%09%09%09%7D%0A%0A%09%09%09GetLinearDamping()%20%7B%0A%09%09%09%09return%20this.m_linearDamping%3B%0A%09%09%09%7D%0A%0A%09%09%09SetLinearDamping(linearDamping)%20%7B%0A%09%09%09%09if%20(linearDamping%20%3D%3D%3D%20undefined)%20linearDamping%20%3D%200%3B%0A%09%09%09%09this.m_linearDamping%20%3D%20linearDamping%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAngularDamping()%20%7B%0A%09%09%09%09return%20this.m_angularDamping%3B%0A%09%09%09%7D%0A%0A%09%09%09SetAngularDamping(angularDamping)%20%7B%0A%09%09%09%09if%20(angularDamping%20%3D%3D%3D%20undefined)%20angularDamping%20%3D%200%3B%0A%09%09%09%09this.m_angularDamping%20%3D%20angularDamping%3B%0A%09%09%09%7D%0A%0A%09%09%09SetType(type)%20%7B%0A%09%09%09%09if%20(type%20%3D%3D%3D%20undefined)%20type%20%3D%200%3B%0A%09%09%09%09if%20(this.m_type%20%3D%3D%20type)%20%7B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_type%20%3D%20type%3B%0A%09%09%09%09this.ResetMassData()%3B%0A%09%09%09%09if%20(this.m_type%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%09%09%09%09%09this.m_linearVelocity.SetZero()%3B%0A%09%09%09%09%09this.m_angularVelocity%20%3D%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.SetAwake(true)%3B%0A%09%09%09%09this.m_force.SetZero()%3B%0A%09%09%09%09this.m_torque%20%3D%200.0%3B%0A%09%09%09%09for%20(let%20ce%20%3D%20this.m_contactList%3B%20ce%3B%20ce%20%3D%20ce.next)%20%7B%0A%09%09%09%09%09ce.contact.FlagForFiltering()%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09GetType()%20%7B%0A%09%09%09%09return%20this.m_type%3B%0A%09%09%09%7D%0A%0A%09%09%09SetBullet(flag)%20%7B%0A%09%09%09%09if%20(flag)%20%7B%0A%09%09%09%09%09this.m_flags%20%7C%3D%20b2Body.e_bulletFlag%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_flags%20%26%3D%20~b2Body.e_bulletFlag%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09IsBullet()%20%7B%0A%09%09%09%09return%20(this.m_flags%20%26%20b2Body.e_bulletFlag)%20%3D%3D%20b2Body.e_bulletFlag%3B%0A%09%09%09%7D%0A%0A%09%09%09SetSleepingAllowed(flag)%20%7B%0A%09%09%09%09if%20(flag)%20%7B%0A%09%09%09%09%09this.m_flags%20%7C%3D%20b2Body.e_allowSleepFlag%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_flags%20%26%3D%20~b2Body.e_allowSleepFlag%3B%0A%09%09%09%09%09this.SetAwake(true)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09SetAwake(flag)%20%7B%0A%09%09%09%09if%20(flag)%20%7B%0A%09%09%09%09%09this.m_flags%20%7C%3D%20b2Body.e_awakeFlag%3B%0A%09%09%09%09%09this.m_sleepTime%20%3D%200.0%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_flags%20%26%3D%20~b2Body.e_awakeFlag%3B%0A%09%09%09%09%09this.m_sleepTime%20%3D%200.0%3B%0A%09%09%09%09%09this.m_linearVelocity.SetZero()%3B%0A%09%09%09%09%09this.m_angularVelocity%20%3D%200.0%3B%0A%09%09%09%09%09this.m_force.SetZero()%3B%0A%09%09%09%09%09this.m_torque%20%3D%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09IsAwake()%20%7B%0A%09%09%09%09return%20(this.m_flags%20%26%20b2Body.e_awakeFlag)%20%3D%3D%20b2Body.e_awakeFlag%3B%0A%09%09%09%7D%0A%0A%09%09%09SetFixedRotation(fixed)%20%7B%0A%09%09%09%09if%20(fixed)%20%7B%0A%09%09%09%09%09this.m_flags%20%7C%3D%20b2Body.e_fixedRotationFlag%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_flags%20%26%3D%20~b2Body.e_fixedRotationFlag%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.ResetMassData()%3B%0A%09%09%09%7D%0A%0A%09%09%09IsFixedRotation()%20%7B%0A%09%09%09%09return%20(this.m_flags%20%26%20b2Body.e_fixedRotationFlag)%20%3D%3D%20b2Body.e_fixedRotationFlag%3B%0A%09%09%09%7D%0A%0A%09%09%09SetActive(flag)%20%7B%0A%09%09%09%09if%20(flag%20%3D%3D%20this.IsActive())%20%7B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09let%20broadPhase%3B%0A%09%09%09%09let%20f%3B%0A%09%09%09%09if%20(flag)%20%7B%0A%09%09%09%09%09this.m_flags%20%7C%3D%20b2Body.e_activeFlag%3B%0A%09%09%09%09%09broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%09%09%09%09%09for%20(f%20%3D%20this.m_fixtureList%3B%0A%09%09%09%09%09%09f%3B%20f%20%3D%20f.m_next)%20%7B%0A%09%09%09%09%09%09f.CreateProxy(broadPhase%2C%20this.m_xf)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_flags%20%26%3D%20~b2Body.e_activeFlag%3B%0A%09%09%09%09%09broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%09%09%09%09%09for%20(f%20%3D%20this.m_fixtureList%3B%0A%09%09%09%09%09%09f%3B%20f%20%3D%20f.m_next)%20%7B%0A%09%09%09%09%09%09f.DestroyProxy(broadPhase)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09let%20ce%20%3D%20this.m_contactList%3B%0A%09%09%09%09%09while%20(ce)%20%7B%0A%09%09%09%09%09%09const%20ce0%20%3D%20ce%3B%0A%09%09%09%09%09%09ce%20%3D%20ce.next%3B%0A%09%09%09%09%09%09this.m_world.m_contactManager.Destroy(ce0.contact)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09this.m_contactList%20%3D%20null%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09IsActive()%20%7B%0A%09%09%09%09return%20(this.m_flags%20%26%20b2Body.e_activeFlag)%20%3D%3D%20b2Body.e_activeFlag%3B%0A%09%09%09%7D%0A%0A%09%09%09IsSleepingAllowed()%20%7B%0A%09%09%09%09return%20(this.m_flags%20%26%20b2Body.e_allowSleepFlag)%20%3D%3D%20b2Body.e_allowSleepFlag%3B%0A%09%09%09%7D%0A%0A%09%09%09GetFixtureList()%20%7B%0A%09%09%09%09return%20this.m_fixtureList%3B%0A%09%09%09%7D%0A%0A%09%09%09GetJointList()%20%7B%0A%09%09%09%09return%20this.m_jointList%3B%0A%09%09%09%7D%0A%0A%09%09%09GetControllerList()%20%7B%0A%09%09%09%09return%20this.m_controllerList%3B%0A%09%09%09%7D%0A%0A%09%09%09GetContactList()%20%7B%0A%09%09%09%09return%20this.m_contactList%3B%0A%09%09%09%7D%0A%0A%09%09%09GetNext()%20%7B%0A%09%09%09%09return%20this.m_next%3B%0A%09%09%09%7D%0A%0A%09%09%09GetUserData()%20%7B%0A%09%09%09%09return%20this.m_userData%3B%0A%09%09%09%7D%0A%0A%09%09%09SetUserData(data)%20%7B%0A%09%09%09%09this.m_userData%20%3D%20data%3B%0A%09%09%09%7D%0A%0A%09%09%09GetWorld()%20%7B%0A%09%09%09%09return%20this.m_world%3B%0A%09%09%09%7D%0A%0A%09%09%09b2Body(bd%2C%20world)%20%7B%0A%09%09%09%09this.m_flags%20%3D%200%3B%0A%09%09%09%09if%20(bd.bullet)%20%7B%0A%09%09%09%09%09this.m_flags%20%7C%3D%20b2Body.e_bulletFlag%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(bd.fixedRotation)%20%7B%0A%09%09%09%09%09this.m_flags%20%7C%3D%20b2Body.e_fixedRotationFlag%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(bd.allowSleep)%20%7B%0A%09%09%09%09%09this.m_flags%20%7C%3D%20b2Body.e_allowSleepFlag%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(bd.awake)%20%7B%0A%09%09%09%09%09this.m_flags%20%7C%3D%20b2Body.e_awakeFlag%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(bd.active)%20%7B%0A%09%09%09%09%09this.m_flags%20%7C%3D%20b2Body.e_activeFlag%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_world%20%3D%20world%3B%0A%09%09%09%09this.m_xf.position.SetV(bd.position)%3B%0A%09%09%09%09this.m_xf.R.Set(bd.angle)%3B%0A%09%09%09%09this.m_sweep.localCenter.SetZero()%3B%0A%09%09%09%09this.m_sweep.t0%20%3D%201.0%3B%0A%09%09%09%09this.m_sweep.a0%20%3D%20this.m_sweep.a%20%3D%20bd.angle%3B%0A%09%09%09%09const%20tMat%20%3D%20this.m_xf.R%3B%0A%09%09%09%09const%20tVec%20%3D%20this.m_sweep.localCenter%3B%0A%09%09%09%09this.m_sweep.c.x%20%3D%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09this.m_sweep.c.y%20%3D%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09this.m_sweep.c.x%20%2B%3D%20this.m_xf.position.x%3B%0A%09%09%09%09this.m_sweep.c.y%20%2B%3D%20this.m_xf.position.y%3B%0A%09%09%09%09this.m_sweep.c0.SetV(this.m_sweep.c)%3B%0A%09%09%09%09this.m_jointList%20%3D%20null%3B%0A%09%09%09%09this.m_controllerList%20%3D%20null%3B%0A%09%09%09%09this.m_contactList%20%3D%20null%3B%0A%09%09%09%09this.m_controllerCount%20%3D%200%3B%0A%09%09%09%09this.m_prev%20%3D%20null%3B%0A%09%09%09%09this.m_next%20%3D%20null%3B%0A%09%09%09%09this.m_linearVelocity.SetV(bd.linearVelocity)%3B%0A%09%09%09%09this.m_angularVelocity%20%3D%20bd.angularVelocity%3B%0A%09%09%09%09this.m_linearDamping%20%3D%20bd.linearDamping%3B%0A%09%09%09%09this.m_angularDamping%20%3D%20bd.angularDamping%3B%0A%09%09%09%09this.m_force.Set(0.0%2C%200.0)%3B%0A%09%09%09%09this.m_torque%20%3D%200.0%3B%0A%09%09%09%09this.m_sleepTime%20%3D%200.0%3B%0A%09%09%09%09this.m_type%20%3D%20bd.type%3B%0A%09%09%09%09if%20(this.m_type%20%3D%3D%20b2Body.b2_dynamicBody)%20%7B%0A%09%09%09%09%09this.m_mass%20%3D%201.0%3B%0A%09%09%09%09%09this.m_invMass%20%3D%201.0%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_mass%20%3D%200.0%3B%0A%09%09%09%09%09this.m_invMass%20%3D%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_I%20%3D%200.0%3B%0A%09%09%09%09this.m_invI%20%3D%200.0%3B%0A%09%09%09%09this.m_inertiaScale%20%3D%20bd.inertiaScale%3B%0A%09%09%09%09this.m_userData%20%3D%20bd.userData%3B%0A%09%09%09%09this.m_fixtureList%20%3D%20null%3B%0A%09%09%09%09this.m_fixtureCount%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09SynchronizeFixtures()%20%7B%0A%09%09%09%09const%20xf1%20%3D%20b2Body.s_xf1%3B%0A%09%09%09%09xf1.R.Set(this.m_sweep.a0)%3B%0A%09%09%09%09const%20tMat%20%3D%20xf1.R%3B%0A%09%09%09%09const%20tVec%20%3D%20this.m_sweep.localCenter%3B%0A%09%09%09%09xf1.position.x%20%3D%20this.m_sweep.c0.x%20-%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09xf1.position.y%20%3D%20this.m_sweep.c0.y%20-%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09let%20f%3B%0A%09%09%09%09const%20broadPhase%20%3D%20this.m_world.m_contactManager.m_broadPhase%3B%0A%09%09%09%09for%20(f%20%3D%20this.m_fixtureList%3B%0A%09%09%09%09%09f%3B%20f%20%3D%20f.m_next)%20%7B%0A%09%09%09%09%09f.Synchronize(broadPhase%2C%20xf1%2C%20this.m_xf)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09SynchronizeTransform()%20%7B%0A%09%09%09%09this.m_xf.R.Set(this.m_sweep.a)%3B%0A%09%09%09%09const%20tMat%20%3D%20this.m_xf.R%3B%0A%09%09%09%09const%20tVec%20%3D%20this.m_sweep.localCenter%3B%0A%09%09%09%09this.m_xf.position.x%20%3D%20this.m_sweep.c.x%20-%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09this.m_xf.position.y%20%3D%20this.m_sweep.c.y%20-%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%7D%0A%0A%09%09%09ShouldCollide(other)%20%7B%0A%09%09%09%09if%20(this.m_type%20!%3D%20b2Body.b2_dynamicBody%20%26%26%20other.m_type%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%09%09%09%09%09return%20false%3B%0A%09%09%09%09%7D%0A%09%09%09%09for%20(let%20jn%20%3D%20this.m_jointList%3B%20jn%3B%20jn%20%3D%20jn.next)%20%7B%0A%09%09%09%09%09if%20(jn.other%20%3D%3D%20other)%20%7B%0A%09%09%09%09%09%09if%20(jn.joint.m_collideConnected%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09%09return%20false%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09return%20true%3B%0A%09%09%09%7D%0A%0A%09%09%09Advance(t)%20%7B%0A%09%09%09%09if%20(t%20%3D%3D%3D%20undefined)%20t%20%3D%200%3B%0A%09%09%09%09this.m_sweep.Advance(t)%3B%0A%09%09%09%09this.m_sweep.c.SetV(this.m_sweep.c0)%3B%0A%09%09%09%09this.m_sweep.a%20%3D%20this.m_sweep.a0%3B%0A%09%09%09%09this.SynchronizeTransform()%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.b2Body%20%3D%20b2Body%3B%0A%0A%09%09class%20b2BodyDef%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2BodyDef.b2BodyDef.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2BodyDef)%20this.b2BodyDef.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2BodyDef()%20%7B%0A%09%09%09%09this.position%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.linearVelocity%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09b2BodyDef()%20%7B%0A%09%09%09%09this.userData%20%3D%20null%3B%0A%09%09%09%09this.position.Set(0.0%2C%200.0)%3B%0A%09%09%09%09this.angle%20%3D%200.0%3B%0A%09%09%09%09this.linearVelocity.Set(0%2C%200)%3B%0A%09%09%09%09this.angularVelocity%20%3D%200.0%3B%0A%09%09%09%09this.linearDamping%20%3D%200.0%3B%0A%09%09%09%09this.angularDamping%20%3D%200.0%3B%0A%09%09%09%09this.allowSleep%20%3D%20true%3B%0A%09%09%09%09this.awake%20%3D%20true%3B%0A%09%09%09%09this.fixedRotation%20%3D%20false%3B%0A%09%09%09%09this.bullet%20%3D%20false%3B%0A%09%09%09%09this.type%20%3D%20b2Body.b2_staticBody%3B%0A%09%09%09%09this.active%20%3D%20true%3B%0A%09%09%09%09this.inertiaScale%20%3D%201.0%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.b2BodyDef%20%3D%20b2BodyDef%3B%0A%0A%09%09class%20b2ContactFilter%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2ContactFilter.b2ContactFilter.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09ShouldCollide(fixtureA%2C%20fixtureB)%20%7B%0A%09%09%09%09const%20filter1%20%3D%20fixtureA.GetFilterData()%3B%0A%09%09%09%09const%20filter2%20%3D%20fixtureB.GetFilterData()%3B%0A%09%09%09%09if%20(filter1.groupIndex%20%3D%3D%20filter2.groupIndex%20%26%26%20filter1.groupIndex%20!%3D%200)%20%7B%0A%09%09%09%09%09return%20filter1.groupIndex%20%3E%200%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20collide%20%3D%20(filter1.maskBits%20%26%20filter2.categoryBits)%20!%3D%200%20%26%26%20(filter1.categoryBits%20%26%20filter2.maskBits)%20!%3D%200%3B%0A%09%09%09%09return%20collide%3B%0A%09%09%09%7D%0A%0A%09%09%09RayCollide(userData%2C%20fixture)%20%7B%0A%09%09%09%09if%20(!userData)%20return%20true%3B%0A%09%09%09%09return%20this.ShouldCollide((userData%20instanceof%20b2Fixture%20%3F%20userData%20%3A%20null)%2C%20fixture)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.b2ContactFilter%20%3D%20b2ContactFilter%3B%0A%0A%09%09class%20b2ContactImpulse%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2ContactImpulse.b2ContactImpulse.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2ContactImpulse()%20%7B%0A%09%09%09%09this.normalImpulses%20%3D%20new%20Vector_a2j_Number(b2Settings.b2_maxManifoldPoints)%3B%0A%09%09%09%09this.tangentImpulses%20%3D%20new%20Vector_a2j_Number(b2Settings.b2_maxManifoldPoints)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.b2ContactImpulse%20%3D%20b2ContactImpulse%3B%0A%0A%09%09class%20b2ContactListener%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2ContactListener.b2ContactListener.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09BeginContact(contact)%20%7B%20%7D%0A%09%09%09EndContact(contact)%20%7B%20%7D%0A%09%09%09PreSolve(contact%2C%20oldManifold)%20%7B%20%7D%0A%09%09%09PostSolve(contact%2C%20impulse)%20%7B%20%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.b2ContactListener%20%3D%20b2ContactListener%3B%0A%0A%09%09class%20b2ContactManager%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2ContactManager.b2ContactManager.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2ContactManager)%20this.b2ContactManager.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09b2ContactManager()%20%7B%0A%09%09%09%09this.m_world%20%3D%20null%3B%0A%09%09%09%09this.m_contactCount%20%3D%200%3B%0A%09%09%09%09this.m_contactFilter%20%3D%20b2ContactFilter.b2_defaultFilter%3B%0A%09%09%09%09this.m_contactListener%20%3D%20b2ContactListener.b2_defaultListener%3B%0A%09%09%09%09this.m_contactFactory%20%3D%20new%20b2ContactFactory(this.m_allocator)%3B%0A%09%09%09%09this.m_broadPhase%20%3D%20new%20b2DynamicTreeBroadPhase()%3B%0A%09%09%09%7D%0A%0A%09%09%09AddPair(proxyUserDataA%2C%20proxyUserDataB)%20%7B%0A%09%09%09%09let%20fixtureA%20%3D%20(proxyUserDataA%20instanceof%20b2Fixture%20%3F%20proxyUserDataA%20%3A%20null)%3B%0A%09%09%09%09let%20fixtureB%20%3D%20(proxyUserDataB%20instanceof%20b2Fixture%20%3F%20proxyUserDataB%20%3A%20null)%3B%0A%09%09%09%09let%20bodyA%20%3D%20fixtureA.GetBody()%3B%0A%09%09%09%09let%20bodyB%20%3D%20fixtureB.GetBody()%3B%0A%09%09%09%09if%20(bodyA%20%3D%3D%20bodyB)%20return%3B%0A%09%09%09%09let%20edge%20%3D%20bodyB.GetContactList()%3B%0A%09%09%09%09while%20(edge)%20%7B%0A%09%09%09%09%09if%20(edge.other%20%3D%3D%20bodyA)%20%7B%0A%09%09%09%09%09%09const%20fA%20%3D%20edge.contact.GetFixtureA()%3B%0A%09%09%09%09%09%09const%20fB%20%3D%20edge.contact.GetFixtureB()%3B%0A%09%09%09%09%09%09if%20(fA%20%3D%3D%20fixtureA%20%26%26%20fB%20%3D%3D%20fixtureB)%20return%3B%0A%09%09%09%09%09%09if%20(fA%20%3D%3D%20fixtureB%20%26%26%20fB%20%3D%3D%20fixtureA)%20return%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09edge%20%3D%20edge.next%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(bodyB.ShouldCollide(bodyA)%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.m_contactFilter.ShouldCollide(fixtureA%2C%20fixtureB)%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20c%20%3D%20this.m_contactFactory.Create(fixtureA%2C%20fixtureB)%3B%0A%09%09%09%09fixtureA%20%3D%20c.GetFixtureA()%3B%0A%09%09%09%09fixtureB%20%3D%20c.GetFixtureB()%3B%0A%09%09%09%09bodyA%20%3D%20fixtureA.m_body%3B%0A%09%09%09%09bodyB%20%3D%20fixtureB.m_body%3B%0A%09%09%09%09c.m_prev%20%3D%20null%3B%0A%09%09%09%09c.m_next%20%3D%20this.m_world.m_contactList%3B%0A%09%09%09%09if%20(this.m_world.m_contactList%20!%3D%20null)%20%7B%0A%09%09%09%09%09this.m_world.m_contactList.m_prev%20%3D%20c%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_world.m_contactList%20%3D%20c%3B%0A%09%09%09%09c.m_nodeA.contact%20%3D%20c%3B%0A%09%09%09%09c.m_nodeA.other%20%3D%20bodyB%3B%0A%09%09%09%09c.m_nodeA.prev%20%3D%20null%3B%0A%09%09%09%09c.m_nodeA.next%20%3D%20bodyA.m_contactList%3B%0A%09%09%09%09if%20(bodyA.m_contactList%20!%3D%20null)%20%7B%0A%09%09%09%09%09bodyA.m_contactList.prev%20%3D%20c.m_nodeA%3B%0A%09%09%09%09%7D%0A%09%09%09%09bodyA.m_contactList%20%3D%20c.m_nodeA%3B%0A%09%09%09%09c.m_nodeB.contact%20%3D%20c%3B%0A%09%09%09%09c.m_nodeB.other%20%3D%20bodyA%3B%0A%09%09%09%09c.m_nodeB.prev%20%3D%20null%3B%0A%09%09%09%09c.m_nodeB.next%20%3D%20bodyB.m_contactList%3B%0A%09%09%09%09if%20(bodyB.m_contactList%20!%3D%20null)%20%7B%0A%09%09%09%09%09bodyB.m_contactList.prev%20%3D%20c.m_nodeB%3B%0A%09%09%09%09%7D%0A%09%09%09%09bodyB.m_contactList%20%3D%20c.m_nodeB%3B%0A%09%09%09%09%2B%2Bthis.m_world.m_contactCount%3B%0A%09%09%09%7D%0A%0A%09%09%09FindNewContacts()%20%7B%0A%09%09%09%09this.m_broadPhase.UpdatePairs(Box2D.generateCallback(this%2C%20this.AddPair))%3B%0A%09%09%09%7D%0A%0A%09%09%09Destroy(c)%20%7B%0A%09%09%09%09const%20fixtureA%20%3D%20c.GetFixtureA()%3B%0A%09%09%09%09const%20fixtureB%20%3D%20c.GetFixtureB()%3B%0A%09%09%09%09const%20bodyA%20%3D%20fixtureA.GetBody()%3B%0A%09%09%09%09const%20bodyB%20%3D%20fixtureB.GetBody()%3B%0A%09%09%09%09if%20(c.IsTouching())%20%7B%0A%09%09%09%09%09this.m_contactListener.EndContact(c)%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(c.m_prev)%20%7B%0A%09%09%09%09%09c.m_prev.m_next%20%3D%20c.m_next%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(c.m_next)%20%7B%0A%09%09%09%09%09c.m_next.m_prev%20%3D%20c.m_prev%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(c%20%3D%3D%20this.m_world.m_contactList)%20%7B%0A%09%09%09%09%09this.m_world.m_contactList%20%3D%20c.m_next%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(c.m_nodeA.prev)%20%7B%0A%09%09%09%09%09c.m_nodeA.prev.next%20%3D%20c.m_nodeA.next%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(c.m_nodeA.next)%20%7B%0A%09%09%09%09%09c.m_nodeA.next.prev%20%3D%20c.m_nodeA.prev%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(c.m_nodeA%20%3D%3D%20bodyA.m_contactList)%20%7B%0A%09%09%09%09%09bodyA.m_contactList%20%3D%20c.m_nodeA.next%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(c.m_nodeB.prev)%20%7B%0A%09%09%09%09%09c.m_nodeB.prev.next%20%3D%20c.m_nodeB.next%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(c.m_nodeB.next)%20%7B%0A%09%09%09%09%09c.m_nodeB.next.prev%20%3D%20c.m_nodeB.prev%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(c.m_nodeB%20%3D%3D%20bodyB.m_contactList)%20%7B%0A%09%09%09%09%09bodyB.m_contactList%20%3D%20c.m_nodeB.next%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_contactFactory.Destroy(c)%3B%0A%09%09%09%09--this.m_contactCount%3B%0A%09%09%09%7D%0A%0A%09%09%09Collide()%20%7B%0A%09%09%09%09let%20c%20%3D%20this.m_world.m_contactList%3B%0A%09%09%09%09while%20(c)%20%7B%0A%09%09%09%09%09const%20fixtureA%20%3D%20c.GetFixtureA()%3B%0A%09%09%09%09%09const%20fixtureB%20%3D%20c.GetFixtureB()%3B%0A%09%09%09%09%09const%20bodyA%20%3D%20fixtureA.GetBody()%3B%0A%09%09%09%09%09const%20bodyB%20%3D%20fixtureB.GetBody()%3B%0A%09%09%09%09%09if%20(bodyA.IsAwake()%20%3D%3D%20false%20%26%26%20bodyB.IsAwake()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09c%20%3D%20c.GetNext()%3B%0A%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if%20(c.m_flags%20%26%20b2Contact.e_filterFlag)%20%7B%0A%09%09%09%09%09%09if%20(bodyB.ShouldCollide(bodyA)%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09%09var%20cNuke%20%3D%20c%3B%0A%09%09%09%09%09%09%09c%20%3D%20cNuke.GetNext()%3B%0A%09%09%09%09%09%09%09this.Destroy(cNuke)%3B%0A%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09if%20(this.m_contactFilter.ShouldCollide(fixtureA%2C%20fixtureB)%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09%09cNuke%20%3D%20c%3B%0A%09%09%09%09%09%09%09c%20%3D%20cNuke.GetNext()%3B%0A%09%09%09%09%09%09%09this.Destroy(cNuke)%3B%0A%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09c.m_flags%20%26%3D%20~b2Contact.e_filterFlag%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09const%20proxyA%20%3D%20fixtureA.m_proxy%3B%0A%09%09%09%09%09const%20proxyB%20%3D%20fixtureB.m_proxy%3B%0A%09%09%09%09%09const%20overlap%20%3D%20this.m_broadPhase.TestOverlap(proxyA%2C%20proxyB)%3B%0A%09%09%09%09%09if%20(overlap%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09cNuke%20%3D%20c%3B%0A%09%09%09%09%09%09c%20%3D%20cNuke.GetNext()%3B%0A%09%09%09%09%09%09this.Destroy(cNuke)%3B%0A%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09c.Update(this.m_contactListener)%3B%0A%09%09%09%09%09c%20%3D%20c.GetNext()%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.b2ContactManager%20%3D%20b2ContactManager%3B%0A%0A%09%09class%20b2DebugDraw%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2DebugDraw.b2DebugDraw.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2DebugDraw)%20this.b2DebugDraw.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09b2DebugDraw()%20%7B%20%7D%0A%0A%09%09%09SetFlags(flags)%20%7B%0A%09%09%09%09if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09GetFlags()%20%7B%20%7D%0A%0A%09%09%09AppendFlags(flags)%20%7B%0A%09%09%09%09if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09ClearFlags(flags)%20%7B%0A%09%09%09%09if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09SetSprite(sprite)%20%7B%20%7D%0A%09%09%09GetSprite()%20%7B%20%7D%0A%0A%09%09%09SetDrawScale(drawScale)%20%7B%0A%09%09%09%09if%20(drawScale%20%3D%3D%3D%20undefined)%20drawScale%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09GetDrawScale()%20%7B%20%7D%0A%0A%09%09%09SetLineThickness(lineThickness)%20%7B%0A%09%09%09%09if%20(lineThickness%20%3D%3D%3D%20undefined)%20lineThickness%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09GetLineThickness()%20%7B%20%7D%0A%0A%09%09%09SetAlpha(alpha)%20%7B%0A%09%09%09%09if%20(alpha%20%3D%3D%3D%20undefined)%20alpha%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAlpha()%20%7B%20%7D%0A%0A%09%09%09SetFillAlpha(alpha)%20%7B%0A%09%09%09%09if%20(alpha%20%3D%3D%3D%20undefined)%20alpha%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09GetFillAlpha()%20%7B%20%7D%0A%0A%09%09%09SetXFormScale(xformScale)%20%7B%0A%09%09%09%09if%20(xformScale%20%3D%3D%3D%20undefined)%20xformScale%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09GetXFormScale()%20%7B%20%7D%0A%0A%09%09%09DrawPolygon(vertices%2C%20vertexCount%2C%20color)%20%7B%0A%09%09%09%09if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09DrawSolidPolygon(vertices%2C%20vertexCount%2C%20color)%20%7B%0A%09%09%09%09if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09DrawCircle(center%2C%20radius%2C%20color)%20%7B%0A%09%09%09%09if%20(radius%20%3D%3D%3D%20undefined)%20radius%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09DrawSolidCircle(center%2C%20radius%2C%20axis%2C%20color)%20%7B%0A%09%09%09%09if%20(radius%20%3D%3D%3D%20undefined)%20radius%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09DrawSegment(p1%2C%20p2%2C%20color)%20%7B%20%7D%0A%09%09%09DrawTransform(xf)%20%7B%20%7D%0A%0A%09%09%09static%20b2DebugDraw()%20%7B%0A%09%09%09%09this.m_drawScale%20%3D%201.0%3B%0A%09%09%09%09this.m_lineThickness%20%3D%201.0%3B%0A%09%09%09%09this.m_alpha%20%3D%201.0%3B%0A%09%09%09%09this.m_fillAlpha%20%3D%201.0%3B%0A%09%09%09%09this.m_xformScale%20%3D%201.0%3B%0A%09%09%09%09const%20__this%20%3D%20this%3B%0A%09%09%09%09%2F%2F%20%23WORKAROUND%0A%09%09%09%09this.m_sprite%20%3D%20%7B%0A%09%09%09%09%09graphics%3A%20%7B%0A%09%09%09%09%09%09clear%3A%20function()%20%7B%0A%09%09%09%09%09%09%09__this.m_ctx.clearRect(0%2C%200%2C%20__this.m_ctx.canvas.width%2C%20__this.m_ctx.canvas.height)%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%3B%0A%09%09%09%7D%0A%0A%09%09%09_color(color%2C%20alpha)%20%7B%0A%09%09%09%09return%20'rgba('%20%2B%20((color%20%26%200xFF0000)%20%3E%3E%2016)%20%2B%20'%2C'%20%2B%20((color%20%26%200xFF00)%20%3E%3E%208)%20%2B%20'%2C'%20%2B%20(color%20%26%200xFF)%20%2B%20'%2C'%20%2B%20alpha%20%2B%20')'%3B%0A%09%09%09%7D%0A%0A%09%09%09b2DebugDraw()%20%7B%0A%09%09%09%09this.m_drawFlags%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09SetFlags(flags)%20%7B%0A%09%09%09%09if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%09%09%09%09this.m_drawFlags%20%3D%20flags%3B%0A%09%09%09%7D%0A%0A%09%09%09GetFlags()%20%7B%0A%09%09%09%09return%20this.m_drawFlags%3B%0A%09%09%09%7D%0A%0A%09%09%09AppendFlags(flags)%20%7B%0A%09%09%09%09if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%09%09%09%09this.m_drawFlags%20%7C%3D%20flags%3B%0A%09%09%09%7D%0A%0A%09%09%09ClearFlags(flags)%20%7B%0A%09%09%09%09if%20(flags%20%3D%3D%3D%20undefined)%20flags%20%3D%200%3B%0A%09%09%09%09this.m_drawFlags%20%26%3D%20~flags%3B%0A%09%09%09%7D%0A%0A%09%09%09SetSprite(sprite)%20%7B%0A%09%09%09%09this.m_ctx%20%3D%20sprite%3B%0A%09%09%09%7D%0A%0A%09%09%09GetSprite()%20%7B%0A%09%09%09%09return%20this.m_ctx%3B%0A%09%09%09%7D%0A%0A%09%09%09SetDrawScale(drawScale)%20%7B%0A%09%09%09%09if%20(drawScale%20%3D%3D%3D%20undefined)%20drawScale%20%3D%200%3B%0A%09%09%09%09this.m_drawScale%20%3D%20drawScale%3B%0A%09%09%09%7D%0A%0A%09%09%09GetDrawScale()%20%7B%0A%09%09%09%09return%20this.m_drawScale%3B%0A%09%09%09%7D%0A%0A%09%09%09SetLineThickness(lineThickness)%20%7B%0A%09%09%09%09if%20(lineThickness%20%3D%3D%3D%20undefined)%20lineThickness%20%3D%200%3B%0A%09%09%09%09this.m_lineThickness%20%3D%20lineThickness%3B%0A%09%09%09%09this.m_ctx.strokeWidth%20%3D%20lineThickness%3B%0A%09%09%09%7D%0A%0A%09%09%09GetLineThickness()%20%7B%0A%09%09%09%09return%20this.m_lineThickness%3B%0A%09%09%09%7D%0A%0A%09%09%09SetAlpha(alpha)%20%7B%0A%09%09%09%09if%20(alpha%20%3D%3D%3D%20undefined)%20alpha%20%3D%200%3B%0A%09%09%09%09this.m_alpha%20%3D%20alpha%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAlpha()%20%7B%0A%09%09%09%09return%20this.m_alpha%3B%0A%09%09%09%7D%0A%0A%09%09%09SetFillAlpha(alpha)%20%7B%0A%09%09%09%09if%20(alpha%20%3D%3D%3D%20undefined)%20alpha%20%3D%200%3B%0A%09%09%09%09this.m_fillAlpha%20%3D%20alpha%3B%0A%09%09%09%7D%0A%0A%09%09%09GetFillAlpha()%20%7B%0A%09%09%09%09return%20this.m_fillAlpha%3B%0A%09%09%09%7D%0A%0A%09%09%09SetXFormScale(xformScale)%20%7B%0A%09%09%09%09if%20(xformScale%20%3D%3D%3D%20undefined)%20xformScale%20%3D%200%3B%0A%09%09%09%09this.m_xformScale%20%3D%20xformScale%3B%0A%09%09%09%7D%0A%0A%09%09%09GetXFormScale()%20%7B%0A%09%09%09%09return%20this.m_xformScale%3B%0A%09%09%09%7D%0A%0A%09%09%09DrawPolygon(vertices%2C%20vertexCount%2C%20color)%20%7B%0A%09%09%09%09if%20(!vertexCount)%20return%3B%0A%09%09%09%09const%20s%20%3D%20this.m_ctx%3B%0A%09%09%09%09const%20drawScale%20%3D%20this.m_drawScale%3B%0A%09%09%09%09s.beginPath()%3B%0A%09%09%09%09s.strokeStyle%20%3D%20this._color(color.color%2C%20this.m_alpha)%3B%0A%09%09%09%09s.moveTo(vertices%5B0%5D.x%20*%20drawScale%2C%20vertices%5B0%5D.y%20*%20drawScale)%3B%0A%09%09%09%09for%20(let%20i%20%3D%201%3B%20i%20%3C%20vertexCount%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09s.lineTo(vertices%5Bi%5D.x%20*%20drawScale%2C%20vertices%5Bi%5D.y%20*%20drawScale)%3B%0A%09%09%09%09%7D%0A%09%09%09%09s.lineTo(vertices%5B0%5D.x%20*%20drawScale%2C%20vertices%5B0%5D.y%20*%20drawScale)%3B%0A%09%09%09%09s.closePath()%3B%0A%09%09%09%09s.stroke()%3B%0A%09%09%09%7D%0A%0A%09%09%09DrawSolidPolygon(vertices%2C%20vertexCount%2C%20color)%20%7B%0A%09%09%09%09if%20(!vertexCount)%20return%3B%0A%09%09%09%09const%20s%20%3D%20this.m_ctx%3B%0A%09%09%09%09const%20drawScale%20%3D%20this.m_drawScale%3B%0A%09%09%09%09s.beginPath()%3B%0A%09%09%09%09s.strokeStyle%20%3D%20this._color(color.color%2C%20this.m_alpha)%3B%0A%09%09%09%09s.fillStyle%20%3D%20this._color(color.color%2C%20this.m_fillAlpha)%3B%0A%09%09%09%09s.moveTo(vertices%5B0%5D.x%20*%20drawScale%2C%20vertices%5B0%5D.y%20*%20drawScale)%3B%0A%09%09%09%09for%20(let%20i%20%3D%201%3B%20i%20%3C%20vertexCount%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09s.lineTo(vertices%5Bi%5D.x%20*%20drawScale%2C%20vertices%5Bi%5D.y%20*%20drawScale)%3B%0A%09%09%09%09%7D%0A%09%09%09%09s.lineTo(vertices%5B0%5D.x%20*%20drawScale%2C%20vertices%5B0%5D.y%20*%20drawScale)%3B%0A%09%09%09%09s.closePath()%3B%0A%09%09%09%09s.fill()%3B%0A%09%09%09%09s.stroke()%3B%0A%09%09%09%7D%0A%0A%09%09%09DrawCircle(center%2C%20radius%2C%20color)%20%7B%0A%09%09%09%09if%20(!radius)%20return%3B%0A%09%09%09%09const%20s%20%3D%20this.m_ctx%3B%0A%09%09%09%09const%20drawScale%20%3D%20this.m_drawScale%3B%0A%09%09%09%09s.beginPath()%3B%0A%09%09%09%09s.strokeStyle%20%3D%20this._color(color.color%2C%20this.m_alpha)%3B%0A%09%09%09%09s.arc(center.x%20*%20drawScale%2C%20center.y%20*%20drawScale%2C%20radius%20*%20drawScale%2C%200%2C%20Math.PI%20*%202%2C%20true)%3B%0A%09%09%09%09s.closePath()%3B%0A%09%09%09%09s.stroke()%3B%0A%09%09%09%7D%0A%0A%09%09%09DrawSolidCircle(center%2C%20radius%2C%20axis%2C%20color)%20%7B%0A%09%09%09%09if%20(!radius)%20return%3B%0A%09%09%09%09const%20s%20%3D%20this.m_ctx%3B%0A%09%09%09%09const%20drawScale%20%3D%20this.m_drawScale%3B%0A%09%09%09%09const%20cx%20%3D%20center.x%20*%20drawScale%3B%0A%09%09%09%09const%20cy%20%3D%20center.y%20*%20drawScale%3B%0A%09%09%09%09s.moveTo(0%2C%200)%3B%0A%09%09%09%09s.beginPath()%3B%0A%09%09%09%09s.strokeStyle%20%3D%20this._color(color.color%2C%20this.m_alpha)%3B%0A%09%09%09%09s.fillStyle%20%3D%20this._color(color.color%2C%20this.m_fillAlpha)%3B%0A%09%09%09%09s.arc(cx%2C%20cy%2C%20radius%20*%20drawScale%2C%200%2C%20Math.PI%20*%202%2C%20true)%3B%0A%09%09%09%09s.moveTo(cx%2C%20cy)%3B%0A%09%09%09%09s.lineTo((center.x%20%2B%20axis.x%20*%20radius)%20*%20drawScale%2C%20(center.y%20%2B%20axis.y%20*%20radius)%20*%20drawScale)%3B%0A%09%09%09%09s.closePath()%3B%0A%09%09%09%09s.fill()%3B%0A%09%09%09%09s.stroke()%3B%0A%09%09%09%7D%0A%0A%09%09%09DrawSegment(p1%2C%20p2%2C%20color)%20%7B%0A%09%09%09%09const%20s%20%3D%20this.m_ctx%3B%0A%09%09%09%09const%20drawScale%20%3D%20this.m_drawScale%3B%0A%09%09%09%09s.strokeStyle%20%3D%20this._color(color.color%2C%20this.m_alpha)%3B%0A%09%09%09%09s.beginPath()%3B%0A%09%09%09%09s.moveTo(p1.x%20*%20drawScale%2C%20p1.y%20*%20drawScale)%3B%0A%09%09%09%09s.lineTo(p2.x%20*%20drawScale%2C%20p2.y%20*%20drawScale)%3B%0A%09%09%09%09s.closePath()%3B%0A%09%09%09%09s.stroke()%3B%0A%09%09%09%7D%0A%0A%09%09%09DrawTransform(xf)%20%7B%0A%09%09%09%09const%20s%20%3D%20this.m_ctx%3B%0A%09%09%09%09const%20drawScale%20%3D%20this.m_drawScale%3B%0A%09%09%09%09s.beginPath()%3B%0A%09%09%09%09s.strokeStyle%20%3D%20this._color(0xff0000%2C%20this.m_alpha)%3B%0A%09%09%09%09s.moveTo(xf.position.x%20*%20drawScale%2C%20xf.position.y%20*%20drawScale)%3B%0A%09%09%09%09s.lineTo((xf.position.x%20%2B%20this.m_xformScale%20*%20xf.R.col1.x)%20*%20drawScale%2C%20(xf.position.y%20%2B%20this.m_xformScale%20*%20xf.R.col1.y)%20*%20drawScale)%3B%0A%0A%09%09%09%09s.strokeStyle%20%3D%20this._color(0xff00%2C%20this.m_alpha)%3B%0A%09%09%09%09s.moveTo(xf.position.x%20*%20drawScale%2C%20xf.position.y%20*%20drawScale)%3B%0A%09%09%09%09s.lineTo((xf.position.x%20%2B%20this.m_xformScale%20*%20xf.R.col2.x)%20*%20drawScale%2C%20(xf.position.y%20%2B%20this.m_xformScale%20*%20xf.R.col2.y)%20*%20drawScale)%3B%0A%09%09%09%09s.closePath()%3B%0A%09%09%09%09s.stroke()%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.b2DebugDraw%20%3D%20b2DebugDraw%3B%0A%0A%09%09class%20b2DestructionListener%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2DestructionListener.b2DestructionListener.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09SayGoodbyeJoint(joint)%20%7B%20%7D%0A%09%09%09SayGoodbyeFixture(fixture)%20%7B%20%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.b2DestructionListener%20%3D%20b2DestructionListener%3B%0A%0A%09%09class%20b2FilterData%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2FilterData.b2FilterData.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2FilterData()%20%7B%0A%09%09%09%09this.categoryBits%20%3D%200x0001%3B%0A%09%09%09%09this.maskBits%20%3D%200xFFFF%3B%0A%09%09%09%09this.groupIndex%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09Copy()%20%7B%0A%09%09%09%09const%20copy%20%3D%20new%20b2FilterData()%3B%0A%09%09%09%09copy.categoryBits%20%3D%20this.categoryBits%3B%0A%09%09%09%09copy.maskBits%20%3D%20this.maskBits%3B%0A%09%09%09%09copy.groupIndex%20%3D%20this.groupIndex%3B%0A%09%09%09%09return%20copy%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.b2FilterData%20%3D%20b2FilterData%3B%0A%0A%09%09class%20b2Fixture%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2Fixture.b2Fixture.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2Fixture)%20this.b2Fixture.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2Fixture()%20%7B%0A%09%09%09%09this.m_filter%20%3D%20new%20b2FilterData()%3B%0A%09%09%09%7D%0A%0A%09%09%09GetType()%20%7B%0A%09%09%09%09return%20this.m_shape.GetType()%3B%0A%09%09%09%7D%0A%0A%09%09%09GetShape()%20%7B%0A%09%09%09%09return%20this.m_shape%3B%0A%09%09%09%7D%0A%0A%09%09%09SetSensor(sensor)%20%7B%0A%09%09%09%09if%20(this.m_isSensor%20%3D%3D%20sensor)%20return%3B%0A%09%09%09%09this.m_isSensor%20%3D%20sensor%3B%0A%09%09%09%09if%20(this.m_body%20%3D%3D%20null)%20return%3B%0A%09%09%09%09let%20edge%20%3D%20this.m_body.GetContactList()%3B%0A%09%09%09%09while%20(edge)%20%7B%0A%09%09%09%09%09const%20contact%20%3D%20edge.contact%3B%0A%09%09%09%09%09const%20fixtureA%20%3D%20contact.GetFixtureA()%3B%0A%09%09%09%09%09const%20fixtureB%20%3D%20contact.GetFixtureB()%3B%0A%09%09%09%09%09if%20(fixtureA%20%3D%3D%20this%20%7C%7C%20fixtureB%20%3D%3D%20this)%20contact.SetSensor(fixtureA.IsSensor()%20%7C%7C%20fixtureB.IsSensor())%3B%0A%09%09%09%09%09edge%20%3D%20edge.next%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09IsSensor()%20%7B%0A%09%09%09%09return%20this.m_isSensor%3B%0A%09%09%09%7D%0A%0A%09%09%09SetFilterData(filter)%20%7B%0A%09%09%09%09this.m_filter%20%3D%20filter.Copy()%3B%0A%09%09%09%09if%20(this.m_body)%20return%3B%0A%09%09%09%09let%20edge%20%3D%20this.m_body.GetContactList()%3B%0A%09%09%09%09while%20(edge)%20%7B%0A%09%09%09%09%09const%20contact%20%3D%20edge.contact%3B%0A%09%09%09%09%09const%20fixtureA%20%3D%20contact.GetFixtureA()%3B%0A%09%09%09%09%09const%20fixtureB%20%3D%20contact.GetFixtureB()%3B%0A%09%09%09%09%09if%20(fixtureA%20%3D%3D%20this%20%7C%7C%20fixtureB%20%3D%3D%20this)%20contact.FlagForFiltering()%3B%0A%09%09%09%09%09edge%20%3D%20edge.next%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09GetFilterData()%20%7B%0A%09%09%09%09return%20this.m_filter.Copy()%3B%0A%09%09%09%7D%0A%0A%09%09%09GetBody()%20%7B%0A%09%09%09%09return%20this.m_body%3B%0A%09%09%09%7D%0A%0A%09%09%09GetNext()%20%7B%0A%09%09%09%09return%20this.m_next%3B%0A%09%09%09%7D%0A%0A%09%09%09GetUserData()%20%7B%0A%09%09%09%09return%20this.m_userData%3B%0A%09%09%09%7D%0A%0A%09%09%09SetUserData(data)%20%7B%0A%09%09%09%09this.m_userData%20%3D%20data%3B%0A%09%09%09%7D%0A%0A%09%09%09TestPoint(p)%20%7B%0A%09%09%09%09return%20this.m_shape.TestPoint(this.m_body.GetTransform()%2C%20p)%3B%0A%09%09%09%7D%0A%0A%09%09%09RayCast(output%2C%20input)%20%7B%0A%09%09%09%09return%20this.m_shape.RayCast(output%2C%20input%2C%20this.m_body.GetTransform())%3B%0A%09%09%09%7D%0A%0A%09%09%09GetMassData(massData)%20%7B%0A%09%09%09%09if%20(massData%20%3D%3D%3D%20undefined)%20massData%20%3D%20null%3B%0A%09%09%09%09if%20(massData%20%3D%3D%20null)%20%7B%0A%09%09%09%09%09massData%20%3D%20new%20b2MassData()%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_shape.ComputeMass(massData%2C%20this.m_density)%3B%0A%09%09%09%09return%20massData%3B%0A%09%09%09%7D%0A%0A%09%09%09SetDensity(density)%20%7B%0A%09%09%09%09if%20(density%20%3D%3D%3D%20undefined)%20density%20%3D%200%3B%0A%09%09%09%09this.m_density%20%3D%20density%3B%0A%09%09%09%7D%0A%0A%09%09%09GetDensity()%20%7B%0A%09%09%09%09return%20this.m_density%3B%0A%09%09%09%7D%0A%0A%09%09%09GetFriction()%20%7B%0A%09%09%09%09return%20this.m_friction%3B%0A%09%09%09%7D%0A%0A%09%09%09SetFriction(friction)%20%7B%0A%09%09%09%09if%20(friction%20%3D%3D%3D%20undefined)%20friction%20%3D%200%3B%0A%09%09%09%09this.m_friction%20%3D%20friction%3B%0A%09%09%09%7D%0A%0A%09%09%09GetRestitution()%20%7B%0A%09%09%09%09return%20this.m_restitution%3B%0A%09%09%09%7D%0A%0A%09%09%09SetRestitution(restitution)%20%7B%0A%09%09%09%09if%20(restitution%20%3D%3D%3D%20undefined)%20restitution%20%3D%200%3B%0A%09%09%09%09this.m_restitution%20%3D%20restitution%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAABB()%20%7B%0A%09%09%09%09return%20this.m_aabb%3B%0A%09%09%09%7D%0A%0A%09%09%09b2Fixture()%20%7B%0A%09%09%09%09this.m_aabb%20%3D%20new%20b2AABB()%3B%0A%09%09%09%09this.m_userData%20%3D%20null%3B%0A%09%09%09%09this.m_body%20%3D%20null%3B%0A%09%09%09%09this.m_next%20%3D%20null%3B%0A%09%09%09%09this.m_shape%20%3D%20null%3B%0A%09%09%09%09this.m_density%20%3D%200.0%3B%0A%09%09%09%09this.m_friction%20%3D%200.0%3B%0A%09%09%09%09this.m_restitution%20%3D%200.0%3B%0A%09%09%09%7D%0A%0A%09%09%09Create(body%2C%20xf%2C%20def)%20%7B%0A%09%09%09%09this.m_userData%20%3D%20def.userData%3B%0A%09%09%09%09this.m_friction%20%3D%20def.friction%3B%0A%09%09%09%09this.m_restitution%20%3D%20def.restitution%3B%0A%09%09%09%09this.m_body%20%3D%20body%3B%0A%09%09%09%09this.m_next%20%3D%20null%3B%0A%09%09%09%09this.m_filter%20%3D%20def.filter.Copy()%3B%0A%09%09%09%09this.m_isSensor%20%3D%20def.isSensor%3B%0A%09%09%09%09this.m_shape%20%3D%20def.shape.Copy()%3B%0A%09%09%09%09this.m_density%20%3D%20def.density%3B%0A%09%09%09%7D%0A%0A%09%09%09Destroy()%20%7B%0A%09%09%09%09this.m_shape%20%3D%20null%3B%0A%09%09%09%7D%0A%0A%09%09%09CreateProxy(broadPhase%2C%20xf)%20%7B%0A%09%09%09%09this.m_shape.ComputeAABB(this.m_aabb%2C%20xf)%3B%0A%09%09%09%09this.m_proxy%20%3D%20broadPhase.CreateProxy(this.m_aabb%2C%20this)%3B%0A%09%09%09%7D%0A%0A%09%09%09DestroyProxy(broadPhase)%20%7B%0A%09%09%09%09if%20(this.m_proxy%20%3D%3D%20null)%20%7B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09broadPhase.DestroyProxy(this.m_proxy)%3B%0A%09%09%09%09this.m_proxy%20%3D%20null%3B%0A%09%09%09%7D%0A%0A%09%09%09Synchronize(broadPhase%2C%20transform1%2C%20transform2)%20%7B%0A%09%09%09%09if%20(!this.m_proxy)%20return%3B%0A%09%09%09%09const%20aabb1%20%3D%20new%20b2AABB()%3B%0A%09%09%09%09const%20aabb2%20%3D%20new%20b2AABB()%3B%0A%09%09%09%09this.m_shape.ComputeAABB(aabb1%2C%20transform1)%3B%0A%09%09%09%09this.m_shape.ComputeAABB(aabb2%2C%20transform2)%3B%0A%09%09%09%09this.m_aabb.Combine(aabb1%2C%20aabb2)%3B%0A%09%09%09%09const%20displacement%20%3D%20b2Math.SubtractVV(transform2.position%2C%20transform1.position)%3B%0A%09%09%09%09broadPhase.MoveProxy(this.m_proxy%2C%20this.m_aabb%2C%20displacement)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.b2Fixture%20%3D%20b2Fixture%3B%0A%0A%09%09class%20b2FixtureDef%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2FixtureDef.b2FixtureDef.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2FixtureDef)%20this.b2FixtureDef.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2FixtureDef()%20%7B%0A%09%09%09%09this.filter%20%3D%20new%20b2FilterData()%3B%0A%09%09%09%7D%0A%0A%09%09%09b2FixtureDef()%20%7B%0A%09%09%09%09this.shape%20%3D%20null%3B%0A%09%09%09%09this.userData%20%3D%20null%3B%0A%09%09%09%09this.friction%20%3D%200.2%3B%0A%09%09%09%09this.restitution%20%3D%200.0%3B%0A%09%09%09%09this.density%20%3D%200.0%3B%0A%09%09%09%09this.filter.categoryBits%20%3D%200x0001%3B%0A%09%09%09%09this.filter.maskBits%20%3D%200xFFFF%3B%0A%09%09%09%09this.filter.groupIndex%20%3D%200%3B%0A%09%09%09%09this.isSensor%20%3D%20false%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.b2FixtureDef%20%3D%20b2FixtureDef%3B%0A%0A%09%09class%20b2Island%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2Island.b2Island.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2Island)%20this.b2Island.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09b2Island()%20%7B%0A%09%09%09%09this.m_bodies%20%3D%20new%20Vector()%3B%0A%09%09%09%09this.m_contacts%20%3D%20new%20Vector()%3B%0A%09%09%09%09this.m_joints%20%3D%20new%20Vector()%3B%0A%09%09%09%7D%0A%0A%09%09%09Initialize(%0A%09%09%09%09bodyCapacity%2C%0A%09%09%09%09contactCapacity%2C%0A%09%09%09%09jointCapacity%2C%0A%09%09%09%09allocator%2C%0A%09%09%09%09listener%2C%0A%09%09%09%09contactSolver%0A%09%09%09)%20%7B%0A%09%09%09%09if%20(bodyCapacity%20%3D%3D%3D%20undefined)%20bodyCapacity%20%3D%200%3B%0A%09%09%09%09if%20(contactCapacity%20%3D%3D%3D%20undefined)%20contactCapacity%20%3D%200%3B%0A%09%09%09%09if%20(jointCapacity%20%3D%3D%3D%20undefined)%20jointCapacity%20%3D%200%3B%0A%09%09%09%09let%20i%20%3D%200%3B%0A%09%09%09%09this.m_bodyCapacity%20%3D%20bodyCapacity%3B%0A%09%09%09%09this.m_contactCapacity%20%3D%20contactCapacity%3B%0A%09%09%09%09this.m_jointCapacity%20%3D%20jointCapacity%3B%0A%09%09%09%09this.m_bodyCount%20%3D%200%3B%0A%09%09%09%09this.m_contactCount%20%3D%200%3B%0A%09%09%09%09this.m_jointCount%20%3D%200%3B%0A%09%09%09%09this.m_allocator%20%3D%20allocator%3B%0A%09%09%09%09this.m_listener%20%3D%20listener%3B%0A%09%09%09%09this.m_contactSolver%20%3D%20contactSolver%3B%0A%09%09%09%09for%20(i%20%3D%20this.m_bodies.length%3B%0A%09%09%09%09%09i%20%3C%20bodyCapacity%3B%20i%2B%2B)%20%7B%20this.m_bodies%5Bi%5D%20%3D%20null%3B%20%7D%0A%09%09%09%09for%20(i%20%3D%20this.m_contacts.length%3B%0A%09%09%09%09%09i%20%3C%20contactCapacity%3B%20i%2B%2B)%20%7B%20this.m_contacts%5Bi%5D%20%3D%20null%3B%20%7D%0A%09%09%09%09for%20(i%20%3D%20this.m_joints.length%3B%0A%09%09%09%09%09i%20%3C%20jointCapacity%3B%20i%2B%2B)%20%7B%20this.m_joints%5Bi%5D%20%3D%20null%3B%20%7D%0A%09%09%09%7D%0A%0A%09%09%09Clear()%20%7B%0A%09%09%09%09this.m_bodyCount%20%3D%200%3B%0A%09%09%09%09this.m_contactCount%20%3D%200%3B%0A%09%09%09%09this.m_jointCount%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09Solve(step%2C%20gravity%2C%20allowSleep)%20%7B%0A%09%09%09%09let%20i%20%3D%200%3B%0A%09%09%09%09let%20j%20%3D%200%3B%0A%09%09%09%09let%20b%3B%0A%09%09%09%09let%20joint%3B%0A%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09i%20%3C%20this.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09b%20%3D%20this.m_bodies%5Bi%5D%3B%0A%09%09%09%09%09if%20(b.GetType()%20!%3D%20b2Body.b2_dynamicBody)%20continue%3B%0A%09%09%09%09%09b.m_linearVelocity.x%20%2B%3D%20step.dt%20*%20(gravity.x%20%2B%20b.m_invMass%20*%20b.m_force.x)%3B%0A%09%09%09%09%09b.m_linearVelocity.y%20%2B%3D%20step.dt%20*%20(gravity.y%20%2B%20b.m_invMass%20*%20b.m_force.y)%3B%0A%09%09%09%09%09b.m_angularVelocity%20%2B%3D%20step.dt%20*%20b.m_invI%20*%20b.m_torque%3B%0A%09%09%09%09%09b.m_linearVelocity.Multiply(b2Math.Clamp(1.0%20-%20step.dt%20*%20b.m_linearDamping%2C%200.0%2C%201.0))%3B%0A%09%09%09%09%09b.m_angularVelocity%20*%3D%20b2Math.Clamp(1.0%20-%20step.dt%20*%20b.m_angularDamping%2C%200.0%2C%201.0)%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_contactSolver.Initialize(step%2C%20this.m_contacts%2C%20this.m_contactCount%2C%20this.m_allocator)%3B%0A%09%09%09%09const%20contactSolver%20%3D%20this.m_contactSolver%3B%0A%09%09%09%09contactSolver.InitVelocityConstraints(step)%3B%0A%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09i%20%3C%20this.m_jointCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09joint%20%3D%20this.m_joints%5Bi%5D%3B%0A%09%09%09%09%09joint.InitVelocityConstraints(step)%3B%0A%09%09%09%09%7D%0A%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09i%20%3C%20step.velocityIterations%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09for%20(j%20%3D%200%3B%0A%09%09%09%09%09%09j%20%3C%20this.m_jointCount%3B%20%2B%2Bj)%20%7B%0A%09%09%09%09%09%09joint%20%3D%20this.m_joints%5Bj%5D%3B%0A%09%09%09%09%09%09joint.SolveVelocityConstraints(step)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09contactSolver.SolveVelocityConstraints()%3B%0A%09%09%09%09%7D%0A%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09i%20%3C%20this.m_jointCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09joint%20%3D%20this.m_joints%5Bi%5D%3B%0A%09%09%09%09%09joint.FinalizeVelocityConstraints()%3B%0A%09%09%09%09%7D%0A%09%09%09%09contactSolver.FinalizeVelocityConstraints()%3B%0A%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09i%20%3C%20this.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09b%20%3D%20this.m_bodies%5Bi%5D%3B%0A%09%09%09%09%09if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20continue%3B%0A%09%09%09%09%09const%20translationX%20%3D%20step.dt%20*%20b.m_linearVelocity.x%3B%0A%09%09%09%09%09const%20translationY%20%3D%20step.dt%20*%20b.m_linearVelocity.y%3B%0A%09%09%09%09%09if%20((translationX%20*%20translationX%20%2B%20translationY%20*%20translationY)%20%3E%20b2Settings.b2_maxTranslationSquared)%20%7B%0A%09%09%09%09%09%09b.m_linearVelocity.Normalize()%3B%0A%09%09%09%09%09%09b.m_linearVelocity.x%20*%3D%20b2Settings.b2_maxTranslation%20*%20step.inv_dt%3B%0A%09%09%09%09%09%09b.m_linearVelocity.y%20*%3D%20b2Settings.b2_maxTranslation%20*%20step.inv_dt%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09const%20rotation%20%3D%20step.dt%20*%20b.m_angularVelocity%3B%0A%09%09%09%09%09if%20(rotation%20*%20rotation%20%3E%20b2Settings.b2_maxRotationSquared)%20%7B%0A%09%09%09%09%09%09if%20(b.m_angularVelocity%20%3C%200.0)%20%7B%0A%09%09%09%09%09%09%09b.m_angularVelocity%20%3D%20(-b2Settings.b2_maxRotation%20*%20step.inv_dt)%3B%0A%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09b.m_angularVelocity%20%3D%20b2Settings.b2_maxRotation%20*%20step.inv_dt%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%09b.m_sweep.c0.SetV(b.m_sweep.c)%3B%0A%09%09%09%09%09b.m_sweep.a0%20%3D%20b.m_sweep.a%3B%0A%09%09%09%09%09b.m_sweep.c.x%20%2B%3D%20step.dt%20*%20b.m_linearVelocity.x%3B%0A%09%09%09%09%09b.m_sweep.c.y%20%2B%3D%20step.dt%20*%20b.m_linearVelocity.y%3B%0A%09%09%09%09%09b.m_sweep.a%20%2B%3D%20step.dt%20*%20b.m_angularVelocity%3B%0A%09%09%09%09%09b.SynchronizeTransform()%3B%0A%09%09%09%09%7D%0A%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09i%20%3C%20step.positionIterations%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09const%20contactsOkay%20%3D%20contactSolver.SolvePositionConstraints(b2Settings.b2_contactBaumgarte)%3B%0A%09%09%09%09%09let%20jointsOkay%20%3D%20true%3B%0A%09%09%09%09%09for%20(j%20%3D%200%3B%0A%09%09%09%09%09%09j%20%3C%20this.m_jointCount%3B%20%2B%2Bj)%20%7B%0A%09%09%09%09%09%09joint%20%3D%20this.m_joints%5Bj%5D%3B%0A%09%09%09%09%09%09const%20jointOkay%20%3D%20joint.SolvePositionConstraints(b2Settings.b2_contactBaumgarte)%3B%0A%09%09%09%09%09%09jointsOkay%20%3D%20jointsOkay%20%26%26%20jointOkay%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if%20(contactsOkay%20%26%26%20jointsOkay)%20%7B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09this.Report(contactSolver.m_constraints)%3B%0A%09%09%09%09if%20(allowSleep)%20%7B%0A%09%09%09%09%09let%20minSleepTime%20%3D%20Number.MAX_VALUE%3B%0A%09%09%09%09%09const%20linTolSqr%20%3D%20b2Settings.b2_linearSleepTolerance%20*%20b2Settings.b2_linearSleepTolerance%3B%0A%09%09%09%09%09const%20angTolSqr%20%3D%20b2Settings.b2_angularSleepTolerance%20*%20b2Settings.b2_angularSleepTolerance%3B%0A%09%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09%09i%20%3C%20this.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09%09b%20%3D%20this.m_bodies%5Bi%5D%3B%0A%09%09%09%09%09%09if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09if%20((b.m_flags%20%26%20b2Body.e_allowSleepFlag)%20%3D%3D%200)%20%7B%0A%09%09%09%09%09%09%09b.m_sleepTime%20%3D%200.0%3B%0A%09%09%09%09%09%09%09minSleepTime%20%3D%200.0%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09if%20((b.m_flags%20%26%20b2Body.e_allowSleepFlag)%20%3D%3D%200%20%7C%7C%20b.m_angularVelocity%20*%20b.m_angularVelocity%20%3E%20angTolSqr%20%7C%7C%20b2Math.Dot(b.m_linearVelocity%2C%20b.m_linearVelocity)%20%3E%20linTolSqr)%20%7B%0A%09%09%09%09%09%09%09b.m_sleepTime%20%3D%200.0%3B%0A%09%09%09%09%09%09%09minSleepTime%20%3D%200.0%3B%0A%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09b.m_sleepTime%20%2B%3D%20step.dt%3B%0A%09%09%09%09%09%09%09minSleepTime%20%3D%20b2Math.Min(minSleepTime%2C%20b.m_sleepTime)%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if%20(minSleepTime%20%3E%3D%20b2Settings.b2_timeToSleep)%20%7B%0A%09%09%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09%09%09i%20%3C%20this.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09%09%09b%20%3D%20this.m_bodies%5Bi%5D%3B%0A%09%09%09%09%09%09%09b.SetAwake(false)%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09SolveTOI(subStep)%20%7B%0A%09%09%09%09let%20i%20%3D%200%3B%0A%09%09%09%09let%20j%20%3D%200%3B%0A%09%09%09%09this.m_contactSolver.Initialize(subStep%2C%20this.m_contacts%2C%20this.m_contactCount%2C%20this.m_allocator)%3B%0A%09%09%09%09const%20contactSolver%20%3D%20this.m_contactSolver%3B%0A%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09i%20%3C%20this.m_jointCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09this.m_joints%5Bi%5D.InitVelocityConstraints(subStep)%3B%0A%09%09%09%09%7D%0A%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09i%20%3C%20subStep.velocityIterations%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09contactSolver.SolveVelocityConstraints()%3B%0A%09%09%09%09%09for%20(j%20%3D%200%3B%0A%09%09%09%09%09%09j%20%3C%20this.m_jointCount%3B%20%2B%2Bj)%20%7B%0A%09%09%09%09%09%09this.m_joints%5Bj%5D.SolveVelocityConstraints(subStep)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09i%20%3C%20this.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09const%20b%20%3D%20this.m_bodies%5Bi%5D%3B%0A%09%09%09%09%09if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20continue%3B%0A%09%09%09%09%09const%20translationX%20%3D%20subStep.dt%20*%20b.m_linearVelocity.x%3B%0A%09%09%09%09%09const%20translationY%20%3D%20subStep.dt%20*%20b.m_linearVelocity.y%3B%0A%09%09%09%09%09if%20((translationX%20*%20translationX%20%2B%20translationY%20*%20translationY)%20%3E%20b2Settings.b2_maxTranslationSquared)%20%7B%0A%09%09%09%09%09%09b.m_linearVelocity.Normalize()%3B%0A%09%09%09%09%09%09b.m_linearVelocity.x%20*%3D%20b2Settings.b2_maxTranslation%20*%20subStep.inv_dt%3B%0A%09%09%09%09%09%09b.m_linearVelocity.y%20*%3D%20b2Settings.b2_maxTranslation%20*%20subStep.inv_dt%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09const%20rotation%20%3D%20subStep.dt%20*%20b.m_angularVelocity%3B%0A%09%09%09%09%09if%20(rotation%20*%20rotation%20%3E%20b2Settings.b2_maxRotationSquared)%20%7B%0A%09%09%09%09%09%09if%20(b.m_angularVelocity%20%3C%200.0)%20%7B%0A%09%09%09%09%09%09%09b.m_angularVelocity%20%3D%20(-b2Settings.b2_maxRotation%20*%20subStep.inv_dt)%3B%0A%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09b.m_angularVelocity%20%3D%20b2Settings.b2_maxRotation%20*%20subStep.inv_dt%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%09b.m_sweep.c0.SetV(b.m_sweep.c)%3B%0A%09%09%09%09%09b.m_sweep.a0%20%3D%20b.m_sweep.a%3B%0A%09%09%09%09%09b.m_sweep.c.x%20%2B%3D%20subStep.dt%20*%20b.m_linearVelocity.x%3B%0A%09%09%09%09%09b.m_sweep.c.y%20%2B%3D%20subStep.dt%20*%20b.m_linearVelocity.y%3B%0A%09%09%09%09%09b.m_sweep.a%20%2B%3D%20subStep.dt%20*%20b.m_angularVelocity%3B%0A%09%09%09%09%09b.SynchronizeTransform()%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20k_toiBaumgarte%20%3D%200.75%3B%0A%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09i%20%3C%20subStep.positionIterations%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09const%20contactsOkay%20%3D%20contactSolver.SolvePositionConstraints(k_toiBaumgarte)%3B%0A%09%09%09%09%09let%20jointsOkay%20%3D%20true%3B%0A%09%09%09%09%09for%20(j%20%3D%200%3B%0A%09%09%09%09%09%09j%20%3C%20this.m_jointCount%3B%20%2B%2Bj)%20%7B%0A%09%09%09%09%09%09const%20jointOkay%20%3D%20this.m_joints%5Bj%5D.SolvePositionConstraints(b2Settings.b2_contactBaumgarte)%3B%0A%09%09%09%09%09%09jointsOkay%20%3D%20jointsOkay%20%26%26%20jointOkay%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if%20(contactsOkay%20%26%26%20jointsOkay)%20%7B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09this.Report(contactSolver.m_constraints)%3B%0A%09%09%09%7D%0A%0A%09%09%09Report(constraints)%20%7B%0A%09%09%09%09if%20(this.m_listener%20%3D%3D%20null)%20%7B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_contactCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09const%20c%20%3D%20this.m_contacts%5Bi%5D%3B%0A%09%09%09%09%09const%20cc%20%3D%20constraints%5Bi%5D%3B%0A%09%09%09%09%09for%20(let%20j%20%3D%200%3B%20j%20%3C%20cc.pointCount%3B%20%2B%2Bj)%20%7B%0A%09%09%09%09%09%09b2Island.s_impulse.normalImpulses%5Bj%5D%20%3D%20cc.points%5Bj%5D.normalImpulse%3B%0A%09%09%09%09%09%09b2Island.s_impulse.tangentImpulses%5Bj%5D%20%3D%20cc.points%5Bj%5D.tangentImpulse%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09this.m_listener.PostSolve(c%2C%20b2Island.s_impulse)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09AddBody(body)%20%7B%0A%09%09%09%09body.m_islandIndex%20%3D%20this.m_bodyCount%3B%0A%09%09%09%09this.m_bodies%5Bthis.m_bodyCount%2B%2B%5D%20%3D%20body%3B%0A%09%09%09%7D%0A%0A%09%09%09AddContact(contact)%20%7B%0A%09%09%09%09this.m_contacts%5Bthis.m_contactCount%2B%2B%5D%20%3D%20contact%3B%0A%09%09%09%7D%0A%0A%09%09%09AddJoint(joint)%20%7B%0A%09%09%09%09this.m_joints%5Bthis.m_jointCount%2B%2B%5D%20%3D%20joint%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.b2Island%20%3D%20b2Island%3B%0A%0A%09%09class%20b2TimeStep%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2TimeStep.b2TimeStep.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09Set(step)%20%7B%0A%09%09%09%09this.dt%20%3D%20step.dt%3B%0A%09%09%09%09this.inv_dt%20%3D%20step.inv_dt%3B%0A%09%09%09%09this.positionIterations%20%3D%20step.positionIterations%3B%0A%09%09%09%09this.velocityIterations%20%3D%20step.velocityIterations%3B%0A%09%09%09%09this.warmStarting%20%3D%20step.warmStarting%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.b2TimeStep%20%3D%20b2TimeStep%3B%0A%0A%09%09class%20b2World%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2World.b2World.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2World)%20this.b2World.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2World()%20%7B%0A%09%09%09%09this.s_stack%20%3D%20new%20Vector()%3B%0A%09%09%09%09this.m_contactManager%20%3D%20new%20b2ContactManager()%3B%0A%09%09%09%09this.m_contactSolver%20%3D%20new%20b2ContactSolver()%3B%0A%09%09%09%09this.m_island%20%3D%20new%20b2Island()%3B%0A%09%09%09%7D%0A%0A%09%09%09b2World(gravity%2C%20doSleep)%20%7B%0A%09%09%09%09this.m_destructionListener%20%3D%20null%3B%0A%09%09%09%09this.m_debugDraw%20%3D%20null%3B%0A%09%09%09%09this.m_bodyList%20%3D%20null%3B%0A%09%09%09%09this.m_contactList%20%3D%20null%3B%0A%09%09%09%09this.m_jointList%20%3D%20null%3B%0A%09%09%09%09this.m_controllerList%20%3D%20null%3B%0A%09%09%09%09this.m_bodyCount%20%3D%200%3B%0A%09%09%09%09this.m_contactCount%20%3D%200%3B%0A%09%09%09%09this.m_jointCount%20%3D%200%3B%0A%09%09%09%09this.m_controllerCount%20%3D%200%3B%0A%09%09%09%09b2World.m_warmStarting%20%3D%20true%3B%0A%09%09%09%09b2World.m_continuousPhysics%20%3D%20true%3B%0A%09%09%09%09this.m_allowSleep%20%3D%20doSleep%3B%0A%09%09%09%09this.m_gravity%20%3D%20gravity%3B%0A%09%09%09%09this.m_inv_dt0%20%3D%200.0%3B%0A%09%09%09%09this.m_contactManager.m_world%20%3D%20this%3B%0A%09%09%09%09const%20bd%20%3D%20new%20b2BodyDef()%3B%0A%09%09%09%09this.m_groundBody%20%3D%20this.CreateBody(bd)%3B%0A%09%09%09%7D%0A%0A%09%09%09SetDestructionListener(listener)%20%7B%0A%09%09%09%09this.m_destructionListener%20%3D%20listener%3B%0A%09%09%09%7D%0A%0A%09%09%09SetContactFilter(filter)%20%7B%0A%09%09%09%09this.m_contactManager.m_contactFilter%20%3D%20filter%3B%0A%09%09%09%7D%0A%0A%09%09%09SetContactListener(listener)%20%7B%0A%09%09%09%09this.m_contactManager.m_contactListener%20%3D%20listener%3B%0A%09%09%09%7D%0A%0A%09%09%09SetDebugDraw(debugDraw)%20%7B%0A%09%09%09%09this.m_debugDraw%20%3D%20debugDraw%3B%0A%09%09%09%7D%0A%0A%09%09%09SetBroadPhase(broadPhase)%20%7B%0A%09%09%09%09const%20oldBroadPhase%20%3D%20this.m_contactManager.m_broadPhase%3B%0A%09%09%09%09this.m_contactManager.m_broadPhase%20%3D%20broadPhase%3B%0A%09%09%09%09for%20(let%20b%20%3D%20this.m_bodyList%3B%20b%3B%20b%20%3D%20b.m_next)%20%7B%0A%09%09%09%09%09for%20(let%20f%20%3D%20b.m_fixtureList%3B%20f%3B%20f%20%3D%20f.m_next)%20%7B%0A%09%09%09%09%09%09f.m_proxy%20%3D%20broadPhase.CreateProxy(oldBroadPhase.GetFatAABB(f.m_proxy)%2C%20f)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09Validate()%20%7B%0A%09%09%09%09this.m_contactManager.m_broadPhase.Validate()%3B%0A%09%09%09%7D%0A%0A%09%09%09GetProxyCount()%20%7B%0A%09%09%09%09return%20this.m_contactManager.m_broadPhase.GetProxyCount()%3B%0A%09%09%09%7D%0A%0A%09%09%09CreateBody(def)%20%7B%0A%09%09%09%09if%20(this.IsLocked()%20%3D%3D%20true)%20%7B%0A%09%09%09%09%09return%20null%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20b%20%3D%20new%20b2Body(def%2C%20this)%3B%0A%09%09%09%09b.m_prev%20%3D%20null%3B%0A%09%09%09%09b.m_next%20%3D%20this.m_bodyList%3B%0A%09%09%09%09if%20(this.m_bodyList)%20%7B%0A%09%09%09%09%09this.m_bodyList.m_prev%20%3D%20b%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_bodyList%20%3D%20b%3B%0A%09%09%09%09%2B%2Bthis.m_bodyCount%3B%0A%09%09%09%09return%20b%3B%0A%09%09%09%7D%0A%0A%09%09%09DestroyBody(b)%20%7B%0A%09%09%09%09if%20(this.IsLocked()%20%3D%3D%20true)%20%7B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09let%20jn%20%3D%20b.m_jointList%3B%0A%09%09%09%09while%20(jn)%20%7B%0A%09%09%09%09%09const%20jn0%20%3D%20jn%3B%0A%09%09%09%09%09jn%20%3D%20jn.next%3B%0A%09%09%09%09%09if%20(this.m_destructionListener)%20%7B%0A%09%09%09%09%09%09this.m_destructionListener.SayGoodbyeJoint(jn0.joint)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09this.DestroyJoint(jn0.joint)%3B%0A%09%09%09%09%7D%0A%09%09%09%09let%20coe%20%3D%20b.m_controllerList%3B%0A%09%09%09%09while%20(coe)%20%7B%0A%09%09%09%09%09const%20coe0%20%3D%20coe%3B%0A%09%09%09%09%09coe%20%3D%20coe.nextController%3B%0A%09%09%09%09%09coe0.controller.RemoveBody(b)%3B%0A%09%09%09%09%7D%0A%09%09%09%09let%20ce%20%3D%20b.m_contactList%3B%0A%09%09%09%09while%20(ce)%20%7B%0A%09%09%09%09%09const%20ce0%20%3D%20ce%3B%0A%09%09%09%09%09ce%20%3D%20ce.next%3B%0A%09%09%09%09%09this.m_contactManager.Destroy(ce0.contact)%3B%0A%09%09%09%09%7D%0A%09%09%09%09b.m_contactList%20%3D%20null%3B%0A%09%09%09%09let%20f%20%3D%20b.m_fixtureList%3B%0A%09%09%09%09while%20(f)%20%7B%0A%09%09%09%09%09const%20f0%20%3D%20f%3B%0A%09%09%09%09%09f%20%3D%20f.m_next%3B%0A%09%09%09%09%09if%20(this.m_destructionListener)%20%7B%0A%09%09%09%09%09%09this.m_destructionListener.SayGoodbyeFixture(f0)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09f0.DestroyProxy(this.m_contactManager.m_broadPhase)%3B%0A%09%09%09%09%09f0.Destroy()%3B%0A%09%09%09%09%7D%0A%09%09%09%09b.m_fixtureList%20%3D%20null%3B%0A%09%09%09%09b.m_fixtureCount%20%3D%200%3B%0A%09%09%09%09if%20(b.m_prev)%20%7B%0A%09%09%09%09%09b.m_prev.m_next%20%3D%20b.m_next%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(b.m_next)%20%7B%0A%09%09%09%09%09b.m_next.m_prev%20%3D%20b.m_prev%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(b%20%3D%3D%20this.m_bodyList)%20%7B%0A%09%09%09%09%09this.m_bodyList%20%3D%20b.m_next%3B%0A%09%09%09%09%7D%20--this.m_bodyCount%3B%0A%09%09%09%7D%0A%0A%09%09%09CreateJoint(def)%20%7B%0A%09%09%09%09const%20j%20%3D%20b2Joint.Create(def%2C%20null)%3B%0A%09%09%09%09j.m_prev%20%3D%20null%3B%0A%09%09%09%09j.m_next%20%3D%20this.m_jointList%3B%0A%09%09%09%09if%20(this.m_jointList)%20%7B%0A%09%09%09%09%09this.m_jointList.m_prev%20%3D%20j%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_jointList%20%3D%20j%3B%0A%09%09%09%09%2B%2Bthis.m_jointCount%3B%0A%09%09%09%09j.m_edgeA.joint%20%3D%20j%3B%0A%09%09%09%09j.m_edgeA.other%20%3D%20j.m_bodyB%3B%0A%09%09%09%09j.m_edgeA.prev%20%3D%20null%3B%0A%09%09%09%09j.m_edgeA.next%20%3D%20j.m_bodyA.m_jointList%3B%0A%09%09%09%09if%20(j.m_bodyA.m_jointList)%20j.m_bodyA.m_jointList.prev%20%3D%20j.m_edgeA%3B%0A%09%09%09%09j.m_bodyA.m_jointList%20%3D%20j.m_edgeA%3B%0A%09%09%09%09j.m_edgeB.joint%20%3D%20j%3B%0A%09%09%09%09j.m_edgeB.other%20%3D%20j.m_bodyA%3B%0A%09%09%09%09j.m_edgeB.prev%20%3D%20null%3B%0A%09%09%09%09j.m_edgeB.next%20%3D%20j.m_bodyB.m_jointList%3B%0A%09%09%09%09if%20(j.m_bodyB.m_jointList)%20j.m_bodyB.m_jointList.prev%20%3D%20j.m_edgeB%3B%0A%09%09%09%09j.m_bodyB.m_jointList%20%3D%20j.m_edgeB%3B%0A%09%09%09%09const%20bodyA%20%3D%20def.bodyA%3B%0A%09%09%09%09const%20bodyB%20%3D%20def.bodyB%3B%0A%09%09%09%09if%20(def.collideConnected%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09let%20edge%20%3D%20bodyB.GetContactList()%3B%0A%09%09%09%09%09while%20(edge)%20%7B%0A%09%09%09%09%09%09if%20(edge.other%20%3D%3D%20bodyA)%20%7B%0A%09%09%09%09%09%09%09edge.contact.FlagForFiltering()%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09edge%20%3D%20edge.next%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09return%20j%3B%0A%09%09%09%7D%0A%0A%09%09%09DestroyJoint(j)%20%7B%0A%09%09%09%09const%20collideConnected%20%3D%20j.m_collideConnected%3B%0A%09%09%09%09if%20(j.m_prev)%20%7B%0A%09%09%09%09%09j.m_prev.m_next%20%3D%20j.m_next%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(j.m_next)%20%7B%0A%09%09%09%09%09j.m_next.m_prev%20%3D%20j.m_prev%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(j%20%3D%3D%20this.m_jointList)%20%7B%0A%09%09%09%09%09this.m_jointList%20%3D%20j.m_next%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20bodyA%20%3D%20j.m_bodyA%3B%0A%09%09%09%09const%20bodyB%20%3D%20j.m_bodyB%3B%0A%09%09%09%09bodyA.SetAwake(true)%3B%0A%09%09%09%09bodyB.SetAwake(true)%3B%0A%09%09%09%09if%20(j.m_edgeA.prev)%20%7B%0A%09%09%09%09%09j.m_edgeA.prev.next%20%3D%20j.m_edgeA.next%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(j.m_edgeA.next)%20%7B%0A%09%09%09%09%09j.m_edgeA.next.prev%20%3D%20j.m_edgeA.prev%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(j.m_edgeA%20%3D%3D%20bodyA.m_jointList)%20%7B%0A%09%09%09%09%09bodyA.m_jointList%20%3D%20j.m_edgeA.next%3B%0A%09%09%09%09%7D%0A%09%09%09%09j.m_edgeA.prev%20%3D%20null%3B%0A%09%09%09%09j.m_edgeA.next%20%3D%20null%3B%0A%09%09%09%09if%20(j.m_edgeB.prev)%20%7B%0A%09%09%09%09%09j.m_edgeB.prev.next%20%3D%20j.m_edgeB.next%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(j.m_edgeB.next)%20%7B%0A%09%09%09%09%09j.m_edgeB.next.prev%20%3D%20j.m_edgeB.prev%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(j.m_edgeB%20%3D%3D%20bodyB.m_jointList)%20%7B%0A%09%09%09%09%09bodyB.m_jointList%20%3D%20j.m_edgeB.next%3B%0A%09%09%09%09%7D%0A%09%09%09%09j.m_edgeB.prev%20%3D%20null%3B%0A%09%09%09%09j.m_edgeB.next%20%3D%20null%3B%0A%09%09%09%09b2Joint.Destroy(j%2C%20null)%3B%0A%09%09%09%09--this.m_jointCount%3B%0A%09%09%09%09if%20(collideConnected%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09let%20edge%20%3D%20bodyB.GetContactList()%3B%0A%09%09%09%09%09while%20(edge)%20%7B%0A%09%09%09%09%09%09if%20(edge.other%20%3D%3D%20bodyA)%20%7B%0A%09%09%09%09%09%09%09edge.contact.FlagForFiltering()%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09edge%20%3D%20edge.next%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09AddController(c)%20%7B%0A%09%09%09%09c.m_next%20%3D%20this.m_controllerList%3B%0A%09%09%09%09c.m_prev%20%3D%20null%3B%0A%09%09%09%09this.m_controllerList%20%3D%20c%3B%0A%09%09%09%09c.m_world%20%3D%20this%3B%0A%09%09%09%09this.m_controllerCount%2B%2B%3B%0A%09%09%09%09return%20c%3B%0A%09%09%09%7D%0A%0A%09%09%09RemoveController(c)%20%7B%0A%09%09%09%09if%20(c.m_prev)%20c.m_prev.m_next%20%3D%20c.m_next%3B%0A%09%09%09%09if%20(c.m_next)%20c.m_next.m_prev%20%3D%20c.m_prev%3B%0A%09%09%09%09if%20(this.m_controllerList%20%3D%3D%20c)%20this.m_controllerList%20%3D%20c.m_next%3B%0A%09%09%09%09this.m_controllerCount--%3B%0A%09%09%09%7D%0A%0A%09%09%09CreateController(controller)%20%7B%0A%09%09%09%09if%20(controller.m_world%20!%3D%20this)%20throw%20new%20Error('Controller%20can%20only%20be%20a%20member%20of%20one%20world')%3B%0A%09%09%09%09controller.m_next%20%3D%20this.m_controllerList%3B%0A%09%09%09%09controller.m_prev%20%3D%20null%3B%0A%09%09%09%09if%20(this.m_controllerList)%20this.m_controllerList.m_prev%20%3D%20controller%3B%0A%09%09%09%09this.m_controllerList%20%3D%20controller%3B%0A%09%09%09%09%2B%2Bthis.m_controllerCount%3B%0A%09%09%09%09controller.m_world%20%3D%20this%3B%0A%09%09%09%09return%20controller%3B%0A%09%09%09%7D%0A%0A%09%09%09DestroyController(controller)%20%7B%0A%09%09%09%09controller.Clear()%3B%0A%09%09%09%09if%20(controller.m_next)%20controller.m_next.m_prev%20%3D%20controller.m_prev%3B%0A%09%09%09%09if%20(controller.m_prev)%20controller.m_prev.m_next%20%3D%20controller.m_next%3B%0A%09%09%09%09if%20(controller%20%3D%3D%20this.m_controllerList)%20this.m_controllerList%20%3D%20controller.m_next%3B%0A%09%09%09%09--this.m_controllerCount%3B%0A%09%09%09%7D%0A%0A%09%09%09SetWarmStarting(flag)%20%7B%0A%09%09%09%09b2World.m_warmStarting%20%3D%20flag%3B%0A%09%09%09%7D%0A%0A%09%09%09SetContinuousPhysics(flag)%20%7B%0A%09%09%09%09b2World.m_continuousPhysics%20%3D%20flag%3B%0A%09%09%09%7D%0A%0A%09%09%09GetBodyCount()%20%7B%0A%09%09%09%09return%20this.m_bodyCount%3B%0A%09%09%09%7D%0A%0A%09%09%09GetJointCount()%20%7B%0A%09%09%09%09return%20this.m_jointCount%3B%0A%09%09%09%7D%0A%0A%09%09%09GetContactCount()%20%7B%0A%09%09%09%09return%20this.m_contactCount%3B%0A%09%09%09%7D%0A%0A%09%09%09SetGravity(gravity)%20%7B%0A%09%09%09%09this.m_gravity%20%3D%20gravity%3B%0A%09%09%09%7D%0A%0A%09%09%09GetGravity()%20%7B%0A%09%09%09%09return%20this.m_gravity%3B%0A%09%09%09%7D%0A%0A%09%09%09GetGroundBody()%20%7B%0A%09%09%09%09return%20this.m_groundBody%3B%0A%09%09%09%7D%0A%0A%09%09%09Step(dt%2C%20velocityIterations%2C%20positionIterations)%20%7B%0A%09%09%09%09if%20(dt%20%3D%3D%3D%20undefined)%20dt%20%3D%200%3B%0A%09%09%09%09if%20(velocityIterations%20%3D%3D%3D%20undefined)%20velocityIterations%20%3D%200%3B%0A%09%09%09%09if%20(positionIterations%20%3D%3D%3D%20undefined)%20positionIterations%20%3D%200%3B%0A%09%09%09%09if%20(this.m_flags%20%26%20b2World.e_newFixture)%20%7B%0A%09%09%09%09%09this.m_contactManager.FindNewContacts()%3B%0A%09%09%09%09%09this.m_flags%20%26%3D%20~b2World.e_newFixture%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_flags%20%7C%3D%20b2World.e_locked%3B%0A%09%09%09%09const%20step%20%3D%20b2World.s_timestep2%3B%0A%09%09%09%09step.dt%20%3D%20dt%3B%0A%09%09%09%09step.velocityIterations%20%3D%20velocityIterations%3B%0A%09%09%09%09step.positionIterations%20%3D%20positionIterations%3B%0A%09%09%09%09if%20(dt%20%3E%200.0)%20%7B%0A%09%09%09%09%09step.inv_dt%20%3D%201.0%20%2F%20dt%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09step.inv_dt%20%3D%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%09step.dtRatio%20%3D%20this.m_inv_dt0%20*%20dt%3B%0A%09%09%09%09step.warmStarting%20%3D%20b2World.m_warmStarting%3B%0A%09%09%09%09this.m_contactManager.Collide()%3B%0A%09%09%09%09if%20(step.dt%20%3E%200.0)%20%7B%0A%09%09%09%09%09this.Solve(step)%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(b2World.m_continuousPhysics%20%26%26%20step.dt%20%3E%200.0)%20%7B%0A%09%09%09%09%09this.SolveTOI(step)%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(step.dt%20%3E%200.0)%20%7B%0A%09%09%09%09%09this.m_inv_dt0%20%3D%20step.inv_dt%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_flags%20%26%3D%20~b2World.e_locked%3B%0A%09%09%09%7D%0A%0A%09%09%09ClearForces()%20%7B%0A%09%09%09%09for%20(let%20body%20%3D%20this.m_bodyList%3B%20body%3B%20body%20%3D%20body.m_next)%20%7B%0A%09%09%09%09%09body.m_force.SetZero()%3B%0A%09%09%09%09%09body.m_torque%20%3D%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09DrawDebugData()%20%7B%0A%09%09%09%09if%20(this.m_debugDraw%20%3D%3D%20null)%20%7B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_debugDraw.m_sprite.graphics.clear()%3B%0A%09%09%09%09const%20flags%20%3D%20this.m_debugDraw.GetFlags()%3B%0A%09%09%09%09const%20i%20%3D%200%3B%0A%09%09%09%09let%20b%3B%0A%09%09%09%09let%20f%3B%0A%09%09%09%09let%20s%3B%0A%09%09%09%09let%20j%3B%0A%09%09%09%09let%20bp%3B%0A%09%09%09%09const%20invQ%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09const%20x1%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09const%20x2%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09let%20xf%3B%0A%09%09%09%09const%20b1%20%3D%20new%20b2AABB()%3B%0A%09%09%09%09const%20b2%20%3D%20new%20b2AABB()%3B%0A%09%09%09%09let%20vs%20%3D%20%5Bnew%20b2Vec2()%2C%20new%20b2Vec2()%2C%20new%20b2Vec2()%2C%20new%20b2Vec2()%5D%3B%0A%09%09%09%09const%20color%20%3D%20new%20b2Color(0%2C%200%2C%200)%3B%0A%09%09%09%09if%20(flags%20%26%20b2DebugDraw.e_shapeBit)%20%7B%0A%09%09%09%09%09for%20(b%20%3D%20this.m_bodyList%3B%0A%09%09%09%09%09%09b%3B%20b%20%3D%20b.m_next)%20%7B%0A%09%09%09%09%09%09xf%20%3D%20b.m_xf%3B%0A%09%09%09%09%09%09for%20(f%20%3D%20b.GetFixtureList()%3B%0A%09%09%09%09%09%09%09f%3B%20f%20%3D%20f.m_next)%20%7B%0A%09%09%09%09%09%09%09s%20%3D%20f.GetShape()%3B%0A%09%09%09%09%09%09%09if%20(b.IsActive()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09%09%09color.Set(0.5%2C%200.5%2C%200.3)%3B%0A%09%09%09%09%09%09%09%09this.DrawShape(s%2C%20xf%2C%20color)%3B%0A%09%09%09%09%09%09%09%7D%20else%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%09%09%09%09%09%09%09%09color.Set(0.5%2C%200.9%2C%200.5)%3B%0A%09%09%09%09%09%09%09%09this.DrawShape(s%2C%20xf%2C%20color)%3B%0A%09%09%09%09%09%09%09%7D%20else%20if%20(b.GetType()%20%3D%3D%20b2Body.b2_kinematicBody)%20%7B%0A%09%09%09%09%09%09%09%09color.Set(0.5%2C%200.5%2C%200.9)%3B%0A%09%09%09%09%09%09%09%09this.DrawShape(s%2C%20xf%2C%20color)%3B%0A%09%09%09%09%09%09%09%7D%20else%20if%20(b.IsAwake()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09%09%09color.Set(0.6%2C%200.6%2C%200.6)%3B%0A%09%09%09%09%09%09%09%09this.DrawShape(s%2C%20xf%2C%20color)%3B%0A%09%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09%09color.Set(0.9%2C%200.7%2C%200.7)%3B%0A%09%09%09%09%09%09%09%09this.DrawShape(s%2C%20xf%2C%20color)%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09if%20(flags%20%26%20b2DebugDraw.e_jointBit)%20%7B%0A%09%09%09%09%09for%20(j%20%3D%20this.m_jointList%3B%0A%09%09%09%09%09%09j%3B%20j%20%3D%20j.m_next)%20%7B%0A%09%09%09%09%09%09this.DrawJoint(j)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09if%20(flags%20%26%20b2DebugDraw.e_controllerBit)%20%7B%0A%09%09%09%09%09for%20(let%20c%20%3D%20this.m_controllerList%3B%20c%3B%20c%20%3D%20c.m_next)%20%7B%0A%09%09%09%09%09%09c.Draw(this.m_debugDraw)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09if%20(flags%20%26%20b2DebugDraw.e_pairBit)%20%7B%0A%09%09%09%09%09color.Set(0.3%2C%200.9%2C%200.9)%3B%0A%09%09%09%09%09for%20(let%20contact%20%3D%20this.m_contactManager.m_contactList%3B%20contact%3B%20contact%20%3D%20contact.GetNext())%20%7B%0A%09%09%09%09%09%09const%20fixtureA%20%3D%20contact.GetFixtureA()%3B%0A%09%09%09%09%09%09const%20fixtureB%20%3D%20contact.GetFixtureB()%3B%0A%09%09%09%09%09%09const%20cA%20%3D%20fixtureA.GetAABB().GetCenter()%3B%0A%09%09%09%09%09%09const%20cB%20%3D%20fixtureB.GetAABB().GetCenter()%3B%0A%09%09%09%09%09%09this.m_debugDraw.DrawSegment(cA%2C%20cB%2C%20color)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09if%20(flags%20%26%20b2DebugDraw.e_aabbBit)%20%7B%0A%09%09%09%09%09bp%20%3D%20this.m_contactManager.m_broadPhase%3B%0A%09%09%09%09%09vs%20%3D%20%5Bnew%20b2Vec2()%2C%20new%20b2Vec2()%2C%20new%20b2Vec2()%2C%20new%20b2Vec2()%5D%3B%0A%09%09%09%09%09for%20(b%20%3D%20this.m_bodyList%3B%0A%09%09%09%09%09%09b%3B%20b%20%3D%20b.GetNext())%20%7B%0A%09%09%09%09%09%09if%20(b.IsActive()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09for%20(f%20%3D%20b.GetFixtureList()%3B%0A%09%09%09%09%09%09%09f%3B%20f%20%3D%20f.GetNext())%20%7B%0A%09%09%09%09%09%09%09const%20aabb%20%3D%20bp.GetFatAABB(f.m_proxy)%3B%0A%09%09%09%09%09%09%09vs%5B0%5D.Set(aabb.lowerBound.x%2C%20aabb.lowerBound.y)%3B%0A%09%09%09%09%09%09%09vs%5B1%5D.Set(aabb.upperBound.x%2C%20aabb.lowerBound.y)%3B%0A%09%09%09%09%09%09%09vs%5B2%5D.Set(aabb.upperBound.x%2C%20aabb.upperBound.y)%3B%0A%09%09%09%09%09%09%09vs%5B3%5D.Set(aabb.lowerBound.x%2C%20aabb.upperBound.y)%3B%0A%09%09%09%09%09%09%09this.m_debugDraw.DrawPolygon(vs%2C%204%2C%20color)%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09if%20(flags%20%26%20b2DebugDraw.e_centerOfMassBit)%20%7B%0A%09%09%09%09%09for%20(b%20%3D%20this.m_bodyList%3B%0A%09%09%09%09%09%09b%3B%20b%20%3D%20b.m_next)%20%7B%0A%09%09%09%09%09%09xf%20%3D%20b2World.s_xf%3B%0A%09%09%09%09%09%09xf.R%20%3D%20b.m_xf.R%3B%0A%09%09%09%09%09%09xf.position%20%3D%20b.GetWorldCenter()%3B%0A%09%09%09%09%09%09this.m_debugDraw.DrawTransform(xf)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09QueryAABB(callback%2C%20aabb)%20%7B%0A%09%09%09%09const%20__this%20%3D%20this%3B%0A%09%09%09%09const%20broadPhase%20%3D%20__this.m_contactManager.m_broadPhase%3B%0A%0A%09%09%09%09function%20WorldQueryWrapper(proxy)%20%7B%0A%09%09%09%09%09return%20callback(broadPhase.GetUserData(proxy))%3B%0A%09%09%09%09%7D%0A%09%09%09%09broadPhase.Query(WorldQueryWrapper%2C%20aabb)%3B%0A%09%09%09%7D%0A%0A%09%09%09QueryShape(callback%2C%20shape%2C%20transform)%20%7B%0A%09%09%09%09const%20__this%20%3D%20this%3B%0A%09%09%09%09if%20(transform%20%3D%3D%3D%20undefined)%20transform%20%3D%20null%3B%0A%09%09%09%09if%20(transform%20%3D%3D%20null)%20%7B%0A%09%09%09%09%09transform%20%3D%20new%20b2Transform()%3B%0A%09%09%09%09%09transform.SetIdentity()%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20broadPhase%20%3D%20__this.m_contactManager.m_broadPhase%3B%0A%0A%09%09%09%09function%20WorldQueryWrapper(proxy)%20%7B%0A%09%09%09%09%09const%20fixture%20%3D%20(broadPhase.GetUserData(proxy)%20instanceof%20b2Fixture%20%3F%20broadPhase.GetUserData(proxy)%20%3A%20null)%3B%0A%09%09%09%09%09if%20(b2Shape.TestOverlap(shape%2C%20transform%2C%20fixture.GetShape()%2C%20fixture.GetBody().GetTransform()))%20return%20callback(fixture)%3B%0A%09%09%09%09%09return%20true%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20aabb%20%3D%20new%20b2AABB()%3B%0A%09%09%09%09shape.ComputeAABB(aabb%2C%20transform)%3B%0A%09%09%09%09broadPhase.Query(WorldQueryWrapper%2C%20aabb)%3B%0A%09%09%09%7D%0A%0A%09%09%09QueryPoint(callback%2C%20p)%20%7B%0A%09%09%09%09const%20__this%20%3D%20this%3B%0A%09%09%09%09const%20broadPhase%20%3D%20__this.m_contactManager.m_broadPhase%3B%0A%0A%09%09%09%09function%20WorldQueryWrapper(proxy)%20%7B%0A%09%09%09%09%09const%20fixture%20%3D%20(broadPhase.GetUserData(proxy)%20instanceof%20b2Fixture%20%3F%20broadPhase.GetUserData(proxy)%20%3A%20null)%3B%0A%09%09%09%09%09if%20(fixture.TestPoint(p))%20return%20callback(fixture)%3B%0A%09%09%09%09%09return%20true%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20aabb%20%3D%20new%20b2AABB()%3B%0A%09%09%09%09aabb.lowerBound.Set(p.x%20-%20b2Settings.b2_linearSlop%2C%20p.y%20-%20b2Settings.b2_linearSlop)%3B%0A%09%09%09%09aabb.upperBound.Set(p.x%20%2B%20b2Settings.b2_linearSlop%2C%20p.y%20%2B%20b2Settings.b2_linearSlop)%3B%0A%09%09%09%09broadPhase.Query(WorldQueryWrapper%2C%20aabb)%3B%0A%09%09%09%7D%0A%0A%09%09%09RayCast(callback%2C%20point1%2C%20point2)%20%7B%0A%09%09%09%09const%20__this%20%3D%20this%3B%0A%09%09%09%09const%20broadPhase%20%3D%20__this.m_contactManager.m_broadPhase%3B%0A%09%09%09%09const%20output%20%3D%20new%20b2RayCastOutput()%3B%0A%0A%09%09%09%09function%20RayCastWrapper(input%2C%20proxy)%20%7B%0A%09%09%09%09%09const%20userData%20%3D%20broadPhase.GetUserData(proxy)%3B%0A%09%09%09%09%09const%20fixture%20%3D%20(userData%20instanceof%20b2Fixture%20%3F%20userData%20%3A%20null)%3B%0A%09%09%09%09%09const%20hit%20%3D%20fixture.RayCast(output%2C%20input)%3B%0A%09%09%09%09%09if%20(hit)%20%7B%0A%09%09%09%09%09%09const%20fraction%20%3D%20output.fraction%3B%0A%09%09%09%09%09%09const%20point%20%3D%20new%20b2Vec2((1.0%20-%20fraction)%20*%20point1.x%20%2B%20fraction%20*%20point2.x%2C%20(1.0%20-%20fraction)%20*%20point1.y%20%2B%20fraction%20*%20point2.y)%3B%0A%09%09%09%09%09%09return%20callback(fixture%2C%20point%2C%20output.normal%2C%20fraction)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09return%20input.maxFraction%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20input%20%3D%20new%20b2RayCastInput(point1%2C%20point2)%3B%0A%09%09%09%09broadPhase.RayCast(RayCastWrapper%2C%20input)%3B%0A%09%09%09%7D%0A%0A%09%09%09RayCastOne(point1%2C%20point2)%20%7B%0A%09%09%09%09const%20__this%20%3D%20this%3B%0A%09%09%09%09let%20result%3B%0A%0A%09%09%09%09function%20RayCastOneWrapper(fixture%2C%20point%2C%20normal%2C%20fraction)%20%7B%0A%09%09%09%09%09if%20(fraction%20%3D%3D%3D%20undefined)%20fraction%20%3D%200%3B%0A%09%09%09%09%09result%20%3D%20fixture%3B%0A%09%09%09%09%09return%20fraction%3B%0A%09%09%09%09%7D%0A%09%09%09%09__this.RayCast(RayCastOneWrapper%2C%20point1%2C%20point2)%3B%0A%09%09%09%09return%20result%3B%0A%09%09%09%7D%0A%0A%09%09%09RayCastAll(point1%2C%20point2)%20%7B%0A%09%09%09%09const%20__this%20%3D%20this%3B%0A%09%09%09%09const%20result%20%3D%20new%20Vector()%3B%0A%0A%09%09%09%09function%20RayCastAllWrapper(fixture%2C%20point%2C%20normal%2C%20fraction)%20%7B%0A%09%09%09%09%09if%20(fraction%20%3D%3D%3D%20undefined)%20fraction%20%3D%200%3B%0A%09%09%09%09%09result%5Bresult.length%5D%20%3D%20fixture%3B%0A%09%09%09%09%09return%201%3B%0A%09%09%09%09%7D%0A%09%09%09%09__this.RayCast(RayCastAllWrapper%2C%20point1%2C%20point2)%3B%0A%09%09%09%09return%20result%3B%0A%09%09%09%7D%0A%0A%09%09%09GetBodyList()%20%7B%0A%09%09%09%09return%20this.m_bodyList%3B%0A%09%09%09%7D%0A%0A%09%09%09GetJointList()%20%7B%0A%09%09%09%09return%20this.m_jointList%3B%0A%09%09%09%7D%0A%0A%09%09%09GetContactList()%20%7B%0A%09%09%09%09return%20this.m_contactList%3B%0A%09%09%09%7D%0A%0A%09%09%09IsLocked()%20%7B%0A%09%09%09%09return%20(this.m_flags%20%26%20b2World.e_locked)%20%3E%200%3B%0A%09%09%09%7D%0A%0A%09%09%09Solve(step)%20%7B%0A%09%09%09%09let%20b%3B%0A%09%09%09%09for%20(let%20controller%20%3D%20this.m_controllerList%3B%20controller%3B%20controller%20%3D%20controller.m_next)%20%7B%0A%09%09%09%09%09controller.Step(step)%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20island%20%3D%20this.m_island%3B%0A%09%09%09%09island.Initialize(this.m_bodyCount%2C%20this.m_contactCount%2C%20this.m_jointCount%2C%20null%2C%20this.m_contactManager.m_contactListener%2C%20this.m_contactSolver)%3B%0A%09%09%09%09for%20(b%20%3D%20this.m_bodyList%3B%0A%09%09%09%09%09b%3B%20b%20%3D%20b.m_next)%20%7B%0A%09%09%09%09%09b.m_flags%20%26%3D%20~b2Body.e_islandFlag%3B%0A%09%09%09%09%7D%0A%09%09%09%09for%20(let%20c%20%3D%20this.m_contactList%3B%20c%3B%20c%20%3D%20c.m_next)%20%7B%0A%09%09%09%09%09c.m_flags%20%26%3D%20~b2Contact.e_islandFlag%3B%0A%09%09%09%09%7D%0A%09%09%09%09for%20(let%20j%20%3D%20this.m_jointList%3B%20j%3B%20j%20%3D%20j.m_next)%20%7B%0A%09%09%09%09%09j.m_islandFlag%20%3D%20false%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20stackSize%20%3D%20parseInt(this.m_bodyCount)%3B%0A%09%09%09%09const%20stack%20%3D%20this.s_stack%3B%0A%09%09%09%09for%20(let%20seed%20%3D%20this.m_bodyList%3B%20seed%3B%20seed%20%3D%20seed.m_next)%20%7B%0A%09%09%09%09%09if%20(seed.m_flags%20%26%20b2Body.e_islandFlag)%20%7B%0A%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if%20(seed.IsAwake()%20%3D%3D%20false%20%7C%7C%20seed.IsActive()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if%20(seed.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09island.Clear()%3B%0A%09%09%09%09%09let%20stackCount%20%3D%200%3B%0A%09%09%09%09%09stack%5BstackCount%2B%2B%5D%20%3D%20seed%3B%0A%09%09%09%09%09seed.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%09%09%09%09%09while%20(stackCount%20%3E%200)%20%7B%0A%09%09%09%09%09%09b%20%3D%20stack%5B--stackCount%5D%3B%0A%09%09%09%09%09%09island.AddBody(b)%3B%0A%09%09%09%09%09%09if%20(b.IsAwake()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09%09b.SetAwake(true)%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09let%20other%3B%0A%09%09%09%09%09%09for%20(let%20ce%20%3D%20b.m_contactList%3B%20ce%3B%20ce%20%3D%20ce.next)%20%7B%0A%09%09%09%09%09%09%09if%20(ce.contact.m_flags%20%26%20b2Contact.e_islandFlag)%20%7B%0A%09%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09if%20(ce.contact.IsSensor()%20%3D%3D%20true%20%7C%7C%20ce.contact.IsEnabled()%20%3D%3D%20false%20%7C%7C%20ce.contact.IsTouching()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09island.AddContact(ce.contact)%3B%0A%09%09%09%09%09%09%09ce.contact.m_flags%20%7C%3D%20b2Contact.e_islandFlag%3B%0A%09%09%09%09%09%09%09other%20%3D%20ce.other%3B%0A%09%09%09%09%09%09%09if%20(other.m_flags%20%26%20b2Body.e_islandFlag)%20%7B%0A%09%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09stack%5BstackCount%2B%2B%5D%20%3D%20other%3B%0A%09%09%09%09%09%09%09other.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09for%20(let%20jn%20%3D%20b.m_jointList%3B%20jn%3B%20jn%20%3D%20jn.next)%20%7B%0A%09%09%09%09%09%09%09if%20(jn.joint.m_islandFlag%20%3D%3D%20true)%20%7B%0A%09%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09other%20%3D%20jn.other%3B%0A%09%09%09%09%09%09%09if%20(other.IsActive()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09island.AddJoint(jn.joint)%3B%0A%09%09%09%09%09%09%09jn.joint.m_islandFlag%20%3D%20true%3B%0A%09%09%09%09%09%09%09if%20(other.m_flags%20%26%20b2Body.e_islandFlag)%20%7B%0A%09%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09stack%5BstackCount%2B%2B%5D%20%3D%20other%3B%0A%09%09%09%09%09%09%09other.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%09island.Solve(step%2C%20this.m_gravity%2C%20this.m_allowSleep)%3B%0A%09%09%09%09%09for%20(var%20i%20%3D%200%3B%20i%20%3C%20island.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09%09b%20%3D%20island.m_bodies%5Bi%5D%3B%0A%09%09%09%09%09%09if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%09%09%09%09%09%09%09b.m_flags%20%26%3D%20~b2Body.e_islandFlag%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09i%20%3C%20stack.length%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09if%20(!stack%5Bi%5D)%20break%3B%0A%09%09%09%09%09stack%5Bi%5D%20%3D%20null%3B%0A%09%09%09%09%7D%0A%09%09%09%09for%20(b%20%3D%20this.m_bodyList%3B%0A%09%09%09%09%09b%3B%20b%20%3D%20b.m_next)%20%7B%0A%09%09%09%09%09if%20(b.IsAwake()%20%3D%3D%20false%20%7C%7C%20b.IsActive()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if%20(b.GetType()%20%3D%3D%20b2Body.b2_staticBody)%20%7B%0A%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09b.SynchronizeFixtures()%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_contactManager.FindNewContacts()%3B%0A%09%09%09%7D%0A%0A%09%09%09SolveTOI(step)%20%7B%0A%09%09%09%09let%20b%3B%0A%09%09%09%09let%20fA%3B%0A%09%09%09%09let%20fB%3B%0A%09%09%09%09let%20bA%3B%0A%09%09%09%09let%20bB%3B%0A%09%09%09%09let%20cEdge%3B%0A%09%09%09%09let%20j%3B%0A%09%09%09%09const%20island%20%3D%20this.m_island%3B%0A%09%09%09%09island.Initialize(this.m_bodyCount%2C%20b2Settings.b2_maxTOIContactsPerIsland%2C%20b2Settings.b2_maxTOIJointsPerIsland%2C%20null%2C%20this.m_contactManager.m_contactListener%2C%20this.m_contactSolver)%3B%0A%09%09%09%09const%20queue%20%3D%20b2World.s_queue%3B%0A%09%09%09%09for%20(b%20%3D%20this.m_bodyList%3B%0A%09%09%09%09%09b%3B%20b%20%3D%20b.m_next)%20%7B%0A%09%09%09%09%09b.m_flags%20%26%3D%20~b2Body.e_islandFlag%3B%0A%09%09%09%09%09b.m_sweep.t0%20%3D%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%09let%20c%3B%0A%09%09%09%09for%20(c%20%3D%20this.m_contactList%3B%0A%09%09%09%09%09c%3B%20c%20%3D%20c.m_next)%20%7B%0A%09%09%09%09%09c.m_flags%20%26%3D%20~(b2Contact.e_toiFlag%20%7C%20b2Contact.e_islandFlag)%3B%0A%09%09%09%09%7D%0A%09%09%09%09for%20(j%20%3D%20this.m_jointList%3B%0A%09%09%09%09%09j%3B%20j%20%3D%20j.m_next)%20%7B%0A%09%09%09%09%09j.m_islandFlag%20%3D%20false%3B%0A%09%09%09%09%7D%0A%09%09%09%09for%20(%3B%20%3B)%20%7B%0A%09%09%09%09%09let%20minContact%20%3D%20null%3B%0A%09%09%09%09%09let%20minTOI%20%3D%201.0%3B%0A%09%09%09%09%09for%20(c%20%3D%20this.m_contactList%3B%0A%09%09%09%09%09%09c%3B%20c%20%3D%20c.m_next)%20%7B%0A%09%09%09%09%09%09if%20(c.IsSensor()%20%3D%3D%20true%20%7C%7C%20c.IsEnabled()%20%3D%3D%20false%20%7C%7C%20c.IsContinuous()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09let%20toi%20%3D%201.0%3B%0A%09%09%09%09%09%09if%20(c.m_flags%20%26%20b2Contact.e_toiFlag)%20%7B%0A%09%09%09%09%09%09%09toi%20%3D%20c.m_toi%3B%0A%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09fA%20%3D%20c.m_fixtureA%3B%0A%09%09%09%09%09%09%09fB%20%3D%20c.m_fixtureB%3B%0A%09%09%09%09%09%09%09bA%20%3D%20fA.m_body%3B%0A%09%09%09%09%09%09%09bB%20%3D%20fB.m_body%3B%0A%09%09%09%09%09%09%09if%20((bA.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%20bA.IsAwake()%20%3D%3D%20false)%20%26%26%20(bB.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%20bB.IsAwake()%20%3D%3D%20false))%20%7B%0A%09%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09let%20t0%20%3D%20bA.m_sweep.t0%3B%0A%09%09%09%09%09%09%09if%20(bA.m_sweep.t0%20%3C%20bB.m_sweep.t0)%20%7B%0A%09%09%09%09%09%09%09%09t0%20%3D%20bB.m_sweep.t0%3B%0A%09%09%09%09%09%09%09%09bA.m_sweep.Advance(t0)%3B%0A%09%09%09%09%09%09%09%7D%20else%20if%20(bB.m_sweep.t0%20%3C%20bA.m_sweep.t0)%20%7B%0A%09%09%09%09%09%09%09%09t0%20%3D%20bA.m_sweep.t0%3B%0A%09%09%09%09%09%09%09%09bB.m_sweep.Advance(t0)%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09toi%20%3D%20c.ComputeTOI(bA.m_sweep%2C%20bB.m_sweep)%3B%0A%09%09%09%09%09%09%09b2Settings.b2Assert(toi%20%3E%3D%200.0%20%26%26%20toi%20%3C%3D%201.0)%3B%0A%09%09%09%09%09%09%09if%20(toi%20%3E%200.0%20%26%26%20toi%20%3C%201.0)%20%7B%0A%09%09%09%09%09%09%09%09toi%20%3D%20(1.0%20-%20toi)%20*%20t0%20%2B%20toi%3B%0A%09%09%09%09%09%09%09%09if%20(toi%20%3E%201)%20toi%20%3D%201%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09c.m_toi%20%3D%20toi%3B%0A%09%09%09%09%09%09%09c.m_flags%20%7C%3D%20b2Contact.e_toiFlag%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09if%20(Number.MIN_VALUE%20%3C%20toi%20%26%26%20toi%20%3C%20minTOI)%20%7B%0A%09%09%09%09%09%09%09minContact%20%3D%20c%3B%0A%09%09%09%09%09%09%09minTOI%20%3D%20toi%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if%20(minContact%20%3D%3D%20null%20%7C%7C%201.0%20-%20100.0%20*%20Number.MIN_VALUE%20%3C%20minTOI)%20%7B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09fA%20%3D%20minContact.m_fixtureA%3B%0A%09%09%09%09%09fB%20%3D%20minContact.m_fixtureB%3B%0A%09%09%09%09%09bA%20%3D%20fA.m_body%3B%0A%09%09%09%09%09bB%20%3D%20fB.m_body%3B%0A%09%09%09%09%09b2World.s_backupA.Set(bA.m_sweep)%3B%0A%09%09%09%09%09b2World.s_backupB.Set(bB.m_sweep)%3B%0A%09%09%09%09%09bA.Advance(minTOI)%3B%0A%09%09%09%09%09bB.Advance(minTOI)%3B%0A%09%09%09%09%09minContact.Update(this.m_contactManager.m_contactListener)%3B%0A%09%09%09%09%09minContact.m_flags%20%26%3D%20~b2Contact.e_toiFlag%3B%0A%09%09%09%09%09if%20(minContact.IsSensor()%20%3D%3D%20true%20%7C%7C%20minContact.IsEnabled()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09bA.m_sweep.Set(b2World.s_backupA)%3B%0A%09%09%09%09%09%09bB.m_sweep.Set(b2World.s_backupB)%3B%0A%09%09%09%09%09%09bA.SynchronizeTransform()%3B%0A%09%09%09%09%09%09bB.SynchronizeTransform()%3B%0A%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if%20(minContact.IsTouching()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09let%20seed%20%3D%20bA%3B%0A%09%09%09%09%09if%20(seed.GetType()%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%09%09%09%09%09%09seed%20%3D%20bB%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09island.Clear()%3B%0A%09%09%09%09%09let%20queueStart%20%3D%200%3B%0A%09%09%09%09%09let%20queueSize%20%3D%200%3B%0A%09%09%09%09%09queue%5BqueueStart%20%2B%20queueSize%2B%2B%5D%20%3D%20seed%3B%0A%09%09%09%09%09seed.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%09%09%09%09%09while%20(queueSize%20%3E%200)%20%7B%0A%09%09%09%09%09%09b%20%3D%20queue%5BqueueStart%2B%2B%5D%3B%0A%09%09%09%09%09%09--queueSize%3B%0A%09%09%09%09%09%09island.AddBody(b)%3B%0A%09%09%09%09%09%09if%20(b.IsAwake()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09%09b.SetAwake(true)%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09if%20(b.GetType()%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09for%20(cEdge%20%3D%20b.m_contactList%3B%0A%09%09%09%09%09%09%09cEdge%3B%20cEdge%20%3D%20cEdge.next)%20%7B%0A%09%09%09%09%09%09%09if%20(island.m_contactCount%20%3D%3D%20island.m_contactCapacity)%20%7B%0A%09%09%09%09%09%09%09%09break%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09if%20(cEdge.contact.m_flags%20%26%20b2Contact.e_islandFlag)%20%7B%0A%09%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09if%20(cEdge.contact.IsSensor()%20%3D%3D%20true%20%7C%7C%20cEdge.contact.IsEnabled()%20%3D%3D%20false%20%7C%7C%20cEdge.contact.IsTouching()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09island.AddContact(cEdge.contact)%3B%0A%09%09%09%09%09%09%09cEdge.contact.m_flags%20%7C%3D%20b2Contact.e_islandFlag%3B%0A%09%09%09%09%09%09%09var%20other%20%3D%20cEdge.other%3B%0A%09%09%09%09%09%09%09if%20(other.m_flags%20%26%20b2Body.e_islandFlag)%20%7B%0A%09%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09if%20(other.GetType()%20!%3D%20b2Body.b2_staticBody)%20%7B%0A%09%09%09%09%09%09%09%09other.Advance(minTOI)%3B%0A%09%09%09%09%09%09%09%09other.SetAwake(true)%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09queue%5BqueueStart%20%2B%20queueSize%5D%20%3D%20other%3B%0A%09%09%09%09%09%09%09%2B%2BqueueSize%3B%0A%09%09%09%09%09%09%09other.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09for%20(let%20jEdge%20%3D%20b.m_jointList%3B%20jEdge%3B%20jEdge%20%3D%20jEdge.next)%20%7B%0A%09%09%09%09%09%09%09if%20(island.m_jointCount%20%3D%3D%20island.m_jointCapacity)%20continue%3B%0A%09%09%09%09%09%09%09if%20(jEdge.joint.m_islandFlag%20%3D%3D%20true)%20continue%3B%0A%09%09%09%09%09%09%09other%20%3D%20jEdge.other%3B%0A%09%09%09%09%09%09%09if%20(other.IsActive()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09island.AddJoint(jEdge.joint)%3B%0A%09%09%09%09%09%09%09jEdge.joint.m_islandFlag%20%3D%20true%3B%0A%09%09%09%09%09%09%09if%20(other.m_flags%20%26%20b2Body.e_islandFlag)%20continue%3B%0A%09%09%09%09%09%09%09if%20(other.GetType()%20!%3D%20b2Body.b2_staticBody)%20%7B%0A%09%09%09%09%09%09%09%09other.Advance(minTOI)%3B%0A%09%09%09%09%09%09%09%09other.SetAwake(true)%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09queue%5BqueueStart%20%2B%20queueSize%5D%20%3D%20other%3B%0A%09%09%09%09%09%09%09%2B%2BqueueSize%3B%0A%09%09%09%09%09%09%09other.m_flags%20%7C%3D%20b2Body.e_islandFlag%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%09const%20subStep%20%3D%20b2World.s_timestep%3B%0A%09%09%09%09%09subStep.warmStarting%20%3D%20false%3B%0A%09%09%09%09%09subStep.dt%20%3D%20(1.0%20-%20minTOI)%20*%20step.dt%3B%0A%09%09%09%09%09subStep.inv_dt%20%3D%201.0%20%2F%20subStep.dt%3B%0A%09%09%09%09%09subStep.dtRatio%20%3D%200.0%3B%0A%09%09%09%09%09subStep.velocityIterations%20%3D%20step.velocityIterations%3B%0A%09%09%09%09%09subStep.positionIterations%20%3D%20step.positionIterations%3B%0A%09%09%09%09%09island.SolveTOI(subStep)%3B%0A%09%09%09%09%09let%20i%20%3D%200%3B%0A%09%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09%09i%20%3C%20island.m_bodyCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09%09b%20%3D%20island.m_bodies%5Bi%5D%3B%0A%09%09%09%09%09%09b.m_flags%20%26%3D%20~b2Body.e_islandFlag%3B%0A%09%09%09%09%09%09if%20(b.IsAwake()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09if%20(b.GetType()%20!%3D%20b2Body.b2_dynamicBody)%20%7B%0A%09%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09b.SynchronizeFixtures()%3B%0A%09%09%09%09%09%09for%20(cEdge%20%3D%20b.m_contactList%3B%0A%09%09%09%09%09%09%09cEdge%3B%20cEdge%20%3D%20cEdge.next)%20%7B%0A%09%09%09%09%09%09%09cEdge.contact.m_flags%20%26%3D%20~b2Contact.e_toiFlag%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09%09i%20%3C%20island.m_contactCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09%09c%20%3D%20island.m_contacts%5Bi%5D%3B%0A%09%09%09%09%09%09c.m_flags%20%26%3D%20~(b2Contact.e_toiFlag%20%7C%20b2Contact.e_islandFlag)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09%09i%20%3C%20island.m_jointCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09%09j%20%3D%20island.m_joints%5Bi%5D%3B%0A%09%09%09%09%09%09j.m_islandFlag%20%3D%20false%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09this.m_contactManager.FindNewContacts()%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09DrawJoint(joint)%20%7B%0A%09%09%09%09const%20b1%20%3D%20joint.GetBodyA()%3B%0A%09%09%09%09const%20b2%20%3D%20joint.GetBodyB()%3B%0A%09%09%09%09const%20xf1%20%3D%20b1.m_xf%3B%0A%09%09%09%09const%20xf2%20%3D%20b2.m_xf%3B%0A%09%09%09%09const%20x1%20%3D%20xf1.position%3B%0A%09%09%09%09const%20x2%20%3D%20xf2.position%3B%0A%09%09%09%09const%20p1%20%3D%20joint.GetAnchorA()%3B%0A%09%09%09%09const%20p2%20%3D%20joint.GetAnchorB()%3B%0A%09%09%09%09const%20color%20%3D%20b2World.s_jointColor%3B%0A%09%09%09%09switch%20(joint.m_type)%20%7B%0A%09%09%09%09%09case%20b2Joint.e_distanceJoint%3A%0A%09%09%09%09%09%09this.m_debugDraw.DrawSegment(p1%2C%20p2%2C%20color)%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20b2Joint.e_pulleyJoint%3A%0A%09%09%09%09%09%09%7B%0A%09%09%09%09%09%09%09const%20pulley%20%3D%20((joint%20instanceof%20b2PulleyJoint%20%3F%20joint%20%3A%20null))%3B%0A%09%09%09%09%09%09%09const%20s1%20%3D%20pulley.GetGroundAnchorA()%3B%0A%09%09%09%09%09%09%09const%20s2%20%3D%20pulley.GetGroundAnchorB()%3B%0A%09%09%09%09%09%09%09this.m_debugDraw.DrawSegment(s1%2C%20p1%2C%20color)%3B%0A%09%09%09%09%09%09%09this.m_debugDraw.DrawSegment(s2%2C%20p2%2C%20color)%3B%0A%09%09%09%09%09%09%09this.m_debugDraw.DrawSegment(s1%2C%20s2%2C%20color)%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20b2Joint.e_mouseJoint%3A%0A%09%09%09%09%09%09this.m_debugDraw.DrawSegment(p1%2C%20p2%2C%20color)%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09default%3A%0A%09%09%09%09%09%09if%20(b1%20!%3D%20this.m_groundBody)%20this.m_debugDraw.DrawSegment(x1%2C%20p1%2C%20color)%3B%0A%09%09%09%09%09%09this.m_debugDraw.DrawSegment(p1%2C%20p2%2C%20color)%3B%0A%09%09%09%09%09%09if%20(b2%20!%3D%20this.m_groundBody)%20this.m_debugDraw.DrawSegment(x2%2C%20p2%2C%20color)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09DrawShape(shape%2C%20xf%2C%20color)%20%7B%0A%09%09%09%09switch%20(shape.m_type)%20%7B%0A%09%09%09%09%09case%20b2Shape.e_circleShape%3A%0A%09%09%09%09%09%09%7B%0A%09%09%09%09%09%09%09const%20circle%20%3D%20((shape%20instanceof%20b2CircleShape%20%3F%20shape%20%3A%20null))%3B%0A%09%09%09%09%09%09%09const%20center%20%3D%20b2Math.MulX(xf%2C%20circle.m_p)%3B%0A%09%09%09%09%09%09%09const%20radius%20%3D%20circle.m_radius%3B%0A%09%09%09%09%09%09%09const%20axis%20%3D%20xf.R.col1%3B%0A%09%09%09%09%09%09%09this.m_debugDraw.DrawSolidCircle(center%2C%20radius%2C%20axis%2C%20color)%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20b2Shape.e_polygonShape%3A%0A%09%09%09%09%09%09%7B%0A%09%09%09%09%09%09%09let%20i%20%3D%200%3B%0A%09%09%09%09%09%09%09const%20poly%20%3D%20((shape%20instanceof%20b2PolygonShape%20%3F%20shape%20%3A%20null))%3B%0A%09%09%09%09%09%09%09const%20vertexCount%20%3D%20parseInt(poly.GetVertexCount())%3B%0A%09%09%09%09%09%09%09const%20localVertices%20%3D%20poly.GetVertices()%3B%0A%09%09%09%09%09%09%09const%20vertices%20%3D%20new%20Vector(vertexCount)%3B%0A%09%09%09%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09%09%09%09i%20%3C%20vertexCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09%09%09%09vertices%5Bi%5D%20%3D%20b2Math.MulX(xf%2C%20localVertices%5Bi%5D)%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09this.m_debugDraw.DrawSolidPolygon(vertices%2C%20vertexCount%2C%20color)%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20b2Shape.e_edgeShape%3A%0A%09%09%09%09%09%09%7B%0A%09%09%09%09%09%09%09const%20edge%20%3D%20(shape%20instanceof%20b2EdgeShape%20%3F%20shape%20%3A%20null)%3B%0A%09%09%09%09%09%09%09this.m_debugDraw.DrawSegment(b2Math.MulX(xf%2C%20edge.GetVertex1())%2C%20b2Math.MulX(xf%2C%20edge.GetVertex2())%2C%20color)%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.b2World%20%3D%20b2World%3B%0A%0A%09%09class%20b2Contact%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2Contact)%20this.b2Contact.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2Contact()%20%7B%0A%09%09%09%09this.m_nodeA%20%3D%20new%20b2ContactEdge()%3B%0A%09%09%09%09this.m_nodeB%20%3D%20new%20b2ContactEdge()%3B%0A%09%09%09%09this.m_manifold%20%3D%20new%20b2Manifold()%3B%0A%09%09%09%09this.m_oldManifold%20%3D%20new%20b2Manifold()%3B%0A%09%09%09%7D%0A%0A%09%09%09GetManifold()%20%7B%0A%09%09%09%09return%20this.m_manifold%3B%0A%09%09%09%7D%0A%0A%09%09%09GetWorldManifold(worldManifold)%20%7B%0A%09%09%09%09const%20bodyA%20%3D%20this.m_fixtureA.GetBody()%3B%0A%09%09%09%09const%20bodyB%20%3D%20this.m_fixtureB.GetBody()%3B%0A%09%09%09%09const%20shapeA%20%3D%20this.m_fixtureA.GetShape()%3B%0A%09%09%09%09const%20shapeB%20%3D%20this.m_fixtureB.GetShape()%3B%0A%09%09%09%09worldManifold.Initialize(this.m_manifold%2C%20bodyA.GetTransform()%2C%20shapeA.m_radius%2C%20bodyB.GetTransform()%2C%20shapeB.m_radius)%3B%0A%09%09%09%7D%0A%0A%09%09%09IsTouching()%20%7B%0A%09%09%09%09return%20(this.m_flags%20%26%20b2Contact.e_touchingFlag)%20%3D%3D%20b2Contact.e_touchingFlag%3B%0A%09%09%09%7D%0A%0A%09%09%09IsContinuous()%20%7B%0A%09%09%09%09return%20(this.m_flags%20%26%20b2Contact.e_continuousFlag)%20%3D%3D%20b2Contact.e_continuousFlag%3B%0A%09%09%09%7D%0A%0A%09%09%09SetSensor(sensor)%20%7B%0A%09%09%09%09if%20(sensor)%20%7B%0A%09%09%09%09%09this.m_flags%20%7C%3D%20b2Contact.e_sensorFlag%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_flags%20%26%3D%20~b2Contact.e_sensorFlag%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09IsSensor()%20%7B%0A%09%09%09%09return%20(this.m_flags%20%26%20b2Contact.e_sensorFlag)%20%3D%3D%20b2Contact.e_sensorFlag%3B%0A%09%09%09%7D%0A%0A%09%09%09SetEnabled(flag)%20%7B%0A%09%09%09%09if%20(flag)%20%7B%0A%09%09%09%09%09this.m_flags%20%7C%3D%20b2Contact.e_enabledFlag%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_flags%20%26%3D%20~b2Contact.e_enabledFlag%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09IsEnabled()%20%7B%0A%09%09%09%09return%20(this.m_flags%20%26%20b2Contact.e_enabledFlag)%20%3D%3D%20b2Contact.e_enabledFlag%3B%0A%09%09%09%7D%0A%0A%09%09%09GetNext()%20%7B%0A%09%09%09%09return%20this.m_next%3B%0A%09%09%09%7D%0A%0A%09%09%09GetFixtureA()%20%7B%0A%09%09%09%09return%20this.m_fixtureA%3B%0A%09%09%09%7D%0A%0A%09%09%09GetFixtureB()%20%7B%0A%09%09%09%09return%20this.m_fixtureB%3B%0A%09%09%09%7D%0A%0A%09%09%09FlagForFiltering()%20%7B%0A%09%09%09%09this.m_flags%20%7C%3D%20b2Contact.e_filterFlag%3B%0A%09%09%09%7D%0A%0A%09%09%09b2Contact()%20%7B%20%7D%0A%0A%09%09%09Reset(fixtureA%2C%20fixtureB)%20%7B%0A%09%09%09%09if%20(fixtureA%20%3D%3D%3D%20undefined)%20fixtureA%20%3D%20null%3B%0A%09%09%09%09if%20(fixtureB%20%3D%3D%3D%20undefined)%20fixtureB%20%3D%20null%3B%0A%09%09%09%09this.m_flags%20%3D%20b2Contact.e_enabledFlag%3B%0A%09%09%09%09if%20(!fixtureA%20%7C%7C%20!fixtureB)%20%7B%0A%09%09%09%09%09this.m_fixtureA%20%3D%20null%3B%0A%09%09%09%09%09this.m_fixtureB%20%3D%20null%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(fixtureA.IsSensor()%20%7C%7C%20fixtureB.IsSensor())%20%7B%0A%09%09%09%09%09this.m_flags%20%7C%3D%20b2Contact.e_sensorFlag%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20bodyA%20%3D%20fixtureA.GetBody()%3B%0A%09%09%09%09const%20bodyB%20%3D%20fixtureB.GetBody()%3B%0A%09%09%09%09if%20(bodyA.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%20bodyA.IsBullet()%20%7C%7C%20bodyB.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%20bodyB.IsBullet())%20%7B%0A%09%09%09%09%09this.m_flags%20%7C%3D%20b2Contact.e_continuousFlag%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_fixtureA%20%3D%20fixtureA%3B%0A%09%09%09%09this.m_fixtureB%20%3D%20fixtureB%3B%0A%09%09%09%09this.m_manifold.m_pointCount%20%3D%200%3B%0A%09%09%09%09this.m_prev%20%3D%20null%3B%0A%09%09%09%09this.m_next%20%3D%20null%3B%0A%09%09%09%09this.m_nodeA.contact%20%3D%20null%3B%0A%09%09%09%09this.m_nodeA.prev%20%3D%20null%3B%0A%09%09%09%09this.m_nodeA.next%20%3D%20null%3B%0A%09%09%09%09this.m_nodeA.other%20%3D%20null%3B%0A%09%09%09%09this.m_nodeB.contact%20%3D%20null%3B%0A%09%09%09%09this.m_nodeB.prev%20%3D%20null%3B%0A%09%09%09%09this.m_nodeB.next%20%3D%20null%3B%0A%09%09%09%09this.m_nodeB.other%20%3D%20null%3B%0A%09%09%09%7D%0A%0A%09%09%09Update(listener)%20%7B%0A%09%09%09%09const%20tManifold%20%3D%20this.m_oldManifold%3B%0A%09%09%09%09this.m_oldManifold%20%3D%20this.m_manifold%3B%0A%09%09%09%09this.m_manifold%20%3D%20tManifold%3B%0A%09%09%09%09this.m_flags%20%7C%3D%20b2Contact.e_enabledFlag%3B%0A%09%09%09%09let%20touching%20%3D%20false%3B%0A%09%09%09%09const%20wasTouching%20%3D%20(this.m_flags%20%26%20b2Contact.e_touchingFlag)%20%3D%3D%20b2Contact.e_touchingFlag%3B%0A%09%09%09%09const%20bodyA%20%3D%20this.m_fixtureA.m_body%3B%0A%09%09%09%09const%20bodyB%20%3D%20this.m_fixtureB.m_body%3B%0A%09%09%09%09const%20aabbOverlap%20%3D%20this.m_fixtureA.m_aabb.TestOverlap(this.m_fixtureB.m_aabb)%3B%0A%09%09%09%09if%20(this.m_flags%20%26%20b2Contact.e_sensorFlag)%20%7B%0A%09%09%09%09%09if%20(aabbOverlap)%20%7B%0A%09%09%09%09%09%09const%20shapeA%20%3D%20this.m_fixtureA.GetShape()%3B%0A%09%09%09%09%09%09const%20shapeB%20%3D%20this.m_fixtureB.GetShape()%3B%0A%09%09%09%09%09%09const%20xfA%20%3D%20bodyA.GetTransform()%3B%0A%09%09%09%09%09%09const%20xfB%20%3D%20bodyB.GetTransform()%3B%0A%09%09%09%09%09%09touching%20%3D%20b2Shape.TestOverlap(shapeA%2C%20xfA%2C%20shapeB%2C%20xfB)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09this.m_manifold.m_pointCount%20%3D%200%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09if%20(bodyA.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%20bodyA.IsBullet()%20%7C%7C%20bodyB.GetType()%20!%3D%20b2Body.b2_dynamicBody%20%7C%7C%20bodyB.IsBullet())%20%7B%0A%09%09%09%09%09%09this.m_flags%20%7C%3D%20b2Contact.e_continuousFlag%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09this.m_flags%20%26%3D%20~b2Contact.e_continuousFlag%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if%20(aabbOverlap)%20%7B%0A%09%09%09%09%09%09this.Evaluate()%3B%0A%09%09%09%09%09%09touching%20%3D%20this.m_manifold.m_pointCount%20%3E%200%3B%0A%09%09%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_manifold.m_pointCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09%09%09const%20mp2%20%3D%20this.m_manifold.m_points%5Bi%5D%3B%0A%09%09%09%09%09%09%09mp2.m_normalImpulse%20%3D%200.0%3B%0A%09%09%09%09%09%09%09mp2.m_tangentImpulse%20%3D%200.0%3B%0A%09%09%09%09%09%09%09const%20id2%20%3D%20mp2.m_id%3B%0A%09%09%09%09%09%09%09for%20(let%20j%20%3D%200%3B%20j%20%3C%20this.m_oldManifold.m_pointCount%3B%20%2B%2Bj)%20%7B%0A%09%09%09%09%09%09%09%09const%20mp1%20%3D%20this.m_oldManifold.m_points%5Bj%5D%3B%0A%09%09%09%09%09%09%09%09if%20(mp1.m_id.key%20%3D%3D%20id2.key)%20%7B%0A%09%09%09%09%09%09%09%09%09mp2.m_normalImpulse%20%3D%20mp1.m_normalImpulse%3B%0A%09%09%09%09%09%09%09%09%09mp2.m_tangentImpulse%20%3D%20mp1.m_tangentImpulse%3B%0A%09%09%09%09%09%09%09%09%09break%3B%0A%09%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09this.m_manifold.m_pointCount%20%3D%200%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if%20(touching%20!%3D%20wasTouching)%20%7B%0A%09%09%09%09%09%09bodyA.SetAwake(true)%3B%0A%09%09%09%09%09%09bodyB.SetAwake(true)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09if%20(touching)%20%7B%0A%09%09%09%09%09this.m_flags%20%7C%3D%20b2Contact.e_touchingFlag%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_flags%20%26%3D%20~b2Contact.e_touchingFlag%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(wasTouching%20%3D%3D%20false%20%26%26%20touching%20%3D%3D%20true)%20%7B%0A%09%09%09%09%09listener.BeginContact(this)%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(wasTouching%20%3D%3D%20true%20%26%26%20touching%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09listener.EndContact(this)%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20((this.m_flags%20%26%20b2Contact.e_sensorFlag)%20%3D%3D%200)%20%7B%0A%09%09%09%09%09listener.PreSolve(this%2C%20this.m_oldManifold)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09Evaluate()%20%7B%20%7D%0A%0A%09%09%09ComputeTOI(sweepA%2C%20sweepB)%20%7B%0A%09%09%09%09b2Contact.s_input.proxyA.Set(this.m_fixtureA.GetShape())%3B%0A%09%09%09%09b2Contact.s_input.proxyB.Set(this.m_fixtureB.GetShape())%3B%0A%09%09%09%09b2Contact.s_input.sweepA%20%3D%20sweepA%3B%0A%09%09%09%09b2Contact.s_input.sweepB%20%3D%20sweepB%3B%0A%09%09%09%09b2Contact.s_input.tolerance%20%3D%20b2Settings.b2_linearSlop%3B%0A%09%09%09%09return%20b2TimeOfImpact.TimeOfImpact(b2Contact.s_input)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Contacts.b2Contact%20%3D%20b2Contact%3B%0A%0A%09%09class%20b2CircleContact%20extends%20b2Contact%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2CircleContact.b2CircleContact.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2CircleContact()%20%7B%0A%09%09%09%09Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09Reset(fixtureA%2C%20fixtureB)%20%7B%0A%09%09%09%09this.__super.Reset.call(this%2C%20fixtureA%2C%20fixtureB)%3B%0A%09%09%09%7D%0A%0A%09%09%09Evaluate()%20%7B%0A%09%09%09%09const%20bA%20%3D%20this.m_fixtureA.GetBody()%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_fixtureB.GetBody()%3B%0A%09%09%09%09b2Collision.CollideCircles(this.m_manifold%2C%20(this.m_fixtureA.GetShape()%20instanceof%20b2CircleShape%20%3F%20this.m_fixtureA.GetShape()%20%3A%20null)%2C%20bA.m_xf%2C%20(this.m_fixtureB.GetShape()%20instanceof%20b2CircleShape%20%3F%20this.m_fixtureB.GetShape()%20%3A%20null)%2C%20bB.m_xf)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Contacts.b2CircleContact%20%3D%20b2CircleContact%3B%0A%0A%09%09class%20b2ContactConstraint%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2ContactConstraint.b2ContactConstraint.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2ContactConstraint)%20this.b2ContactConstraint.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2ContactConstraint()%20%7B%0A%09%09%09%09this.localPlaneNormal%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.localPoint%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.normal%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.normalMass%20%3D%20new%20b2Mat22()%3B%0A%09%09%09%09this.K%20%3D%20new%20b2Mat22()%3B%0A%09%09%09%7D%0A%0A%09%09%09b2ContactConstraint()%20%7B%0A%09%09%09%09this.points%20%3D%20new%20Vector(b2Settings.b2_maxManifoldPoints)%3B%0A%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09this.points%5Bi%5D%20%3D%20new%20b2ContactConstraintPoint()%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Contacts.b2ContactConstraint%20%3D%20b2ContactConstraint%3B%0A%0A%09%09class%20b2ContactConstraintPoint%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2ContactConstraintPoint.b2ContactConstraintPoint.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2ContactConstraintPoint()%20%7B%0A%09%09%09%09this.localPoint%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.rA%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.rB%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Contacts.b2ContactConstraintPoint%20%3D%20b2ContactConstraintPoint%3B%0A%0A%09%09function%20b2ContactEdge()%20%7B%0A%09%09%09b2ContactEdge.b2ContactEdge.apply(this%2C%20arguments)%3B%0A%09%09%7D%0A%09%09Box2D.Dynamics.Contacts.b2ContactEdge%20%3D%20b2ContactEdge%3B%0A%0A%09%09class%20b2ContactFactory%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2ContactFactory.b2ContactFactory.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2ContactFactory)%20this.b2ContactFactory.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09b2ContactFactory(allocator)%20%7B%0A%09%09%09%09this.m_allocator%20%3D%20allocator%3B%0A%09%09%09%09this.InitializeRegisters()%3B%0A%09%09%09%7D%0A%0A%09%09%09AddType(createFcn%2C%20destroyFcn%2C%20type1%2C%20type2)%20%7B%0A%09%09%09%09if%20(type1%20%3D%3D%3D%20undefined)%20type1%20%3D%200%3B%0A%09%09%09%09if%20(type2%20%3D%3D%3D%20undefined)%20type2%20%3D%200%3B%0A%09%09%09%09this.m_registers%5Btype1%5D%5Btype2%5D.createFcn%20%3D%20createFcn%3B%0A%09%09%09%09this.m_registers%5Btype1%5D%5Btype2%5D.destroyFcn%20%3D%20destroyFcn%3B%0A%09%09%09%09this.m_registers%5Btype1%5D%5Btype2%5D.primary%20%3D%20true%3B%0A%09%09%09%09if%20(type1%20!%3D%20type2)%20%7B%0A%09%09%09%09%09this.m_registers%5Btype2%5D%5Btype1%5D.createFcn%20%3D%20createFcn%3B%0A%09%09%09%09%09this.m_registers%5Btype2%5D%5Btype1%5D.destroyFcn%20%3D%20destroyFcn%3B%0A%09%09%09%09%09this.m_registers%5Btype2%5D%5Btype1%5D.primary%20%3D%20false%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09InitializeRegisters()%20%7B%0A%09%09%09%09this.m_registers%20%3D%20new%20Vector(b2Shape.e_shapeTypeCount)%3B%0A%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20b2Shape.e_shapeTypeCount%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09this.m_registers%5Bi%5D%20%3D%20new%20Vector(b2Shape.e_shapeTypeCount)%3B%0A%09%09%09%09%09for%20(let%20j%20%3D%200%3B%20j%20%3C%20b2Shape.e_shapeTypeCount%3B%20j%2B%2B)%20%7B%0A%09%09%09%09%09%09this.m_registers%5Bi%5D%5Bj%5D%20%3D%20new%20b2ContactRegister()%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09this.AddType(b2CircleContact.Create%2C%20b2CircleContact.Destroy%2C%20b2Shape.e_circleShape%2C%20b2Shape.e_circleShape)%3B%0A%09%09%09%09this.AddType(b2PolyAndCircleContact.Create%2C%20b2PolyAndCircleContact.Destroy%2C%20b2Shape.e_polygonShape%2C%20b2Shape.e_circleShape)%3B%0A%09%09%09%09this.AddType(b2PolygonContact.Create%2C%20b2PolygonContact.Destroy%2C%20b2Shape.e_polygonShape%2C%20b2Shape.e_polygonShape)%3B%0A%09%09%09%09this.AddType(b2EdgeAndCircleContact.Create%2C%20b2EdgeAndCircleContact.Destroy%2C%20b2Shape.e_edgeShape%2C%20b2Shape.e_circleShape)%3B%0A%09%09%09%09this.AddType(b2PolyAndEdgeContact.Create%2C%20b2PolyAndEdgeContact.Destroy%2C%20b2Shape.e_polygonShape%2C%20b2Shape.e_edgeShape)%3B%0A%09%09%09%7D%0A%0A%09%09%09Create(fixtureA%2C%20fixtureB)%20%7B%0A%09%09%09%09const%20type1%20%3D%20parseInt(fixtureA.GetType())%3B%0A%09%09%09%09const%20type2%20%3D%20parseInt(fixtureB.GetType())%3B%0A%09%09%09%09const%20reg%20%3D%20this.m_registers%5Btype1%5D%5Btype2%5D%3B%0A%09%09%09%09let%20c%3B%0A%09%09%09%09if%20(reg.pool)%20%7B%0A%09%09%09%09%09c%20%3D%20reg.pool%3B%0A%09%09%09%09%09reg.pool%20%3D%20c.m_next%3B%0A%09%09%09%09%09reg.poolCount--%3B%0A%09%09%09%09%09c.Reset(fixtureA%2C%20fixtureB)%3B%0A%09%09%09%09%09return%20c%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20createFcn%20%3D%20reg.createFcn%3B%0A%09%09%09%09if%20(createFcn%20!%3D%20null)%20%7B%0A%09%09%09%09%09if%20(reg.primary)%20%7B%0A%09%09%09%09%09%09c%20%3D%20createFcn(this.m_allocator)%3B%0A%09%09%09%09%09%09c.Reset(fixtureA%2C%20fixtureB)%3B%0A%09%09%09%09%09%09return%20c%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09c%20%3D%20createFcn(this.m_allocator)%3B%0A%09%09%09%09%09%09c.Reset(fixtureB%2C%20fixtureA)%3B%0A%09%09%09%09%09%09return%20c%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09return%20null%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09Destroy(contact)%20%7B%0A%09%09%09%09if%20(contact.m_manifold.m_pointCount%20%3E%200)%20%7B%0A%09%09%09%09%09contact.m_fixtureA.m_body.SetAwake(true)%3B%0A%09%09%09%09%09contact.m_fixtureB.m_body.SetAwake(true)%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20type1%20%3D%20parseInt(contact.m_fixtureA.GetType())%3B%0A%09%09%09%09const%20type2%20%3D%20parseInt(contact.m_fixtureB.GetType())%3B%0A%09%09%09%09const%20reg%20%3D%20this.m_registers%5Btype1%5D%5Btype2%5D%3B%0A%09%09%09%09if%20(true)%20%7B%0A%09%09%09%09%09reg.poolCount%2B%2B%3B%0A%09%09%09%09%09contact.m_next%20%3D%20reg.pool%3B%0A%09%09%09%09%09reg.pool%20%3D%20contact%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20destroyFcn%20%3D%20reg.destroyFcn%3B%0A%09%09%09%09destroyFcn(contact%2C%20this.m_allocator)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Contacts.b2ContactFactory%20%3D%20b2ContactFactory%3B%0A%0A%09%09function%20b2ContactRegister()%20%7B%0A%09%09%09b2ContactRegister.b2ContactRegister.apply(this%2C%20arguments)%3B%0A%09%09%7D%0A%09%09Box2D.Dynamics.Contacts.b2ContactRegister%20%3D%20b2ContactRegister%3B%0A%0A%09%09class%20b2ContactResult%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2ContactResult.b2ContactResult.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2ContactResult()%20%7B%0A%09%09%09%09this.position%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.normal%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.id%20%3D%20new%20b2ContactID()%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Contacts.b2ContactResult%20%3D%20b2ContactResult%3B%0A%0A%09%09class%20b2ContactSolver%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2ContactSolver.b2ContactSolver.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2ContactSolver)%20this.b2ContactSolver.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2ContactSolver()%20%7B%0A%09%09%09%09this.m_step%20%3D%20new%20b2TimeStep()%3B%0A%09%09%09%09this.m_constraints%20%3D%20new%20Vector()%3B%0A%09%09%09%7D%0A%0A%09%09%09b2ContactSolver()%20%7B%20%7D%0A%0A%09%09%09Initialize(step%2C%20contacts%2C%20contactCount%2C%20allocator)%20%7B%0A%09%09%09%09if%20(contactCount%20%3D%3D%3D%20undefined)%20contactCount%20%3D%200%3B%0A%09%09%09%09let%20contact%3B%0A%09%09%09%09this.m_step.Set(step)%3B%0A%09%09%09%09this.m_allocator%20%3D%20allocator%3B%0A%09%09%09%09let%20i%20%3D%200%3B%0A%09%09%09%09let%20tVec%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09this.m_constraintCount%20%3D%20contactCount%3B%0A%09%09%09%09while%20(this.m_constraints.length%20%3C%20this.m_constraintCount)%20%7B%0A%09%09%09%09%09this.m_constraints%5Bthis.m_constraints.length%5D%20%3D%20new%20b2ContactConstraint()%3B%0A%09%09%09%09%7D%0A%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09i%20%3C%20contactCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09contact%20%3D%20contacts%5Bi%5D%3B%0A%09%09%09%09%09const%20fixtureA%20%3D%20contact.m_fixtureA%3B%0A%09%09%09%09%09const%20fixtureB%20%3D%20contact.m_fixtureB%3B%0A%09%09%09%09%09const%20shapeA%20%3D%20fixtureA.m_shape%3B%0A%09%09%09%09%09const%20shapeB%20%3D%20fixtureB.m_shape%3B%0A%09%09%09%09%09const%20radiusA%20%3D%20shapeA.m_radius%3B%0A%09%09%09%09%09const%20radiusB%20%3D%20shapeB.m_radius%3B%0A%09%09%09%09%09const%20bodyA%20%3D%20fixtureA.m_body%3B%0A%09%09%09%09%09const%20bodyB%20%3D%20fixtureB.m_body%3B%0A%09%09%09%09%09const%20manifold%20%3D%20contact.GetManifold()%3B%0A%09%09%09%09%09const%20friction%20%3D%20b2Settings.b2MixFriction(fixtureA.GetFriction()%2C%20fixtureB.GetFriction())%3B%0A%09%09%09%09%09const%20restitution%20%3D%20b2Settings.b2MixRestitution(fixtureA.GetRestitution()%2C%20fixtureB.GetRestitution())%3B%0A%09%09%09%09%09const%20vAX%20%3D%20bodyA.m_linearVelocity.x%3B%0A%09%09%09%09%09const%20vAY%20%3D%20bodyA.m_linearVelocity.y%3B%0A%09%09%09%09%09const%20vBX%20%3D%20bodyB.m_linearVelocity.x%3B%0A%09%09%09%09%09const%20vBY%20%3D%20bodyB.m_linearVelocity.y%3B%0A%09%09%09%09%09const%20wA%20%3D%20bodyA.m_angularVelocity%3B%0A%09%09%09%09%09const%20wB%20%3D%20bodyB.m_angularVelocity%3B%0A%09%09%09%09%09b2Settings.b2Assert(manifold.m_pointCount%20%3E%200)%3B%0A%09%09%09%09%09b2ContactSolver.s_worldManifold.Initialize(manifold%2C%20bodyA.m_xf%2C%20radiusA%2C%20bodyB.m_xf%2C%20radiusB)%3B%0A%09%09%09%09%09const%20normalX%20%3D%20b2ContactSolver.s_worldManifold.m_normal.x%3B%0A%09%09%09%09%09const%20normalY%20%3D%20b2ContactSolver.s_worldManifold.m_normal.y%3B%0A%09%09%09%09%09const%20cc%20%3D%20this.m_constraints%5Bi%5D%3B%0A%09%09%09%09%09cc.bodyA%20%3D%20bodyA%3B%0A%09%09%09%09%09cc.bodyB%20%3D%20bodyB%3B%0A%09%09%09%09%09cc.manifold%20%3D%20manifold%3B%0A%09%09%09%09%09cc.normal.x%20%3D%20normalX%3B%0A%09%09%09%09%09cc.normal.y%20%3D%20normalY%3B%0A%09%09%09%09%09cc.pointCount%20%3D%20manifold.m_pointCount%3B%0A%09%09%09%09%09cc.friction%20%3D%20friction%3B%0A%09%09%09%09%09cc.restitution%20%3D%20restitution%3B%0A%09%09%09%09%09cc.localPlaneNormal.x%20%3D%20manifold.m_localPlaneNormal.x%3B%0A%09%09%09%09%09cc.localPlaneNormal.y%20%3D%20manifold.m_localPlaneNormal.y%3B%0A%09%09%09%09%09cc.localPoint.x%20%3D%20manifold.m_localPoint.x%3B%0A%09%09%09%09%09cc.localPoint.y%20%3D%20manifold.m_localPoint.y%3B%0A%09%09%09%09%09cc.radius%20%3D%20radiusA%20%2B%20radiusB%3B%0A%09%09%09%09%09cc.type%20%3D%20manifold.m_type%3B%0A%09%09%09%09%09for%20(let%20k%20%3D%200%3B%20k%20%3C%20cc.pointCount%3B%20%2B%2Bk)%20%7B%0A%09%09%09%09%09%09const%20cp%20%3D%20manifold.m_points%5Bk%5D%3B%0A%09%09%09%09%09%09const%20ccp%20%3D%20cc.points%5Bk%5D%3B%0A%09%09%09%09%09%09ccp.normalImpulse%20%3D%20cp.m_normalImpulse%3B%0A%09%09%09%09%09%09ccp.tangentImpulse%20%3D%20cp.m_tangentImpulse%3B%0A%09%09%09%09%09%09ccp.localPoint.SetV(cp.m_localPoint)%3B%0A%09%09%09%09%09%09const%20rAX%20%3D%20ccp.rA.x%20%3D%20b2ContactSolver.s_worldManifold.m_points%5Bk%5D.x%20-%20bodyA.m_sweep.c.x%3B%0A%09%09%09%09%09%09const%20rAY%20%3D%20ccp.rA.y%20%3D%20b2ContactSolver.s_worldManifold.m_points%5Bk%5D.y%20-%20bodyA.m_sweep.c.y%3B%0A%09%09%09%09%09%09const%20rBX%20%3D%20ccp.rB.x%20%3D%20b2ContactSolver.s_worldManifold.m_points%5Bk%5D.x%20-%20bodyB.m_sweep.c.x%3B%0A%09%09%09%09%09%09const%20rBY%20%3D%20ccp.rB.y%20%3D%20b2ContactSolver.s_worldManifold.m_points%5Bk%5D.y%20-%20bodyB.m_sweep.c.y%3B%0A%09%09%09%09%09%09let%20rnA%20%3D%20rAX%20*%20normalY%20-%20rAY%20*%20normalX%3B%0A%09%09%09%09%09%09let%20rnB%20%3D%20rBX%20*%20normalY%20-%20rBY%20*%20normalX%3B%0A%09%09%09%09%09%09rnA%20*%3D%20rnA%3B%0A%09%09%09%09%09%09rnB%20*%3D%20rnB%3B%0A%09%09%09%09%09%09const%20kNormal%20%3D%20bodyA.m_invMass%20%2B%20bodyB.m_invMass%20%2B%20bodyA.m_invI%20*%20rnA%20%2B%20bodyB.m_invI%20*%20rnB%3B%0A%09%09%09%09%09%09ccp.normalMass%20%3D%201.0%20%2F%20kNormal%3B%0A%09%09%09%09%09%09let%20kEqualized%20%3D%20bodyA.m_mass%20*%20bodyA.m_invMass%20%2B%20bodyB.m_mass%20*%20bodyB.m_invMass%3B%0A%09%09%09%09%09%09kEqualized%20%2B%3D%20bodyA.m_mass%20*%20bodyA.m_invI%20*%20rnA%20%2B%20bodyB.m_mass%20*%20bodyB.m_invI%20*%20rnB%3B%0A%09%09%09%09%09%09ccp.equalizedMass%20%3D%201.0%20%2F%20kEqualized%3B%0A%09%09%09%09%09%09const%20tangentX%20%3D%20normalY%3B%0A%09%09%09%09%09%09const%20tangentY%20%3D%20(-normalX)%3B%0A%09%09%09%09%09%09let%20rtA%20%3D%20rAX%20*%20tangentY%20-%20rAY%20*%20tangentX%3B%0A%09%09%09%09%09%09let%20rtB%20%3D%20rBX%20*%20tangentY%20-%20rBY%20*%20tangentX%3B%0A%09%09%09%09%09%09rtA%20*%3D%20rtA%3B%0A%09%09%09%09%09%09rtB%20*%3D%20rtB%3B%0A%09%09%09%09%09%09const%20kTangent%20%3D%20bodyA.m_invMass%20%2B%20bodyB.m_invMass%20%2B%20bodyA.m_invI%20*%20rtA%20%2B%20bodyB.m_invI%20*%20rtB%3B%0A%09%09%09%09%09%09ccp.tangentMass%20%3D%201.0%20%2F%20kTangent%3B%0A%09%09%09%09%09%09ccp.velocityBias%20%3D%200.0%3B%0A%09%09%09%09%09%09const%20tX%20%3D%20vBX%20%2B%20((-wB%20*%20rBY))%20-%20vAX%20-%20((-wA%20*%20rAY))%3B%0A%09%09%09%09%09%09const%20tY%20%3D%20vBY%20%2B%20(wB%20*%20rBX)%20-%20vAY%20-%20(wA%20*%20rAX)%3B%0A%09%09%09%09%09%09const%20vRel%20%3D%20cc.normal.x%20*%20tX%20%2B%20cc.normal.y%20*%20tY%3B%0A%09%09%09%09%09%09if%20(vRel%20%3C%20(-b2Settings.b2_velocityThreshold))%20%7B%0A%09%09%09%09%09%09%09ccp.velocityBias%20%2B%3D%20(-cc.restitution%20*%20vRel)%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if%20(cc.pointCount%20%3D%3D%202)%20%7B%0A%09%09%09%09%09%09const%20ccp1%20%3D%20cc.points%5B0%5D%3B%0A%09%09%09%09%09%09const%20ccp2%20%3D%20cc.points%5B1%5D%3B%0A%09%09%09%09%09%09const%20invMassA%20%3D%20bodyA.m_invMass%3B%0A%09%09%09%09%09%09const%20invIA%20%3D%20bodyA.m_invI%3B%0A%09%09%09%09%09%09const%20invMassB%20%3D%20bodyB.m_invMass%3B%0A%09%09%09%09%09%09const%20invIB%20%3D%20bodyB.m_invI%3B%0A%09%09%09%09%09%09const%20rn1A%20%3D%20ccp1.rA.x%20*%20normalY%20-%20ccp1.rA.y%20*%20normalX%3B%0A%09%09%09%09%09%09const%20rn1B%20%3D%20ccp1.rB.x%20*%20normalY%20-%20ccp1.rB.y%20*%20normalX%3B%0A%09%09%09%09%09%09const%20rn2A%20%3D%20ccp2.rA.x%20*%20normalY%20-%20ccp2.rA.y%20*%20normalX%3B%0A%09%09%09%09%09%09const%20rn2B%20%3D%20ccp2.rB.x%20*%20normalY%20-%20ccp2.rB.y%20*%20normalX%3B%0A%09%09%09%09%09%09const%20k11%20%3D%20invMassA%20%2B%20invMassB%20%2B%20invIA%20*%20rn1A%20*%20rn1A%20%2B%20invIB%20*%20rn1B%20*%20rn1B%3B%0A%09%09%09%09%09%09const%20k22%20%3D%20invMassA%20%2B%20invMassB%20%2B%20invIA%20*%20rn2A%20*%20rn2A%20%2B%20invIB%20*%20rn2B%20*%20rn2B%3B%0A%09%09%09%09%09%09const%20k12%20%3D%20invMassA%20%2B%20invMassB%20%2B%20invIA%20*%20rn1A%20*%20rn2A%20%2B%20invIB%20*%20rn1B%20*%20rn2B%3B%0A%09%09%09%09%09%09const%20k_maxConditionNumber%20%3D%20100.0%3B%0A%09%09%09%09%09%09if%20(k11%20*%20k11%20%3C%20k_maxConditionNumber%20*%20(k11%20*%20k22%20-%20k12%20*%20k12))%20%7B%0A%09%09%09%09%09%09%09cc.K.col1.Set(k11%2C%20k12)%3B%0A%09%09%09%09%09%09%09cc.K.col2.Set(k12%2C%20k22)%3B%0A%09%09%09%09%09%09%09cc.K.GetInverse(cc.normalMass)%3B%0A%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09cc.pointCount%20%3D%201%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09InitVelocityConstraints(step)%20%7B%0A%09%09%09%09let%20tVec%3B%0A%09%09%09%09let%20tVec2%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_constraintCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09const%20c%20%3D%20this.m_constraints%5Bi%5D%3B%0A%09%09%09%09%09const%20bodyA%20%3D%20c.bodyA%3B%0A%09%09%09%09%09const%20bodyB%20%3D%20c.bodyB%3B%0A%09%09%09%09%09const%20invMassA%20%3D%20bodyA.m_invMass%3B%0A%09%09%09%09%09const%20invIA%20%3D%20bodyA.m_invI%3B%0A%09%09%09%09%09const%20invMassB%20%3D%20bodyB.m_invMass%3B%0A%09%09%09%09%09const%20invIB%20%3D%20bodyB.m_invI%3B%0A%09%09%09%09%09const%20normalX%20%3D%20c.normal.x%3B%0A%09%09%09%09%09const%20normalY%20%3D%20c.normal.y%3B%0A%09%09%09%09%09const%20tangentX%20%3D%20normalY%3B%0A%09%09%09%09%09const%20tangentY%20%3D%20(-normalX)%3B%0A%09%09%09%09%09const%20tX%20%3D%200%3B%0A%09%09%09%09%09let%20j%20%3D%200%3B%0A%09%09%09%09%09let%20tCount%20%3D%200%3B%0A%09%09%09%09%09if%20(step.warmStarting)%20%7B%0A%09%09%09%09%09%09tCount%20%3D%20c.pointCount%3B%0A%09%09%09%09%09%09for%20(j%20%3D%200%3B%0A%09%09%09%09%09%09%09j%20%3C%20tCount%3B%20%2B%2Bj)%20%7B%0A%09%09%09%09%09%09%09const%20ccp%20%3D%20c.points%5Bj%5D%3B%0A%09%09%09%09%09%09%09ccp.normalImpulse%20*%3D%20step.dtRatio%3B%0A%09%09%09%09%09%09%09ccp.tangentImpulse%20*%3D%20step.dtRatio%3B%0A%09%09%09%09%09%09%09const%20PX%20%3D%20ccp.normalImpulse%20*%20normalX%20%2B%20ccp.tangentImpulse%20*%20tangentX%3B%0A%09%09%09%09%09%09%09const%20PY%20%3D%20ccp.normalImpulse%20*%20normalY%20%2B%20ccp.tangentImpulse%20*%20tangentY%3B%0A%09%09%09%09%09%09%09bodyA.m_angularVelocity%20-%3D%20invIA%20*%20(ccp.rA.x%20*%20PY%20-%20ccp.rA.y%20*%20PX)%3B%0A%09%09%09%09%09%09%09bodyA.m_linearVelocity.x%20-%3D%20invMassA%20*%20PX%3B%0A%09%09%09%09%09%09%09bodyA.m_linearVelocity.y%20-%3D%20invMassA%20*%20PY%3B%0A%09%09%09%09%09%09%09bodyB.m_angularVelocity%20%2B%3D%20invIB%20*%20(ccp.rB.x%20*%20PY%20-%20ccp.rB.y%20*%20PX)%3B%0A%09%09%09%09%09%09%09bodyB.m_linearVelocity.x%20%2B%3D%20invMassB%20*%20PX%3B%0A%09%09%09%09%09%09%09bodyB.m_linearVelocity.y%20%2B%3D%20invMassB%20*%20PY%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09tCount%20%3D%20c.pointCount%3B%0A%09%09%09%09%09%09for%20(j%20%3D%200%3B%0A%09%09%09%09%09%09%09j%20%3C%20tCount%3B%20%2B%2Bj)%20%7B%0A%09%09%09%09%09%09%09const%20ccp2%20%3D%20c.points%5Bj%5D%3B%0A%09%09%09%09%09%09%09ccp2.normalImpulse%20%3D%200.0%3B%0A%09%09%09%09%09%09%09ccp2.tangentImpulse%20%3D%200.0%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09SolveVelocityConstraints()%20%7B%0A%09%09%09%09let%20j%20%3D%200%3B%0A%09%09%09%09let%20ccp%3B%0A%09%09%09%09const%20rAX%20%3D%200%3B%0A%09%09%09%09const%20rAY%20%3D%200%3B%0A%09%09%09%09const%20rBX%20%3D%200%3B%0A%09%09%09%09const%20rBY%20%3D%200%3B%0A%09%09%09%09let%20dvX%20%3D%200%3B%0A%09%09%09%09let%20dvY%20%3D%200%3B%0A%09%09%09%09let%20vn%20%3D%200%3B%0A%09%09%09%09let%20vt%20%3D%200%3B%0A%09%09%09%09let%20lambda%20%3D%200%3B%0A%09%09%09%09let%20maxFriction%20%3D%200%3B%0A%09%09%09%09let%20newImpulse%20%3D%200%3B%0A%09%09%09%09let%20PX%20%3D%200%3B%0A%09%09%09%09let%20PY%20%3D%200%3B%0A%09%09%09%09let%20dX%20%3D%200%3B%0A%09%09%09%09let%20dY%20%3D%200%3B%0A%09%09%09%09let%20P1X%20%3D%200%3B%0A%09%09%09%09let%20P1Y%20%3D%200%3B%0A%09%09%09%09let%20P2X%20%3D%200%3B%0A%09%09%09%09let%20P2Y%20%3D%200%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09let%20tVec%3B%0A%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_constraintCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09const%20c%20%3D%20this.m_constraints%5Bi%5D%3B%0A%09%09%09%09%09const%20bodyA%20%3D%20c.bodyA%3B%0A%09%09%09%09%09const%20bodyB%20%3D%20c.bodyB%3B%0A%09%09%09%09%09let%20wA%20%3D%20bodyA.m_angularVelocity%3B%0A%09%09%09%09%09let%20wB%20%3D%20bodyB.m_angularVelocity%3B%0A%09%09%09%09%09const%20vA%20%3D%20bodyA.m_linearVelocity%3B%0A%09%09%09%09%09const%20vB%20%3D%20bodyB.m_linearVelocity%3B%0A%09%09%09%09%09const%20invMassA%20%3D%20bodyA.m_invMass%3B%0A%09%09%09%09%09const%20invIA%20%3D%20bodyA.m_invI%3B%0A%09%09%09%09%09const%20invMassB%20%3D%20bodyB.m_invMass%3B%0A%09%09%09%09%09const%20invIB%20%3D%20bodyB.m_invI%3B%0A%09%09%09%09%09const%20normalX%20%3D%20c.normal.x%3B%0A%09%09%09%09%09const%20normalY%20%3D%20c.normal.y%3B%0A%09%09%09%09%09const%20tangentX%20%3D%20normalY%3B%0A%09%09%09%09%09const%20tangentY%20%3D%20(-normalX)%3B%0A%09%09%09%09%09const%20friction%20%3D%20c.friction%3B%0A%09%09%09%09%09const%20tX%20%3D%200%3B%0A%09%09%09%09%09for%20(j%20%3D%200%3B%0A%09%09%09%09%09%09j%20%3C%20c.pointCount%3B%20j%2B%2B)%20%7B%0A%09%09%09%09%09%09ccp%20%3D%20c.points%5Bj%5D%3B%0A%09%09%09%09%09%09dvX%20%3D%20vB.x%20-%20wB%20*%20ccp.rB.y%20-%20vA.x%20%2B%20wA%20*%20ccp.rA.y%3B%0A%09%09%09%09%09%09dvY%20%3D%20vB.y%20%2B%20wB%20*%20ccp.rB.x%20-%20vA.y%20-%20wA%20*%20ccp.rA.x%3B%0A%09%09%09%09%09%09vt%20%3D%20dvX%20*%20tangentX%20%2B%20dvY%20*%20tangentY%3B%0A%09%09%09%09%09%09lambda%20%3D%20ccp.tangentMass%20*%20(-vt)%3B%0A%09%09%09%09%09%09maxFriction%20%3D%20friction%20*%20ccp.normalImpulse%3B%0A%09%09%09%09%09%09newImpulse%20%3D%20b2Math.Clamp(ccp.tangentImpulse%20%2B%20lambda%2C%20(-maxFriction)%2C%20maxFriction)%3B%0A%09%09%09%09%09%09lambda%20%3D%20newImpulse%20-%20ccp.tangentImpulse%3B%0A%09%09%09%09%09%09PX%20%3D%20lambda%20*%20tangentX%3B%0A%09%09%09%09%09%09PY%20%3D%20lambda%20*%20tangentY%3B%0A%09%09%09%09%09%09vA.x%20-%3D%20invMassA%20*%20PX%3B%0A%09%09%09%09%09%09vA.y%20-%3D%20invMassA%20*%20PY%3B%0A%09%09%09%09%09%09wA%20-%3D%20invIA%20*%20(ccp.rA.x%20*%20PY%20-%20ccp.rA.y%20*%20PX)%3B%0A%09%09%09%09%09%09vB.x%20%2B%3D%20invMassB%20*%20PX%3B%0A%09%09%09%09%09%09vB.y%20%2B%3D%20invMassB%20*%20PY%3B%0A%09%09%09%09%09%09wB%20%2B%3D%20invIB%20*%20(ccp.rB.x%20*%20PY%20-%20ccp.rB.y%20*%20PX)%3B%0A%09%09%09%09%09%09ccp.tangentImpulse%20%3D%20newImpulse%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09const%20tCount%20%3D%20parseInt(c.pointCount)%3B%0A%09%09%09%09%09if%20(c.pointCount%20%3D%3D%201)%20%7B%0A%09%09%09%09%09%09ccp%20%3D%20c.points%5B0%5D%3B%0A%09%09%09%09%09%09dvX%20%3D%20vB.x%20%2B%20((-wB%20*%20ccp.rB.y))%20-%20vA.x%20-%20((-wA%20*%20ccp.rA.y))%3B%0A%09%09%09%09%09%09dvY%20%3D%20vB.y%20%2B%20(wB%20*%20ccp.rB.x)%20-%20vA.y%20-%20(wA%20*%20ccp.rA.x)%3B%0A%09%09%09%09%09%09vn%20%3D%20dvX%20*%20normalX%20%2B%20dvY%20*%20normalY%3B%0A%09%09%09%09%09%09lambda%20%3D%20(-ccp.normalMass%20*%20(vn%20-%20ccp.velocityBias))%3B%0A%09%09%09%09%09%09newImpulse%20%3D%20ccp.normalImpulse%20%2B%20lambda%3B%0A%09%09%09%09%09%09newImpulse%20%3D%20newImpulse%20%3E%200%20%3F%20newImpulse%20%3A%200.0%3B%0A%09%09%09%09%09%09lambda%20%3D%20newImpulse%20-%20ccp.normalImpulse%3B%0A%09%09%09%09%09%09PX%20%3D%20lambda%20*%20normalX%3B%0A%09%09%09%09%09%09PY%20%3D%20lambda%20*%20normalY%3B%0A%09%09%09%09%09%09vA.x%20-%3D%20invMassA%20*%20PX%3B%0A%09%09%09%09%09%09vA.y%20-%3D%20invMassA%20*%20PY%3B%0A%09%09%09%09%09%09wA%20-%3D%20invIA%20*%20(ccp.rA.x%20*%20PY%20-%20ccp.rA.y%20*%20PX)%3B%0A%09%09%09%09%09%09vB.x%20%2B%3D%20invMassB%20*%20PX%3B%0A%09%09%09%09%09%09vB.y%20%2B%3D%20invMassB%20*%20PY%3B%0A%09%09%09%09%09%09wB%20%2B%3D%20invIB%20*%20(ccp.rB.x%20*%20PY%20-%20ccp.rB.y%20*%20PX)%3B%0A%09%09%09%09%09%09ccp.normalImpulse%20%3D%20newImpulse%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09const%20cp1%20%3D%20c.points%5B0%5D%3B%0A%09%09%09%09%09%09const%20cp2%20%3D%20c.points%5B1%5D%3B%0A%09%09%09%09%09%09const%20aX%20%3D%20cp1.normalImpulse%3B%0A%09%09%09%09%09%09const%20aY%20%3D%20cp2.normalImpulse%3B%0A%09%09%09%09%09%09const%20dv1X%20%3D%20vB.x%20-%20wB%20*%20cp1.rB.y%20-%20vA.x%20%2B%20wA%20*%20cp1.rA.y%3B%0A%09%09%09%09%09%09const%20dv1Y%20%3D%20vB.y%20%2B%20wB%20*%20cp1.rB.x%20-%20vA.y%20-%20wA%20*%20cp1.rA.x%3B%0A%09%09%09%09%09%09const%20dv2X%20%3D%20vB.x%20-%20wB%20*%20cp2.rB.y%20-%20vA.x%20%2B%20wA%20*%20cp2.rA.y%3B%0A%09%09%09%09%09%09const%20dv2Y%20%3D%20vB.y%20%2B%20wB%20*%20cp2.rB.x%20-%20vA.y%20-%20wA%20*%20cp2.rA.x%3B%0A%09%09%09%09%09%09let%20vn1%20%3D%20dv1X%20*%20normalX%20%2B%20dv1Y%20*%20normalY%3B%0A%09%09%09%09%09%09let%20vn2%20%3D%20dv2X%20*%20normalX%20%2B%20dv2Y%20*%20normalY%3B%0A%09%09%09%09%09%09let%20bX%20%3D%20vn1%20-%20cp1.velocityBias%3B%0A%09%09%09%09%09%09let%20bY%20%3D%20vn2%20-%20cp2.velocityBias%3B%0A%09%09%09%09%09%09tMat%20%3D%20c.K%3B%0A%09%09%09%09%09%09bX%20-%3D%20tMat.col1.x%20*%20aX%20%2B%20tMat.col2.x%20*%20aY%3B%0A%09%09%09%09%09%09bY%20-%3D%20tMat.col1.y%20*%20aX%20%2B%20tMat.col2.y%20*%20aY%3B%0A%09%09%09%09%09%09const%20k_errorTol%20%3D%200.001%3B%0A%09%09%09%09%09%09for%20(%3B%20%3B)%20%7B%0A%09%09%09%09%09%09%09tMat%20%3D%20c.normalMass%3B%0A%09%09%09%09%09%09%09let%20xX%20%3D%20(-(tMat.col1.x%20*%20bX%20%2B%20tMat.col2.x%20*%20bY))%3B%0A%09%09%09%09%09%09%09let%20xY%20%3D%20(-(tMat.col1.y%20*%20bX%20%2B%20tMat.col2.y%20*%20bY))%3B%0A%09%09%09%09%09%09%09if%20(xX%20%3E%3D%200.0%20%26%26%20xY%20%3E%3D%200.0)%20%7B%0A%09%09%09%09%09%09%09%09dX%20%3D%20xX%20-%20aX%3B%0A%09%09%09%09%09%09%09%09dY%20%3D%20xY%20-%20aY%3B%0A%09%09%09%09%09%09%09%09P1X%20%3D%20dX%20*%20normalX%3B%0A%09%09%09%09%09%09%09%09P1Y%20%3D%20dX%20*%20normalY%3B%0A%09%09%09%09%09%09%09%09P2X%20%3D%20dY%20*%20normalX%3B%0A%09%09%09%09%09%09%09%09P2Y%20%3D%20dY%20*%20normalY%3B%0A%09%09%09%09%09%09%09%09vA.x%20-%3D%20invMassA%20*%20(P1X%20%2B%20P2X)%3B%0A%09%09%09%09%09%09%09%09vA.y%20-%3D%20invMassA%20*%20(P1Y%20%2B%20P2Y)%3B%0A%09%09%09%09%09%09%09%09wA%20-%3D%20invIA%20*%20(cp1.rA.x%20*%20P1Y%20-%20cp1.rA.y%20*%20P1X%20%2B%20cp2.rA.x%20*%20P2Y%20-%20cp2.rA.y%20*%20P2X)%3B%0A%09%09%09%09%09%09%09%09vB.x%20%2B%3D%20invMassB%20*%20(P1X%20%2B%20P2X)%3B%0A%09%09%09%09%09%09%09%09vB.y%20%2B%3D%20invMassB%20*%20(P1Y%20%2B%20P2Y)%3B%0A%09%09%09%09%09%09%09%09wB%20%2B%3D%20invIB%20*%20(cp1.rB.x%20*%20P1Y%20-%20cp1.rB.y%20*%20P1X%20%2B%20cp2.rB.x%20*%20P2Y%20-%20cp2.rB.y%20*%20P2X)%3B%0A%09%09%09%09%09%09%09%09cp1.normalImpulse%20%3D%20xX%3B%0A%09%09%09%09%09%09%09%09cp2.normalImpulse%20%3D%20xY%3B%0A%09%09%09%09%09%09%09%09break%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09xX%20%3D%20(-cp1.normalMass%20*%20bX)%3B%0A%09%09%09%09%09%09%09xY%20%3D%200.0%3B%0A%09%09%09%09%09%09%09vn1%20%3D%200.0%3B%0A%09%09%09%09%09%09%09vn2%20%3D%20c.K.col1.y%20*%20xX%20%2B%20bY%3B%0A%09%09%09%09%09%09%09if%20(xX%20%3E%3D%200.0%20%26%26%20vn2%20%3E%3D%200.0)%20%7B%0A%09%09%09%09%09%09%09%09dX%20%3D%20xX%20-%20aX%3B%0A%09%09%09%09%09%09%09%09dY%20%3D%20xY%20-%20aY%3B%0A%09%09%09%09%09%09%09%09P1X%20%3D%20dX%20*%20normalX%3B%0A%09%09%09%09%09%09%09%09P1Y%20%3D%20dX%20*%20normalY%3B%0A%09%09%09%09%09%09%09%09P2X%20%3D%20dY%20*%20normalX%3B%0A%09%09%09%09%09%09%09%09P2Y%20%3D%20dY%20*%20normalY%3B%0A%09%09%09%09%09%09%09%09vA.x%20-%3D%20invMassA%20*%20(P1X%20%2B%20P2X)%3B%0A%09%09%09%09%09%09%09%09vA.y%20-%3D%20invMassA%20*%20(P1Y%20%2B%20P2Y)%3B%0A%09%09%09%09%09%09%09%09wA%20-%3D%20invIA%20*%20(cp1.rA.x%20*%20P1Y%20-%20cp1.rA.y%20*%20P1X%20%2B%20cp2.rA.x%20*%20P2Y%20-%20cp2.rA.y%20*%20P2X)%3B%0A%09%09%09%09%09%09%09%09vB.x%20%2B%3D%20invMassB%20*%20(P1X%20%2B%20P2X)%3B%0A%09%09%09%09%09%09%09%09vB.y%20%2B%3D%20invMassB%20*%20(P1Y%20%2B%20P2Y)%3B%0A%09%09%09%09%09%09%09%09wB%20%2B%3D%20invIB%20*%20(cp1.rB.x%20*%20P1Y%20-%20cp1.rB.y%20*%20P1X%20%2B%20cp2.rB.x%20*%20P2Y%20-%20cp2.rB.y%20*%20P2X)%3B%0A%09%09%09%09%09%09%09%09cp1.normalImpulse%20%3D%20xX%3B%0A%09%09%09%09%09%09%09%09cp2.normalImpulse%20%3D%20xY%3B%0A%09%09%09%09%09%09%09%09break%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09xX%20%3D%200.0%3B%0A%09%09%09%09%09%09%09xY%20%3D%20(-cp2.normalMass%20*%20bY)%3B%0A%09%09%09%09%09%09%09vn1%20%3D%20c.K.col2.x%20*%20xY%20%2B%20bX%3B%0A%09%09%09%09%09%09%09vn2%20%3D%200.0%3B%0A%09%09%09%09%09%09%09if%20(xY%20%3E%3D%200.0%20%26%26%20vn1%20%3E%3D%200.0)%20%7B%0A%09%09%09%09%09%09%09%09dX%20%3D%20xX%20-%20aX%3B%0A%09%09%09%09%09%09%09%09dY%20%3D%20xY%20-%20aY%3B%0A%09%09%09%09%09%09%09%09P1X%20%3D%20dX%20*%20normalX%3B%0A%09%09%09%09%09%09%09%09P1Y%20%3D%20dX%20*%20normalY%3B%0A%09%09%09%09%09%09%09%09P2X%20%3D%20dY%20*%20normalX%3B%0A%09%09%09%09%09%09%09%09P2Y%20%3D%20dY%20*%20normalY%3B%0A%09%09%09%09%09%09%09%09vA.x%20-%3D%20invMassA%20*%20(P1X%20%2B%20P2X)%3B%0A%09%09%09%09%09%09%09%09vA.y%20-%3D%20invMassA%20*%20(P1Y%20%2B%20P2Y)%3B%0A%09%09%09%09%09%09%09%09wA%20-%3D%20invIA%20*%20(cp1.rA.x%20*%20P1Y%20-%20cp1.rA.y%20*%20P1X%20%2B%20cp2.rA.x%20*%20P2Y%20-%20cp2.rA.y%20*%20P2X)%3B%0A%09%09%09%09%09%09%09%09vB.x%20%2B%3D%20invMassB%20*%20(P1X%20%2B%20P2X)%3B%0A%09%09%09%09%09%09%09%09vB.y%20%2B%3D%20invMassB%20*%20(P1Y%20%2B%20P2Y)%3B%0A%09%09%09%09%09%09%09%09wB%20%2B%3D%20invIB%20*%20(cp1.rB.x%20*%20P1Y%20-%20cp1.rB.y%20*%20P1X%20%2B%20cp2.rB.x%20*%20P2Y%20-%20cp2.rB.y%20*%20P2X)%3B%0A%09%09%09%09%09%09%09%09cp1.normalImpulse%20%3D%20xX%3B%0A%09%09%09%09%09%09%09%09cp2.normalImpulse%20%3D%20xY%3B%0A%09%09%09%09%09%09%09%09break%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09xX%20%3D%200.0%3B%0A%09%09%09%09%09%09%09xY%20%3D%200.0%3B%0A%09%09%09%09%09%09%09vn1%20%3D%20bX%3B%0A%09%09%09%09%09%09%09vn2%20%3D%20bY%3B%0A%09%09%09%09%09%09%09if%20(vn1%20%3E%3D%200.0%20%26%26%20vn2%20%3E%3D%200.0)%20%7B%0A%09%09%09%09%09%09%09%09dX%20%3D%20xX%20-%20aX%3B%0A%09%09%09%09%09%09%09%09dY%20%3D%20xY%20-%20aY%3B%0A%09%09%09%09%09%09%09%09P1X%20%3D%20dX%20*%20normalX%3B%0A%09%09%09%09%09%09%09%09P1Y%20%3D%20dX%20*%20normalY%3B%0A%09%09%09%09%09%09%09%09P2X%20%3D%20dY%20*%20normalX%3B%0A%09%09%09%09%09%09%09%09P2Y%20%3D%20dY%20*%20normalY%3B%0A%09%09%09%09%09%09%09%09vA.x%20-%3D%20invMassA%20*%20(P1X%20%2B%20P2X)%3B%0A%09%09%09%09%09%09%09%09vA.y%20-%3D%20invMassA%20*%20(P1Y%20%2B%20P2Y)%3B%0A%09%09%09%09%09%09%09%09wA%20-%3D%20invIA%20*%20(cp1.rA.x%20*%20P1Y%20-%20cp1.rA.y%20*%20P1X%20%2B%20cp2.rA.x%20*%20P2Y%20-%20cp2.rA.y%20*%20P2X)%3B%0A%09%09%09%09%09%09%09%09vB.x%20%2B%3D%20invMassB%20*%20(P1X%20%2B%20P2X)%3B%0A%09%09%09%09%09%09%09%09vB.y%20%2B%3D%20invMassB%20*%20(P1Y%20%2B%20P2Y)%3B%0A%09%09%09%09%09%09%09%09wB%20%2B%3D%20invIB%20*%20(cp1.rB.x%20*%20P1Y%20-%20cp1.rB.y%20*%20P1X%20%2B%20cp2.rB.x%20*%20P2Y%20-%20cp2.rB.y%20*%20P2X)%3B%0A%09%09%09%09%09%09%09%09cp1.normalImpulse%20%3D%20xX%3B%0A%09%09%09%09%09%09%09%09cp2.normalImpulse%20%3D%20xY%3B%0A%09%09%09%09%09%09%09%09break%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09break%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%09bodyA.m_angularVelocity%20%3D%20wA%3B%0A%09%09%09%09%09bodyB.m_angularVelocity%20%3D%20wB%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09FinalizeVelocityConstraints()%20%7B%0A%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_constraintCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09const%20c%20%3D%20this.m_constraints%5Bi%5D%3B%0A%09%09%09%09%09const%20m%20%3D%20c.manifold%3B%0A%09%09%09%09%09for%20(let%20j%20%3D%200%3B%20j%20%3C%20c.pointCount%3B%20%2B%2Bj)%20%7B%0A%09%09%09%09%09%09const%20point1%20%3D%20m.m_points%5Bj%5D%3B%0A%09%09%09%09%09%09const%20point2%20%3D%20c.points%5Bj%5D%3B%0A%09%09%09%09%09%09point1.m_normalImpulse%20%3D%20point2.normalImpulse%3B%0A%09%09%09%09%09%09point1.m_tangentImpulse%20%3D%20point2.tangentImpulse%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09SolvePositionConstraints(baumgarte)%20%7B%0A%09%09%09%09if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%09%09%09%09let%20minSeparation%20%3D%200.0%3B%0A%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.m_constraintCount%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09const%20c%20%3D%20this.m_constraints%5Bi%5D%3B%0A%09%09%09%09%09const%20bodyA%20%3D%20c.bodyA%3B%0A%09%09%09%09%09const%20bodyB%20%3D%20c.bodyB%3B%0A%09%09%09%09%09const%20invMassA%20%3D%20bodyA.m_mass%20*%20bodyA.m_invMass%3B%0A%09%09%09%09%09const%20invIA%20%3D%20bodyA.m_mass%20*%20bodyA.m_invI%3B%0A%09%09%09%09%09const%20invMassB%20%3D%20bodyB.m_mass%20*%20bodyB.m_invMass%3B%0A%09%09%09%09%09const%20invIB%20%3D%20bodyB.m_mass%20*%20bodyB.m_invI%3B%0A%09%09%09%09%09b2ContactSolver.s_psm.Initialize(c)%3B%0A%09%09%09%09%09const%20normal%20%3D%20b2ContactSolver.s_psm.m_normal%3B%0A%09%09%09%09%09for%20(let%20j%20%3D%200%3B%20j%20%3C%20c.pointCount%3B%20j%2B%2B)%20%7B%0A%09%09%09%09%09%09const%20ccp%20%3D%20c.points%5Bj%5D%3B%0A%09%09%09%09%09%09const%20point%20%3D%20b2ContactSolver.s_psm.m_points%5Bj%5D%3B%0A%09%09%09%09%09%09const%20separation%20%3D%20b2ContactSolver.s_psm.m_separations%5Bj%5D%3B%0A%09%09%09%09%09%09const%20rAX%20%3D%20point.x%20-%20bodyA.m_sweep.c.x%3B%0A%09%09%09%09%09%09const%20rAY%20%3D%20point.y%20-%20bodyA.m_sweep.c.y%3B%0A%09%09%09%09%09%09const%20rBX%20%3D%20point.x%20-%20bodyB.m_sweep.c.x%3B%0A%09%09%09%09%09%09const%20rBY%20%3D%20point.y%20-%20bodyB.m_sweep.c.y%3B%0A%09%09%09%09%09%09minSeparation%20%3D%20minSeparation%20%3C%20separation%20%3F%20minSeparation%20%3A%20separation%3B%0A%09%09%09%09%09%09const%20C%20%3D%20b2Math.Clamp(baumgarte%20*%20(separation%20%2B%20b2Settings.b2_linearSlop)%2C%20(-b2Settings.b2_maxLinearCorrection)%2C%200.0)%3B%0A%09%09%09%09%09%09const%20impulse%20%3D%20(-ccp.equalizedMass%20*%20C)%3B%0A%09%09%09%09%09%09const%20PX%20%3D%20impulse%20*%20normal.x%3B%0A%09%09%09%09%09%09const%20PY%20%3D%20impulse%20*%20normal.y%3B%20bodyA.m_sweep.c.x%20-%3D%20invMassA%20*%20PX%3B%0A%09%09%09%09%09%09bodyA.m_sweep.c.y%20-%3D%20invMassA%20*%20PY%3B%0A%09%09%09%09%09%09bodyA.m_sweep.a%20-%3D%20invIA%20*%20(rAX%20*%20PY%20-%20rAY%20*%20PX)%3B%0A%09%09%09%09%09%09bodyA.SynchronizeTransform()%3B%0A%09%09%09%09%09%09bodyB.m_sweep.c.x%20%2B%3D%20invMassB%20*%20PX%3B%0A%09%09%09%09%09%09bodyB.m_sweep.c.y%20%2B%3D%20invMassB%20*%20PY%3B%0A%09%09%09%09%09%09bodyB.m_sweep.a%20%2B%3D%20invIB%20*%20(rBX%20*%20PY%20-%20rBY%20*%20PX)%3B%0A%09%09%09%09%09%09bodyB.SynchronizeTransform()%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09return%20minSeparation%20%3E%20(-1.5%20*%20b2Settings.b2_linearSlop)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Contacts.b2ContactSolver%20%3D%20b2ContactSolver%3B%0A%0A%09%09class%20b2EdgeAndCircleContact%20extends%20b2Contact%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2EdgeAndCircleContact.b2EdgeAndCircleContact.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2EdgeAndCircleContact()%20%7B%0A%09%09%09%09Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09Reset(fixtureA%2C%20fixtureB)%20%7B%0A%09%09%09%09this.__super.Reset.call(this%2C%20fixtureA%2C%20fixtureB)%3B%0A%09%09%09%7D%0A%0A%09%09%09Evaluate()%20%7B%0A%09%09%09%09const%20bA%20%3D%20this.m_fixtureA.GetBody()%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_fixtureB.GetBody()%3B%0A%09%09%09%09this.b2CollideEdgeAndCircle(this.m_manifold%2C%20(this.m_fixtureA.GetShape()%20instanceof%20b2EdgeShape%20%3F%20this.m_fixtureA.GetShape()%20%3A%20null)%2C%20bA.m_xf%2C%20(this.m_fixtureB.GetShape()%20instanceof%20b2CircleShape%20%3F%20this.m_fixtureB.GetShape()%20%3A%20null)%2C%20bB.m_xf)%3B%0A%09%09%09%7D%0A%0A%09%09%09b2CollideEdgeAndCircle(manifold%2C%20edge%2C%20xf1%2C%20circle%2C%20xf2)%20%7B%20%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Contacts.b2EdgeAndCircleContact%20%3D%20b2EdgeAndCircleContact%3B%0A%0A%09%09class%20b2NullContact%20extends%20b2Contact%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2NullContact.b2NullContact.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2NullContact)%20this.b2NullContact.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2NullContact()%20%7B%0A%09%09%09%09Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09b2NullContact()%20%7B%0A%09%09%09%09this.__super.b2Contact.call(this)%3B%0A%09%09%09%7D%0A%0A%09%09%09Evaluate()%20%7B%20%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Contacts.b2NullContact%20%3D%20b2NullContact%3B%0A%0A%09%09class%20b2PolyAndCircleContact%20extends%20b2Contact%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2PolyAndCircleContact.b2PolyAndCircleContact.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2PolyAndCircleContact()%20%7B%0A%09%09%09%09Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09Reset(fixtureA%2C%20fixtureB)%20%7B%0A%09%09%09%09this.__super.Reset.call(this%2C%20fixtureA%2C%20fixtureB)%3B%0A%09%09%09%09b2Settings.b2Assert(fixtureA.GetType()%20%3D%3D%20b2Shape.e_polygonShape)%3B%0A%09%09%09%09b2Settings.b2Assert(fixtureB.GetType()%20%3D%3D%20b2Shape.e_circleShape)%3B%0A%09%09%09%7D%0A%0A%09%09%09Evaluate()%20%7B%0A%09%09%09%09const%20bA%20%3D%20this.m_fixtureA.m_body%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_fixtureB.m_body%3B%0A%09%09%09%09b2Collision.CollidePolygonAndCircle(this.m_manifold%2C%20(this.m_fixtureA.GetShape()%20instanceof%20b2PolygonShape%20%3F%20this.m_fixtureA.GetShape()%20%3A%20null)%2C%20bA.m_xf%2C%20(this.m_fixtureB.GetShape()%20instanceof%20b2CircleShape%20%3F%20this.m_fixtureB.GetShape()%20%3A%20null)%2C%20bB.m_xf)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Contacts.b2PolyAndCircleContact%20%3D%20b2PolyAndCircleContact%3B%0A%0A%09%09class%20b2PolyAndEdgeContact%20extends%20b2Contact%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2PolyAndEdgeContact.b2PolyAndEdgeContact.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2PolyAndEdgeContact()%20%7B%0A%09%09%09%09Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09Reset(fixtureA%2C%20fixtureB)%20%7B%0A%09%09%09%09this.__super.Reset.call(this%2C%20fixtureA%2C%20fixtureB)%3B%0A%09%09%09%09b2Settings.b2Assert(fixtureA.GetType()%20%3D%3D%20b2Shape.e_polygonShape)%3B%0A%09%09%09%09b2Settings.b2Assert(fixtureB.GetType()%20%3D%3D%20b2Shape.e_edgeShape)%3B%0A%09%09%09%7D%0A%0A%09%09%09Evaluate()%20%7B%0A%09%09%09%09const%20bA%20%3D%20this.m_fixtureA.GetBody()%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_fixtureB.GetBody()%3B%0A%09%09%09%09this.b2CollidePolyAndEdge(this.m_manifold%2C%20(this.m_fixtureA.GetShape()%20instanceof%20b2PolygonShape%20%3F%20this.m_fixtureA.GetShape()%20%3A%20null)%2C%20bA.m_xf%2C%20(this.m_fixtureB.GetShape()%20instanceof%20b2EdgeShape%20%3F%20this.m_fixtureB.GetShape()%20%3A%20null)%2C%20bB.m_xf)%3B%0A%09%09%09%7D%0A%0A%09%09%09b2CollidePolyAndEdge(manifold%2C%20polygon%2C%20xf1%2C%20edge%2C%20xf2)%20%7B%20%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Contacts.b2PolyAndEdgeContact%20%3D%20b2PolyAndEdgeContact%3B%0A%0A%09%09class%20b2PolygonContact%20extends%20b2Contact%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2PolygonContact.b2PolygonContact.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2PolygonContact()%20%7B%0A%09%09%09%09Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09Reset(fixtureA%2C%20fixtureB)%20%7B%0A%09%09%09%09this.__super.Reset.call(this%2C%20fixtureA%2C%20fixtureB)%3B%0A%09%09%09%7D%0A%0A%09%09%09Evaluate()%20%7B%0A%09%09%09%09const%20bA%20%3D%20this.m_fixtureA.GetBody()%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_fixtureB.GetBody()%3B%0A%09%09%09%09b2Collision.CollidePolygons(this.m_manifold%2C%20(this.m_fixtureA.GetShape()%20instanceof%20b2PolygonShape%20%3F%20this.m_fixtureA.GetShape()%20%3A%20null)%2C%20bA.m_xf%2C%20(this.m_fixtureB.GetShape()%20instanceof%20b2PolygonShape%20%3F%20this.m_fixtureB.GetShape()%20%3A%20null)%2C%20bB.m_xf)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Contacts.b2PolygonContact%20%3D%20b2PolygonContact%3B%0A%0A%09%09class%20b2PositionSolverManifold%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2PositionSolverManifold.b2PositionSolverManifold.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2PositionSolverManifold)%20this.b2PositionSolverManifold.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09b2PositionSolverManifold()%20%7B%0A%09%09%09%09this.m_normal%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_separations%20%3D%20new%20Vector_a2j_Number(b2Settings.b2_maxManifoldPoints)%3B%0A%09%09%09%09this.m_points%20%3D%20new%20Vector(b2Settings.b2_maxManifoldPoints)%3B%0A%09%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09this.m_points%5Bi%5D%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09Initialize(cc)%20%7B%0A%09%09%09%09b2Settings.b2Assert(cc.pointCount%20%3E%200)%3B%0A%09%09%09%09let%20i%20%3D%200%3B%0A%09%09%09%09let%20clipPointX%20%3D%200%3B%0A%09%09%09%09let%20clipPointY%20%3D%200%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09let%20tVec%3B%0A%09%09%09%09let%20planePointX%20%3D%200%3B%0A%09%09%09%09let%20planePointY%20%3D%200%3B%0A%09%09%09%09switch%20(cc.type)%20%7B%0A%09%09%09%09%09case%20b2Manifold.e_circles%3A%0A%09%09%09%09%09%09%7B%0A%09%09%09%09%09%09%09tMat%20%3D%20cc.bodyA.m_xf.R%3B%0A%09%09%09%09%09%09%09tVec%20%3D%20cc.localPoint%3B%0A%09%09%09%09%09%09%09const%20pointAX%20%3D%20cc.bodyA.m_xf.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09%09%09%09const%20pointAY%20%3D%20cc.bodyA.m_xf.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09%09%09%09tMat%20%3D%20cc.bodyB.m_xf.R%3B%0A%09%09%09%09%09%09%09tVec%20%3D%20cc.points%5B0%5D.localPoint%3B%0A%09%09%09%09%09%09%09const%20pointBX%20%3D%20cc.bodyB.m_xf.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09%09%09%09const%20pointBY%20%3D%20cc.bodyB.m_xf.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09%09%09%09const%20dX%20%3D%20pointBX%20-%20pointAX%3B%0A%09%09%09%09%09%09%09const%20dY%20%3D%20pointBY%20-%20pointAY%3B%0A%09%09%09%09%09%09%09const%20d2%20%3D%20dX%20*%20dX%20%2B%20dY%20*%20dY%3B%0A%09%09%09%09%09%09%09if%20(d2%20%3E%20Number.MIN_VALUE%20*%20Number.MIN_VALUE)%20%7B%0A%09%09%09%09%09%09%09%09const%20d%20%3D%20Math.sqrt(d2)%3B%0A%09%09%09%09%09%09%09%09this.m_normal.x%20%3D%20dX%20%2F%20d%3B%0A%09%09%09%09%09%09%09%09this.m_normal.y%20%3D%20dY%20%2F%20d%3B%0A%09%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09%09this.m_normal.x%20%3D%201.0%3B%0A%09%09%09%09%09%09%09%09this.m_normal.y%20%3D%200.0%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09this.m_points%5B0%5D.x%20%3D%200.5%20*%20(pointAX%20%2B%20pointBX)%3B%0A%09%09%09%09%09%09%09this.m_points%5B0%5D.y%20%3D%200.5%20*%20(pointAY%20%2B%20pointBY)%3B%0A%09%09%09%09%09%09%09this.m_separations%5B0%5D%20%3D%20dX%20*%20this.m_normal.x%20%2B%20dY%20*%20this.m_normal.y%20-%20cc.radius%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20b2Manifold.e_faceA%3A%0A%09%09%09%09%09%09%7B%0A%09%09%09%09%09%09%09tMat%20%3D%20cc.bodyA.m_xf.R%3B%0A%09%09%09%09%09%09%09tVec%20%3D%20cc.localPlaneNormal%3B%0A%09%09%09%09%09%09%09this.m_normal.x%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%09%09%09%09%09%09%09this.m_normal.y%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%09%09%09%09%09%09%09tMat%20%3D%20cc.bodyA.m_xf.R%3B%0A%09%09%09%09%09%09%09tVec%20%3D%20cc.localPoint%3B%0A%09%09%09%09%09%09%09planePointX%20%3D%20cc.bodyA.m_xf.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09%09%09%09planePointY%20%3D%20cc.bodyA.m_xf.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09%09%09%09tMat%20%3D%20cc.bodyB.m_xf.R%3B%0A%09%09%09%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09%09%09%09i%20%3C%20cc.pointCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09%09%09%09tVec%20%3D%20cc.points%5Bi%5D.localPoint%3B%0A%09%09%09%09%09%09%09%09clipPointX%20%3D%20cc.bodyB.m_xf.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09%09%09%09%09clipPointY%20%3D%20cc.bodyB.m_xf.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09%09%09%09%09this.m_separations%5Bi%5D%20%3D%20(clipPointX%20-%20planePointX)%20*%20this.m_normal.x%20%2B%20(clipPointY%20-%20planePointY)%20*%20this.m_normal.y%20-%20cc.radius%3B%0A%09%09%09%09%09%09%09%09this.m_points%5Bi%5D.x%20%3D%20clipPointX%3B%0A%09%09%09%09%09%09%09%09this.m_points%5Bi%5D.y%20%3D%20clipPointY%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%20b2Manifold.e_faceB%3A%0A%09%09%09%09%09%09%7B%0A%09%09%09%09%09%09%09tMat%20%3D%20cc.bodyB.m_xf.R%3B%0A%09%09%09%09%09%09%09tVec%20%3D%20cc.localPlaneNormal%3B%0A%09%09%09%09%09%09%09this.m_normal.x%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%09%09%09%09%09%09%09this.m_normal.y%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%09%09%09%09%09%09%09tMat%20%3D%20cc.bodyB.m_xf.R%3B%0A%09%09%09%09%09%09%09tVec%20%3D%20cc.localPoint%3B%0A%09%09%09%09%09%09%09planePointX%20%3D%20cc.bodyB.m_xf.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09%09%09%09planePointY%20%3D%20cc.bodyB.m_xf.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09%09%09%09tMat%20%3D%20cc.bodyA.m_xf.R%3B%0A%09%09%09%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09%09%09%09i%20%3C%20cc.pointCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09%09%09%09%09tVec%20%3D%20cc.points%5Bi%5D.localPoint%3B%0A%09%09%09%09%09%09%09%09clipPointX%20%3D%20cc.bodyA.m_xf.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09%09%09%09%09%09clipPointY%20%3D%20cc.bodyA.m_xf.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09%09%09%09%09%09this.m_separations%5Bi%5D%20%3D%20(clipPointX%20-%20planePointX)%20*%20this.m_normal.x%20%2B%20(clipPointY%20-%20planePointY)%20*%20this.m_normal.y%20-%20cc.radius%3B%0A%09%09%09%09%09%09%09%09this.m_points%5Bi%5D.Set(clipPointX%2C%20clipPointY)%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09this.m_normal.x%20*%3D%20(-1)%3B%0A%09%09%09%09%09%09%09this.m_normal.y%20*%3D%20(-1)%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Contacts.b2PositionSolverManifold%20%3D%20b2PositionSolverManifold%3B%0A%0A%09%09class%20b2Controller%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2Controller.b2Controller.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09Step(step)%20%7B%20%7D%0A%09%09%09Draw(debugDraw)%20%7B%20%7D%0A%0A%09%09%09AddBody(body)%20%7B%0A%09%09%09%09const%20edge%20%3D%20new%20b2ControllerEdge()%3B%0A%09%09%09%09edge.controller%20%3D%20this%3B%0A%09%09%09%09edge.body%20%3D%20body%3B%0A%09%09%09%09edge.nextBody%20%3D%20this.m_bodyList%3B%0A%09%09%09%09edge.prevBody%20%3D%20null%3B%0A%09%09%09%09this.m_bodyList%20%3D%20edge%3B%0A%09%09%09%09if%20(edge.nextBody)%20edge.nextBody.prevBody%20%3D%20edge%3B%0A%09%09%09%09this.m_bodyCount%2B%2B%3B%0A%09%09%09%09edge.nextController%20%3D%20body.m_controllerList%3B%0A%09%09%09%09edge.prevController%20%3D%20null%3B%0A%09%09%09%09body.m_controllerList%20%3D%20edge%3B%0A%09%09%09%09if%20(edge.nextController)%20edge.nextController.prevController%20%3D%20edge%3B%0A%09%09%09%09body.m_controllerCount%2B%2B%3B%0A%09%09%09%7D%0A%0A%09%09%09RemoveBody(body)%20%7B%0A%09%09%09%09let%20edge%20%3D%20body.m_controllerList%3B%0A%09%09%09%09while%20(edge%20%26%26%20edge.controller%20!%3D%20this)%20%7B%20edge%20%3D%20edge.nextController%3B%20%7D%0A%09%09%09%09if%20(edge.prevBody)%20edge.prevBody.nextBody%20%3D%20edge.nextBody%3B%0A%09%09%09%09if%20(edge.nextBody)%20edge.nextBody.prevBody%20%3D%20edge.prevBody%3B%0A%09%09%09%09if%20(edge.nextController)%20edge.nextController.prevController%20%3D%20edge.prevController%3B%0A%09%09%09%09if%20(edge.prevController)%20edge.prevController.nextController%20%3D%20edge.nextController%3B%0A%09%09%09%09if%20(this.m_bodyList%20%3D%3D%20edge)%20this.m_bodyList%20%3D%20edge.nextBody%3B%0A%09%09%09%09if%20(body.m_controllerList%20%3D%3D%20edge)%20body.m_controllerList%20%3D%20edge.nextController%3B%0A%09%09%09%09body.m_controllerCount--%3B%0A%09%09%09%09this.m_bodyCount--%3B%0A%09%09%09%7D%0A%0A%09%09%09Clear()%20%7B%0A%09%09%09%09while%20(this.m_bodyList)%20%7B%20this.RemoveBody(this.m_bodyList.body)%3B%20%7D%0A%09%09%09%7D%0A%0A%09%09%09GetNext()%20%7B%0A%09%09%09%09return%20this.m_next%3B%0A%09%09%09%7D%0A%0A%09%09%09GetWorld()%20%7B%0A%09%09%09%09return%20this.m_world%3B%0A%09%09%09%7D%0A%0A%09%09%09GetBodyList()%20%7B%0A%09%09%09%09return%20this.m_bodyList%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Controllers.b2Controller%20%3D%20b2Controller%3B%0A%0A%09%09class%20b2BuoyancyController%20extends%20b2Controller%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2BuoyancyController.b2BuoyancyController.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2BuoyancyController()%20%7B%0A%09%09%09%09Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.normal%20%3D%20new%20b2Vec2(0%2C%20(-1))%3B%0A%09%09%09%09this.offset%20%3D%200%3B%0A%09%09%09%09this.density%20%3D%200%3B%0A%09%09%09%09this.velocity%20%3D%20new%20b2Vec2(0%2C%200)%3B%0A%09%09%09%09this.linearDrag%20%3D%202%3B%0A%09%09%09%09this.angularDrag%20%3D%201%3B%0A%09%09%09%09this.useDensity%20%3D%20false%3B%0A%09%09%09%09this.useWorldGravity%20%3D%20true%3B%0A%09%09%09%09this.gravity%20%3D%20null%3B%0A%09%09%09%7D%0A%0A%09%09%09Step(step)%20%7B%0A%09%09%09%09if%20(!this.m_bodyList)%20return%3B%0A%09%09%09%09if%20(this.useWorldGravity)%20%7B%0A%09%09%09%09%09this.gravity%20%3D%20this.GetWorld().GetGravity().Copy()%3B%0A%09%09%09%09%7D%0A%09%09%09%09for%20(let%20i%20%3D%20this.m_bodyList%3B%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%09%09%09%09%09const%20body%20%3D%20i.body%3B%0A%09%09%09%09%09if%20(body.IsAwake()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09const%20areac%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09%09const%20massc%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09%09let%20area%20%3D%200.0%3B%0A%09%09%09%09%09let%20mass%20%3D%200.0%3B%0A%09%09%09%09%09for%20(let%20fixture%20%3D%20body.GetFixtureList()%3B%20fixture%3B%20fixture%20%3D%20fixture.GetNext())%20%7B%0A%09%09%09%09%09%09const%20sc%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09%09%09const%20sarea%20%3D%20fixture.GetShape().ComputeSubmergedArea(this.normal%2C%20this.offset%2C%20body.GetTransform()%2C%20sc)%3B%0A%09%09%09%09%09%09area%20%2B%3D%20sarea%3B%0A%09%09%09%09%09%09areac.x%20%2B%3D%20sarea%20*%20sc.x%3B%0A%09%09%09%09%09%09areac.y%20%2B%3D%20sarea%20*%20sc.y%3B%0A%09%09%09%09%09%09let%20shapeDensity%20%3D%200%3B%0A%09%09%09%09%09%09if%20(this.useDensity)%20%7B%0A%09%09%09%09%09%09%09shapeDensity%20%3D%201%3B%0A%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09shapeDensity%20%3D%201%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09mass%20%2B%3D%20sarea%20*%20shapeDensity%3B%0A%09%09%09%09%09%09massc.x%20%2B%3D%20sarea%20*%20sc.x%20*%20shapeDensity%3B%0A%09%09%09%09%09%09massc.y%20%2B%3D%20sarea%20*%20sc.y%20*%20shapeDensity%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09areac.x%20%2F%3D%20area%3B%0A%09%09%09%09%09areac.y%20%2F%3D%20area%3B%0A%09%09%09%09%09massc.x%20%2F%3D%20mass%3B%0A%09%09%09%09%09massc.y%20%2F%3D%20mass%3B%0A%09%09%09%09%09if%20(area%20%3C%20Number.MIN_VALUE)%20continue%3B%0A%09%09%09%09%09const%20buoyancyForce%20%3D%20this.gravity.GetNegative()%3B%0A%09%09%09%09%09buoyancyForce.Multiply(this.density%20*%20area)%3B%0A%09%09%09%09%09body.ApplyForce(buoyancyForce%2C%20massc)%3B%0A%09%09%09%09%09const%20dragForce%20%3D%20body.GetLinearVelocityFromWorldPoint(areac)%3B%0A%09%09%09%09%09dragForce.Subtract(this.velocity)%3B%0A%09%09%09%09%09dragForce.Multiply((-this.linearDrag%20*%20area))%3B%0A%09%09%09%09%09body.ApplyForce(dragForce%2C%20areac)%3B%0A%09%09%09%09%09body.ApplyTorque((-body.GetInertia()%20%2F%20body.GetMass()%20*%20area%20*%20body.GetAngularVelocity()%20*%20this.angularDrag))%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09Draw(debugDraw)%20%7B%0A%09%09%09%09const%20r%20%3D%201000%3B%0A%09%09%09%09const%20p1%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09const%20p2%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09p1.x%20%3D%20this.normal.x%20*%20this.offset%20%2B%20this.normal.y%20*%20r%3B%0A%09%09%09%09p1.y%20%3D%20this.normal.y%20*%20this.offset%20-%20this.normal.x%20*%20r%3B%0A%09%09%09%09p2.x%20%3D%20this.normal.x%20*%20this.offset%20-%20this.normal.y%20*%20r%3B%0A%09%09%09%09p2.y%20%3D%20this.normal.y%20*%20this.offset%20%2B%20this.normal.x%20*%20r%3B%0A%09%09%09%09const%20color%20%3D%20new%20b2Color(0%2C%200%2C%201)%3B%0A%09%09%09%09debugDraw.DrawSegment(p1%2C%20p2%2C%20color)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Controllers.b2BuoyancyController%20%3D%20b2BuoyancyController%3B%0A%0A%09%09class%20b2ConstantAccelController%20extends%20b2Controller%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2ConstantAccelController.b2ConstantAccelController.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2ConstantAccelController()%20%7B%0A%09%09%09%09Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.A%20%3D%20new%20b2Vec2(0%2C%200)%3B%0A%09%09%09%7D%0A%0A%09%09%09Step(step)%20%7B%0A%09%09%09%09const%20smallA%20%3D%20new%20b2Vec2(this.A.x%20*%20step.dt%2C%20this.A.y%20*%20step.dt)%3B%0A%09%09%09%09for%20(let%20i%20%3D%20this.m_bodyList%3B%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%09%09%09%09%09const%20body%20%3D%20i.body%3B%0A%09%09%09%09%09if%20(!body.IsAwake())%20continue%3B%0A%09%09%09%09%09body.SetLinearVelocity(new%20b2Vec2(body.GetLinearVelocity().x%20%2B%20smallA.x%2C%20body.GetLinearVelocity().y%20%2B%20smallA.y))%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Controllers.b2ConstantAccelController%20%3D%20b2ConstantAccelController%3B%0A%0A%09%09class%20b2ConstantForceController%20extends%20b2Controller%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2ConstantForceController.b2ConstantForceController.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2ConstantForceController()%20%7B%0A%09%09%09%09Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.F%20%3D%20new%20b2Vec2(0%2C%200)%3B%0A%09%09%09%7D%0A%0A%09%09%09Step(step)%20%7B%0A%09%09%09%09for%20(let%20i%20%3D%20this.m_bodyList%3B%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%09%09%09%09%09const%20body%20%3D%20i.body%3B%0A%09%09%09%09%09if%20(!body.IsAwake())%20continue%3B%0A%09%09%09%09%09body.ApplyForce(this.F%2C%20body.GetWorldCenter())%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Controllers.b2ConstantForceController%20%3D%20b2ConstantForceController%3B%0A%0A%09%09function%20b2ControllerEdge()%20%7B%0A%09%09%09b2ControllerEdge.b2ControllerEdge.apply(this%2C%20arguments)%3B%0A%09%09%7D%0A%09%09Box2D.Dynamics.Controllers.b2ControllerEdge%20%3D%20b2ControllerEdge%3B%0A%0A%09%09class%20b2GravityController%20extends%20b2Controller%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2GravityController.b2GravityController.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2GravityController()%20%7B%0A%09%09%09%09Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.G%20%3D%201%3B%0A%09%09%09%09this.invSqr%20%3D%20true%3B%0A%09%09%09%7D%0A%0A%09%09%09Step(step)%20%7B%0A%09%09%09%09let%20i%20%3D%20null%3B%0A%09%09%09%09let%20body1%20%3D%20null%3B%0A%09%09%09%09let%20p1%20%3D%20null%3B%0A%09%09%09%09let%20mass1%20%3D%200%3B%0A%09%09%09%09let%20j%20%3D%20null%3B%0A%09%09%09%09let%20body2%20%3D%20null%3B%0A%09%09%09%09let%20p2%20%3D%20null%3B%0A%09%09%09%09let%20dx%20%3D%200%3B%0A%09%09%09%09let%20dy%20%3D%200%3B%0A%09%09%09%09let%20r2%20%3D%200%3B%0A%09%09%09%09let%20f%20%3D%20null%3B%0A%09%09%09%09if%20(this.invSqr)%20%7B%0A%09%09%09%09%09for%20(i%20%3D%20this.m_bodyList%3B%0A%09%09%09%09%09%09i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%09%09%09%09%09%09body1%20%3D%20i.body%3B%0A%09%09%09%09%09%09p1%20%3D%20body1.GetWorldCenter()%3B%0A%09%09%09%09%09%09mass1%20%3D%20body1.GetMass()%3B%0A%09%09%09%09%09%09for%20(j%20%3D%20this.m_bodyList%3B%0A%09%09%09%09%09%09%09j%20!%3D%20i%3B%20j%20%3D%20j.nextBody)%20%7B%0A%09%09%09%09%09%09%09body2%20%3D%20j.body%3B%0A%09%09%09%09%09%09%09p2%20%3D%20body2.GetWorldCenter()%3B%0A%09%09%09%09%09%09%09dx%20%3D%20p2.x%20-%20p1.x%3B%0A%09%09%09%09%09%09%09dy%20%3D%20p2.y%20-%20p1.y%3B%0A%09%09%09%09%09%09%09r2%20%3D%20dx%20*%20dx%20%2B%20dy%20*%20dy%3B%0A%09%09%09%09%09%09%09if%20(r2%20%3C%20Number.MIN_VALUE)%20continue%3B%0A%09%09%09%09%09%09%09f%20%3D%20new%20b2Vec2(dx%2C%20dy)%3B%0A%09%09%09%09%09%09%09f.Multiply(this.G%20%2F%20r2%20%2F%20Math.sqrt(r2)%20*%20mass1%20*%20body2.GetMass())%3B%0A%09%09%09%09%09%09%09if%20(body1.IsAwake())%20body1.ApplyForce(f%2C%20p1)%3B%0A%09%09%09%09%09%09%09f.Multiply((-1))%3B%0A%09%09%09%09%09%09%09if%20(body2.IsAwake())%20body2.ApplyForce(f%2C%20p2)%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09for%20(i%20%3D%20this.m_bodyList%3B%0A%09%09%09%09%09%09i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%09%09%09%09%09%09body1%20%3D%20i.body%3B%0A%09%09%09%09%09%09p1%20%3D%20body1.GetWorldCenter()%3B%0A%09%09%09%09%09%09mass1%20%3D%20body1.GetMass()%3B%0A%09%09%09%09%09%09for%20(j%20%3D%20this.m_bodyList%3B%0A%09%09%09%09%09%09%09j%20!%3D%20i%3B%20j%20%3D%20j.nextBody)%20%7B%0A%09%09%09%09%09%09%09body2%20%3D%20j.body%3B%0A%09%09%09%09%09%09%09p2%20%3D%20body2.GetWorldCenter()%3B%0A%09%09%09%09%09%09%09dx%20%3D%20p2.x%20-%20p1.x%3B%0A%09%09%09%09%09%09%09dy%20%3D%20p2.y%20-%20p1.y%3B%0A%09%09%09%09%09%09%09r2%20%3D%20dx%20*%20dx%20%2B%20dy%20*%20dy%3B%0A%09%09%09%09%09%09%09if%20(r2%20%3C%20Number.MIN_VALUE)%20continue%3B%0A%09%09%09%09%09%09%09f%20%3D%20new%20b2Vec2(dx%2C%20dy)%3B%0A%09%09%09%09%09%09%09f.Multiply(this.G%20%2F%20r2%20*%20mass1%20*%20body2.GetMass())%3B%0A%09%09%09%09%09%09%09if%20(body1.IsAwake())%20body1.ApplyForce(f%2C%20p1)%3B%0A%09%09%09%09%09%09%09f.Multiply((-1))%3B%0A%09%09%09%09%09%09%09if%20(body2.IsAwake())%20body2.ApplyForce(f%2C%20p2)%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Controllers.b2GravityController%20%3D%20b2GravityController%3B%0A%0A%09%09class%20b2TensorDampingController%20extends%20b2Controller%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2TensorDampingController.b2TensorDampingController.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2TensorDampingController()%20%7B%0A%09%09%09%09Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.T%20%3D%20new%20b2Mat22()%3B%0A%09%09%09%09this.maxTimestep%20%3D%200%3B%0A%09%09%09%7D%0A%0A%09%09%09SetAxisAligned(xDamping%2C%20yDamping)%20%7B%0A%09%09%09%09if%20(xDamping%20%3D%3D%3D%20undefined)%20xDamping%20%3D%200%3B%0A%09%09%09%09if%20(yDamping%20%3D%3D%3D%20undefined)%20yDamping%20%3D%200%3B%0A%09%09%09%09this.T.col1.x%20%3D%20(-xDamping)%3B%0A%09%09%09%09this.T.col1.y%20%3D%200%3B%0A%09%09%09%09this.T.col2.x%20%3D%200%3B%0A%09%09%09%09this.T.col2.y%20%3D%20(-yDamping)%3B%0A%09%09%09%09if%20(xDamping%20%3E%200%20%7C%7C%20yDamping%20%3E%200)%20%7B%0A%09%09%09%09%09this.maxTimestep%20%3D%201%20%2F%20Math.max(xDamping%2C%20yDamping)%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.maxTimestep%20%3D%200%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09Step(step)%20%7B%0A%09%09%09%09let%20timestep%20%3D%20step.dt%3B%0A%09%09%09%09if%20(timestep%20%3C%3D%20Number.MIN_VALUE)%20return%3B%0A%09%09%09%09if%20(timestep%20%3E%20this.maxTimestep%20%26%26%20this.maxTimestep%20%3E%200)%20timestep%20%3D%20this.maxTimestep%3B%0A%09%09%09%09for%20(let%20i%20%3D%20this.m_bodyList%3B%20i%3B%20i%20%3D%20i.nextBody)%20%7B%0A%09%09%09%09%09const%20body%20%3D%20i.body%3B%0A%09%09%09%09%09if%20(!body.IsAwake())%20%7B%0A%09%09%09%09%09%09continue%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09const%20damping%20%3D%20body.GetWorldVector(b2Math.MulMV(this.T%2C%20body.GetLocalVector(body.GetLinearVelocity())))%3B%0A%09%09%09%09%09body.SetLinearVelocity(new%20b2Vec2(body.GetLinearVelocity().x%20%2B%20damping.x%20*%20timestep%2C%20body.GetLinearVelocity().y%20%2B%20damping.y%20*%20timestep))%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Controllers.b2TensorDampingController%20%3D%20b2TensorDampingController%3B%0A%0A%09%09class%20b2Joint%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2Joint)%20this.b2Joint.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2Joint()%20%7B%0A%09%09%09%09this.m_edgeA%20%3D%20new%20b2JointEdge()%3B%0A%09%09%09%09this.m_edgeB%20%3D%20new%20b2JointEdge()%3B%0A%09%09%09%09this.m_localCenterA%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_localCenterB%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09GetType()%20%7B%0A%09%09%09%09return%20this.m_type%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAnchorA()%20%7B%0A%09%09%09%09return%20null%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAnchorB()%20%7B%0A%09%09%09%09return%20null%3B%0A%09%09%09%7D%0A%0A%09%09%09GetReactionForce(inv_dt)%20%7B%0A%09%09%09%09if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%09%09%09%09return%20null%3B%0A%09%09%09%7D%0A%0A%09%09%09GetReactionTorque(inv_dt)%20%7B%0A%09%09%09%09if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%09%09%09%09return%200.0%3B%0A%09%09%09%7D%0A%0A%09%09%09GetBodyA()%20%7B%0A%09%09%09%09return%20this.m_bodyA%3B%0A%09%09%09%7D%0A%0A%09%09%09GetBodyB()%20%7B%0A%09%09%09%09return%20this.m_bodyB%3B%0A%09%09%09%7D%0A%0A%09%09%09GetNext()%20%7B%0A%09%09%09%09return%20this.m_next%3B%0A%09%09%09%7D%0A%0A%09%09%09GetUserData()%20%7B%0A%09%09%09%09return%20this.m_userData%3B%0A%09%09%09%7D%0A%0A%09%09%09SetUserData(data)%20%7B%0A%09%09%09%09this.m_userData%20%3D%20data%3B%0A%09%09%09%7D%0A%0A%09%09%09IsActive()%20%7B%0A%09%09%09%09return%20this.m_bodyA.IsActive()%20%26%26%20this.m_bodyB.IsActive()%3B%0A%09%09%09%7D%0A%0A%09%09%09b2Joint(def)%20%7B%0A%09%09%09%09b2Settings.b2Assert(def.bodyA%20!%3D%20def.bodyB)%3B%0A%09%09%09%09this.m_type%20%3D%20def.type%3B%0A%09%09%09%09this.m_prev%20%3D%20null%3B%0A%09%09%09%09this.m_next%20%3D%20null%3B%0A%09%09%09%09this.m_bodyA%20%3D%20def.bodyA%3B%0A%09%09%09%09this.m_bodyB%20%3D%20def.bodyB%3B%0A%09%09%09%09this.m_collideConnected%20%3D%20def.collideConnected%3B%0A%09%09%09%09this.m_islandFlag%20%3D%20false%3B%0A%09%09%09%09this.m_userData%20%3D%20def.userData%3B%0A%09%09%09%7D%0A%0A%09%09%09InitVelocityConstraints(step)%20%7B%20%7D%0A%09%09%09SolveVelocityConstraints(step)%20%7B%20%7D%0A%09%09%09FinalizeVelocityConstraints()%20%7B%20%7D%0A%0A%09%09%09SolvePositionConstraints(baumgarte)%20%7B%0A%09%09%09%09if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%09%09%09%09return%20false%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Joints.b2Joint%20%3D%20b2Joint%3B%0A%0A%09%09class%20b2JointDef%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2JointDef)%20this.b2JointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09b2JointDef()%20%7B%0A%09%09%09%09this.type%20%3D%20b2Joint.e_unknownJoint%3B%0A%09%09%09%09this.userData%20%3D%20null%3B%0A%09%09%09%09this.bodyA%20%3D%20null%3B%0A%09%09%09%09this.bodyB%20%3D%20null%3B%0A%09%09%09%09this.collideConnected%20%3D%20false%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Joints.b2JointDef%20%3D%20b2JointDef%3B%0A%0A%09%09class%20b2DistanceJointDef%20extends%20b2JointDef%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2DistanceJointDef.b2DistanceJointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2DistanceJointDef)%20this.b2DistanceJointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2DistanceJointDef()%20%7B%0A%09%09%09%09Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09b2DistanceJointDef()%20%7B%0A%09%09%09%09this.__super.b2JointDef.call(this)%3B%0A%09%09%09%09this.type%20%3D%20b2Joint.e_distanceJoint%3B%0A%09%09%09%09this.length%20%3D%201.0%3B%0A%09%09%09%09this.frequencyHz%20%3D%200.0%3B%0A%09%09%09%09this.dampingRatio%20%3D%200.0%3B%0A%09%09%09%7D%0A%0A%09%09%09Initialize(bA%2C%20bB%2C%20anchorA%2C%20anchorB)%20%7B%0A%09%09%09%09this.bodyA%20%3D%20bA%3B%0A%09%09%09%09this.bodyB%20%3D%20bB%3B%0A%09%09%09%09this.localAnchorA.SetV(this.bodyA.GetLocalPoint(anchorA))%3B%0A%09%09%09%09this.localAnchorB.SetV(this.bodyB.GetLocalPoint(anchorB))%3B%0A%09%09%09%09const%20dX%20%3D%20anchorB.x%20-%20anchorA.x%3B%0A%09%09%09%09const%20dY%20%3D%20anchorB.y%20-%20anchorA.y%3B%0A%09%09%09%09this.length%20%3D%20Math.sqrt(dX%20*%20dX%20%2B%20dY%20*%20dY)%3B%0A%09%09%09%09this.frequencyHz%20%3D%200.0%3B%0A%09%09%09%09this.dampingRatio%20%3D%200.0%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Joints.b2DistanceJointDef%20%3D%20b2DistanceJointDef%3B%0A%0A%09%09class%20b2FrictionJoint%20extends%20b2Joint%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2FrictionJoint.b2FrictionJoint.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2FrictionJoint)%20this.b2FrictionJoint.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2FrictionJoint()%20%7B%0A%09%09%09%09Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.m_localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_linearMass%20%3D%20new%20b2Mat22()%3B%0A%09%09%09%09this.m_linearImpulse%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAnchorA()%20%7B%0A%09%09%09%09return%20this.m_bodyA.GetWorldPoint(this.m_localAnchorA)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAnchorB()%20%7B%0A%09%09%09%09return%20this.m_bodyB.GetWorldPoint(this.m_localAnchorB)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetReactionForce(inv_dt)%20%7B%0A%09%09%09%09if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%09%09%09%09return%20new%20b2Vec2(inv_dt%20*%20this.m_linearImpulse.x%2C%20inv_dt%20*%20this.m_linearImpulse.y)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetReactionTorque(inv_dt)%20%7B%0A%09%09%09%09if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%09%09%09%09return%20inv_dt%20*%20this.m_angularImpulse%3B%0A%09%09%09%7D%0A%0A%09%09%09SetMaxForce(force)%20%7B%0A%09%09%09%09if%20(force%20%3D%3D%3D%20undefined)%20force%20%3D%200%3B%0A%09%09%09%09this.m_maxForce%20%3D%20force%3B%0A%09%09%09%7D%0A%0A%09%09%09GetMaxForce()%20%7B%0A%09%09%09%09return%20this.m_maxForce%3B%0A%09%09%09%7D%0A%0A%09%09%09SetMaxTorque(torque)%20%7B%0A%09%09%09%09if%20(torque%20%3D%3D%3D%20undefined)%20torque%20%3D%200%3B%0A%09%09%09%09this.m_maxTorque%20%3D%20torque%3B%0A%09%09%09%7D%0A%0A%09%09%09GetMaxTorque()%20%7B%0A%09%09%09%09return%20this.m_maxTorque%3B%0A%09%09%09%7D%0A%0A%09%09%09b2FrictionJoint(def)%20%7B%0A%09%09%09%09this.__super.b2Joint.call(this%2C%20def)%3B%0A%09%09%09%09this.m_localAnchorA.SetV(def.localAnchorA)%3B%0A%09%09%09%09this.m_localAnchorB.SetV(def.localAnchorB)%3B%0A%09%09%09%09this.m_linearMass.SetZero()%3B%0A%09%09%09%09this.m_angularMass%20%3D%200.0%3B%0A%09%09%09%09this.m_linearImpulse.SetZero()%3B%0A%09%09%09%09this.m_angularImpulse%20%3D%200.0%3B%0A%09%09%09%09this.m_maxForce%20%3D%20def.maxForce%3B%0A%09%09%09%09this.m_maxTorque%20%3D%20def.maxTorque%3B%0A%09%09%09%7D%0A%0A%09%09%09InitVelocityConstraints(step)%20%7B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09let%20tX%20%3D%200%3B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09tMat%20%3D%20bA.m_xf.R%3B%0A%09%09%09%09let%20rAX%20%3D%20this.m_localAnchorA.x%20-%20bA.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20rAY%20%3D%20this.m_localAnchorA.y%20-%20bA.m_sweep.localCenter.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20rAX%20%2B%20tMat.col2.x%20*%20rAY)%3B%0A%09%09%09%09rAY%20%3D%20(tMat.col1.y%20*%20rAX%20%2B%20tMat.col2.y%20*%20rAY)%3B%0A%09%09%09%09rAX%20%3D%20tX%3B%0A%09%09%09%09tMat%20%3D%20bB.m_xf.R%3B%0A%09%09%09%09let%20rBX%20%3D%20this.m_localAnchorB.x%20-%20bB.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20rBY%20%3D%20this.m_localAnchorB.y%20-%20bB.m_sweep.localCenter.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20rBX%20%2B%20tMat.col2.x%20*%20rBY)%3B%0A%09%09%09%09rBY%20%3D%20(tMat.col1.y%20*%20rBX%20%2B%20tMat.col2.y%20*%20rBY)%3B%0A%09%09%09%09rBX%20%3D%20tX%3B%0A%09%09%09%09const%20mA%20%3D%20bA.m_invMass%3B%0A%09%09%09%09const%20mB%20%3D%20bB.m_invMass%3B%0A%09%09%09%09const%20iA%20%3D%20bA.m_invI%3B%0A%09%09%09%09const%20iB%20%3D%20bB.m_invI%3B%0A%09%09%09%09const%20K%20%3D%20new%20b2Mat22()%3B%0A%09%09%09%09K.col1.x%20%3D%20mA%20%2B%20mB%3B%0A%09%09%09%09K.col2.x%20%3D%200.0%3B%0A%09%09%09%09K.col1.y%20%3D%200.0%3B%0A%09%09%09%09K.col2.y%20%3D%20mA%20%2B%20mB%3B%0A%09%09%09%09K.col1.x%20%2B%3D%20iA%20*%20rAY%20*%20rAY%3B%0A%09%09%09%09K.col2.x%20%2B%3D%20(-iA%20*%20rAX%20*%20rAY)%3B%0A%09%09%09%09K.col1.y%20%2B%3D%20(-iA%20*%20rAX%20*%20rAY)%3B%0A%09%09%09%09K.col2.y%20%2B%3D%20iA%20*%20rAX%20*%20rAX%3B%0A%09%09%09%09K.col1.x%20%2B%3D%20iB%20*%20rBY%20*%20rBY%3B%0A%09%09%09%09K.col2.x%20%2B%3D%20(-iB%20*%20rBX%20*%20rBY)%3B%0A%09%09%09%09K.col1.y%20%2B%3D%20(-iB%20*%20rBX%20*%20rBY)%3B%0A%09%09%09%09K.col2.y%20%2B%3D%20iB%20*%20rBX%20*%20rBX%3B%0A%09%09%09%09K.GetInverse(this.m_linearMass)%3B%0A%09%09%09%09this.m_angularMass%20%3D%20iA%20%2B%20iB%3B%0A%09%09%09%09if%20(this.m_angularMass%20%3E%200.0)%20%7B%0A%09%09%09%09%09this.m_angularMass%20%3D%201.0%20%2F%20this.m_angularMass%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(step.warmStarting)%20%7B%0A%09%09%09%09%09this.m_linearImpulse.x%20*%3D%20step.dtRatio%3B%0A%09%09%09%09%09this.m_linearImpulse.y%20*%3D%20step.dtRatio%3B%0A%09%09%09%09%09this.m_angularImpulse%20*%3D%20step.dtRatio%3B%0A%09%09%09%09%09const%20P%20%3D%20this.m_linearImpulse%3B%0A%09%09%09%09%09bA.m_linearVelocity.x%20-%3D%20mA%20*%20P.x%3B%0A%09%09%09%09%09bA.m_linearVelocity.y%20-%3D%20mA%20*%20P.y%3B%0A%09%09%09%09%09bA.m_angularVelocity%20-%3D%20iA%20*%20(rAX%20*%20P.y%20-%20rAY%20*%20P.x%20%2B%20this.m_angularImpulse)%3B%0A%09%09%09%09%09bB.m_linearVelocity.x%20%2B%3D%20mB%20*%20P.x%3B%0A%09%09%09%09%09bB.m_linearVelocity.y%20%2B%3D%20mB%20*%20P.y%3B%0A%09%09%09%09%09bB.m_angularVelocity%20%2B%3D%20iB%20*%20(rBX%20*%20P.y%20-%20rBY%20*%20P.x%20%2B%20this.m_angularImpulse)%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_linearImpulse.SetZero()%3B%0A%09%09%09%09%09this.m_angularImpulse%20%3D%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09SolveVelocityConstraints(step)%20%7B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09let%20tX%20%3D%200%3B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09const%20vA%20%3D%20bA.m_linearVelocity%3B%0A%09%09%09%09let%20wA%20%3D%20bA.m_angularVelocity%3B%0A%09%09%09%09const%20vB%20%3D%20bB.m_linearVelocity%3B%0A%09%09%09%09let%20wB%20%3D%20bB.m_angularVelocity%3B%0A%09%09%09%09const%20mA%20%3D%20bA.m_invMass%3B%0A%09%09%09%09const%20mB%20%3D%20bB.m_invMass%3B%0A%09%09%09%09const%20iA%20%3D%20bA.m_invI%3B%0A%09%09%09%09const%20iB%20%3D%20bB.m_invI%3B%0A%09%09%09%09tMat%20%3D%20bA.m_xf.R%3B%0A%09%09%09%09let%20rAX%20%3D%20this.m_localAnchorA.x%20-%20bA.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20rAY%20%3D%20this.m_localAnchorA.y%20-%20bA.m_sweep.localCenter.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20rAX%20%2B%20tMat.col2.x%20*%20rAY)%3B%0A%09%09%09%09rAY%20%3D%20(tMat.col1.y%20*%20rAX%20%2B%20tMat.col2.y%20*%20rAY)%3B%0A%09%09%09%09rAX%20%3D%20tX%3B%0A%09%09%09%09tMat%20%3D%20bB.m_xf.R%3B%0A%09%09%09%09let%20rBX%20%3D%20this.m_localAnchorB.x%20-%20bB.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20rBY%20%3D%20this.m_localAnchorB.y%20-%20bB.m_sweep.localCenter.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20rBX%20%2B%20tMat.col2.x%20*%20rBY)%3B%0A%09%09%09%09rBY%20%3D%20(tMat.col1.y%20*%20rBX%20%2B%20tMat.col2.y%20*%20rBY)%3B%0A%09%09%09%09rBX%20%3D%20tX%3B%0A%09%09%09%09let%20maxImpulse%20%3D%200%3B%20%7B%0A%09%09%09%09%09const%20Cdot%20%3D%20wB%20-%20wA%3B%0A%09%09%09%09%09let%20impulse%20%3D%20(-this.m_angularMass%20*%20Cdot)%3B%0A%09%09%09%09%09const%20oldImpulse%20%3D%20this.m_angularImpulse%3B%0A%09%09%09%09%09maxImpulse%20%3D%20step.dt%20*%20this.m_maxTorque%3B%0A%09%09%09%09%09this.m_angularImpulse%20%3D%20b2Math.Clamp(this.m_angularImpulse%20%2B%20impulse%2C%20(-maxImpulse)%2C%20maxImpulse)%3B%0A%09%09%09%09%09impulse%20%3D%20this.m_angularImpulse%20-%20oldImpulse%3B%0A%09%09%09%09%09wA%20-%3D%20iA%20*%20impulse%3B%0A%09%09%09%09%09wB%20%2B%3D%20iB%20*%20impulse%3B%0A%09%09%09%09%7D%20%7B%0A%09%09%09%09%09const%20CdotX%20%3D%20vB.x%20-%20wB%20*%20rBY%20-%20vA.x%20%2B%20wA%20*%20rAY%3B%0A%09%09%09%09%09const%20CdotY%20%3D%20vB.y%20%2B%20wB%20*%20rBX%20-%20vA.y%20-%20wA%20*%20rAX%3B%0A%09%09%09%09%09let%20impulseV%20%3D%20b2Math.MulMV(this.m_linearMass%2C%20new%20b2Vec2((-CdotX)%2C%20(-CdotY)))%3B%0A%09%09%09%09%09const%20oldImpulseV%20%3D%20this.m_linearImpulse.Copy()%3B%0A%09%09%09%09%09this.m_linearImpulse.Add(impulseV)%3B%0A%09%09%09%09%09maxImpulse%20%3D%20step.dt%20*%20this.m_maxForce%3B%0A%09%09%09%09%09if%20(this.m_linearImpulse.LengthSquared()%20%3E%20maxImpulse%20*%20maxImpulse)%20%7B%0A%09%09%09%09%09%09this.m_linearImpulse.Normalize()%3B%0A%09%09%09%09%09%09this.m_linearImpulse.Multiply(maxImpulse)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09impulseV%20%3D%20b2Math.SubtractVV(this.m_linearImpulse%2C%20oldImpulseV)%3B%0A%09%09%09%09%09vA.x%20-%3D%20mA%20*%20impulseV.x%3B%0A%09%09%09%09%09vA.y%20-%3D%20mA%20*%20impulseV.y%3B%0A%09%09%09%09%09wA%20-%3D%20iA%20*%20(rAX%20*%20impulseV.y%20-%20rAY%20*%20impulseV.x)%3B%0A%09%09%09%09%09vB.x%20%2B%3D%20mB%20*%20impulseV.x%3B%0A%09%09%09%09%09vB.y%20%2B%3D%20mB%20*%20impulseV.y%3B%0A%09%09%09%09%09wB%20%2B%3D%20iB%20*%20(rBX%20*%20impulseV.y%20-%20rBY%20*%20impulseV.x)%3B%0A%09%09%09%09%7D%0A%09%09%09%09bA.m_angularVelocity%20%3D%20wA%3B%0A%09%09%09%09bB.m_angularVelocity%20%3D%20wB%3B%0A%09%09%09%7D%0A%0A%09%09%09SolvePositionConstraints(baumgarte)%20%7B%0A%09%09%09%09if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%09%09%09%09return%20true%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Joints.b2FrictionJoint%20%3D%20b2FrictionJoint%3B%0A%0A%09%09class%20b2FrictionJointDef%20extends%20b2JointDef%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2FrictionJointDef.b2FrictionJointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2FrictionJointDef)%20this.b2FrictionJointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2FrictionJointDef()%20%7B%0A%09%09%09%09Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09b2FrictionJointDef()%20%7B%0A%09%09%09%09this.__super.b2JointDef.call(this)%3B%0A%09%09%09%09this.type%20%3D%20b2Joint.e_frictionJoint%3B%0A%09%09%09%09this.maxForce%20%3D%200.0%3B%0A%09%09%09%09this.maxTorque%20%3D%200.0%3B%0A%09%09%09%7D%0A%0A%09%09%09Initialize(bA%2C%20bB%2C%20anchor)%20%7B%0A%09%09%09%09this.bodyA%20%3D%20bA%3B%0A%09%09%09%09this.bodyB%20%3D%20bB%3B%0A%09%09%09%09this.localAnchorA.SetV(this.bodyA.GetLocalPoint(anchor))%3B%0A%09%09%09%09this.localAnchorB.SetV(this.bodyB.GetLocalPoint(anchor))%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Joints.b2FrictionJointDef%20%3D%20b2FrictionJointDef%3B%0A%0A%09%09class%20b2GearJoint%20extends%20b2Joint%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2GearJoint.b2GearJoint.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2GearJoint)%20this.b2GearJoint.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2GearJoint()%20%7B%0A%09%09%09%09Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.m_groundAnchor1%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_groundAnchor2%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_J%20%3D%20new%20b2Jacobian()%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAnchorA()%20%7B%0A%09%09%09%09return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAnchorB()%20%7B%0A%09%09%09%09return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetReactionForce(inv_dt)%20%7B%0A%09%09%09%09if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%09%09%09%09return%20new%20b2Vec2(inv_dt%20*%20this.m_impulse%20*%20this.m_J.linearB.x%2C%20inv_dt%20*%20this.m_impulse%20*%20this.m_J.linearB.y)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetReactionTorque(inv_dt)%20%7B%0A%09%09%09%09if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%09%09%09%09const%20tMat%20%3D%20this.m_bodyB.m_xf.R%3B%0A%09%09%09%09let%20rX%20%3D%20this.m_localAnchor1.x%20-%20this.m_bodyB.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20rY%20%3D%20this.m_localAnchor1.y%20-%20this.m_bodyB.m_sweep.localCenter.y%3B%0A%09%09%09%09const%20tX%20%3D%20tMat.col1.x%20*%20rX%20%2B%20tMat.col2.x%20*%20rY%3B%0A%09%09%09%09rY%20%3D%20tMat.col1.y%20*%20rX%20%2B%20tMat.col2.y%20*%20rY%3B%0A%09%09%09%09rX%20%3D%20tX%3B%0A%09%09%09%09const%20PX%20%3D%20this.m_impulse%20*%20this.m_J.linearB.x%3B%0A%09%09%09%09const%20PY%20%3D%20this.m_impulse%20*%20this.m_J.linearB.y%3B%0A%09%09%09%09return%20inv_dt%20*%20(this.m_impulse%20*%20this.m_J.angularB%20-%20rX%20*%20PY%20%2B%20rY%20*%20PX)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetRatio()%20%7B%0A%09%09%09%09return%20this.m_ratio%3B%0A%09%09%09%7D%0A%0A%09%09%09SetRatio(ratio)%20%7B%0A%09%09%09%09if%20(ratio%20%3D%3D%3D%20undefined)%20ratio%20%3D%200%3B%0A%09%09%09%09this.m_ratio%20%3D%20ratio%3B%0A%09%09%09%7D%0A%0A%09%09%09b2GearJoint(def)%20%7B%0A%09%09%09%09this.__super.b2Joint.call(this%2C%20def)%3B%0A%09%09%09%09const%20type1%20%3D%20parseInt(def.joint1.m_type)%3B%0A%09%09%09%09const%20type2%20%3D%20parseInt(def.joint2.m_type)%3B%0A%09%09%09%09this.m_revolute1%20%3D%20null%3B%0A%09%09%09%09this.m_prismatic1%20%3D%20null%3B%0A%09%09%09%09this.m_revolute2%20%3D%20null%3B%0A%09%09%09%09this.m_prismatic2%20%3D%20null%3B%0A%09%09%09%09let%20coordinate1%20%3D%200%3B%0A%09%09%09%09let%20coordinate2%20%3D%200%3B%0A%09%09%09%09this.m_ground1%20%3D%20def.joint1.GetBodyA()%3B%0A%09%09%09%09this.m_bodyA%20%3D%20def.joint1.GetBodyB()%3B%0A%09%09%09%09if%20(type1%20%3D%3D%20b2Joint.e_revoluteJoint)%20%7B%0A%09%09%09%09%09this.m_revolute1%20%3D%20(def.joint1%20instanceof%20b2RevoluteJoint%20%3F%20def.joint1%20%3A%20null)%3B%0A%09%09%09%09%09this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1)%3B%0A%09%09%09%09%09this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2)%3B%0A%09%09%09%09%09coordinate1%20%3D%20this.m_revolute1.GetJointAngle()%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_prismatic1%20%3D%20(def.joint1%20instanceof%20b2PrismaticJoint%20%3F%20def.joint1%20%3A%20null)%3B%0A%09%09%09%09%09this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1)%3B%0A%09%09%09%09%09this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2)%3B%0A%09%09%09%09%09coordinate1%20%3D%20this.m_prismatic1.GetJointTranslation()%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_ground2%20%3D%20def.joint2.GetBodyA()%3B%0A%09%09%09%09this.m_bodyB%20%3D%20def.joint2.GetBodyB()%3B%0A%09%09%09%09if%20(type2%20%3D%3D%20b2Joint.e_revoluteJoint)%20%7B%0A%09%09%09%09%09this.m_revolute2%20%3D%20(def.joint2%20instanceof%20b2RevoluteJoint%20%3F%20def.joint2%20%3A%20null)%3B%0A%09%09%09%09%09this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1)%3B%0A%09%09%09%09%09this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2)%3B%0A%09%09%09%09%09coordinate2%20%3D%20this.m_revolute2.GetJointAngle()%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_prismatic2%20%3D%20(def.joint2%20instanceof%20b2PrismaticJoint%20%3F%20def.joint2%20%3A%20null)%3B%0A%09%09%09%09%09this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1)%3B%0A%09%09%09%09%09this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2)%3B%0A%09%09%09%09%09coordinate2%20%3D%20this.m_prismatic2.GetJointTranslation()%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_ratio%20%3D%20def.ratio%3B%0A%09%09%09%09this.m_constant%20%3D%20coordinate1%20%2B%20this.m_ratio%20*%20coordinate2%3B%0A%09%09%09%09this.m_impulse%20%3D%200.0%3B%0A%09%09%09%7D%0A%0A%09%09%09InitVelocityConstraints(step)%20%7B%0A%09%09%09%09const%20g1%20%3D%20this.m_ground1%3B%0A%09%09%09%09const%20g2%20%3D%20this.m_ground2%3B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09let%20ugX%20%3D%200%3B%0A%09%09%09%09let%20ugY%20%3D%200%3B%0A%09%09%09%09let%20rX%20%3D%200%3B%0A%09%09%09%09let%20rY%20%3D%200%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09let%20tVec%3B%0A%09%09%09%09let%20crug%20%3D%200%3B%0A%09%09%09%09let%20tX%20%3D%200%3B%0A%09%09%09%09let%20K%20%3D%200.0%3B%0A%09%09%09%09this.m_J.SetZero()%3B%0A%09%09%09%09if%20(this.m_revolute1)%20%7B%0A%09%09%09%09%09this.m_J.angularA%20%3D%20(-1.0)%3B%0A%09%09%09%09%09K%20%2B%3D%20bA.m_invI%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09tMat%20%3D%20g1.m_xf.R%3B%0A%09%09%09%09%09tVec%20%3D%20this.m_prismatic1.m_localXAxis1%3B%0A%09%09%09%09%09ugX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%09%09%09%09%09ugY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%09%09%09%09%09tMat%20%3D%20bA.m_xf.R%3B%0A%09%09%09%09%09rX%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%09%09%09%09%09rY%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%09%09%09%09%09tX%20%3D%20tMat.col1.x%20*%20rX%20%2B%20tMat.col2.x%20*%20rY%3B%0A%09%09%09%09%09rY%20%3D%20tMat.col1.y%20*%20rX%20%2B%20tMat.col2.y%20*%20rY%3B%0A%09%09%09%09%09rX%20%3D%20tX%3B%0A%09%09%09%09%09crug%20%3D%20rX%20*%20ugY%20-%20rY%20*%20ugX%3B%0A%09%09%09%09%09this.m_J.linearA.Set((-ugX)%2C%20(-ugY))%3B%0A%09%09%09%09%09this.m_J.angularA%20%3D%20(-crug)%3B%0A%09%09%09%09%09K%20%2B%3D%20bA.m_invMass%20%2B%20bA.m_invI%20*%20crug%20*%20crug%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.m_revolute2)%20%7B%0A%09%09%09%09%09this.m_J.angularB%20%3D%20(-this.m_ratio)%3B%0A%09%09%09%09%09K%20%2B%3D%20this.m_ratio%20*%20this.m_ratio%20*%20bB.m_invI%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09tMat%20%3D%20g2.m_xf.R%3B%0A%09%09%09%09%09tVec%20%3D%20this.m_prismatic2.m_localXAxis1%3B%0A%09%09%09%09%09ugX%20%3D%20tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y%3B%0A%09%09%09%09%09ugY%20%3D%20tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y%3B%0A%09%09%09%09%09tMat%20%3D%20bB.m_xf.R%3B%0A%09%09%09%09%09rX%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%09%09%09%09%09rY%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%09%09%09%09%09tX%20%3D%20tMat.col1.x%20*%20rX%20%2B%20tMat.col2.x%20*%20rY%3B%0A%09%09%09%09%09rY%20%3D%20tMat.col1.y%20*%20rX%20%2B%20tMat.col2.y%20*%20rY%3B%0A%09%09%09%09%09rX%20%3D%20tX%3B%0A%09%09%09%09%09crug%20%3D%20rX%20*%20ugY%20-%20rY%20*%20ugX%3B%0A%09%09%09%09%09this.m_J.linearB.Set((-this.m_ratio%20*%20ugX)%2C%20(-this.m_ratio%20*%20ugY))%3B%0A%09%09%09%09%09this.m_J.angularB%20%3D%20(-this.m_ratio%20*%20crug)%3B%0A%09%09%09%09%09K%20%2B%3D%20this.m_ratio%20*%20this.m_ratio%20*%20(bB.m_invMass%20%2B%20bB.m_invI%20*%20crug%20*%20crug)%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_mass%20%3D%20K%20%3E%200.0%20%3F%201.0%20%2F%20K%20%3A%200.0%3B%0A%09%09%09%09if%20(step.warmStarting)%20%7B%0A%09%09%09%09%09bA.m_linearVelocity.x%20%2B%3D%20bA.m_invMass%20*%20this.m_impulse%20*%20this.m_J.linearA.x%3B%0A%09%09%09%09%09bA.m_linearVelocity.y%20%2B%3D%20bA.m_invMass%20*%20this.m_impulse%20*%20this.m_J.linearA.y%3B%0A%09%09%09%09%09bA.m_angularVelocity%20%2B%3D%20bA.m_invI%20*%20this.m_impulse%20*%20this.m_J.angularA%3B%0A%09%09%09%09%09bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20this.m_impulse%20*%20this.m_J.linearB.x%3B%0A%09%09%09%09%09bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20this.m_impulse%20*%20this.m_J.linearB.y%3B%0A%09%09%09%09%09bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20this.m_impulse%20*%20this.m_J.angularB%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_impulse%20%3D%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09SolveVelocityConstraints(step)%20%7B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09const%20Cdot%20%3D%20this.m_J.Compute(bA.m_linearVelocity%2C%20bA.m_angularVelocity%2C%20bB.m_linearVelocity%2C%20bB.m_angularVelocity)%3B%0A%09%09%09%09const%20impulse%20%3D%20(-this.m_mass%20*%20Cdot)%3B%0A%09%09%09%09this.m_impulse%20%2B%3D%20impulse%3B%0A%09%09%09%09bA.m_linearVelocity.x%20%2B%3D%20bA.m_invMass%20*%20impulse%20*%20this.m_J.linearA.x%3B%0A%09%09%09%09bA.m_linearVelocity.y%20%2B%3D%20bA.m_invMass%20*%20impulse%20*%20this.m_J.linearA.y%3B%0A%09%09%09%09bA.m_angularVelocity%20%2B%3D%20bA.m_invI%20*%20impulse%20*%20this.m_J.angularA%3B%0A%09%09%09%09bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20impulse%20*%20this.m_J.linearB.x%3B%0A%09%09%09%09bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20impulse%20*%20this.m_J.linearB.y%3B%0A%09%09%09%09bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20impulse%20*%20this.m_J.angularB%3B%0A%09%09%09%7D%0A%0A%09%09%09SolvePositionConstraints(baumgarte)%20%7B%0A%09%09%09%09if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%09%09%09%09const%20linearError%20%3D%200.0%3B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09let%20coordinate1%20%3D%200%3B%0A%09%09%09%09let%20coordinate2%20%3D%200%3B%0A%09%09%09%09if%20(this.m_revolute1)%20%7B%0A%09%09%09%09%09coordinate1%20%3D%20this.m_revolute1.GetJointAngle()%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09coordinate1%20%3D%20this.m_prismatic1.GetJointTranslation()%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.m_revolute2)%20%7B%0A%09%09%09%09%09coordinate2%20%3D%20this.m_revolute2.GetJointAngle()%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09coordinate2%20%3D%20this.m_prismatic2.GetJointTranslation()%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20C%20%3D%20this.m_constant%20-%20(coordinate1%20%2B%20this.m_ratio%20*%20coordinate2)%3B%0A%09%09%09%09const%20impulse%20%3D%20(-this.m_mass%20*%20C)%3B%0A%09%09%09%09bA.m_sweep.c.x%20%2B%3D%20bA.m_invMass%20*%20impulse%20*%20this.m_J.linearA.x%3B%0A%09%09%09%09bA.m_sweep.c.y%20%2B%3D%20bA.m_invMass%20*%20impulse%20*%20this.m_J.linearA.y%3B%0A%09%09%09%09bA.m_sweep.a%20%2B%3D%20bA.m_invI%20*%20impulse%20*%20this.m_J.angularA%3B%0A%09%09%09%09bB.m_sweep.c.x%20%2B%3D%20bB.m_invMass%20*%20impulse%20*%20this.m_J.linearB.x%3B%0A%09%09%09%09bB.m_sweep.c.y%20%2B%3D%20bB.m_invMass%20*%20impulse%20*%20this.m_J.linearB.y%3B%0A%09%09%09%09bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20impulse%20*%20this.m_J.angularB%3B%0A%09%09%09%09bA.SynchronizeTransform()%3B%0A%09%09%09%09bB.SynchronizeTransform()%3B%0A%09%09%09%09return%20linearError%20%3C%20b2Settings.b2_linearSlop%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Joints.b2GearJoint%20%3D%20b2GearJoint%3B%0A%0A%09%09class%20b2GearJointDef%20extends%20b2JointDef%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2GearJointDef.b2GearJointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2GearJointDef)%20this.b2GearJointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2GearJointDef()%20%7B%0A%09%09%09%09Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09b2GearJointDef()%20%7B%0A%09%09%09%09this.__super.b2JointDef.call(this)%3B%0A%09%09%09%09this.type%20%3D%20b2Joint.e_gearJoint%3B%0A%09%09%09%09this.joint1%20%3D%20null%3B%0A%09%09%09%09this.joint2%20%3D%20null%3B%0A%09%09%09%09this.ratio%20%3D%201.0%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Joints.b2GearJointDef%20%3D%20b2GearJointDef%3B%0A%0A%09%09class%20b2Jacobian%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09b2Jacobian.b2Jacobian.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2Jacobian()%20%7B%0A%09%09%09%09this.linearA%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.linearB%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09SetZero()%20%7B%0A%09%09%09%09this.linearA.SetZero()%3B%0A%09%09%09%09this.angularA%20%3D%200.0%3B%0A%09%09%09%09this.linearB.SetZero()%3B%0A%09%09%09%09this.angularB%20%3D%200.0%3B%0A%09%09%09%7D%0A%0A%09%09%09Set(x1%2C%20a1%2C%20x2%2C%20a2)%20%7B%0A%09%09%09%09if%20(a1%20%3D%3D%3D%20undefined)%20a1%20%3D%200%3B%0A%09%09%09%09if%20(a2%20%3D%3D%3D%20undefined)%20a2%20%3D%200%3B%0A%09%09%09%09this.linearA.SetV(x1)%3B%0A%09%09%09%09this.angularA%20%3D%20a1%3B%0A%09%09%09%09this.linearB.SetV(x2)%3B%0A%09%09%09%09this.angularB%20%3D%20a2%3B%0A%09%09%09%7D%0A%0A%09%09%09Compute(x1%2C%20a1%2C%20x2%2C%20a2)%20%7B%0A%09%09%09%09if%20(a1%20%3D%3D%3D%20undefined)%20a1%20%3D%200%3B%0A%09%09%09%09if%20(a2%20%3D%3D%3D%20undefined)%20a2%20%3D%200%3B%0A%09%09%09%09return%20(this.linearA.x%20*%20x1.x%20%2B%20this.linearA.y%20*%20x1.y)%20%2B%20this.angularA%20*%20a1%20%2B%20(this.linearB.x%20*%20x2.x%20%2B%20this.linearB.y%20*%20x2.y)%20%2B%20this.angularB%20*%20a2%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Joints.b2Jacobian%20%3D%20b2Jacobian%3B%0A%0A%09%09class%20b2DistanceJoint%20extends%20b2Joint%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2DistanceJoint.b2DistanceJoint.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2DistanceJoint)%20this.b2DistanceJoint.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2DistanceJoint()%20%7B%0A%09%09%09%09Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_u%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAnchorA()%20%7B%0A%09%09%09%09return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAnchorB()%20%7B%0A%09%09%09%09return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetReactionForce(inv_dt)%20%7B%0A%09%09%09%09if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%09%09%09%09return%20new%20b2Vec2(inv_dt%20*%20this.m_impulse%20*%20this.m_u.x%2C%20inv_dt%20*%20this.m_impulse%20*%20this.m_u.y)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetReactionTorque(inv_dt)%20%7B%0A%09%09%09%09if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%09%09%09%09return%200.0%3B%0A%09%09%09%7D%0A%0A%09%09%09GetLength()%20%7B%0A%09%09%09%09return%20this.m_length%3B%0A%09%09%09%7D%0A%0A%09%09%09SetLength(length)%20%7B%0A%09%09%09%09if%20(length%20%3D%3D%3D%20undefined)%20length%20%3D%200%3B%0A%09%09%09%09this.m_length%20%3D%20length%3B%0A%09%09%09%7D%0A%0A%09%09%09GetFrequency()%20%7B%0A%09%09%09%09return%20this.m_frequencyHz%3B%0A%09%09%09%7D%0A%0A%09%09%09SetFrequency(hz)%20%7B%0A%09%09%09%09if%20(hz%20%3D%3D%3D%20undefined)%20hz%20%3D%200%3B%0A%09%09%09%09this.m_frequencyHz%20%3D%20hz%3B%0A%09%09%09%7D%0A%0A%09%09%09GetDampingRatio()%20%7B%0A%09%09%09%09return%20this.m_dampingRatio%3B%0A%09%09%09%7D%0A%0A%09%09%09SetDampingRatio(ratio)%20%7B%0A%09%09%09%09if%20(ratio%20%3D%3D%3D%20undefined)%20ratio%20%3D%200%3B%0A%09%09%09%09this.m_dampingRatio%20%3D%20ratio%3B%0A%09%09%09%7D%0A%0A%09%09%09b2DistanceJoint(def)%20%7B%0A%09%09%09%09this.__super.b2Joint.call(this%2C%20def)%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09const%20tX%20%3D%200%3B%0A%09%09%09%09const%20tY%20%3D%200%3B%0A%09%09%09%09this.m_localAnchor1.SetV(def.localAnchorA)%3B%0A%09%09%09%09this.m_localAnchor2.SetV(def.localAnchorB)%3B%0A%09%09%09%09this.m_length%20%3D%20def.length%3B%0A%09%09%09%09this.m_frequencyHz%20%3D%20def.frequencyHz%3B%0A%09%09%09%09this.m_dampingRatio%20%3D%20def.dampingRatio%3B%0A%09%09%09%09this.m_impulse%20%3D%200.0%3B%0A%09%09%09%09this.m_gamma%20%3D%200.0%3B%0A%09%09%09%09this.m_bias%20%3D%200.0%3B%0A%09%09%09%7D%0A%0A%09%09%09InitVelocityConstraints(step)%20%7B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09let%20tX%20%3D%200%3B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09tMat%20%3D%20bA.m_xf.R%3B%0A%09%09%09%09let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%09%09%09%09r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%09%09%09%09r1X%20%3D%20tX%3B%0A%09%09%09%09tMat%20%3D%20bB.m_xf.R%3B%0A%09%09%09%09let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%09%09%09%09r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%09%09%09%09r2X%20%3D%20tX%3B%0A%09%09%09%09this.m_u.x%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%09%09%09%09this.m_u.y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%09%09%09%09const%20length%20%3D%20Math.sqrt(this.m_u.x%20*%20this.m_u.x%20%2B%20this.m_u.y%20*%20this.m_u.y)%3B%0A%09%09%09%09if%20(length%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%09%09%09%09%09this.m_u.Multiply(1.0%20%2F%20length)%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_u.SetZero()%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20cr1u%20%3D%20(r1X%20*%20this.m_u.y%20-%20r1Y%20*%20this.m_u.x)%3B%0A%09%09%09%09const%20cr2u%20%3D%20(r2X%20*%20this.m_u.y%20-%20r2Y%20*%20this.m_u.x)%3B%0A%09%09%09%09const%20invMass%20%3D%20bA.m_invMass%20%2B%20bA.m_invI%20*%20cr1u%20*%20cr1u%20%2B%20bB.m_invMass%20%2B%20bB.m_invI%20*%20cr2u%20*%20cr2u%3B%0A%09%09%09%09this.m_mass%20%3D%20invMass%20!%3D%200.0%20%3F%201.0%20%2F%20invMass%20%3A%200.0%3B%0A%09%09%09%09if%20(this.m_frequencyHz%20%3E%200.0)%20%7B%0A%09%09%09%09%09const%20C%20%3D%20length%20-%20this.m_length%3B%0A%09%09%09%09%09const%20omega%20%3D%202.0%20*%20Math.PI%20*%20this.m_frequencyHz%3B%0A%09%09%09%09%09const%20d%20%3D%202.0%20*%20this.m_mass%20*%20this.m_dampingRatio%20*%20omega%3B%0A%09%09%09%09%09const%20k%20%3D%20this.m_mass%20*%20omega%20*%20omega%3B%0A%09%09%09%09%09this.m_gamma%20%3D%20step.dt%20*%20(d%20%2B%20step.dt%20*%20k)%3B%0A%09%09%09%09%09this.m_gamma%20%3D%20this.m_gamma%20!%3D%200.0%20%3F%201%20%2F%20this.m_gamma%20%3A%200.0%3B%0A%09%09%09%09%09this.m_bias%20%3D%20C%20*%20step.dt%20*%20k%20*%20this.m_gamma%3B%0A%09%09%09%09%09this.m_mass%20%3D%20invMass%20%2B%20this.m_gamma%3B%0A%09%09%09%09%09this.m_mass%20%3D%20this.m_mass%20!%3D%200.0%20%3F%201.0%20%2F%20this.m_mass%20%3A%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(step.warmStarting)%20%7B%0A%09%09%09%09%09this.m_impulse%20*%3D%20step.dtRatio%3B%0A%09%09%09%09%09const%20PX%20%3D%20this.m_impulse%20*%20this.m_u.x%3B%0A%09%09%09%09%09const%20PY%20%3D%20this.m_impulse%20*%20this.m_u.y%3B%0A%09%09%09%09%09bA.m_linearVelocity.x%20-%3D%20bA.m_invMass%20*%20PX%3B%0A%09%09%09%09%09bA.m_linearVelocity.y%20-%3D%20bA.m_invMass%20*%20PY%3B%0A%09%09%09%09%09bA.m_angularVelocity%20-%3D%20bA.m_invI%20*%20(r1X%20*%20PY%20-%20r1Y%20*%20PX)%3B%0A%09%09%09%09%09bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20PX%3B%0A%09%09%09%09%09bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20PY%3B%0A%09%09%09%09%09bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20PY%20-%20r2Y%20*%20PX)%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_impulse%20%3D%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09SolveVelocityConstraints(step)%20%7B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09tMat%20%3D%20bA.m_xf.R%3B%0A%09%09%09%09let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%09%09%09%09let%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%09%09%09%09r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%09%09%09%09r1X%20%3D%20tX%3B%0A%09%09%09%09tMat%20%3D%20bB.m_xf.R%3B%0A%09%09%09%09let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%09%09%09%09r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%09%09%09%09r2X%20%3D%20tX%3B%0A%09%09%09%09const%20v1X%20%3D%20bA.m_linearVelocity.x%20%2B%20((-bA.m_angularVelocity%20*%20r1Y))%3B%0A%09%09%09%09const%20v1Y%20%3D%20bA.m_linearVelocity.y%20%2B%20(bA.m_angularVelocity%20*%20r1X)%3B%0A%09%09%09%09const%20v2X%20%3D%20bB.m_linearVelocity.x%20%2B%20((-bB.m_angularVelocity%20*%20r2Y))%3B%0A%09%09%09%09const%20v2Y%20%3D%20bB.m_linearVelocity.y%20%2B%20(bB.m_angularVelocity%20*%20r2X)%3B%0A%09%09%09%09const%20Cdot%20%3D%20(this.m_u.x%20*%20(v2X%20-%20v1X)%20%2B%20this.m_u.y%20*%20(v2Y%20-%20v1Y))%3B%0A%09%09%09%09const%20impulse%20%3D%20(-this.m_mass%20*%20(Cdot%20%2B%20this.m_bias%20%2B%20this.m_gamma%20*%20this.m_impulse))%3B%0A%09%09%09%09this.m_impulse%20%2B%3D%20impulse%3B%0A%09%09%09%09const%20PX%20%3D%20impulse%20*%20this.m_u.x%3B%0A%09%09%09%09const%20PY%20%3D%20impulse%20*%20this.m_u.y%3B%0A%09%09%09%09bA.m_linearVelocity.x%20-%3D%20bA.m_invMass%20*%20PX%3B%0A%09%09%09%09bA.m_linearVelocity.y%20-%3D%20bA.m_invMass%20*%20PY%3B%0A%09%09%09%09bA.m_angularVelocity%20-%3D%20bA.m_invI%20*%20(r1X%20*%20PY%20-%20r1Y%20*%20PX)%3B%0A%09%09%09%09bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20PX%3B%0A%09%09%09%09bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20PY%3B%0A%09%09%09%09bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20PY%20-%20r2Y%20*%20PX)%3B%0A%09%09%09%7D%0A%0A%09%09%09SolvePositionConstraints(baumgarte)%20%7B%0A%09%09%09%09if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09if%20(this.m_frequencyHz%20%3E%200.0)%20%7B%0A%09%09%09%09%09return%20true%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09tMat%20%3D%20bA.m_xf.R%3B%0A%09%09%09%09let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%09%09%09%09let%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%09%09%09%09r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%09%09%09%09r1X%20%3D%20tX%3B%0A%09%09%09%09tMat%20%3D%20bB.m_xf.R%3B%0A%09%09%09%09let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%09%09%09%09r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%09%09%09%09r2X%20%3D%20tX%3B%0A%09%09%09%09let%20dX%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%09%09%09%09let%20dY%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%09%09%09%09const%20length%20%3D%20Math.sqrt(dX%20*%20dX%20%2B%20dY%20*%20dY)%3B%0A%09%09%09%09dX%20%2F%3D%20length%3B%0A%09%09%09%09dY%20%2F%3D%20length%3B%0A%09%09%09%09let%20C%20%3D%20length%20-%20this.m_length%3B%0A%09%09%09%09C%20%3D%20b2Math.Clamp(C%2C%20(-b2Settings.b2_maxLinearCorrection)%2C%20b2Settings.b2_maxLinearCorrection)%3B%0A%09%09%09%09const%20impulse%20%3D%20(-this.m_mass%20*%20C)%3B%0A%09%09%09%09this.m_u.Set(dX%2C%20dY)%3B%0A%09%09%09%09const%20PX%20%3D%20impulse%20*%20this.m_u.x%3B%0A%09%09%09%09const%20PY%20%3D%20impulse%20*%20this.m_u.y%3B%0A%09%09%09%09bA.m_sweep.c.x%20-%3D%20bA.m_invMass%20*%20PX%3B%0A%09%09%09%09bA.m_sweep.c.y%20-%3D%20bA.m_invMass%20*%20PY%3B%0A%09%09%09%09bA.m_sweep.a%20-%3D%20bA.m_invI%20*%20(r1X%20*%20PY%20-%20r1Y%20*%20PX)%3B%0A%09%09%09%09bB.m_sweep.c.x%20%2B%3D%20bB.m_invMass%20*%20PX%3B%0A%09%09%09%09bB.m_sweep.c.y%20%2B%3D%20bB.m_invMass%20*%20PY%3B%0A%09%09%09%09bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20PY%20-%20r2Y%20*%20PX)%3B%0A%09%09%09%09bA.SynchronizeTransform()%3B%0A%09%09%09%09bB.SynchronizeTransform()%3B%0A%09%09%09%09return%20b2Math.Abs(C)%20%3C%20b2Settings.b2_linearSlop%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Joints.b2DistanceJoint%20%3D%20b2DistanceJoint%3B%0A%0A%09%09function%20b2JointEdge()%20%7B%0A%09%09%09b2JointEdge.b2JointEdge.apply(this%2C%20arguments)%3B%0A%09%09%7D%0A%09%09Box2D.Dynamics.Joints.b2JointEdge%20%3D%20b2JointEdge%3B%0A%0A%09%09class%20b2LineJoint%20extends%20b2Joint%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2LineJoint.b2LineJoint.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2LineJoint)%20this.b2LineJoint.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2LineJoint()%20%7B%0A%09%09%09%09Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_localXAxis1%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_localYAxis1%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_axis%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_perp%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_K%20%3D%20new%20b2Mat22()%3B%0A%09%09%09%09this.m_impulse%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAnchorA()%20%7B%0A%09%09%09%09return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAnchorB()%20%7B%0A%09%09%09%09return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetReactionForce(inv_dt)%20%7B%0A%09%09%09%09if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%09%09%09%09return%20new%20b2Vec2(inv_dt%20*%20(this.m_impulse.x%20*%20this.m_perp.x%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_axis.x)%2C%20inv_dt%20*%20(this.m_impulse.x%20*%20this.m_perp.y%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_axis.y))%3B%0A%09%09%09%7D%0A%0A%09%09%09GetReactionTorque(inv_dt)%20%7B%0A%09%09%09%09if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%09%09%09%09return%20inv_dt%20*%20this.m_impulse.y%3B%0A%09%09%09%7D%0A%0A%09%09%09GetJointTranslation()%20%7B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09const%20p1%20%3D%20bA.GetWorldPoint(this.m_localAnchor1)%3B%0A%09%09%09%09const%20p2%20%3D%20bB.GetWorldPoint(this.m_localAnchor2)%3B%0A%09%09%09%09const%20dX%20%3D%20p2.x%20-%20p1.x%3B%0A%09%09%09%09const%20dY%20%3D%20p2.y%20-%20p1.y%3B%0A%09%09%09%09const%20axis%20%3D%20bA.GetWorldVector(this.m_localXAxis1)%3B%0A%09%09%09%09const%20translation%20%3D%20axis.x%20*%20dX%20%2B%20axis.y%20*%20dY%3B%0A%09%09%09%09return%20translation%3B%0A%09%09%09%7D%0A%0A%09%09%09GetJointSpeed()%20%7B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09tMat%20%3D%20bA.m_xf.R%3B%0A%09%09%09%09let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%09%09%09%09let%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%09%09%09%09r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%09%09%09%09r1X%20%3D%20tX%3B%0A%09%09%09%09tMat%20%3D%20bB.m_xf.R%3B%0A%09%09%09%09let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%09%09%09%09r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%09%09%09%09r2X%20%3D%20tX%3B%0A%09%09%09%09const%20p1X%20%3D%20bA.m_sweep.c.x%20%2B%20r1X%3B%0A%09%09%09%09const%20p1Y%20%3D%20bA.m_sweep.c.y%20%2B%20r1Y%3B%0A%09%09%09%09const%20p2X%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%3B%0A%09%09%09%09const%20p2Y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%3B%0A%09%09%09%09const%20dX%20%3D%20p2X%20-%20p1X%3B%0A%09%09%09%09const%20dY%20%3D%20p2Y%20-%20p1Y%3B%0A%09%09%09%09const%20axis%20%3D%20bA.GetWorldVector(this.m_localXAxis1)%3B%0A%09%09%09%09const%20v1%20%3D%20bA.m_linearVelocity%3B%0A%09%09%09%09const%20v2%20%3D%20bB.m_linearVelocity%3B%0A%09%09%09%09const%20w1%20%3D%20bA.m_angularVelocity%3B%0A%09%09%09%09const%20w2%20%3D%20bB.m_angularVelocity%3B%0A%09%09%09%09const%20speed%20%3D%20(dX%20*%20((-w1%20*%20axis.y))%20%2B%20dY%20*%20(w1%20*%20axis.x))%20%2B%20(axis.x%20*%20(((v2.x%20%2B%20((-w2%20*%20r2Y)))%20-%20v1.x)%20-%20((-w1%20*%20r1Y)))%20%2B%20axis.y%20*%20(((v2.y%20%2B%20(w2%20*%20r2X))%20-%20v1.y)%20-%20(w1%20*%20r1X)))%3B%0A%09%09%09%09return%20speed%3B%0A%09%09%09%7D%0A%0A%09%09%09IsLimitEnabled()%20%7B%0A%09%09%09%09return%20this.m_enableLimit%3B%0A%09%09%09%7D%0A%0A%09%09%09EnableLimit(flag)%20%7B%0A%09%09%09%09this.m_bodyA.SetAwake(true)%3B%0A%09%09%09%09this.m_bodyB.SetAwake(true)%3B%0A%09%09%09%09this.m_enableLimit%20%3D%20flag%3B%0A%09%09%09%7D%0A%0A%09%09%09GetLowerLimit()%20%7B%0A%09%09%09%09return%20this.m_lowerTranslation%3B%0A%09%09%09%7D%0A%0A%09%09%09GetUpperLimit()%20%7B%0A%09%09%09%09return%20this.m_upperTranslation%3B%0A%09%09%09%7D%0A%0A%09%09%09SetLimits(lower%2C%20upper)%20%7B%0A%09%09%09%09if%20(lower%20%3D%3D%3D%20undefined)%20lower%20%3D%200%3B%0A%09%09%09%09if%20(upper%20%3D%3D%3D%20undefined)%20upper%20%3D%200%3B%0A%09%09%09%09this.m_bodyA.SetAwake(true)%3B%0A%09%09%09%09this.m_bodyB.SetAwake(true)%3B%0A%09%09%09%09this.m_lowerTranslation%20%3D%20lower%3B%0A%09%09%09%09this.m_upperTranslation%20%3D%20upper%3B%0A%09%09%09%7D%0A%0A%09%09%09IsMotorEnabled()%20%7B%0A%09%09%09%09return%20this.m_enableMotor%3B%0A%09%09%09%7D%0A%0A%09%09%09EnableMotor(flag)%20%7B%0A%09%09%09%09this.m_bodyA.SetAwake(true)%3B%0A%09%09%09%09this.m_bodyB.SetAwake(true)%3B%0A%09%09%09%09this.m_enableMotor%20%3D%20flag%3B%0A%09%09%09%7D%0A%0A%09%09%09SetMotorSpeed(speed)%20%7B%0A%09%09%09%09if%20(speed%20%3D%3D%3D%20undefined)%20speed%20%3D%200%3B%0A%09%09%09%09this.m_bodyA.SetAwake(true)%3B%0A%09%09%09%09this.m_bodyB.SetAwake(true)%3B%0A%09%09%09%09this.m_motorSpeed%20%3D%20speed%3B%0A%09%09%09%7D%0A%0A%09%09%09GetMotorSpeed()%20%7B%0A%09%09%09%09return%20this.m_motorSpeed%3B%0A%09%09%09%7D%0A%0A%09%09%09SetMaxMotorForce(force)%20%7B%0A%09%09%09%09if%20(force%20%3D%3D%3D%20undefined)%20force%20%3D%200%3B%0A%09%09%09%09this.m_bodyA.SetAwake(true)%3B%0A%09%09%09%09this.m_bodyB.SetAwake(true)%3B%0A%09%09%09%09this.m_maxMotorForce%20%3D%20force%3B%0A%09%09%09%7D%0A%0A%09%09%09GetMaxMotorForce()%20%7B%0A%09%09%09%09return%20this.m_maxMotorForce%3B%0A%09%09%09%7D%0A%0A%09%09%09GetMotorForce()%20%7B%0A%09%09%09%09return%20this.m_motorImpulse%3B%0A%09%09%09%7D%0A%0A%09%09%09b2LineJoint(def)%20%7B%0A%09%09%09%09this.__super.b2Joint.call(this%2C%20def)%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09const%20tX%20%3D%200%3B%0A%09%09%09%09const%20tY%20%3D%200%3B%0A%09%09%09%09this.m_localAnchor1.SetV(def.localAnchorA)%3B%0A%09%09%09%09this.m_localAnchor2.SetV(def.localAnchorB)%3B%0A%09%09%09%09this.m_localXAxis1.SetV(def.localAxisA)%3B%0A%09%09%09%09this.m_localYAxis1.x%20%3D%20(-this.m_localXAxis1.y)%3B%0A%09%09%09%09this.m_localYAxis1.y%20%3D%20this.m_localXAxis1.x%3B%0A%09%09%09%09this.m_impulse.SetZero()%3B%0A%09%09%09%09this.m_motorMass%20%3D%200.0%3B%0A%09%09%09%09this.m_motorImpulse%20%3D%200.0%3B%0A%09%09%09%09this.m_lowerTranslation%20%3D%20def.lowerTranslation%3B%0A%09%09%09%09this.m_upperTranslation%20%3D%20def.upperTranslation%3B%0A%09%09%09%09this.m_maxMotorForce%20%3D%20def.maxMotorForce%3B%0A%09%09%09%09this.m_motorSpeed%20%3D%20def.motorSpeed%3B%0A%09%09%09%09this.m_enableLimit%20%3D%20def.enableLimit%3B%0A%09%09%09%09this.m_enableMotor%20%3D%20def.enableMotor%3B%0A%09%09%09%09this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%09%09%09%09this.m_axis.SetZero()%3B%0A%09%09%09%09this.m_perp.SetZero()%3B%0A%09%09%09%7D%0A%0A%09%09%09InitVelocityConstraints(step)%20%7B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09let%20tX%20%3D%200%3B%0A%09%09%09%09this.m_localCenterA.SetV(bA.GetLocalCenter())%3B%0A%09%09%09%09this.m_localCenterB.SetV(bB.GetLocalCenter())%3B%0A%09%09%09%09const%20xf1%20%3D%20bA.GetTransform()%3B%0A%09%09%09%09const%20xf2%20%3D%20bB.GetTransform()%3B%0A%09%09%09%09tMat%20%3D%20bA.m_xf.R%3B%0A%09%09%09%09let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20this.m_localCenterA.x%3B%0A%09%09%09%09let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20this.m_localCenterA.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%09%09%09%09r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%09%09%09%09r1X%20%3D%20tX%3B%0A%09%09%09%09tMat%20%3D%20bB.m_xf.R%3B%0A%09%09%09%09let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20this.m_localCenterB.x%3B%0A%09%09%09%09let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20this.m_localCenterB.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%09%09%09%09r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%09%09%09%09r2X%20%3D%20tX%3B%0A%09%09%09%09const%20dX%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%09%09%09%09const%20dY%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%09%09%09%09this.m_invMassA%20%3D%20bA.m_invMass%3B%0A%09%09%09%09this.m_invMassB%20%3D%20bB.m_invMass%3B%0A%09%09%09%09this.m_invIA%20%3D%20bA.m_invI%3B%0A%09%09%09%09this.m_invIB%20%3D%20bB.m_invI%3B%20%7B%0A%09%09%09%09%09this.m_axis.SetV(b2Math.MulMV(xf1.R%2C%20this.m_localXAxis1))%3B%0A%09%09%09%09%09this.m_a1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_axis.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_axis.x%3B%0A%09%09%09%09%09this.m_a2%20%3D%20r2X%20*%20this.m_axis.y%20-%20r2Y%20*%20this.m_axis.x%3B%0A%09%09%09%09%09this.m_motorMass%20%3D%20this.m_invMassA%20%2B%20this.m_invMassB%20%2B%20this.m_invIA%20*%20this.m_a1%20*%20this.m_a1%20%2B%20this.m_invIB%20*%20this.m_a2%20*%20this.m_a2%3B%0A%09%09%09%09%09this.m_motorMass%20%3D%20this.m_motorMass%20%3E%20Number.MIN_VALUE%20%3F%201.0%20%2F%20this.m_motorMass%20%3A%200.0%3B%0A%09%09%09%09%7D%20%7B%0A%09%09%09%09%09this.m_perp.SetV(b2Math.MulMV(xf1.R%2C%20this.m_localYAxis1))%3B%0A%09%09%09%09%09this.m_s1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_perp.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_perp.x%3B%0A%09%09%09%09%09this.m_s2%20%3D%20r2X%20*%20this.m_perp.y%20-%20r2Y%20*%20this.m_perp.x%3B%0A%09%09%09%09%09const%20m1%20%3D%20this.m_invMassA%3B%0A%09%09%09%09%09const%20m2%20%3D%20this.m_invMassB%3B%0A%09%09%09%09%09const%20i1%20%3D%20this.m_invIA%3B%0A%09%09%09%09%09const%20i2%20%3D%20this.m_invIB%3B%0A%09%09%09%09%09this.m_K.col1.x%20%3D%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%09%09%09%09%09this.m_K.col1.y%20%3D%20i1%20*%20this.m_s1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_a2%3B%0A%09%09%09%09%09this.m_K.col2.x%20%3D%20this.m_K.col1.y%3B%0A%09%09%09%09%09this.m_K.col2.y%20%3D%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_a1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%20*%20this.m_a2%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.m_enableLimit)%20%7B%0A%09%09%09%09%09const%20jointTransition%20%3D%20this.m_axis.x%20*%20dX%20%2B%20this.m_axis.y%20*%20dY%3B%0A%09%09%09%09%09if%20(b2Math.Abs(this.m_upperTranslation%20-%20this.m_lowerTranslation)%20%3C%202.0%20*%20b2Settings.b2_linearSlop)%20%7B%0A%09%09%09%09%09%09this.m_limitState%20%3D%20b2Joint.e_equalLimits%3B%0A%09%09%09%09%09%7D%20else%20if%20(jointTransition%20%3C%3D%20this.m_lowerTranslation)%20%7B%0A%09%09%09%09%09%09if%20(this.m_limitState%20!%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%09%09%09%09%09%09%09this.m_limitState%20%3D%20b2Joint.e_atLowerLimit%3B%0A%09%09%09%09%09%09%09this.m_impulse.y%20%3D%200.0%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%20else%20if%20(jointTransition%20%3E%3D%20this.m_upperTranslation)%20%7B%0A%09%09%09%09%09%09if%20(this.m_limitState%20!%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%09%09%09%09%09%09%09this.m_limitState%20%3D%20b2Joint.e_atUpperLimit%3B%0A%09%09%09%09%09%09%09this.m_impulse.y%20%3D%200.0%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%09%09%09%09%09%09this.m_impulse.y%20%3D%200.0%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.m_enableMotor%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09this.m_motorImpulse%20%3D%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(step.warmStarting)%20%7B%0A%09%09%09%09%09this.m_impulse.x%20*%3D%20step.dtRatio%3B%0A%09%09%09%09%09this.m_impulse.y%20*%3D%20step.dtRatio%3B%0A%09%09%09%09%09this.m_motorImpulse%20*%3D%20step.dtRatio%3B%0A%09%09%09%09%09const%20PX%20%3D%20this.m_impulse.x%20*%20this.m_perp.x%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_axis.x%3B%0A%09%09%09%09%09const%20PY%20%3D%20this.m_impulse.x%20*%20this.m_perp.y%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_axis.y%3B%0A%09%09%09%09%09const%20L1%20%3D%20this.m_impulse.x%20*%20this.m_s1%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_a1%3B%0A%09%09%09%09%09const%20L2%20%3D%20this.m_impulse.x%20*%20this.m_s2%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.y)%20*%20this.m_a2%3B%0A%09%09%09%09%09bA.m_linearVelocity.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%09%09%09%09%09bA.m_linearVelocity.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%09%09%09%09%09bA.m_angularVelocity%20-%3D%20this.m_invIA%20*%20L1%3B%0A%09%09%09%09%09bB.m_linearVelocity.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%09%09%09%09%09bB.m_linearVelocity.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%09%09%09%09%09bB.m_angularVelocity%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_impulse.SetZero()%3B%0A%09%09%09%09%09this.m_motorImpulse%20%3D%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09SolveVelocityConstraints(step)%20%7B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09const%20v1%20%3D%20bA.m_linearVelocity%3B%0A%09%09%09%09let%20w1%20%3D%20bA.m_angularVelocity%3B%0A%09%09%09%09const%20v2%20%3D%20bB.m_linearVelocity%3B%0A%09%09%09%09let%20w2%20%3D%20bB.m_angularVelocity%3B%0A%09%09%09%09let%20PX%20%3D%200%3B%0A%09%09%09%09let%20PY%20%3D%200%3B%0A%09%09%09%09let%20L1%20%3D%200%3B%0A%09%09%09%09let%20L2%20%3D%200%3B%0A%09%09%09%09if%20(this.m_enableMotor%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_equalLimits)%20%7B%0A%09%09%09%09%09const%20Cdot%20%3D%20this.m_axis.x%20*%20(v2.x%20-%20v1.x)%20%2B%20this.m_axis.y%20*%20(v2.y%20-%20v1.y)%20%2B%20this.m_a2%20*%20w2%20-%20this.m_a1%20*%20w1%3B%0A%09%09%09%09%09let%20impulse%20%3D%20this.m_motorMass%20*%20(this.m_motorSpeed%20-%20Cdot)%3B%0A%09%09%09%09%09const%20oldImpulse%20%3D%20this.m_motorImpulse%3B%0A%09%09%09%09%09const%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxMotorForce%3B%0A%09%09%09%09%09this.m_motorImpulse%20%3D%20b2Math.Clamp(this.m_motorImpulse%20%2B%20impulse%2C%20(-maxImpulse)%2C%20maxImpulse)%3B%0A%09%09%09%09%09impulse%20%3D%20this.m_motorImpulse%20-%20oldImpulse%3B%0A%09%09%09%09%09PX%20%3D%20impulse%20*%20this.m_axis.x%3B%0A%09%09%09%09%09PY%20%3D%20impulse%20*%20this.m_axis.y%3B%0A%09%09%09%09%09L1%20%3D%20impulse%20*%20this.m_a1%3B%0A%09%09%09%09%09L2%20%3D%20impulse%20*%20this.m_a2%3B%0A%09%09%09%09%09v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%09%09%09%09%09v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%09%09%09%09%09w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%09%09%09%09%09v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%09%09%09%09%09v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%09%09%09%09%09w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20Cdot1%20%3D%20this.m_perp.x%20*%20(v2.x%20-%20v1.x)%20%2B%20this.m_perp.y%20*%20(v2.y%20-%20v1.y)%20%2B%20this.m_s2%20*%20w2%20-%20this.m_s1%20*%20w1%3B%0A%09%09%09%09if%20(this.m_enableLimit%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_inactiveLimit)%20%7B%0A%09%09%09%09%09const%20Cdot2%20%3D%20this.m_axis.x%20*%20(v2.x%20-%20v1.x)%20%2B%20this.m_axis.y%20*%20(v2.y%20-%20v1.y)%20%2B%20this.m_a2%20*%20w2%20-%20this.m_a1%20*%20w1%3B%0A%09%09%09%09%09const%20f1%20%3D%20this.m_impulse.Copy()%3B%0A%09%09%09%09%09const%20df%20%3D%20this.m_K.Solve(new%20b2Vec2()%2C%20(-Cdot1)%2C%20(-Cdot2))%3B%0A%09%09%09%09%09this.m_impulse.Add(df)%3B%0A%09%09%09%09%09if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%09%09%09%09%09%09this.m_impulse.y%20%3D%20b2Math.Max(this.m_impulse.y%2C%200.0)%3B%0A%09%09%09%09%09%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%09%09%09%09%09%09this.m_impulse.y%20%3D%20b2Math.Min(this.m_impulse.y%2C%200.0)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09const%20b%20%3D%20(-Cdot1)%20-%20(this.m_impulse.y%20-%20f1.y)%20*%20this.m_K.col2.x%3B%0A%09%09%09%09%09let%20f2r%20%3D%200%3B%0A%09%09%09%09%09if%20(this.m_K.col1.x%20!%3D%200.0)%20%7B%0A%09%09%09%09%09%09f2r%20%3D%20b%20%2F%20this.m_K.col1.x%20%2B%20f1.x%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09f2r%20%3D%20f1.x%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09this.m_impulse.x%20%3D%20f2r%3B%0A%09%09%09%09%09df.x%20%3D%20this.m_impulse.x%20-%20f1.x%3B%0A%09%09%09%09%09df.y%20%3D%20this.m_impulse.y%20-%20f1.y%3B%0A%09%09%09%09%09PX%20%3D%20df.x%20*%20this.m_perp.x%20%2B%20df.y%20*%20this.m_axis.x%3B%0A%09%09%09%09%09PY%20%3D%20df.x%20*%20this.m_perp.y%20%2B%20df.y%20*%20this.m_axis.y%3B%0A%09%09%09%09%09L1%20%3D%20df.x%20*%20this.m_s1%20%2B%20df.y%20*%20this.m_a1%3B%0A%09%09%09%09%09L2%20%3D%20df.x%20*%20this.m_s2%20%2B%20df.y%20*%20this.m_a2%3B%0A%09%09%09%09%09v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%09%09%09%09%09v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%09%09%09%09%09w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%09%09%09%09%09v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%09%09%09%09%09v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%09%09%09%09%09w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09let%20df2%20%3D%200%3B%0A%09%09%09%09%09if%20(this.m_K.col1.x%20!%3D%200.0)%20%7B%0A%09%09%09%09%09%09df2%20%3D%20((-Cdot1))%20%2F%20this.m_K.col1.x%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09df2%20%3D%200.0%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09this.m_impulse.x%20%2B%3D%20df2%3B%0A%09%09%09%09%09PX%20%3D%20df2%20*%20this.m_perp.x%3B%0A%09%09%09%09%09PY%20%3D%20df2%20*%20this.m_perp.y%3B%0A%09%09%09%09%09L1%20%3D%20df2%20*%20this.m_s1%3B%0A%09%09%09%09%09L2%20%3D%20df2%20*%20this.m_s2%3B%0A%09%09%09%09%09v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%09%09%09%09%09v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%09%09%09%09%09w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%09%09%09%09%09v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%09%09%09%09%09v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%09%09%09%09%09w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%09%09%09%09%7D%0A%09%09%09%09bA.m_linearVelocity.SetV(v1)%3B%0A%09%09%09%09bA.m_angularVelocity%20%3D%20w1%3B%0A%09%09%09%09bB.m_linearVelocity.SetV(v2)%3B%0A%09%09%09%09bB.m_angularVelocity%20%3D%20w2%3B%0A%09%09%09%7D%0A%0A%09%09%09SolvePositionConstraints(baumgarte)%20%7B%0A%09%09%09%09if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%09%09%09%09const%20limitC%20%3D%200%3B%0A%09%09%09%09const%20oldLimitImpulse%20%3D%200%3B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09const%20c1%20%3D%20bA.m_sweep.c%3B%0A%09%09%09%09let%20a1%20%3D%20bA.m_sweep.a%3B%0A%09%09%09%09const%20c2%20%3D%20bB.m_sweep.c%3B%0A%09%09%09%09let%20a2%20%3D%20bB.m_sweep.a%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09let%20tX%20%3D%200%3B%0A%09%09%09%09let%20m1%20%3D%200%3B%0A%09%09%09%09let%20m2%20%3D%200%3B%0A%09%09%09%09let%20i1%20%3D%200%3B%0A%09%09%09%09let%20i2%20%3D%200%3B%0A%09%09%09%09let%20linearError%20%3D%200.0%3B%0A%09%09%09%09let%20angularError%20%3D%200.0%3B%0A%09%09%09%09let%20active%20%3D%20false%3B%0A%09%09%09%09let%20C2%20%3D%200.0%3B%0A%09%09%09%09const%20R1%20%3D%20b2Mat22.FromAngle(a1)%3B%0A%09%09%09%09const%20R2%20%3D%20b2Mat22.FromAngle(a2)%3B%0A%09%09%09%09tMat%20%3D%20R1%3B%0A%09%09%09%09let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20this.m_localCenterA.x%3B%0A%09%09%09%09let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20this.m_localCenterA.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%09%09%09%09r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%09%09%09%09r1X%20%3D%20tX%3B%0A%09%09%09%09tMat%20%3D%20R2%3B%0A%09%09%09%09let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20this.m_localCenterB.x%3B%0A%09%09%09%09let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20this.m_localCenterB.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%09%09%09%09r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%09%09%09%09r2X%20%3D%20tX%3B%0A%09%09%09%09const%20dX%20%3D%20c2.x%20%2B%20r2X%20-%20c1.x%20-%20r1X%3B%0A%09%09%09%09const%20dY%20%3D%20c2.y%20%2B%20r2Y%20-%20c1.y%20-%20r1Y%3B%0A%09%09%09%09if%20(this.m_enableLimit)%20%7B%0A%09%09%09%09%09this.m_axis%20%3D%20b2Math.MulMV(R1%2C%20this.m_localXAxis1)%3B%0A%09%09%09%09%09this.m_a1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_axis.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_axis.x%3B%0A%09%09%09%09%09this.m_a2%20%3D%20r2X%20*%20this.m_axis.y%20-%20r2Y%20*%20this.m_axis.x%3B%0A%09%09%09%09%09const%20translation%20%3D%20this.m_axis.x%20*%20dX%20%2B%20this.m_axis.y%20*%20dY%3B%0A%09%09%09%09%09if%20(b2Math.Abs(this.m_upperTranslation%20-%20this.m_lowerTranslation)%20%3C%202.0%20*%20b2Settings.b2_linearSlop)%20%7B%0A%09%09%09%09%09%09C2%20%3D%20b2Math.Clamp(translation%2C%20(-b2Settings.b2_maxLinearCorrection)%2C%20b2Settings.b2_maxLinearCorrection)%3B%0A%09%09%09%09%09%09linearError%20%3D%20b2Math.Abs(translation)%3B%0A%09%09%09%09%09%09active%20%3D%20true%3B%0A%09%09%09%09%09%7D%20else%20if%20(translation%20%3C%3D%20this.m_lowerTranslation)%20%7B%0A%09%09%09%09%09%09C2%20%3D%20b2Math.Clamp(translation%20-%20this.m_lowerTranslation%20%2B%20b2Settings.b2_linearSlop%2C%20(-b2Settings.b2_maxLinearCorrection)%2C%200.0)%3B%0A%09%09%09%09%09%09linearError%20%3D%20this.m_lowerTranslation%20-%20translation%3B%0A%09%09%09%09%09%09active%20%3D%20true%3B%0A%09%09%09%09%09%7D%20else%20if%20(translation%20%3E%3D%20this.m_upperTranslation)%20%7B%0A%09%09%09%09%09%09C2%20%3D%20b2Math.Clamp(translation%20-%20this.m_upperTranslation%20%2B%20b2Settings.b2_linearSlop%2C%200.0%2C%20b2Settings.b2_maxLinearCorrection)%3B%0A%09%09%09%09%09%09linearError%20%3D%20translation%20-%20this.m_upperTranslation%3B%0A%09%09%09%09%09%09active%20%3D%20true%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09this.m_perp%20%3D%20b2Math.MulMV(R1%2C%20this.m_localYAxis1)%3B%0A%09%09%09%09this.m_s1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_perp.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_perp.x%3B%0A%09%09%09%09this.m_s2%20%3D%20r2X%20*%20this.m_perp.y%20-%20r2Y%20*%20this.m_perp.x%3B%0A%09%09%09%09const%20impulse%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09const%20C1%20%3D%20this.m_perp.x%20*%20dX%20%2B%20this.m_perp.y%20*%20dY%3B%0A%09%09%09%09linearError%20%3D%20b2Math.Max(linearError%2C%20b2Math.Abs(C1))%3B%0A%09%09%09%09angularError%20%3D%200.0%3B%0A%09%09%09%09if%20(active)%20%7B%0A%09%09%09%09%09m1%20%3D%20this.m_invMassA%3B%0A%09%09%09%09%09m2%20%3D%20this.m_invMassB%3B%0A%09%09%09%09%09i1%20%3D%20this.m_invIA%3B%0A%09%09%09%09%09i2%20%3D%20this.m_invIB%3B%0A%09%09%09%09%09this.m_K.col1.x%20%3D%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%09%09%09%09%09this.m_K.col1.y%20%3D%20i1%20*%20this.m_s1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_a2%3B%0A%09%09%09%09%09this.m_K.col2.x%20%3D%20this.m_K.col1.y%3B%0A%09%09%09%09%09this.m_K.col2.y%20%3D%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_a1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%20*%20this.m_a2%3B%0A%09%09%09%09%09this.m_K.Solve(impulse%2C%20(-C1)%2C%20(-C2))%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09m1%20%3D%20this.m_invMassA%3B%0A%09%09%09%09%09m2%20%3D%20this.m_invMassB%3B%0A%09%09%09%09%09i1%20%3D%20this.m_invIA%3B%0A%09%09%09%09%09i2%20%3D%20this.m_invIB%3B%0A%09%09%09%09%09const%20k11%20%3D%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%09%09%09%09%09let%20impulse1%20%3D%200%3B%0A%09%09%09%09%09if%20(k11%20!%3D%200.0)%20%7B%0A%09%09%09%09%09%09impulse1%20%3D%20((-C1))%20%2F%20k11%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09impulse1%20%3D%200.0%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09impulse.x%20%3D%20impulse1%3B%0A%09%09%09%09%09impulse.y%20%3D%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20PX%20%3D%20impulse.x%20*%20this.m_perp.x%20%2B%20impulse.y%20*%20this.m_axis.x%3B%0A%09%09%09%09const%20PY%20%3D%20impulse.x%20*%20this.m_perp.y%20%2B%20impulse.y%20*%20this.m_axis.y%3B%0A%09%09%09%09const%20L1%20%3D%20impulse.x%20*%20this.m_s1%20%2B%20impulse.y%20*%20this.m_a1%3B%0A%09%09%09%09const%20L2%20%3D%20impulse.x%20*%20this.m_s2%20%2B%20impulse.y%20*%20this.m_a2%3B%0A%09%09%09%09c1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%09%09%09%09c1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%09%09%09%09a1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%09%09%09%09c2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%09%09%09%09c2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%09%09%09%09a2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%09%09%09%09bA.m_sweep.a%20%3D%20a1%3B%0A%09%09%09%09bB.m_sweep.a%20%3D%20a2%3B%0A%09%09%09%09bA.SynchronizeTransform()%3B%0A%09%09%09%09bB.SynchronizeTransform()%3B%0A%09%09%09%09return%20linearError%20%3C%3D%20b2Settings.b2_linearSlop%20%26%26%20angularError%20%3C%3D%20b2Settings.b2_angularSlop%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Joints.b2LineJoint%20%3D%20b2LineJoint%3B%0A%0A%09%09class%20b2LineJointDef%20extends%20b2JointDef%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2LineJointDef.b2LineJointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2LineJointDef)%20this.b2LineJointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2LineJointDef()%20%7B%0A%09%09%09%09Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.localAxisA%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09b2LineJointDef()%20%7B%0A%09%09%09%09this.__super.b2JointDef.call(this)%3B%0A%09%09%09%09this.type%20%3D%20b2Joint.e_lineJoint%3B%0A%09%09%09%09this.localAxisA.Set(1.0%2C%200.0)%3B%0A%09%09%09%09this.enableLimit%20%3D%20false%3B%0A%09%09%09%09this.lowerTranslation%20%3D%200.0%3B%0A%09%09%09%09this.upperTranslation%20%3D%200.0%3B%0A%09%09%09%09this.enableMotor%20%3D%20false%3B%0A%09%09%09%09this.maxMotorForce%20%3D%200.0%3B%0A%09%09%09%09this.motorSpeed%20%3D%200.0%3B%0A%09%09%09%7D%0A%0A%09%09%09Initialize(bA%2C%20bB%2C%20anchor%2C%20axis)%20%7B%0A%09%09%09%09this.bodyA%20%3D%20bA%3B%0A%09%09%09%09this.bodyB%20%3D%20bB%3B%0A%09%09%09%09this.localAnchorA%20%3D%20this.bodyA.GetLocalPoint(anchor)%3B%0A%09%09%09%09this.localAnchorB%20%3D%20this.bodyB.GetLocalPoint(anchor)%3B%0A%09%09%09%09this.localAxisA%20%3D%20this.bodyA.GetLocalVector(axis)%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Joints.b2LineJointDef%20%3D%20b2LineJointDef%3B%0A%0A%09%09class%20b2MouseJoint%20extends%20b2Joint%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2MouseJoint.b2MouseJoint.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2MouseJoint)%20this.b2MouseJoint.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2MouseJoint()%20%7B%0A%09%09%09%09Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.K%20%3D%20new%20b2Mat22()%3B%0A%09%09%09%09this.K1%20%3D%20new%20b2Mat22()%3B%0A%09%09%09%09this.K2%20%3D%20new%20b2Mat22()%3B%0A%09%09%09%09this.m_localAnchor%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_target%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_impulse%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_mass%20%3D%20new%20b2Mat22()%3B%0A%09%09%09%09this.m_C%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAnchorA()%20%7B%0A%09%09%09%09return%20this.m_target%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAnchorB()%20%7B%0A%09%09%09%09return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetReactionForce(inv_dt)%20%7B%0A%09%09%09%09if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%09%09%09%09return%20new%20b2Vec2(inv_dt%20*%20this.m_impulse.x%2C%20inv_dt%20*%20this.m_impulse.y)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetReactionTorque(inv_dt)%20%7B%0A%09%09%09%09if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%09%09%09%09return%200.0%3B%0A%09%09%09%7D%0A%0A%09%09%09GetTarget()%20%7B%0A%09%09%09%09return%20this.m_target%3B%0A%09%09%09%7D%0A%0A%09%09%09SetTarget(target)%20%7B%0A%09%09%09%09if%20(this.m_bodyB.IsAwake()%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09this.m_bodyB.SetAwake(true)%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_target%20%3D%20target%3B%0A%09%09%09%7D%0A%0A%09%09%09GetMaxForce()%20%7B%0A%09%09%09%09return%20this.m_maxForce%3B%0A%09%09%09%7D%0A%0A%09%09%09SetMaxForce(maxForce)%20%7B%0A%09%09%09%09if%20(maxForce%20%3D%3D%3D%20undefined)%20maxForce%20%3D%200%3B%0A%09%09%09%09this.m_maxForce%20%3D%20maxForce%3B%0A%09%09%09%7D%0A%0A%09%09%09GetFrequency()%20%7B%0A%09%09%09%09return%20this.m_frequencyHz%3B%0A%09%09%09%7D%0A%0A%09%09%09SetFrequency(hz)%20%7B%0A%09%09%09%09if%20(hz%20%3D%3D%3D%20undefined)%20hz%20%3D%200%3B%0A%09%09%09%09this.m_frequencyHz%20%3D%20hz%3B%0A%09%09%09%7D%0A%0A%09%09%09GetDampingRatio()%20%7B%0A%09%09%09%09return%20this.m_dampingRatio%3B%0A%09%09%09%7D%0A%0A%09%09%09SetDampingRatio(ratio)%20%7B%0A%09%09%09%09if%20(ratio%20%3D%3D%3D%20undefined)%20ratio%20%3D%200%3B%0A%09%09%09%09this.m_dampingRatio%20%3D%20ratio%3B%0A%09%09%09%7D%0A%0A%09%09%09b2MouseJoint(def)%20%7B%0A%09%09%09%09this.__super.b2Joint.call(this%2C%20def)%3B%0A%09%09%09%09this.m_target.SetV(def.target)%3B%0A%09%09%09%09const%20tX%20%3D%20this.m_target.x%20-%20this.m_bodyB.m_xf.position.x%3B%0A%09%09%09%09const%20tY%20%3D%20this.m_target.y%20-%20this.m_bodyB.m_xf.position.y%3B%0A%09%09%09%09const%20tMat%20%3D%20this.m_bodyB.m_xf.R%3B%0A%09%09%09%09this.m_localAnchor.x%20%3D%20(tX%20*%20tMat.col1.x%20%2B%20tY%20*%20tMat.col1.y)%3B%0A%09%09%09%09this.m_localAnchor.y%20%3D%20(tX%20*%20tMat.col2.x%20%2B%20tY%20*%20tMat.col2.y)%3B%0A%09%09%09%09this.m_maxForce%20%3D%20def.maxForce%3B%0A%09%09%09%09this.m_impulse.SetZero()%3B%0A%09%09%09%09this.m_frequencyHz%20%3D%20def.frequencyHz%3B%0A%09%09%09%09this.m_dampingRatio%20%3D%20def.dampingRatio%3B%0A%09%09%09%09this.m_beta%20%3D%200.0%3B%0A%09%09%09%09this.m_gamma%20%3D%200.0%3B%0A%09%09%09%7D%0A%0A%09%09%09InitVelocityConstraints(step)%20%7B%0A%09%09%09%09const%20b%20%3D%20this.m_bodyB%3B%0A%09%09%09%09const%20mass%20%3D%20b.GetMass()%3B%0A%09%09%09%09const%20omega%20%3D%202.0%20*%20Math.PI%20*%20this.m_frequencyHz%3B%0A%09%09%09%09const%20d%20%3D%202.0%20*%20mass%20*%20this.m_dampingRatio%20*%20omega%3B%0A%09%09%09%09const%20k%20%3D%20mass%20*%20omega%20*%20omega%3B%0A%09%09%09%09this.m_gamma%20%3D%20step.dt%20*%20(d%20%2B%20step.dt%20*%20k)%3B%0A%09%09%09%09this.m_gamma%20%3D%20this.m_gamma%20!%3D%200%20%3F%201%20%2F%20this.m_gamma%20%3A%200.0%3B%0A%09%09%09%09this.m_beta%20%3D%20step.dt%20*%20k%20*%20this.m_gamma%3B%0A%09%09%09%09let%20tMat%3B%20tMat%20%3D%20b.m_xf.R%3B%0A%09%09%09%09let%20rX%20%3D%20this.m_localAnchor.x%20-%20b.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20rY%20%3D%20this.m_localAnchor.y%20-%20b.m_sweep.localCenter.y%3B%0A%09%09%09%09const%20tX%20%3D%20(tMat.col1.x%20*%20rX%20%2B%20tMat.col2.x%20*%20rY)%3B%20rY%20%3D%20(tMat.col1.y%20*%20rX%20%2B%20tMat.col2.y%20*%20rY)%3B%0A%09%09%09%09rX%20%3D%20tX%3B%0A%09%09%09%09const%20invMass%20%3D%20b.m_invMass%3B%0A%09%09%09%09const%20invI%20%3D%20b.m_invI%3B%20this.K1.col1.x%20%3D%20invMass%3B%0A%09%09%09%09this.K1.col2.x%20%3D%200.0%3B%0A%09%09%09%09this.K1.col1.y%20%3D%200.0%3B%0A%09%09%09%09this.K1.col2.y%20%3D%20invMass%3B%0A%09%09%09%09this.K2.col1.x%20%3D%20invI%20*%20rY%20*%20rY%3B%0A%09%09%09%09this.K2.col2.x%20%3D%20(-invI%20*%20rX%20*%20rY)%3B%0A%09%09%09%09this.K2.col1.y%20%3D%20(-invI%20*%20rX%20*%20rY)%3B%0A%09%09%09%09this.K2.col2.y%20%3D%20invI%20*%20rX%20*%20rX%3B%0A%09%09%09%09this.K.SetM(this.K1)%3B%0A%09%09%09%09this.K.AddM(this.K2)%3B%0A%09%09%09%09this.K.col1.x%20%2B%3D%20this.m_gamma%3B%0A%09%09%09%09this.K.col2.y%20%2B%3D%20this.m_gamma%3B%0A%09%09%09%09this.K.GetInverse(this.m_mass)%3B%0A%09%09%09%09this.m_C.x%20%3D%20b.m_sweep.c.x%20%2B%20rX%20-%20this.m_target.x%3B%0A%09%09%09%09this.m_C.y%20%3D%20b.m_sweep.c.y%20%2B%20rY%20-%20this.m_target.y%3B%0A%09%09%09%09b.m_angularVelocity%20*%3D%200.98%3B%0A%09%09%09%09this.m_impulse.x%20*%3D%20step.dtRatio%3B%0A%09%09%09%09this.m_impulse.y%20*%3D%20step.dtRatio%3B%0A%09%09%09%09b.m_linearVelocity.x%20%2B%3D%20invMass%20*%20this.m_impulse.x%3B%0A%09%09%09%09b.m_linearVelocity.y%20%2B%3D%20invMass%20*%20this.m_impulse.y%3B%0A%09%09%09%09b.m_angularVelocity%20%2B%3D%20invI%20*%20(rX%20*%20this.m_impulse.y%20-%20rY%20*%20this.m_impulse.x)%3B%0A%09%09%09%7D%0A%0A%09%09%09SolveVelocityConstraints(step)%20%7B%0A%09%09%09%09const%20b%20%3D%20this.m_bodyB%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09let%20tX%20%3D%200%3B%0A%09%09%09%09let%20tY%20%3D%200%3B%0A%09%09%09%09tMat%20%3D%20b.m_xf.R%3B%0A%09%09%09%09let%20rX%20%3D%20this.m_localAnchor.x%20-%20b.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20rY%20%3D%20this.m_localAnchor.y%20-%20b.m_sweep.localCenter.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20rX%20%2B%20tMat.col2.x%20*%20rY)%3B%0A%09%09%09%09rY%20%3D%20(tMat.col1.y%20*%20rX%20%2B%20tMat.col2.y%20*%20rY)%3B%0A%09%09%09%09rX%20%3D%20tX%3B%0A%09%09%09%09const%20CdotX%20%3D%20b.m_linearVelocity.x%20%2B%20((-b.m_angularVelocity%20*%20rY))%3B%0A%09%09%09%09const%20CdotY%20%3D%20b.m_linearVelocity.y%20%2B%20(b.m_angularVelocity%20*%20rX)%3B%0A%09%09%09%09tMat%20%3D%20this.m_mass%3B%0A%09%09%09%09tX%20%3D%20CdotX%20%2B%20this.m_beta%20*%20this.m_C.x%20%2B%20this.m_gamma%20*%20this.m_impulse.x%3B%0A%09%09%09%09tY%20%3D%20CdotY%20%2B%20this.m_beta%20*%20this.m_C.y%20%2B%20this.m_gamma%20*%20this.m_impulse.y%3B%0A%09%09%09%09let%20impulseX%20%3D%20(-(tMat.col1.x%20*%20tX%20%2B%20tMat.col2.x%20*%20tY))%3B%0A%09%09%09%09let%20impulseY%20%3D%20(-(tMat.col1.y%20*%20tX%20%2B%20tMat.col2.y%20*%20tY))%3B%0A%09%09%09%09const%20oldImpulseX%20%3D%20this.m_impulse.x%3B%0A%09%09%09%09const%20oldImpulseY%20%3D%20this.m_impulse.y%3B%0A%09%09%09%09this.m_impulse.x%20%2B%3D%20impulseX%3B%0A%09%09%09%09this.m_impulse.y%20%2B%3D%20impulseY%3B%0A%09%09%09%09const%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxForce%3B%0A%09%09%09%09if%20(this.m_impulse.LengthSquared()%20%3E%20maxImpulse%20*%20maxImpulse)%20%7B%0A%09%09%09%09%09this.m_impulse.Multiply(maxImpulse%20%2F%20this.m_impulse.Length())%3B%0A%09%09%09%09%7D%0A%09%09%09%09impulseX%20%3D%20this.m_impulse.x%20-%20oldImpulseX%3B%0A%09%09%09%09impulseY%20%3D%20this.m_impulse.y%20-%20oldImpulseY%3B%0A%09%09%09%09b.m_linearVelocity.x%20%2B%3D%20b.m_invMass%20*%20impulseX%3B%0A%09%09%09%09b.m_linearVelocity.y%20%2B%3D%20b.m_invMass%20*%20impulseY%3B%0A%09%09%09%09b.m_angularVelocity%20%2B%3D%20b.m_invI%20*%20(rX%20*%20impulseY%20-%20rY%20*%20impulseX)%3B%0A%09%09%09%7D%0A%0A%09%09%09SolvePositionConstraints(baumgarte)%20%7B%0A%09%09%09%09if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%09%09%09%09return%20true%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Joints.b2MouseJoint%20%3D%20b2MouseJoint%3B%0A%0A%09%09class%20b2MouseJointDef%20extends%20b2JointDef%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2MouseJointDef.b2MouseJointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2MouseJointDef)%20this.b2MouseJointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2MouseJointDef()%20%7B%0A%09%09%09%09Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.target%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09b2MouseJointDef()%20%7B%0A%09%09%09%09this.__super.b2JointDef.call(this)%3B%0A%09%09%09%09this.type%20%3D%20b2Joint.e_mouseJoint%3B%0A%09%09%09%09this.maxForce%20%3D%200.0%3B%0A%09%09%09%09this.frequencyHz%20%3D%205.0%3B%0A%09%09%09%09this.dampingRatio%20%3D%200.7%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Joints.b2MouseJointDef%20%3D%20b2MouseJointDef%3B%0A%0A%09%09class%20b2PrismaticJoint%20extends%20b2Joint%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2PrismaticJoint.b2PrismaticJoint.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2PrismaticJoint)%20this.b2PrismaticJoint.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2PrismaticJoint()%20%7B%0A%09%09%09%09Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_localXAxis1%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_localYAxis1%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_axis%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_perp%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_K%20%3D%20new%20b2Mat33()%3B%0A%09%09%09%09this.m_impulse%20%3D%20new%20b2Vec3()%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAnchorA()%20%7B%0A%09%09%09%09return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAnchorB()%20%7B%0A%09%09%09%09return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetReactionForce(inv_dt)%20%7B%0A%09%09%09%09if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%09%09%09%09return%20new%20b2Vec2(inv_dt%20*%20(this.m_impulse.x%20*%20this.m_perp.x%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_axis.x)%2C%20inv_dt%20*%20(this.m_impulse.x%20*%20this.m_perp.y%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_axis.y))%3B%0A%09%09%09%7D%0A%0A%09%09%09GetReactionTorque(inv_dt)%20%7B%0A%09%09%09%09if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%09%09%09%09return%20inv_dt%20*%20this.m_impulse.y%3B%0A%09%09%09%7D%0A%0A%09%09%09GetJointTranslation()%20%7B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09const%20p1%20%3D%20bA.GetWorldPoint(this.m_localAnchor1)%3B%0A%09%09%09%09const%20p2%20%3D%20bB.GetWorldPoint(this.m_localAnchor2)%3B%0A%09%09%09%09const%20dX%20%3D%20p2.x%20-%20p1.x%3B%0A%09%09%09%09const%20dY%20%3D%20p2.y%20-%20p1.y%3B%0A%09%09%09%09const%20axis%20%3D%20bA.GetWorldVector(this.m_localXAxis1)%3B%0A%09%09%09%09const%20translation%20%3D%20axis.x%20*%20dX%20%2B%20axis.y%20*%20dY%3B%0A%09%09%09%09return%20translation%3B%0A%09%09%09%7D%0A%0A%09%09%09GetJointSpeed()%20%7B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09tMat%20%3D%20bA.m_xf.R%3B%0A%09%09%09%09let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%09%09%09%09let%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%09%09%09%09r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%09%09%09%09r1X%20%3D%20tX%3B%0A%09%09%09%09tMat%20%3D%20bB.m_xf.R%3B%0A%09%09%09%09let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%09%09%09%09r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%09%09%09%09r2X%20%3D%20tX%3B%0A%09%09%09%09const%20p1X%20%3D%20bA.m_sweep.c.x%20%2B%20r1X%3B%0A%09%09%09%09const%20p1Y%20%3D%20bA.m_sweep.c.y%20%2B%20r1Y%3B%0A%09%09%09%09const%20p2X%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%3B%0A%09%09%09%09const%20p2Y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%3B%0A%09%09%09%09const%20dX%20%3D%20p2X%20-%20p1X%3B%0A%09%09%09%09const%20dY%20%3D%20p2Y%20-%20p1Y%3B%0A%09%09%09%09const%20axis%20%3D%20bA.GetWorldVector(this.m_localXAxis1)%3B%0A%09%09%09%09const%20v1%20%3D%20bA.m_linearVelocity%3B%0A%09%09%09%09const%20v2%20%3D%20bB.m_linearVelocity%3B%0A%09%09%09%09const%20w1%20%3D%20bA.m_angularVelocity%3B%0A%09%09%09%09const%20w2%20%3D%20bB.m_angularVelocity%3B%0A%09%09%09%09const%20speed%20%3D%20(dX%20*%20((-w1%20*%20axis.y))%20%2B%20dY%20*%20(w1%20*%20axis.x))%20%2B%20(axis.x%20*%20(((v2.x%20%2B%20((-w2%20*%20r2Y)))%20-%20v1.x)%20-%20((-w1%20*%20r1Y)))%20%2B%20axis.y%20*%20(((v2.y%20%2B%20(w2%20*%20r2X))%20-%20v1.y)%20-%20(w1%20*%20r1X)))%3B%0A%09%09%09%09return%20speed%3B%0A%09%09%09%7D%0A%0A%09%09%09IsLimitEnabled()%20%7B%0A%09%09%09%09return%20this.m_enableLimit%3B%0A%09%09%09%7D%0A%0A%09%09%09EnableLimit(flag)%20%7B%0A%09%09%09%09this.m_bodyA.SetAwake(true)%3B%0A%09%09%09%09this.m_bodyB.SetAwake(true)%3B%0A%09%09%09%09this.m_enableLimit%20%3D%20flag%3B%0A%09%09%09%7D%0A%0A%09%09%09GetLowerLimit()%20%7B%0A%09%09%09%09return%20this.m_lowerTranslation%3B%0A%09%09%09%7D%0A%0A%09%09%09GetUpperLimit()%20%7B%0A%09%09%09%09return%20this.m_upperTranslation%3B%0A%09%09%09%7D%0A%0A%09%09%09SetLimits(lower%2C%20upper)%20%7B%0A%09%09%09%09if%20(lower%20%3D%3D%3D%20undefined)%20lower%20%3D%200%3B%0A%09%09%09%09if%20(upper%20%3D%3D%3D%20undefined)%20upper%20%3D%200%3B%0A%09%09%09%09this.m_bodyA.SetAwake(true)%3B%0A%09%09%09%09this.m_bodyB.SetAwake(true)%3B%0A%09%09%09%09this.m_lowerTranslation%20%3D%20lower%3B%0A%09%09%09%09this.m_upperTranslation%20%3D%20upper%3B%0A%09%09%09%7D%0A%0A%09%09%09IsMotorEnabled()%20%7B%0A%09%09%09%09return%20this.m_enableMotor%3B%0A%09%09%09%7D%0A%0A%09%09%09EnableMotor(flag)%20%7B%0A%09%09%09%09this.m_bodyA.SetAwake(true)%3B%0A%09%09%09%09this.m_bodyB.SetAwake(true)%3B%0A%09%09%09%09this.m_enableMotor%20%3D%20flag%3B%0A%09%09%09%7D%0A%0A%09%09%09SetMotorSpeed(speed)%20%7B%0A%09%09%09%09if%20(speed%20%3D%3D%3D%20undefined)%20speed%20%3D%200%3B%0A%09%09%09%09this.m_bodyA.SetAwake(true)%3B%0A%09%09%09%09this.m_bodyB.SetAwake(true)%3B%0A%09%09%09%09this.m_motorSpeed%20%3D%20speed%3B%0A%09%09%09%7D%0A%0A%09%09%09GetMotorSpeed()%20%7B%0A%09%09%09%09return%20this.m_motorSpeed%3B%0A%09%09%09%7D%0A%0A%09%09%09SetMaxMotorForce(force)%20%7B%0A%09%09%09%09if%20(force%20%3D%3D%3D%20undefined)%20force%20%3D%200%3B%0A%09%09%09%09this.m_bodyA.SetAwake(true)%3B%0A%09%09%09%09this.m_bodyB.SetAwake(true)%3B%0A%09%09%09%09this.m_maxMotorForce%20%3D%20force%3B%0A%09%09%09%7D%0A%0A%09%09%09GetMotorForce()%20%7B%0A%09%09%09%09return%20this.m_motorImpulse%3B%0A%09%09%09%7D%0A%0A%09%09%09b2PrismaticJoint(def)%20%7B%0A%09%09%09%09this.__super.b2Joint.call(this%2C%20def)%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09const%20tX%20%3D%200%3B%0A%09%09%09%09const%20tY%20%3D%200%3B%0A%09%09%09%09this.m_localAnchor1.SetV(def.localAnchorA)%3B%0A%09%09%09%09this.m_localAnchor2.SetV(def.localAnchorB)%3B%0A%09%09%09%09this.m_localXAxis1.SetV(def.localAxisA)%3B%0A%09%09%09%09this.m_localYAxis1.x%20%3D%20(-this.m_localXAxis1.y)%3B%0A%09%09%09%09this.m_localYAxis1.y%20%3D%20this.m_localXAxis1.x%3B%0A%09%09%09%09this.m_refAngle%20%3D%20def.referenceAngle%3B%0A%09%09%09%09this.m_impulse.SetZero()%3B%0A%09%09%09%09this.m_motorMass%20%3D%200.0%3B%0A%09%09%09%09this.m_motorImpulse%20%3D%200.0%3B%0A%09%09%09%09this.m_lowerTranslation%20%3D%20def.lowerTranslation%3B%0A%09%09%09%09this.m_upperTranslation%20%3D%20def.upperTranslation%3B%0A%09%09%09%09this.m_maxMotorForce%20%3D%20def.maxMotorForce%3B%0A%09%09%09%09this.m_motorSpeed%20%3D%20def.motorSpeed%3B%0A%09%09%09%09this.m_enableLimit%20%3D%20def.enableLimit%3B%0A%09%09%09%09this.m_enableMotor%20%3D%20def.enableMotor%3B%0A%09%09%09%09this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%09%09%09%09this.m_axis.SetZero()%3B%0A%09%09%09%09this.m_perp.SetZero()%3B%0A%09%09%09%7D%0A%0A%09%09%09InitVelocityConstraints(step)%20%7B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09let%20tX%20%3D%200%3B%0A%09%09%09%09this.m_localCenterA.SetV(bA.GetLocalCenter())%3B%0A%09%09%09%09this.m_localCenterB.SetV(bB.GetLocalCenter())%3B%0A%09%09%09%09const%20xf1%20%3D%20bA.GetTransform()%3B%0A%09%09%09%09const%20xf2%20%3D%20bB.GetTransform()%3B%0A%09%09%09%09tMat%20%3D%20bA.m_xf.R%3B%0A%09%09%09%09let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20this.m_localCenterA.x%3B%0A%09%09%09%09let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20this.m_localCenterA.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%09%09%09%09r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%09%09%09%09r1X%20%3D%20tX%3B%0A%09%09%09%09tMat%20%3D%20bB.m_xf.R%3B%0A%09%09%09%09let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20this.m_localCenterB.x%3B%0A%09%09%09%09let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20this.m_localCenterB.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%09%09%09%09r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%09%09%09%09r2X%20%3D%20tX%3B%0A%09%09%09%09const%20dX%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%09%09%09%09const%20dY%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%09%09%09%09this.m_invMassA%20%3D%20bA.m_invMass%3B%0A%09%09%09%09this.m_invMassB%20%3D%20bB.m_invMass%3B%0A%09%09%09%09this.m_invIA%20%3D%20bA.m_invI%3B%0A%09%09%09%09this.m_invIB%20%3D%20bB.m_invI%3B%20%7B%0A%09%09%09%09%09this.m_axis.SetV(b2Math.MulMV(xf1.R%2C%20this.m_localXAxis1))%3B%0A%09%09%09%09%09this.m_a1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_axis.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_axis.x%3B%0A%09%09%09%09%09this.m_a2%20%3D%20r2X%20*%20this.m_axis.y%20-%20r2Y%20*%20this.m_axis.x%3B%0A%09%09%09%09%09this.m_motorMass%20%3D%20this.m_invMassA%20%2B%20this.m_invMassB%20%2B%20this.m_invIA%20*%20this.m_a1%20*%20this.m_a1%20%2B%20this.m_invIB%20*%20this.m_a2%20*%20this.m_a2%3B%0A%09%09%09%09%09if%20(this.m_motorMass%20%3E%20Number.MIN_VALUE)%20this.m_motorMass%20%3D%201.0%20%2F%20this.m_motorMass%3B%0A%09%09%09%09%7D%20%7B%0A%09%09%09%09%09this.m_perp.SetV(b2Math.MulMV(xf1.R%2C%20this.m_localYAxis1))%3B%0A%09%09%09%09%09this.m_s1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_perp.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_perp.x%3B%0A%09%09%09%09%09this.m_s2%20%3D%20r2X%20*%20this.m_perp.y%20-%20r2Y%20*%20this.m_perp.x%3B%0A%09%09%09%09%09const%20m1%20%3D%20this.m_invMassA%3B%0A%09%09%09%09%09const%20m2%20%3D%20this.m_invMassB%3B%0A%09%09%09%09%09const%20i1%20%3D%20this.m_invIA%3B%0A%09%09%09%09%09const%20i2%20%3D%20this.m_invIB%3B%0A%09%09%09%09%09this.m_K.col1.x%20%3D%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%09%09%09%09%09this.m_K.col1.y%20%3D%20i1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%3B%0A%09%09%09%09%09this.m_K.col1.z%20%3D%20i1%20*%20this.m_s1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_a2%3B%0A%09%09%09%09%09this.m_K.col2.x%20%3D%20this.m_K.col1.y%3B%0A%09%09%09%09%09this.m_K.col2.y%20%3D%20i1%20%2B%20i2%3B%0A%09%09%09%09%09this.m_K.col2.z%20%3D%20i1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%3B%0A%09%09%09%09%09this.m_K.col3.x%20%3D%20this.m_K.col1.z%3B%0A%09%09%09%09%09this.m_K.col3.y%20%3D%20this.m_K.col2.z%3B%0A%09%09%09%09%09this.m_K.col3.z%20%3D%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_a1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%20*%20this.m_a2%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.m_enableLimit)%20%7B%0A%09%09%09%09%09const%20jointTransition%20%3D%20this.m_axis.x%20*%20dX%20%2B%20this.m_axis.y%20*%20dY%3B%0A%09%09%09%09%09if%20(b2Math.Abs(this.m_upperTranslation%20-%20this.m_lowerTranslation)%20%3C%202.0%20*%20b2Settings.b2_linearSlop)%20%7B%0A%09%09%09%09%09%09this.m_limitState%20%3D%20b2Joint.e_equalLimits%3B%0A%09%09%09%09%09%7D%20else%20if%20(jointTransition%20%3C%3D%20this.m_lowerTranslation)%20%7B%0A%09%09%09%09%09%09if%20(this.m_limitState%20!%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%09%09%09%09%09%09%09this.m_limitState%20%3D%20b2Joint.e_atLowerLimit%3B%0A%09%09%09%09%09%09%09this.m_impulse.z%20%3D%200.0%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%20else%20if%20(jointTransition%20%3E%3D%20this.m_upperTranslation)%20%7B%0A%09%09%09%09%09%09if%20(this.m_limitState%20!%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%09%09%09%09%09%09%09this.m_limitState%20%3D%20b2Joint.e_atUpperLimit%3B%0A%09%09%09%09%09%09%09this.m_impulse.z%20%3D%200.0%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%09%09%09%09%09%09this.m_impulse.z%20%3D%200.0%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.m_enableMotor%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09this.m_motorImpulse%20%3D%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(step.warmStarting)%20%7B%0A%09%09%09%09%09this.m_impulse.x%20*%3D%20step.dtRatio%3B%0A%09%09%09%09%09this.m_impulse.y%20*%3D%20step.dtRatio%3B%0A%09%09%09%09%09this.m_motorImpulse%20*%3D%20step.dtRatio%3B%0A%09%09%09%09%09const%20PX%20%3D%20this.m_impulse.x%20*%20this.m_perp.x%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_axis.x%3B%0A%09%09%09%09%09const%20PY%20%3D%20this.m_impulse.x%20*%20this.m_perp.y%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_axis.y%3B%0A%09%09%09%09%09const%20L1%20%3D%20this.m_impulse.x%20*%20this.m_s1%20%2B%20this.m_impulse.y%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_a1%3B%0A%09%09%09%09%09const%20L2%20%3D%20this.m_impulse.x%20*%20this.m_s2%20%2B%20this.m_impulse.y%20%2B%20(this.m_motorImpulse%20%2B%20this.m_impulse.z)%20*%20this.m_a2%3B%0A%09%09%09%09%09bA.m_linearVelocity.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%09%09%09%09%09bA.m_linearVelocity.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%09%09%09%09%09bA.m_angularVelocity%20-%3D%20this.m_invIA%20*%20L1%3B%0A%09%09%09%09%09bB.m_linearVelocity.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%09%09%09%09%09bB.m_linearVelocity.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%09%09%09%09%09bB.m_angularVelocity%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_impulse.SetZero()%3B%0A%09%09%09%09%09this.m_motorImpulse%20%3D%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09SolveVelocityConstraints(step)%20%7B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09const%20v1%20%3D%20bA.m_linearVelocity%3B%0A%09%09%09%09let%20w1%20%3D%20bA.m_angularVelocity%3B%0A%09%09%09%09const%20v2%20%3D%20bB.m_linearVelocity%3B%0A%09%09%09%09let%20w2%20%3D%20bB.m_angularVelocity%3B%0A%09%09%09%09let%20PX%20%3D%200%3B%0A%09%09%09%09let%20PY%20%3D%200%3B%0A%09%09%09%09let%20L1%20%3D%200%3B%0A%09%09%09%09let%20L2%20%3D%200%3B%0A%09%09%09%09if%20(this.m_enableMotor%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_equalLimits)%20%7B%0A%09%09%09%09%09const%20Cdot%20%3D%20this.m_axis.x%20*%20(v2.x%20-%20v1.x)%20%2B%20this.m_axis.y%20*%20(v2.y%20-%20v1.y)%20%2B%20this.m_a2%20*%20w2%20-%20this.m_a1%20*%20w1%3B%0A%09%09%09%09%09let%20impulse%20%3D%20this.m_motorMass%20*%20(this.m_motorSpeed%20-%20Cdot)%3B%0A%09%09%09%09%09const%20oldImpulse%20%3D%20this.m_motorImpulse%3B%0A%09%09%09%09%09const%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxMotorForce%3B%0A%09%09%09%09%09this.m_motorImpulse%20%3D%20b2Math.Clamp(this.m_motorImpulse%20%2B%20impulse%2C%20(-maxImpulse)%2C%20maxImpulse)%3B%0A%09%09%09%09%09impulse%20%3D%20this.m_motorImpulse%20-%20oldImpulse%3B%0A%09%09%09%09%09PX%20%3D%20impulse%20*%20this.m_axis.x%3B%0A%09%09%09%09%09PY%20%3D%20impulse%20*%20this.m_axis.y%3B%0A%09%09%09%09%09L1%20%3D%20impulse%20*%20this.m_a1%3B%0A%09%09%09%09%09L2%20%3D%20impulse%20*%20this.m_a2%3B%0A%09%09%09%09%09v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%09%09%09%09%09v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%09%09%09%09%09w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%09%09%09%09%09v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%09%09%09%09%09v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%09%09%09%09%09w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20Cdot1X%20%3D%20this.m_perp.x%20*%20(v2.x%20-%20v1.x)%20%2B%20this.m_perp.y%20*%20(v2.y%20-%20v1.y)%20%2B%20this.m_s2%20*%20w2%20-%20this.m_s1%20*%20w1%3B%0A%09%09%09%09const%20Cdot1Y%20%3D%20w2%20-%20w1%3B%0A%09%09%09%09if%20(this.m_enableLimit%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_inactiveLimit)%20%7B%0A%09%09%09%09%09const%20Cdot2%20%3D%20this.m_axis.x%20*%20(v2.x%20-%20v1.x)%20%2B%20this.m_axis.y%20*%20(v2.y%20-%20v1.y)%20%2B%20this.m_a2%20*%20w2%20-%20this.m_a1%20*%20w1%3B%0A%09%09%09%09%09const%20f1%20%3D%20this.m_impulse.Copy()%3B%0A%09%09%09%09%09const%20df%20%3D%20this.m_K.Solve33(new%20b2Vec3()%2C%20(-Cdot1X)%2C%20(-Cdot1Y)%2C%20(-Cdot2))%3B%0A%09%09%09%09%09this.m_impulse.Add(df)%3B%0A%09%09%09%09%09if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%09%09%09%09%09%09this.m_impulse.z%20%3D%20b2Math.Max(this.m_impulse.z%2C%200.0)%3B%0A%09%09%09%09%09%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%09%09%09%09%09%09this.m_impulse.z%20%3D%20b2Math.Min(this.m_impulse.z%2C%200.0)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09const%20bX%20%3D%20(-Cdot1X)%20-%20(this.m_impulse.z%20-%20f1.z)%20*%20this.m_K.col3.x%3B%0A%09%09%09%09%09const%20bY%20%3D%20(-Cdot1Y)%20-%20(this.m_impulse.z%20-%20f1.z)%20*%20this.m_K.col3.y%3B%0A%09%09%09%09%09const%20f2r%20%3D%20this.m_K.Solve22(new%20b2Vec2()%2C%20bX%2C%20bY)%3B%0A%09%09%09%09%09f2r.x%20%2B%3D%20f1.x%3B%0A%09%09%09%09%09f2r.y%20%2B%3D%20f1.y%3B%0A%09%09%09%09%09this.m_impulse.x%20%3D%20f2r.x%3B%0A%09%09%09%09%09this.m_impulse.y%20%3D%20f2r.y%3B%0A%09%09%09%09%09df.x%20%3D%20this.m_impulse.x%20-%20f1.x%3B%0A%09%09%09%09%09df.y%20%3D%20this.m_impulse.y%20-%20f1.y%3B%0A%09%09%09%09%09df.z%20%3D%20this.m_impulse.z%20-%20f1.z%3B%0A%09%09%09%09%09PX%20%3D%20df.x%20*%20this.m_perp.x%20%2B%20df.z%20*%20this.m_axis.x%3B%0A%09%09%09%09%09PY%20%3D%20df.x%20*%20this.m_perp.y%20%2B%20df.z%20*%20this.m_axis.y%3B%0A%09%09%09%09%09L1%20%3D%20df.x%20*%20this.m_s1%20%2B%20df.y%20%2B%20df.z%20*%20this.m_a1%3B%0A%09%09%09%09%09L2%20%3D%20df.x%20*%20this.m_s2%20%2B%20df.y%20%2B%20df.z%20*%20this.m_a2%3B%0A%09%09%09%09%09v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%09%09%09%09%09v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%09%09%09%09%09w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%09%09%09%09%09v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%09%09%09%09%09v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%09%09%09%09%09w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09const%20df2%20%3D%20this.m_K.Solve22(new%20b2Vec2()%2C%20(-Cdot1X)%2C%20(-Cdot1Y))%3B%0A%09%09%09%09%09this.m_impulse.x%20%2B%3D%20df2.x%3B%0A%09%09%09%09%09this.m_impulse.y%20%2B%3D%20df2.y%3B%0A%09%09%09%09%09PX%20%3D%20df2.x%20*%20this.m_perp.x%3B%0A%09%09%09%09%09PY%20%3D%20df2.x%20*%20this.m_perp.y%3B%0A%09%09%09%09%09L1%20%3D%20df2.x%20*%20this.m_s1%20%2B%20df2.y%3B%0A%09%09%09%09%09L2%20%3D%20df2.x%20*%20this.m_s2%20%2B%20df2.y%3B%0A%09%09%09%09%09v1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%09%09%09%09%09v1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%09%09%09%09%09w1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%09%09%09%09%09v2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%09%09%09%09%09v2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%09%09%09%09%09w2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%09%09%09%09%7D%0A%09%09%09%09bA.m_linearVelocity.SetV(v1)%3B%0A%09%09%09%09bA.m_angularVelocity%20%3D%20w1%3B%0A%09%09%09%09bB.m_linearVelocity.SetV(v2)%3B%0A%09%09%09%09bB.m_angularVelocity%20%3D%20w2%3B%0A%09%09%09%7D%0A%0A%09%09%09SolvePositionConstraints(baumgarte)%20%7B%0A%09%09%09%09if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%09%09%09%09const%20limitC%20%3D%200%3B%0A%09%09%09%09const%20oldLimitImpulse%20%3D%200%3B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09const%20c1%20%3D%20bA.m_sweep.c%3B%0A%09%09%09%09let%20a1%20%3D%20bA.m_sweep.a%3B%0A%09%09%09%09const%20c2%20%3D%20bB.m_sweep.c%3B%0A%09%09%09%09let%20a2%20%3D%20bB.m_sweep.a%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09let%20tX%20%3D%200%3B%0A%09%09%09%09let%20m1%20%3D%200%3B%0A%09%09%09%09let%20m2%20%3D%200%3B%0A%09%09%09%09let%20i1%20%3D%200%3B%0A%09%09%09%09let%20i2%20%3D%200%3B%0A%09%09%09%09let%20linearError%20%3D%200.0%3B%0A%09%09%09%09let%20angularError%20%3D%200.0%3B%0A%09%09%09%09let%20active%20%3D%20false%3B%0A%09%09%09%09let%20C2%20%3D%200.0%3B%0A%09%09%09%09const%20R1%20%3D%20b2Mat22.FromAngle(a1)%3B%0A%09%09%09%09const%20R2%20%3D%20b2Mat22.FromAngle(a2)%3B%0A%09%09%09%09tMat%20%3D%20R1%3B%0A%09%09%09%09let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20this.m_localCenterA.x%3B%0A%09%09%09%09let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20this.m_localCenterA.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%09%09%09%09r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%09%09%09%09r1X%20%3D%20tX%3B%0A%09%09%09%09tMat%20%3D%20R2%3B%0A%09%09%09%09let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20this.m_localCenterB.x%3B%0A%09%09%09%09let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20this.m_localCenterB.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%09%09%09%09r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%09%09%09%09r2X%20%3D%20tX%3B%0A%09%09%09%09const%20dX%20%3D%20c2.x%20%2B%20r2X%20-%20c1.x%20-%20r1X%3B%0A%09%09%09%09const%20dY%20%3D%20c2.y%20%2B%20r2Y%20-%20c1.y%20-%20r1Y%3B%0A%09%09%09%09if%20(this.m_enableLimit)%20%7B%0A%09%09%09%09%09this.m_axis%20%3D%20b2Math.MulMV(R1%2C%20this.m_localXAxis1)%3B%0A%09%09%09%09%09this.m_a1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_axis.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_axis.x%3B%0A%09%09%09%09%09this.m_a2%20%3D%20r2X%20*%20this.m_axis.y%20-%20r2Y%20*%20this.m_axis.x%3B%0A%09%09%09%09%09const%20translation%20%3D%20this.m_axis.x%20*%20dX%20%2B%20this.m_axis.y%20*%20dY%3B%0A%09%09%09%09%09if%20(b2Math.Abs(this.m_upperTranslation%20-%20this.m_lowerTranslation)%20%3C%202.0%20*%20b2Settings.b2_linearSlop)%20%7B%0A%09%09%09%09%09%09C2%20%3D%20b2Math.Clamp(translation%2C%20(-b2Settings.b2_maxLinearCorrection)%2C%20b2Settings.b2_maxLinearCorrection)%3B%0A%09%09%09%09%09%09linearError%20%3D%20b2Math.Abs(translation)%3B%0A%09%09%09%09%09%09active%20%3D%20true%3B%0A%09%09%09%09%09%7D%20else%20if%20(translation%20%3C%3D%20this.m_lowerTranslation)%20%7B%0A%09%09%09%09%09%09C2%20%3D%20b2Math.Clamp(translation%20-%20this.m_lowerTranslation%20%2B%20b2Settings.b2_linearSlop%2C%20(-b2Settings.b2_maxLinearCorrection)%2C%200.0)%3B%0A%09%09%09%09%09%09linearError%20%3D%20this.m_lowerTranslation%20-%20translation%3B%0A%09%09%09%09%09%09active%20%3D%20true%3B%0A%09%09%09%09%09%7D%20else%20if%20(translation%20%3E%3D%20this.m_upperTranslation)%20%7B%0A%09%09%09%09%09%09C2%20%3D%20b2Math.Clamp(translation%20-%20this.m_upperTranslation%20%2B%20b2Settings.b2_linearSlop%2C%200.0%2C%20b2Settings.b2_maxLinearCorrection)%3B%0A%09%09%09%09%09%09linearError%20%3D%20translation%20-%20this.m_upperTranslation%3B%0A%09%09%09%09%09%09active%20%3D%20true%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09this.m_perp%20%3D%20b2Math.MulMV(R1%2C%20this.m_localYAxis1)%3B%0A%09%09%09%09this.m_s1%20%3D%20(dX%20%2B%20r1X)%20*%20this.m_perp.y%20-%20(dY%20%2B%20r1Y)%20*%20this.m_perp.x%3B%0A%09%09%09%09this.m_s2%20%3D%20r2X%20*%20this.m_perp.y%20-%20r2Y%20*%20this.m_perp.x%3B%0A%09%09%09%09const%20impulse%20%3D%20new%20b2Vec3()%3B%0A%09%09%09%09const%20C1X%20%3D%20this.m_perp.x%20*%20dX%20%2B%20this.m_perp.y%20*%20dY%3B%0A%09%09%09%09const%20C1Y%20%3D%20a2%20-%20a1%20-%20this.m_refAngle%3B%0A%09%09%09%09linearError%20%3D%20b2Math.Max(linearError%2C%20b2Math.Abs(C1X))%3B%0A%09%09%09%09angularError%20%3D%20b2Math.Abs(C1Y)%3B%0A%09%09%09%09if%20(active)%20%7B%0A%09%09%09%09%09m1%20%3D%20this.m_invMassA%3B%0A%09%09%09%09%09m2%20%3D%20this.m_invMassB%3B%0A%09%09%09%09%09i1%20%3D%20this.m_invIA%3B%0A%09%09%09%09%09i2%20%3D%20this.m_invIB%3B%0A%09%09%09%09%09this.m_K.col1.x%20%3D%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%09%09%09%09%09this.m_K.col1.y%20%3D%20i1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%3B%0A%09%09%09%09%09this.m_K.col1.z%20%3D%20i1%20*%20this.m_s1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_a2%3B%0A%09%09%09%09%09this.m_K.col2.x%20%3D%20this.m_K.col1.y%3B%0A%09%09%09%09%09this.m_K.col2.y%20%3D%20i1%20%2B%20i2%3B%0A%09%09%09%09%09this.m_K.col2.z%20%3D%20i1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%3B%0A%09%09%09%09%09this.m_K.col3.x%20%3D%20this.m_K.col1.z%3B%0A%09%09%09%09%09this.m_K.col3.y%20%3D%20this.m_K.col2.z%3B%0A%09%09%09%09%09this.m_K.col3.z%20%3D%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_a1%20*%20this.m_a1%20%2B%20i2%20*%20this.m_a2%20*%20this.m_a2%3B%0A%09%09%09%09%09this.m_K.Solve33(impulse%2C%20(-C1X)%2C%20(-C1Y)%2C%20(-C2))%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09m1%20%3D%20this.m_invMassA%3B%0A%09%09%09%09%09m2%20%3D%20this.m_invMassB%3B%0A%09%09%09%09%09i1%20%3D%20this.m_invIA%3B%0A%09%09%09%09%09i2%20%3D%20this.m_invIB%3B%0A%09%09%09%09%09const%20k11%20%3D%20m1%20%2B%20m2%20%2B%20i1%20*%20this.m_s1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%20*%20this.m_s2%3B%0A%09%09%09%09%09const%20k12%20%3D%20i1%20*%20this.m_s1%20%2B%20i2%20*%20this.m_s2%3B%0A%09%09%09%09%09const%20k22%20%3D%20i1%20%2B%20i2%3B%0A%09%09%09%09%09this.m_K.col1.Set(k11%2C%20k12%2C%200.0)%3B%0A%09%09%09%09%09this.m_K.col2.Set(k12%2C%20k22%2C%200.0)%3B%0A%09%09%09%09%09const%20impulse1%20%3D%20this.m_K.Solve22(new%20b2Vec2()%2C%20(-C1X)%2C%20(-C1Y))%3B%0A%09%09%09%09%09impulse.x%20%3D%20impulse1.x%3B%0A%09%09%09%09%09impulse.y%20%3D%20impulse1.y%3B%0A%09%09%09%09%09impulse.z%20%3D%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20PX%20%3D%20impulse.x%20*%20this.m_perp.x%20%2B%20impulse.z%20*%20this.m_axis.x%3B%0A%09%09%09%09const%20PY%20%3D%20impulse.x%20*%20this.m_perp.y%20%2B%20impulse.z%20*%20this.m_axis.y%3B%0A%09%09%09%09const%20L1%20%3D%20impulse.x%20*%20this.m_s1%20%2B%20impulse.y%20%2B%20impulse.z%20*%20this.m_a1%3B%0A%09%09%09%09const%20L2%20%3D%20impulse.x%20*%20this.m_s2%20%2B%20impulse.y%20%2B%20impulse.z%20*%20this.m_a2%3B%0A%09%09%09%09c1.x%20-%3D%20this.m_invMassA%20*%20PX%3B%0A%09%09%09%09c1.y%20-%3D%20this.m_invMassA%20*%20PY%3B%0A%09%09%09%09a1%20-%3D%20this.m_invIA%20*%20L1%3B%0A%09%09%09%09c2.x%20%2B%3D%20this.m_invMassB%20*%20PX%3B%0A%09%09%09%09c2.y%20%2B%3D%20this.m_invMassB%20*%20PY%3B%0A%09%09%09%09a2%20%2B%3D%20this.m_invIB%20*%20L2%3B%0A%09%09%09%09bA.m_sweep.a%20%3D%20a1%3B%0A%09%09%09%09bB.m_sweep.a%20%3D%20a2%3B%0A%09%09%09%09bA.SynchronizeTransform()%3B%0A%09%09%09%09bB.SynchronizeTransform()%3B%0A%09%09%09%09return%20linearError%20%3C%3D%20b2Settings.b2_linearSlop%20%26%26%20angularError%20%3C%3D%20b2Settings.b2_angularSlop%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Joints.b2PrismaticJoint%20%3D%20b2PrismaticJoint%3B%0A%0A%09%09class%20b2PrismaticJointDef%20extends%20b2JointDef%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2PrismaticJointDef.b2PrismaticJointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2PrismaticJointDef)%20this.b2PrismaticJointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2PrismaticJointDef()%20%7B%0A%09%09%09%09Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.localAxisA%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09b2PrismaticJointDef()%20%7B%0A%09%09%09%09this.__super.b2JointDef.call(this)%3B%0A%09%09%09%09this.type%20%3D%20b2Joint.e_prismaticJoint%3B%0A%09%09%09%09this.localAxisA.Set(1.0%2C%200.0)%3B%0A%09%09%09%09this.referenceAngle%20%3D%200.0%3B%0A%09%09%09%09this.enableLimit%20%3D%20false%3B%0A%09%09%09%09this.lowerTranslation%20%3D%200.0%3B%0A%09%09%09%09this.upperTranslation%20%3D%200.0%3B%0A%09%09%09%09this.enableMotor%20%3D%20false%3B%0A%09%09%09%09this.maxMotorForce%20%3D%200.0%3B%0A%09%09%09%09this.motorSpeed%20%3D%200.0%3B%0A%09%09%09%7D%0A%0A%09%09%09Initialize(bA%2C%20bB%2C%20anchor%2C%20axis)%20%7B%0A%09%09%09%09this.bodyA%20%3D%20bA%3B%0A%09%09%09%09this.bodyB%20%3D%20bB%3B%0A%09%09%09%09this.localAnchorA%20%3D%20this.bodyA.GetLocalPoint(anchor)%3B%0A%09%09%09%09this.localAnchorB%20%3D%20this.bodyB.GetLocalPoint(anchor)%3B%0A%09%09%09%09this.localAxisA%20%3D%20this.bodyA.GetLocalVector(axis)%3B%0A%09%09%09%09this.referenceAngle%20%3D%20this.bodyB.GetAngle()%20-%20this.bodyA.GetAngle()%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Joints.b2PrismaticJointDef%20%3D%20b2PrismaticJointDef%3B%0A%0A%09%09class%20b2PulleyJoint%20extends%20b2Joint%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2PulleyJoint.b2PulleyJoint.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2PulleyJoint)%20this.b2PulleyJoint.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2PulleyJoint()%20%7B%0A%09%09%09%09Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.m_groundAnchor1%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_groundAnchor2%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_u1%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_u2%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAnchorA()%20%7B%0A%09%09%09%09return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAnchorB()%20%7B%0A%09%09%09%09return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetReactionForce(inv_dt)%20%7B%0A%09%09%09%09if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%09%09%09%09return%20new%20b2Vec2(inv_dt%20*%20this.m_impulse%20*%20this.m_u2.x%2C%20inv_dt%20*%20this.m_impulse%20*%20this.m_u2.y)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetReactionTorque(inv_dt)%20%7B%0A%09%09%09%09if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%09%09%09%09return%200.0%3B%0A%09%09%09%7D%0A%0A%09%09%09GetGroundAnchorA()%20%7B%0A%09%09%09%09const%20a%20%3D%20this.m_ground.m_xf.position.Copy()%3B%0A%09%09%09%09a.Add(this.m_groundAnchor1)%3B%0A%09%09%09%09return%20a%3B%0A%09%09%09%7D%0A%0A%09%09%09GetGroundAnchorB()%20%7B%0A%09%09%09%09const%20a%20%3D%20this.m_ground.m_xf.position.Copy()%3B%0A%09%09%09%09a.Add(this.m_groundAnchor2)%3B%0A%09%09%09%09return%20a%3B%0A%09%09%09%7D%0A%0A%09%09%09GetLength1()%20%7B%0A%09%09%09%09const%20p%20%3D%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%09%09%09%09const%20sX%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor1.x%3B%0A%09%09%09%09const%20sY%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor1.y%3B%0A%09%09%09%09const%20dX%20%3D%20p.x%20-%20sX%3B%0A%09%09%09%09const%20dY%20%3D%20p.y%20-%20sY%3B%0A%09%09%09%09return%20Math.sqrt(dX%20*%20dX%20%2B%20dY%20*%20dY)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetLength2()%20%7B%0A%09%09%09%09const%20p%20%3D%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%09%09%09%09const%20sX%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor2.x%3B%0A%09%09%09%09const%20sY%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor2.y%3B%0A%09%09%09%09const%20dX%20%3D%20p.x%20-%20sX%3B%0A%09%09%09%09const%20dY%20%3D%20p.y%20-%20sY%3B%0A%09%09%09%09return%20Math.sqrt(dX%20*%20dX%20%2B%20dY%20*%20dY)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetRatio()%20%7B%0A%09%09%09%09return%20this.m_ratio%3B%0A%09%09%09%7D%0A%0A%09%09%09b2PulleyJoint(def)%20%7B%0A%09%09%09%09this.__super.b2Joint.call(this%2C%20def)%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09const%20tX%20%3D%200%3B%0A%09%09%09%09const%20tY%20%3D%200%3B%0A%09%09%09%09this.m_ground%20%3D%20this.m_bodyA.m_world.m_groundBody%3B%0A%09%09%09%09this.m_groundAnchor1.x%20%3D%20def.groundAnchorA.x%20-%20this.m_ground.m_xf.position.x%3B%0A%09%09%09%09this.m_groundAnchor1.y%20%3D%20def.groundAnchorA.y%20-%20this.m_ground.m_xf.position.y%3B%0A%09%09%09%09this.m_groundAnchor2.x%20%3D%20def.groundAnchorB.x%20-%20this.m_ground.m_xf.position.x%3B%0A%09%09%09%09this.m_groundAnchor2.y%20%3D%20def.groundAnchorB.y%20-%20this.m_ground.m_xf.position.y%3B%0A%09%09%09%09this.m_localAnchor1.SetV(def.localAnchorA)%3B%0A%09%09%09%09this.m_localAnchor2.SetV(def.localAnchorB)%3B%0A%09%09%09%09this.m_ratio%20%3D%20def.ratio%3B%0A%09%09%09%09this.m_constant%20%3D%20def.lengthA%20%2B%20this.m_ratio%20*%20def.lengthB%3B%0A%09%09%09%09this.m_maxLength1%20%3D%20b2Math.Min(def.maxLengthA%2C%20this.m_constant%20-%20this.m_ratio%20*%20b2PulleyJoint.b2_minPulleyLength)%3B%0A%09%09%09%09this.m_maxLength2%20%3D%20b2Math.Min(def.maxLengthB%2C%20(this.m_constant%20-%20b2PulleyJoint.b2_minPulleyLength)%20%2F%20this.m_ratio)%3B%0A%09%09%09%09this.m_impulse%20%3D%200.0%3B%0A%09%09%09%09this.m_limitImpulse1%20%3D%200.0%3B%0A%09%09%09%09this.m_limitImpulse2%20%3D%200.0%3B%0A%09%09%09%7D%0A%0A%09%09%09InitVelocityConstraints(step)%20%7B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09tMat%20%3D%20bA.m_xf.R%3B%0A%09%09%09%09let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%09%09%09%09let%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%09%09%09%09r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%09%09%09%09r1X%20%3D%20tX%3B%0A%09%09%09%09tMat%20%3D%20bB.m_xf.R%3B%0A%09%09%09%09let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%09%09%09%09r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%09%09%09%09r2X%20%3D%20tX%3B%0A%09%09%09%09const%20p1X%20%3D%20bA.m_sweep.c.x%20%2B%20r1X%3B%0A%09%09%09%09const%20p1Y%20%3D%20bA.m_sweep.c.y%20%2B%20r1Y%3B%0A%09%09%09%09const%20p2X%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%3B%0A%09%09%09%09const%20p2Y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%3B%0A%09%09%09%09const%20s1X%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor1.x%3B%0A%09%09%09%09const%20s1Y%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor1.y%3B%0A%09%09%09%09const%20s2X%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor2.x%3B%0A%09%09%09%09const%20s2Y%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor2.y%3B%0A%09%09%09%09this.m_u1.Set(p1X%20-%20s1X%2C%20p1Y%20-%20s1Y)%3B%0A%09%09%09%09this.m_u2.Set(p2X%20-%20s2X%2C%20p2Y%20-%20s2Y)%3B%0A%09%09%09%09const%20length1%20%3D%20this.m_u1.Length()%3B%0A%09%09%09%09const%20length2%20%3D%20this.m_u2.Length()%3B%0A%09%09%09%09if%20(length1%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%09%09%09%09%09this.m_u1.Multiply(1.0%20%2F%20length1)%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_u1.SetZero()%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(length2%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%09%09%09%09%09this.m_u2.Multiply(1.0%20%2F%20length2)%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_u2.SetZero()%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20C%20%3D%20this.m_constant%20-%20length1%20-%20this.m_ratio%20*%20length2%3B%0A%09%09%09%09if%20(C%20%3E%200.0)%20%7B%0A%09%09%09%09%09this.m_state%20%3D%20b2Joint.e_inactiveLimit%3B%0A%09%09%09%09%09this.m_impulse%20%3D%200.0%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_state%20%3D%20b2Joint.e_atUpperLimit%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(length1%20%3C%20this.m_maxLength1)%20%7B%0A%09%09%09%09%09this.m_limitState1%20%3D%20b2Joint.e_inactiveLimit%3B%0A%09%09%09%09%09this.m_limitImpulse1%20%3D%200.0%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_limitState1%20%3D%20b2Joint.e_atUpperLimit%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(length2%20%3C%20this.m_maxLength2)%20%7B%0A%09%09%09%09%09this.m_limitState2%20%3D%20b2Joint.e_inactiveLimit%3B%0A%09%09%09%09%09this.m_limitImpulse2%20%3D%200.0%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_limitState2%20%3D%20b2Joint.e_atUpperLimit%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20cr1u1%20%3D%20r1X%20*%20this.m_u1.y%20-%20r1Y%20*%20this.m_u1.x%3B%0A%09%09%09%09const%20cr2u2%20%3D%20r2X%20*%20this.m_u2.y%20-%20r2Y%20*%20this.m_u2.x%3B%0A%09%09%09%09this.m_limitMass1%20%3D%20bA.m_invMass%20%2B%20bA.m_invI%20*%20cr1u1%20*%20cr1u1%3B%0A%09%09%09%09this.m_limitMass2%20%3D%20bB.m_invMass%20%2B%20bB.m_invI%20*%20cr2u2%20*%20cr2u2%3B%0A%09%09%09%09this.m_pulleyMass%20%3D%20this.m_limitMass1%20%2B%20this.m_ratio%20*%20this.m_ratio%20*%20this.m_limitMass2%3B%0A%09%09%09%09this.m_limitMass1%20%3D%201.0%20%2F%20this.m_limitMass1%3B%0A%09%09%09%09this.m_limitMass2%20%3D%201.0%20%2F%20this.m_limitMass2%3B%0A%09%09%09%09this.m_pulleyMass%20%3D%201.0%20%2F%20this.m_pulleyMass%3B%0A%09%09%09%09if%20(step.warmStarting)%20%7B%0A%09%09%09%09%09this.m_impulse%20*%3D%20step.dtRatio%3B%0A%09%09%09%09%09this.m_limitImpulse1%20*%3D%20step.dtRatio%3B%0A%09%09%09%09%09this.m_limitImpulse2%20*%3D%20step.dtRatio%3B%0A%09%09%09%09%09const%20P1X%20%3D%20((-this.m_impulse)%20-%20this.m_limitImpulse1)%20*%20this.m_u1.x%3B%0A%09%09%09%09%09const%20P1Y%20%3D%20((-this.m_impulse)%20-%20this.m_limitImpulse1)%20*%20this.m_u1.y%3B%0A%09%09%09%09%09const%20P2X%20%3D%20((-this.m_ratio%20*%20this.m_impulse)%20-%20this.m_limitImpulse2)%20*%20this.m_u2.x%3B%0A%09%09%09%09%09const%20P2Y%20%3D%20((-this.m_ratio%20*%20this.m_impulse)%20-%20this.m_limitImpulse2)%20*%20this.m_u2.y%3B%0A%09%09%09%09%09bA.m_linearVelocity.x%20%2B%3D%20bA.m_invMass%20*%20P1X%3B%0A%09%09%09%09%09bA.m_linearVelocity.y%20%2B%3D%20bA.m_invMass%20*%20P1Y%3B%0A%09%09%09%09%09bA.m_angularVelocity%20%2B%3D%20bA.m_invI%20*%20(r1X%20*%20P1Y%20-%20r1Y%20*%20P1X)%3B%0A%09%09%09%09%09bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20P2X%3B%0A%09%09%09%09%09bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20P2Y%3B%0A%09%09%09%09%09bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20P2Y%20-%20r2Y%20*%20P2X)%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_impulse%20%3D%200.0%3B%0A%09%09%09%09%09this.m_limitImpulse1%20%3D%200.0%3B%0A%09%09%09%09%09this.m_limitImpulse2%20%3D%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09SolveVelocityConstraints(step)%20%7B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09tMat%20%3D%20bA.m_xf.R%3B%0A%09%09%09%09let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%09%09%09%09let%20tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%09%09%09%09r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%09%09%09%09r1X%20%3D%20tX%3B%0A%09%09%09%09tMat%20%3D%20bB.m_xf.R%3B%0A%09%09%09%09let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%09%09%09%09r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%09%09%09%09r2X%20%3D%20tX%3B%0A%09%09%09%09let%20v1X%20%3D%200%3B%0A%09%09%09%09let%20v1Y%20%3D%200%3B%0A%09%09%09%09let%20v2X%20%3D%200%3B%0A%09%09%09%09let%20v2Y%20%3D%200%3B%0A%09%09%09%09let%20P1X%20%3D%200%3B%0A%09%09%09%09let%20P1Y%20%3D%200%3B%0A%09%09%09%09let%20P2X%20%3D%200%3B%0A%09%09%09%09let%20P2Y%20%3D%200%3B%0A%09%09%09%09let%20Cdot%20%3D%200%3B%0A%09%09%09%09let%20impulse%20%3D%200%3B%0A%09%09%09%09let%20oldImpulse%20%3D%200%3B%0A%09%09%09%09if%20(this.m_state%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%09%09%09%09%09v1X%20%3D%20bA.m_linearVelocity.x%20%2B%20((-bA.m_angularVelocity%20*%20r1Y))%3B%0A%09%09%09%09%09v1Y%20%3D%20bA.m_linearVelocity.y%20%2B%20(bA.m_angularVelocity%20*%20r1X)%3B%0A%09%09%09%09%09v2X%20%3D%20bB.m_linearVelocity.x%20%2B%20((-bB.m_angularVelocity%20*%20r2Y))%3B%0A%09%09%09%09%09v2Y%20%3D%20bB.m_linearVelocity.y%20%2B%20(bB.m_angularVelocity%20*%20r2X)%3B%0A%09%09%09%09%09Cdot%20%3D%20(-(this.m_u1.x%20*%20v1X%20%2B%20this.m_u1.y%20*%20v1Y))%20-%20this.m_ratio%20*%20(this.m_u2.x%20*%20v2X%20%2B%20this.m_u2.y%20*%20v2Y)%3B%0A%09%09%09%09%09impulse%20%3D%20this.m_pulleyMass%20*%20((-Cdot))%3B%0A%09%09%09%09%09oldImpulse%20%3D%20this.m_impulse%3B%0A%09%09%09%09%09this.m_impulse%20%3D%20b2Math.Max(0.0%2C%20this.m_impulse%20%2B%20impulse)%3B%0A%09%09%09%09%09impulse%20%3D%20this.m_impulse%20-%20oldImpulse%3B%0A%09%09%09%09%09P1X%20%3D%20(-impulse%20*%20this.m_u1.x)%3B%0A%09%09%09%09%09P1Y%20%3D%20(-impulse%20*%20this.m_u1.y)%3B%0A%09%09%09%09%09P2X%20%3D%20(-this.m_ratio%20*%20impulse%20*%20this.m_u2.x)%3B%0A%09%09%09%09%09P2Y%20%3D%20(-this.m_ratio%20*%20impulse%20*%20this.m_u2.y)%3B%0A%09%09%09%09%09bA.m_linearVelocity.x%20%2B%3D%20bA.m_invMass%20*%20P1X%3B%0A%09%09%09%09%09bA.m_linearVelocity.y%20%2B%3D%20bA.m_invMass%20*%20P1Y%3B%0A%09%09%09%09%09bA.m_angularVelocity%20%2B%3D%20bA.m_invI%20*%20(r1X%20*%20P1Y%20-%20r1Y%20*%20P1X)%3B%0A%09%09%09%09%09bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20P2X%3B%0A%09%09%09%09%09bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20P2Y%3B%0A%09%09%09%09%09bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20P2Y%20-%20r2Y%20*%20P2X)%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.m_limitState1%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%09%09%09%09%09v1X%20%3D%20bA.m_linearVelocity.x%20%2B%20((-bA.m_angularVelocity%20*%20r1Y))%3B%0A%09%09%09%09%09v1Y%20%3D%20bA.m_linearVelocity.y%20%2B%20(bA.m_angularVelocity%20*%20r1X)%3B%0A%09%09%09%09%09Cdot%20%3D%20(-(this.m_u1.x%20*%20v1X%20%2B%20this.m_u1.y%20*%20v1Y))%3B%0A%09%09%09%09%09impulse%20%3D%20(-this.m_limitMass1%20*%20Cdot)%3B%0A%09%09%09%09%09oldImpulse%20%3D%20this.m_limitImpulse1%3B%0A%09%09%09%09%09this.m_limitImpulse1%20%3D%20b2Math.Max(0.0%2C%20this.m_limitImpulse1%20%2B%20impulse)%3B%0A%09%09%09%09%09impulse%20%3D%20this.m_limitImpulse1%20-%20oldImpulse%3B%0A%09%09%09%09%09P1X%20%3D%20(-impulse%20*%20this.m_u1.x)%3B%0A%09%09%09%09%09P1Y%20%3D%20(-impulse%20*%20this.m_u1.y)%3B%0A%09%09%09%09%09bA.m_linearVelocity.x%20%2B%3D%20bA.m_invMass%20*%20P1X%3B%0A%09%09%09%09%09bA.m_linearVelocity.y%20%2B%3D%20bA.m_invMass%20*%20P1Y%3B%0A%09%09%09%09%09bA.m_angularVelocity%20%2B%3D%20bA.m_invI%20*%20(r1X%20*%20P1Y%20-%20r1Y%20*%20P1X)%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.m_limitState2%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%09%09%09%09%09v2X%20%3D%20bB.m_linearVelocity.x%20%2B%20((-bB.m_angularVelocity%20*%20r2Y))%3B%0A%09%09%09%09%09v2Y%20%3D%20bB.m_linearVelocity.y%20%2B%20(bB.m_angularVelocity%20*%20r2X)%3B%0A%09%09%09%09%09Cdot%20%3D%20(-(this.m_u2.x%20*%20v2X%20%2B%20this.m_u2.y%20*%20v2Y))%3B%0A%09%09%09%09%09impulse%20%3D%20(-this.m_limitMass2%20*%20Cdot)%3B%0A%09%09%09%09%09oldImpulse%20%3D%20this.m_limitImpulse2%3B%0A%09%09%09%09%09this.m_limitImpulse2%20%3D%20b2Math.Max(0.0%2C%20this.m_limitImpulse2%20%2B%20impulse)%3B%0A%09%09%09%09%09impulse%20%3D%20this.m_limitImpulse2%20-%20oldImpulse%3B%0A%09%09%09%09%09P2X%20%3D%20(-impulse%20*%20this.m_u2.x)%3B%0A%09%09%09%09%09P2Y%20%3D%20(-impulse%20*%20this.m_u2.y)%3B%0A%09%09%09%09%09bB.m_linearVelocity.x%20%2B%3D%20bB.m_invMass%20*%20P2X%3B%0A%09%09%09%09%09bB.m_linearVelocity.y%20%2B%3D%20bB.m_invMass%20*%20P2Y%3B%0A%09%09%09%09%09bB.m_angularVelocity%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20P2Y%20-%20r2Y%20*%20P2X)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09SolvePositionConstraints(baumgarte)%20%7B%0A%09%09%09%09if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09const%20s1X%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor1.x%3B%0A%09%09%09%09const%20s1Y%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor1.y%3B%0A%09%09%09%09const%20s2X%20%3D%20this.m_ground.m_xf.position.x%20%2B%20this.m_groundAnchor2.x%3B%0A%09%09%09%09const%20s2Y%20%3D%20this.m_ground.m_xf.position.y%20%2B%20this.m_groundAnchor2.y%3B%0A%09%09%09%09let%20r1X%20%3D%200%3B%0A%09%09%09%09let%20r1Y%20%3D%200%3B%0A%09%09%09%09let%20r2X%20%3D%200%3B%0A%09%09%09%09let%20r2Y%20%3D%200%3B%0A%09%09%09%09let%20p1X%20%3D%200%3B%0A%09%09%09%09let%20p1Y%20%3D%200%3B%0A%09%09%09%09let%20p2X%20%3D%200%3B%0A%09%09%09%09let%20p2Y%20%3D%200%3B%0A%09%09%09%09let%20length1%20%3D%200%3B%0A%09%09%09%09let%20length2%20%3D%200%3B%0A%09%09%09%09let%20C%20%3D%200%3B%0A%09%09%09%09let%20impulse%20%3D%200%3B%0A%09%09%09%09const%20oldImpulse%20%3D%200%3B%0A%09%09%09%09const%20oldLimitPositionImpulse%20%3D%200%3B%0A%09%09%09%09let%20tX%20%3D%200%3B%0A%09%09%09%09let%20linearError%20%3D%200.0%3B%0A%09%09%09%09if%20(this.m_state%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%09%09%09%09%09tMat%20%3D%20bA.m_xf.R%3B%0A%09%09%09%09%09r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%09%09%09%09%09r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%09%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%09%09%09%09%09r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%09%09%09%09%09r1X%20%3D%20tX%3B%0A%09%09%09%09%09tMat%20%3D%20bB.m_xf.R%3B%0A%09%09%09%09%09r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%09%09%09%09%09r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%09%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%09%09%09%09%09r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%09%09%09%09%09r2X%20%3D%20tX%3B%0A%09%09%09%09%09p1X%20%3D%20bA.m_sweep.c.x%20%2B%20r1X%3B%0A%09%09%09%09%09p1Y%20%3D%20bA.m_sweep.c.y%20%2B%20r1Y%3B%0A%09%09%09%09%09p2X%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%3B%0A%09%09%09%09%09p2Y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%3B%0A%09%09%09%09%09this.m_u1.Set(p1X%20-%20s1X%2C%20p1Y%20-%20s1Y)%3B%0A%09%09%09%09%09this.m_u2.Set(p2X%20-%20s2X%2C%20p2Y%20-%20s2Y)%3B%0A%09%09%09%09%09length1%20%3D%20this.m_u1.Length()%3B%0A%09%09%09%09%09length2%20%3D%20this.m_u2.Length()%3B%0A%09%09%09%09%09if%20(length1%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%09%09%09%09%09%09this.m_u1.Multiply(1.0%20%2F%20length1)%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09this.m_u1.SetZero()%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09if%20(length2%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%09%09%09%09%09%09this.m_u2.Multiply(1.0%20%2F%20length2)%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09this.m_u2.SetZero()%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09C%20%3D%20this.m_constant%20-%20length1%20-%20this.m_ratio%20*%20length2%3B%0A%09%09%09%09%09linearError%20%3D%20b2Math.Max(linearError%2C%20(-C))%3B%0A%09%09%09%09%09C%20%3D%20b2Math.Clamp(C%20%2B%20b2Settings.b2_linearSlop%2C%20(-b2Settings.b2_maxLinearCorrection)%2C%200.0)%3B%0A%09%09%09%09%09impulse%20%3D%20(-this.m_pulleyMass%20*%20C)%3B%0A%09%09%09%09%09p1X%20%3D%20(-impulse%20*%20this.m_u1.x)%3B%0A%09%09%09%09%09p1Y%20%3D%20(-impulse%20*%20this.m_u1.y)%3B%0A%09%09%09%09%09p2X%20%3D%20(-this.m_ratio%20*%20impulse%20*%20this.m_u2.x)%3B%0A%09%09%09%09%09p2Y%20%3D%20(-this.m_ratio%20*%20impulse%20*%20this.m_u2.y)%3B%0A%09%09%09%09%09bA.m_sweep.c.x%20%2B%3D%20bA.m_invMass%20*%20p1X%3B%0A%09%09%09%09%09bA.m_sweep.c.y%20%2B%3D%20bA.m_invMass%20*%20p1Y%3B%0A%09%09%09%09%09bA.m_sweep.a%20%2B%3D%20bA.m_invI%20*%20(r1X%20*%20p1Y%20-%20r1Y%20*%20p1X)%3B%0A%09%09%09%09%09bB.m_sweep.c.x%20%2B%3D%20bB.m_invMass%20*%20p2X%3B%0A%09%09%09%09%09bB.m_sweep.c.y%20%2B%3D%20bB.m_invMass%20*%20p2Y%3B%0A%09%09%09%09%09bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20p2Y%20-%20r2Y%20*%20p2X)%3B%0A%09%09%09%09%09bA.SynchronizeTransform()%3B%0A%09%09%09%09%09bB.SynchronizeTransform()%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.m_limitState1%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%09%09%09%09%09tMat%20%3D%20bA.m_xf.R%3B%0A%09%09%09%09%09r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%09%09%09%09%09r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%09%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%09%09%09%09%09r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%09%09%09%09%09r1X%20%3D%20tX%3B%0A%09%09%09%09%09p1X%20%3D%20bA.m_sweep.c.x%20%2B%20r1X%3B%0A%09%09%09%09%09p1Y%20%3D%20bA.m_sweep.c.y%20%2B%20r1Y%3B%0A%09%09%09%09%09this.m_u1.Set(p1X%20-%20s1X%2C%20p1Y%20-%20s1Y)%3B%0A%09%09%09%09%09length1%20%3D%20this.m_u1.Length()%3B%0A%09%09%09%09%09if%20(length1%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%09%09%09%09%09%09this.m_u1.x%20*%3D%201.0%20%2F%20length1%3B%0A%09%09%09%09%09%09this.m_u1.y%20*%3D%201.0%20%2F%20length1%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09this.m_u1.SetZero()%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09C%20%3D%20this.m_maxLength1%20-%20length1%3B%0A%09%09%09%09%09linearError%20%3D%20b2Math.Max(linearError%2C%20(-C))%3B%0A%09%09%09%09%09C%20%3D%20b2Math.Clamp(C%20%2B%20b2Settings.b2_linearSlop%2C%20(-b2Settings.b2_maxLinearCorrection)%2C%200.0)%3B%0A%09%09%09%09%09impulse%20%3D%20(-this.m_limitMass1%20*%20C)%3B%0A%09%09%09%09%09p1X%20%3D%20(-impulse%20*%20this.m_u1.x)%3B%0A%09%09%09%09%09p1Y%20%3D%20(-impulse%20*%20this.m_u1.y)%3B%0A%09%09%09%09%09bA.m_sweep.c.x%20%2B%3D%20bA.m_invMass%20*%20p1X%3B%0A%09%09%09%09%09bA.m_sweep.c.y%20%2B%3D%20bA.m_invMass%20*%20p1Y%3B%0A%09%09%09%09%09bA.m_sweep.a%20%2B%3D%20bA.m_invI%20*%20(r1X%20*%20p1Y%20-%20r1Y%20*%20p1X)%3B%0A%09%09%09%09%09bA.SynchronizeTransform()%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.m_limitState2%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%09%09%09%09%09tMat%20%3D%20bB.m_xf.R%3B%0A%09%09%09%09%09r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%09%09%09%09%09r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%09%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%09%09%09%09%09r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%09%09%09%09%09r2X%20%3D%20tX%3B%0A%09%09%09%09%09p2X%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%3B%0A%09%09%09%09%09p2Y%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%3B%0A%09%09%09%09%09this.m_u2.Set(p2X%20-%20s2X%2C%20p2Y%20-%20s2Y)%3B%0A%09%09%09%09%09length2%20%3D%20this.m_u2.Length()%3B%0A%09%09%09%09%09if%20(length2%20%3E%20b2Settings.b2_linearSlop)%20%7B%0A%09%09%09%09%09%09this.m_u2.x%20*%3D%201.0%20%2F%20length2%3B%0A%09%09%09%09%09%09this.m_u2.y%20*%3D%201.0%20%2F%20length2%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09this.m_u2.SetZero()%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09C%20%3D%20this.m_maxLength2%20-%20length2%3B%0A%09%09%09%09%09linearError%20%3D%20b2Math.Max(linearError%2C%20(-C))%3B%0A%09%09%09%09%09C%20%3D%20b2Math.Clamp(C%20%2B%20b2Settings.b2_linearSlop%2C%20(-b2Settings.b2_maxLinearCorrection)%2C%200.0)%3B%0A%09%09%09%09%09impulse%20%3D%20(-this.m_limitMass2%20*%20C)%3B%0A%09%09%09%09%09p2X%20%3D%20(-impulse%20*%20this.m_u2.x)%3B%0A%09%09%09%09%09p2Y%20%3D%20(-impulse%20*%20this.m_u2.y)%3B%0A%09%09%09%09%09bB.m_sweep.c.x%20%2B%3D%20bB.m_invMass%20*%20p2X%3B%0A%09%09%09%09%09bB.m_sweep.c.y%20%2B%3D%20bB.m_invMass%20*%20p2Y%3B%0A%09%09%09%09%09bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20p2Y%20-%20r2Y%20*%20p2X)%3B%0A%09%09%09%09%09bB.SynchronizeTransform()%3B%0A%09%09%09%09%7D%0A%09%09%09%09return%20linearError%20%3C%20b2Settings.b2_linearSlop%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Joints.b2PulleyJoint%20%3D%20b2PulleyJoint%3B%0A%0A%09%09class%20b2PulleyJointDef%20extends%20b2JointDef%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2PulleyJointDef.b2PulleyJointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2PulleyJointDef)%20this.b2PulleyJointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2PulleyJointDef()%20%7B%0A%09%09%09%09Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.groundAnchorA%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.groundAnchorB%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09b2PulleyJointDef()%20%7B%0A%09%09%09%09this.__super.b2JointDef.call(this)%3B%0A%09%09%09%09this.type%20%3D%20b2Joint.e_pulleyJoint%3B%0A%09%09%09%09this.groundAnchorA.Set((-1.0)%2C%201.0)%3B%0A%09%09%09%09this.groundAnchorB.Set(1.0%2C%201.0)%3B%0A%09%09%09%09this.localAnchorA.Set((-1.0)%2C%200.0)%3B%0A%09%09%09%09this.localAnchorB.Set(1.0%2C%200.0)%3B%0A%09%09%09%09this.lengthA%20%3D%200.0%3B%0A%09%09%09%09this.maxLengthA%20%3D%200.0%3B%0A%09%09%09%09this.lengthB%20%3D%200.0%3B%0A%09%09%09%09this.maxLengthB%20%3D%200.0%3B%0A%09%09%09%09this.ratio%20%3D%201.0%3B%0A%09%09%09%09this.collideConnected%20%3D%20true%3B%0A%09%09%09%7D%0A%0A%09%09%09Initialize(bA%2C%20bB%2C%20gaA%2C%20gaB%2C%20anchorA%2C%20anchorB%2C%20r)%20%7B%0A%09%09%09%09if%20(r%20%3D%3D%3D%20undefined)%20r%20%3D%200%3B%0A%09%09%09%09this.bodyA%20%3D%20bA%3B%0A%09%09%09%09this.bodyB%20%3D%20bB%3B%0A%09%09%09%09this.groundAnchorA.SetV(gaA)%3B%0A%09%09%09%09this.groundAnchorB.SetV(gaB)%3B%0A%09%09%09%09this.localAnchorA%20%3D%20this.bodyA.GetLocalPoint(anchorA)%3B%0A%09%09%09%09this.localAnchorB%20%3D%20this.bodyB.GetLocalPoint(anchorB)%3B%0A%09%09%09%09const%20d1X%20%3D%20anchorA.x%20-%20gaA.x%3B%0A%09%09%09%09const%20d1Y%20%3D%20anchorA.y%20-%20gaA.y%3B%0A%09%09%09%09this.lengthA%20%3D%20Math.sqrt(d1X%20*%20d1X%20%2B%20d1Y%20*%20d1Y)%3B%0A%09%09%09%09const%20d2X%20%3D%20anchorB.x%20-%20gaB.x%3B%0A%09%09%09%09const%20d2Y%20%3D%20anchorB.y%20-%20gaB.y%3B%0A%09%09%09%09this.lengthB%20%3D%20Math.sqrt(d2X%20*%20d2X%20%2B%20d2Y%20*%20d2Y)%3B%0A%09%09%09%09this.ratio%20%3D%20r%3B%0A%09%09%09%09const%20C%20%3D%20this.lengthA%20%2B%20this.ratio%20*%20this.lengthB%3B%0A%09%09%09%09this.maxLengthA%20%3D%20C%20-%20this.ratio%20*%20b2PulleyJoint.b2_minPulleyLength%3B%0A%09%09%09%09this.maxLengthB%20%3D%20(C%20-%20b2PulleyJoint.b2_minPulleyLength)%20%2F%20this.ratio%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Joints.b2PulleyJointDef%20%3D%20b2PulleyJointDef%3B%0A%0A%09%09class%20b2RevoluteJoint%20extends%20b2Joint%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2RevoluteJoint.b2RevoluteJoint.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2RevoluteJoint)%20this.b2RevoluteJoint.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2RevoluteJoint()%20%7B%0A%09%09%09%09Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.K%20%3D%20new%20b2Mat22()%3B%0A%09%09%09%09this.K1%20%3D%20new%20b2Mat22()%3B%0A%09%09%09%09this.K2%20%3D%20new%20b2Mat22()%3B%0A%09%09%09%09this.K3%20%3D%20new%20b2Mat22()%3B%0A%09%09%09%09this.impulse3%20%3D%20new%20b2Vec3()%3B%0A%09%09%09%09this.impulse2%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.reduced%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_localAnchor1%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_localAnchor2%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_impulse%20%3D%20new%20b2Vec3()%3B%0A%09%09%09%09this.m_mass%20%3D%20new%20b2Mat33()%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAnchorA()%20%7B%0A%09%09%09%09return%20this.m_bodyA.GetWorldPoint(this.m_localAnchor1)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAnchorB()%20%7B%0A%09%09%09%09return%20this.m_bodyB.GetWorldPoint(this.m_localAnchor2)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetReactionForce(inv_dt)%20%7B%0A%09%09%09%09if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%09%09%09%09return%20new%20b2Vec2(inv_dt%20*%20this.m_impulse.x%2C%20inv_dt%20*%20this.m_impulse.y)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetReactionTorque(inv_dt)%20%7B%0A%09%09%09%09if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%09%09%09%09return%20inv_dt%20*%20this.m_impulse.z%3B%0A%09%09%09%7D%0A%0A%09%09%09GetJointAngle()%20%7B%0A%09%09%09%09return%20this.m_bodyB.m_sweep.a%20-%20this.m_bodyA.m_sweep.a%20-%20this.m_referenceAngle%3B%0A%09%09%09%7D%0A%0A%09%09%09GetJointSpeed()%20%7B%0A%09%09%09%09return%20this.m_bodyB.m_angularVelocity%20-%20this.m_bodyA.m_angularVelocity%3B%0A%09%09%09%7D%0A%0A%09%09%09IsLimitEnabled()%20%7B%0A%09%09%09%09return%20this.m_enableLimit%3B%0A%09%09%09%7D%0A%0A%09%09%09EnableLimit(flag)%20%7B%0A%09%09%09%09this.m_enableLimit%20%3D%20flag%3B%0A%09%09%09%7D%0A%0A%09%09%09GetLowerLimit()%20%7B%0A%09%09%09%09return%20this.m_lowerAngle%3B%0A%09%09%09%7D%0A%0A%09%09%09GetUpperLimit()%20%7B%0A%09%09%09%09return%20this.m_upperAngle%3B%0A%09%09%09%7D%0A%0A%09%09%09SetLimits(lower%2C%20upper)%20%7B%0A%09%09%09%09if%20(lower%20%3D%3D%3D%20undefined)%20lower%20%3D%200%3B%0A%09%09%09%09if%20(upper%20%3D%3D%3D%20undefined)%20upper%20%3D%200%3B%0A%09%09%09%09this.m_lowerAngle%20%3D%20lower%3B%0A%09%09%09%09this.m_upperAngle%20%3D%20upper%3B%0A%09%09%09%7D%0A%0A%09%09%09IsMotorEnabled()%20%7B%0A%09%09%09%09this.m_bodyA.SetAwake(true)%3B%0A%09%09%09%09this.m_bodyB.SetAwake(true)%3B%0A%09%09%09%09return%20this.m_enableMotor%3B%0A%09%09%09%7D%0A%0A%09%09%09EnableMotor(flag)%20%7B%0A%09%09%09%09this.m_enableMotor%20%3D%20flag%3B%0A%09%09%09%7D%0A%0A%09%09%09SetMotorSpeed(speed)%20%7B%0A%09%09%09%09if%20(speed%20%3D%3D%3D%20undefined)%20speed%20%3D%200%3B%0A%09%09%09%09this.m_bodyA.SetAwake(true)%3B%0A%09%09%09%09this.m_bodyB.SetAwake(true)%3B%0A%09%09%09%09this.m_motorSpeed%20%3D%20speed%3B%0A%09%09%09%7D%0A%0A%09%09%09GetMotorSpeed()%20%7B%0A%09%09%09%09return%20this.m_motorSpeed%3B%0A%09%09%09%7D%0A%0A%09%09%09SetMaxMotorTorque(torque)%20%7B%0A%09%09%09%09if%20(torque%20%3D%3D%3D%20undefined)%20torque%20%3D%200%3B%0A%09%09%09%09this.m_maxMotorTorque%20%3D%20torque%3B%0A%09%09%09%7D%0A%0A%09%09%09GetMotorTorque()%20%7B%0A%09%09%09%09return%20this.m_maxMotorTorque%3B%0A%09%09%09%7D%0A%0A%09%09%09b2RevoluteJoint(def)%20%7B%0A%09%09%09%09this.__super.b2Joint.call(this%2C%20def)%3B%0A%09%09%09%09this.m_localAnchor1.SetV(def.localAnchorA)%3B%0A%09%09%09%09this.m_localAnchor2.SetV(def.localAnchorB)%3B%0A%09%09%09%09this.m_referenceAngle%20%3D%20def.referenceAngle%3B%0A%09%09%09%09this.m_impulse.SetZero()%3B%0A%09%09%09%09this.m_motorImpulse%20%3D%200.0%3B%0A%09%09%09%09this.m_lowerAngle%20%3D%20def.lowerAngle%3B%0A%09%09%09%09this.m_upperAngle%20%3D%20def.upperAngle%3B%0A%09%09%09%09this.m_maxMotorTorque%20%3D%20def.maxMotorTorque%3B%0A%09%09%09%09this.m_motorSpeed%20%3D%20def.motorSpeed%3B%0A%09%09%09%09this.m_enableLimit%20%3D%20def.enableLimit%3B%0A%09%09%09%09this.m_enableMotor%20%3D%20def.enableMotor%3B%0A%09%09%09%09this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%09%09%09%7D%0A%0A%09%09%09InitVelocityConstraints(step)%20%7B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09let%20tX%20%3D%200%3B%0A%09%09%09%09if%20(this.m_enableMotor%20%7C%7C%20this.m_enableLimit)%20%7B%20%7D%0A%09%09%09%09tMat%20%3D%20bA.m_xf.R%3B%0A%09%09%09%09let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%09%09%09%09r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%09%09%09%09r1X%20%3D%20tX%3B%0A%09%09%09%09tMat%20%3D%20bB.m_xf.R%3B%0A%09%09%09%09let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%09%09%09%09r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%09%09%09%09r2X%20%3D%20tX%3B%0A%09%09%09%09const%20m1%20%3D%20bA.m_invMass%3B%0A%09%09%09%09const%20m2%20%3D%20bB.m_invMass%3B%0A%09%09%09%09const%20i1%20%3D%20bA.m_invI%3B%0A%09%09%09%09const%20i2%20%3D%20bB.m_invI%3B%0A%09%09%09%09this.m_mass.col1.x%20%3D%20m1%20%2B%20m2%20%2B%20r1Y%20*%20r1Y%20*%20i1%20%2B%20r2Y%20*%20r2Y%20*%20i2%3B%0A%09%09%09%09this.m_mass.col2.x%20%3D%20(-r1Y%20*%20r1X%20*%20i1)%20-%20r2Y%20*%20r2X%20*%20i2%3B%0A%09%09%09%09this.m_mass.col3.x%20%3D%20(-r1Y%20*%20i1)%20-%20r2Y%20*%20i2%3B%0A%09%09%09%09this.m_mass.col1.y%20%3D%20this.m_mass.col2.x%3B%0A%09%09%09%09this.m_mass.col2.y%20%3D%20m1%20%2B%20m2%20%2B%20r1X%20*%20r1X%20*%20i1%20%2B%20r2X%20*%20r2X%20*%20i2%3B%0A%09%09%09%09this.m_mass.col3.y%20%3D%20r1X%20*%20i1%20%2B%20r2X%20*%20i2%3B%0A%09%09%09%09this.m_mass.col1.z%20%3D%20this.m_mass.col3.x%3B%0A%09%09%09%09this.m_mass.col2.z%20%3D%20this.m_mass.col3.y%3B%0A%09%09%09%09this.m_mass.col3.z%20%3D%20i1%20%2B%20i2%3B%0A%09%09%09%09this.m_motorMass%20%3D%201.0%20%2F%20(i1%20%2B%20i2)%3B%0A%09%09%09%09if%20(this.m_enableMotor%20%3D%3D%20false)%20%7B%0A%09%09%09%09%09this.m_motorImpulse%20%3D%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.m_enableLimit)%20%7B%0A%09%09%09%09%09const%20jointAngle%20%3D%20bB.m_sweep.a%20-%20bA.m_sweep.a%20-%20this.m_referenceAngle%3B%0A%09%09%09%09%09if%20(b2Math.Abs(this.m_upperAngle%20-%20this.m_lowerAngle)%20%3C%202.0%20*%20b2Settings.b2_angularSlop)%20%7B%0A%09%09%09%09%09%09this.m_limitState%20%3D%20b2Joint.e_equalLimits%3B%0A%09%09%09%09%09%7D%20else%20if%20(jointAngle%20%3C%3D%20this.m_lowerAngle)%20%7B%0A%09%09%09%09%09%09if%20(this.m_limitState%20!%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%09%09%09%09%09%09%09this.m_impulse.z%20%3D%200.0%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09this.m_limitState%20%3D%20b2Joint.e_atLowerLimit%3B%0A%09%09%09%09%09%7D%20else%20if%20(jointAngle%20%3E%3D%20this.m_upperAngle)%20%7B%0A%09%09%09%09%09%09if%20(this.m_limitState%20!%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%09%09%09%09%09%09%09this.m_impulse.z%20%3D%200.0%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09this.m_limitState%20%3D%20b2Joint.e_atUpperLimit%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%09%09%09%09%09%09this.m_impulse.z%20%3D%200.0%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_limitState%20%3D%20b2Joint.e_inactiveLimit%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(step.warmStarting)%20%7B%0A%09%09%09%09%09this.m_impulse.x%20*%3D%20step.dtRatio%3B%0A%09%09%09%09%09this.m_impulse.y%20*%3D%20step.dtRatio%3B%0A%09%09%09%09%09this.m_motorImpulse%20*%3D%20step.dtRatio%3B%0A%09%09%09%09%09const%20PX%20%3D%20this.m_impulse.x%3B%0A%09%09%09%09%09const%20PY%20%3D%20this.m_impulse.y%3B%0A%09%09%09%09%09bA.m_linearVelocity.x%20-%3D%20m1%20*%20PX%3B%0A%09%09%09%09%09bA.m_linearVelocity.y%20-%3D%20m1%20*%20PY%3B%0A%09%09%09%09%09bA.m_angularVelocity%20-%3D%20i1%20*%20((r1X%20*%20PY%20-%20r1Y%20*%20PX)%20%2B%20this.m_motorImpulse%20%2B%20this.m_impulse.z)%3B%0A%09%09%09%09%09bB.m_linearVelocity.x%20%2B%3D%20m2%20*%20PX%3B%0A%09%09%09%09%09bB.m_linearVelocity.y%20%2B%3D%20m2%20*%20PY%3B%0A%09%09%09%09%09bB.m_angularVelocity%20%2B%3D%20i2%20*%20((r2X%20*%20PY%20-%20r2Y%20*%20PX)%20%2B%20this.m_motorImpulse%20%2B%20this.m_impulse.z)%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_impulse.SetZero()%3B%0A%09%09%09%09%09this.m_motorImpulse%20%3D%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09SolveVelocityConstraints(step)%20%7B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09let%20tX%20%3D%200%3B%0A%09%09%09%09let%20newImpulse%20%3D%200%3B%0A%09%09%09%09let%20r1X%20%3D%200%3B%0A%09%09%09%09let%20r1Y%20%3D%200%3B%0A%09%09%09%09let%20r2X%20%3D%200%3B%0A%09%09%09%09let%20r2Y%20%3D%200%3B%0A%09%09%09%09const%20v1%20%3D%20bA.m_linearVelocity%3B%0A%09%09%09%09let%20w1%20%3D%20bA.m_angularVelocity%3B%0A%09%09%09%09const%20v2%20%3D%20bB.m_linearVelocity%3B%0A%09%09%09%09let%20w2%20%3D%20bB.m_angularVelocity%3B%0A%09%09%09%09const%20m1%20%3D%20bA.m_invMass%3B%0A%09%09%09%09const%20m2%20%3D%20bB.m_invMass%3B%0A%09%09%09%09const%20i1%20%3D%20bA.m_invI%3B%0A%09%09%09%09const%20i2%20%3D%20bB.m_invI%3B%0A%09%09%09%09if%20(this.m_enableMotor%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_equalLimits)%20%7B%0A%09%09%09%09%09const%20Cdot%20%3D%20w2%20-%20w1%20-%20this.m_motorSpeed%3B%0A%09%09%09%09%09let%20impulse%20%3D%20this.m_motorMass%20*%20((-Cdot))%3B%0A%09%09%09%09%09const%20oldImpulse%20%3D%20this.m_motorImpulse%3B%0A%09%09%09%09%09const%20maxImpulse%20%3D%20step.dt%20*%20this.m_maxMotorTorque%3B%0A%09%09%09%09%09this.m_motorImpulse%20%3D%20b2Math.Clamp(this.m_motorImpulse%20%2B%20impulse%2C%20(-maxImpulse)%2C%20maxImpulse)%3B%0A%09%09%09%09%09impulse%20%3D%20this.m_motorImpulse%20-%20oldImpulse%3B%0A%09%09%09%09%09w1%20-%3D%20i1%20*%20impulse%3B%0A%09%09%09%09%09w2%20%2B%3D%20i2%20*%20impulse%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(this.m_enableLimit%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_inactiveLimit)%20%7B%0A%09%09%09%09%09tMat%20%3D%20bA.m_xf.R%3B%0A%09%09%09%09%09r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%09%09%09%09%09r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%09%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%09%09%09%09%09r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%09%09%09%09%09r1X%20%3D%20tX%3B%0A%09%09%09%09%09tMat%20%3D%20bB.m_xf.R%3B%0A%09%09%09%09%09r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%09%09%09%09%09r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%09%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%09%09%09%09%09r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%09%09%09%09%09r2X%20%3D%20tX%3B%0A%09%09%09%09%09const%20Cdot1X%20%3D%20v2.x%20%2B%20((-w2%20*%20r2Y))%20-%20v1.x%20-%20((-w1%20*%20r1Y))%3B%0A%09%09%09%09%09const%20Cdot1Y%20%3D%20v2.y%20%2B%20(w2%20*%20r2X)%20-%20v1.y%20-%20(w1%20*%20r1X)%3B%0A%09%09%09%09%09const%20Cdot2%20%3D%20w2%20-%20w1%3B%0A%09%09%09%09%09this.m_mass.Solve33(this.impulse3%2C%20(-Cdot1X)%2C%20(-Cdot1Y)%2C%20(-Cdot2))%3B%0A%09%09%09%09%09if%20(this.m_limitState%20%3D%3D%20b2Joint.e_equalLimits)%20%7B%0A%09%09%09%09%09%09this.m_impulse.Add(this.impulse3)%3B%0A%09%09%09%09%09%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%09%09%09%09%09%09newImpulse%20%3D%20this.m_impulse.z%20%2B%20this.impulse3.z%3B%0A%09%09%09%09%09%09if%20(newImpulse%20%3C%200.0)%20%7B%0A%09%09%09%09%09%09%09this.m_mass.Solve22(this.reduced%2C%20(-Cdot1X)%2C%20(-Cdot1Y))%3B%0A%09%09%09%09%09%09%09this.impulse3.x%20%3D%20this.reduced.x%3B%0A%09%09%09%09%09%09%09this.impulse3.y%20%3D%20this.reduced.y%3B%0A%09%09%09%09%09%09%09this.impulse3.z%20%3D%20(-this.m_impulse.z)%3B%0A%09%09%09%09%09%09%09this.m_impulse.x%20%2B%3D%20this.reduced.x%3B%0A%09%09%09%09%09%09%09this.m_impulse.y%20%2B%3D%20this.reduced.y%3B%0A%09%09%09%09%09%09%09this.m_impulse.z%20%3D%200.0%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%09%09%09%09%09%09newImpulse%20%3D%20this.m_impulse.z%20%2B%20this.impulse3.z%3B%0A%09%09%09%09%09%09if%20(newImpulse%20%3E%200.0)%20%7B%0A%09%09%09%09%09%09%09this.m_mass.Solve22(this.reduced%2C%20(-Cdot1X)%2C%20(-Cdot1Y))%3B%0A%09%09%09%09%09%09%09this.impulse3.x%20%3D%20this.reduced.x%3B%0A%09%09%09%09%09%09%09this.impulse3.y%20%3D%20this.reduced.y%3B%0A%09%09%09%09%09%09%09this.impulse3.z%20%3D%20(-this.m_impulse.z)%3B%0A%09%09%09%09%09%09%09this.m_impulse.x%20%2B%3D%20this.reduced.x%3B%0A%09%09%09%09%09%09%09this.m_impulse.y%20%2B%3D%20this.reduced.y%3B%0A%09%09%09%09%09%09%09this.m_impulse.z%20%3D%200.0%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%09v1.x%20-%3D%20m1%20*%20this.impulse3.x%3B%0A%09%09%09%09%09v1.y%20-%3D%20m1%20*%20this.impulse3.y%3B%0A%09%09%09%09%09w1%20-%3D%20i1%20*%20(r1X%20*%20this.impulse3.y%20-%20r1Y%20*%20this.impulse3.x%20%2B%20this.impulse3.z)%3B%0A%09%09%09%09%09v2.x%20%2B%3D%20m2%20*%20this.impulse3.x%3B%0A%09%09%09%09%09v2.y%20%2B%3D%20m2%20*%20this.impulse3.y%3B%0A%09%09%09%09%09w2%20%2B%3D%20i2%20*%20(r2X%20*%20this.impulse3.y%20-%20r2Y%20*%20this.impulse3.x%20%2B%20this.impulse3.z)%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09tMat%20%3D%20bA.m_xf.R%3B%0A%09%09%09%09%09r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%09%09%09%09%09r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%09%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%09%09%09%09%09r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%09%09%09%09%09r1X%20%3D%20tX%3B%0A%09%09%09%09%09tMat%20%3D%20bB.m_xf.R%3B%0A%09%09%09%09%09r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%09%09%09%09%09r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%09%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%09%09%09%09%09r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%09%09%09%09%09r2X%20%3D%20tX%3B%0A%09%09%09%09%09const%20CdotX%20%3D%20v2.x%20%2B%20((-w2%20*%20r2Y))%20-%20v1.x%20-%20((-w1%20*%20r1Y))%3B%0A%09%09%09%09%09const%20CdotY%20%3D%20v2.y%20%2B%20(w2%20*%20r2X)%20-%20v1.y%20-%20(w1%20*%20r1X)%3B%0A%09%09%09%09%09this.m_mass.Solve22(this.impulse2%2C%20(-CdotX)%2C%20(-CdotY))%3B%0A%09%09%09%09%09this.m_impulse.x%20%2B%3D%20this.impulse2.x%3B%0A%09%09%09%09%09this.m_impulse.y%20%2B%3D%20this.impulse2.y%3B%0A%09%09%09%09%09v1.x%20-%3D%20m1%20*%20this.impulse2.x%3B%0A%09%09%09%09%09v1.y%20-%3D%20m1%20*%20this.impulse2.y%3B%0A%09%09%09%09%09w1%20-%3D%20i1%20*%20(r1X%20*%20this.impulse2.y%20-%20r1Y%20*%20this.impulse2.x)%3B%0A%09%09%09%09%09v2.x%20%2B%3D%20m2%20*%20this.impulse2.x%3B%0A%09%09%09%09%09v2.y%20%2B%3D%20m2%20*%20this.impulse2.y%3B%0A%09%09%09%09%09w2%20%2B%3D%20i2%20*%20(r2X%20*%20this.impulse2.y%20-%20r2Y%20*%20this.impulse2.x)%3B%0A%09%09%09%09%7D%0A%09%09%09%09bA.m_linearVelocity.SetV(v1)%3B%0A%09%09%09%09bA.m_angularVelocity%20%3D%20w1%3B%0A%09%09%09%09bB.m_linearVelocity.SetV(v2)%3B%0A%09%09%09%09bB.m_angularVelocity%20%3D%20w2%3B%0A%09%09%09%7D%0A%0A%09%09%09SolvePositionConstraints(baumgarte)%20%7B%0A%09%09%09%09if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%09%09%09%09const%20oldLimitImpulse%20%3D%200%3B%0A%09%09%09%09let%20C%20%3D%200%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09let%20angularError%20%3D%200.0%3B%0A%09%09%09%09let%20positionError%20%3D%200.0%3B%0A%09%09%09%09let%20tX%20%3D%200%3B%0A%09%09%09%09let%20impulseX%20%3D%200%3B%0A%09%09%09%09let%20impulseY%20%3D%200%3B%0A%09%09%09%09if%20(this.m_enableLimit%20%26%26%20this.m_limitState%20!%3D%20b2Joint.e_inactiveLimit)%20%7B%0A%09%09%09%09%09const%20angle%20%3D%20bB.m_sweep.a%20-%20bA.m_sweep.a%20-%20this.m_referenceAngle%3B%0A%09%09%09%09%09let%20limitImpulse%20%3D%200.0%3B%0A%09%09%09%09%09if%20(this.m_limitState%20%3D%3D%20b2Joint.e_equalLimits)%20%7B%0A%09%09%09%09%09%09C%20%3D%20b2Math.Clamp(angle%20-%20this.m_lowerAngle%2C%20(-b2Settings.b2_maxAngularCorrection)%2C%20b2Settings.b2_maxAngularCorrection)%3B%0A%09%09%09%09%09%09limitImpulse%20%3D%20(-this.m_motorMass%20*%20C)%3B%0A%09%09%09%09%09%09angularError%20%3D%20b2Math.Abs(C)%3B%0A%09%09%09%09%09%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atLowerLimit)%20%7B%0A%09%09%09%09%09%09C%20%3D%20angle%20-%20this.m_lowerAngle%3B%0A%09%09%09%09%09%09angularError%20%3D%20(-C)%3B%0A%09%09%09%09%09%09C%20%3D%20b2Math.Clamp(C%20%2B%20b2Settings.b2_angularSlop%2C%20(-b2Settings.b2_maxAngularCorrection)%2C%200.0)%3B%0A%09%09%09%09%09%09limitImpulse%20%3D%20(-this.m_motorMass%20*%20C)%3B%0A%09%09%09%09%09%7D%20else%20if%20(this.m_limitState%20%3D%3D%20b2Joint.e_atUpperLimit)%20%7B%0A%09%09%09%09%09%09C%20%3D%20angle%20-%20this.m_upperAngle%3B%0A%09%09%09%09%09%09angularError%20%3D%20C%3B%0A%09%09%09%09%09%09C%20%3D%20b2Math.Clamp(C%20-%20b2Settings.b2_angularSlop%2C%200.0%2C%20b2Settings.b2_maxAngularCorrection)%3B%0A%09%09%09%09%09%09limitImpulse%20%3D%20(-this.m_motorMass%20*%20C)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09bA.m_sweep.a%20-%3D%20bA.m_invI%20*%20limitImpulse%3B%0A%09%09%09%09%09bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20limitImpulse%3B%0A%09%09%09%09%09bA.SynchronizeTransform()%3B%0A%09%09%09%09%09bB.SynchronizeTransform()%3B%0A%09%09%09%09%7D%20%7B%0A%09%09%09%09%09tMat%20%3D%20bA.m_xf.R%3B%0A%09%09%09%09%09let%20r1X%20%3D%20this.m_localAnchor1.x%20-%20bA.m_sweep.localCenter.x%3B%0A%09%09%09%09%09let%20r1Y%20%3D%20this.m_localAnchor1.y%20-%20bA.m_sweep.localCenter.y%3B%0A%09%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r1X%20%2B%20tMat.col2.x%20*%20r1Y)%3B%0A%09%09%09%09%09r1Y%20%3D%20(tMat.col1.y%20*%20r1X%20%2B%20tMat.col2.y%20*%20r1Y)%3B%0A%09%09%09%09%09r1X%20%3D%20tX%3B%0A%09%09%09%09%09tMat%20%3D%20bB.m_xf.R%3B%0A%09%09%09%09%09let%20r2X%20%3D%20this.m_localAnchor2.x%20-%20bB.m_sweep.localCenter.x%3B%0A%09%09%09%09%09let%20r2Y%20%3D%20this.m_localAnchor2.y%20-%20bB.m_sweep.localCenter.y%3B%0A%09%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20r2X%20%2B%20tMat.col2.x%20*%20r2Y)%3B%0A%09%09%09%09%09r2Y%20%3D%20(tMat.col1.y%20*%20r2X%20%2B%20tMat.col2.y%20*%20r2Y)%3B%0A%09%09%09%09%09r2X%20%3D%20tX%3B%0A%09%09%09%09%09let%20CX%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%09%09%09%09%09let%20CY%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%09%09%09%09%09const%20CLengthSquared%20%3D%20CX%20*%20CX%20%2B%20CY%20*%20CY%3B%0A%09%09%09%09%09const%20CLength%20%3D%20Math.sqrt(CLengthSquared)%3B%0A%09%09%09%09%09positionError%20%3D%20CLength%3B%0A%09%09%09%09%09const%20invMass1%20%3D%20bA.m_invMass%3B%0A%09%09%09%09%09const%20invMass2%20%3D%20bB.m_invMass%3B%0A%09%09%09%09%09const%20invI1%20%3D%20bA.m_invI%3B%0A%09%09%09%09%09const%20invI2%20%3D%20bB.m_invI%3B%0A%09%09%09%09%09const%20k_allowedStretch%20%3D%2010.0%20*%20b2Settings.b2_linearSlop%3B%0A%09%09%09%09%09if%20(CLengthSquared%20%3E%20k_allowedStretch%20*%20k_allowedStretch)%20%7B%0A%09%09%09%09%09%09const%20uX%20%3D%20CX%20%2F%20CLength%3B%0A%09%09%09%09%09%09const%20uY%20%3D%20CY%20%2F%20CLength%3B%0A%09%09%09%09%09%09const%20k%20%3D%20invMass1%20%2B%20invMass2%3B%0A%09%09%09%09%09%09const%20m%20%3D%201.0%20%2F%20k%3B%0A%09%09%09%09%09%09impulseX%20%3D%20m%20*%20((-CX))%3B%0A%09%09%09%09%09%09impulseY%20%3D%20m%20*%20((-CY))%3B%0A%09%09%09%09%09%09const%20k_beta%20%3D%200.5%3B%0A%09%09%09%09%09%09bA.m_sweep.c.x%20-%3D%20k_beta%20*%20invMass1%20*%20impulseX%3B%0A%09%09%09%09%09%09bA.m_sweep.c.y%20-%3D%20k_beta%20*%20invMass1%20*%20impulseY%3B%0A%09%09%09%09%09%09bB.m_sweep.c.x%20%2B%3D%20k_beta%20*%20invMass2%20*%20impulseX%3B%0A%09%09%09%09%09%09bB.m_sweep.c.y%20%2B%3D%20k_beta%20*%20invMass2%20*%20impulseY%3B%0A%09%09%09%09%09%09CX%20%3D%20bB.m_sweep.c.x%20%2B%20r2X%20-%20bA.m_sweep.c.x%20-%20r1X%3B%0A%09%09%09%09%09%09CY%20%3D%20bB.m_sweep.c.y%20%2B%20r2Y%20-%20bA.m_sweep.c.y%20-%20r1Y%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09this.K1.col1.x%20%3D%20invMass1%20%2B%20invMass2%3B%0A%09%09%09%09%09this.K1.col2.x%20%3D%200.0%3B%0A%09%09%09%09%09this.K1.col1.y%20%3D%200.0%3B%0A%09%09%09%09%09this.K1.col2.y%20%3D%20invMass1%20%2B%20invMass2%3B%0A%09%09%09%09%09this.K2.col1.x%20%3D%20invI1%20*%20r1Y%20*%20r1Y%3B%0A%09%09%09%09%09this.K2.col2.x%20%3D%20(-invI1%20*%20r1X%20*%20r1Y)%3B%0A%09%09%09%09%09this.K2.col1.y%20%3D%20(-invI1%20*%20r1X%20*%20r1Y)%3B%0A%09%09%09%09%09this.K2.col2.y%20%3D%20invI1%20*%20r1X%20*%20r1X%3B%0A%09%09%09%09%09this.K3.col1.x%20%3D%20invI2%20*%20r2Y%20*%20r2Y%3B%0A%09%09%09%09%09this.K3.col2.x%20%3D%20(-invI2%20*%20r2X%20*%20r2Y)%3B%0A%09%09%09%09%09this.K3.col1.y%20%3D%20(-invI2%20*%20r2X%20*%20r2Y)%3B%0A%09%09%09%09%09this.K3.col2.y%20%3D%20invI2%20*%20r2X%20*%20r2X%3B%0A%09%09%09%09%09this.K.SetM(this.K1)%3B%0A%09%09%09%09%09this.K.AddM(this.K2)%3B%0A%09%09%09%09%09this.K.AddM(this.K3)%3B%0A%09%09%09%09%09this.K.Solve(b2RevoluteJoint.tImpulse%2C%20(-CX)%2C%20(-CY))%3B%0A%09%09%09%09%09impulseX%20%3D%20b2RevoluteJoint.tImpulse.x%3B%0A%09%09%09%09%09impulseY%20%3D%20b2RevoluteJoint.tImpulse.y%3B%0A%09%09%09%09%09bA.m_sweep.c.x%20-%3D%20bA.m_invMass%20*%20impulseX%3B%0A%09%09%09%09%09bA.m_sweep.c.y%20-%3D%20bA.m_invMass%20*%20impulseY%3B%0A%09%09%09%09%09bA.m_sweep.a%20-%3D%20bA.m_invI%20*%20(r1X%20*%20impulseY%20-%20r1Y%20*%20impulseX)%3B%0A%09%09%09%09%09bB.m_sweep.c.x%20%2B%3D%20bB.m_invMass%20*%20impulseX%3B%0A%09%09%09%09%09bB.m_sweep.c.y%20%2B%3D%20bB.m_invMass%20*%20impulseY%3B%0A%09%09%09%09%09bB.m_sweep.a%20%2B%3D%20bB.m_invI%20*%20(r2X%20*%20impulseY%20-%20r2Y%20*%20impulseX)%3B%0A%09%09%09%09%09bA.SynchronizeTransform()%3B%0A%09%09%09%09%09bB.SynchronizeTransform()%3B%0A%09%09%09%09%7D%0A%09%09%09%09return%20positionError%20%3C%3D%20b2Settings.b2_linearSlop%20%26%26%20angularError%20%3C%3D%20b2Settings.b2_angularSlop%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Joints.b2RevoluteJoint%20%3D%20b2RevoluteJoint%3B%0A%0A%09%09class%20b2RevoluteJointDef%20extends%20b2JointDef%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2RevoluteJointDef.b2RevoluteJointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2RevoluteJointDef)%20this.b2RevoluteJointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2RevoluteJointDef()%20%7B%0A%09%09%09%09Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09b2RevoluteJointDef()%20%7B%0A%09%09%09%09this.__super.b2JointDef.call(this)%3B%0A%09%09%09%09this.type%20%3D%20b2Joint.e_revoluteJoint%3B%0A%09%09%09%09this.localAnchorA.Set(0.0%2C%200.0)%3B%0A%09%09%09%09this.localAnchorB.Set(0.0%2C%200.0)%3B%0A%09%09%09%09this.referenceAngle%20%3D%200.0%3B%0A%09%09%09%09this.lowerAngle%20%3D%200.0%3B%0A%09%09%09%09this.upperAngle%20%3D%200.0%3B%0A%09%09%09%09this.maxMotorTorque%20%3D%200.0%3B%0A%09%09%09%09this.motorSpeed%20%3D%200.0%3B%0A%09%09%09%09this.enableLimit%20%3D%20false%3B%0A%09%09%09%09this.enableMotor%20%3D%20false%3B%0A%09%09%09%7D%0A%0A%09%09%09Initialize(bA%2C%20bB%2C%20anchor)%20%7B%0A%09%09%09%09this.bodyA%20%3D%20bA%3B%0A%09%09%09%09this.bodyB%20%3D%20bB%3B%0A%09%09%09%09this.localAnchorA%20%3D%20this.bodyA.GetLocalPoint(anchor)%3B%0A%09%09%09%09this.localAnchorB%20%3D%20this.bodyB.GetLocalPoint(anchor)%3B%0A%09%09%09%09this.referenceAngle%20%3D%20this.bodyB.GetAngle()%20-%20this.bodyA.GetAngle()%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Joints.b2RevoluteJointDef%20%3D%20b2RevoluteJointDef%3B%0A%0A%09%09class%20b2WeldJoint%20extends%20b2Joint%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2WeldJoint.b2WeldJoint.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2WeldJoint)%20this.b2WeldJoint.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2WeldJoint()%20%7B%0A%09%09%09%09Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.m_localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.m_impulse%20%3D%20new%20b2Vec3()%3B%0A%09%09%09%09this.m_mass%20%3D%20new%20b2Mat33()%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAnchorA()%20%7B%0A%09%09%09%09return%20this.m_bodyA.GetWorldPoint(this.m_localAnchorA)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetAnchorB()%20%7B%0A%09%09%09%09return%20this.m_bodyB.GetWorldPoint(this.m_localAnchorB)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetReactionForce(inv_dt)%20%7B%0A%09%09%09%09if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%09%09%09%09return%20new%20b2Vec2(inv_dt%20*%20this.m_impulse.x%2C%20inv_dt%20*%20this.m_impulse.y)%3B%0A%09%09%09%7D%0A%0A%09%09%09GetReactionTorque(inv_dt)%20%7B%0A%09%09%09%09if%20(inv_dt%20%3D%3D%3D%20undefined)%20inv_dt%20%3D%200%3B%0A%09%09%09%09return%20inv_dt%20*%20this.m_impulse.z%3B%0A%09%09%09%7D%0A%0A%09%09%09b2WeldJoint(def)%20%7B%0A%09%09%09%09this.__super.b2Joint.call(this%2C%20def)%3B%0A%09%09%09%09this.m_localAnchorA.SetV(def.localAnchorA)%3B%0A%09%09%09%09this.m_localAnchorB.SetV(def.localAnchorB)%3B%0A%09%09%09%09this.m_referenceAngle%20%3D%20def.referenceAngle%3B%0A%09%09%09%09this.m_impulse.SetZero()%3B%0A%09%09%09%09this.m_mass%20%3D%20new%20b2Mat33()%3B%0A%09%09%09%7D%0A%0A%09%09%09InitVelocityConstraints(step)%20%7B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09let%20tX%20%3D%200%3B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09tMat%20%3D%20bA.m_xf.R%3B%0A%09%09%09%09let%20rAX%20%3D%20this.m_localAnchorA.x%20-%20bA.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20rAY%20%3D%20this.m_localAnchorA.y%20-%20bA.m_sweep.localCenter.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20rAX%20%2B%20tMat.col2.x%20*%20rAY)%3B%0A%09%09%09%09rAY%20%3D%20(tMat.col1.y%20*%20rAX%20%2B%20tMat.col2.y%20*%20rAY)%3B%0A%09%09%09%09rAX%20%3D%20tX%3B%0A%09%09%09%09tMat%20%3D%20bB.m_xf.R%3B%0A%09%09%09%09let%20rBX%20%3D%20this.m_localAnchorB.x%20-%20bB.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20rBY%20%3D%20this.m_localAnchorB.y%20-%20bB.m_sweep.localCenter.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20rBX%20%2B%20tMat.col2.x%20*%20rBY)%3B%0A%09%09%09%09rBY%20%3D%20(tMat.col1.y%20*%20rBX%20%2B%20tMat.col2.y%20*%20rBY)%3B%0A%09%09%09%09rBX%20%3D%20tX%3B%0A%09%09%09%09const%20mA%20%3D%20bA.m_invMass%3B%0A%09%09%09%09const%20mB%20%3D%20bB.m_invMass%3B%0A%09%09%09%09const%20iA%20%3D%20bA.m_invI%3B%0A%09%09%09%09const%20iB%20%3D%20bB.m_invI%3B%0A%09%09%09%09this.m_mass.col1.x%20%3D%20mA%20%2B%20mB%20%2B%20rAY%20*%20rAY%20*%20iA%20%2B%20rBY%20*%20rBY%20*%20iB%3B%0A%09%09%09%09this.m_mass.col2.x%20%3D%20(-rAY%20*%20rAX%20*%20iA)%20-%20rBY%20*%20rBX%20*%20iB%3B%0A%09%09%09%09this.m_mass.col3.x%20%3D%20(-rAY%20*%20iA)%20-%20rBY%20*%20iB%3B%0A%09%09%09%09this.m_mass.col1.y%20%3D%20this.m_mass.col2.x%3B%0A%09%09%09%09this.m_mass.col2.y%20%3D%20mA%20%2B%20mB%20%2B%20rAX%20*%20rAX%20*%20iA%20%2B%20rBX%20*%20rBX%20*%20iB%3B%0A%09%09%09%09this.m_mass.col3.y%20%3D%20rAX%20*%20iA%20%2B%20rBX%20*%20iB%3B%0A%09%09%09%09this.m_mass.col1.z%20%3D%20this.m_mass.col3.x%3B%0A%09%09%09%09this.m_mass.col2.z%20%3D%20this.m_mass.col3.y%3B%0A%09%09%09%09this.m_mass.col3.z%20%3D%20iA%20%2B%20iB%3B%0A%09%09%09%09if%20(step.warmStarting)%20%7B%0A%09%09%09%09%09this.m_impulse.x%20*%3D%20step.dtRatio%3B%0A%09%09%09%09%09this.m_impulse.y%20*%3D%20step.dtRatio%3B%0A%09%09%09%09%09this.m_impulse.z%20*%3D%20step.dtRatio%3B%0A%09%09%09%09%09bA.m_linearVelocity.x%20-%3D%20mA%20*%20this.m_impulse.x%3B%0A%09%09%09%09%09bA.m_linearVelocity.y%20-%3D%20mA%20*%20this.m_impulse.y%3B%0A%09%09%09%09%09bA.m_angularVelocity%20-%3D%20iA%20*%20(rAX%20*%20this.m_impulse.y%20-%20rAY%20*%20this.m_impulse.x%20%2B%20this.m_impulse.z)%3B%0A%09%09%09%09%09bB.m_linearVelocity.x%20%2B%3D%20mB%20*%20this.m_impulse.x%3B%0A%09%09%09%09%09bB.m_linearVelocity.y%20%2B%3D%20mB%20*%20this.m_impulse.y%3B%0A%09%09%09%09%09bB.m_angularVelocity%20%2B%3D%20iB%20*%20(rBX%20*%20this.m_impulse.y%20-%20rBY%20*%20this.m_impulse.x%20%2B%20this.m_impulse.z)%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09this.m_impulse.SetZero()%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%0A%09%09%09SolveVelocityConstraints(step)%20%7B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09let%20tX%20%3D%200%3B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09const%20vA%20%3D%20bA.m_linearVelocity%3B%0A%09%09%09%09let%20wA%20%3D%20bA.m_angularVelocity%3B%0A%09%09%09%09const%20vB%20%3D%20bB.m_linearVelocity%3B%0A%09%09%09%09let%20wB%20%3D%20bB.m_angularVelocity%3B%0A%09%09%09%09const%20mA%20%3D%20bA.m_invMass%3B%0A%09%09%09%09const%20mB%20%3D%20bB.m_invMass%3B%0A%09%09%09%09const%20iA%20%3D%20bA.m_invI%3B%0A%09%09%09%09const%20iB%20%3D%20bB.m_invI%3B%0A%09%09%09%09tMat%20%3D%20bA.m_xf.R%3B%0A%09%09%09%09let%20rAX%20%3D%20this.m_localAnchorA.x%20-%20bA.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20rAY%20%3D%20this.m_localAnchorA.y%20-%20bA.m_sweep.localCenter.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20rAX%20%2B%20tMat.col2.x%20*%20rAY)%3B%0A%09%09%09%09rAY%20%3D%20(tMat.col1.y%20*%20rAX%20%2B%20tMat.col2.y%20*%20rAY)%3B%0A%09%09%09%09rAX%20%3D%20tX%3B%0A%09%09%09%09tMat%20%3D%20bB.m_xf.R%3B%0A%09%09%09%09let%20rBX%20%3D%20this.m_localAnchorB.x%20-%20bB.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20rBY%20%3D%20this.m_localAnchorB.y%20-%20bB.m_sweep.localCenter.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20rBX%20%2B%20tMat.col2.x%20*%20rBY)%3B%0A%09%09%09%09rBY%20%3D%20(tMat.col1.y%20*%20rBX%20%2B%20tMat.col2.y%20*%20rBY)%3B%0A%09%09%09%09rBX%20%3D%20tX%3B%0A%09%09%09%09const%20Cdot1X%20%3D%20vB.x%20-%20wB%20*%20rBY%20-%20vA.x%20%2B%20wA%20*%20rAY%3B%0A%09%09%09%09const%20Cdot1Y%20%3D%20vB.y%20%2B%20wB%20*%20rBX%20-%20vA.y%20-%20wA%20*%20rAX%3B%0A%09%09%09%09const%20Cdot2%20%3D%20wB%20-%20wA%3B%0A%09%09%09%09const%20impulse%20%3D%20new%20b2Vec3()%3B%0A%09%09%09%09this.m_mass.Solve33(impulse%2C%20(-Cdot1X)%2C%20(-Cdot1Y)%2C%20(-Cdot2))%3B%0A%09%09%09%09this.m_impulse.Add(impulse)%3B%0A%09%09%09%09vA.x%20-%3D%20mA%20*%20impulse.x%3B%0A%09%09%09%09vA.y%20-%3D%20mA%20*%20impulse.y%3B%0A%09%09%09%09wA%20-%3D%20iA%20*%20(rAX%20*%20impulse.y%20-%20rAY%20*%20impulse.x%20%2B%20impulse.z)%3B%0A%09%09%09%09vB.x%20%2B%3D%20mB%20*%20impulse.x%3B%0A%09%09%09%09vB.y%20%2B%3D%20mB%20*%20impulse.y%3B%0A%09%09%09%09wB%20%2B%3D%20iB%20*%20(rBX%20*%20impulse.y%20-%20rBY%20*%20impulse.x%20%2B%20impulse.z)%3B%0A%09%09%09%09bA.m_angularVelocity%20%3D%20wA%3B%0A%09%09%09%09bB.m_angularVelocity%20%3D%20wB%3B%0A%09%09%09%7D%0A%0A%09%09%09SolvePositionConstraints(baumgarte)%20%7B%0A%09%09%09%09if%20(baumgarte%20%3D%3D%3D%20undefined)%20baumgarte%20%3D%200%3B%0A%09%09%09%09let%20tMat%3B%0A%09%09%09%09let%20tX%20%3D%200%3B%0A%09%09%09%09const%20bA%20%3D%20this.m_bodyA%3B%0A%09%09%09%09const%20bB%20%3D%20this.m_bodyB%3B%0A%09%09%09%09tMat%20%3D%20bA.m_xf.R%3B%0A%09%09%09%09let%20rAX%20%3D%20this.m_localAnchorA.x%20-%20bA.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20rAY%20%3D%20this.m_localAnchorA.y%20-%20bA.m_sweep.localCenter.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20rAX%20%2B%20tMat.col2.x%20*%20rAY)%3B%0A%09%09%09%09rAY%20%3D%20(tMat.col1.y%20*%20rAX%20%2B%20tMat.col2.y%20*%20rAY)%3B%0A%09%09%09%09rAX%20%3D%20tX%3B%0A%09%09%09%09tMat%20%3D%20bB.m_xf.R%3B%0A%09%09%09%09let%20rBX%20%3D%20this.m_localAnchorB.x%20-%20bB.m_sweep.localCenter.x%3B%0A%09%09%09%09let%20rBY%20%3D%20this.m_localAnchorB.y%20-%20bB.m_sweep.localCenter.y%3B%0A%09%09%09%09tX%20%3D%20(tMat.col1.x%20*%20rBX%20%2B%20tMat.col2.x%20*%20rBY)%3B%0A%09%09%09%09rBY%20%3D%20(tMat.col1.y%20*%20rBX%20%2B%20tMat.col2.y%20*%20rBY)%3B%0A%09%09%09%09rBX%20%3D%20tX%3B%0A%09%09%09%09const%20mA%20%3D%20bA.m_invMass%3B%0A%09%09%09%09const%20mB%20%3D%20bB.m_invMass%3B%0A%09%09%09%09let%20iA%20%3D%20bA.m_invI%3B%0A%09%09%09%09let%20iB%20%3D%20bB.m_invI%3B%0A%09%09%09%09const%20C1X%20%3D%20bB.m_sweep.c.x%20%2B%20rBX%20-%20bA.m_sweep.c.x%20-%20rAX%3B%0A%09%09%09%09const%20C1Y%20%3D%20bB.m_sweep.c.y%20%2B%20rBY%20-%20bA.m_sweep.c.y%20-%20rAY%3B%0A%09%09%09%09const%20C2%20%3D%20bB.m_sweep.a%20-%20bA.m_sweep.a%20-%20this.m_referenceAngle%3B%0A%09%09%09%09const%20k_allowedStretch%20%3D%2010.0%20*%20b2Settings.b2_linearSlop%3B%0A%09%09%09%09const%20positionError%20%3D%20Math.sqrt(C1X%20*%20C1X%20%2B%20C1Y%20*%20C1Y)%3B%0A%09%09%09%09const%20angularError%20%3D%20b2Math.Abs(C2)%3B%0A%09%09%09%09if%20(positionError%20%3E%20k_allowedStretch)%20%7B%0A%09%09%09%09%09iA%20*%3D%201.0%3B%0A%09%09%09%09%09iB%20*%3D%201.0%3B%0A%09%09%09%09%7D%0A%09%09%09%09this.m_mass.col1.x%20%3D%20mA%20%2B%20mB%20%2B%20rAY%20*%20rAY%20*%20iA%20%2B%20rBY%20*%20rBY%20*%20iB%3B%0A%09%09%09%09this.m_mass.col2.x%20%3D%20(-rAY%20*%20rAX%20*%20iA)%20-%20rBY%20*%20rBX%20*%20iB%3B%0A%09%09%09%09this.m_mass.col3.x%20%3D%20(-rAY%20*%20iA)%20-%20rBY%20*%20iB%3B%0A%09%09%09%09this.m_mass.col1.y%20%3D%20this.m_mass.col2.x%3B%0A%09%09%09%09this.m_mass.col2.y%20%3D%20mA%20%2B%20mB%20%2B%20rAX%20*%20rAX%20*%20iA%20%2B%20rBX%20*%20rBX%20*%20iB%3B%0A%09%09%09%09this.m_mass.col3.y%20%3D%20rAX%20*%20iA%20%2B%20rBX%20*%20iB%3B%0A%09%09%09%09this.m_mass.col1.z%20%3D%20this.m_mass.col3.x%3B%0A%09%09%09%09this.m_mass.col2.z%20%3D%20this.m_mass.col3.y%3B%0A%09%09%09%09this.m_mass.col3.z%20%3D%20iA%20%2B%20iB%3B%0A%09%09%09%09const%20impulse%20%3D%20new%20b2Vec3()%3B%0A%09%09%09%09this.m_mass.Solve33(impulse%2C%20(-C1X)%2C%20(-C1Y)%2C%20(-C2))%3B%0A%09%09%09%09bA.m_sweep.c.x%20-%3D%20mA%20*%20impulse.x%3B%0A%09%09%09%09bA.m_sweep.c.y%20-%3D%20mA%20*%20impulse.y%3B%0A%09%09%09%09bA.m_sweep.a%20-%3D%20iA%20*%20(rAX%20*%20impulse.y%20-%20rAY%20*%20impulse.x%20%2B%20impulse.z)%3B%0A%09%09%09%09bB.m_sweep.c.x%20%2B%3D%20mB%20*%20impulse.x%3B%0A%09%09%09%09bB.m_sweep.c.y%20%2B%3D%20mB%20*%20impulse.y%3B%0A%09%09%09%09bB.m_sweep.a%20%2B%3D%20iB%20*%20(rBX%20*%20impulse.y%20-%20rBY%20*%20impulse.x%20%2B%20impulse.z)%3B%0A%09%09%09%09bA.SynchronizeTransform()%3B%0A%09%09%09%09bB.SynchronizeTransform()%3B%0A%09%09%09%09return%20positionError%20%3C%3D%20b2Settings.b2_linearSlop%20%26%26%20angularError%20%3C%3D%20b2Settings.b2_angularSlop%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Joints.b2WeldJoint%20%3D%20b2WeldJoint%3B%0A%0A%09%09class%20b2WeldJointDef%20extends%20b2JointDef%20%7B%0A%09%09%09constructor()%20%7B%0A%09%09%09%09super(...arguments)%3B%0A%09%09%09%09b2WeldJointDef.b2WeldJointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%09if%20(this.constructor%20%3D%3D%3D%20b2WeldJointDef)%20this.b2WeldJointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%7D%0A%0A%09%09%09static%20b2WeldJointDef()%20%7B%0A%09%09%09%09Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this%2C%20arguments)%3B%0A%09%09%09%09this.localAnchorA%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09this.localAnchorB%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%7D%0A%0A%09%09%09b2WeldJointDef()%20%7B%0A%09%09%09%09this.__super.b2JointDef.call(this)%3B%0A%09%09%09%09this.type%20%3D%20b2Joint.e_weldJoint%3B%0A%09%09%09%09this.referenceAngle%20%3D%200.0%3B%0A%09%09%09%7D%0A%0A%09%09%09Initialize(bA%2C%20bB%2C%20anchor)%20%7B%0A%09%09%09%09this.bodyA%20%3D%20bA%3B%0A%09%09%09%09this.bodyB%20%3D%20bB%3B%0A%09%09%09%09this.localAnchorA.SetV(this.bodyA.GetLocalPoint(anchor))%3B%0A%09%09%09%09this.localAnchorB.SetV(this.bodyB.GetLocalPoint(anchor))%3B%0A%09%09%09%09this.referenceAngle%20%3D%20this.bodyB.GetAngle()%20-%20this.bodyA.GetAngle()%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09%09Box2D.Dynamics.Joints.b2WeldJointDef%20%3D%20b2WeldJointDef%3B%0A%09%7D))()%3B%20%2F%2F%20definitions%0A%09Box2D.postDefs%20%3D%20%5B%5D%3B%0A%09((()%20%3D%3E%20%7B%0A%09%09const%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%3B%0A%09%09const%20b2EdgeChainDef%20%3D%20Box2D.Collision.Shapes.b2EdgeChainDef%3B%0A%09%09const%20b2EdgeShape%20%3D%20Box2D.Collision.Shapes.b2EdgeShape%3B%0A%09%09const%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%3B%0A%09%09const%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%3B%0A%09%09const%20b2Shape%20%3D%20Box2D.Collision.Shapes.b2Shape%3B%0A%09%09const%20b2Color%20%3D%20Box2D.Common.b2Color%3B%0A%09%09const%20b2internal%20%3D%20Box2D.Common.b2internal%3B%0A%09%09const%20b2Settings%20%3D%20Box2D.Common.b2Settings%3B%0A%09%09const%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%3B%0A%09%09const%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%3B%0A%09%09const%20b2Math%20%3D%20Box2D.Common.Math.b2Math%3B%0A%09%09const%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%3B%0A%09%09const%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%3B%0A%09%09const%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%3B%0A%09%09const%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%3B%0A%09%09const%20b2AABB%20%3D%20Box2D.Collision.b2AABB%3B%0A%09%09const%20b2Bound%20%3D%20Box2D.Collision.b2Bound%3B%0A%09%09const%20b2BoundValues%20%3D%20Box2D.Collision.b2BoundValues%3B%0A%09%09const%20b2Collision%20%3D%20Box2D.Collision.b2Collision%3B%0A%09%09const%20b2ContactID%20%3D%20Box2D.Collision.b2ContactID%3B%0A%09%09const%20b2ContactPoint%20%3D%20Box2D.Collision.b2ContactPoint%3B%0A%09%09const%20b2Distance%20%3D%20Box2D.Collision.b2Distance%3B%0A%09%09const%20b2DistanceInput%20%3D%20Box2D.Collision.b2DistanceInput%3B%0A%09%09const%20b2DistanceOutput%20%3D%20Box2D.Collision.b2DistanceOutput%3B%0A%09%09const%20b2DistanceProxy%20%3D%20Box2D.Collision.b2DistanceProxy%3B%0A%09%09const%20b2DynamicTree%20%3D%20Box2D.Collision.b2DynamicTree%3B%0A%09%09const%20b2DynamicTreeBroadPhase%20%3D%20Box2D.Collision.b2DynamicTreeBroadPhase%3B%0A%09%09const%20b2DynamicTreeNode%20%3D%20Box2D.Collision.b2DynamicTreeNode%3B%0A%09%09const%20b2DynamicTreePair%20%3D%20Box2D.Collision.b2DynamicTreePair%3B%0A%09%09const%20b2Manifold%20%3D%20Box2D.Collision.b2Manifold%3B%0A%09%09const%20b2ManifoldPoint%20%3D%20Box2D.Collision.b2ManifoldPoint%3B%0A%09%09const%20b2Point%20%3D%20Box2D.Collision.b2Point%3B%0A%09%09const%20b2RayCastInput%20%3D%20Box2D.Collision.b2RayCastInput%3B%0A%09%09const%20b2RayCastOutput%20%3D%20Box2D.Collision.b2RayCastOutput%3B%0A%09%09const%20b2Segment%20%3D%20Box2D.Collision.b2Segment%3B%0A%09%09const%20b2SeparationFunction%20%3D%20Box2D.Collision.b2SeparationFunction%3B%0A%09%09const%20b2Simplex%20%3D%20Box2D.Collision.b2Simplex%3B%0A%09%09const%20b2SimplexCache%20%3D%20Box2D.Collision.b2SimplexCache%3B%0A%09%09const%20b2SimplexVertex%20%3D%20Box2D.Collision.b2SimplexVertex%3B%0A%09%09const%20b2TimeOfImpact%20%3D%20Box2D.Collision.b2TimeOfImpact%3B%0A%09%09const%20b2TOIInput%20%3D%20Box2D.Collision.b2TOIInput%3B%0A%09%09const%20b2WorldManifold%20%3D%20Box2D.Collision.b2WorldManifold%3B%0A%09%09const%20ClipVertex%20%3D%20Box2D.Collision.ClipVertex%3B%0A%09%09const%20Features%20%3D%20Box2D.Collision.Features%3B%0A%09%09const%20IBroadPhase%20%3D%20Box2D.Collision.IBroadPhase%3B%0A%0A%09%09b2AABB.Combine%20%3D%20(aabb1%2C%20aabb2)%20%3D%3E%20%7B%0A%09%09%09const%20aabb%20%3D%20new%20b2AABB()%3B%0A%09%09%09aabb.Combine(aabb1%2C%20aabb2)%3B%0A%09%09%09return%20aabb%3B%0A%09%09%7D%3B%0A%09%09b2Bound.b2Bound%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2BoundValues.b2BoundValues%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2Collision.b2Collision%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2Collision.ClipSegmentToLine%20%3D%20(vOut%2C%20vIn%2C%20normal%2C%20offset)%20%3D%3E%20%7B%0A%09%09%09if%20(offset%20%3D%3D%3D%20undefined)%20offset%20%3D%200%3B%0A%09%09%09let%20cv%3B%0A%09%09%09let%20numOut%20%3D%200%3B%0A%09%09%09cv%20%3D%20vIn%5B0%5D%3B%0A%09%09%09const%20vIn0%20%3D%20cv.v%3B%0A%09%09%09cv%20%3D%20vIn%5B1%5D%3B%0A%09%09%09const%20vIn1%20%3D%20cv.v%3B%0A%09%09%09const%20distance0%20%3D%20normal.x%20*%20vIn0.x%20%2B%20normal.y%20*%20vIn0.y%20-%20offset%3B%0A%09%09%09const%20distance1%20%3D%20normal.x%20*%20vIn1.x%20%2B%20normal.y%20*%20vIn1.y%20-%20offset%3B%0A%09%09%09if%20(distance0%20%3C%3D%200.0)%20vOut%5BnumOut%2B%2B%5D.Set(vIn%5B0%5D)%3B%0A%09%09%09if%20(distance1%20%3C%3D%200.0)%20vOut%5BnumOut%2B%2B%5D.Set(vIn%5B1%5D)%3B%0A%09%09%09if%20(distance0%20*%20distance1%20%3C%200.0)%20%7B%0A%09%09%09%09const%20interp%20%3D%20distance0%20%2F%20(distance0%20-%20distance1)%3B%0A%09%09%09%09cv%20%3D%20vOut%5BnumOut%5D%3B%0A%09%09%09%09const%20tVec%20%3D%20cv.v%3B%0A%09%09%09%09tVec.x%20%3D%20vIn0.x%20%2B%20interp%20*%20(vIn1.x%20-%20vIn0.x)%3B%0A%09%09%09%09tVec.y%20%3D%20vIn0.y%20%2B%20interp%20*%20(vIn1.y%20-%20vIn0.y)%3B%0A%09%09%09%09cv%20%3D%20vOut%5BnumOut%5D%3B%0A%09%09%09%09let%20cv2%3B%0A%09%09%09%09if%20(distance0%20%3E%200.0)%20%7B%0A%09%09%09%09%09cv2%20%3D%20vIn%5B0%5D%3B%0A%09%09%09%09%09cv.id%20%3D%20cv2.id%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09cv2%20%3D%20vIn%5B1%5D%3B%0A%09%09%09%09%09cv.id%20%3D%20cv2.id%3B%0A%09%09%09%09%7D%20%2B%2BnumOut%3B%0A%09%09%09%7D%0A%09%09%09return%20numOut%3B%0A%09%09%7D%3B%0A%09%09b2Collision.EdgeSeparation%20%3D%20(poly1%2C%20xf1%2C%20edge1%2C%20poly2%2C%20xf2)%20%3D%3E%20%7B%0A%09%09%09if%20(edge1%20%3D%3D%3D%20undefined)%20edge1%20%3D%200%3B%0A%09%09%09const%20count1%20%3D%20parseInt(poly1.m_vertexCount)%3B%0A%09%09%09const%20vertices1%20%3D%20poly1.m_vertices%3B%0A%09%09%09const%20normals1%20%3D%20poly1.m_normals%3B%0A%09%09%09const%20count2%20%3D%20parseInt(poly2.m_vertexCount)%3B%0A%09%09%09const%20vertices2%20%3D%20poly2.m_vertices%3B%0A%09%09%09let%20tMat%3B%0A%09%09%09let%20tVec%3B%0A%09%09%09tMat%20%3D%20xf1.R%3B%0A%09%09%09tVec%20%3D%20normals1%5Bedge1%5D%3B%0A%09%09%09const%20normal1WorldX%20%3D%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09const%20normal1WorldY%20%3D%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09tMat%20%3D%20xf2.R%3B%0A%09%09%09const%20normal1X%20%3D%20(tMat.col1.x%20*%20normal1WorldX%20%2B%20tMat.col1.y%20*%20normal1WorldY)%3B%0A%09%09%09const%20normal1Y%20%3D%20(tMat.col2.x%20*%20normal1WorldX%20%2B%20tMat.col2.y%20*%20normal1WorldY)%3B%0A%09%09%09let%20index%20%3D%200%3B%0A%09%09%09let%20minDot%20%3D%20Number.MAX_VALUE%3B%0A%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20count2%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09tVec%20%3D%20vertices2%5Bi%5D%3B%0A%09%09%09%09const%20dot%20%3D%20tVec.x%20*%20normal1X%20%2B%20tVec.y%20*%20normal1Y%3B%0A%09%09%09%09if%20(dot%20%3C%20minDot)%20%7B%0A%09%09%09%09%09minDot%20%3D%20dot%3B%0A%09%09%09%09%09index%20%3D%20i%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09tVec%20%3D%20vertices1%5Bedge1%5D%3B%0A%09%09%09tMat%20%3D%20xf1.R%3B%0A%09%09%09const%20v1X%20%3D%20xf1.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09const%20v1Y%20%3D%20xf1.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09tVec%20%3D%20vertices2%5Bindex%5D%3B%0A%09%09%09tMat%20%3D%20xf2.R%3B%0A%09%09%09let%20v2X%20%3D%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09let%20v2Y%20%3D%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09v2X%20-%3D%20v1X%3B%0A%09%09%09v2Y%20-%3D%20v1Y%3B%0A%09%09%09const%20separation%20%3D%20v2X%20*%20normal1WorldX%20%2B%20v2Y%20*%20normal1WorldY%3B%0A%09%09%09return%20separation%3B%0A%09%09%7D%3B%0A%09%09b2Collision.FindMaxSeparation%20%3D%20(edgeIndex%2C%20poly1%2C%20xf1%2C%20poly2%2C%20xf2)%20%3D%3E%20%7B%0A%09%09%09const%20count1%20%3D%20parseInt(poly1.m_vertexCount)%3B%0A%09%09%09const%20normals1%20%3D%20poly1.m_normals%3B%0A%09%09%09let%20tVec%3B%0A%09%09%09let%20tMat%3B%0A%09%09%09tMat%20%3D%20xf2.R%3B%0A%09%09%09tVec%20%3D%20poly2.m_centroid%3B%0A%09%09%09let%20dX%20%3D%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09let%20dY%20%3D%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09tMat%20%3D%20xf1.R%3B%0A%09%09%09tVec%20%3D%20poly1.m_centroid%3B%0A%09%09%09dX%20-%3D%20xf1.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09dY%20-%3D%20xf1.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09const%20dLocal1X%20%3D%20(dX%20*%20xf1.R.col1.x%20%2B%20dY%20*%20xf1.R.col1.y)%3B%0A%09%09%09const%20dLocal1Y%20%3D%20(dX%20*%20xf1.R.col2.x%20%2B%20dY%20*%20xf1.R.col2.y)%3B%0A%09%09%09let%20edge%20%3D%200%3B%0A%09%09%09let%20maxDot%20%3D%20(-Number.MAX_VALUE)%3B%0A%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20count1%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09tVec%20%3D%20normals1%5Bi%5D%3B%0A%09%09%09%09const%20dot%20%3D%20(tVec.x%20*%20dLocal1X%20%2B%20tVec.y%20*%20dLocal1Y)%3B%0A%09%09%09%09if%20(dot%20%3E%20maxDot)%20%7B%0A%09%09%09%09%09maxDot%20%3D%20dot%3B%0A%09%09%09%09%09edge%20%3D%20i%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09let%20s%20%3D%20b2Collision.EdgeSeparation(poly1%2C%20xf1%2C%20edge%2C%20poly2%2C%20xf2)%3B%0A%09%09%09const%20prevEdge%20%3D%20parseInt(edge%20-%201%20%3E%3D%200%20%3F%20edge%20-%201%20%3A%20count1%20-%201)%3B%0A%09%09%09const%20sPrev%20%3D%20b2Collision.EdgeSeparation(poly1%2C%20xf1%2C%20prevEdge%2C%20poly2%2C%20xf2)%3B%0A%09%09%09const%20nextEdge%20%3D%20parseInt(edge%20%2B%201%20%3C%20count1%20%3F%20edge%20%2B%201%20%3A%200)%3B%0A%09%09%09const%20sNext%20%3D%20b2Collision.EdgeSeparation(poly1%2C%20xf1%2C%20nextEdge%2C%20poly2%2C%20xf2)%3B%0A%09%09%09let%20bestEdge%20%3D%200%3B%0A%09%09%09let%20bestSeparation%20%3D%200%3B%0A%09%09%09let%20increment%20%3D%200%3B%0A%09%09%09if%20(sPrev%20%3E%20s%20%26%26%20sPrev%20%3E%20sNext)%20%7B%0A%09%09%09%09increment%20%3D%20(-1)%3B%0A%09%09%09%09bestEdge%20%3D%20prevEdge%3B%0A%09%09%09%09bestSeparation%20%3D%20sPrev%3B%0A%09%09%09%7D%20else%20if%20(sNext%20%3E%20s)%20%7B%0A%09%09%09%09increment%20%3D%201%3B%0A%09%09%09%09bestEdge%20%3D%20nextEdge%3B%0A%09%09%09%09bestSeparation%20%3D%20sNext%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09edgeIndex%5B0%5D%20%3D%20edge%3B%0A%09%09%09%09return%20s%3B%0A%09%09%09%7D%0A%09%09%09while%20(true)%20%7B%0A%09%09%09%09if%20(increment%20%3D%3D%20(-1))%20edge%20%3D%20bestEdge%20-%201%20%3E%3D%200%20%3F%20bestEdge%20-%201%20%3A%20count1%20-%201%3B%0A%09%09%09%09else%20edge%20%3D%20bestEdge%20%2B%201%20%3C%20count1%20%3F%20bestEdge%20%2B%201%20%3A%200%3B%20s%20%3D%20b2Collision.EdgeSeparation(poly1%2C%20xf1%2C%20edge%2C%20poly2%2C%20xf2)%3B%0A%09%09%09%09if%20(s%20%3E%20bestSeparation)%20%7B%0A%09%09%09%09%09bestEdge%20%3D%20edge%3B%0A%09%09%09%09%09bestSeparation%20%3D%20s%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09edgeIndex%5B0%5D%20%3D%20bestEdge%3B%0A%09%09%09return%20bestSeparation%3B%0A%09%09%7D%3B%0A%09%09b2Collision.FindIncidentEdge%20%3D%20(c%2C%20poly1%2C%20xf1%2C%20edge1%2C%20poly2%2C%20xf2)%20%3D%3E%20%7B%0A%09%09%09if%20(edge1%20%3D%3D%3D%20undefined)%20edge1%20%3D%200%3B%0A%09%09%09const%20count1%20%3D%20parseInt(poly1.m_vertexCount)%3B%0A%09%09%09const%20normals1%20%3D%20poly1.m_normals%3B%0A%09%09%09const%20count2%20%3D%20parseInt(poly2.m_vertexCount)%3B%0A%09%09%09const%20vertices2%20%3D%20poly2.m_vertices%3B%0A%09%09%09const%20normals2%20%3D%20poly2.m_normals%3B%0A%09%09%09let%20tMat%3B%0A%09%09%09let%20tVec%3B%0A%09%09%09tMat%20%3D%20xf1.R%3B%0A%09%09%09tVec%20%3D%20normals1%5Bedge1%5D%3B%0A%09%09%09let%20normal1X%20%3D%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09let%20normal1Y%20%3D%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09tMat%20%3D%20xf2.R%3B%0A%09%09%09const%20tX%20%3D%20(tMat.col1.x%20*%20normal1X%20%2B%20tMat.col1.y%20*%20normal1Y)%3B%0A%09%09%09normal1Y%20%3D%20(tMat.col2.x%20*%20normal1X%20%2B%20tMat.col2.y%20*%20normal1Y)%3B%0A%09%09%09normal1X%20%3D%20tX%3B%0A%09%09%09let%20index%20%3D%200%3B%0A%09%09%09let%20minDot%20%3D%20Number.MAX_VALUE%3B%0A%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20count2%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09tVec%20%3D%20normals2%5Bi%5D%3B%0A%09%09%09%09const%20dot%20%3D%20(normal1X%20*%20tVec.x%20%2B%20normal1Y%20*%20tVec.y)%3B%0A%09%09%09%09if%20(dot%20%3C%20minDot)%20%7B%0A%09%09%09%09%09minDot%20%3D%20dot%3B%0A%09%09%09%09%09index%20%3D%20i%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09let%20tClip%3B%0A%09%09%09const%20i1%20%3D%20parseInt(index)%3B%0A%09%09%09const%20i2%20%3D%20parseInt(i1%20%2B%201%20%3C%20count2%20%3F%20i1%20%2B%201%20%3A%200)%3B%0A%09%09%09tClip%20%3D%20c%5B0%5D%3B%0A%09%09%09tVec%20%3D%20vertices2%5Bi1%5D%3B%0A%09%09%09tMat%20%3D%20xf2.R%3B%0A%09%09%09tClip.v.x%20%3D%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09tClip.v.y%20%3D%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09tClip.id.features.referenceEdge%20%3D%20edge1%3B%0A%09%09%09tClip.id.features.incidentEdge%20%3D%20i1%3B%0A%09%09%09tClip.id.features.incidentVertex%20%3D%200%3B%0A%09%09%09tClip%20%3D%20c%5B1%5D%3B%0A%09%09%09tVec%20%3D%20vertices2%5Bi2%5D%3B%0A%09%09%09tMat%20%3D%20xf2.R%3B%0A%09%09%09tClip.v.x%20%3D%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09tClip.v.y%20%3D%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09tClip.id.features.referenceEdge%20%3D%20edge1%3B%0A%09%09%09tClip.id.features.incidentEdge%20%3D%20i2%3B%0A%09%09%09tClip.id.features.incidentVertex%20%3D%201%3B%0A%09%09%7D%3B%0A%09%09b2Collision.MakeClipPointVector%20%3D%20()%20%3D%3E%20%7B%0A%09%09%09const%20r%20%3D%20new%20Vector(2)%3B%0A%09%09%09r%5B0%5D%20%3D%20new%20ClipVertex()%3B%0A%09%09%09r%5B1%5D%20%3D%20new%20ClipVertex()%3B%0A%09%09%09return%20r%3B%0A%09%09%7D%3B%0A%09%09b2Collision.CollidePolygons%20%3D%20(manifold%2C%20polyA%2C%20xfA%2C%20polyB%2C%20xfB)%20%3D%3E%20%7B%0A%09%09%09let%20cv%3B%0A%09%09%09manifold.m_pointCount%20%3D%200%3B%0A%09%09%09const%20totalRadius%20%3D%20polyA.m_radius%20%2B%20polyB.m_radius%3B%0A%09%09%09let%20edgeA%20%3D%200%3B%0A%09%09%09b2Collision.s_edgeAO%5B0%5D%20%3D%20edgeA%3B%0A%09%09%09const%20separationA%20%3D%20b2Collision.FindMaxSeparation(b2Collision.s_edgeAO%2C%20polyA%2C%20xfA%2C%20polyB%2C%20xfB)%3B%0A%09%09%09edgeA%20%3D%20b2Collision.s_edgeAO%5B0%5D%3B%0A%09%09%09if%20(separationA%20%3E%20totalRadius)%20return%3B%0A%09%09%09let%20edgeB%20%3D%200%3B%0A%09%09%09b2Collision.s_edgeBO%5B0%5D%20%3D%20edgeB%3B%0A%09%09%09const%20separationB%20%3D%20b2Collision.FindMaxSeparation(b2Collision.s_edgeBO%2C%20polyB%2C%20xfB%2C%20polyA%2C%20xfA)%3B%0A%09%09%09edgeB%20%3D%20b2Collision.s_edgeBO%5B0%5D%3B%0A%09%09%09if%20(separationB%20%3E%20totalRadius)%20return%3B%0A%09%09%09let%20poly1%3B%0A%09%09%09let%20poly2%3B%0A%09%09%09let%20xf1%3B%0A%09%09%09let%20xf2%3B%0A%09%09%09let%20edge1%20%3D%200%3B%0A%09%09%09let%20flip%20%3D%200%3B%0A%09%09%09const%20k_relativeTol%20%3D%200.98%3B%0A%09%09%09const%20k_absoluteTol%20%3D%200.001%3B%0A%09%09%09let%20tMat%3B%0A%09%09%09if%20(separationB%20%3E%20k_relativeTol%20*%20separationA%20%2B%20k_absoluteTol)%20%7B%0A%09%09%09%09poly1%20%3D%20polyB%3B%0A%09%09%09%09poly2%20%3D%20polyA%3B%0A%09%09%09%09xf1%20%3D%20xfB%3B%0A%09%09%09%09xf2%20%3D%20xfA%3B%0A%09%09%09%09edge1%20%3D%20edgeB%3B%0A%09%09%09%09manifold.m_type%20%3D%20b2Manifold.e_faceB%3B%0A%09%09%09%09flip%20%3D%201%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09poly1%20%3D%20polyA%3B%0A%09%09%09%09poly2%20%3D%20polyB%3B%0A%09%09%09%09xf1%20%3D%20xfA%3B%0A%09%09%09%09xf2%20%3D%20xfB%3B%0A%09%09%09%09edge1%20%3D%20edgeA%3B%0A%09%09%09%09manifold.m_type%20%3D%20b2Manifold.e_faceA%3B%0A%09%09%09%09flip%20%3D%200%3B%0A%09%09%09%7D%0A%09%09%09const%20incidentEdge%20%3D%20b2Collision.s_incidentEdge%3B%0A%09%09%09b2Collision.FindIncidentEdge(incidentEdge%2C%20poly1%2C%20xf1%2C%20edge1%2C%20poly2%2C%20xf2)%3B%0A%09%09%09const%20count1%20%3D%20parseInt(poly1.m_vertexCount)%3B%0A%09%09%09const%20vertices1%20%3D%20poly1.m_vertices%3B%0A%09%09%09const%20local_v11%20%3D%20vertices1%5Bedge1%5D%3B%0A%09%09%09let%20local_v12%3B%0A%09%09%09if%20(edge1%20%2B%201%20%3C%20count1)%20%7B%0A%09%09%09%09local_v12%20%3D%20vertices1%5BparseInt(edge1%20%2B%201)%5D%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09local_v12%20%3D%20vertices1%5B0%5D%3B%0A%09%09%09%7D%0A%09%09%09const%20localTangent%20%3D%20b2Collision.s_localTangent%3B%0A%09%09%09localTangent.Set(local_v12.x%20-%20local_v11.x%2C%20local_v12.y%20-%20local_v11.y)%3B%0A%09%09%09localTangent.Normalize()%3B%0A%09%09%09const%20localNormal%20%3D%20b2Collision.s_localNormal%3B%0A%09%09%09localNormal.x%20%3D%20localTangent.y%3B%0A%09%09%09localNormal.y%20%3D%20(-localTangent.x)%3B%0A%09%09%09const%20planePoint%20%3D%20b2Collision.s_planePoint%3B%0A%09%09%09planePoint.Set(0.5%20*%20(local_v11.x%20%2B%20local_v12.x)%2C%200.5%20*%20(local_v11.y%20%2B%20local_v12.y))%3B%0A%09%09%09const%20tangent%20%3D%20b2Collision.s_tangent%3B%0A%09%09%09tMat%20%3D%20xf1.R%3B%0A%09%09%09tangent.x%20%3D%20(tMat.col1.x%20*%20localTangent.x%20%2B%20tMat.col2.x%20*%20localTangent.y)%3B%0A%09%09%09tangent.y%20%3D%20(tMat.col1.y%20*%20localTangent.x%20%2B%20tMat.col2.y%20*%20localTangent.y)%3B%0A%09%09%09const%20tangent2%20%3D%20b2Collision.s_tangent2%3B%0A%09%09%09tangent2.x%20%3D%20(-tangent.x)%3B%0A%09%09%09tangent2.y%20%3D%20(-tangent.y)%3B%0A%09%09%09const%20normal%20%3D%20b2Collision.s_normal%3B%0A%09%09%09normal.x%20%3D%20tangent.y%3B%0A%09%09%09normal.y%20%3D%20(-tangent.x)%3B%0A%09%09%09const%20v11%20%3D%20b2Collision.s_v11%3B%0A%09%09%09const%20v12%20%3D%20b2Collision.s_v12%3B%0A%09%09%09v11.x%20%3D%20xf1.position.x%20%2B%20(tMat.col1.x%20*%20local_v11.x%20%2B%20tMat.col2.x%20*%20local_v11.y)%3B%0A%09%09%09v11.y%20%3D%20xf1.position.y%20%2B%20(tMat.col1.y%20*%20local_v11.x%20%2B%20tMat.col2.y%20*%20local_v11.y)%3B%0A%09%09%09v12.x%20%3D%20xf1.position.x%20%2B%20(tMat.col1.x%20*%20local_v12.x%20%2B%20tMat.col2.x%20*%20local_v12.y)%3B%0A%09%09%09v12.y%20%3D%20xf1.position.y%20%2B%20(tMat.col1.y%20*%20local_v12.x%20%2B%20tMat.col2.y%20*%20local_v12.y)%3B%0A%09%09%09const%20frontOffset%20%3D%20normal.x%20*%20v11.x%20%2B%20normal.y%20*%20v11.y%3B%0A%09%09%09const%20sideOffset1%20%3D%20(-tangent.x%20*%20v11.x)%20-%20tangent.y%20*%20v11.y%20%2B%20totalRadius%3B%0A%09%09%09const%20sideOffset2%20%3D%20tangent.x%20*%20v12.x%20%2B%20tangent.y%20*%20v12.y%20%2B%20totalRadius%3B%0A%09%09%09const%20clipPoints1%20%3D%20b2Collision.s_clipPoints1%3B%0A%09%09%09const%20clipPoints2%20%3D%20b2Collision.s_clipPoints2%3B%0A%09%09%09let%20np%20%3D%200%3B%0A%09%09%09np%20%3D%20b2Collision.ClipSegmentToLine(clipPoints1%2C%20incidentEdge%2C%20tangent2%2C%20sideOffset1)%3B%0A%09%09%09if%20(np%20%3C%202)%20return%3B%0A%09%09%09np%20%3D%20b2Collision.ClipSegmentToLine(clipPoints2%2C%20clipPoints1%2C%20tangent%2C%20sideOffset2)%3B%0A%09%09%09if%20(np%20%3C%202)%20return%3B%0A%09%09%09manifold.m_localPlaneNormal.SetV(localNormal)%3B%0A%09%09%09manifold.m_localPoint.SetV(planePoint)%3B%0A%09%09%09let%20pointCount%20%3D%200%3B%0A%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20b2Settings.b2_maxManifoldPoints%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09cv%20%3D%20clipPoints2%5Bi%5D%3B%0A%09%09%09%09const%20separation%20%3D%20normal.x%20*%20cv.v.x%20%2B%20normal.y%20*%20cv.v.y%20-%20frontOffset%3B%0A%09%09%09%09if%20(separation%20%3C%3D%20totalRadius)%20%7B%0A%09%09%09%09%09const%20cp%20%3D%20manifold.m_points%5BpointCount%5D%3B%0A%09%09%09%09%09tMat%20%3D%20xf2.R%3B%0A%09%09%09%09%09const%20tX%20%3D%20cv.v.x%20-%20xf2.position.x%3B%0A%09%09%09%09%09const%20tY%20%3D%20cv.v.y%20-%20xf2.position.y%3B%0A%09%09%09%09%09cp.m_localPoint.x%20%3D%20(tX%20*%20tMat.col1.x%20%2B%20tY%20*%20tMat.col1.y)%3B%0A%09%09%09%09%09cp.m_localPoint.y%20%3D%20(tX%20*%20tMat.col2.x%20%2B%20tY%20*%20tMat.col2.y)%3B%0A%09%09%09%09%09cp.m_id.Set(cv.id)%3B%0A%09%09%09%09%09cp.m_id.features.flip%20%3D%20flip%3B%0A%09%09%09%09%09%2B%2BpointCount%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09manifold.m_pointCount%20%3D%20pointCount%3B%0A%09%09%7D%3B%0A%09%09b2Collision.CollideCircles%20%3D%20(manifold%2C%20circle1%2C%20xf1%2C%20circle2%2C%20xf2)%20%3D%3E%20%7B%0A%09%09%09manifold.m_pointCount%20%3D%200%3B%0A%09%09%09let%20tMat%3B%0A%09%09%09let%20tVec%3B%0A%09%09%09tMat%20%3D%20xf1.R%3B%0A%09%09%09tVec%20%3D%20circle1.m_p%3B%0A%09%09%09const%20p1X%20%3D%20xf1.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09const%20p1Y%20%3D%20xf1.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09tMat%20%3D%20xf2.R%3B%0A%09%09%09tVec%20%3D%20circle2.m_p%3B%0A%09%09%09const%20p2X%20%3D%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09const%20p2Y%20%3D%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09const%20dX%20%3D%20p2X%20-%20p1X%3B%0A%09%09%09const%20dY%20%3D%20p2Y%20-%20p1Y%3B%0A%09%09%09const%20distSqr%20%3D%20dX%20*%20dX%20%2B%20dY%20*%20dY%3B%0A%09%09%09const%20radius%20%3D%20circle1.m_radius%20%2B%20circle2.m_radius%3B%0A%09%09%09if%20(distSqr%20%3E%20radius%20*%20radius)%20%7B%0A%09%09%09%09return%3B%0A%09%09%09%7D%0A%09%09%09manifold.m_type%20%3D%20b2Manifold.e_circles%3B%0A%09%09%09manifold.m_localPoint.SetV(circle1.m_p)%3B%0A%09%09%09manifold.m_localPlaneNormal.SetZero()%3B%0A%09%09%09manifold.m_pointCount%20%3D%201%3B%0A%09%09%09manifold.m_points%5B0%5D.m_localPoint.SetV(circle2.m_p)%3B%0A%09%09%09manifold.m_points%5B0%5D.m_id.key%20%3D%200%3B%0A%09%09%7D%3B%0A%09%09b2Collision.CollidePolygonAndCircle%20%3D%20(manifold%2C%20polygon%2C%20xf1%2C%20circle%2C%20xf2)%20%3D%3E%20%7B%0A%09%09%09manifold.m_pointCount%20%3D%200%3B%0A%09%09%09let%20tPoint%3B%0A%09%09%09let%20dX%20%3D%200%3B%0A%09%09%09let%20dY%20%3D%200%3B%0A%09%09%09const%20positionX%20%3D%200%3B%0A%09%09%09const%20positionY%20%3D%200%3B%0A%09%09%09let%20tVec%3B%0A%09%09%09let%20tMat%3B%0A%09%09%09tMat%20%3D%20xf2.R%3B%0A%09%09%09tVec%20%3D%20circle.m_p%3B%0A%09%09%09const%20cX%20%3D%20xf2.position.x%20%2B%20(tMat.col1.x%20*%20tVec.x%20%2B%20tMat.col2.x%20*%20tVec.y)%3B%0A%09%09%09const%20cY%20%3D%20xf2.position.y%20%2B%20(tMat.col1.y%20*%20tVec.x%20%2B%20tMat.col2.y%20*%20tVec.y)%3B%0A%09%09%09dX%20%3D%20cX%20-%20xf1.position.x%3B%0A%09%09%09dY%20%3D%20cY%20-%20xf1.position.y%3B%0A%09%09%09tMat%20%3D%20xf1.R%3B%0A%09%09%09const%20cLocalX%20%3D%20(dX%20*%20tMat.col1.x%20%2B%20dY%20*%20tMat.col1.y)%3B%0A%09%09%09const%20cLocalY%20%3D%20(dX%20*%20tMat.col2.x%20%2B%20dY%20*%20tMat.col2.y)%3B%0A%09%09%09const%20dist%20%3D%200%3B%0A%09%09%09let%20normalIndex%20%3D%200%3B%0A%09%09%09let%20separation%20%3D%20(-Number.MAX_VALUE)%3B%0A%09%09%09const%20radius%20%3D%20polygon.m_radius%20%2B%20circle.m_radius%3B%0A%09%09%09const%20vertexCount%20%3D%20parseInt(polygon.m_vertexCount)%3B%0A%09%09%09const%20vertices%20%3D%20polygon.m_vertices%3B%0A%09%09%09const%20normals%20%3D%20polygon.m_normals%3B%0A%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20vertexCount%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09tVec%20%3D%20vertices%5Bi%5D%3B%0A%09%09%09%09dX%20%3D%20cLocalX%20-%20tVec.x%3B%0A%09%09%09%09dY%20%3D%20cLocalY%20-%20tVec.y%3B%0A%09%09%09%09tVec%20%3D%20normals%5Bi%5D%3B%0A%09%09%09%09const%20s%20%3D%20tVec.x%20*%20dX%20%2B%20tVec.y%20*%20dY%3B%0A%09%09%09%09if%20(s%20%3E%20radius)%20%7B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(s%20%3E%20separation)%20%7B%0A%09%09%09%09%09separation%20%3D%20s%3B%0A%09%09%09%09%09normalIndex%20%3D%20i%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09const%20vertIndex1%20%3D%20parseInt(normalIndex)%3B%0A%09%09%09const%20vertIndex2%20%3D%20parseInt(vertIndex1%20%2B%201%20%3C%20vertexCount%20%3F%20vertIndex1%20%2B%201%20%3A%200)%3B%0A%09%09%09const%20v1%20%3D%20vertices%5BvertIndex1%5D%3B%0A%09%09%09const%20v2%20%3D%20vertices%5BvertIndex2%5D%3B%0A%09%09%09if%20(separation%20%3C%20Number.MIN_VALUE)%20%7B%0A%09%09%09%09manifold.m_pointCount%20%3D%201%3B%0A%09%09%09%09manifold.m_type%20%3D%20b2Manifold.e_faceA%3B%0A%09%09%09%09manifold.m_localPlaneNormal.SetV(normals%5BnormalIndex%5D)%3B%0A%09%09%09%09manifold.m_localPoint.x%20%3D%200.5%20*%20(v1.x%20%2B%20v2.x)%3B%0A%09%09%09%09manifold.m_localPoint.y%20%3D%200.5%20*%20(v1.y%20%2B%20v2.y)%3B%0A%09%09%09%09manifold.m_points%5B0%5D.m_localPoint.SetV(circle.m_p)%3B%0A%09%09%09%09manifold.m_points%5B0%5D.m_id.key%20%3D%200%3B%0A%09%09%09%09return%3B%0A%09%09%09%7D%0A%09%09%09const%20u1%20%3D%20(cLocalX%20-%20v1.x)%20*%20(v2.x%20-%20v1.x)%20%2B%20(cLocalY%20-%20v1.y)%20*%20(v2.y%20-%20v1.y)%3B%0A%09%09%09const%20u2%20%3D%20(cLocalX%20-%20v2.x)%20*%20(v1.x%20-%20v2.x)%20%2B%20(cLocalY%20-%20v2.y)%20*%20(v1.y%20-%20v2.y)%3B%0A%09%09%09if%20(u1%20%3C%3D%200.0)%20%7B%0A%09%09%09%09if%20((cLocalX%20-%20v1.x)%20*%20(cLocalX%20-%20v1.x)%20%2B%20(cLocalY%20-%20v1.y)%20*%20(cLocalY%20-%20v1.y)%20%3E%20radius%20*%20radius)%20return%3B%0A%09%09%09%09manifold.m_pointCount%20%3D%201%3B%0A%09%09%09%09manifold.m_type%20%3D%20b2Manifold.e_faceA%3B%0A%09%09%09%09manifold.m_localPlaneNormal.x%20%3D%20cLocalX%20-%20v1.x%3B%0A%09%09%09%09manifold.m_localPlaneNormal.y%20%3D%20cLocalY%20-%20v1.y%3B%0A%09%09%09%09manifold.m_localPlaneNormal.Normalize()%3B%0A%09%09%09%09manifold.m_localPoint.SetV(v1)%3B%0A%09%09%09%09manifold.m_points%5B0%5D.m_localPoint.SetV(circle.m_p)%3B%0A%09%09%09%09manifold.m_points%5B0%5D.m_id.key%20%3D%200%3B%0A%09%09%09%7D%20else%20if%20(u2%20%3C%3D%200)%20%7B%0A%09%09%09%09if%20((cLocalX%20-%20v2.x)%20*%20(cLocalX%20-%20v2.x)%20%2B%20(cLocalY%20-%20v2.y)%20*%20(cLocalY%20-%20v2.y)%20%3E%20radius%20*%20radius)%20return%3B%0A%09%09%09%09manifold.m_pointCount%20%3D%201%3B%0A%09%09%09%09manifold.m_type%20%3D%20b2Manifold.e_faceA%3B%0A%09%09%09%09manifold.m_localPlaneNormal.x%20%3D%20cLocalX%20-%20v2.x%3B%0A%09%09%09%09manifold.m_localPlaneNormal.y%20%3D%20cLocalY%20-%20v2.y%3B%0A%09%09%09%09manifold.m_localPlaneNormal.Normalize()%3B%0A%09%09%09%09manifold.m_localPoint.SetV(v2)%3B%0A%09%09%09%09manifold.m_points%5B0%5D.m_localPoint.SetV(circle.m_p)%3B%0A%09%09%09%09manifold.m_points%5B0%5D.m_id.key%20%3D%200%3B%0A%09%09%09%7D%20else%20%7B%0A%09%09%09%09const%20faceCenterX%20%3D%200.5%20*%20(v1.x%20%2B%20v2.x)%3B%0A%09%09%09%09const%20faceCenterY%20%3D%200.5%20*%20(v1.y%20%2B%20v2.y)%3B%0A%09%09%09%09separation%20%3D%20(cLocalX%20-%20faceCenterX)%20*%20normals%5BvertIndex1%5D.x%20%2B%20(cLocalY%20-%20faceCenterY)%20*%20normals%5BvertIndex1%5D.y%3B%0A%09%09%09%09if%20(separation%20%3E%20radius)%20return%3B%0A%09%09%09%09manifold.m_pointCount%20%3D%201%3B%0A%09%09%09%09manifold.m_type%20%3D%20b2Manifold.e_faceA%3B%0A%09%09%09%09manifold.m_localPlaneNormal.x%20%3D%20normals%5BvertIndex1%5D.x%3B%0A%09%09%09%09manifold.m_localPlaneNormal.y%20%3D%20normals%5BvertIndex1%5D.y%3B%0A%09%09%09%09manifold.m_localPlaneNormal.Normalize()%3B%0A%09%09%09%09manifold.m_localPoint.Set(faceCenterX%2C%20faceCenterY)%3B%0A%09%09%09%09manifold.m_points%5B0%5D.m_localPoint.SetV(circle.m_p)%3B%0A%09%09%09%09manifold.m_points%5B0%5D.m_id.key%20%3D%200%3B%0A%09%09%09%7D%0A%09%09%7D%3B%0A%09%09b2Collision.TestOverlap%20%3D%20(a%2C%20b)%20%3D%3E%20%7B%0A%09%09%09let%20t1%20%3D%20b.lowerBound%3B%0A%09%09%09let%20t2%20%3D%20a.upperBound%3B%0A%09%09%09const%20d1X%20%3D%20t1.x%20-%20t2.x%3B%0A%09%09%09const%20d1Y%20%3D%20t1.y%20-%20t2.y%3B%0A%09%09%09t1%20%3D%20a.lowerBound%3B%0A%09%09%09t2%20%3D%20b.upperBound%3B%0A%09%09%09const%20d2X%20%3D%20t1.x%20-%20t2.x%3B%0A%09%09%09const%20d2Y%20%3D%20t1.y%20-%20t2.y%3B%0A%09%09%09if%20(d1X%20%3E%200.0%20%7C%7C%20d1Y%20%3E%200.0)%20return%20false%3B%0A%09%09%09if%20(d2X%20%3E%200.0%20%7C%7C%20d2Y%20%3E%200.0)%20return%20false%3B%0A%09%09%09return%20true%3B%0A%09%09%7D%3B%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Collision.b2Collision.s_incidentEdge%20%3D%20b2Collision.MakeClipPointVector()%3B%0A%09%09%09Box2D.Collision.b2Collision.s_clipPoints1%20%3D%20b2Collision.MakeClipPointVector()%3B%0A%09%09%09Box2D.Collision.b2Collision.s_clipPoints2%20%3D%20b2Collision.MakeClipPointVector()%3B%0A%09%09%09Box2D.Collision.b2Collision.s_edgeAO%20%3D%20new%20Vector_a2j_Number(1)%3B%0A%09%09%09Box2D.Collision.b2Collision.s_edgeBO%20%3D%20new%20Vector_a2j_Number(1)%3B%0A%09%09%09Box2D.Collision.b2Collision.s_localTangent%20%3D%20new%20b2Vec2()%3B%0A%09%09%09Box2D.Collision.b2Collision.s_localNormal%20%3D%20new%20b2Vec2()%3B%0A%09%09%09Box2D.Collision.b2Collision.s_planePoint%20%3D%20new%20b2Vec2()%3B%0A%09%09%09Box2D.Collision.b2Collision.s_normal%20%3D%20new%20b2Vec2()%3B%0A%09%09%09Box2D.Collision.b2Collision.s_tangent%20%3D%20new%20b2Vec2()%3B%0A%09%09%09Box2D.Collision.b2Collision.s_tangent2%20%3D%20new%20b2Vec2()%3B%0A%09%09%09Box2D.Collision.b2Collision.s_v11%20%3D%20new%20b2Vec2()%3B%0A%09%09%09Box2D.Collision.b2Collision.s_v12%20%3D%20new%20b2Vec2()%3B%0A%09%09%09Box2D.Collision.b2Collision.b2CollidePolyTempVec%20%3D%20new%20b2Vec2()%3B%0A%09%09%09Box2D.Collision.b2Collision.b2_nullFeature%20%3D%200x000000ff%3B%0A%09%09%7D)%3B%0A%09%09b2Distance.b2Distance%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2Distance.Distance%20%3D%20(output%2C%20cache%2C%20input)%20%3D%3E%20%7B%0A%09%09%09%2B%2Bb2Distance.b2_gjkCalls%3B%0A%09%09%09const%20proxyA%20%3D%20input.proxyA%3B%0A%09%09%09const%20proxyB%20%3D%20input.proxyB%3B%0A%09%09%09const%20transformA%20%3D%20input.transformA%3B%0A%09%09%09const%20transformB%20%3D%20input.transformB%3B%0A%09%09%09const%20simplex%20%3D%20b2Distance.s_simplex%3B%0A%09%09%09simplex.ReadCache(cache%2C%20proxyA%2C%20transformA%2C%20proxyB%2C%20transformB)%3B%0A%09%09%09const%20vertices%20%3D%20simplex.m_vertices%3B%0A%09%09%09const%20k_maxIters%20%3D%2020%3B%0A%09%09%09const%20saveA%20%3D%20b2Distance.s_saveA%3B%0A%09%09%09const%20saveB%20%3D%20b2Distance.s_saveB%3B%0A%09%09%09let%20saveCount%20%3D%200%3B%0A%09%09%09const%20closestPoint%20%3D%20simplex.GetClosestPoint()%3B%0A%09%09%09let%20distanceSqr1%20%3D%20closestPoint.LengthSquared()%3B%0A%09%09%09let%20distanceSqr2%20%3D%20distanceSqr1%3B%0A%09%09%09let%20i%20%3D%200%3B%0A%09%09%09let%20p%3B%0A%09%09%09let%20iter%20%3D%200%3B%0A%09%09%09while%20(iter%20%3C%20k_maxIters)%20%7B%0A%09%09%09%09saveCount%20%3D%20simplex.m_count%3B%0A%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09i%20%3C%20saveCount%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09saveA%5Bi%5D%20%3D%20vertices%5Bi%5D.indexA%3B%0A%09%09%09%09%09saveB%5Bi%5D%20%3D%20vertices%5Bi%5D.indexB%3B%0A%09%09%09%09%7D%0A%09%09%09%09switch%20(simplex.m_count)%20%7B%0A%09%09%09%09%09case%201%3A%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%202%3A%0A%09%09%09%09%09%09simplex.Solve2()%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09case%203%3A%0A%09%09%09%09%09%09simplex.Solve3()%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09default%3A%0A%09%09%09%09%09%09b2Settings.b2Assert(false)%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(simplex.m_count%20%3D%3D%203)%20%7B%0A%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%09p%20%3D%20simplex.GetClosestPoint()%3B%0A%09%09%09%09distanceSqr2%20%3D%20p.LengthSquared()%3B%0A%09%09%09%09if%20(distanceSqr2%20%3E%20distanceSqr1)%20%7B%20%7D%0A%09%09%09%09distanceSqr1%20%3D%20distanceSqr2%3B%0A%09%09%09%09const%20d%20%3D%20simplex.GetSearchDirection()%3B%0A%09%09%09%09if%20(d.LengthSquared()%20%3C%20Number.MIN_VALUE%20*%20Number.MIN_VALUE)%20%7B%0A%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20vertex%20%3D%20vertices%5Bsimplex.m_count%5D%3B%0A%09%09%09%09vertex.indexA%20%3D%20proxyA.GetSupport(b2Math.MulTMV(transformA.R%2C%20d.GetNegative()))%3B%0A%09%09%09%09vertex.wA%20%3D%20b2Math.MulX(transformA%2C%20proxyA.GetVertex(vertex.indexA))%3B%0A%09%09%09%09vertex.indexB%20%3D%20proxyB.GetSupport(b2Math.MulTMV(transformB.R%2C%20d))%3B%0A%09%09%09%09vertex.wB%20%3D%20b2Math.MulX(transformB%2C%20proxyB.GetVertex(vertex.indexB))%3B%0A%09%09%09%09vertex.w%20%3D%20b2Math.SubtractVV(vertex.wB%2C%20vertex.wA)%3B%0A%09%09%09%09%2B%2Biter%3B%0A%09%09%09%09%2B%2Bb2Distance.b2_gjkIters%3B%0A%09%09%09%09let%20duplicate%20%3D%20false%3B%0A%09%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09%09i%20%3C%20saveCount%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09if%20(vertex.indexA%20%3D%3D%20saveA%5Bi%5D%20%26%26%20vertex.indexB%20%3D%3D%20saveB%5Bi%5D)%20%7B%0A%09%09%09%09%09%09duplicate%20%3D%20true%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09if%20(duplicate)%20%7B%0A%09%09%09%09%09break%3B%0A%09%09%09%09%7D%20%2B%2Bsimplex.m_count%3B%0A%09%09%09%7D%0A%09%09%09b2Distance.b2_gjkMaxIters%20%3D%20b2Math.Max(b2Distance.b2_gjkMaxIters%2C%20iter)%3B%0A%09%09%09simplex.GetWitnessPoints(output.pointA%2C%20output.pointB)%3B%0A%09%09%09output.distance%20%3D%20b2Math.SubtractVV(output.pointA%2C%20output.pointB).Length()%3B%0A%09%09%09output.iterations%20%3D%20iter%3B%0A%09%09%09simplex.WriteCache(cache)%3B%0A%09%09%09if%20(input.useRadii)%20%7B%0A%09%09%09%09const%20rA%20%3D%20proxyA.m_radius%3B%0A%09%09%09%09const%20rB%20%3D%20proxyB.m_radius%3B%0A%09%09%09%09if%20(output.distance%20%3E%20rA%20%2B%20rB%20%26%26%20output.distance%20%3E%20Number.MIN_VALUE)%20%7B%0A%09%09%09%09%09output.distance%20-%3D%20rA%20%2B%20rB%3B%0A%09%09%09%09%09const%20normal%20%3D%20b2Math.SubtractVV(output.pointB%2C%20output.pointA)%3B%0A%09%09%09%09%09normal.Normalize()%3B%0A%09%09%09%09%09output.pointA.x%20%2B%3D%20rA%20*%20normal.x%3B%0A%09%09%09%09%09output.pointA.y%20%2B%3D%20rA%20*%20normal.y%3B%0A%09%09%09%09%09output.pointB.x%20-%3D%20rB%20*%20normal.x%3B%0A%09%09%09%09%09output.pointB.y%20-%3D%20rB%20*%20normal.y%3B%0A%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09p%20%3D%20new%20b2Vec2()%3B%0A%09%09%09%09%09p.x%20%3D%200.5%20*%20(output.pointA.x%20%2B%20output.pointB.x)%3B%0A%09%09%09%09%09p.y%20%3D%200.5%20*%20(output.pointA.y%20%2B%20output.pointB.y)%3B%0A%09%09%09%09%09output.pointA.x%20%3D%20output.pointB.x%20%3D%20p.x%3B%0A%09%09%09%09%09output.pointA.y%20%3D%20output.pointB.y%20%3D%20p.y%3B%0A%09%09%09%09%09output.distance%20%3D%200.0%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%3B%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Collision.b2Distance.s_simplex%20%3D%20new%20b2Simplex()%3B%0A%09%09%09Box2D.Collision.b2Distance.s_saveA%20%3D%20new%20Vector_a2j_Number(3)%3B%0A%09%09%09Box2D.Collision.b2Distance.s_saveB%20%3D%20new%20Vector_a2j_Number(3)%3B%0A%09%09%7D)%3B%0A%09%09b2DistanceInput.b2DistanceInput%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2DistanceProxy.b2DistanceProxy%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2DynamicTree.b2DynamicTree%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2DynamicTreeBroadPhase.__implements%20%3D%20%7B%7D%3B%0A%09%09b2DynamicTreeBroadPhase.__implements%5BIBroadPhase%5D%20%3D%20true%3B%0A%09%09b2DynamicTreePair.b2DynamicTreePair%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Collision.b2Manifold.e_circles%20%3D%200x0001%3B%0A%09%09%09Box2D.Collision.b2Manifold.e_faceA%20%3D%200x0002%3B%0A%09%09%09Box2D.Collision.b2Manifold.e_faceB%20%3D%200x0004%3B%0A%09%09%7D)%3B%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Collision.b2SeparationFunction.e_points%20%3D%200x01%3B%0A%09%09%09Box2D.Collision.b2SeparationFunction.e_faceA%20%3D%200x02%3B%0A%09%09%09Box2D.Collision.b2SeparationFunction.e_faceB%20%3D%200x04%3B%0A%09%09%7D)%3B%0A%09%09b2SimplexVertex.b2SimplexVertex%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2TimeOfImpact.b2TimeOfImpact%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2TimeOfImpact.TimeOfImpact%20%3D%20input%20%3D%3E%20%7B%0A%09%09%09%2B%2Bb2TimeOfImpact.b2_toiCalls%3B%0A%09%09%09const%20proxyA%20%3D%20input.proxyA%3B%0A%09%09%09const%20proxyB%20%3D%20input.proxyB%3B%0A%09%09%09const%20sweepA%20%3D%20input.sweepA%3B%0A%09%09%09const%20sweepB%20%3D%20input.sweepB%3B%0A%09%09%09b2Settings.b2Assert(sweepA.t0%20%3D%3D%20sweepB.t0)%3B%0A%09%09%09b2Settings.b2Assert(1.0%20-%20sweepA.t0%20%3E%20Number.MIN_VALUE)%3B%0A%09%09%09const%20radius%20%3D%20proxyA.m_radius%20%2B%20proxyB.m_radius%3B%0A%09%09%09const%20tolerance%20%3D%20input.tolerance%3B%0A%09%09%09let%20alpha%20%3D%200.0%3B%0A%09%09%09const%20k_maxIterations%20%3D%201000%3B%0A%09%09%09let%20iter%20%3D%200%3B%0A%09%09%09let%20target%20%3D%200.0%3B%0A%09%09%09b2TimeOfImpact.s_cache.count%20%3D%200%3B%0A%09%09%09b2TimeOfImpact.s_distanceInput.useRadii%20%3D%20false%3B%0A%09%09%09for%20(%3B%20%3B)%20%7B%0A%09%09%09%09sweepA.GetTransform(b2TimeOfImpact.s_xfA%2C%20alpha)%3B%0A%09%09%09%09sweepB.GetTransform(b2TimeOfImpact.s_xfB%2C%20alpha)%3B%0A%09%09%09%09b2TimeOfImpact.s_distanceInput.proxyA%20%3D%20proxyA%3B%0A%09%09%09%09b2TimeOfImpact.s_distanceInput.proxyB%20%3D%20proxyB%3B%0A%09%09%09%09b2TimeOfImpact.s_distanceInput.transformA%20%3D%20b2TimeOfImpact.s_xfA%3B%0A%09%09%09%09b2TimeOfImpact.s_distanceInput.transformB%20%3D%20b2TimeOfImpact.s_xfB%3B%0A%09%09%09%09b2Distance.Distance(b2TimeOfImpact.s_distanceOutput%2C%20b2TimeOfImpact.s_cache%2C%20b2TimeOfImpact.s_distanceInput)%3B%0A%09%09%09%09if%20(b2TimeOfImpact.s_distanceOutput.distance%20%3C%3D%200.0)%20%7B%0A%09%09%09%09%09alpha%20%3D%201.0%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%09b2TimeOfImpact.s_fcn.Initialize(b2TimeOfImpact.s_cache%2C%20proxyA%2C%20b2TimeOfImpact.s_xfA%2C%20proxyB%2C%20b2TimeOfImpact.s_xfB)%3B%0A%09%09%09%09const%20separation%20%3D%20b2TimeOfImpact.s_fcn.Evaluate(b2TimeOfImpact.s_xfA%2C%20b2TimeOfImpact.s_xfB)%3B%0A%09%09%09%09if%20(separation%20%3C%3D%200.0)%20%7B%0A%09%09%09%09%09alpha%20%3D%201.0%3B%0A%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(iter%20%3D%3D%200)%20%7B%0A%09%09%09%09%09if%20(separation%20%3E%20radius)%20%7B%0A%09%09%09%09%09%09target%20%3D%20b2Math.Max(radius%20-%20tolerance%2C%200.75%20*%20radius)%3B%0A%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09target%20%3D%20b2Math.Max(separation%20-%20tolerance%2C%200.02%20*%20radius)%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09if%20(separation%20-%20target%20%3C%200.5%20*%20tolerance)%20%7B%0A%09%09%09%09%09if%20(iter%20%3D%3D%200)%20%7B%0A%09%09%09%09%09%09alpha%20%3D%201.0%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%09let%20newAlpha%20%3D%20alpha%3B%20%7B%0A%09%09%09%09%09let%20x1%20%3D%20alpha%3B%0A%09%09%09%09%09let%20x2%20%3D%201.0%3B%0A%09%09%09%09%09let%20f1%20%3D%20separation%3B%0A%09%09%09%09%09sweepA.GetTransform(b2TimeOfImpact.s_xfA%2C%20x2)%3B%0A%09%09%09%09%09sweepB.GetTransform(b2TimeOfImpact.s_xfB%2C%20x2)%3B%0A%09%09%09%09%09let%20f2%20%3D%20b2TimeOfImpact.s_fcn.Evaluate(b2TimeOfImpact.s_xfA%2C%20b2TimeOfImpact.s_xfB)%3B%0A%09%09%09%09%09if%20(f2%20%3E%3D%20target)%20%7B%0A%09%09%09%09%09%09alpha%20%3D%201.0%3B%0A%09%09%09%09%09%09break%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09let%20rootIterCount%20%3D%200%3B%0A%09%09%09%09%09for%20(%3B%20%3B)%20%7B%0A%09%09%09%09%09%09let%20x%20%3D%200%3B%0A%09%09%09%09%09%09if%20(rootIterCount%20%26%201)%20%7B%0A%09%09%09%09%09%09%09x%20%3D%20x1%20%2B%20(target%20-%20f1)%20*%20(x2%20-%20x1)%20%2F%20(f2%20-%20f1)%3B%0A%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09x%20%3D%200.5%20*%20(x1%20%2B%20x2)%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09sweepA.GetTransform(b2TimeOfImpact.s_xfA%2C%20x)%3B%0A%09%09%09%09%09%09sweepB.GetTransform(b2TimeOfImpact.s_xfB%2C%20x)%3B%0A%09%09%09%09%09%09const%20f%20%3D%20b2TimeOfImpact.s_fcn.Evaluate(b2TimeOfImpact.s_xfA%2C%20b2TimeOfImpact.s_xfB)%3B%0A%09%09%09%09%09%09if%20(b2Math.Abs(f%20-%20target)%20%3C%200.025%20*%20tolerance)%20%7B%0A%09%09%09%09%09%09%09newAlpha%20%3D%20x%3B%0A%09%09%09%09%09%09%09break%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09if%20(f%20%3E%20target)%20%7B%0A%09%09%09%09%09%09%09x1%20%3D%20x%3B%0A%09%09%09%09%09%09%09f1%20%3D%20f%3B%0A%09%09%09%09%09%09%7D%20else%20%7B%0A%09%09%09%09%09%09%09x2%20%3D%20x%3B%0A%09%09%09%09%09%09%09f2%20%3D%20f%3B%0A%09%09%09%09%09%09%7D%20%2B%2BrootIterCount%3B%0A%09%09%09%09%09%09%2B%2Bb2TimeOfImpact.b2_toiRootIters%3B%0A%09%09%09%09%09%09if%20(rootIterCount%20%3D%3D%2050)%20%7B%0A%09%09%09%09%09%09%09break%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%7D%0A%09%09%09%09%09b2TimeOfImpact.b2_toiMaxRootIters%20%3D%20b2Math.Max(b2TimeOfImpact.b2_toiMaxRootIters%2C%20rootIterCount)%3B%0A%09%09%09%09%7D%0A%09%09%09%09if%20(newAlpha%20%3C%20(1.0%20%2B%20100.0%20*%20Number.MIN_VALUE)%20*%20alpha)%20%7B%0A%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%09alpha%20%3D%20newAlpha%3B%0A%09%09%09%09iter%2B%2B%3B%0A%09%09%09%09%2B%2Bb2TimeOfImpact.b2_toiIters%3B%0A%09%09%09%09if%20(iter%20%3D%3D%20k_maxIterations)%20%7B%0A%09%09%09%09%09break%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%09b2TimeOfImpact.b2_toiMaxIters%20%3D%20b2Math.Max(b2TimeOfImpact.b2_toiMaxIters%2C%20iter)%3B%0A%09%09%09return%20alpha%3B%0A%09%09%7D%3B%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Collision.b2TimeOfImpact.b2_toiCalls%20%3D%200%3B%0A%09%09%09Box2D.Collision.b2TimeOfImpact.b2_toiIters%20%3D%200%3B%0A%09%09%09Box2D.Collision.b2TimeOfImpact.b2_toiMaxIters%20%3D%200%3B%0A%09%09%09Box2D.Collision.b2TimeOfImpact.b2_toiRootIters%20%3D%200%3B%0A%09%09%09Box2D.Collision.b2TimeOfImpact.b2_toiMaxRootIters%20%3D%200%3B%0A%09%09%09Box2D.Collision.b2TimeOfImpact.s_cache%20%3D%20new%20b2SimplexCache()%3B%0A%09%09%09Box2D.Collision.b2TimeOfImpact.s_distanceInput%20%3D%20new%20b2DistanceInput()%3B%0A%09%09%09Box2D.Collision.b2TimeOfImpact.s_xfA%20%3D%20new%20b2Transform()%3B%0A%09%09%09Box2D.Collision.b2TimeOfImpact.s_xfB%20%3D%20new%20b2Transform()%3B%0A%09%09%09Box2D.Collision.b2TimeOfImpact.s_fcn%20%3D%20new%20b2SeparationFunction()%3B%0A%09%09%09Box2D.Collision.b2TimeOfImpact.s_distanceOutput%20%3D%20new%20b2DistanceOutput()%3B%0A%09%09%7D)%3B%0A%09%09Features.Features%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%7D))()%3B%0A%09((()%20%3D%3E%20%7B%0A%09%09const%20b2Color%20%3D%20Box2D.Common.b2Color%3B%0A%09%09const%20b2internal%20%3D%20Box2D.Common.b2internal%3B%0A%09%09const%20b2Settings%20%3D%20Box2D.Common.b2Settings%3B%0A%09%09const%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%3B%0A%09%09const%20b2EdgeChainDef%20%3D%20Box2D.Collision.Shapes.b2EdgeChainDef%3B%0A%09%09const%20b2EdgeShape%20%3D%20Box2D.Collision.Shapes.b2EdgeShape%3B%0A%09%09const%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%3B%0A%09%09const%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%3B%0A%09%09const%20b2Shape%20%3D%20Box2D.Collision.Shapes.b2Shape%3B%0A%09%09const%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%3B%0A%09%09const%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%3B%0A%09%09const%20b2Math%20%3D%20Box2D.Common.Math.b2Math%3B%0A%09%09const%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%3B%0A%09%09const%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%3B%0A%09%09const%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%3B%0A%09%09const%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%3B%0A%09%09const%20b2Body%20%3D%20Box2D.Dynamics.b2Body%3B%0A%09%09const%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%3B%0A%09%09const%20b2ContactFilter%20%3D%20Box2D.Dynamics.b2ContactFilter%3B%0A%09%09const%20b2ContactImpulse%20%3D%20Box2D.Dynamics.b2ContactImpulse%3B%0A%09%09const%20b2ContactListener%20%3D%20Box2D.Dynamics.b2ContactListener%3B%0A%09%09const%20b2ContactManager%20%3D%20Box2D.Dynamics.b2ContactManager%3B%0A%09%09const%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%3B%0A%09%09const%20b2DestructionListener%20%3D%20Box2D.Dynamics.b2DestructionListener%3B%0A%09%09const%20b2FilterData%20%3D%20Box2D.Dynamics.b2FilterData%3B%0A%09%09const%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%3B%0A%09%09const%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%3B%0A%09%09const%20b2Island%20%3D%20Box2D.Dynamics.b2Island%3B%0A%09%09const%20b2TimeStep%20%3D%20Box2D.Dynamics.b2TimeStep%3B%0A%09%09const%20b2World%20%3D%20Box2D.Dynamics.b2World%3B%0A%09%09const%20b2AABB%20%3D%20Box2D.Collision.b2AABB%3B%0A%09%09const%20b2Bound%20%3D%20Box2D.Collision.b2Bound%3B%0A%09%09const%20b2BoundValues%20%3D%20Box2D.Collision.b2BoundValues%3B%0A%09%09const%20b2Collision%20%3D%20Box2D.Collision.b2Collision%3B%0A%09%09const%20b2ContactID%20%3D%20Box2D.Collision.b2ContactID%3B%0A%09%09const%20b2ContactPoint%20%3D%20Box2D.Collision.b2ContactPoint%3B%0A%09%09const%20b2Distance%20%3D%20Box2D.Collision.b2Distance%3B%0A%09%09const%20b2DistanceInput%20%3D%20Box2D.Collision.b2DistanceInput%3B%0A%09%09const%20b2DistanceOutput%20%3D%20Box2D.Collision.b2DistanceOutput%3B%0A%09%09const%20b2DistanceProxy%20%3D%20Box2D.Collision.b2DistanceProxy%3B%0A%09%09const%20b2DynamicTree%20%3D%20Box2D.Collision.b2DynamicTree%3B%0A%09%09const%20b2DynamicTreeBroadPhase%20%3D%20Box2D.Collision.b2DynamicTreeBroadPhase%3B%0A%09%09const%20b2DynamicTreeNode%20%3D%20Box2D.Collision.b2DynamicTreeNode%3B%0A%09%09const%20b2DynamicTreePair%20%3D%20Box2D.Collision.b2DynamicTreePair%3B%0A%09%09const%20b2Manifold%20%3D%20Box2D.Collision.b2Manifold%3B%0A%09%09const%20b2ManifoldPoint%20%3D%20Box2D.Collision.b2ManifoldPoint%3B%0A%09%09const%20b2Point%20%3D%20Box2D.Collision.b2Point%3B%0A%09%09const%20b2RayCastInput%20%3D%20Box2D.Collision.b2RayCastInput%3B%0A%09%09const%20b2RayCastOutput%20%3D%20Box2D.Collision.b2RayCastOutput%3B%0A%09%09const%20b2Segment%20%3D%20Box2D.Collision.b2Segment%3B%0A%09%09const%20b2SeparationFunction%20%3D%20Box2D.Collision.b2SeparationFunction%3B%0A%09%09const%20b2Simplex%20%3D%20Box2D.Collision.b2Simplex%3B%0A%09%09const%20b2SimplexCache%20%3D%20Box2D.Collision.b2SimplexCache%3B%0A%09%09const%20b2SimplexVertex%20%3D%20Box2D.Collision.b2SimplexVertex%3B%0A%09%09const%20b2TimeOfImpact%20%3D%20Box2D.Collision.b2TimeOfImpact%3B%0A%09%09const%20b2TOIInput%20%3D%20Box2D.Collision.b2TOIInput%3B%0A%09%09const%20b2WorldManifold%20%3D%20Box2D.Collision.b2WorldManifold%3B%0A%09%09const%20ClipVertex%20%3D%20Box2D.Collision.ClipVertex%3B%0A%09%09const%20Features%20%3D%20Box2D.Collision.Features%3B%0A%09%09const%20IBroadPhase%20%3D%20Box2D.Collision.IBroadPhase%3B%0A%0A%09%09b2CircleShape.prototype.__super%20%3D%20Box2D.Collision.Shapes.b2Shape.prototype%3B%0A%09%09b2EdgeChainDef.b2EdgeChainDef%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2EdgeShape.prototype.__super%20%3D%20Box2D.Collision.Shapes.b2Shape.prototype%3B%0A%09%09b2PolygonShape.prototype.__super%20%3D%20Box2D.Collision.Shapes.b2Shape.prototype%3B%0A%09%09b2PolygonShape.AsArray%20%3D%20(vertices%2C%20vertexCount)%20%3D%3E%20%7B%0A%09%09%09if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%09%09%09const%20polygonShape%20%3D%20new%20b2PolygonShape()%3B%0A%09%09%09polygonShape.SetAsArray(vertices%2C%20vertexCount)%3B%0A%09%09%09return%20polygonShape%3B%0A%09%09%7D%3B%0A%09%09b2PolygonShape.AsVector%20%3D%20(vertices%2C%20vertexCount)%20%3D%3E%20%7B%0A%09%09%09if%20(vertexCount%20%3D%3D%3D%20undefined)%20vertexCount%20%3D%200%3B%0A%09%09%09const%20polygonShape%20%3D%20new%20b2PolygonShape()%3B%0A%09%09%09polygonShape.SetAsVector(vertices%2C%20vertexCount)%3B%0A%09%09%09return%20polygonShape%3B%0A%09%09%7D%3B%0A%09%09b2PolygonShape.AsBox%20%3D%20(hx%2C%20hy)%20%3D%3E%20%7B%0A%09%09%09if%20(hx%20%3D%3D%3D%20undefined)%20hx%20%3D%200%3B%0A%09%09%09if%20(hy%20%3D%3D%3D%20undefined)%20hy%20%3D%200%3B%0A%09%09%09const%20polygonShape%20%3D%20new%20b2PolygonShape()%3B%0A%09%09%09polygonShape.SetAsBox(hx%2C%20hy)%3B%0A%09%09%09return%20polygonShape%3B%0A%09%09%7D%3B%0A%09%09b2PolygonShape.AsOrientedBox%20%3D%20(hx%2C%20hy%2C%20center%2C%20angle)%20%3D%3E%20%7B%0A%09%09%09if%20(hx%20%3D%3D%3D%20undefined)%20hx%20%3D%200%3B%0A%09%09%09if%20(hy%20%3D%3D%3D%20undefined)%20hy%20%3D%200%3B%0A%09%09%09if%20(center%20%3D%3D%3D%20undefined)%20center%20%3D%20null%3B%0A%09%09%09if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200.0%3B%0A%09%09%09const%20polygonShape%20%3D%20new%20b2PolygonShape()%3B%0A%09%09%09polygonShape.SetAsOrientedBox(hx%2C%20hy%2C%20center%2C%20angle)%3B%0A%09%09%09return%20polygonShape%3B%0A%09%09%7D%3B%0A%09%09b2PolygonShape.AsEdge%20%3D%20(v1%2C%20v2)%20%3D%3E%20%7B%0A%09%09%09const%20polygonShape%20%3D%20new%20b2PolygonShape()%3B%0A%09%09%09polygonShape.SetAsEdge(v1%2C%20v2)%3B%0A%09%09%09return%20polygonShape%3B%0A%09%09%7D%3B%0A%09%09b2PolygonShape.ComputeCentroid%20%3D%20(vs%2C%20count)%20%3D%3E%20%7B%0A%09%09%09if%20(count%20%3D%3D%3D%20undefined)%20count%20%3D%200%3B%0A%09%09%09const%20c%20%3D%20new%20b2Vec2()%3B%0A%09%09%09let%20area%20%3D%200.0%3B%0A%09%09%09const%20p1X%20%3D%200.0%3B%0A%09%09%09const%20p1Y%20%3D%200.0%3B%0A%09%09%09const%20inv3%20%3D%201.0%20%2F%203.0%3B%0A%09%09%09for%20(let%20i%20%3D%200%3B%20i%20%3C%20count%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09const%20p2%20%3D%20vs%5Bi%5D%3B%0A%09%09%09%09const%20p3%20%3D%20i%20%2B%201%20%3C%20count%20%3F%20vs%5BparseInt(i%20%2B%201)%5D%20%3A%20vs%5B0%5D%3B%0A%09%09%09%09const%20e1X%20%3D%20p2.x%20-%20p1X%3B%0A%09%09%09%09const%20e1Y%20%3D%20p2.y%20-%20p1Y%3B%0A%09%09%09%09const%20e2X%20%3D%20p3.x%20-%20p1X%3B%0A%09%09%09%09const%20e2Y%20%3D%20p3.y%20-%20p1Y%3B%0A%09%09%09%09const%20D%20%3D%20(e1X%20*%20e2Y%20-%20e1Y%20*%20e2X)%3B%0A%09%09%09%09const%20triangleArea%20%3D%200.5%20*%20D%3B%20area%20%2B%3D%20triangleArea%3B%0A%09%09%09%09c.x%20%2B%3D%20triangleArea%20*%20inv3%20*%20(p1X%20%2B%20p2.x%20%2B%20p3.x)%3B%0A%09%09%09%09c.y%20%2B%3D%20triangleArea%20*%20inv3%20*%20(p1Y%20%2B%20p2.y%20%2B%20p3.y)%3B%0A%09%09%09%7D%0A%09%09%09c.x%20*%3D%201.0%20%2F%20area%3B%0A%09%09%09c.y%20*%3D%201.0%20%2F%20area%3B%0A%09%09%09return%20c%3B%0A%09%09%7D%3B%0A%09%09b2PolygonShape.ComputeOBB%20%3D%20(obb%2C%20vs%2C%20count)%20%3D%3E%20%7B%0A%09%09%09if%20(count%20%3D%3D%3D%20undefined)%20count%20%3D%200%3B%0A%09%09%09let%20i%20%3D%200%3B%0A%09%09%09const%20p%20%3D%20new%20Vector(count%20%2B%201)%3B%0A%09%09%09for%20(i%20%3D%200%3B%0A%09%09%09%09i%20%3C%20count%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09p%5Bi%5D%20%3D%20vs%5Bi%5D%3B%0A%09%09%09%7D%0A%09%09%09p%5Bcount%5D%20%3D%20p%5B0%5D%3B%0A%09%09%09let%20minArea%20%3D%20Number.MAX_VALUE%3B%0A%09%09%09for%20(i%20%3D%201%3B%0A%09%09%09%09i%20%3C%3D%20count%3B%20%2B%2Bi)%20%7B%0A%09%09%09%09const%20root%20%3D%20p%5BparseInt(i%20-%201)%5D%3B%0A%09%09%09%09let%20uxX%20%3D%20p%5Bi%5D.x%20-%20root.x%3B%0A%09%09%09%09let%20uxY%20%3D%20p%5Bi%5D.y%20-%20root.y%3B%0A%09%09%09%09const%20length%20%3D%20Math.sqrt(uxX%20*%20uxX%20%2B%20uxY%20*%20uxY)%3B%0A%09%09%09%09uxX%20%2F%3D%20length%3B%0A%09%09%09%09uxY%20%2F%3D%20length%3B%0A%09%09%09%09const%20uyX%20%3D%20(-uxY)%3B%0A%09%09%09%09const%20uyY%20%3D%20uxX%3B%0A%09%09%09%09let%20lowerX%20%3D%20Number.MAX_VALUE%3B%0A%09%09%09%09let%20lowerY%20%3D%20Number.MAX_VALUE%3B%0A%09%09%09%09let%20upperX%20%3D%20(-Number.MAX_VALUE)%3B%0A%09%09%09%09let%20upperY%20%3D%20(-Number.MAX_VALUE)%3B%0A%09%09%09%09for%20(let%20j%20%3D%200%3B%20j%20%3C%20count%3B%20%2B%2Bj)%20%7B%0A%09%09%09%09%09const%20dX%20%3D%20p%5Bj%5D.x%20-%20root.x%3B%0A%09%09%09%09%09const%20dY%20%3D%20p%5Bj%5D.y%20-%20root.y%3B%0A%09%09%09%09%09const%20rX%20%3D%20(uxX%20*%20dX%20%2B%20uxY%20*%20dY)%3B%0A%09%09%09%09%09const%20rY%20%3D%20(uyX%20*%20dX%20%2B%20uyY%20*%20dY)%3B%0A%09%09%09%09%09if%20(rX%20%3C%20lowerX)%20lowerX%20%3D%20rX%3B%0A%09%09%09%09%09if%20(rY%20%3C%20lowerY)%20lowerY%20%3D%20rY%3B%0A%09%09%09%09%09if%20(rX%20%3E%20upperX)%20upperX%20%3D%20rX%3B%0A%09%09%09%09%09if%20(rY%20%3E%20upperY)%20upperY%20%3D%20rY%3B%0A%09%09%09%09%7D%0A%09%09%09%09const%20area%20%3D%20(upperX%20-%20lowerX)%20*%20(upperY%20-%20lowerY)%3B%0A%09%09%09%09if%20(area%20%3C%200.95%20*%20minArea)%20%7B%0A%09%09%09%09%09minArea%20%3D%20area%3B%0A%09%09%09%09%09obb.R.col1.x%20%3D%20uxX%3B%0A%09%09%09%09%09obb.R.col1.y%20%3D%20uxY%3B%0A%09%09%09%09%09obb.R.col2.x%20%3D%20uyX%3B%0A%09%09%09%09%09obb.R.col2.y%20%3D%20uyY%3B%0A%09%09%09%09%09const%20centerX%20%3D%200.5%20*%20(lowerX%20%2B%20upperX)%3B%0A%09%09%09%09%09const%20centerY%20%3D%200.5%20*%20(lowerY%20%2B%20upperY)%3B%0A%09%09%09%09%09const%20tMat%20%3D%20obb.R%3B%0A%09%09%09%09%09obb.center.x%20%3D%20root.x%20%2B%20(tMat.col1.x%20*%20centerX%20%2B%20tMat.col2.x%20*%20centerY)%3B%0A%09%09%09%09%09obb.center.y%20%3D%20root.y%20%2B%20(tMat.col1.y%20*%20centerX%20%2B%20tMat.col2.y%20*%20centerY)%3B%0A%09%09%09%09%09obb.extents.x%20%3D%200.5%20*%20(upperX%20-%20lowerX)%3B%0A%09%09%09%09%09obb.extents.y%20%3D%200.5%20*%20(upperY%20-%20lowerY)%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%0A%09%09%7D%3B%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Collision.Shapes.b2PolygonShape.s_mat%20%3D%20new%20b2Mat22()%3B%0A%09%09%7D)%3B%0A%09%09b2Shape.b2Shape%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2Shape.TestOverlap%20%3D%20(shape1%2C%20transform1%2C%20shape2%2C%20transform2)%20%3D%3E%20%7B%0A%09%09%09const%20input%20%3D%20new%20b2DistanceInput()%3B%0A%09%09%09input.proxyA%20%3D%20new%20b2DistanceProxy()%3B%0A%09%09%09input.proxyA.Set(shape1)%3B%0A%09%09%09input.proxyB%20%3D%20new%20b2DistanceProxy()%3B%0A%09%09%09input.proxyB.Set(shape2)%3B%0A%09%09%09input.transformA%20%3D%20transform1%3B%0A%09%09%09input.transformB%20%3D%20transform2%3B%0A%09%09%09input.useRadii%20%3D%20true%3B%0A%09%09%09const%20simplexCache%20%3D%20new%20b2SimplexCache()%3B%0A%09%09%09simplexCache.count%20%3D%200%3B%0A%09%09%09const%20output%20%3D%20new%20b2DistanceOutput()%3B%0A%09%09%09b2Distance.Distance(output%2C%20simplexCache%2C%20input)%3B%0A%09%09%09return%20output.distance%20%3C%2010.0%20*%20Number.MIN_VALUE%3B%0A%09%09%7D%3B%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Collision.Shapes.b2Shape.e_unknownShape%20%3D%20parseInt((-1))%3B%0A%09%09%09Box2D.Collision.Shapes.b2Shape.e_circleShape%20%3D%200%3B%0A%09%09%09Box2D.Collision.Shapes.b2Shape.e_polygonShape%20%3D%201%3B%0A%09%09%09Box2D.Collision.Shapes.b2Shape.e_edgeShape%20%3D%202%3B%0A%09%09%09Box2D.Collision.Shapes.b2Shape.e_shapeTypeCount%20%3D%203%3B%0A%09%09%09Box2D.Collision.Shapes.b2Shape.e_hitCollide%20%3D%201%3B%0A%09%09%09Box2D.Collision.Shapes.b2Shape.e_missCollide%20%3D%200%3B%0A%09%09%09Box2D.Collision.Shapes.b2Shape.e_startsInsideCollide%20%3D%20parseInt((-1))%3B%0A%09%09%7D)%3B%0A%09%7D))()%3B%0A%09((()%20%3D%3E%20%7B%0A%09%09const%20b2Color%20%3D%20Box2D.Common.b2Color%3B%0A%09%09const%20b2internal%20%3D%20Box2D.Common.b2internal%3B%0A%09%09const%20b2Settings%20%3D%20Box2D.Common.b2Settings%3B%0A%09%09const%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%3B%0A%09%09const%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%3B%0A%09%09const%20b2Math%20%3D%20Box2D.Common.Math.b2Math%3B%0A%09%09const%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%3B%0A%09%09const%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%3B%0A%09%09const%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%3B%0A%09%09const%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%3B%0A%0A%09%09b2Settings.b2Settings%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2Settings.b2MixFriction%20%3D%20(friction1%2C%20friction2)%20%3D%3E%20%7B%0A%09%09%09if%20(friction1%20%3D%3D%3D%20undefined)%20friction1%20%3D%200%3B%0A%09%09%09if%20(friction2%20%3D%3D%3D%20undefined)%20friction2%20%3D%200%3B%0A%09%09%09return%20Math.sqrt(friction1%20*%20friction2)%3B%0A%09%09%7D%3B%0A%09%09b2Settings.b2MixRestitution%20%3D%20(restitution1%2C%20restitution2)%20%3D%3E%20%7B%0A%09%09%09if%20(restitution1%20%3D%3D%3D%20undefined)%20restitution1%20%3D%200%3B%0A%09%09%09if%20(restitution2%20%3D%3D%3D%20undefined)%20restitution2%20%3D%200%3B%0A%09%09%09return%20restitution1%20%3E%20restitution2%20%3F%20restitution1%20%3A%20restitution2%3B%0A%09%09%7D%3B%0A%09%09b2Settings.b2Assert%20%3D%20a%20%3D%3E%20%7B%0A%09%09%09if%20(!a)%20%7B%0A%09%09%09%09throw%20'Assertion%20Failed'%3B%0A%09%09%09%7D%0A%09%09%7D%3B%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Common.b2Settings.VERSION%20%3D%20'2.1alpha'%3B%0A%09%09%09Box2D.Common.b2Settings.USHRT_MAX%20%3D%200x0000ffff%3B%0A%09%09%09Box2D.Common.b2Settings.b2_pi%20%3D%20Math.PI%3B%0A%09%09%09Box2D.Common.b2Settings.b2_maxManifoldPoints%20%3D%202%3B%0A%09%09%09Box2D.Common.b2Settings.b2_aabbExtension%20%3D%200.1%3B%0A%09%09%09Box2D.Common.b2Settings.b2_aabbMultiplier%20%3D%202.0%3B%0A%09%09%09Box2D.Common.b2Settings.b2_polygonRadius%20%3D%202.0%20*%20b2Settings.b2_linearSlop%3B%0A%09%09%09Box2D.Common.b2Settings.b2_linearSlop%20%3D%200.005%3B%0A%09%09%09Box2D.Common.b2Settings.b2_angularSlop%20%3D%202.0%20%2F%20180.0%20*%20b2Settings.b2_pi%3B%0A%09%09%09Box2D.Common.b2Settings.b2_toiSlop%20%3D%208.0%20*%20b2Settings.b2_linearSlop%3B%0A%09%09%09Box2D.Common.b2Settings.b2_maxTOIContactsPerIsland%20%3D%2032%3B%0A%09%09%09Box2D.Common.b2Settings.b2_maxTOIJointsPerIsland%20%3D%2032%3B%0A%09%09%09Box2D.Common.b2Settings.b2_velocityThreshold%20%3D%201.0%3B%0A%09%09%09Box2D.Common.b2Settings.b2_maxLinearCorrection%20%3D%200.2%3B%0A%09%09%09Box2D.Common.b2Settings.b2_maxAngularCorrection%20%3D%208.0%20%2F%20180.0%20*%20b2Settings.b2_pi%3B%0A%09%09%09Box2D.Common.b2Settings.b2_maxTranslation%20%3D%202.0%3B%0A%09%09%09Box2D.Common.b2Settings.b2_maxTranslationSquared%20%3D%20b2Settings.b2_maxTranslation%20*%20b2Settings.b2_maxTranslation%3B%0A%09%09%09Box2D.Common.b2Settings.b2_maxRotation%20%3D%200.5%20*%20b2Settings.b2_pi%3B%0A%09%09%09Box2D.Common.b2Settings.b2_maxRotationSquared%20%3D%20b2Settings.b2_maxRotation%20*%20b2Settings.b2_maxRotation%3B%0A%09%09%09Box2D.Common.b2Settings.b2_contactBaumgarte%20%3D%200.2%3B%0A%09%09%09Box2D.Common.b2Settings.b2_timeToSleep%20%3D%200.5%3B%0A%09%09%09Box2D.Common.b2Settings.b2_linearSleepTolerance%20%3D%200.01%3B%0A%09%09%09Box2D.Common.b2Settings.b2_angularSleepTolerance%20%3D%202.0%20%2F%20180.0%20*%20b2Settings.b2_pi%3B%0A%09%09%7D)%3B%0A%09%7D))()%3B%0A%09((()%20%3D%3E%20%7B%0A%09%09const%20b2AABB%20%3D%20Box2D.Collision.b2AABB%3B%0A%09%09const%20b2Color%20%3D%20Box2D.Common.b2Color%3B%0A%09%09const%20b2internal%20%3D%20Box2D.Common.b2internal%3B%0A%09%09const%20b2Settings%20%3D%20Box2D.Common.b2Settings%3B%0A%09%09const%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%3B%0A%09%09const%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%3B%0A%09%09const%20b2Math%20%3D%20Box2D.Common.Math.b2Math%3B%0A%09%09const%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%3B%0A%09%09const%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%3B%0A%09%09const%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%3B%0A%09%09const%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%3B%0A%0A%09%09b2Mat22.FromAngle%20%3D%20angle%20%3D%3E%20%7B%0A%09%09%09if%20(angle%20%3D%3D%3D%20undefined)%20angle%20%3D%200%3B%0A%09%09%09const%20mat%20%3D%20new%20b2Mat22()%3B%0A%09%09%09mat.Set(angle)%3B%0A%09%09%09return%20mat%3B%0A%09%09%7D%3B%0A%09%09b2Mat22.FromVV%20%3D%20(c1%2C%20c2)%20%3D%3E%20%7B%0A%09%09%09const%20mat%20%3D%20new%20b2Mat22()%3B%0A%09%09%09mat.SetVV(c1%2C%20c2)%3B%0A%09%09%09return%20mat%3B%0A%09%09%7D%3B%0A%09%09b2Math.b2Math%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2Math.IsValid%20%3D%20x%20%3D%3E%20%7B%0A%09%09%09if%20(x%20%3D%3D%3D%20undefined)%20x%20%3D%200%3B%0A%09%09%09return%20isFinite(x)%3B%0A%09%09%7D%3B%0A%09%09b2Math.Dot%20%3D%20(a%2C%20b)%20%3D%3E%20a.x%20*%20b.x%20%2B%20a.y%20*%20b.y%3B%0A%09%09b2Math.CrossVV%20%3D%20(a%2C%20b)%20%3D%3E%20a.x%20*%20b.y%20-%20a.y%20*%20b.x%3B%0A%09%09b2Math.CrossVF%20%3D%20(a%2C%20s)%20%3D%3E%20%7B%0A%09%09%09if%20(s%20%3D%3D%3D%20undefined)%20s%20%3D%200%3B%0A%09%09%09const%20v%20%3D%20new%20b2Vec2(s%20*%20a.y%2C%20(-s%20*%20a.x))%3B%0A%09%09%09return%20v%3B%0A%09%09%7D%3B%0A%09%09b2Math.CrossFV%20%3D%20(s%2C%20a)%20%3D%3E%20%7B%0A%09%09%09if%20(s%20%3D%3D%3D%20undefined)%20s%20%3D%200%3B%0A%09%09%09const%20v%20%3D%20new%20b2Vec2((-s%20*%20a.y)%2C%20s%20*%20a.x)%3B%0A%09%09%09return%20v%3B%0A%09%09%7D%3B%0A%09%09b2Math.MulMV%20%3D%20(A%2C%20v)%20%3D%3E%20%7B%0A%09%09%09const%20u%20%3D%20new%20b2Vec2(A.col1.x%20*%20v.x%20%2B%20A.col2.x%20*%20v.y%2C%20A.col1.y%20*%20v.x%20%2B%20A.col2.y%20*%20v.y)%3B%0A%09%09%09return%20u%3B%0A%09%09%7D%3B%0A%09%09b2Math.MulTMV%20%3D%20(A%2C%20v)%20%3D%3E%20%7B%0A%09%09%09const%20u%20%3D%20new%20b2Vec2(b2Math.Dot(v%2C%20A.col1)%2C%20b2Math.Dot(v%2C%20A.col2))%3B%0A%09%09%09return%20u%3B%0A%09%09%7D%3B%0A%09%09b2Math.MulX%20%3D%20(T%2C%20v)%20%3D%3E%20%7B%0A%09%09%09const%20a%20%3D%20b2Math.MulMV(T.R%2C%20v)%3B%0A%09%09%09a.x%20%2B%3D%20T.position.x%3B%0A%09%09%09a.y%20%2B%3D%20T.position.y%3B%0A%09%09%09return%20a%3B%0A%09%09%7D%3B%0A%09%09b2Math.MulXT%20%3D%20(T%2C%20v)%20%3D%3E%20%7B%0A%09%09%09const%20a%20%3D%20b2Math.SubtractVV(v%2C%20T.position)%3B%0A%09%09%09const%20tX%20%3D%20(a.x%20*%20T.R.col1.x%20%2B%20a.y%20*%20T.R.col1.y)%3B%0A%09%09%09a.y%20%3D%20(a.x%20*%20T.R.col2.x%20%2B%20a.y%20*%20T.R.col2.y)%3B%0A%09%09%09a.x%20%3D%20tX%3B%0A%09%09%09return%20a%3B%0A%09%09%7D%3B%0A%09%09b2Math.AddVV%20%3D%20(a%2C%20b)%20%3D%3E%20%7B%0A%09%09%09const%20v%20%3D%20new%20b2Vec2(a.x%20%2B%20b.x%2C%20a.y%20%2B%20b.y)%3B%0A%09%09%09return%20v%3B%0A%09%09%7D%3B%0A%09%09b2Math.SubtractVV%20%3D%20(a%2C%20b)%20%3D%3E%20%7B%0A%09%09%09const%20v%20%3D%20new%20b2Vec2(a.x%20-%20b.x%2C%20a.y%20-%20b.y)%3B%0A%09%09%09return%20v%3B%0A%09%09%7D%3B%0A%09%09b2Math.Distance%20%3D%20(a%2C%20b)%20%3D%3E%20%7B%0A%09%09%09const%20cX%20%3D%20a.x%20-%20b.x%3B%0A%09%09%09const%20cY%20%3D%20a.y%20-%20b.y%3B%0A%09%09%09return%20Math.sqrt(cX%20*%20cX%20%2B%20cY%20*%20cY)%3B%0A%09%09%7D%3B%0A%09%09b2Math.DistanceSquared%20%3D%20(a%2C%20b)%20%3D%3E%20%7B%0A%09%09%09const%20cX%20%3D%20a.x%20-%20b.x%3B%0A%09%09%09const%20cY%20%3D%20a.y%20-%20b.y%3B%0A%09%09%09return%20(cX%20*%20cX%20%2B%20cY%20*%20cY)%3B%0A%09%09%7D%3B%0A%09%09b2Math.MulFV%20%3D%20(s%2C%20a)%20%3D%3E%20%7B%0A%09%09%09if%20(s%20%3D%3D%3D%20undefined)%20s%20%3D%200%3B%0A%09%09%09const%20v%20%3D%20new%20b2Vec2(s%20*%20a.x%2C%20s%20*%20a.y)%3B%0A%09%09%09return%20v%3B%0A%09%09%7D%3B%0A%09%09b2Math.AddMM%20%3D%20(A%2C%20B)%20%3D%3E%20%7B%0A%09%09%09const%20C%20%3D%20b2Mat22.FromVV(b2Math.AddVV(A.col1%2C%20B.col1)%2C%20b2Math.AddVV(A.col2%2C%20B.col2))%3B%0A%09%09%09return%20C%3B%0A%09%09%7D%3B%0A%09%09b2Math.MulMM%20%3D%20(A%2C%20B)%20%3D%3E%20%7B%0A%09%09%09const%20C%20%3D%20b2Mat22.FromVV(b2Math.MulMV(A%2C%20B.col1)%2C%20b2Math.MulMV(A%2C%20B.col2))%3B%0A%09%09%09return%20C%3B%0A%09%09%7D%3B%0A%09%09b2Math.MulTMM%20%3D%20(A%2C%20B)%20%3D%3E%20%7B%0A%09%09%09const%20c1%20%3D%20new%20b2Vec2(b2Math.Dot(A.col1%2C%20B.col1)%2C%20b2Math.Dot(A.col2%2C%20B.col1))%3B%0A%09%09%09const%20c2%20%3D%20new%20b2Vec2(b2Math.Dot(A.col1%2C%20B.col2)%2C%20b2Math.Dot(A.col2%2C%20B.col2))%3B%0A%09%09%09const%20C%20%3D%20b2Mat22.FromVV(c1%2C%20c2)%3B%0A%09%09%09return%20C%3B%0A%09%09%7D%3B%0A%09%09b2Math.Abs%20%3D%20a%20%3D%3E%20%7B%0A%09%09%09if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%09%09%09return%20a%20%3E%200.0%20%3F%20a%20%3A%20(-a)%3B%0A%09%09%7D%3B%0A%09%09b2Math.AbsV%20%3D%20a%20%3D%3E%20%7B%0A%09%09%09const%20b%20%3D%20new%20b2Vec2(b2Math.Abs(a.x)%2C%20b2Math.Abs(a.y))%3B%0A%09%09%09return%20b%3B%0A%09%09%7D%3B%0A%09%09b2Math.AbsM%20%3D%20A%20%3D%3E%20%7B%0A%09%09%09const%20B%20%3D%20b2Mat22.FromVV(b2Math.AbsV(A.col1)%2C%20b2Math.AbsV(A.col2))%3B%0A%09%09%09return%20B%3B%0A%09%09%7D%3B%0A%09%09b2Math.Min%20%3D%20(a%2C%20b)%20%3D%3E%20%7B%0A%09%09%09if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%09%09%09if%20(b%20%3D%3D%3D%20undefined)%20b%20%3D%200%3B%0A%09%09%09return%20a%20%3C%20b%20%3F%20a%20%3A%20b%3B%0A%09%09%7D%3B%0A%09%09b2Math.MinV%20%3D%20(a%2C%20b)%20%3D%3E%20%7B%0A%09%09%09const%20c%20%3D%20new%20b2Vec2(b2Math.Min(a.x%2C%20b.x)%2C%20b2Math.Min(a.y%2C%20b.y))%3B%0A%09%09%09return%20c%3B%0A%09%09%7D%3B%0A%09%09b2Math.Max%20%3D%20(a%2C%20b)%20%3D%3E%20%7B%0A%09%09%09if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%09%09%09if%20(b%20%3D%3D%3D%20undefined)%20b%20%3D%200%3B%0A%09%09%09return%20a%20%3E%20b%20%3F%20a%20%3A%20b%3B%0A%09%09%7D%3B%0A%09%09b2Math.MaxV%20%3D%20(a%2C%20b)%20%3D%3E%20%7B%0A%09%09%09const%20c%20%3D%20new%20b2Vec2(b2Math.Max(a.x%2C%20b.x)%2C%20b2Math.Max(a.y%2C%20b.y))%3B%0A%09%09%09return%20c%3B%0A%09%09%7D%3B%0A%09%09b2Math.Clamp%20%3D%20(a%2C%20low%2C%20high)%20%3D%3E%20%7B%0A%09%09%09if%20(a%20%3D%3D%3D%20undefined)%20a%20%3D%200%3B%0A%09%09%09if%20(low%20%3D%3D%3D%20undefined)%20low%20%3D%200%3B%0A%09%09%09if%20(high%20%3D%3D%3D%20undefined)%20high%20%3D%200%3B%0A%09%09%09return%20a%20%3C%20low%20%3F%20low%20%3A%20a%20%3E%20high%20%3F%20high%20%3A%20a%3B%0A%09%09%7D%3B%0A%09%09b2Math.ClampV%20%3D%20(a%2C%20low%2C%20high)%20%3D%3E%20b2Math.MaxV(low%2C%20b2Math.MinV(a%2C%20high))%3B%0A%09%09b2Math.Swap%20%3D%20(a%2C%20b)%20%3D%3E%20%7B%0A%09%09%09const%20tmp%20%3D%20a%5B0%5D%3B%0A%09%09%09a%5B0%5D%20%3D%20b%5B0%5D%3B%0A%09%09%09b%5B0%5D%20%3D%20tmp%3B%0A%09%09%7D%3B%0A%09%09b2Math.Random%20%3D%20()%20%3D%3E%20Math.random()%20*%202%20-%201%3B%0A%09%09b2Math.RandomRange%20%3D%20(lo%2C%20hi)%20%3D%3E%20%7B%0A%09%09%09if%20(lo%20%3D%3D%3D%20undefined)%20lo%20%3D%200%3B%0A%09%09%09if%20(hi%20%3D%3D%3D%20undefined)%20hi%20%3D%200%3B%0A%09%09%09let%20r%20%3D%20Math.random()%3B%0A%09%09%09r%20%3D%20(hi%20-%20lo)%20*%20r%20%2B%20lo%3B%0A%09%09%09return%20r%3B%0A%09%09%7D%3B%0A%09%09b2Math.NextPowerOfTwo%20%3D%20x%20%3D%3E%20%7B%0A%09%09%09if%20(x%20%3D%3D%3D%20undefined)%20x%20%3D%200%3B%0A%09%09%09x%20%7C%3D%20(x%20%3E%3E%201)%20%26%200x7FFFFFFF%3B%0A%09%09%09x%20%7C%3D%20(x%20%3E%3E%202)%20%26%200x3FFFFFFF%3B%0A%09%09%09x%20%7C%3D%20(x%20%3E%3E%204)%20%26%200x0FFFFFFF%3B%0A%09%09%09x%20%7C%3D%20(x%20%3E%3E%208)%20%26%200x00FFFFFF%3B%0A%09%09%09x%20%7C%3D%20(x%20%3E%3E%2016)%20%26%200x0000FFFF%3B%0A%09%09%09return%20x%20%2B%201%3B%0A%09%09%7D%3B%0A%09%09b2Math.IsPowerOfTwo%20%3D%20x%20%3D%3E%20%7B%0A%09%09%09if%20(x%20%3D%3D%3D%20undefined)%20x%20%3D%200%3B%0A%09%09%09const%20result%20%3D%20x%20%3E%200%20%26%26%20(x%20%26%20(x%20-%201))%20%3D%3D%200%3B%0A%09%09%09return%20result%3B%0A%09%09%7D%3B%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Common.Math.b2Math.b2Vec2_zero%20%3D%20new%20b2Vec2(0.0%2C%200.0)%3B%0A%09%09%09Box2D.Common.Math.b2Math.b2Mat22_identity%20%3D%20b2Mat22.FromVV(new%20b2Vec2(1.0%2C%200.0)%2C%20new%20b2Vec2(0.0%2C%201.0))%3B%0A%09%09%09Box2D.Common.Math.b2Math.b2Transform_identity%20%3D%20new%20b2Transform(b2Math.b2Vec2_zero%2C%20b2Math.b2Mat22_identity)%3B%0A%09%09%7D)%3B%0A%09%09b2Vec2.b2Vec2%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2Vec2.Make%20%3D%20(x_%2C%20y_)%20%3D%3E%20%7B%0A%09%09%09if%20(x_%20%3D%3D%3D%20undefined)%20x_%20%3D%200%3B%0A%09%09%09if%20(y_%20%3D%3D%3D%20undefined)%20y_%20%3D%200%3B%0A%09%09%09return%20new%20b2Vec2(x_%2C%20y_)%3B%0A%09%09%7D%3B%0A%09%09b2Vec3.b2Vec3%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%7D))()%3B%0A%09((()%20%3D%3E%20%7B%0A%09%09const%20b2ControllerEdge%20%3D%20Box2D.Dynamics.Controllers.b2ControllerEdge%3B%0A%09%09const%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%3B%0A%09%09const%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%3B%0A%09%09const%20b2Math%20%3D%20Box2D.Common.Math.b2Math%3B%0A%09%09const%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%3B%0A%09%09const%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%3B%0A%09%09const%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%3B%0A%09%09const%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%3B%0A%09%09const%20b2Color%20%3D%20Box2D.Common.b2Color%3B%0A%09%09const%20b2internal%20%3D%20Box2D.Common.b2internal%3B%0A%09%09const%20b2Settings%20%3D%20Box2D.Common.b2Settings%3B%0A%09%09const%20b2AABB%20%3D%20Box2D.Collision.b2AABB%3B%0A%09%09const%20b2Bound%20%3D%20Box2D.Collision.b2Bound%3B%0A%09%09const%20b2BoundValues%20%3D%20Box2D.Collision.b2BoundValues%3B%0A%09%09const%20b2Collision%20%3D%20Box2D.Collision.b2Collision%3B%0A%09%09const%20b2ContactID%20%3D%20Box2D.Collision.b2ContactID%3B%0A%09%09const%20b2ContactPoint%20%3D%20Box2D.Collision.b2ContactPoint%3B%0A%09%09const%20b2Distance%20%3D%20Box2D.Collision.b2Distance%3B%0A%09%09const%20b2DistanceInput%20%3D%20Box2D.Collision.b2DistanceInput%3B%0A%09%09const%20b2DistanceOutput%20%3D%20Box2D.Collision.b2DistanceOutput%3B%0A%09%09const%20b2DistanceProxy%20%3D%20Box2D.Collision.b2DistanceProxy%3B%0A%09%09const%20b2DynamicTree%20%3D%20Box2D.Collision.b2DynamicTree%3B%0A%09%09const%20b2DynamicTreeBroadPhase%20%3D%20Box2D.Collision.b2DynamicTreeBroadPhase%3B%0A%09%09const%20b2DynamicTreeNode%20%3D%20Box2D.Collision.b2DynamicTreeNode%3B%0A%09%09const%20b2DynamicTreePair%20%3D%20Box2D.Collision.b2DynamicTreePair%3B%0A%09%09const%20b2Manifold%20%3D%20Box2D.Collision.b2Manifold%3B%0A%09%09const%20b2ManifoldPoint%20%3D%20Box2D.Collision.b2ManifoldPoint%3B%0A%09%09const%20b2Point%20%3D%20Box2D.Collision.b2Point%3B%0A%09%09const%20b2RayCastInput%20%3D%20Box2D.Collision.b2RayCastInput%3B%0A%09%09const%20b2RayCastOutput%20%3D%20Box2D.Collision.b2RayCastOutput%3B%0A%09%09const%20b2Segment%20%3D%20Box2D.Collision.b2Segment%3B%0A%09%09const%20b2SeparationFunction%20%3D%20Box2D.Collision.b2SeparationFunction%3B%0A%09%09const%20b2Simplex%20%3D%20Box2D.Collision.b2Simplex%3B%0A%09%09const%20b2SimplexCache%20%3D%20Box2D.Collision.b2SimplexCache%3B%0A%09%09const%20b2SimplexVertex%20%3D%20Box2D.Collision.b2SimplexVertex%3B%0A%09%09const%20b2TimeOfImpact%20%3D%20Box2D.Collision.b2TimeOfImpact%3B%0A%09%09const%20b2TOIInput%20%3D%20Box2D.Collision.b2TOIInput%3B%0A%09%09const%20b2WorldManifold%20%3D%20Box2D.Collision.b2WorldManifold%3B%0A%09%09const%20ClipVertex%20%3D%20Box2D.Collision.ClipVertex%3B%0A%09%09const%20Features%20%3D%20Box2D.Collision.Features%3B%0A%09%09const%20IBroadPhase%20%3D%20Box2D.Collision.IBroadPhase%3B%0A%09%09const%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%3B%0A%09%09const%20b2EdgeChainDef%20%3D%20Box2D.Collision.Shapes.b2EdgeChainDef%3B%0A%09%09const%20b2EdgeShape%20%3D%20Box2D.Collision.Shapes.b2EdgeShape%3B%0A%09%09const%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%3B%0A%09%09const%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%3B%0A%09%09const%20b2Shape%20%3D%20Box2D.Collision.Shapes.b2Shape%3B%0A%09%09const%20b2Body%20%3D%20Box2D.Dynamics.b2Body%3B%0A%09%09const%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%3B%0A%09%09const%20b2ContactFilter%20%3D%20Box2D.Dynamics.b2ContactFilter%3B%0A%09%09const%20b2ContactImpulse%20%3D%20Box2D.Dynamics.b2ContactImpulse%3B%0A%09%09const%20b2ContactListener%20%3D%20Box2D.Dynamics.b2ContactListener%3B%0A%09%09const%20b2ContactManager%20%3D%20Box2D.Dynamics.b2ContactManager%3B%0A%09%09const%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%3B%0A%09%09const%20b2DestructionListener%20%3D%20Box2D.Dynamics.b2DestructionListener%3B%0A%09%09const%20b2FilterData%20%3D%20Box2D.Dynamics.b2FilterData%3B%0A%09%09const%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%3B%0A%09%09const%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%3B%0A%09%09const%20b2Island%20%3D%20Box2D.Dynamics.b2Island%3B%0A%09%09const%20b2TimeStep%20%3D%20Box2D.Dynamics.b2TimeStep%3B%0A%09%09const%20b2World%20%3D%20Box2D.Dynamics.b2World%3B%0A%09%09const%20b2CircleContact%20%3D%20Box2D.Dynamics.Contacts.b2CircleContact%3B%0A%09%09const%20b2Contact%20%3D%20Box2D.Dynamics.Contacts.b2Contact%3B%0A%09%09const%20b2ContactConstraint%20%3D%20Box2D.Dynamics.Contacts.b2ContactConstraint%3B%0A%09%09const%20b2ContactConstraintPoint%20%3D%20Box2D.Dynamics.Contacts.b2ContactConstraintPoint%3B%0A%09%09const%20b2ContactEdge%20%3D%20Box2D.Dynamics.Contacts.b2ContactEdge%3B%0A%09%09const%20b2ContactFactory%20%3D%20Box2D.Dynamics.Contacts.b2ContactFactory%3B%0A%09%09const%20b2ContactRegister%20%3D%20Box2D.Dynamics.Contacts.b2ContactRegister%3B%0A%09%09const%20b2ContactResult%20%3D%20Box2D.Dynamics.Contacts.b2ContactResult%3B%0A%09%09const%20b2ContactSolver%20%3D%20Box2D.Dynamics.Contacts.b2ContactSolver%3B%0A%09%09const%20b2EdgeAndCircleContact%20%3D%20Box2D.Dynamics.Contacts.b2EdgeAndCircleContact%3B%0A%09%09const%20b2NullContact%20%3D%20Box2D.Dynamics.Contacts.b2NullContact%3B%0A%09%09const%20b2PolyAndCircleContact%20%3D%20Box2D.Dynamics.Contacts.b2PolyAndCircleContact%3B%0A%09%09const%20b2PolyAndEdgeContact%20%3D%20Box2D.Dynamics.Contacts.b2PolyAndEdgeContact%3B%0A%09%09const%20b2PolygonContact%20%3D%20Box2D.Dynamics.Contacts.b2PolygonContact%3B%0A%09%09const%20b2PositionSolverManifold%20%3D%20Box2D.Dynamics.Contacts.b2PositionSolverManifold%3B%0A%09%09const%20b2Controller%20%3D%20Box2D.Dynamics.Controllers.b2Controller%3B%0A%09%09const%20b2DistanceJoint%20%3D%20Box2D.Dynamics.Joints.b2DistanceJoint%3B%0A%09%09const%20b2DistanceJointDef%20%3D%20Box2D.Dynamics.Joints.b2DistanceJointDef%3B%0A%09%09const%20b2FrictionJoint%20%3D%20Box2D.Dynamics.Joints.b2FrictionJoint%3B%0A%09%09const%20b2FrictionJointDef%20%3D%20Box2D.Dynamics.Joints.b2FrictionJointDef%3B%0A%09%09const%20b2GearJoint%20%3D%20Box2D.Dynamics.Joints.b2GearJoint%3B%0A%09%09const%20b2GearJointDef%20%3D%20Box2D.Dynamics.Joints.b2GearJointDef%3B%0A%09%09const%20b2Jacobian%20%3D%20Box2D.Dynamics.Joints.b2Jacobian%3B%0A%09%09const%20b2Joint%20%3D%20Box2D.Dynamics.Joints.b2Joint%3B%0A%09%09const%20b2JointDef%20%3D%20Box2D.Dynamics.Joints.b2JointDef%3B%0A%09%09const%20b2JointEdge%20%3D%20Box2D.Dynamics.Joints.b2JointEdge%3B%0A%09%09const%20b2LineJoint%20%3D%20Box2D.Dynamics.Joints.b2LineJoint%3B%0A%09%09const%20b2LineJointDef%20%3D%20Box2D.Dynamics.Joints.b2LineJointDef%3B%0A%09%09const%20b2MouseJoint%20%3D%20Box2D.Dynamics.Joints.b2MouseJoint%3B%0A%09%09const%20b2MouseJointDef%20%3D%20Box2D.Dynamics.Joints.b2MouseJointDef%3B%0A%09%09const%20b2PrismaticJoint%20%3D%20Box2D.Dynamics.Joints.b2PrismaticJoint%3B%0A%09%09const%20b2PrismaticJointDef%20%3D%20Box2D.Dynamics.Joints.b2PrismaticJointDef%3B%0A%09%09const%20b2PulleyJoint%20%3D%20Box2D.Dynamics.Joints.b2PulleyJoint%3B%0A%09%09const%20b2PulleyJointDef%20%3D%20Box2D.Dynamics.Joints.b2PulleyJointDef%3B%0A%09%09const%20b2RevoluteJoint%20%3D%20Box2D.Dynamics.Joints.b2RevoluteJoint%3B%0A%09%09const%20b2RevoluteJointDef%20%3D%20Box2D.Dynamics.Joints.b2RevoluteJointDef%3B%0A%09%09const%20b2WeldJoint%20%3D%20Box2D.Dynamics.Joints.b2WeldJoint%3B%0A%09%09const%20b2WeldJointDef%20%3D%20Box2D.Dynamics.Joints.b2WeldJointDef%3B%0A%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Dynamics.b2Body.s_xf1%20%3D%20new%20b2Transform()%3B%0A%09%09%09Box2D.Dynamics.b2Body.e_islandFlag%20%3D%200x0001%3B%0A%09%09%09Box2D.Dynamics.b2Body.e_awakeFlag%20%3D%200x0002%3B%0A%09%09%09Box2D.Dynamics.b2Body.e_allowSleepFlag%20%3D%200x0004%3B%0A%09%09%09Box2D.Dynamics.b2Body.e_bulletFlag%20%3D%200x0008%3B%0A%09%09%09Box2D.Dynamics.b2Body.e_fixedRotationFlag%20%3D%200x0010%3B%0A%09%09%09Box2D.Dynamics.b2Body.e_activeFlag%20%3D%200x0020%3B%0A%09%09%09Box2D.Dynamics.b2Body.b2_staticBody%20%3D%200%3B%0A%09%09%09Box2D.Dynamics.b2Body.b2_kinematicBody%20%3D%201%3B%0A%09%09%09Box2D.Dynamics.b2Body.b2_dynamicBody%20%3D%202%3B%0A%09%09%7D)%3B%0A%09%09b2ContactFilter.b2ContactFilter%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Dynamics.b2ContactFilter.b2_defaultFilter%20%3D%20new%20b2ContactFilter()%3B%0A%09%09%7D)%3B%0A%09%09b2ContactListener.b2ContactListener%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Dynamics.b2ContactListener.b2_defaultListener%20%3D%20new%20b2ContactListener()%3B%0A%09%09%7D)%3B%0A%09%09b2ContactManager.b2ContactManager%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Dynamics.b2ContactManager.s_evalCP%20%3D%20new%20b2ContactPoint()%3B%0A%09%09%7D)%3B%0A%09%09b2DebugDraw.b2DebugDraw%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Dynamics.b2DebugDraw.e_shapeBit%20%3D%200x0001%3B%0A%09%09%09Box2D.Dynamics.b2DebugDraw.e_jointBit%20%3D%200x0002%3B%0A%09%09%09Box2D.Dynamics.b2DebugDraw.e_aabbBit%20%3D%200x0004%3B%0A%09%09%09Box2D.Dynamics.b2DebugDraw.e_pairBit%20%3D%200x0008%3B%0A%09%09%09Box2D.Dynamics.b2DebugDraw.e_centerOfMassBit%20%3D%200x0010%3B%0A%09%09%09Box2D.Dynamics.b2DebugDraw.e_controllerBit%20%3D%200x0020%3B%0A%09%09%7D)%3B%0A%09%09b2DestructionListener.b2DestructionListener%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2Island.b2Island%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Dynamics.b2Island.s_impulse%20%3D%20new%20b2ContactImpulse()%3B%0A%09%09%7D)%3B%0A%09%09b2TimeStep.b2TimeStep%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Dynamics.b2World.s_timestep2%20%3D%20new%20b2TimeStep()%3B%0A%09%09%09Box2D.Dynamics.b2World.s_xf%20%3D%20new%20b2Transform()%3B%0A%09%09%09Box2D.Dynamics.b2World.s_backupA%20%3D%20new%20b2Sweep()%3B%0A%09%09%09Box2D.Dynamics.b2World.s_backupB%20%3D%20new%20b2Sweep()%3B%0A%09%09%09Box2D.Dynamics.b2World.s_timestep%20%3D%20new%20b2TimeStep()%3B%0A%09%09%09Box2D.Dynamics.b2World.s_queue%20%3D%20new%20Vector()%3B%0A%09%09%09Box2D.Dynamics.b2World.s_jointColor%20%3D%20new%20b2Color(0.5%2C%200.8%2C%200.8)%3B%0A%09%09%09Box2D.Dynamics.b2World.e_newFixture%20%3D%200x0001%3B%0A%09%09%09Box2D.Dynamics.b2World.e_locked%20%3D%200x0002%3B%0A%09%09%7D)%3B%0A%09%7D))()%3B%0A%09((()%20%3D%3E%20%7B%0A%09%09const%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%3B%0A%09%09const%20b2EdgeChainDef%20%3D%20Box2D.Collision.Shapes.b2EdgeChainDef%3B%0A%09%09const%20b2EdgeShape%20%3D%20Box2D.Collision.Shapes.b2EdgeShape%3B%0A%09%09const%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%3B%0A%09%09const%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%3B%0A%09%09const%20b2Shape%20%3D%20Box2D.Collision.Shapes.b2Shape%3B%0A%09%09const%20b2CircleContact%20%3D%20Box2D.Dynamics.Contacts.b2CircleContact%3B%0A%09%09const%20b2Contact%20%3D%20Box2D.Dynamics.Contacts.b2Contact%3B%0A%09%09const%20b2ContactConstraint%20%3D%20Box2D.Dynamics.Contacts.b2ContactConstraint%3B%0A%09%09const%20b2ContactConstraintPoint%20%3D%20Box2D.Dynamics.Contacts.b2ContactConstraintPoint%3B%0A%09%09const%20b2ContactEdge%20%3D%20Box2D.Dynamics.Contacts.b2ContactEdge%3B%0A%09%09const%20b2ContactFactory%20%3D%20Box2D.Dynamics.Contacts.b2ContactFactory%3B%0A%09%09const%20b2ContactRegister%20%3D%20Box2D.Dynamics.Contacts.b2ContactRegister%3B%0A%09%09const%20b2ContactResult%20%3D%20Box2D.Dynamics.Contacts.b2ContactResult%3B%0A%09%09const%20b2ContactSolver%20%3D%20Box2D.Dynamics.Contacts.b2ContactSolver%3B%0A%09%09const%20b2EdgeAndCircleContact%20%3D%20Box2D.Dynamics.Contacts.b2EdgeAndCircleContact%3B%0A%09%09const%20b2NullContact%20%3D%20Box2D.Dynamics.Contacts.b2NullContact%3B%0A%09%09const%20b2PolyAndCircleContact%20%3D%20Box2D.Dynamics.Contacts.b2PolyAndCircleContact%3B%0A%09%09const%20b2PolyAndEdgeContact%20%3D%20Box2D.Dynamics.Contacts.b2PolyAndEdgeContact%3B%0A%09%09const%20b2PolygonContact%20%3D%20Box2D.Dynamics.Contacts.b2PolygonContact%3B%0A%09%09const%20b2PositionSolverManifold%20%3D%20Box2D.Dynamics.Contacts.b2PositionSolverManifold%3B%0A%09%09const%20b2Body%20%3D%20Box2D.Dynamics.b2Body%3B%0A%09%09const%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%3B%0A%09%09const%20b2ContactFilter%20%3D%20Box2D.Dynamics.b2ContactFilter%3B%0A%09%09const%20b2ContactImpulse%20%3D%20Box2D.Dynamics.b2ContactImpulse%3B%0A%09%09const%20b2ContactListener%20%3D%20Box2D.Dynamics.b2ContactListener%3B%0A%09%09const%20b2ContactManager%20%3D%20Box2D.Dynamics.b2ContactManager%3B%0A%09%09const%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%3B%0A%09%09const%20b2DestructionListener%20%3D%20Box2D.Dynamics.b2DestructionListener%3B%0A%09%09const%20b2FilterData%20%3D%20Box2D.Dynamics.b2FilterData%3B%0A%09%09const%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%3B%0A%09%09const%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%3B%0A%09%09const%20b2Island%20%3D%20Box2D.Dynamics.b2Island%3B%0A%09%09const%20b2TimeStep%20%3D%20Box2D.Dynamics.b2TimeStep%3B%0A%09%09const%20b2World%20%3D%20Box2D.Dynamics.b2World%3B%0A%09%09const%20b2Color%20%3D%20Box2D.Common.b2Color%3B%0A%09%09const%20b2internal%20%3D%20Box2D.Common.b2internal%3B%0A%09%09const%20b2Settings%20%3D%20Box2D.Common.b2Settings%3B%0A%09%09const%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%3B%0A%09%09const%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%3B%0A%09%09const%20b2Math%20%3D%20Box2D.Common.Math.b2Math%3B%0A%09%09const%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%3B%0A%09%09const%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%3B%0A%09%09const%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%3B%0A%09%09const%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%3B%0A%09%09const%20b2AABB%20%3D%20Box2D.Collision.b2AABB%3B%0A%09%09const%20b2Bound%20%3D%20Box2D.Collision.b2Bound%3B%0A%09%09const%20b2BoundValues%20%3D%20Box2D.Collision.b2BoundValues%3B%0A%09%09const%20b2Collision%20%3D%20Box2D.Collision.b2Collision%3B%0A%09%09const%20b2ContactID%20%3D%20Box2D.Collision.b2ContactID%3B%0A%09%09const%20b2ContactPoint%20%3D%20Box2D.Collision.b2ContactPoint%3B%0A%09%09const%20b2Distance%20%3D%20Box2D.Collision.b2Distance%3B%0A%09%09const%20b2DistanceInput%20%3D%20Box2D.Collision.b2DistanceInput%3B%0A%09%09const%20b2DistanceOutput%20%3D%20Box2D.Collision.b2DistanceOutput%3B%0A%09%09const%20b2DistanceProxy%20%3D%20Box2D.Collision.b2DistanceProxy%3B%0A%09%09const%20b2DynamicTree%20%3D%20Box2D.Collision.b2DynamicTree%3B%0A%09%09const%20b2DynamicTreeBroadPhase%20%3D%20Box2D.Collision.b2DynamicTreeBroadPhase%3B%0A%09%09const%20b2DynamicTreeNode%20%3D%20Box2D.Collision.b2DynamicTreeNode%3B%0A%09%09const%20b2DynamicTreePair%20%3D%20Box2D.Collision.b2DynamicTreePair%3B%0A%09%09const%20b2Manifold%20%3D%20Box2D.Collision.b2Manifold%3B%0A%09%09const%20b2ManifoldPoint%20%3D%20Box2D.Collision.b2ManifoldPoint%3B%0A%09%09const%20b2Point%20%3D%20Box2D.Collision.b2Point%3B%0A%09%09const%20b2RayCastInput%20%3D%20Box2D.Collision.b2RayCastInput%3B%0A%09%09const%20b2RayCastOutput%20%3D%20Box2D.Collision.b2RayCastOutput%3B%0A%09%09const%20b2Segment%20%3D%20Box2D.Collision.b2Segment%3B%0A%09%09const%20b2SeparationFunction%20%3D%20Box2D.Collision.b2SeparationFunction%3B%0A%09%09const%20b2Simplex%20%3D%20Box2D.Collision.b2Simplex%3B%0A%09%09const%20b2SimplexCache%20%3D%20Box2D.Collision.b2SimplexCache%3B%0A%09%09const%20b2SimplexVertex%20%3D%20Box2D.Collision.b2SimplexVertex%3B%0A%09%09const%20b2TimeOfImpact%20%3D%20Box2D.Collision.b2TimeOfImpact%3B%0A%09%09const%20b2TOIInput%20%3D%20Box2D.Collision.b2TOIInput%3B%0A%09%09const%20b2WorldManifold%20%3D%20Box2D.Collision.b2WorldManifold%3B%0A%09%09const%20ClipVertex%20%3D%20Box2D.Collision.ClipVertex%3B%0A%09%09const%20Features%20%3D%20Box2D.Collision.Features%3B%0A%09%09const%20IBroadPhase%20%3D%20Box2D.Collision.IBroadPhase%3B%0A%0A%09%09b2CircleContact.prototype.__super%20%3D%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%09%09b2CircleContact.Create%20%3D%20allocator%20%3D%3E%20new%20b2CircleContact()%3B%0A%09%09b2CircleContact.Destroy%20%3D%20(contact%2C%20allocator)%20%3D%3E%20%7B%20%7D%3B%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Dynamics.Contacts.b2Contact.e_sensorFlag%20%3D%200x0001%3B%0A%09%09%09Box2D.Dynamics.Contacts.b2Contact.e_continuousFlag%20%3D%200x0002%3B%0A%09%09%09Box2D.Dynamics.Contacts.b2Contact.e_islandFlag%20%3D%200x0004%3B%0A%09%09%09Box2D.Dynamics.Contacts.b2Contact.e_toiFlag%20%3D%200x0008%3B%0A%09%09%09Box2D.Dynamics.Contacts.b2Contact.e_touchingFlag%20%3D%200x0010%3B%0A%09%09%09Box2D.Dynamics.Contacts.b2Contact.e_enabledFlag%20%3D%200x0020%3B%0A%09%09%09Box2D.Dynamics.Contacts.b2Contact.e_filterFlag%20%3D%200x0040%3B%0A%09%09%09Box2D.Dynamics.Contacts.b2Contact.s_input%20%3D%20new%20b2TOIInput()%3B%0A%09%09%7D)%3B%0A%09%09b2ContactEdge.b2ContactEdge%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2ContactFactory.b2ContactFactory%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2ContactRegister.b2ContactRegister%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Dynamics.Contacts.b2ContactSolver.s_worldManifold%20%3D%20new%20b2WorldManifold()%3B%0A%09%09%09Box2D.Dynamics.Contacts.b2ContactSolver.s_psm%20%3D%20new%20b2PositionSolverManifold()%3B%0A%09%09%7D)%3B%0A%09%09b2EdgeAndCircleContact.prototype.__super%20%3D%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%09%09b2EdgeAndCircleContact.Create%20%3D%20allocator%20%3D%3E%20new%20b2EdgeAndCircleContact()%3B%0A%09%09b2EdgeAndCircleContact.Destroy%20%3D%20(contact%2C%20allocator)%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2NullContact.prototype.__super%20%3D%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%09%09b2PolyAndCircleContact.prototype.__super%20%3D%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%09%09b2PolyAndCircleContact.Create%20%3D%20allocator%20%3D%3E%20new%20b2PolyAndCircleContact()%3B%0A%09%09b2PolyAndCircleContact.Destroy%20%3D%20(contact%2C%20allocator)%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2PolyAndEdgeContact.prototype.__super%20%3D%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%09%09b2PolyAndEdgeContact.Create%20%3D%20allocator%20%3D%3E%20new%20b2PolyAndEdgeContact()%3B%0A%09%09b2PolyAndEdgeContact.Destroy%20%3D%20(contact%2C%20allocator)%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2PolygonContact.prototype.__super%20%3D%20Box2D.Dynamics.Contacts.b2Contact.prototype%3B%0A%09%09b2PolygonContact.Create%20%3D%20allocator%20%3D%3E%20new%20b2PolygonContact()%3B%0A%09%09b2PolygonContact.Destroy%20%3D%20(contact%2C%20allocator)%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2PositionSolverManifold.b2PositionSolverManifold%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Dynamics.Contacts.b2PositionSolverManifold.circlePointA%20%3D%20new%20b2Vec2()%3B%0A%09%09%09Box2D.Dynamics.Contacts.b2PositionSolverManifold.circlePointB%20%3D%20new%20b2Vec2()%3B%0A%09%09%7D)%3B%0A%09%7D))()%3B%0A%09((()%20%3D%3E%20%7B%0A%09%09const%20b2Body%20%3D%20Box2D.Dynamics.b2Body%3B%0A%09%09const%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%3B%0A%09%09const%20b2ContactFilter%20%3D%20Box2D.Dynamics.b2ContactFilter%3B%0A%09%09const%20b2ContactImpulse%20%3D%20Box2D.Dynamics.b2ContactImpulse%3B%0A%09%09const%20b2ContactListener%20%3D%20Box2D.Dynamics.b2ContactListener%3B%0A%09%09const%20b2ContactManager%20%3D%20Box2D.Dynamics.b2ContactManager%3B%0A%09%09const%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%3B%0A%09%09const%20b2DestructionListener%20%3D%20Box2D.Dynamics.b2DestructionListener%3B%0A%09%09const%20b2FilterData%20%3D%20Box2D.Dynamics.b2FilterData%3B%0A%09%09const%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%3B%0A%09%09const%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%3B%0A%09%09const%20b2Island%20%3D%20Box2D.Dynamics.b2Island%3B%0A%09%09const%20b2TimeStep%20%3D%20Box2D.Dynamics.b2TimeStep%3B%0A%09%09const%20b2World%20%3D%20Box2D.Dynamics.b2World%3B%0A%09%09const%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%3B%0A%09%09const%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%3B%0A%09%09const%20b2Math%20%3D%20Box2D.Common.Math.b2Math%3B%0A%09%09const%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%3B%0A%09%09const%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%3B%0A%09%09const%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%3B%0A%09%09const%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%3B%0A%09%09const%20b2Color%20%3D%20Box2D.Common.b2Color%3B%0A%09%09const%20b2internal%20%3D%20Box2D.Common.b2internal%3B%0A%09%09const%20b2Settings%20%3D%20Box2D.Common.b2Settings%3B%0A%09%09const%20b2CircleShape%20%3D%20Box2D.Collision.Shapes.b2CircleShape%3B%0A%09%09const%20b2EdgeChainDef%20%3D%20Box2D.Collision.Shapes.b2EdgeChainDef%3B%0A%09%09const%20b2EdgeShape%20%3D%20Box2D.Collision.Shapes.b2EdgeShape%3B%0A%09%09const%20b2MassData%20%3D%20Box2D.Collision.Shapes.b2MassData%3B%0A%09%09const%20b2PolygonShape%20%3D%20Box2D.Collision.Shapes.b2PolygonShape%3B%0A%09%09const%20b2Shape%20%3D%20Box2D.Collision.Shapes.b2Shape%3B%0A%09%09const%20b2BuoyancyController%20%3D%20Box2D.Dynamics.Controllers.b2BuoyancyController%3B%0A%09%09const%20b2ConstantAccelController%20%3D%20Box2D.Dynamics.Controllers.b2ConstantAccelController%3B%0A%09%09const%20b2ConstantForceController%20%3D%20Box2D.Dynamics.Controllers.b2ConstantForceController%3B%0A%09%09const%20b2Controller%20%3D%20Box2D.Dynamics.Controllers.b2Controller%3B%0A%09%09const%20b2ControllerEdge%20%3D%20Box2D.Dynamics.Controllers.b2ControllerEdge%3B%0A%09%09const%20b2GravityController%20%3D%20Box2D.Dynamics.Controllers.b2GravityController%3B%0A%09%09const%20b2TensorDampingController%20%3D%20Box2D.Dynamics.Controllers.b2TensorDampingController%3B%0A%0A%09%09b2BuoyancyController.prototype.__super%20%3D%20Box2D.Dynamics.Controllers.b2Controller.prototype%3B%0A%09%09b2ConstantAccelController.prototype.__super%20%3D%20Box2D.Dynamics.Controllers.b2Controller.prototype%3B%0A%09%09b2ConstantForceController.prototype.__super%20%3D%20Box2D.Dynamics.Controllers.b2Controller.prototype%3B%0A%09%09b2Controller.b2Controller%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2ControllerEdge.b2ControllerEdge%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2GravityController.prototype.__super%20%3D%20Box2D.Dynamics.Controllers.b2Controller.prototype%3B%0A%09%09b2TensorDampingController.prototype.__super%20%3D%20Box2D.Dynamics.Controllers.b2Controller.prototype%3B%0A%09%7D))()%3B%0A%09((()%20%3D%3E%20%7B%0A%09%09const%20b2Color%20%3D%20Box2D.Common.b2Color%3B%0A%09%09const%20b2internal%20%3D%20Box2D.Common.b2internal%3B%0A%09%09const%20b2Settings%20%3D%20Box2D.Common.b2Settings%3B%0A%09%09const%20b2Mat22%20%3D%20Box2D.Common.Math.b2Mat22%3B%0A%09%09const%20b2Mat33%20%3D%20Box2D.Common.Math.b2Mat33%3B%0A%09%09const%20b2Math%20%3D%20Box2D.Common.Math.b2Math%3B%0A%09%09const%20b2Sweep%20%3D%20Box2D.Common.Math.b2Sweep%3B%0A%09%09const%20b2Transform%20%3D%20Box2D.Common.Math.b2Transform%3B%0A%09%09const%20b2Vec2%20%3D%20Box2D.Common.Math.b2Vec2%3B%0A%09%09const%20b2Vec3%20%3D%20Box2D.Common.Math.b2Vec3%3B%0A%09%09const%20b2DistanceJoint%20%3D%20Box2D.Dynamics.Joints.b2DistanceJoint%3B%0A%09%09const%20b2DistanceJointDef%20%3D%20Box2D.Dynamics.Joints.b2DistanceJointDef%3B%0A%09%09const%20b2FrictionJoint%20%3D%20Box2D.Dynamics.Joints.b2FrictionJoint%3B%0A%09%09const%20b2FrictionJointDef%20%3D%20Box2D.Dynamics.Joints.b2FrictionJointDef%3B%0A%09%09const%20b2GearJoint%20%3D%20Box2D.Dynamics.Joints.b2GearJoint%3B%0A%09%09const%20b2GearJointDef%20%3D%20Box2D.Dynamics.Joints.b2GearJointDef%3B%0A%09%09const%20b2Jacobian%20%3D%20Box2D.Dynamics.Joints.b2Jacobian%3B%0A%09%09const%20b2Joint%20%3D%20Box2D.Dynamics.Joints.b2Joint%3B%0A%09%09const%20b2JointDef%20%3D%20Box2D.Dynamics.Joints.b2JointDef%3B%0A%09%09const%20b2JointEdge%20%3D%20Box2D.Dynamics.Joints.b2JointEdge%3B%0A%09%09const%20b2LineJoint%20%3D%20Box2D.Dynamics.Joints.b2LineJoint%3B%0A%09%09const%20b2LineJointDef%20%3D%20Box2D.Dynamics.Joints.b2LineJointDef%3B%0A%09%09const%20b2MouseJoint%20%3D%20Box2D.Dynamics.Joints.b2MouseJoint%3B%0A%09%09const%20b2MouseJointDef%20%3D%20Box2D.Dynamics.Joints.b2MouseJointDef%3B%0A%09%09const%20b2PrismaticJoint%20%3D%20Box2D.Dynamics.Joints.b2PrismaticJoint%3B%0A%09%09const%20b2PrismaticJointDef%20%3D%20Box2D.Dynamics.Joints.b2PrismaticJointDef%3B%0A%09%09const%20b2PulleyJoint%20%3D%20Box2D.Dynamics.Joints.b2PulleyJoint%3B%0A%09%09const%20b2PulleyJointDef%20%3D%20Box2D.Dynamics.Joints.b2PulleyJointDef%3B%0A%09%09const%20b2RevoluteJoint%20%3D%20Box2D.Dynamics.Joints.b2RevoluteJoint%3B%0A%09%09const%20b2RevoluteJointDef%20%3D%20Box2D.Dynamics.Joints.b2RevoluteJointDef%3B%0A%09%09const%20b2WeldJoint%20%3D%20Box2D.Dynamics.Joints.b2WeldJoint%3B%0A%09%09const%20b2WeldJointDef%20%3D%20Box2D.Dynamics.Joints.b2WeldJointDef%3B%0A%09%09const%20b2Body%20%3D%20Box2D.Dynamics.b2Body%3B%0A%09%09const%20b2BodyDef%20%3D%20Box2D.Dynamics.b2BodyDef%3B%0A%09%09const%20b2ContactFilter%20%3D%20Box2D.Dynamics.b2ContactFilter%3B%0A%09%09const%20b2ContactImpulse%20%3D%20Box2D.Dynamics.b2ContactImpulse%3B%0A%09%09const%20b2ContactListener%20%3D%20Box2D.Dynamics.b2ContactListener%3B%0A%09%09const%20b2ContactManager%20%3D%20Box2D.Dynamics.b2ContactManager%3B%0A%09%09const%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%3B%0A%09%09const%20b2DestructionListener%20%3D%20Box2D.Dynamics.b2DestructionListener%3B%0A%09%09const%20b2FilterData%20%3D%20Box2D.Dynamics.b2FilterData%3B%0A%09%09const%20b2Fixture%20%3D%20Box2D.Dynamics.b2Fixture%3B%0A%09%09const%20b2FixtureDef%20%3D%20Box2D.Dynamics.b2FixtureDef%3B%0A%09%09const%20b2Island%20%3D%20Box2D.Dynamics.b2Island%3B%0A%09%09const%20b2TimeStep%20%3D%20Box2D.Dynamics.b2TimeStep%3B%0A%09%09const%20b2World%20%3D%20Box2D.Dynamics.b2World%3B%0A%0A%09%09b2DistanceJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%09%09b2DistanceJointDef.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%09%09b2FrictionJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%09%09b2FrictionJointDef.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%09%09b2GearJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%09%09b2GearJointDef.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%09%09b2Joint.Create%20%3D%20(def%2C%20allocator)%20%3D%3E%20%7B%0A%09%09%09let%20joint%20%3D%20null%3B%0A%09%09%09switch%20(def.type)%20%7B%0A%09%09%09%09case%20b2Joint.e_distanceJoint%3A%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09joint%20%3D%20new%20b2DistanceJoint((def%20instanceof%20b2DistanceJointDef%20%3F%20def%20%3A%20null))%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20b2Joint.e_mouseJoint%3A%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09joint%20%3D%20new%20b2MouseJoint((def%20instanceof%20b2MouseJointDef%20%3F%20def%20%3A%20null))%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20b2Joint.e_prismaticJoint%3A%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09joint%20%3D%20new%20b2PrismaticJoint((def%20instanceof%20b2PrismaticJointDef%20%3F%20def%20%3A%20null))%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20b2Joint.e_revoluteJoint%3A%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09joint%20%3D%20new%20b2RevoluteJoint((def%20instanceof%20b2RevoluteJointDef%20%3F%20def%20%3A%20null))%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20b2Joint.e_pulleyJoint%3A%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09joint%20%3D%20new%20b2PulleyJoint((def%20instanceof%20b2PulleyJointDef%20%3F%20def%20%3A%20null))%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20b2Joint.e_gearJoint%3A%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09joint%20%3D%20new%20b2GearJoint((def%20instanceof%20b2GearJointDef%20%3F%20def%20%3A%20null))%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20b2Joint.e_lineJoint%3A%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09joint%20%3D%20new%20b2LineJoint((def%20instanceof%20b2LineJointDef%20%3F%20def%20%3A%20null))%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20b2Joint.e_weldJoint%3A%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09joint%20%3D%20new%20b2WeldJoint((def%20instanceof%20b2WeldJointDef%20%3F%20def%20%3A%20null))%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09break%3B%0A%09%09%09%09case%20b2Joint.e_frictionJoint%3A%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09joint%20%3D%20new%20b2FrictionJoint((def%20instanceof%20b2FrictionJointDef%20%3F%20def%20%3A%20null))%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09break%3B%0A%09%09%09%09default%3A%0A%09%09%09%09%09break%3B%0A%09%09%09%7D%0A%09%09%09return%20joint%3B%0A%09%09%7D%3B%0A%09%09b2Joint.Destroy%20%3D%20(joint%2C%20allocator)%20%3D%3E%20%7B%20%7D%3B%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Dynamics.Joints.b2Joint.e_unknownJoint%20%3D%200%3B%0A%09%09%09Box2D.Dynamics.Joints.b2Joint.e_revoluteJoint%20%3D%201%3B%0A%09%09%09Box2D.Dynamics.Joints.b2Joint.e_prismaticJoint%20%3D%202%3B%0A%09%09%09Box2D.Dynamics.Joints.b2Joint.e_distanceJoint%20%3D%203%3B%0A%09%09%09Box2D.Dynamics.Joints.b2Joint.e_pulleyJoint%20%3D%204%3B%0A%09%09%09Box2D.Dynamics.Joints.b2Joint.e_mouseJoint%20%3D%205%3B%0A%09%09%09Box2D.Dynamics.Joints.b2Joint.e_gearJoint%20%3D%206%3B%0A%09%09%09Box2D.Dynamics.Joints.b2Joint.e_lineJoint%20%3D%207%3B%0A%09%09%09Box2D.Dynamics.Joints.b2Joint.e_weldJoint%20%3D%208%3B%0A%09%09%09Box2D.Dynamics.Joints.b2Joint.e_frictionJoint%20%3D%209%3B%0A%09%09%09Box2D.Dynamics.Joints.b2Joint.e_inactiveLimit%20%3D%200%3B%0A%09%09%09Box2D.Dynamics.Joints.b2Joint.e_atLowerLimit%20%3D%201%3B%0A%09%09%09Box2D.Dynamics.Joints.b2Joint.e_atUpperLimit%20%3D%202%3B%0A%09%09%09Box2D.Dynamics.Joints.b2Joint.e_equalLimits%20%3D%203%3B%0A%09%09%7D)%3B%0A%09%09b2JointDef.b2JointDef%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2JointEdge.b2JointEdge%20%3D%20()%20%3D%3E%20%7B%20%7D%3B%0A%09%09b2LineJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%09%09b2LineJointDef.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%09%09b2MouseJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%09%09b2MouseJointDef.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%09%09b2PrismaticJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%09%09b2PrismaticJointDef.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%09%09b2PulleyJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Dynamics.Joints.b2PulleyJoint.b2_minPulleyLength%20%3D%202.0%3B%0A%09%09%7D)%3B%0A%09%09b2PulleyJointDef.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%09%09b2RevoluteJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%09%09Box2D.postDefs.push(()%20%3D%3E%20%7B%0A%09%09%09Box2D.Dynamics.Joints.b2RevoluteJoint.tImpulse%20%3D%20new%20b2Vec2()%3B%0A%09%09%7D)%3B%0A%09%09b2RevoluteJointDef.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%09%09b2WeldJoint.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2Joint.prototype%3B%0A%09%09b2WeldJointDef.prototype.__super%20%3D%20Box2D.Dynamics.Joints.b2JointDef.prototype%3B%0A%09%7D))()%3B%0A%09((()%20%3D%3E%20%7B%0A%09%09const%20b2DebugDraw%20%3D%20Box2D.Dynamics.b2DebugDraw%3B%0A%09%7D))()%3B%0A%09let%20i%3B%0A%09for%20(i%20%3D%200%3B%20i%20%3C%20Box2D.postDefs.length%3B%20%2B%2Bi)%20Box2D.postDefs%5Bi%5D()%3B%0A%0A%09Scratch.extensions.register(new%20BoxedPhys())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Beepbox%20Player%0A%2F%2F%20ID%3A%20dogeiscutbeepboxplayer%0A%2F%2F%20Description%3A%20Play%2C%20edit%2C%20and%20read%20songs%20from%20any%20BeepBox%20mod%20directly%20from%20the%20URL!%0A%2F%2F%20By%3A%20DogeisCut%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FDogeisCut%2F%3E%0A%2F%2F%20License%3A%20MPL-2.0%0A%0A%2F%2F%20Version%201.2.2%0A%0A%2F%2FTODO%3A%20Song%20validation%20blocks.%0A%2F%2FTODO%3A%20Wait%20for%20samples%20loaded%20blocks%0A%2F%2FTODO%3A%20channel%20(x)%20current%20(y)%20block%20(like%20current%20pitch(s)%20n%20stuff)%0A%2F%2FTODO%3A%20loop%20point%20blocks%0A%2F%2FTODO%3A%20set%20channel%20(x)%20current%20(y)%20to%20(z)%20block%20(like%20volume%20n%20stuff%2C%20things%20that%20modulation%20can%20affect)%20(and%20it's%20currasponding%20change%20by%20block)%0A%2F%2FTODO%3A%20song%20length%20in%20seconds%2C%20and%20perhaps%20how%20far%20in%20the%20song%20you%20are%20in%20seconds%20(rn%20you%20have%20to%20calculate%20it%20with%20the%20bpm)%0A%2F%2F%20make%20sure%20this%20has%20outro%2C%20intro%20and%20loop%20options%0A%2F%2FTODO%3A%20optimise%20song%20json%20and%20url%20to%20only%20generate%20on%20song%20change%0A%2F%2FTODO%3A%20beats%20per%20bar%20data%20n%20stuff%2C%20and%20amount%20of%20bars%0A%2F%2FTODO%3A%20song%20completion%20percentage%20(((((((bar*24)*beatsPerBar)%2B((beat*24)%2Bpart))%2B(tick%2F2))%2FbeatsPerBar)%2F24)%2FtotalBars)%0A%2F%2FTODO%3A%20perhaps%20split%20some%20of%20the%20%22current%22%20and%20%22song%22%20block%20functionality%20into%20seperate%20blocks%0A%0A%2F%2FMAYBETODO%3A%20raw%20synth%2Fbeepbox%20function%20block%20somehow%3F%0A%2F%2FMAYBETODO%3A%20Synth%20names%2Fproper%20synth%20system%3F%0A%0A(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20%7B%0A%20%20%20%20throw%20new%20Error(%22'BeepBox%20Player'%20must%20run%20unsandboxed!%22)%3B%0A%20%20%7D%0A%0A%20%20%2F*%20eslint-disable*%2F%0A%20%20%2F%2F%20prettier-ignore%0A%20%20var%20beepbox%3Dfunction(e)%7B%22use%20strict%22%3B%0A%20%20%20%20%2F*!%0A%20%20%20%20%20%20%20%20Copyright%20(c)%202012-2022%20John%20Nesky%20and%20contributing%20authors%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20Permission%20is%20hereby%20granted%2C%20free%20of%20charge%2C%20to%20any%20person%20obtaining%20a%20copy%20of%0A%20%20%20%20%20%20%20%20this%20software%20and%20associated%20documentation%20files%20(the%20%22Software%22)%2C%20to%20deal%20in%0A%20%20%20%20%20%20%20%20the%20Software%20without%20restriction%2C%20including%20without%20limitation%20the%20rights%20to%0A%20%20%20%20%20%20%20%20use%2C%20copy%2C%20modify%2C%20merge%2C%20publish%2C%20distribute%2C%20sublicense%2C%20and%2For%20sell%20copies%0A%20%20%20%20%20%20%20%20of%20the%20Software%2C%20and%20to%20permit%20persons%20to%20whom%20the%20Software%20is%20furnished%20to%20do%0A%20%20%20%20%20%20%20%20so%2C%20subject%20to%20the%20following%20conditions%3A%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20The%20above%20copyright%20notice%20and%20this%20permission%20notice%20shall%20be%20included%20in%20all%0A%20%20%20%20%20%20%20%20copies%20or%20substantial%20portions%20of%20the%20Software.%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20THE%20SOFTWARE%20IS%20PROVIDED%20%22AS%20IS%22%2C%20WITHOUT%20WARRANTY%20OF%20ANY%20KIND%2C%20EXPRESS%20OR%0A%20%20%20%20%20%20%20%20IMPLIED%2C%20INCLUDING%20BUT%20NOT%20LIMITED%20TO%20THE%20WARRANTIES%20OF%20MERCHANTABILITY%2C%0A%20%20%20%20%20%20%20%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE%20AND%20NONINFRINGEMENT.%20IN%20NO%20EVENT%20SHALL%20THE%0A%20%20%20%20%20%20%20%20AUTHORS%20OR%20COPYRIGHT%20HOLDERS%20BE%20LIABLE%20FOR%20ANY%20CLAIM%2C%20DAMAGES%20OR%20OTHER%0A%20%20%20%20%20%20%20%20LIABILITY%2C%20WHETHER%20IN%20AN%20ACTION%20OF%20CONTRACT%2C%20TORT%20OR%20OTHERWISE%2C%20ARISING%20FROM%2C%0A%20%20%20%20%20%20%20%20OUT%20OF%20OR%20IN%20CONNECTION%20WITH%20THE%20SOFTWARE%20OR%20THE%20USE%20OR%20OTHER%20DEALINGS%20IN%20THE%0A%20%20%20%20%20%20%20%20SOFTWARE.%0A%20%20%20%20%20%20%20%20%2F%2F%40ts-ignore%0A%20%20%20%20%20%20%20%20*%2Fvar%20t%3De%26%26e.t%7C%7Cfunction(e%2Ct%2Cs%2Ci)%7Breturn%20new(s%7C%7C(s%3DPromise))((function(n%2Ca)%7Bfunction%20r(e)%7Btry%7Bl(i.next(e))%7Dcatch(e)%7Ba(e)%7D%7Dfunction%20o(e)%7Btry%7Bl(i.throw(e))%7Dcatch(e)%7Ba(e)%7D%7Dfunction%20l(e)%7Bvar%20t%3Be.done%3Fn(e.value)%3A(t%3De.value%2Ct%20instanceof%20s%3Ft%3Anew%20s((function(e)%7Be(t)%7D))).then(r%2Co)%7Dl((i%3Di.apply(e%2Ct%7C%7C%5B%5D)).next())%7D))%7D%3Bconst%20s%3D%5B%22chip%22%2C%22FM%22%2C%22noise%22%2C%22spectrum%22%2C%22drumset%22%2C%22harmonics%22%2C%22pulse%20width%22%2C%22picked%20string%22%2C%22supersaw%22%2C%22chip%20(custom)%22%2C%22mod%22%2C%22FM%20(6-op)%22%5D%3Bconst%20i%3Dnew%20class%7Bconstructor()%7Bthis.statusTable%3D%7B%7D%2Cthis.urlTable%3D%7B%7D%2Cthis.totalSamples%3D0%2Cthis.samplesLoaded%3D0%7D%7D%3Bclass%20n%20extends%20Event%7Bconstructor(e%2Ct)%7Bsuper(%22sampleloaded%22)%2Cthis.totalSamples%3De%2Cthis.samplesLoaded%3Dt%7D%7Dclass%20a%20extends%20EventTarget%7Bconstructor()%7Bsuper()%7D%7Dconst%20r%3Dnew%20a%3Bfunction%20o(e%2Cs%2Ca%2Co%2Cl)%7Breturn%20t(this%2Cvoid%200%2Cvoid%200%2C(function*()%7Bconst%20t%3Dnew%20AudioContext(%7BsampleRate%3Al%7D)%3Blet%20h%3D!1%3Bconst%20p%3Du.chipWaves%5Bs%5D%2Cm%3Du.rawChipWaves%5Bs%5D%2Cd%3Du.rawRawChipWaves%5Bs%5D%3Bfetch(e).then((e%3D%3Ee.ok%3Fe.arrayBuffer()%3A(i.statusTable%5Bs%5D%3D2%2CPromise.reject(new%20Error(%22Couldn't%20load%20sample%22))))).then((e%3D%3Et.decodeAudioData(e))).then((e%3D%3E%7Bconst%20l%3Dc(Array.from(e.getChannelData(0)))%2Cu%3Df(l)%3Bp.samples%3Du%2Cm.samples%3Dl%2Cd.samples%3Dl%2Co.isUsingAdvancedLoopControls%26%26(a.chipWaveLoopStart%3Dnull!%3Do.chipWaveLoopStart%3Fo.chipWaveLoopStart%3A0%2Ca.chipWaveLoopEnd%3Dnull!%3Do.chipWaveLoopEnd%3Fo.chipWaveLoopEnd%3Al.length-1%2Ca.chipWaveLoopMode%3Dnull!%3Do.chipWaveLoopMode%3Fo.chipWaveLoopMode%3A0%2Ca.chipWavePlayBackwards%3Do.chipWavePlayBackwards%2Ca.chipWaveStartOffset%3Dnull!%3Do.chipWaveStartOffset%3Fo.chipWaveStartOffset%3A0)%2Ci.samplesLoaded%2B%2B%2Ci.statusTable%5Bs%5D%3D1%2Cr.dispatchEvent(new%20n(i.totalSamples%2Ci.samplesLoaded))%2Ch%7C%7C(h%3D!0%2Ct.close())%7D)).catch((n%3D%3E%7Bi.statusTable%5Bs%5D%3D2%2Calert(%22Failed%20to%20load%20%22%2Be%2B%22%3A%5Cn%22%2Bn)%2Ch%7C%7C(h%3D!0%2Ct.close())%7D))%7D))%7Dfunction%20l(e)%7Breturn%20new%20Promise(((t%2Cs)%3D%3E%7Bif(!u.willReloadForCustomSamples)%7Bconst%20s%3Ddocument.createElement(%22script%22)%3Bs.src%3De%2Cdocument.head.appendChild(s)%2Cs.addEventListener(%22load%22%2C(e%3D%3E%7Bt()%7D))%7D%7D))%7Dfunction%20h(e)%7Bconst%20t%3Du.chipWaves%5B0%5D.samples%2Cs%3Du.rawRawChipWaves%5B0%5D.samples%3Bif(0%3D%3De)%7Bconst%20e%3D%5B%7Bname%3A%22paandorasbox%20kick%22%2Cexpression%3A4%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A0%7D%2C%7Bname%3A%22paandorasbox%20snare%22%2Cexpression%3A3%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A0%7D%2C%7Bname%3A%22paandorasbox%20piano1%22%2Cexpression%3A3%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A2%7D%2C%7Bname%3A%22paandorasbox%20WOW%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A0%7D%2C%7Bname%3A%22paandorasbox%20overdrive%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-2%7D%2C%7Bname%3A%22paandorasbox%20trumpet%22%2Cexpression%3A3%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A1.2%7D%2C%7Bname%3A%22paandorasbox%20saxophone%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-5%7D%2C%7Bname%3A%22paandorasbox%20orchestrahit%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A4.2%7D%2C%7Bname%3A%22paandorasbox%20detatched%20violin%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A4.2%7D%2C%7Bname%3A%22paandorasbox%20synth%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-.8%7D%2C%7Bname%3A%22paandorasbox%20sonic3snare%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A0%7D%2C%7Bname%3A%22paandorasbox%20come%20on%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A0%7D%2C%7Bname%3A%22paandorasbox%20choir%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-3%7D%2C%7Bname%3A%22paandorasbox%20overdriveguitar%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-6.2%7D%2C%7Bname%3A%22paandorasbox%20flute%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-6%7D%2C%7Bname%3A%22paandorasbox%20legato%20violin%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-28%7D%2C%7Bname%3A%22paandorasbox%20tremolo%20violin%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-33%7D%2C%7Bname%3A%22paandorasbox%20amen%20break%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-55%7D%2C%7Bname%3A%22paandorasbox%20pizzicato%20violin%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-11%7D%2C%7Bname%3A%22paandorasbox%20tim%20allen%20grunt%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-20%7D%2C%7Bname%3A%22paandorasbox%20tuba%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A44%7D%2C%7Bname%3A%22paandorasbox%20loopingcymbal%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-17%7D%2C%7Bname%3A%22paandorasbox%20standardkick%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-7%7D%2C%7Bname%3A%22paandorasbox%20standardsnare%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A0%7D%2C%7Bname%3A%22paandorasbox%20closedhihat%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A5%7D%2C%7Bname%3A%22paandorasbox%20foothihat%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A4%7D%2C%7Bname%3A%22paandorasbox%20openhihat%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-31%7D%2C%7Bname%3A%22paandorasbox%20crashcymbal%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-43%7D%2C%7Bname%3A%22paandorasbox%20pianoC4%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-42.5%7D%2C%7Bname%3A%22paandorasbox%20liver%20pad%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-22.5%7D%2C%7Bname%3A%22paandorasbox%20marimba%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-15.5%7D%2C%7Bname%3A%22paandorasbox%20susdotwav%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-24.5%7D%2C%7Bname%3A%22paandorasbox%20wackyboxtts%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-17.5%7D%2C%7Bname%3A%22paandorasbox%20peppersteak_1%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-42.2%7D%2C%7Bname%3A%22paandorasbox%20peppersteak_2%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-47%7D%2C%7Bname%3A%22paandorasbox%20vinyl_noise%22%2Cexpression%3A2%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-50%7D%2C%7Bname%3A%22paandorasbeta%20slap%20bass%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-56%7D%2C%7Bname%3A%22paandorasbeta%20HD%20EB%20overdrive%20guitar%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-60%7D%2C%7Bname%3A%22paandorasbeta%20sunsoft%20bass%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-18.5%7D%2C%7Bname%3A%22paandorasbeta%20masculine%20choir%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-50%7D%2C%7Bname%3A%22paandorasbeta%20feminine%20choir%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-60.5%7D%2C%7Bname%3A%22paandorasbeta%20tololoche%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-29.5%7D%2C%7Bname%3A%22paandorasbeta%20harp%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-54%7D%2C%7Bname%3A%22paandorasbeta%20pan%20flute%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-58%7D%2C%7Bname%3A%22paandorasbeta%20krumhorn%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-46%7D%2C%7Bname%3A%22paandorasbeta%20timpani%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-50%7D%2C%7Bname%3A%22paandorasbeta%20crowd%20hey%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-29%7D%2C%7Bname%3A%22paandorasbeta%20wario%20land%204%20brass%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-68%7D%2C%7Bname%3A%22paandorasbeta%20wario%20land%204%20rock%20organ%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-63%7D%2C%7Bname%3A%22paandorasbeta%20wario%20land%204%20DAOW%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-35%7D%2C%7Bname%3A%22paandorasbeta%20wario%20land%204%20hour%20chime%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-47.5%7D%2C%7Bname%3A%22paandorasbeta%20wario%20land%204%20tick%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-12.5%7D%2C%7Bname%3A%22paandorasbeta%20kirby%20kick%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-46.5%7D%2C%7Bname%3A%22paandorasbeta%20kirby%20snare%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-46.5%7D%2C%7Bname%3A%22paandorasbeta%20kirby%20bongo%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-46.5%7D%2C%7Bname%3A%22paandorasbeta%20kirby%20click%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-46.5%7D%2C%7Bname%3A%22paandorasbeta%20sonor%20kick%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-28.5%7D%2C%7Bname%3A%22paandorasbeta%20sonor%20snare%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-28.5%7D%2C%7Bname%3A%22paandorasbeta%20sonor%20snare%20(left%20hand)%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-22.5%7D%2C%7Bname%3A%22paandorasbeta%20sonor%20snare%20(right%20hand)%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-22.5%7D%2C%7Bname%3A%22paandorasbeta%20sonor%20high%20tom%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-41.5%7D%2C%7Bname%3A%22paandorasbeta%20sonor%20low%20tom%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-41.5%7D%2C%7Bname%3A%22paandorasbeta%20sonor%20hihat%20(closed)%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-17%7D%2C%7Bname%3A%22paandorasbeta%20sonor%20hihat%20(half%20opened)%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-21%7D%2C%7Bname%3A%22paandorasbeta%20sonor%20hihat%20(open)%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-54.5%7D%2C%7Bname%3A%22paandorasbeta%20sonor%20hihat%20(open%20tip)%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-43.5%7D%2C%7Bname%3A%22paandorasbeta%20sonor%20hihat%20(pedal)%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-28%7D%2C%7Bname%3A%22paandorasbeta%20sonor%20crash%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-51%7D%2C%7Bname%3A%22paandorasbeta%20sonor%20crash%20(tip)%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-50.5%7D%2C%7Bname%3A%22paandorasbeta%20sonor%20ride%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A-46%7D%5D%3Bi.totalSamples%2B%3De.length%3Bconst%20a%3Du.rawRawChipWaves.length%3Bfor(const%20n%20of%20e)%7Bconst%20e%3Du.rawRawChipWaves.length%2Ca%3D%7Bindex%3Ae%2Cname%3An.name%2Cexpression%3An.expression%2CisSampled%3An.isSampled%2CisPercussion%3An.isPercussion%2CextraSampleDetune%3An.extraSampleDetune%2Csamples%3As%7D%2Cr%3D%7Bindex%3Ae%2Cname%3An.name%2Cexpression%3An.expression%2CisSampled%3An.isSampled%2CisPercussion%3An.isPercussion%2CextraSampleDetune%3An.extraSampleDetune%2Csamples%3As%7D%2Co%3D%7Bindex%3Ae%2Cname%3An.name%2Cexpression%3An.expression%2CisSampled%3An.isSampled%2CisPercussion%3An.isPercussion%2CextraSampleDetune%3An.extraSampleDetune%2Csamples%3At%7D%3Bu.rawRawChipWaves%5Be%5D%3Dr%2Cu.rawRawChipWaves.dictionary%5Bn.name%5D%3Dr%2Cu.rawChipWaves%5Be%5D%3Da%2Cu.rawChipWaves.dictionary%5Bn.name%5D%3Da%2Cu.chipWaves%5Be%5D%3Do%2Cu.chipWaves.dictionary%5Bn.name%5D%3Da%2Ci.statusTable%5Be%5D%3D0%2Ci.urlTable%5Be%5D%3D%22legacySamples%22%7Dl(%22samples.js%22).then((()%3D%3El(%22samples2.js%22))).then((()%3D%3El(%22samples3.js%22))).then((()%3D%3El(%22drumsamples.js%22))).then((()%3D%3El(%22wario_samples.js%22))).then((()%3D%3El(%22kirby_samples.js%22))).then((()%3D%3E%7Bconst%20e%3D%5Bc(kicksample)%2Cc(snaresample)%2Cc(pianosample)%2Cc(WOWsample)%2Cc(overdrivesample)%2Cc(trumpetsample)%2Cc(saxophonesample)%2Cc(orchhitsample)%2Cc(detatchedviolinsample)%2Cc(synthsample)%2Cc(sonic3snaresample)%2Cc(comeonsample)%2Cc(choirsample)%2Cc(overdrivensample)%2Cc(flutesample)%2Cc(legatoviolinsample)%2Cc(tremoloviolinsample)%2Cc(amenbreaksample)%2Cc(pizzicatoviolinsample)%2Cc(timallengruntsample)%2Cc(tubasample)%2Cc(loopingcymbalsample)%2Cc(kickdrumsample)%2Cc(snaredrumsample)%2Cc(closedhihatsample)%2Cc(foothihatsample)%2Cc(openhihatsample)%2Cc(crashsample)%2Cc(pianoC4sample)%2Cc(liverpadsample)%2Cc(marimbasample)%2Cc(susdotwavsample)%2Cc(wackyboxttssample)%2Cc(peppersteak1)%2Cc(peppersteak2)%2Cc(vinyl)%2Cc(slapbass)%2Cc(hdeboverdrive)%2Cc(sunsoftbass)%2Cc(masculinechoir)%2Cc(femininechoir)%2Cc(southtololoche)%2Cc(harp)%2Cc(panflute)%2Cc(krumhorn)%2Cc(timpani)%2Cc(crowdhey)%2Cc(warioland4brass)%2Cc(warioland4organ)%2Cc(warioland4daow)%2Cc(warioland4hourchime)%2Cc(warioland4tick)%2Cc(kirbykick)%2Cc(kirbysnare)%2Cc(kirbybongo)%2Cc(kirbyclick)%2Cc(funkkick)%2Cc(funksnare)%2Cc(funksnareleft)%2Cc(funksnareright)%2Cc(funktomhigh)%2Cc(funktomlow)%2Cc(funkhihatclosed)%2Cc(funkhihathalfopen)%2Cc(funkhihatopen)%2Cc(funkhihatopentip)%2Cc(funkhihatfoot)%2Cc(funkcrash)%2Cc(funkcrashtip)%2Cc(funkride)%5D%3Blet%20t%3D0%3Bfor(const%20s%20of%20e)%7Bconst%20e%3Da%2Bt%3Bu.rawChipWaves%5Be%5D.samples%3Ds%2Cu.rawRawChipWaves%5Be%5D.samples%3Ds%2Cu.chipWaves%5Be%5D.samples%3Df(s)%2Ci.statusTable%5Be%5D%3D1%2Ci.samplesLoaded%2B%2B%2Cr.dispatchEvent(new%20n(i.totalSamples%2Ci.samplesLoaded))%2Ct%2B%2B%7D%7D))%7Delse%20if(1%3D%3De)%7Bconst%20e%3D%5B%7Bname%3A%22chronoperc1final%22%2Cexpression%3A4%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A0%7D%2C%7Bname%3A%22synthkickfm%22%2Cexpression%3A4%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A0%7D%2C%7Bname%3A%22mcwoodclick1%22%2Cexpression%3A4%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A0%7D%2C%7Bname%3A%22acoustic%20snare%22%2Cexpression%3A4%2CisSampled%3A!0%2CisPercussion%3A!0%2CextraSampleDetune%3A0%7D%5D%3Bi.totalSamples%2B%3De.length%3Bconst%20a%3Du.rawRawChipWaves.length%3Bfor(const%20n%20of%20e)%7Bconst%20e%3Du.rawRawChipWaves.length%2Ca%3D%7Bindex%3Ae%2Cname%3An.name%2Cexpression%3An.expression%2CisSampled%3An.isSampled%2CisPercussion%3An.isPercussion%2CextraSampleDetune%3An.extraSampleDetune%2Csamples%3As%7D%2Cr%3D%7Bindex%3Ae%2Cname%3An.name%2Cexpression%3An.expression%2CisSampled%3An.isSampled%2CisPercussion%3An.isPercussion%2CextraSampleDetune%3An.extraSampleDetune%2Csamples%3As%7D%2Co%3D%7Bindex%3Ae%2Cname%3An.name%2Cexpression%3An.expression%2CisSampled%3An.isSampled%2CisPercussion%3An.isPercussion%2CextraSampleDetune%3An.extraSampleDetune%2Csamples%3At%7D%3Bu.rawRawChipWaves%5Be%5D%3Dr%2Cu.rawRawChipWaves.dictionary%5Bn.name%5D%3Dr%2Cu.rawChipWaves%5Be%5D%3Da%2Cu.rawChipWaves.dictionary%5Bn.name%5D%3Da%2Cu.chipWaves%5Be%5D%3Do%2Cu.chipWaves.dictionary%5Bn.name%5D%3Da%2Ci.statusTable%5Be%5D%3D0%2Ci.urlTable%5Be%5D%3D%22nintariboxSamples%22%7Dl(%22nintaribox_samples.js%22).then((()%3D%3E%7Bconst%20e%3D%5Bc(chronoperc1finalsample)%2Cc(synthkickfmsample)%2Cc(woodclicksample)%2Cc(acousticsnaresample)%5D%3Blet%20t%3D0%3Bfor(const%20s%20of%20e)%7Bconst%20e%3Da%2Bt%3Bu.rawChipWaves%5Be%5D.samples%3Ds%2Cu.rawRawChipWaves%5Be%5D.samples%3Ds%2Cu.chipWaves%5Be%5D.samples%3Df(s)%2Ci.statusTable%5Be%5D%3D1%2Ci.samplesLoaded%2B%2B%2Cr.dispatchEvent(new%20n(i.totalSamples%2Ci.samplesLoaded))%2Ct%2B%2B%7D%7D))%7Delse%20if(2%3D%3De)%7Bconst%20e%3D%5B%7Bname%3A%22cat%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-3%7D%2C%7Bname%3A%22gameboy%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A7%7D%2C%7Bname%3A%22mario%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A0%7D%2C%7Bname%3A%22drum%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A4%7D%2C%7Bname%3A%22yoshi%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-16%7D%2C%7Bname%3A%22star%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-16%7D%2C%7Bname%3A%22fire%20flower%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-1%7D%2C%7Bname%3A%22dog%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-1%7D%2C%7Bname%3A%22oink%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A3%7D%2C%7Bname%3A%22swan%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A1%7D%2C%7Bname%3A%22face%22%2Cexpression%3A1%2CisSampled%3A!0%2CisPercussion%3A!1%2CextraSampleDetune%3A-12%7D%5D%3Bi.totalSamples%2B%3De.length%3Bconst%20a%3Du.rawRawChipWaves.length%3Bfor(const%20n%20of%20e)%7Bconst%20e%3Du.rawRawChipWaves.length%2Ca%3D%7Bindex%3Ae%2Cname%3An.name%2Cexpression%3An.expression%2CisSampled%3An.isSampled%2CisPercussion%3An.isPercussion%2CextraSampleDetune%3An.extraSampleDetune%2Csamples%3As%7D%2Cr%3D%7Bindex%3Ae%2Cname%3An.name%2Cexpression%3An.expression%2CisSampled%3An.isSampled%2CisPercussion%3An.isPercussion%2CextraSampleDetune%3An.extraSampleDetune%2Csamples%3As%7D%2Co%3D%7Bindex%3Ae%2Cname%3An.name%2Cexpression%3An.expression%2CisSampled%3An.isSampled%2CisPercussion%3An.isPercussion%2CextraSampleDetune%3An.extraSampleDetune%2Csamples%3At%7D%3Bu.rawRawChipWaves%5Be%5D%3Dr%2Cu.rawRawChipWaves.dictionary%5Bn.name%5D%3Dr%2Cu.rawChipWaves%5Be%5D%3Da%2Cu.rawChipWaves.dictionary%5Bn.name%5D%3Da%2Cu.chipWaves%5Be%5D%3Do%2Cu.chipWaves.dictionary%5Bn.name%5D%3Da%2Ci.statusTable%5Be%5D%3D0%2Ci.urlTable%5Be%5D%3D%22marioPaintboxSamples%22%7Dl(%22mario_paintbox_samples.js%22).then((()%3D%3E%7Bconst%20e%3D%5Bc(catpaintboxsample)%2Cc(gameboypaintboxsample)%2Cc(mariopaintboxsample)%2Cc(drumpaintboxsample)%2Cc(yoshipaintboxsample)%2Cc(starpaintboxsample)%2Cc(fireflowerpaintboxsample)%2Cc(dogpaintbox)%2Cc(oinkpaintbox)%2Cc(swanpaintboxsample)%2Cc(facepaintboxsample)%5D%3Blet%20t%3D0%3Bfor(const%20s%20of%20e)%7Bconst%20e%3Da%2Bt%3Bu.rawChipWaves%5Be%5D.samples%3Ds%2Cu.rawRawChipWaves%5Be%5D.samples%3Ds%2Cu.chipWaves%5Be%5D.samples%3Df(s)%2Ci.statusTable%5Be%5D%3D1%2Ci.samplesLoaded%2B%2B%2Cr.dispatchEvent(new%20n(i.totalSamples%2Ci.samplesLoaded))%2Ct%2B%2B%7D%7D))%7Delse%20console.log(%22invalid%20set%20of%20built-in%20samples%22)%7Dclass%20u%7B%7Dfunction%20c(e)%7Blet%20t%3D0%3Bfor(let%20s%3D0%3Bs%3Ce.length%3Bs%2B%2B)t%2B%3De%5Bs%5D%3Bconst%20s%3Dt%2Fe.length%3Bfor(let%20t%3D0%3Bt%3Ce.length%3Bt%2B%2B)e%5Bt%5D-%3Ds%3Breturn%20f(e)%2Ce.push(0)%2Cnew%20Float32Array(e)%7Dfunction%20p(e)%7Blet%20t%3D0%3Bc(e)%3Bfor(let%20s%3D0%3Bs%3Ce.length-1%3Bs%2B%2B)t%2B%3DMath.abs(e%5Bs%5D)%3Bconst%20s%3Dt%2F(e.length-1)%3Bfor(let%20t%3D0%3Bt%3Ce.length-1%3Bt%2B%2B)e%5Bt%5D%3De%5Bt%5D%2Fs%3Breturn%20new%20Float32Array(e)%7Dfunction%20f(e)%7Blet%20t%3D0%2Cs%3Dnew%20Float32Array(e.length)%3Bfor(let%20i%3D0%3Bi%3Ce.length%3Bi%2B%2B)s%5Bi%5D%3Dt%2Ct%2B%3De%5Bi%5D%3Breturn%20s%7Dfunction%20m(e)%7Breturn%20e%2F(2*u.pulseWidthRange)%7Dfunction%20d(e%2Ct%2Cs)%7Blet%20i%3Du.chipNoises%5Be%5D.samples%3Bif(null%3D%3Di)%7Bif(i%3Dnew%20Float32Array(u.chipNoiseLength%2B1)%2Cu.chipNoises%5Be%5D.samples%3Di%2C0%3D%3De)%7Blet%20e%3D1%3Bfor(let%20t%3D0%3Bt%3Cu.chipNoiseLength%3Bt%2B%2B)%7Bi%5Bt%5D%3D2*(1%26e)-1%3Blet%20s%3De%3E%3E1%3B1%3D%3D(e%2Bs%261)%26%26(s%2B%3D16384)%2Ce%3Ds%7D%7Delse%20if(1%3D%3De)for(let%20e%3D0%3Be%3Cu.chipNoiseLength%3Be%2B%2B)i%5Be%5D%3D2*Math.random()-1%3Belse%20if(2%3D%3De)%7Blet%20e%3D1%3Bfor(let%20t%3D0%3Bt%3Cu.chipNoiseLength%3Bt%2B%2B)%7Bi%5Bt%5D%3D2*(1%26e)-1%3Blet%20s%3De%3E%3E1%3B1%3D%3D(e%2Bs%261)%26%26(s%2B%3D32768)%2Ce%3Ds%7D%7Delse%20if(3%3D%3De)%7Blet%20e%3D1%3Bfor(let%20t%3D0%3Bt%3Cu.chipNoiseLength%3Bt%2B%2B)%7Bi%5Bt%5D%3D2*(1%26e)-1%3Blet%20s%3De%3E%3E1%3B1%3D%3D(e%2Bs%261)%26%26(s%2B%3D40)%2Ce%3Ds%7D%7Delse%20if(4%3D%3De)y(i%2Cu.chipNoiseLength%2C10%2C11%2C1%2C1%2C0)%2Cy(i%2Cu.chipNoiseLength%2C11%2C14%2C.6578%2C.6578%2C0)%2Ct(i%2Cu.chipNoiseLength)%2Cs(i%2C1%2FMath.sqrt(u.chipNoiseLength))%3Belse%20if(5%3D%3De)for(var%20n%3D1%2Ca%3D0%3Ba%3Cu.chipNoiseLength%3Ba%2B%2B)%7Bi%5Ba%5D%3D2*(1%26n)-1%2C1%3D%3D(n%2B(r%3Dn%3E%3E1)%261)%26%26(r%2B%3D40)%2Cn%3Dr%7Delse%20if(6%3D%3De)y(i%2Cu.chipNoiseLength%2C1%2C10%2C1%2C1%2C0)%2Cy(i%2Cu.chipNoiseLength%2C20%2C14%2C-2%2C-2%2C0)%2Ct(i%2Cu.chipNoiseLength)%2Cs(i%2C1%2FMath.sqrt(u.chipNoiseLength))%3Belse%20if(7%3D%3De)for(n%3D1%2Ca%3D0%3Ba%3Cu.chipNoiseLength%3Ba%2B%2B)%7Bi%5Ba%5D%3D4*(1%26n)*(14*Math.random()%2B1)-8%2C1%3D%3D(n%2B(r%3Dn%3E%3E1)%261)%26%26(r%2B%3D60)%2Cn%3Dr%7Delse%20if(8%3D%3De)for(n%3D1%2Ca%3D0%3Ba%3Cu.chipNoiseLength%3Ba%2B%2B)%7Bi%5Ba%5D%3D(1%26n)%2F2-.5%2C1%3D%3D(n%2B(r%3Dn%3E%3E1)%261)%26%26(r-%3D40)%2Cn%3Dr%7Delse%20if(9%3D%3De)%7Blet%20e%3D1%3Bfor(let%20t%3D0%3Bt%3Cu.chipNoiseLength%3Bt%2B%2B)%7Bi%5Bt%5D%3D2*(1%26e)-1.1%3Blet%20s%3De%3E%3E1%3B1%3D%3D(e%2Bs%261)%26%26(s%2B%3D131080)%2Ce%3Ds%7D%7Delse%20if(10%3D%3De)for(let%20e%3D0%3Be%3Cu.chipNoiseLength%3Be%2B%2B)i%5Be%5D%3DMath.round(Math.random())%3Belse%20if(11%3D%3De)for(n%3D1%2Ca%3D0%3Ba%3Cu.chipNoiseLength%3Ba%2B%2B)%7Bvar%20r%3Bi%5Ba%5D%3DMath.round(1%26n)%2C1%3D%3D(n%2B(r%3Dn%3E%3E1)%261)%26%26(r-%3D40)%2Cn%3Dr%7Delse%20if(12%3D%3De)for(let%20e%3D0%3Be%3Cu.chipNoiseLength%3Be%2B%2B)%7Bvar%20o%3DMath.random()%3Bi%5Be%5D%3DMath.pow(o%2CMath.clz32(o))%7Delse%20if(13%3D%3De)%7Bvar%20l%2Ch%2Cc%2Cp%2Cf%3D0%2Cm%3D0%2Cd%3D0%3Bf%3Dm%3Dd%3Dl%3Dh%3Dc%3Dp%3D0%3Bfor(let%20e%3D0%3Be%3Cu.chipNoiseLength%3Be%2B%2B)%7Bf%3D.99886*f%2B.0555179*(g%3D2*Math.random()-1)%2Cm%3D.99332*m%2B.0750759*g%2Cd%3D.969*d%2B.153852*g%2Cl%3D.8665*l%2B.3104856*g%2Ch%3D.55*h%2B.5329522*g%2Cc%3D-.7616*c-.016898*g%2Ci%5Be%5D%3Df%2Bm%2Bd%2Bl%2Bh%2Bc%2Bp%2B.5362*g%2Ci%5Be%5D*%3D.44%2Cp%3D.115926*g%7D%7Delse%7Bif(14!%3De)throw%20new%20Error(%22Unrecognized%20drum%20index%3A%20%22%2Be)%3Bvar%20v%3D0%3Bfor(let%20e%3D0%3Be%3Cu.chipNoiseLength%3Be%2B%2B)%7Bvar%20g%3D2*Math.random()-1%3Bi%5Be%5D%3D(v%2B.02*g)%2F1.02%2Cv%3Di%5Be%5D%2Ci%5Be%5D*%3D14%7D%7Di%5Bu.chipNoiseLength%5D%3Di%5B0%5D%7Dreturn%20i%7Dfunction%20y(e%2Ct%2Cs%2Ci%2Cn%2Ca%2Cr)%7Bconst%20o%3D0%7CMath.pow(2%2Cs)%2Cl%3DMath.min(t%3E%3E1%2C0%7CMath.pow(2%2Ci))%2Ch%3Dd(0%2Cnull%2Cnull)%3Blet%20u%3D0%3Bfor(let%20c%3Do%3Bc%3Cl%3Bc%2B%2B)%7Blet%20o%3Dn%2B(a-n)*(Math.log2(c)-s)%2F(i-s)%2Cl%3DMath.pow(2%2C7*(o-1)%2B1)*o%3Bl*%3DMath.pow(c%2F2048%2Cr)%2Cu%2B%3Dl%2Cl*%3Dh%5Bc%5D%3Bconst%20p%3D.61803398875*c*c*Math.PI*2%3Be%5Bc%5D%3DMath.cos(p)*l%2Ce%5Bt-c%5D%3DMath.sin(p)*l%7Dreturn%20u%7Dfunction%20v(e%3D0)%7Bconst%20t%3Dnew%20Float32Array(u.sineWaveLength%2B1)%2Cs%3Du.sineWaveLength%2F4%3Bfor(let%20i%3D0%3Bi%3Cu.sineWaveLength%2B1%3Bi%2B%2B)t%5Bi%5D%3D2*%2B(Math.abs(i-s)%3Ce*u.sineWaveLength%2F2%7C%7CMath.abs(i-u.sineWaveLength-s)%3Ce*u.sineWaveLength%2F2)-1%3Breturn%20t%7Dfunction%20g(e%3D!1)%7Bconst%20t%3Dnew%20Float32Array(u.sineWaveLength%2B1)%3Bfor(let%20s%3D0%3Bs%3Cu.sineWaveLength%2B1%3Bs%2B%2B)t%5Bs%5D%3D2*(s%2Bu.sineWaveLength%2F4)%2Fu.sineWaveLength%252-1%2Ct%5Bs%5D%3De%3F-t%5Bs%5D%3At%5Bs%5D%3Breturn%20t%7Dfunction%20b(e%2Ct%2Cs)%7Blet%20i%3Du.arpeggioPatterns%5Be-1%5D%3Breturn%20null!%3Di%3F(2%3D%3De%26%260%3D%3Dt%26%26(i%3D%5B0%2C0%2C1%2C1%5D)%2Ci%5Bs%25i.length%5D)%3As%25e%7Dfunction%20S(e)%7Bconst%20t%3D%7B%7D%3Bfor(let%20s%3D0%3Bs%3Ce.length%3Bs%2B%2B)%7Bconst%20i%3De%5Bs%5D%3Bi.index%3Ds%2Ct%5Bi.name%5D%3Di%7Dconst%20s%3De%3Breturn%20s.dictionary%3Dt%2Cs%7Dfunction%20M(e)%7Breturn%200!%3D(1024%26e)%7Dfunction%20w(e)%7Breturn%200!%3D(2048%26e)%7Dfunction%20x(e)%7Breturn%200!%3D(128%26e)%7Dfunction%20k(e)%7Breturn%200!%3D(256%26e)%7Dfunction%20F(e)%7Breturn%200!%3D(512%26e)%7Dfunction%20P(e)%7Breturn%200!%3D(32%26e)%7Dfunction%20I(e)%7Breturn%200!%3D(8%26e)%7Dfunction%20q(e)%7Breturn%200!%3D(16%26e)%7Dfunction%20T(e)%7Breturn%200!%3D(4%26e)%7Dfunction%20D(e)%7Breturn%200!%3D(2%26e)%7Dfunction%20O(e)%7Breturn%200!%3D(64%26e)%7Dfunction%20R(e)%7Breturn%200!%3D(1%26e)%7Du.thresholdVal%3D-10%2Cu.kneeVal%3D40%2Cu.ratioVal%3D12%2Cu.attackVal%3D0%2Cu.releaseVal%3D.25%2Cu.willReloadForCustomSamples%3D!1%2Cu.jsonFormat%3D%22UltraBox%22%2Cu.scales%3DS(%5B%7Bname%3A%22Free%22%2CrealName%3A%22chromatic%22%2Cflags%3A%5B!0%2C!0%2C!0%2C!0%2C!0%2C!0%2C!0%2C!0%2C!0%2C!0%2C!0%2C!0%5D%7D%2C%7Bname%3A%22Major%22%2CrealName%3A%22ionian%22%2Cflags%3A%5B!0%2C!1%2C!0%2C!1%2C!0%2C!0%2C!1%2C!0%2C!1%2C!0%2C!1%2C!0%5D%7D%2C%7Bname%3A%22Minor%22%2CrealName%3A%22aeolian%22%2Cflags%3A%5B!0%2C!1%2C!0%2C!0%2C!1%2C!0%2C!1%2C!0%2C!0%2C!1%2C!0%2C!1%5D%7D%2C%7Bname%3A%22Mixolydian%22%2CrealName%3A%22mixolydian%22%2Cflags%3A%5B!0%2C!1%2C!0%2C!1%2C!0%2C!0%2C!1%2C!0%2C!1%2C!0%2C!0%2C!1%5D%7D%2C%7Bname%3A%22Lydian%22%2CrealName%3A%22lydian%22%2Cflags%3A%5B!0%2C!1%2C!0%2C!1%2C!0%2C!1%2C!0%2C!0%2C!1%2C!0%2C!1%2C!0%5D%7D%2C%7Bname%3A%22Dorian%22%2CrealName%3A%22dorian%22%2Cflags%3A%5B!0%2C!1%2C!0%2C!0%2C!1%2C!0%2C!1%2C!0%2C!1%2C!0%2C!0%2C!1%5D%7D%2C%7Bname%3A%22Phrygian%22%2CrealName%3A%22phrygian%22%2Cflags%3A%5B!0%2C!0%2C!1%2C!0%2C!1%2C!0%2C!1%2C!0%2C!0%2C!1%2C!0%2C!1%5D%7D%2C%7Bname%3A%22Locrian%22%2CrealName%3A%22locrian%22%2Cflags%3A%5B!0%2C!0%2C!1%2C!0%2C!1%2C!0%2C!0%2C!1%2C!0%2C!1%2C!0%2C!1%5D%7D%2C%7Bname%3A%22Lydian%20Dominant%22%2CrealName%3A%22lydian%20dominant%22%2Cflags%3A%5B!0%2C!1%2C!0%2C!1%2C!0%2C!1%2C!0%2C!0%2C!1%2C!0%2C!0%2C!1%5D%7D%2C%7Bname%3A%22Phrygian%20Dominant%22%2CrealName%3A%22phrygian%20dominant%22%2Cflags%3A%5B!0%2C!0%2C!1%2C!1%2C!0%2C!0%2C!1%2C!0%2C!0%2C!1%2C!0%2C!1%5D%7D%2C%7Bname%3A%22Harmonic%20Major%22%2CrealName%3A%22harmonic%20major%22%2Cflags%3A%5B!0%2C!1%2C!0%2C!1%2C!0%2C!0%2C!1%2C!0%2C!0%2C!1%2C!1%2C!0%5D%7D%2C%7Bname%3A%22Harmonic%20Minor%22%2CrealName%3A%22harmonic%20minor%22%2Cflags%3A%5B!0%2C!1%2C!0%2C!0%2C!1%2C!0%2C!1%2C!0%2C!0%2C!1%2C!1%2C!0%5D%7D%2C%7Bname%3A%22Melodic%20Minor%22%2CrealName%3A%22melodic%20minor%22%2Cflags%3A%5B!0%2C!1%2C!0%2C!0%2C!1%2C!0%2C!1%2C!0%2C!1%2C!0%2C!1%2C!0%5D%7D%2C%7Bname%3A%22Blues%20Major%22%2CrealName%3A%22blues%20major%22%2Cflags%3A%5B!0%2C!1%2C!0%2C!0%2C!0%2C!1%2C!1%2C!0%2C!1%2C!0%2C!1%2C!1%5D%7D%2C%7Bname%3A%22Blues%22%2CrealName%3A%22blues%22%2Cflags%3A%5B!0%2C!1%2C!1%2C!0%2C!1%2C!0%2C!0%2C!0%2C!1%2C!1%2C!0%2C!1%5D%7D%2C%7Bname%3A%22Altered%22%2CrealName%3A%22altered%22%2Cflags%3A%5B!0%2C!0%2C!1%2C!0%2C!0%2C!1%2C!0%2C!1%2C!0%2C!1%2C!0%2C!1%5D%7D%2C%7Bname%3A%22Major%20Pentatonic%22%2CrealName%3A%22major%20pentatonic%22%2Cflags%3A%5B!0%2C!1%2C!0%2C!1%2C!0%2C!1%2C!1%2C!0%2C!1%2C!0%2C!1%2C!1%5D%7D%2C%7Bname%3A%22Minor%20Pentatonic%22%2CrealName%3A%22minor%20pentatonic%22%2Cflags%3A%5B!0%2C!1%2C!1%2C!0%2C!1%2C!0%2C!1%2C!0%2C!1%2C!1%2C!0%2C!1%5D%7D%2C%7Bname%3A%22Whole%20Tone%22%2CrealName%3A%22whole%20tone%22%2Cflags%3A%5B!0%2C!1%2C!0%2C!1%2C!0%2C!1%2C!0%2C!1%2C!0%2C!1%2C!0%2C!1%5D%7D%2C%7Bname%3A%22Octatonic%22%2CrealName%3A%22octatonic%22%2Cflags%3A%5B!0%2C!1%2C!0%2C!0%2C!1%2C!0%2C!0%2C!1%2C!0%2C!0%2C!1%2C!0%5D%7D%2C%7Bname%3A%22Hexatonic%22%2CrealName%3A%22hexatonic%22%2Cflags%3A%5B!0%2C!1%2C!1%2C!0%2C!0%2C!1%2C!1%2C!0%2C!0%2C!1%2C!1%2C!0%5D%7D%2C%7Bname%3A%22No%20Dabbing%20(MB)%22%2CrealName%3A%22no%20dabbing%22%2Cflags%3A%5B!0%2C!0%2C!1%2C!0%2C!0%2C!0%2C!0%2C!0%2C!0%2C!1%2C!0%2C!1%5D%7D%2C%7Bname%3A%22Jacked%20Toad%20(TB)%22%2CrealName%3A%22jacked%20toad%22%2Cflags%3A%5B!0%2C!1%2C!0%2C!0%2C!1%2C!0%2C!0%2C!0%2C!0%2C!1%2C!0%2C!0%5D%7D%2C%7Bname%3A%22Test%20Scale%20(TB)%22%2CrealName%3A%22**t%22%2Cflags%3A%5B!0%2C!0%2C!1%2C!1%2C!1%2C!0%2C!0%2C!1%2C!1%2C!0%2C!0%2C!1%5D%7D%2C%7Bname%3A%22Custom%22%2CrealName%3A%22custom%22%2Cflags%3A%5B!0%2C!1%2C!0%2C!0%2C!1%2C!1%2C!1%2C!0%2C!0%2C!1%2C!0%2C!0%5D%7D%5D)%2Cu.keys%3DS(%5B%7Bname%3A%22C%22%2CisWhiteKey%3A!0%2CbasePitch%3A12%7D%2C%7Bname%3A%22C%E2%99%AF%22%2CisWhiteKey%3A!1%2CbasePitch%3A13%7D%2C%7Bname%3A%22D%22%2CisWhiteKey%3A!0%2CbasePitch%3A14%7D%2C%7Bname%3A%22D%E2%99%AF%22%2CisWhiteKey%3A!1%2CbasePitch%3A15%7D%2C%7Bname%3A%22E%22%2CisWhiteKey%3A!0%2CbasePitch%3A16%7D%2C%7Bname%3A%22F%22%2CisWhiteKey%3A!0%2CbasePitch%3A17%7D%2C%7Bname%3A%22F%E2%99%AF%22%2CisWhiteKey%3A!1%2CbasePitch%3A18%7D%2C%7Bname%3A%22G%22%2CisWhiteKey%3A!0%2CbasePitch%3A19%7D%2C%7Bname%3A%22G%E2%99%AF%22%2CisWhiteKey%3A!1%2CbasePitch%3A20%7D%2C%7Bname%3A%22A%22%2CisWhiteKey%3A!0%2CbasePitch%3A21%7D%2C%7Bname%3A%22A%E2%99%AF%22%2CisWhiteKey%3A!1%2CbasePitch%3A22%7D%2C%7Bname%3A%22B%22%2CisWhiteKey%3A!0%2CbasePitch%3A23%7D%5D)%2Cu.blackKeyNameParents%3D%5B-1%2C1%2C-1%2C1%2C-1%2C1%2C-1%2C-1%2C1%2C-1%2C1%2C-1%5D%2Cu.tempoMin%3D1%2Cu.tempoMax%3D500%2Cu.octaveMin%3D-2%2Cu.octaveMax%3D2%2Cu.echoDelayRange%3D24%2Cu.echoDelayStepTicks%3D4%2Cu.echoSustainRange%3D8%2Cu.echoShelfHz%3D4e3%2Cu.echoShelfGain%3DMath.pow(2%2C-.5)%2Cu.reverbShelfHz%3D8e3%2Cu.reverbShelfGain%3DMath.pow(2%2C-1.5)%2Cu.reverbRange%3D32%2Cu.reverbDelayBufferSize%3D16384%2Cu.reverbDelayBufferMask%3Du.reverbDelayBufferSize-1%2Cu.beatsPerBarMin%3D1%2Cu.beatsPerBarMax%3D64%2Cu.barCountMin%3D1%2Cu.barCountMax%3D1024%2Cu.instrumentCountMin%3D1%2Cu.layeredInstrumentCountMax%3D10%2Cu.patternInstrumentCountMax%3D10%2Cu.partsPerBeat%3D24%2Cu.ticksPerPart%3D2%2Cu.ticksPerArpeggio%3D3%2Cu.arpeggioPatterns%3D%5B%5B0%5D%2C%5B0%2C1%5D%2C%5B0%2C1%2C2%2C1%5D%2C%5B0%2C1%2C2%2C3%5D%2C%5B0%2C1%2C2%2C3%2C4%5D%2C%5B0%2C1%2C2%2C3%2C4%2C5%5D%2C%5B0%2C1%2C2%2C3%2C4%2C5%2C6%5D%2C%5B0%2C1%2C2%2C3%2C4%2C5%2C6%2C7%5D%5D%2Cu.rhythms%3DS(%5B%7Bname%3A%22%C3%B73%20(triplets)%22%2CstepsPerBeat%3A3%2CroundUpThresholds%3A%5B5%2C12%2C18%5D%7D%2C%7Bname%3A%22%C3%B74%20(standard)%22%2CstepsPerBeat%3A4%2CroundUpThresholds%3A%5B3%2C9%2C17%2C21%5D%7D%2C%7Bname%3A%22%C3%B76%22%2CstepsPerBeat%3A6%2CroundUpThresholds%3Anull%7D%2C%7Bname%3A%22%C3%B78%22%2CstepsPerBeat%3A8%2CroundUpThresholds%3Anull%7D%2C%7Bname%3A%22%C3%B712%22%2CstepsPerBeat%3A12%2CroundUpThresholds%3Anull%7D%2C%7Bname%3A%22freehand%22%2CstepsPerBeat%3A24%2CroundUpThresholds%3Anull%7D%5D)%2Cu.instrumentTypeNames%3D%5B%22chip%22%2C%22FM%22%2C%22noise%22%2C%22spectrum%22%2C%22drumset%22%2C%22harmonics%22%2C%22PWM%22%2C%22Picked%20String%22%2C%22supersaw%22%2C%22custom%20chip%22%2C%22mod%22%2C%22FM6op%22%5D%2Cu.instrumentTypeHasSpecialInterval%3D%5B!0%2C!0%2C!1%2C!1%2C!1%2C!0%2C!1%2C!1%2C!1%2C!1%2C!1%5D%2Cu.chipBaseExpression%3D.03375%2Cu.fmBaseExpression%3D.03%2Cu.noiseBaseExpression%3D.19%2Cu.spectrumBaseExpression%3D.3%2Cu.drumsetBaseExpression%3D.45%2Cu.harmonicsBaseExpression%3D.025%2Cu.pwmBaseExpression%3D.04725%2Cu.supersawBaseExpression%3D.061425%2Cu.pickedStringBaseExpression%3D.025%2Cu.distortionBaseVolume%3D.011%2Cu.bitcrusherBaseVolume%3D.01%2Cu.rawChipWaves%3DS(%5B%7Bname%3A%22rounded%22%2Cexpression%3A.94%2Csamples%3Ac(%5B0%2C.2%2C.4%2C.5%2C.6%2C.7%2C.8%2C.85%2C.9%2C.95%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C.95%2C.9%2C.85%2C.8%2C.7%2C.6%2C.5%2C.4%2C.2%2C0%2C-.2%2C-.4%2C-.5%2C-.6%2C-.7%2C-.8%2C-.85%2C-.9%2C-.95%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-.95%2C-.9%2C-.85%2C-.8%2C-.7%2C-.6%2C-.5%2C-.4%2C-.2%5D)%7D%2C%7Bname%3A%22triangle%22%2Cexpression%3A1%2Csamples%3Ac(%5B1%2F15%2C.2%2C5%2F15%2C7%2F15%2C.6%2C11%2F15%2C13%2F15%2C1%2C1%2C13%2F15%2C11%2F15%2C.6%2C7%2F15%2C5%2F15%2C.2%2C1%2F15%2C-1%2F15%2C-.2%2C-5%2F15%2C-7%2F15%2C-.6%2C-11%2F15%2C-13%2F15%2C-1%2C-1%2C-13%2F15%2C-11%2F15%2C-.6%2C-7%2F15%2C-5%2F15%2C-.2%2C-1%2F15%5D)%7D%2C%7Bname%3A%22square%22%2Cexpression%3A.5%2Csamples%3Ac(%5B1%2C-1%5D)%7D%2C%7Bname%3A%221%2F4%20pulse%22%2Cexpression%3A.5%2Csamples%3Ac(%5B1%2C-1%2C-1%2C-1%5D)%7D%2C%7Bname%3A%221%2F8%20pulse%22%2Cexpression%3A.5%2Csamples%3Ac(%5B1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%5D)%7D%2C%7Bname%3A%22sawtooth%22%2Cexpression%3A.65%2Csamples%3Ac(%5B1%2F31%2C3%2F31%2C5%2F31%2C7%2F31%2C9%2F31%2C11%2F31%2C13%2F31%2C15%2F31%2C17%2F31%2C19%2F31%2C21%2F31%2C23%2F31%2C25%2F31%2C27%2F31%2C29%2F31%2C1%2C-1%2C-29%2F31%2C-27%2F31%2C-25%2F31%2C-23%2F31%2C-21%2F31%2C-19%2F31%2C-17%2F31%2C-15%2F31%2C-13%2F31%2C-11%2F31%2C-9%2F31%2C-7%2F31%2C-5%2F31%2C-3%2F31%2C-1%2F31%5D)%7D%2C%7Bname%3A%22double%20saw%22%2Cexpression%3A.5%2Csamples%3Ac(%5B0%2C-.2%2C-.4%2C-.6%2C-.8%2C-1%2C1%2C-.8%2C-.6%2C-.4%2C-.2%2C1%2C.8%2C.6%2C.4%2C.2%5D)%7D%2C%7Bname%3A%22double%20pulse%22%2Cexpression%3A.4%2Csamples%3Ac(%5B1%2C1%2C1%2C1%2C1%2C-1%2C-1%2C-1%2C1%2C1%2C1%2C1%2C-1%2C-1%2C-1%2C-1%5D)%7D%2C%7Bname%3A%22spiky%22%2Cexpression%3A.4%2Csamples%3Ac(%5B1%2C-1%2C1%2C-1%2C1%2C0%5D)%7D%2C%7Bname%3A%22sine%22%2Cexpression%3A.88%2Csamples%3Ap(%5B8%2C9%2C11%2C12%2C13%2C14%2C15%2C15%2C15%2C15%2C14%2C14%2C13%2C11%2C10%2C9%2C7%2C6%2C4%2C3%2C2%2C1%2C0%2C0%2C0%2C0%2C1%2C1%2C2%2C4%2C5%2C6%5D)%7D%2C%7Bname%3A%22flute%22%2Cexpression%3A.8%2Csamples%3Ap(%5B3%2C4%2C6%2C8%2C10%2C11%2C13%2C14%2C15%2C15%2C14%2C13%2C11%2C8%2C5%2C3%5D)%7D%2C%7Bname%3A%22harp%22%2Cexpression%3A.8%2Csamples%3Ap(%5B0%2C3%2C3%2C3%2C4%2C5%2C5%2C6%2C7%2C8%2C9%2C11%2C11%2C13%2C13%2C15%2C15%2C14%2C12%2C11%2C10%2C9%2C8%2C7%2C7%2C5%2C4%2C3%2C2%2C1%2C0%2C0%5D)%7D%2C%7Bname%3A%22sharp%20clarinet%22%2Cexpression%3A.38%2Csamples%3Ap(%5B0%2C0%2C0%2C1%2C1%2C8%2C8%2C9%2C9%2C9%2C8%2C8%2C8%2C8%2C8%2C9%2C9%2C7%2C9%2C9%2C10%2C4%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%5D)%7D%2C%7Bname%3A%22soft%20clarinet%22%2Cexpression%3A.45%2Csamples%3Ap(%5B0%2C1%2C5%2C8%2C9%2C9%2C9%2C9%2C9%2C9%2C9%2C11%2C11%2C12%2C13%2C12%2C10%2C9%2C7%2C6%2C4%2C3%2C3%2C3%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%5D)%7D%2C%7Bname%3A%22alto%20sax%22%2Cexpression%3A.3%2Csamples%3Ap(%5B5%2C5%2C6%2C4%2C3%2C6%2C8%2C7%2C2%2C1%2C5%2C6%2C5%2C4%2C5%2C7%2C9%2C11%2C13%2C14%2C14%2C14%2C14%2C13%2C10%2C8%2C7%2C7%2C4%2C3%2C4%2C2%5D)%7D%2C%7Bname%3A%22bassoon%22%2Cexpression%3A.35%2Csamples%3Ap(%5B9%2C9%2C7%2C6%2C5%2C4%2C4%2C4%2C4%2C5%2C7%2C8%2C9%2C10%2C11%2C13%2C13%2C11%2C10%2C9%2C7%2C6%2C4%2C2%2C1%2C1%2C1%2C2%2C2%2C5%2C11%2C14%5D)%7D%2C%7Bname%3A%22trumpet%22%2Cexpression%3A.22%2Csamples%3Ap(%5B10%2C11%2C8%2C6%2C5%2C5%2C5%2C6%2C7%2C7%2C7%2C7%2C6%2C6%2C7%2C7%2C7%2C7%2C7%2C6%2C6%2C6%2C6%2C6%2C6%2C6%2C6%2C7%2C8%2C9%2C11%2C14%5D)%7D%2C%7Bname%3A%22electric%20guitar%22%2Cexpression%3A.2%2Csamples%3Ap(%5B11%2C12%2C12%2C10%2C6%2C6%2C8%2C0%2C2%2C4%2C8%2C10%2C9%2C10%2C1%2C7%2C11%2C3%2C6%2C6%2C8%2C13%2C14%2C2%2C0%2C12%2C8%2C4%2C13%2C11%2C10%2C13%5D)%7D%2C%7Bname%3A%22organ%22%2Cexpression%3A.2%2Csamples%3Ap(%5B11%2C10%2C12%2C11%2C14%2C7%2C5%2C5%2C12%2C10%2C10%2C9%2C12%2C6%2C4%2C5%2C13%2C12%2C12%2C10%2C12%2C5%2C2%2C2%2C8%2C6%2C6%2C5%2C8%2C3%2C2%2C1%5D)%7D%2C%7Bname%3A%22pan%20flute%22%2Cexpression%3A.35%2Csamples%3Ap(%5B1%2C4%2C7%2C6%2C7%2C9%2C7%2C7%2C11%2C12%2C13%2C15%2C13%2C11%2C11%2C12%2C13%2C10%2C7%2C5%2C3%2C6%2C10%2C7%2C3%2C3%2C1%2C0%2C1%2C0%2C1%2C0%5D)%7D%2C%7Bname%3A%22glitch%22%2Cexpression%3A.5%2Csamples%3Ac(%5B1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C-1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C-1%2C-1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C-1%2C-1%2C-1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C-1%2C-1%2C-1%2C-1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C-1%2C-1%2C-1%2C-1%2C-1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C-1%2C-1%2C-1%2C-1%2C-1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C-1%2C-1%2C-1%2C-1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C-1%2C-1%2C-1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C-1%2C-1%5D)%7D%2C%7Bname%3A%22trapezoid%22%2Cexpression%3A1%2Csamples%3Ac(%5B1%2F15%2C.4%2C10%2F15%2C14%2F15%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C14%2F15%2C10%2F15%2C.4%2C1%2F15%2C-1%2F15%2C-.4%2C-10%2F15%2C-14%2F15%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-14%2F15%2C-10%2F15%2C-.4%2C-1%2F15%5D)%7D%2C%7Bname%3A%22modbox%2010%25%20pulse%22%2Cexpression%3A.5%2Csamples%3Ap(%5B1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%5D)%7D%2C%7Bname%3A%22modbox%20sunsoft%20bass%22%2Cexpression%3A1%2Csamples%3Ap(%5B0%2C.1875%2C.3125%2C.5625%2C.5%2C.75%2C.875%2C1%2C1%2C.6875%2C.5%2C.625%2C.625%2C.5%2C.375%2C.5625%2C.4375%2C.5625%2C.4375%2C.4375%2C.3125%2C.1875%2C.1875%2C.375%2C.5625%2C.5625%2C.5625%2C.5625%2C.5625%2C.4375%2C.25%2C0%5D)%7D%2C%7Bname%3A%22modbox%20loud%20pulse%22%2Cexpression%3A.5%2Csamples%3Ap(%5B1%2C.7%2C.1%2C.1%2C0%2C0%2C0%2C0%2C0%2C.1%2C.2%2C.15%2C.25%2C.125%2C.215%2C.345%2C4%5D)%7D%2C%7Bname%3A%22modbox%20sax%22%2Cexpression%3A.5%2Csamples%3Ap(%5B1%2F15%2C.2%2C5%2F15%2C9%2C.06%5D)%7D%2C%7Bname%3A%22modbox%20guitar%22%2Cexpression%3A.5%2Csamples%3Ap(%5B-.5%2C3.5%2C3%2C-.5%2C-.25%2C-1%5D)%7D%2C%7Bname%3A%22modbox%20sine%22%2Cexpression%3A.5%2Csamples%3Ap(%5B0%2C.05%2C.125%2C.2%2C.25%2C.3%2C.425%2C.475%2C.525%2C.625%2C.675%2C.725%2C.775%2C.8%2C.825%2C.875%2C.9%2C.925%2C.95%2C.975%2C.98%2C.99%2C.995%2C1%2C.995%2C.99%2C.98%2C.975%2C.95%2C.925%2C.9%2C.875%2C.825%2C.8%2C.775%2C.725%2C.675%2C.625%2C.525%2C.475%2C.425%2C.3%2C.25%2C.2%2C.125%2C.05%2C0%2C-.05%2C-.125%2C-.2%2C-.25%2C-.3%2C-.425%2C-.475%2C-.525%2C-.625%2C-.675%2C-.725%2C-.775%2C-.8%2C-.825%2C-.875%2C-.9%2C-.925%2C-.95%2C-.975%2C-.98%2C-.99%2C-.995%2C-1%2C-.995%2C-.99%2C-.98%2C-.975%2C-.95%2C-.925%2C-.9%2C-.875%2C-.825%2C-.8%2C-.775%2C-.725%2C-.675%2C-.625%2C-.525%2C-.475%2C-.425%2C-.3%2C-.25%2C-.2%2C-.125%2C-.05%5D)%7D%2C%7Bname%3A%22modbox%20atari%20bass%22%2Cexpression%3A.5%2Csamples%3Ap(%5B1%2C1%2C1%2C1%2C0%2C1%2C0%2C1%2C1%2C0%2C0%2C1%2C0%2C0%2C0%5D)%7D%2C%7Bname%3A%22modbox%20atari%20pulse%22%2Cexpression%3A.5%2Csamples%3Ap(%5B1%2C0%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%5D)%7D%2C%7Bname%3A%22modbox%201%25%20pulse%22%2Cexpression%3A.5%2Csamples%3Ap(%5B1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%5D)%7D%2C%7Bname%3A%22modbox%20curved%20sawtooth%22%2Cexpression%3A.5%2Csamples%3Ap(%5B1%2C.5%2C1%2F3%2C1%2F4%5D)%7D%2C%7Bname%3A%22modbox%20viola%22%2Cexpression%3A.45%2Csamples%3Ap(%5B-.9%2C-1%2C-.85%2C-.775%2C-.7%2C-.6%2C-.5%2C-.4%2C-.325%2C-.225%2C-.2%2C-.125%2C-.1%2C-.11%2C-.125%2C-.15%2C-.175%2C-.18%2C-.2%2C-.21%2C-.22%2C-.21%2C-.2%2C-.175%2C-.15%2C-.1%2C-.5%2C.75%2C.11%2C.175%2C.2%2C.25%2C.26%2C.275%2C.26%2C.25%2C.225%2C.2%2C.19%2C.18%2C.19%2C.2%2C.21%2C.22%2C.23%2C.24%2C.25%2C.26%2C.275%2C.28%2C.29%2C.3%2C.29%2C.28%2C.27%2C.26%2C.25%2C.225%2C.2%2C.175%2C.15%2C.1%2C.075%2C0%2C-.01%2C-.025%2C.025%2C.075%2C.2%2C.3%2C.475%2C.6%2C.75%2C.85%2C.85%2C1%2C.99%2C.95%2C.8%2C.675%2C.475%2C.275%2C.01%2C-.15%2C-.3%2C-.475%2C-.5%2C-.6%2C-.71%2C-.81%2C-.9%2C-1%2C-.9%5D)%7D%2C%7Bname%3A%22modbox%20brass%22%2Cexpression%3A.45%2Csamples%3Ap(%5B-1%2C-.95%2C-.975%2C-.9%2C-.85%2C-.8%2C-.775%2C-.65%2C-.6%2C-.5%2C-.475%2C-.35%2C-.275%2C-.2%2C-.125%2C-.05%2C0%2C.075%2C.125%2C.15%2C.2%2C.21%2C.225%2C.25%2C.225%2C.21%2C.2%2C.19%2C.175%2C.125%2C.1%2C.075%2C.06%2C.05%2C.04%2C.025%2C.04%2C.05%2C.1%2C.15%2C.225%2C.325%2C.425%2C.575%2C.7%2C.85%2C.95%2C1%2C.9%2C.675%2C.375%2C.2%2C.275%2C.4%2C.5%2C.55%2C.6%2C.625%2C.65%2C.65%2C.65%2C.65%2C.64%2C.6%2C.55%2C.5%2C.4%2C.325%2C.25%2C.15%2C.05%2C-.05%2C-.15%2C-.275%2C-.35%2C-.45%2C-.55%2C-.65%2C-.7%2C-.78%2C-.825%2C-.9%2C-.925%2C-.95%2C-.975%5D)%7D%2C%7Bname%3A%22modbox%20acoustic%20bass%22%2Cexpression%3A.5%2Csamples%3Ap(%5B1%2C0%2C.1%2C-.1%2C-.2%2C-.4%2C-.3%2C-1%5D)%7D%2C%7Bname%3A%22modbox%20lyre%22%2Cexpression%3A.45%2Csamples%3Ap(%5B1%2C-1%2C4%2C2.15%2C4.13%2C5.15%2C0%2C-.05%2C1%5D)%7D%2C%7Bname%3A%22modbox%20ramp%20pulse%22%2Cexpression%3A.5%2Csamples%3Ap(%5B6.1%2C-2.9%2C1.4%2C-2.9%5D)%7D%2C%7Bname%3A%22modbox%20piccolo%22%2Cexpression%3A.5%2Csamples%3Ap(%5B1%2C4%2C2%2C1%2C-.1%2C-1%2C-.12%5D)%7D%2C%7Bname%3A%22modbox%20squaretooth%22%2Cexpression%3A.5%2Csamples%3Ap(%5B.2%2C1%2C2.6%2C1%2C0%2C-2.4%5D)%7D%2C%7Bname%3A%22modbox%20flatline%22%2Cexpression%3A1%2Csamples%3Ap(%5B1%2C.9%2C.8%2C.7%2C.6%2C.5%2C.4%2C.3%2C.2%2C.1%2C0%2C.1%2C.2%2C.3%2C.4%2C.5%2C.6%2C.7%2C.8%2C.9%5D)%7D%2C%7Bname%3A%22modbox%20pnryshk%20a%20(u5)%22%2Cexpression%3A.4%2Csamples%3Ap(%5B1%2C.9%2C.8%2C.7%2C.6%2C.5%2C.4%2C.3%2C.2%2C.1%2C0%5D)%7D%2C%7Bname%3A%22modbox%20pnryshk%20b%20(riff)%22%2Cexpression%3A.5%2Csamples%3Ap(%5B1%2C-.9%2C.8%2C-.7%2C.6%2C-.5%2C.4%2C-.3%2C.2%2C-.1%2C0%2C-.1%2C.2%2C-.3%2C.4%2C-.5%2C.6%2C-.7%2C.8%2C-.9%2C1%5D)%7D%2C%7Bname%3A%22sandbox%20shrill%20lute%22%2Cexpression%3A.94%2Csamples%3Ap(%5B1%2C1.5%2C1.25%2C1.2%2C1.3%2C1.5%5D)%7D%2C%7Bname%3A%22sandbox%20bassoon%22%2Cexpression%3A.5%2Csamples%3Ap(%5B1%2C-1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C0%5D)%7D%2C%7Bname%3A%22sandbox%20shrill%20bass%22%2Cexpression%3A.5%2Csamples%3Ap(%5B0%2C1%2C0%2C0%2C1%2C0%2C1%2C0%2C0%2C0%5D)%7D%2C%7Bname%3A%22sandbox%20nes%20pulse%22%2Cexpression%3A.4%2Csamples%3Ap(%5B2.1%2C-2.2%2C1.2%2C3%5D)%7D%2C%7Bname%3A%22sandbox%20saw%20bass%22%2Cexpression%3A.25%2Csamples%3Ap(%5B1%2C1%2C1%2C1%2C0%2C2%2C1%2C2%2C3%2C1%2C-2%2C1%2C4%2C1%2C4%2C2%2C1%2C6%2C-3%2C4%2C2%2C1%2C5%2C1%2C4%2C1%2C5%2C6%2C7%2C1%2C6%2C1%2C4%2C1%2C9%5D)%7D%2C%7Bname%3A%22sandbox%20euphonium%22%2Cexpression%3A.3%2Csamples%3Ap(%5B0%2C1%2C2%2C1%2C2%2C1%2C4%2C2%2C5%2C0%2C-2%2C1%2C5%2C1%2C2%2C1%2C2%2C4%2C5%2C1%2C5%2C-2%2C5%2C10%2C1%5D)%7D%2C%7Bname%3A%22sandbox%20shrill%20pulse%22%2Cexpression%3A.3%2Csamples%3Ap(%5B2%2C0%2C4%2C1%2C4%2C6%2C7%2C3%5D)%7D%2C%7Bname%3A%22sandbox%20r-sawtooth%22%2Cexpression%3A.2%2Csamples%3Ap(%5B6.1%2C-2.9%2C1.4%2C-2.9%5D)%7D%2C%7Bname%3A%22sandbox%20recorder%22%2Cexpression%3A.2%2Csamples%3Ap(%5B5%2C-5.1%2C4%2C-4.1%2C3%2C-3.1%2C2%2C-2.1%2C1%2C-1.1%2C6%5D)%7D%2C%7Bname%3A%22sandbox%20narrow%20saw%22%2Cexpression%3A1.2%2Csamples%3Ap(%5B.1%2C-1.3%2C.13%2F-.3%2C-.26%2C.13%2F-.7%2C.13%2F-.9%2C.13%2F-.11%2C.13%2F-.31%2C.13%2F-.51%2C.13%2F-.71%2C.13%2F-.91%2C.13%2F-.12%2C-.40625%2C-.25%2C.13%2F-.72%2C.13%2F-.92%2C-1%2C1%2C.13%2F.92%2C.13%2F.72%2C.25%2C.40625%2C.13%2F.12%2C.13%2F.91%2C.13%2F.71%2C.13%2F.51%2C.13%2F.31%2C.13%2F.11%2C.13%2F.9%2C.13%2F.7%2C.26%2C.13%2F.3%2C.13%5D)%7D%2C%7Bname%3A%22sandbox%20deep%20square%22%2Cexpression%3A1%2Csamples%3Ap(%5B1%2C2.25%2C1%2C-1%2C-2.25%2C-1%5D)%7D%2C%7Bname%3A%22sandbox%20ring%20pulse%22%2Cexpression%3A1%2Csamples%3Ap(%5B1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%5D)%7D%2C%7Bname%3A%22sandbox%20double%20sine%22%2Cexpression%3A1%2Csamples%3Ap(%5B1%2C1.1%2C1.2%2C1.3%2C1.4%2C1.5%2C1.6%2C1.7%2C1.8%2C1.9%2C1.8%2C1.7%2C1.6%2C1.5%2C1.4%2C1.3%2C1.2%2C1.1%2C1%2C0%2C-1%2C-1.1%2C-1.2%2C-1.3%2C-1.4%2C-1.5%2C-1.6%2C-1.7%2C-1.8%2C-1.9%2C-1.8%2C-1.7%2C-1.6%2C-1.5%2C-1.4%2C-1.3%2C-1.2%2C-1.1%2C-1%5D)%7D%2C%7Bname%3A%22sandbox%20contrabass%22%2Cexpression%3A.5%2Csamples%3Ap(%5B4.2%2C6.9%2C1.337%2C6.66%5D)%7D%2C%7Bname%3A%22sandbox%20double%20bass%22%2Cexpression%3A.4%2Csamples%3Ap(%5B0%2C.1875%2C.3125%2C.5625%2C.5%2C.75%2C.875%2C1%2C-1%2C-.6875%2C-.5%2C-.625%2C-.625%2C-.5%2C-.375%2C-.5625%2C-.4375%2C-.5625%2C-.4375%2C-.4375%2C-.3125%2C-.1875%2C.1875%2C.375%2C.5625%2C-.5625%2C.5625%2C.5625%2C.5625%2C.4375%2C.25%2C0%5D)%7D%2C%7Bname%3A%22haileybox%20test1%22%2Cexpression%3A.5%2Csamples%3Ap(%5B1%2C.5%2C-1%5D)%7D%2C%7Bname%3A%22brucebox%20pokey%204bit%20lfsr%22%2Cexpression%3A.5%2Csamples%3Ap(%5B1%2C-1%2C-1%2C-1%2C1%2C1%2C1%2C1%2C-1%2C1%2C-1%2C1%2C1%2C-1%2C-1%5D)%7D%2C%7Bname%3A%22brucebox%20pokey%205step%20bass%22%2Cexpression%3A.5%2Csamples%3Ap(%5B1%2C-1%2C1%2C-1%2C1%5D)%7D%2C%7Bname%3A%22brucebox%20isolated%20spiky%22%2Cexpression%3A.5%2Csamples%3Ap(%5B1%2C-1%2C1%2C-1%2C1%2C-1%5D)%7D%2C%7Bname%3A%22nerdbox%20unnamed%201%22%2Cexpression%3A.5%2Csamples%3Ap(%5B.2%2C4%2C.7%2C-.4%2C-1%2C.5%2C-.5%2F.6%5D)%7D%2C%7Bname%3A%22nerdbox%20unnamed%202%22%2Cexpression%3A.5%2Csamples%3Ap(%5B2%2C5%2F55%2C-9%2C1%2C-55%2C18.5%2F-26%5D)%7D%2C%7Bname%3A%22zefbox%20semi-square%22%2Cexpression%3A1%2Csamples%3Ap(%5B1%2C1.5%2C2%2C2.5%2C2.5%2C2.5%2C2%2C1.5%2C1%5D)%7D%2C%7Bname%3A%22zefbox%20deep%20square%22%2Cexpression%3A1%2Csamples%3Ap(%5B1%2C2.25%2C1%2C-1%2C-2.25%2C-1%5D)%7D%2C%7Bname%3A%22zefbox%20squaretal%22%2Cexpression%3A.7%2Csamples%3Ap(%5B1.5%2C1%2C1.5%2C-1.5%2C-1%2C-1.5%5D)%7D%2C%7Bname%3A%22zefbox%20saw%20wide%22%2Cexpression%3A.65%2Csamples%3Ap(%5B0%2C-.4%2C-.8%2C-1.2%2C-1.6%2C-2%2C0%2C-.4%2C-.8%2C-1.2%2C-1.6%5D)%7D%2C%7Bname%3A%22zefbox%20saw%20narrow%22%2Cexpression%3A.65%2Csamples%3Ap(%5B1%2C.5%2C1%2C.5%2C1%2C.5%2C1%2C2%2C1%2C2%2C1%5D)%7D%2C%7Bname%3A%22zefbox%20deep%20sawtooth%22%2Cexpression%3A.5%2Csamples%3Ap(%5B0%2C2%2C3%2C4%2C4.5%2C5%2C5.5%2C6%2C6.25%2C6.5%2C6.75%2C7%2C6.75%2C6.5%2C6.25%2C6%2C5.5%2C5%2C4.5%2C4%2C3%2C2%2C1%5D)%7D%2C%7Bname%3A%22zefbox%20sawtal%22%2Cexpression%3A.3%2Csamples%3Ap(%5B1.5%2C1%2C1.25%2C-.5%2C1.5%2C-.5%2C0%2C-1.5%2C1.5%2C0%2C.5%2C-1.5%2C.5%2C1.25%2C-1%2C-1.5%5D)%7D%2C%7Bname%3A%22zefbox%20deep%20sawtal%22%2Cexpression%3A.7%2Csamples%3Ap(%5B.75%2C.25%2C.5%2C-.5%2C.5%2C-.5%2C-.25%2C-.75%5D)%7D%2C%7Bname%3A%22zefbox%20pulse%22%2Cexpression%3A.5%2Csamples%3Ap(%5B1%2C-2%2C-2%2C-1.5%2C-1.5%2C-1.25%2C-1.25%2C-1%2C-1%5D)%7D%2C%7Bname%3A%22zefbox%20triple%20pulse%22%2Cexpression%3A.4%2Csamples%3Ap(%5B1%2C1%2C1%2C1%2C1%2C-1%2C-1%2C1.5%2C1%2C1%2C1%2C1%2C-1%2C-1%2C-1%2C1.5%5D)%7D%2C%7Bname%3A%22zefbox%20high%20pulse%22%2Cexpression%3A.2%2Csamples%3Ap(%5B1%2C-2%2C2%2C-3%2C3%2C-4%2C5%2C-4%2C3%2C-3%2C2%2C-2%2C1%5D)%7D%2C%7Bname%3A%22zefbox%20deep%20pulse%22%2Cexpression%3A.2%2Csamples%3Ap(%5B1%2C2%2C2%2C-2%2C-2%2C-3%2C-4%2C-4%2C-5%2C-5%2C-5%2C-5%2C0%2C-1%2C-2%5D)%7D%2C%7Bname%3A%22wackybox%20guitar%20string%22%2Cexpression%3A.6%2Csamples%3Ap(%5B0%2C63%2C63%2C63%2C63%2C19%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C11%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C27%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C63%2C34%2C63%2C63%2C63%2C63%5D)%7D%2C%7Bname%3A%22wackybox%20intense%22%2Cexpression%3A.6%2Csamples%3Ap(%5B36%2C25%2C33%2C35%2C18%2C51%2C22%2C40%2C27%2C37%2C31%2C33%2C25%2C29%2C41%2C23%2C31%2C31%2C45%2C20%2C37%2C23%2C29%2C26%2C42%2C29%2C33%2C26%2C31%2C27%2C40%2C25%2C40%2C26%2C37%2C24%2C41%2C32%2C0%2C32%2C33%2C29%2C32%2C31%2C31%2C31%2C31%2C31%2C31%2C31%2C31%2C31%2C31%2C31%2C31%2C31%2C31%2C31%2C31%2C31%2C31%2C31%2C31%2C31%5D)%7D%2C%7Bname%3A%22wackybox%20buzz%20wave%22%2Cexpression%3A.6%2Csamples%3Ap(%5B0%2C1%2C1%2C2%2C4%2C4%2C4%2C4%2C5%2C5%2C6%2C6%2C6%2C7%2C8%2C8%2C8%2C9%2C9%2C9%2C9%2C9%2C9%2C8%2C8%2C8%2C11%2C15%2C23%2C62%2C61%2C60%2C58%2C56%2C56%2C54%2C53%2C52%2C50%2C49%2C48%2C47%2C47%2C45%2C45%2C45%2C44%2C44%2C43%2C43%2C42%2C42%2C42%2C42%2C42%2C42%2C42%2C42%2C42%2C42%2C42%2C43%2C43%2C53%5D)%7D%2C%7Bname%3A%22todbox%201%2F3%20pulse%22%2Cexpression%3A.5%2Csamples%3Ac(%5B1%2C-1%2C-1%5D)%7D%2C%7Bname%3A%22todbox%201%2F5%20pulse%22%2Cexpression%3A.5%2Csamples%3Ac(%5B1%2C-1%2C-1%2C-1%2C-1%5D)%7D%2C%7Bname%3A%22todbox%20slap%20bass%22%2Cexpression%3A.5%2Csamples%3Ap(%5B1%2C.5%2C0%2C.5%2C1.25%2C.5%2C-.25%2C.1%2C-.1%2C.1%2C1.1%2C2.1%2C3%2C3.5%2C2.9%2C3.3%2C2.7%2C2.9%2C2.3%2C2%2C1.9%2C1.8%2C1%2C.7%2C.9%2C.8%2C.4%2C.1%2C0%2C.2%2C.4%2C.6%2C.5%2C.8%5D)%7D%2C%7Bname%3A%22todbox%20harsh%20wave%22%2Cexpression%3A.45%2Csamples%3Ap(%5B1%2C-1%2C-1%2C-1%2C.5%2C.5%2C.5%2C.7%2C.39%2C1.3%2C0%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%2C-1%5D)%7D%2C%7Bname%3A%22todbox%20accordian%22%2Cexpression%3A.5%2Csamples%3Ap(%5B0%2C1%2C1%2C2%2C2%2C1.5%2C1.5%2C.8%2C0%2C-2%2C-3.25%2C-4%2C-4.5%2C-5.5%2C-6%2C-5.75%2C-5.5%2C-5%2C-5%2C-5%2C-6%2C-6%2C-6%2C-5%2C-4%2C-3%2C-2%2C-1%2C.75%2C1%2C2%2C3%2C4%2C5%2C6%2C6.5%2C7.5%2C8%2C7.75%2C6%2C5.25%2C5%2C5%2C5%2C5%2C5%2C4.25%2C3.75%2C3.25%2C2.75%2C1.25%2C-.75%2C-2%2C-.75%2C1.25%2C1.25%2C2%2C2%2C2%2C2%2C1.5%2C-1%2C-2%2C-1%2C1.5%2C2%2C2.75%2C2.75%2C2.75%2C3%2C2.75%2C-1%2C-2%2C-2.5%2C-2%2C-1%2C-2.25%2C-2.75%2C-2%2C-3%2C-1.75%2C1%2C2%2C3.5%2C4%2C5.25%2C6%2C8%2C9.75%2C10%2C9.5%2C9%2C8.5%2C7.5%2C6.5%2C5.25%2C5%2C4.5%2C4%2C4%2C4%2C3.25%2C2.5%2C2%2C1%2C-.5%2C-2%2C-3.5%2C-4%2C-4%2C-4%2C-3.75%2C-3%2C-2%2C-1%5D)%7D%2C%7Bname%3A%22todbox%20beta%20banana%20wave%22%2Cexpression%3A.8%2Csamples%3Ap(%5B0%2C.2%2C.4%2C.5%2C.6%2C.7%2C.8%2C.85%2C.9%2C.95%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C1%2C.95%2C.9%2C.85%2C.8%2C.7%2C.6%2C.5%2C.4%2C.2%2C0%5D)%7D%2C%7Bname%3A%22todbox%20beta%20test%20wave%22%2Cexpression%3A.5%2Csamples%3Ap(%5B56%2C0%2C-52%2C16%2C3%2C3%2C2%2C-35%2C20%2C147%2C-53%2C0%2C0%2C5%2C-6%5D)%7D%2C%7Bname%3A%22todbox%20beta%20real%20snare%22%2Cexpression%3A1%2Csamples%3Ap(%5B0%2C-.01208%2C-.02997%2C-.04382%2C-.06042%2C-.07529%2C-.09116%2C-.10654%2C-.12189%2C-.13751%2C-.15289%2C-.16849%2C-.18387%2C-.19974%2C-.21484%2C-.23071%2C-.24557%2C-.26144%2C-.27731%2C-.29141%2C-.3035%2C-.32416%2C-.34406%2C-.32947%2C-.31158%2C-.33725%2C-.37579%2C-.39746%2C-.40201%2C-.40906%2C-.4418%2C-.47229%2C-.47379%2C-.47733%2C-.45239%2C-.33954%2C-.22894%2C-.22443%2C-.32138%2C-.46371%2C-.57178%2C-.61081%2C-.59998%2C-.61459%2C-.62189%2C-.43979%2C-.19217%2C-.12643%2C-.17252%2C-.20956%2C-.20981%2C-.19217%2C-.22845%2C-.34332%2C-.50629%2C-.64307%2C-.72922%2C-.81384%2C-.87857%2C-.90149%2C-.88687%2C-.86169%2C-.87781%2C-.80478%2C-.52493%2C-.31308%2C-.33249%2C-.39395%2C-.39017%2C-.30301%2C-.19949%2C-.13071%2C-.02493%2C.14307%2C.34961%2C.52542%2C.63223%2C.68613%2C.7471%2C.87305%2C.98184%2C.98889%2C.97052%2C.99066%2C.99747%2C.99344%2C.99469%2C.99393%2C.9957%2C.99393%2C.99521%2C.99469%2C.9942%2C.99521%2C.9942%2C.99521%2C.99469%2C.99469%2C.99521%2C.9942%2C.99545%2C.99445%2C.99469%2C.99493%2C.9942%2C.99521%2C.99393%2C.99493%2C.99469%2C.99445%2C.9957%2C.99445%2C.99521%2C.99469%2C.99469%2C.99521%2C.9942%2C.99545%2C.99445%2C.99445%2C.99493%2C.9942%2C.99545%2C.9942%2C.99493%2C.99493%2C.9942%2C.99545%2C.99445%2C.99521%2C.99469%2C.99445%2C.99545%2C.99368%2C.99393%2C.99445%2C.99268%2C.97983%2C.97229%2C.95944%2C.88486%2C.76773%2C.64481%2C.53098%2C.39847%2C.19318%2C-.03827%2C-.20325%2C-.39319%2C-.68765%2C-.88461%2C-.93448%2C-.96069%2C-.97681%2C-.98715%2C-.99042%2C-.99142%2C-.99091%2C-.99142%2C-.99219%2C-.99091%2C-.99219%2C-.99066%2C-.99142%2C-.99142%2C-.99118%2C-.99191%2C-.99066%2C-.99191%2C-.99142%2C-.99142%2C-.99191%2C-.99091%2C-.99219%2C-.99118%2C-.99142%2C-.99167%2C-.99091%2C-.99219%2C-.99091%2C-.99167%2C-.99142%2C-.99091%2C-.99191%2C-.99091%2C-.99191%2C-.99142%2C-.99118%2C-.99191%2C-.99066%2C-.99191%2C-.99118%2C-.99142%2C-.99191%2C-.99066%2C-.99191%2C-.99091%2C-.99167%2C-.99191%2C-.99118%2C-.99219%2C-.99091%2C-.99191%2C-.99142%2C-.99142%2C-.99243%2C-.98865%2C-.98764%2C-.99219%2C-.98083%2C-.92517%2C-.9277%2C-.91486%2C-.59042%2C-.15189%2C.02945%2C.05667%2C.06195%2C.00629%2C-.18008%2C-.56497%2C-.8801%2C-.9277%2C-.92871%2C-.97705%2C-.99167%2C-.98663%2C-.99118%2C-.99042%2C-.99219%2C-.99142%2C-.99118%2C-.98941%2C-.99219%2C-1%2C-.9758%2C-.95993%2C-.99948%2C-.98236%2C-.84659%2C-.7486%2C-.70679%2C-.59747%2C-.48035%2C-.41687%2C-.36826%2C-.29745%2C-.18185%2C-.06219%2C.02164%2C.07907%2C.13123%2C.18033%2C.1962%2C.15692%2C.14053%2C.20251%2C.2753%2C.30905%2C.29092%2C.27252%2C.30402%2C.32416%2C.32214%2C.35239%2C.3967%2C.43198%2C.4942%2C.58487%2C.64154%2C.65967%2C.6705%2C.67026%2C.66522%2C.6554%2C.66119%2C.70627%2C.75842%2C.78738%2C.7894%2C.78763%2C.80402%2C.85944%2C.94559%2C.9899%2C.9816%2C.98007%2C.99368%2C.99393%2C.98538%2C.9758%2C.97101%2C.93802%2C.81812%2C.64633%2C.46649%2C.28613%2C.14685%2C.08966%2C.12543%2C.20325%2C.24557%2C.18866%2C.02795%2C-.20175%2C-.44205%2C-.58713%2C-.57629%2C-.41385%2C-.14255%2C.18033%2C.47882%2C.68311%2C.72314%2C.62064%2C.48309%2C.43073%2C.53577%2C.72794%2C.9025%2C.97354%2C.97%2C.98083%2C.99191%2C.99319%2C.99493%2C.99393%2C.99521%2C.99393%2C.99545%2C.9942%2C.99493%2C.99493%2C.99445%2C.99545%2C.9942%2C.99545%2C.99243%2C.98917%2C.98386%2C.97781%2C.95844%2C.89066%2C.81561%2C.78134%2C.77277%2C.75995%2C.73022%2C.67126%2C.57178%2C.47%2C.38361%2C.29419%2C.20703%2C.14734%2C.15866%2C.25162%2C.35818%2C.45062%2C.5675%2C.69748%2C.81232%2C.89697%2C.95062%2C.97656%2C.98615%2C.99191%2C.99219%2C.99243%2C.99368%2C.99368%2C.97028%2C.95566%2C.94559%2C.82617%2C.59973%2C.38361%2C.23901%2C.15338%2C.12921%2C.11206%2C.04382%2C-.12946%2C-.43552%2C-.72644%2C-.89847%2C-.95465%2C-.95541%2C-.97229%2C-.99268%2C-.99319%2C-.9884%2C-.99142%2C-.99167%2C-.99091%2C-.9884%2C-.98965%2C-.99368%2C-.97455%2C-.9501%2C-.94684%2C-.96219%2C-.98514%2C-.99243%2C-.98889%2C-.98917%2C-.99142%2C-.99219%2C-.99091%2C-.99191%2C-.99142%2C-.99142%2C-.99191%2C-.99066%2C-.99167%2C-.99091%2C-.99142%2C-.99191%2C-.99091%2C-.99191%2C-.99091%2C-.99167%2C-.99167%2C-.99091%2C-.99219%2C-.99091%2C-.99191%2C-.99142%2C-.99118%2C-.99191%2C-.99066%2C-.99191%2C-.99091%2C-.99118%2C-.99243%2C-.98941%2C-.98462%2C-.96976%2C-.9632%2C-.96194%2C-.87305%2C-.66196%2C-.44809%2C-.29495%2C-.18085%2C-.11813%2C-.11334%2C-.18564%2C-.34885%2C-.58237%2C-.8045%2C-.93726%2C-.97806%2C-.97354%2C-.97531%2C-.9899%2C-.99368%2C-.98941%2C-.99219%2C-.99091%2C-.99142%2C-.99167%2C-.99091%2C-.99191%2C-.99118%2C-.99219%2C-.98236%2C-.97781%2C-.97656%2C-.95135%2C-.87204%2C-.71335%2C-.52139%2C-.34232%2C-.17783%2C-.00906%2C.14886%2C.3045%2C.48889%2C.67404%2C.8403%2C.94128%2C.97681%2C.98462%2C.98337%2C.99142%2C.99521%2C.99493%2C.9942%2C.99445%2C.99521%2C.99393%2C.99545%2C.99445%2C.99521%2C.99521%2C.99445%2C.9957%2C.99445%2C.99521%2C.99469%2C.99445%2C.99521%2C.9942%2C.99521%2C.99445%2C.99445%2C.99521%2C.99445%2C.99545%2C.99445%2C.99469%2C.99493%2C.99393%2C.99493%2C.99445%2C.99393%2C.98285%2C.97781%2C.97479%2C.92844%2C.82114%2C.66095%2C.52417%2C.46826%2C.46722%2C.47934%2C.47379%2C.47076%2C.48209%2C.42014%2C.25439%2C.10074%2C-.00302%2C-.08966%2C-.16068%2C-.21436%2C-.2204%2C-.15137%2C-.00476%2C.18536%2C.37631%2C.52292%2C.62164%2C.70425%2C.74835%2C.72366%2C.63928%2C.52567%2C.40805%2C.35666%2C.42896%2C.60175%2C.802%2C.92743%2C.96548%2C.97632%2C.98337%2C.99066%2C.99521%2C.9942%2C.99368%2C.99292%2C.9884%2C.98083%2C.96774%2C.93323%2C.8544%2C.6947%2C.47202%2C.20425%2C-.0889%2C-.36423%2C-.60025%2C-.77481%2C-.90173%2C-.96017%2C-.97028%2C-.98108%2C-.9884%2C-.99219%2C-.9899%2C-.99219%2C-.99142%2C-.99142%2C-.99219%2C-.99091%2C-.99243%2C-.99066%2C-.99142%2C-.99142%2C-.99118%2C-.99191%2C-.99066%2C-.99167%2C-.99142%2C-.99142%2C-.99219%2C-.99091%2C-.99191%2C-.99118%2C-.99142%2C-.99191%2C-.99091%2C-.99191%2C-.99091%2C-.99167%2C-.99191%2C-.99118%2C-.99219%2C-.99091%2C-.99167%2C-.99142%2C-.99142%2C-.99219%2C-.99091%2C-.99191%2C-.99142%2C-.99118%2C-.98917%2C-.99042%2C-.99445%2C-.9733%2C-.9559%2C-.96219%2C-.8967%2C-.72241%2C-.55112%2C-.44809%2C-.39319%2C-.37833%2C-.35641%2C-.2627%2C-.1423%2C-.11282%2C-.13525%2C-.11536%2C-.09671%2C-.11511%2C-.1806%2C-.26874%2C-.33374%2C-.42215%2C-.51358%2C-.44785%2C-.3045%2C-.28613%2C-.30527%2C-.25037%2C-.1539%2C-.08286%2C-.11157%2C-.12592%2C-.00327%2C.13803%2C.19141%2C.1282%2C.01788%2C-.03952%2C-.12592%2C-.26773%2C-.34634%2C-.31384%2C-.1806%2C-.0108%2C.13574%2C.2612%2C.36975%2C.46573%2C.55087%2C.63626%2C.73022%2C.83072%2C.92014%2C.97177%2C.98587%2C.98413%2C.99167%2C.99445%2C.99292%2C.99219%2C.9874%2C.98007%2C.96472%2C.92239%2C.82166%2C.69067%2C.57959%2C.54962%2C.59695%2C.64255%2C.64633%2C.60629%2C.55942%2C.5491%2C.58966%2C.61887%2C.56952%2C.54181%2C.59518%2C.63248%2C.63876%2C.65463%2C.73398%2C.88312%2C.96927%2C.97101%2C.97958%2C.99344%2C.9942%2C.99268%2C.99493%2C.99469%2C.99445%2C.99521%2C.99445%2C.99545%2C.9942%2C.99493%2C.99493%2C.9942%2C.99545%2C.9942%2C.99493%2C.9942%2C.99393%2C.9942%2C.9884%2C.98309%2C.98309%2C.96069%2C.88461%2C.7937%2C.72064%2C.65765%2C.59998%2C.53247%2C.49268%2C.48615%2C.44205%2C.38034%2C.36447%2C.38715%2C.39294%2C.32645%2C.19595%2C.07782%2C-.05893%2C-.27832%2C-.48309%2C-.62619%2C-.72995%2C-.79999%2C-.84583%2C-.82166%2C-.73575%2C-.67227%2C-.65491%2C-.6496%2C-.66397%2C-.70175%2C-.72894%2C-.74658%2C-.76724%2C-.7952%2C-.82846%2C-.86523%2C-.90527%2C-.94382%2C-.89948%2C-.69849%2C-.47479%2C-.31662%2C-.15414%2C-.00729%2C.07077%2C.08237%2C.04431%2C-.02292%2C-.11761%2C-.24307%2C-.36926%2C-.45087%2C-.4617%2C-.4025%2C-.30679%2C-.17529%2C0%2C.14331%2C.24179%2C.36774%2C.49545%2C.56522%2C.57907%2C.56775%2C.53851%2C.51132%2C.48688%2C.41913%2C.26044%2C.00955%2C-.26297%2C-.46396%2C-.62341%2C-.82214%2C-.94684%2C-.96774%2C-.97531%2C-.98413%2C-.99017%2C-.9899%2C-.99219%2C-.99066%2C-.99142%2C-.99167%2C-.99118%2C-.99219%2C-.9899%2C-.99118%2C-.99368%2C-.99142%2C-.97757%2C-.97403%2C-.98007%2C-.9617%2C-.86826%2C-.67783%2C-.52719%2C-.48788%2C-.4549%2C-.43146%2C-.47681%2C-.54105%2C-.57983%2C-.60904%2C-.62317%2C-.59949%2C-.55566%2C-.52063%2C-.52115%2C-.55112%2C-.56244%2C-.58337%2C-.6554%2C-.73373%2C-.77228%2C-.74759%2C-.6889%2C-.64609%2C-.61887%2C-.5806%2C-.50351%2C-.40729%2C-.33929%2C-.3511%2C-.42944%2C-.47028%2C-.42267%2C-.32718%2C-.20224%2C-.0564%2C.04556%2C.10529%2C.1763%2C.26169%2C.33197%2C.32138%2C.23776%2C.20956%2C.23148%2C.20352%2C.23325%2C.39267%2C.52719%2C.58438%2C.62289%2C.66345%2C.70023%2C.66296%2C.5433%2C.42618%2C.33475%2C.24533%2C.14105%2C.03851%2C.01358%2C.09143%2C.22845%2C.34961%2C.41711%2C.4874%2C.58914%2C.69519%2C.78186%2C.84357%2C.89822%2C.95389%2C.98135%2C.98615%2C.99167%2C.99243%2C.99445%2C.9942%2C.99469%2C.99493%2C.99393%2C.99545%2C.99445%2C.99521%2C.99469%2C.99445%2C.99521%2C.9942%2C.99469%2C.98965%2C.98715%2C.98563%2C.96295%2C.91736%2C.86624%2C.82367%2C.77554%2C.68411%2C.53549%2C.38916%2C.2612%2C.11435%2C-.04053%2C-.18161%2C-.23172%2C-.19394%2C-.15237%2C-.1073%2C-.02997%2C.08588%2C.2262%2C.34305%2C.44104%2C.5574%2C.65765%2C.71259%2C.69217%2C.65363%2C.69748%2C.79572%2C.89368%2C.95514%2C.97733%2C.98413%2C.98816%2C.99243%2C.99445%2C.99243%2C.97302%2C.96674%2C.97983%2C.90378%2C.71005%2C.51056%2C.40451%2C.40982%2C.41559%2C.32996%2C.24356%2C.18866%2C.11411%2C.05365%2C.01157%2C-.03247%2C-.09216%2C-.16095%2C-.23248%2C-.31662%2C-.39771%2C-.48663%2C-.59647%2C-.71536%2C-.82013%2C-.85287%2C-.82947%2C-.84937%2C-.92215%2C-.97177%2C-.98663%2C-.98816%2C-.98438%2C-.99091%2C-.99219%2C-.99091%2C-.99191%2C-.99042%2C-.99191%2C-.99091%2C-.99142%2C-.99191%2C-.99091%2C-.99191%2C-.99091%2C-.99167%2C-.99142%5D)%7D%2C%7Bname%3A%22ultrabox%20shortened%20od%20guitar%22%2Cexpression%3A.5%2Csamples%3Ap(%5B-.82785%2C-.67621%2C-.40268%2C-.43817%2C-.45468%2C-.22531%2C-.18329%2C.2475%2C.71246%2C.52155%2C.56082%2C.48395%2C.3399%2C.46957%2C.27744%2C.42313%2C.47104%2C.18796%2C.1293%2C-.13901%2C-.07431%2C-.16348%2C-.74857%2C-.73206%2C-.35181%2C-.26227%2C-.41882%2C-.27786%2C-.19806%2C-.19867%2C.18643%2C.24808%2C.08847%2C-.06964%2C.06912%2C.20474%2C-.05304%2C.29416%2C.31967%2C.14243%2C.27521%2C-.23932%2C-.14752%2C.1236%2C-.26123%2C-.26111%2C.06616%2C.2652%2C.0809%2C.1524%2C.16254%2C-.12061%2C.04562%2C.00131%2C.0405%2C.08182%2C-.21729%2C-.17041%2C-.16312%2C-.08563%2C.0639%2C.05099%2C.05627%2C.02728%2C.00726%2C-.13028%2C-.05673%2C-.14969%2C-.17645%2C.35492%2C.16766%2C-.00897%2C.24326%2C-.00461%2C-.04456%2C.01776%2C-.0495%2C-.01221%2C.02039%2C.07684%2C.13397%2C.3985%2C.35962%2C.13754%2C.4231%2C.27161%2C-.17609%2C.03659%2C.10635%2C-.21909%2C-.22046%2C-.20258%2C-.40973%2C-.4028%2C-.40521%2C-.66284%5D)%7D%5D)%2Cu.chipWaves%3Dfunction(e)%7Bconst%20t%3Dnew%20Array(e.length)%2Cs%3D%7B%7D%3Bfor(let%20i%3D0%3Bi%3Ct.length%3Bi%2B%2B)%7Bt%5Bi%5D%3DObject.assign(%5B%5D%2Ce%5Bi%5D)%3Bconst%20n%3Dt%5Bi%5D%3Bn.index%3Di%2Cs%5Bn.name%5D%3Dn%7Dfor(let%20e%20in%20s)s%5Be%5D.samples%3Df(s%5Be%5D.samples)%3Bconst%20i%3Dt%3Breturn%20i.dictionary%3Ds%2Ci%7D(u.rawChipWaves)%2Cu.rawRawChipWaves%3Du.rawChipWaves%2Cu.firstIndexForSamplesInChipWaveList%3Du.chipWaves.length%2Cu.chipNoises%3DS(%5B%7Bname%3A%22retro%22%2Cexpression%3A.25%2CbasePitch%3A69%2CpitchFilterMult%3A1024%2CisSoft%3A!1%2Csamples%3Anull%7D%2C%7Bname%3A%22white%22%2Cexpression%3A1%2CbasePitch%3A69%2CpitchFilterMult%3A8%2CisSoft%3A!0%2Csamples%3Anull%7D%2C%7Bname%3A%22clang%22%2Cexpression%3A.4%2CbasePitch%3A69%2CpitchFilterMult%3A1024%2CisSoft%3A!1%2Csamples%3Anull%7D%2C%7Bname%3A%22buzz%22%2Cexpression%3A.3%2CbasePitch%3A69%2CpitchFilterMult%3A1024%2CisSoft%3A!1%2Csamples%3Anull%7D%2C%7Bname%3A%22hollow%22%2Cexpression%3A1.5%2CbasePitch%3A96%2CpitchFilterMult%3A1%2CisSoft%3A!0%2Csamples%3Anull%7D%2C%7Bname%3A%22shine%22%2Cexpression%3A1%2CbasePitch%3A69%2CpitchFilterMult%3A1024%2CisSoft%3A!1%2Csamples%3Anull%7D%2C%7Bname%3A%22deep%22%2Cexpression%3A1.5%2CbasePitch%3A120%2CpitchFilterMult%3A1024%2CisSoft%3A!0%2Csamples%3Anull%7D%2C%7Bname%3A%22cutter%22%2Cexpression%3A.005%2CbasePitch%3A96%2CpitchFilterMult%3A1024%2CisSoft%3A!1%2Csamples%3Anull%7D%2C%7Bname%3A%22metallic%22%2Cexpression%3A1%2CbasePitch%3A96%2CpitchFilterMult%3A1024%2CisSoft%3A!1%2Csamples%3Anull%7D%2C%7Bname%3A%22static%22%2Cexpression%3A1%2CbasePitch%3A96%2CpitchFilterMult%3A1024%2CisSoft%3A!1%2Csamples%3Anull%7D%2C%7Bname%3A%221-bit%20white%22%2Cexpression%3A.5%2CbasePitch%3A74.41%2CpitchFilterMult%3A1024%2CisSoft%3A!1%2Csamples%3Anull%7D%2C%7Bname%3A%221-bit%20metallic%22%2Cexpression%3A.5%2CbasePitch%3A86.41%2CpitchFilterMult%3A1024%2CisSoft%3A!1%2Csamples%3Anull%7D%2C%7Bname%3A%22crackling%22%2Cexpression%3A.9%2CbasePitch%3A69%2CpitchFilterMult%3A1024%2CisSoft%3A!1%2Csamples%3Anull%7D%2C%7Bname%3A%22pink%22%2Cexpression%3A1%2CbasePitch%3A69%2CpitchFilterMult%3A8%2CisSoft%3A!0%2Csamples%3Anull%7D%2C%7Bname%3A%22brownian%22%2Cexpression%3A1%2CbasePitch%3A69%2CpitchFilterMult%3A8%2CisSoft%3A!0%2Csamples%3Anull%7D%5D)%2Cu.filterFreqStep%3D1%2F4%2Cu.filterFreqRange%3D34%2Cu.filterFreqReferenceSetting%3D28%2Cu.filterFreqReferenceHz%3D8e3%2Cu.filterFreqMaxHz%3Du.filterFreqReferenceHz*Math.pow(2%2Cu.filterFreqStep*(u.filterFreqRange-1-u.filterFreqReferenceSetting))%2Cu.filterFreqMinHz%3D8%2Cu.filterGainRange%3D15%2Cu.filterGainCenter%3D7%2Cu.filterGainStep%3D.5%2Cu.filterMaxPoints%3D8%2Cu.filterTypeNames%3D%5B%22low-pass%22%2C%22high-pass%22%2C%22peak%22%5D%2Cu.filterMorphCount%3D10%2Cu.filterSimpleCutRange%3D11%2Cu.filterSimplePeakRange%3D8%2Cu.fadeInRange%3D10%2Cu.fadeOutTicks%3D%5B-24%2C-12%2C-6%2C-3%2C-1%2C6%2C12%2C24%2C48%2C72%2C96%5D%2Cu.fadeOutNeutral%3D4%2Cu.drumsetFadeOutTicks%3D48%2Cu.transitions%3DS(%5B%7Bname%3A%22normal%22%2CisSeamless%3A!1%2Ccontinues%3A!1%2Cslides%3A!1%2CslideTicks%3A3%2CincludeAdjacentPatterns%3A!1%7D%2C%7Bname%3A%22interrupt%22%2CisSeamless%3A!0%2Ccontinues%3A!1%2Cslides%3A!1%2CslideTicks%3A3%2CincludeAdjacentPatterns%3A!0%7D%2C%7Bname%3A%22continue%22%2CisSeamless%3A!0%2Ccontinues%3A!0%2Cslides%3A!1%2CslideTicks%3A3%2CincludeAdjacentPatterns%3A!0%7D%2C%7Bname%3A%22slide%22%2CisSeamless%3A!0%2Ccontinues%3A!1%2Cslides%3A!0%2CslideTicks%3A3%2CincludeAdjacentPatterns%3A!0%7D%2C%7Bname%3A%22slide%20in%20pattern%22%2CisSeamless%3A!0%2Ccontinues%3A!1%2Cslides%3A!0%2CslideTicks%3A3%2CincludeAdjacentPatterns%3A!1%7D%5D)%2Cu.vibratos%3DS(%5B%7Bname%3A%22none%22%2Camplitude%3A0%2Ctype%3A0%2CdelayTicks%3A0%7D%2C%7Bname%3A%22light%22%2Camplitude%3A.15%2Ctype%3A0%2CdelayTicks%3A0%7D%2C%7Bname%3A%22delayed%22%2Camplitude%3A.3%2Ctype%3A0%2CdelayTicks%3A37%7D%2C%7Bname%3A%22heavy%22%2Camplitude%3A.45%2Ctype%3A0%2CdelayTicks%3A0%7D%2C%7Bname%3A%22shaky%22%2Camplitude%3A.1%2Ctype%3A1%2CdelayTicks%3A0%7D%5D)%2Cu.vibratoTypes%3DS(%5B%7Bname%3A%22normal%22%2CperiodsSeconds%3A%5B.14%5D%2Cperiod%3A.14%7D%2C%7Bname%3A%22shaky%22%2CperiodsSeconds%3A%5B.11%2C.17798%2C.33%5D%2Cperiod%3A266.97%7D%5D)%2Cu.arpSpeedScale%3D%5B0%2C.0625%2C.125%2C.2%2C.25%2C1%2F3%2C.4%2C.5%2C2%2F3%2C.75%2C.8%2C.9%2C1%2C1.1%2C1.2%2C1.3%2C1.4%2C1.5%2C1.6%2C1.7%2C1.8%2C1.9%2C2%2C2.1%2C2.2%2C2.3%2C2.4%2C2.5%2C2.6%2C2.7%2C2.8%2C2.9%2C3%2C3.1%2C3.2%2C3.3%2C3.4%2C3.5%2C3.6%2C3.7%2C3.8%2C3.9%2C4%2C4.15%2C4.3%2C4.5%2C4.8%2C5%2C5.5%2C6%2C8%5D%2Cu.unisons%3DS(%5B%7Bname%3A%22none%22%2Cvoices%3A1%2Cspread%3A0%2Coffset%3A0%2Cexpression%3A1.4%2Csign%3A1%7D%2C%7Bname%3A%22shimmer%22%2Cvoices%3A2%2Cspread%3A.018%2Coffset%3A0%2Cexpression%3A.8%2Csign%3A1%7D%2C%7Bname%3A%22hum%22%2Cvoices%3A2%2Cspread%3A.045%2Coffset%3A0%2Cexpression%3A1%2Csign%3A1%7D%2C%7Bname%3A%22honky%20tonk%22%2Cvoices%3A2%2Cspread%3A.09%2Coffset%3A0%2Cexpression%3A1%2Csign%3A1%7D%2C%7Bname%3A%22dissonant%22%2Cvoices%3A2%2Cspread%3A.25%2Coffset%3A0%2Cexpression%3A.9%2Csign%3A1%7D%2C%7Bname%3A%22fifth%22%2Cvoices%3A2%2Cspread%3A3.5%2Coffset%3A3.5%2Cexpression%3A.9%2Csign%3A1%7D%2C%7Bname%3A%22octave%22%2Cvoices%3A2%2Cspread%3A6%2Coffset%3A6%2Cexpression%3A.8%2Csign%3A1%7D%2C%7Bname%3A%22bowed%22%2Cvoices%3A2%2Cspread%3A.02%2Coffset%3A0%2Cexpression%3A1%2Csign%3A-1%7D%2C%7Bname%3A%22piano%22%2Cvoices%3A2%2Cspread%3A.01%2Coffset%3A0%2Cexpression%3A1%2Csign%3A.7%7D%2C%7Bname%3A%22warbled%22%2Cvoices%3A2%2Cspread%3A.25%2Coffset%3A.05%2Cexpression%3A.9%2Csign%3A-.8%7D%2C%7Bname%3A%22hecking%20gosh%22%2Cvoices%3A2%2Cspread%3A6.25%2Coffset%3A-6%2Cexpression%3A.8%2Csign%3A-.7%7D%2C%7Bname%3A%22spinner%22%2Cvoices%3A2%2Cspread%3A.02%2Coffset%3A0%2Cexpression%3A1%2Csign%3A1%7D%2C%7Bname%3A%22detune%22%2Cvoices%3A1%2Cspread%3A0%2Coffset%3A.25%2Cexpression%3A1%2Csign%3A1%7D%2C%7Bname%3A%22rising%22%2Cvoices%3A2%2Cspread%3A1%2Coffset%3A.7%2Cexpression%3A.95%2Csign%3A1%7D%2C%7Bname%3A%22vibrate%22%2Cvoices%3A2%2Cspread%3A3.5%2Coffset%3A7%2Cexpression%3A.975%2Csign%3A1%7D%2C%7Bname%3A%22fourths%22%2Cvoices%3A2%2Cspread%3A4%2Coffset%3A4%2Cexpression%3A.95%2Csign%3A1%7D%2C%7Bname%3A%22bass%22%2Cvoices%3A1%2Cspread%3A0%2Coffset%3A-7%2Cexpression%3A1%2Csign%3A1%7D%2C%7Bname%3A%22dirty%22%2Cvoices%3A2%2Cspread%3A0%2Coffset%3A.1%2Cexpression%3A.975%2Csign%3A1%7D%2C%7Bname%3A%22stationary%22%2Cvoices%3A2%2Cspread%3A3.5%2Coffset%3A0%2Cexpression%3A.9%2Csign%3A1%7D%2C%7Bname%3A%22recurve%22%2Cvoices%3A2%2Cspread%3A.005%2Coffset%3A0%2Cexpression%3A1%2Csign%3A1%7D%2C%7Bname%3A%22voiced%22%2Cvoices%3A2%2Cspread%3A9.5%2Coffset%3A0%2Cexpression%3A1%2Csign%3A1%7D%2C%7Bname%3A%22fluctuate%22%2Cvoices%3A2%2Cspread%3A12%2Coffset%3A0%2Cexpression%3A1%2Csign%3A1%7D%2C%7Bname%3A%22thin%22%2Cvoices%3A1%2Cspread%3A0%2Coffset%3A50%2Cexpression%3A1%2Csign%3A1%7D%2C%7Bname%3A%22inject%22%2Cvoices%3A2%2Cspread%3A6%2Coffset%3A.4%2Cexpression%3A1%2Csign%3A1%7D%2C%7Bname%3A%22askewed%22%2Cvoices%3A2%2Cspread%3A0%2Coffset%3A.42%2Cexpression%3A.7%2Csign%3A1%7D%2C%7Bname%3A%22resonance%22%2Cvoices%3A2%2Cspread%3A.0025%2Coffset%3A.1%2Cexpression%3A.8%2Csign%3A-1.5%7D%2C%7Bname%3A%22FART%22%2Cvoices%3A2%2Cspread%3A13%2Coffset%3A-5%2Cexpression%3A1%2Csign%3A-3%7D%5D)%2Cu.effectNames%3D%5B%22reverb%22%2C%22chorus%22%2C%22panning%22%2C%22distortion%22%2C%22bitcrusher%22%2C%22note%20filter%22%2C%22echo%22%2C%22pitch%20shift%22%2C%22detune%22%2C%22vibrato%22%2C%22transition%20type%22%2C%22chord%20type%22%5D%2Cu.effectOrder%3D%5B2%2C10%2C11%2C7%2C8%2C9%2C5%2C3%2C4%2C1%2C6%2C0%5D%2Cu.noteSizeMax%3D6%2Cu.volumeRange%3D50%2Cu.volumeLogScale%3D.1428%2Cu.panCenter%3D50%2Cu.panMax%3D2*u.panCenter%2Cu.panDelaySecondsMax%3D.001%2Cu.chorusRange%3D8%2Cu.chorusPeriodSeconds%3D2%2Cu.chorusDelayRange%3D.0034%2Cu.chorusDelayOffsets%3D%5B%5B1.51%2C2.1%2C3.35%5D%2C%5B1.47%2C2.15%2C3.25%5D%5D%2Cu.chorusPhaseOffsets%3D%5B%5B0%2C2.1%2C4.2%5D%2C%5B3.2%2C5.3%2C1%5D%5D%2Cu.chorusMaxDelay%3Du.chorusDelayRange*(1%2Bu.chorusDelayOffsets%5B0%5D.concat(u.chorusDelayOffsets%5B1%5D).reduce(((e%2Ct)%3D%3EMath.max(e%2Ct))))%2Cu.chords%3DS(%5B%7Bname%3A%22simultaneous%22%2CcustomInterval%3A!1%2Carpeggiates%3A!1%2CstrumParts%3A0%2CsingleTone%3A!1%7D%2C%7Bname%3A%22strum%22%2CcustomInterval%3A!1%2Carpeggiates%3A!1%2CstrumParts%3A1%2CsingleTone%3A!1%7D%2C%7Bname%3A%22arpeggio%22%2CcustomInterval%3A!1%2Carpeggiates%3A!0%2CstrumParts%3A0%2CsingleTone%3A!0%7D%2C%7Bname%3A%22custom%20interval%22%2CcustomInterval%3A!0%2Carpeggiates%3A!1%2CstrumParts%3A0%2CsingleTone%3A!0%7D%5D)%2Cu.maxChordSize%3D9%2Cu.operatorCount%3D4%2Cu.maxPitchOrOperatorCount%3DMath.max(u.maxChordSize%2Cu.operatorCount%2B2)%2Cu.algorithms%3DS(%5B%7Bname%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CcarrierCount%3A1%2CassociatedCarrier%3A%5B1%2C1%2C1%2C1%5D%2CmodulatedBy%3A%5B%5B2%2C3%2C4%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%90(2%E2%80%823%E2%86%904)%22%2CcarrierCount%3A1%2CassociatedCarrier%3A%5B1%2C1%2C1%2C1%5D%2CmodulatedBy%3A%5B%5B2%2C3%5D%2C%5B%5D%2C%5B4%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%902%E2%86%90(3%E2%80%824)%22%2CcarrierCount%3A1%2CassociatedCarrier%3A%5B1%2C1%2C1%2C1%5D%2CmodulatedBy%3A%5B%5B2%5D%2C%5B3%2C4%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%90(2%E2%80%823)%E2%86%904%22%2CcarrierCount%3A1%2CassociatedCarrier%3A%5B1%2C1%2C1%2C1%5D%2CmodulatedBy%3A%5B%5B2%2C3%5D%2C%5B4%5D%2C%5B4%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%902%E2%86%903%E2%86%904%22%2CcarrierCount%3A1%2CassociatedCarrier%3A%5B1%2C1%2C1%2C1%5D%2CmodulatedBy%3A%5B%5B2%5D%2C%5B3%5D%2C%5B4%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%903%E2%80%832%E2%86%904%22%2CcarrierCount%3A2%2CassociatedCarrier%3A%5B1%2C2%2C1%2C2%5D%2CmodulatedBy%3A%5B%5B3%5D%2C%5B4%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%80%832%E2%86%90(3%E2%80%824)%22%2CcarrierCount%3A2%2CassociatedCarrier%3A%5B1%2C2%2C2%2C2%5D%2CmodulatedBy%3A%5B%5B%5D%2C%5B3%2C4%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%80%832%E2%86%903%E2%86%904%22%2CcarrierCount%3A2%2CassociatedCarrier%3A%5B1%2C2%2C2%2C2%5D%2CmodulatedBy%3A%5B%5B%5D%2C%5B3%5D%2C%5B4%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%22(1%E2%80%822)%E2%86%903%E2%86%904%22%2CcarrierCount%3A2%2CassociatedCarrier%3A%5B1%2C2%2C2%2C2%5D%2CmodulatedBy%3A%5B%5B3%5D%2C%5B3%5D%2C%5B4%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%22(1%E2%80%822)%E2%86%90(3%E2%80%824)%22%2CcarrierCount%3A2%2CassociatedCarrier%3A%5B1%2C2%2C2%2C2%5D%2CmodulatedBy%3A%5B%5B3%2C4%5D%2C%5B3%2C4%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%80%832%E2%80%833%E2%86%904%22%2CcarrierCount%3A3%2CassociatedCarrier%3A%5B1%2C2%2C3%2C3%5D%2CmodulatedBy%3A%5B%5B%5D%2C%5B%5D%2C%5B4%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%22(1%E2%80%822%E2%80%823)%E2%86%904%22%2CcarrierCount%3A3%2CassociatedCarrier%3A%5B1%2C2%2C3%2C3%5D%2CmodulatedBy%3A%5B%5B4%5D%2C%5B4%5D%2C%5B4%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%80%832%E2%80%833%E2%80%834%22%2CcarrierCount%3A4%2CassociatedCarrier%3A%5B1%2C2%2C3%2C4%5D%2CmodulatedBy%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%90(2%203)%E2%80%832%E2%86%904%22%2CcarrierCount%3A2%2CassociatedCarrier%3A%5B1%2C2%2C1%2C2%5D%2CmodulatedBy%3A%5B%5B2%2C3%5D%2C%5B4%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%90(2%20(3%20(4%22%2CcarrierCount%3A3%2CassociatedCarrier%3A%5B1%2C2%2C3%2C3%5D%2CmodulatedBy%3A%5B%5B2%2C3%2C4%5D%2C%5B3%2C4%5D%2C%5B4%5D%2C%5B%5D%5D%7D%5D)%2Cu.algorithms6Op%3DS(%5B%7Bname%3A%22Custom%22%2CcarrierCount%3A1%2CassociatedCarrier%3A%5B1%2C1%2C1%2C1%2C1%2C1%5D%2CmodulatedBy%3A%5B%5B2%2C3%2C4%2C5%2C6%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%902%E2%86%903%E2%86%904%E2%86%905%E2%86%906%22%2CcarrierCount%3A1%2CassociatedCarrier%3A%5B1%2C1%2C1%2C1%2C1%2C1%5D%2CmodulatedBy%3A%5B%5B2%5D%2C%5B3%5D%2C%5B4%5D%2C%5B5%5D%2C%5B6%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%903%E2%80%832%E2%86%904%E2%86%905%E2%86%906%22%2CcarrierCount%3A2%2CassociatedCarrier%3A%5B1%2C2%2C2%2C2%2C2%2C2%5D%2CmodulatedBy%3A%5B%5B3%5D%2C%5B4%5D%2C%5B%5D%2C%5B5%5D%2C%5B6%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%903%E2%86%904%E2%80%832%E2%86%905%E2%86%906%22%2CcarrierCount%3A2%2CassociatedCarrier%3A%5B1%2C1%2C1%2C2%2C2%2C2%5D%2CmodulatedBy%3A%5B%5B3%5D%2C%5B5%5D%2C%5B4%5D%2C%5B%5D%2C%5B6%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%904%E2%80%832%E2%86%905%E2%80%833%E2%86%906%22%2CcarrierCount%3A3%2CassociatedCarrier%3A%5B1%2C2%2C3%2C1%2C2%2C3%5D%2CmodulatedBy%3A%5B%5B4%5D%2C%5B5%5D%2C%5B6%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%903%E2%80%822%E2%86%90(4%E2%80%825%E2%86%906)%22%2CcarrierCount%3A2%2CassociatedCarrier%3A%5B1%2C2%2C2%2C2%2C2%2C2%5D%2CmodulatedBy%3A%5B%5B3%5D%2C%5B4%2C5%5D%2C%5B%5D%2C%5B%5D%2C%5B6%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%90(3%E2%80%824)%E2%80%822%E2%86%905%E2%86%906%22%2CcarrierCount%3A2%2CassociatedCarrier%3A%5B1%2C2%2C2%2C2%2C2%2C2%5D%2CmodulatedBy%3A%5B%5B3%2C4%5D%2C%5B5%5D%2C%5B%5D%2C%5B%5D%2C%5B6%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%903%E2%80%822%E2%86%90(4%E2%80%825%E2%80%826)%22%2CcarrierCount%3A2%2CassociatedCarrier%3A%5B1%2C2%2C2%2C2%2C2%2C2%5D%2CmodulatedBy%3A%5B%5B3%5D%2C%5B4%2C5%2C6%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%903%E2%80%822%E2%86%90(4%E2%80%825)%E2%86%906%22%2CcarrierCount%3A2%2CassociatedCarrier%3A%5B1%2C2%2C2%2C2%2C2%2C2%5D%2CmodulatedBy%3A%5B%5B3%5D%2C%5B4%2C5%5D%2C%5B%5D%2C%5B6%5D%2C%5B6%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%903%E2%80%822%E2%86%904%E2%86%90(5%E2%80%826)%22%2CcarrierCount%3A2%2CassociatedCarrier%3A%5B1%2C2%2C2%2C2%2C2%2C2%5D%2CmodulatedBy%3A%5B%5B3%5D%2C%5B4%5D%2C%5B%5D%2C%5B5%2C6%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%90(2%E2%80%823%E2%80%824%E2%80%825%E2%80%826)%22%2CcarrierCount%3A1%2CassociatedCarrier%3A%5B1%2C1%2C1%2C1%2C1%2C1%5D%2CmodulatedBy%3A%5B%5B2%2C3%2C4%2C5%2C6%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%90(2%E2%80%823%E2%86%905%E2%80%824%E2%86%906)%22%2CcarrierCount%3A1%2CassociatedCarrier%3A%5B1%2C1%2C1%2C1%2C1%2C1%5D%2CmodulatedBy%3A%5B%5B2%2C3%2C4%5D%2C%5B%5D%2C%5B5%5D%2C%5B6%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%90(2%E2%80%823%E2%80%824%E2%86%905%E2%86%906)%22%2CcarrierCount%3A1%2CassociatedCarrier%3A%5B1%2C1%2C1%2C1%2C1%2C1%5D%2CmodulatedBy%3A%5B%5B2%2C3%2C4%5D%2C%5B%5D%2C%5B%5D%2C%5B5%5D%2C%5B6%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%904%E2%86%905%E2%80%83(2%E2%80%833)%E2%86%906%22%2CcarrierCount%3A3%2CassociatedCarrier%3A%5B1%2C2%2C3%2C1%2C2%2C3%5D%2CmodulatedBy%3A%5B%5B4%5D%2C%5B6%5D%2C%5B6%5D%2C%5B5%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%90(3%E2%80%834)%E2%86%905%202%E2%86%906%22%2CcarrierCount%3A2%2CassociatedCarrier%3A%5B1%2C2%2C2%2C2%2C2%2C2%5D%2CmodulatedBy%3A%5B%5B3%2C4%5D%2C%5B6%5D%2C%5B5%5D%2C%5B5%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%22(1%E2%80%832)%E2%86%904%E2%80%833%E2%86%90(5%E2%80%836)%22%2CcarrierCount%3A3%2CassociatedCarrier%3A%5B1%2C2%2C3%2C1%2C2%2C3%5D%2CmodulatedBy%3A%5B%5B4%5D%2C%5B4%5D%2C%5B5%2C6%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%22(1%E2%80%832)%E2%86%905%E2%80%83(3%E2%80%834)%E2%86%906%22%2CcarrierCount%3A4%2CassociatedCarrier%3A%5B1%2C2%2C3%2C4%2C4%2C4%5D%2CmodulatedBy%3A%5B%5B5%5D%2C%5B5%5D%2C%5B6%5D%2C%5B6%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%22(1%E2%80%832%E2%80%833)%E2%86%90(4%E2%80%835%E2%80%836)%22%2CcarrierCount%3A3%2CassociatedCarrier%3A%5B1%2C2%2C3%2C1%2C2%2C3%5D%2CmodulatedBy%3A%5B%5B4%2C5%2C6%5D%2C%5B4%2C5%2C6%5D%2C%5B4%2C5%2C6%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%905%E2%80%83(2%E2%80%833%E2%80%834)%E2%86%906%22%2CcarrierCount%3A4%2CassociatedCarrier%3A%5B1%2C2%2C3%2C4%2C4%2C4%5D%2CmodulatedBy%3A%5B%5B5%5D%2C%5B6%5D%2C%5B6%5D%2C%5B6%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%80%832%E2%86%905%E2%80%83(3%E2%80%834)%E2%86%906%22%2CcarrierCount%3A4%2CassociatedCarrier%3A%5B1%2C2%2C3%2C4%2C4%2C4%5D%2CmodulatedBy%3A%5B%5B%5D%2C%5B5%5D%2C%5B6%5D%2C%5B6%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%80%832%E2%80%83(3%E2%80%834%E2%80%835)%E2%86%906%22%2CcarrierCount%3A5%2CassociatedCarrier%3A%5B1%2C2%2C3%2C4%2C5%2C5%5D%2CmodulatedBy%3A%5B%5B%5D%2C%5B%5D%2C%5B6%5D%2C%5B6%5D%2C%5B6%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%80%832%E2%80%833%E2%80%83(4%E2%80%835)%E2%86%906%22%2CcarrierCount%3A5%2CassociatedCarrier%3A%5B1%2C2%2C3%2C4%2C5%2C5%5D%2CmodulatedBy%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B6%5D%2C%5B6%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%80%832%E2%86%904%E2%80%833%E2%86%90(5%E2%80%836)%22%2CcarrierCount%3A3%2CassociatedCarrier%3A%5B1%2C2%2C3%2C3%2C3%2C3%5D%2CmodulatedBy%3A%5B%5B%5D%2C%5B4%5D%2C%5B5%2C6%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%904%E2%80%832%E2%86%90(5%E2%80%836)%E2%80%833%22%2CcarrierCount%3A3%2CassociatedCarrier%3A%5B1%2C2%2C3%2C3%2C3%2C3%5D%2CmodulatedBy%3A%5B%5B4%5D%2C%5B5%2C6%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%80%832%E2%80%833%E2%86%905%E2%80%834%E2%86%906%22%2CcarrierCount%3A4%2CassociatedCarrier%3A%5B1%2C2%2C3%2C4%2C4%2C4%5D%2CmodulatedBy%3A%5B%5B%5D%2C%5B%5D%2C%5B5%5D%2C%5B6%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%80%83(2%E2%80%833)%E2%86%905%E2%86%906%E2%80%834%22%2CcarrierCount%3A4%2CassociatedCarrier%3A%5B1%2C2%2C3%2C4%2C4%2C4%5D%2CmodulatedBy%3A%5B%5B%5D%2C%5B5%5D%2C%5B5%5D%2C%5B%5D%2C%5B6%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%80%832%E2%80%833%E2%86%905%E2%86%906%E2%80%834%22%2CcarrierCount%3A4%2CassociatedCarrier%3A%5B1%2C2%2C3%2C4%2C4%2C4%5D%2CmodulatedBy%3A%5B%5B%5D%2C%5B%5D%2C%5B5%2C6%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%22(1%E2%80%832%E2%80%833%E2%80%834%E2%80%835)%E2%86%906%22%2CcarrierCount%3A5%2CassociatedCarrier%3A%5B1%2C2%2C3%2C4%2C5%2C5%5D%2CmodulatedBy%3A%5B%5B6%5D%2C%5B6%5D%2C%5B6%5D%2C%5B6%5D%2C%5B6%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%80%832%E2%80%833%E2%80%834%E2%80%835%E2%86%906%22%2CcarrierCount%3A5%2CassociatedCarrier%3A%5B1%2C2%2C3%2C4%2C5%2C5%5D%2CmodulatedBy%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B6%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%80%832%E2%80%833%E2%80%834%E2%80%835%E2%80%836%22%2CcarrierCount%3A6%2CassociatedCarrier%3A%5B1%2C2%2C3%2C4%2C5%2C6%5D%2CmodulatedBy%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%90(2%20(3%20(4%20(5%20(6%22%2CcarrierCount%3A5%2CassociatedCarrier%3A%5B1%2C2%2C3%2C4%2C5%2C5%5D%2CmodulatedBy%3A%5B%5B2%2C3%2C4%2C5%2C6%5D%2C%5B3%2C4%2C5%2C6%5D%2C%5B4%2C5%2C6%5D%2C%5B5%2C6%5D%2C%5B6%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%90(2(3(4(5(6%22%2CcarrierCount%3A1%2CassociatedCarrier%3A%5B1%2C1%2C1%2C1%2C1%2C1%5D%2CmodulatedBy%3A%5B%5B2%2C3%2C4%2C5%2C6%5D%2C%5B3%2C4%2C5%2C6%5D%2C%5B4%2C5%2C6%5D%2C%5B5%2C6%5D%2C%5B6%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%904(2%E2%86%905(3%E2%86%906%22%2CcarrierCount%3A3%2CassociatedCarrier%3A%5B1%2C2%2C3%2C1%2C2%2C3%5D%2CmodulatedBy%3A%5B%5B2%2C3%2C4%5D%2C%5B3%2C5%5D%2C%5B6%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%904(2%E2%86%905%203%E2%86%906%22%2CcarrierCount%3A3%2CassociatedCarrier%3A%5B1%2C2%2C3%2C1%2C2%2C3%5D%2CmodulatedBy%3A%5B%5B2%2C3%2C4%5D%2C%5B5%5D%2C%5B6%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%5D)%2Cu.operatorCarrierInterval%3D%5B0%2C.04%2C-.073%2C.091%2C.061%2C.024%5D%2Cu.operatorAmplitudeMax%3D15%2Cu.operatorFrequencies%3DS(%5B%7Bname%3A%220.12%C3%97%22%2Cmult%3A.125%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%220.25%C3%97%22%2Cmult%3A.25%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%220.5%C3%97%22%2Cmult%3A.5%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%220.75%C3%97%22%2Cmult%3A.75%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%221%C3%97%22%2Cmult%3A1%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%22~1%C3%97%22%2Cmult%3A1%2ChzOffset%3A1.5%2CamplitudeSign%3A-1%7D%2C%7Bname%3A%222%C3%97%22%2Cmult%3A2%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%22~2%C3%97%22%2Cmult%3A2%2ChzOffset%3A-1.3%2CamplitudeSign%3A-1%7D%2C%7Bname%3A%223%C3%97%22%2Cmult%3A3%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%223.5%C3%97%22%2Cmult%3A3.5%2ChzOffset%3A-.05%2CamplitudeSign%3A1%7D%2C%7Bname%3A%224%C3%97%22%2Cmult%3A4%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%22~4%C3%97%22%2Cmult%3A4%2ChzOffset%3A-2.4%2CamplitudeSign%3A-1%7D%2C%7Bname%3A%225%C3%97%22%2Cmult%3A5%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%226%C3%97%22%2Cmult%3A6%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%227%C3%97%22%2Cmult%3A7%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%228%C3%97%22%2Cmult%3A8%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%229%C3%97%22%2Cmult%3A9%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%2210%C3%97%22%2Cmult%3A10%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%2211%C3%97%22%2Cmult%3A11%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%2212%C3%97%22%2Cmult%3A12%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%2213%C3%97%22%2Cmult%3A13%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%2214%C3%97%22%2Cmult%3A14%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%2215%C3%97%22%2Cmult%3A15%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%2216%C3%97%22%2Cmult%3A16%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%2217%C3%97%22%2Cmult%3A17%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%2218%C3%97%22%2Cmult%3A18%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%2219%C3%97%22%2Cmult%3A19%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%2220%C3%97%22%2Cmult%3A20%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%22~20%C3%97%22%2Cmult%3A20%2ChzOffset%3A-5%2CamplitudeSign%3A-1%7D%2C%7Bname%3A%2225%C3%97%22%2Cmult%3A25%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%2250%C3%97%22%2Cmult%3A50%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%2275%C3%97%22%2Cmult%3A75%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%2C%7Bname%3A%22100%C3%97%22%2Cmult%3A100%2ChzOffset%3A0%2CamplitudeSign%3A1%7D%5D)%2Cu.envelopes%3DS(%5B%7Bname%3A%22none%22%2Ctype%3A1%2Cspeed%3A0%7D%2C%7Bname%3A%22note%20size%22%2Ctype%3A0%2Cspeed%3A0%7D%2C%7Bname%3A%22punch%22%2Ctype%3A2%2Cspeed%3A0%7D%2C%7Bname%3A%22flare%20-1%22%2Ctype%3A3%2Cspeed%3A128%7D%2C%7Bname%3A%22flare%201%22%2Ctype%3A3%2Cspeed%3A32%7D%2C%7Bname%3A%22flare%202%22%2Ctype%3A3%2Cspeed%3A8%7D%2C%7Bname%3A%22flare%203%22%2Ctype%3A3%2Cspeed%3A2%7D%2C%7Bname%3A%22twang%20-1%22%2Ctype%3A4%2Cspeed%3A128%7D%2C%7Bname%3A%22twang%201%22%2Ctype%3A4%2Cspeed%3A32%7D%2C%7Bname%3A%22twang%202%22%2Ctype%3A4%2Cspeed%3A8%7D%2C%7Bname%3A%22twang%203%22%2Ctype%3A4%2Cspeed%3A2%7D%2C%7Bname%3A%22swell%20-1%22%2Ctype%3A5%2Cspeed%3A128%7D%2C%7Bname%3A%22swell%201%22%2Ctype%3A5%2Cspeed%3A32%7D%2C%7Bname%3A%22swell%202%22%2Ctype%3A5%2Cspeed%3A8%7D%2C%7Bname%3A%22swell%203%22%2Ctype%3A5%2Cspeed%3A2%7D%2C%7Bname%3A%22tremolo0%22%2Ctype%3A6%2Cspeed%3A8%7D%2C%7Bname%3A%22tremolo1%22%2Ctype%3A6%2Cspeed%3A4%7D%2C%7Bname%3A%22tremolo2%22%2Ctype%3A6%2Cspeed%3A2%7D%2C%7Bname%3A%22tremolo3%22%2Ctype%3A6%2Cspeed%3A1%7D%2C%7Bname%3A%22tremolo4%22%2Ctype%3A7%2Cspeed%3A4%7D%2C%7Bname%3A%22tremolo5%22%2Ctype%3A7%2Cspeed%3A2%7D%2C%7Bname%3A%22tremolo6%22%2Ctype%3A7%2Cspeed%3A1%7D%2C%7Bname%3A%22decay%20-1%22%2Ctype%3A8%2Cspeed%3A40%7D%2C%7Bname%3A%22decay%201%22%2Ctype%3A8%2Cspeed%3A10%7D%2C%7Bname%3A%22decay%202%22%2Ctype%3A8%2Cspeed%3A7%7D%2C%7Bname%3A%22decay%203%22%2Ctype%3A8%2Cspeed%3A4%7D%2C%7Bname%3A%22wibble-1%22%2Ctype%3A9%2Cspeed%3A96%7D%2C%7Bname%3A%22wibble%201%22%2Ctype%3A9%2Cspeed%3A24%7D%2C%7Bname%3A%22wibble%202%22%2Ctype%3A9%2Cspeed%3A12%7D%2C%7Bname%3A%22wibble%203%22%2Ctype%3A9%2Cspeed%3A4%7D%2C%7Bname%3A%22linear-2%22%2Ctype%3A11%2Cspeed%3A256%7D%2C%7Bname%3A%22linear-1%22%2Ctype%3A11%2Cspeed%3A128%7D%2C%7Bname%3A%22linear%201%22%2Ctype%3A11%2Cspeed%3A32%7D%2C%7Bname%3A%22linear%202%22%2Ctype%3A11%2Cspeed%3A8%7D%2C%7Bname%3A%22linear%203%22%2Ctype%3A11%2Cspeed%3A2%7D%2C%7Bname%3A%22rise%20-2%22%2Ctype%3A12%2Cspeed%3A256%7D%2C%7Bname%3A%22rise%20-1%22%2Ctype%3A12%2Cspeed%3A128%7D%2C%7Bname%3A%22rise%201%22%2Ctype%3A12%2Cspeed%3A32%7D%2C%7Bname%3A%22rise%202%22%2Ctype%3A12%2Cspeed%3A8%7D%2C%7Bname%3A%22rise%203%22%2Ctype%3A12%2Cspeed%3A2%7D%2C%7Bname%3A%22flute%201%22%2Ctype%3A9%2Cspeed%3A16%7D%2C%7Bname%3A%22flute%202%22%2Ctype%3A9%2Cspeed%3A8%7D%2C%7Bname%3A%22flute%203%22%2Ctype%3A9%2Cspeed%3A4%7D%2C%7Bname%3A%22tripolo1%22%2Ctype%3A6%2Cspeed%3A9%7D%2C%7Bname%3A%22tripolo2%22%2Ctype%3A6%2Cspeed%3A6%7D%2C%7Bname%3A%22tripolo3%22%2Ctype%3A6%2Cspeed%3A3%7D%2C%7Bname%3A%22tripolo4%22%2Ctype%3A7%2Cspeed%3A9%7D%2C%7Bname%3A%22tripolo5%22%2Ctype%3A7%2Cspeed%3A6%7D%2C%7Bname%3A%22tripolo6%22%2Ctype%3A7%2Cspeed%3A3%7D%2C%7Bname%3A%22pentolo1%22%2Ctype%3A6%2Cspeed%3A10%7D%2C%7Bname%3A%22pentolo2%22%2Ctype%3A6%2Cspeed%3A5%7D%2C%7Bname%3A%22pentolo3%22%2Ctype%3A6%2Cspeed%3A2.5%7D%2C%7Bname%3A%22pentolo4%22%2Ctype%3A7%2Cspeed%3A10%7D%2C%7Bname%3A%22pentolo5%22%2Ctype%3A7%2Cspeed%3A5%7D%2C%7Bname%3A%22pentolo6%22%2Ctype%3A7%2Cspeed%3A2.5%7D%2C%7Bname%3A%22flutter%201%22%2Ctype%3A6%2Cspeed%3A14%7D%2C%7Bname%3A%22flutter%202%22%2Ctype%3A7%2Cspeed%3A11%7D%2C%7Bname%3A%22water-y%20flutter%22%2Ctype%3A6%2Cspeed%3A9%7D%2C%7Bname%3A%22blip%201%22%2Ctype%3A13%2Cspeed%3A6%7D%2C%7Bname%3A%22blip%202%22%2Ctype%3A13%2Cspeed%3A16%7D%2C%7Bname%3A%22blip%203%22%2Ctype%3A13%2Cspeed%3A32%7D%5D)%2Cu.feedbacks%3DS(%5B%7Bname%3A%221%E2%9F%B2%22%2Cindices%3A%5B%5B1%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%222%E2%9F%B2%22%2Cindices%3A%5B%5B%5D%2C%5B2%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%223%E2%9F%B2%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B3%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%224%E2%9F%B2%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B4%5D%5D%7D%2C%7Bname%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%22%2Cindices%3A%5B%5B1%5D%2C%5B2%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%223%E2%9F%B2%E2%80%834%E2%9F%B2%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B3%5D%2C%5B4%5D%5D%7D%2C%7Bname%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%E2%80%833%E2%9F%B2%22%2Cindices%3A%5B%5B1%5D%2C%5B2%5D%2C%5B3%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%222%E2%9F%B2%E2%80%833%E2%9F%B2%E2%80%834%E2%9F%B2%22%2Cindices%3A%5B%5B%5D%2C%5B2%5D%2C%5B3%5D%2C%5B4%5D%5D%7D%2C%7Bname%3A%221%E2%9F%B2%202%E2%9F%B2%203%E2%9F%B2%204%E2%9F%B2%22%2Cindices%3A%5B%5B1%5D%2C%5B2%5D%2C%5B3%5D%2C%5B4%5D%5D%7D%2C%7Bname%3A%221%E2%86%922%22%2Cindices%3A%5B%5B%5D%2C%5B1%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%923%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B1%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%924%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B1%5D%5D%7D%2C%7Bname%3A%222%E2%86%923%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B2%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%222%E2%86%924%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B2%5D%5D%7D%2C%7Bname%3A%223%E2%86%924%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B3%5D%5D%7D%2C%7Bname%3A%221%E2%86%923%E2%80%832%E2%86%924%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B1%5D%2C%5B2%5D%5D%7D%2C%7Bname%3A%221%E2%86%924%E2%80%832%E2%86%923%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B2%5D%2C%5B1%5D%5D%7D%2C%7Bname%3A%221%E2%86%922%E2%86%923%E2%86%924%22%2Cindices%3A%5B%5B%5D%2C%5B1%5D%2C%5B2%5D%2C%5B3%5D%5D%7D%2C%7Bname%3A%221%E2%86%942%203%E2%86%944%22%2Cindices%3A%5B%5B2%5D%2C%5B1%5D%2C%5B4%5D%2C%5B3%5D%5D%7D%2C%7Bname%3A%221%E2%86%944%202%E2%86%943%22%2Cindices%3A%5B%5B4%5D%2C%5B3%5D%2C%5B2%5D%2C%5B1%5D%5D%7D%2C%7Bname%3A%222%E2%86%921%E2%86%924%E2%86%923%E2%86%922%22%2Cindices%3A%5B%5B2%5D%2C%5B3%5D%2C%5B4%5D%2C%5B1%5D%5D%7D%2C%7Bname%3A%221%E2%86%922%E2%86%923%E2%86%924%E2%86%921%22%2Cindices%3A%5B%5B4%5D%2C%5B1%5D%2C%5B2%5D%2C%5B3%5D%5D%7D%2C%7Bname%3A%22(1%202%203)%E2%86%924%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B1%2C2%2C3%5D%5D%7D%2C%7Bname%3A%22ALL%22%2Cindices%3A%5B%5B1%2C2%2C3%2C4%5D%2C%5B1%2C2%2C3%2C4%5D%2C%5B1%2C2%2C3%2C4%5D%2C%5B1%2C2%2C3%2C4%5D%5D%7D%5D)%2Cu.feedbacks6Op%3DS(%5B%7Bname%3A%22Custom%22%2Cindices%3A%5B%5B2%2C3%2C4%2C5%2C6%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%9F%B2%22%2Cindices%3A%5B%5B1%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%222%E2%9F%B2%22%2Cindices%3A%5B%5B%5D%2C%5B2%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%223%E2%9F%B2%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B3%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%224%E2%9F%B2%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B4%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%225%E2%9F%B2%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B5%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%226%E2%9F%B2%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B6%5D%5D%7D%2C%7Bname%3A%221%E2%9F%B2%E2%80%822%E2%9F%B2%22%2Cindices%3A%5B%5B1%5D%2C%5B2%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%223%E2%9F%B2%E2%80%824%E2%9F%B2%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B3%5D%2C%5B4%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%9F%B2%E2%80%822%E2%9F%B2%E2%80%823%E2%9F%B2%22%2Cindices%3A%5B%5B1%5D%2C%5B2%5D%2C%5B3%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%222%E2%9F%B2%E2%80%823%E2%9F%B2%E2%80%824%E2%9F%B2%22%2Cindices%3A%5B%5B%5D%2C%5B2%5D%2C%5B3%5D%2C%5B4%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%9F%B2%202%E2%9F%B2%203%E2%9F%B2%204%E2%9F%B2%22%2Cindices%3A%5B%5B1%5D%2C%5B2%5D%2C%5B3%5D%2C%5B4%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%9F%B2%202%E2%9F%B2%203%E2%9F%B2%204%E2%9F%B2%205%E2%9F%B2%22%2Cindices%3A%5B%5B1%5D%2C%5B2%5D%2C%5B3%5D%2C%5B4%5D%2C%5B5%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%9F%B2%202%E2%9F%B2%203%E2%9F%B2%204%E2%9F%B2%205%E2%9F%B2%206%E2%9F%B2%22%2Cindices%3A%5B%5B1%5D%2C%5B2%5D%2C%5B3%5D%2C%5B4%5D%2C%5B5%5D%2C%5B6%5D%5D%7D%2C%7Bname%3A%221%E2%86%922%22%2Cindices%3A%5B%5B%5D%2C%5B1%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%923%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B1%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%924%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B1%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%925%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B1%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%926%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B1%5D%5D%7D%2C%7Bname%3A%222%E2%86%923%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B2%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%222%E2%86%924%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B2%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%223%E2%86%924%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B3%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%224%E2%86%925%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B4%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%86%924%E2%80%822%E2%86%925%203%E2%86%926%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B1%5D%2C%5B2%5D%2C%5B3%5D%5D%7D%2C%7Bname%3A%221%E2%86%925%E2%80%822%E2%86%926%203%E2%86%924%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B3%5D%2C%5B1%5D%2C%5B2%5D%5D%7D%2C%7Bname%3A%221%E2%86%922%E2%86%923%E2%86%924%E2%86%925%E2%86%926%22%2Cindices%3A%5B%5B%5D%2C%5B1%5D%2C%5B2%5D%2C%5B3%5D%2C%5B4%5D%2C%5B5%5D%5D%7D%2C%7Bname%3A%222%E2%86%921%E2%86%926%E2%86%925%E2%86%924%E2%86%923%E2%86%922%22%2Cindices%3A%5B%5B2%5D%2C%5B3%5D%2C%5B4%5D%2C%5B5%5D%2C%5B6%5D%2C%5B1%5D%5D%7D%2C%7Bname%3A%221%E2%86%922%E2%86%923%E2%86%924%E2%86%925%E2%86%926%E2%86%921%22%2Cindices%3A%5B%5B6%5D%2C%5B1%5D%2C%5B2%5D%2C%5B3%5D%2C%5B4%5D%2C%5B5%5D%5D%7D%2C%7Bname%3A%221%E2%86%942%203%E2%86%944%205%E2%86%946%22%2Cindices%3A%5B%5B2%5D%2C%5B1%5D%2C%5B4%5D%2C%5B3%5D%2C%5B6%5D%2C%5B5%5D%5D%7D%2C%7Bname%3A%221%E2%86%944%202%E2%86%945%203%E2%86%946%22%2Cindices%3A%5B%5B4%5D%2C%5B5%5D%2C%5B6%5D%2C%5B1%5D%2C%5B2%5D%2C%5B3%5D%5D%7D%2C%7Bname%3A%22(1%2C2%2C3%2C4%2C5)%E2%86%926%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B1%2C2%2C3%2C4%2C5%5D%5D%7D%2C%7Bname%3A%22ALL%22%2Cindices%3A%5B%5B1%2C2%2C3%2C4%2C5%2C6%5D%2C%5B1%2C2%2C3%2C4%2C5%2C6%5D%2C%5B1%2C2%2C3%2C4%2C5%2C6%5D%2C%5B1%2C2%2C3%2C4%2C5%2C6%5D%2C%5B1%2C2%2C3%2C4%2C5%2C6%5D%2C%5B1%2C2%2C3%2C4%2C5%2C6%5D%5D%7D%5D)%2Cu.chipNoiseLength%3D32768%2Cu.spectrumNoiseLength%3D32768%2Cu.spectrumBasePitch%3D24%2Cu.spectrumControlPoints%3D30%2Cu.spectrumControlPointsPerOctave%3D7%2Cu.spectrumControlPointBits%3D3%2Cu.spectrumMax%3D(1%3C%3Cu.spectrumControlPointBits)-1%2Cu.harmonicsControlPoints%3D28%2Cu.harmonicsRendered%3D64%2Cu.harmonicsRenderedForPickedString%3D256%2Cu.harmonicsControlPointBits%3D3%2Cu.harmonicsMax%3D(1%3C%3Cu.harmonicsControlPointBits)-1%2Cu.harmonicsWavelength%3D2048%2Cu.pulseWidthRange%3D50%2Cu.pulseWidthStepPower%3D.5%2Cu.supersawVoiceCount%3D7%2Cu.supersawDynamismMax%3D6%2Cu.supersawSpreadMax%3D12%2Cu.supersawShapeMax%3D6%2Cu.pitchChannelCountMin%3D1%2Cu.pitchChannelCountMax%3D60%2Cu.noiseChannelCountMin%3D0%2Cu.noiseChannelCountMax%3D60%2Cu.modChannelCountMin%3D0%2Cu.modChannelCountMax%3D60%2Cu.noiseInterval%3D6%2Cu.pitchesPerOctave%3D12%2Cu.drumCount%3D12%2Cu.pitchOctaves%3D8%2Cu.modCount%3D6%2Cu.maxPitch%3Du.pitchOctaves*u.pitchesPerOctave%2Cu.maximumTonesPerChannel%3D2*u.maxChordSize%2Cu.justIntonationSemitones%3D%5B.5%2C8%2F15%2C9%2F16%2C.6%2C5%2F8%2C2%2F3%2C32%2F45%2C3%2F4%2C.8%2C5%2F6%2C8%2F9%2C15%2F16%2C1%2C16%2F15%2C9%2F8%2C1.2%2C5%2F4%2C4%2F3%2C45%2F32%2C1.5%2C1.6%2C5%2F3%2C16%2F9%2C15%2F8%2C2%5D.map((e%3D%3EMath.log2(e)*u.pitchesPerOctave))%2Cu.pitchShiftRange%3Du.justIntonationSemitones.length%2Cu.pitchShiftCenter%3Du.pitchShiftRange%3E%3E1%2Cu.detuneCenter%3D200%2Cu.detuneMax%3D400%2Cu.detuneMin%3D0%2Cu.songDetuneMin%3D0%2Cu.songDetuneMax%3D500%2Cu.unisonVoicesMin%3D1%2Cu.unisonVoicesMax%3D2%2Cu.unisonSpreadMin%3D-96%2Cu.unisonSpreadMax%3D96%2Cu.unisonOffsetMin%3D-96%2Cu.unisonOffsetMax%3D96%2Cu.unisonExpressionMin%3D-2%2Cu.unisonExpressionMax%3D2%2Cu.unisonSignMin%3D-2%2Cu.unisonSignMax%3D2%2Cu.sineWaveLength%3D256%2Cu.sineWaveMask%3Du.sineWaveLength-1%2Cu.sineWave%3Dfunction()%7Bconst%20e%3Dnew%20Float32Array(u.sineWaveLength%2B1)%3Bfor(let%20t%3D0%3Bt%3Cu.sineWaveLength%2B1%3Bt%2B%2B)e%5Bt%5D%3DMath.sin(t*Math.PI*2%2Fu.sineWaveLength)%3Breturn%20e%7D()%2Cu.pickedStringDispersionCenterFreq%3D6e3%2Cu.pickedStringDispersionFreqScale%3D.3%2Cu.pickedStringDispersionFreqMult%3D4%2Cu.pickedStringShelfHz%3D4e3%2Cu.distortionRange%3D8%2Cu.stringSustainRange%3D15%2Cu.stringDecayRate%3D.12%2Cu.enableAcousticSustain%3D!1%2Cu.sustainTypeNames%3D%5B%22bright%22%2C%22acoustic%22%5D%2Cu.bitcrusherFreqRange%3D14%2Cu.bitcrusherOctaveStep%3D.5%2Cu.bitcrusherQuantizationRange%3D8%2Cu.maxEnvelopeCount%3D12%2Cu.defaultAutomationRange%3D13%2Cu.instrumentAutomationTargets%3DS(%5B%7Bname%3A%22none%22%2CcomputeIndex%3Anull%2CdisplayName%3A%22none%22%2Cinterleave%3A!1%2CisFilter%3A!1%2CmaxCount%3A1%2Ceffect%3Anull%2CcompatibleInstruments%3Anull%7D%2C%7Bname%3A%22noteVolume%22%2CcomputeIndex%3A0%2CdisplayName%3A%22note%20volume%22%2Cinterleave%3A!1%2CisFilter%3A!1%2CmaxCount%3A1%2Ceffect%3Anull%2CcompatibleInstruments%3Anull%7D%2C%7Bname%3A%22pulseWidth%22%2CcomputeIndex%3A2%2CdisplayName%3A%22pulse%20width%22%2Cinterleave%3A!1%2CisFilter%3A!1%2CmaxCount%3A1%2Ceffect%3Anull%2CcompatibleInstruments%3A%5B6%2C8%5D%7D%2C%7Bname%3A%22stringSustain%22%2CcomputeIndex%3A3%2CdisplayName%3A%22sustain%22%2Cinterleave%3A!1%2CisFilter%3A!1%2CmaxCount%3A1%2Ceffect%3Anull%2CcompatibleInstruments%3A%5B7%5D%7D%2C%7Bname%3A%22unison%22%2CcomputeIndex%3A4%2CdisplayName%3A%22unison%22%2Cinterleave%3A!1%2CisFilter%3A!1%2CmaxCount%3A1%2Ceffect%3Anull%2CcompatibleInstruments%3A%5B0%2C5%2C7%2C9%2C6%2C2%2C3%5D%7D%2C%7Bname%3A%22operatorFrequency%22%2CcomputeIndex%3A5%2CdisplayName%3A%22fm%23%20freq%22%2Cinterleave%3A!0%2CisFilter%3A!1%2CmaxCount%3Au.operatorCount%2B2%2Ceffect%3Anull%2CcompatibleInstruments%3A%5B1%2C11%5D%7D%2C%7Bname%3A%22operatorAmplitude%22%2CcomputeIndex%3A11%2CdisplayName%3A%22fm%23%20volume%22%2Cinterleave%3A!1%2CisFilter%3A!1%2CmaxCount%3Au.operatorCount%2B2%2Ceffect%3Anull%2CcompatibleInstruments%3A%5B1%2C11%5D%7D%2C%7Bname%3A%22feedbackAmplitude%22%2CcomputeIndex%3A17%2CdisplayName%3A%22fm%20feedback%22%2Cinterleave%3A!1%2CisFilter%3A!1%2CmaxCount%3A1%2Ceffect%3Anull%2CcompatibleInstruments%3A%5B1%2C11%5D%7D%2C%7Bname%3A%22pitchShift%22%2CcomputeIndex%3A18%2CdisplayName%3A%22pitch%20shift%22%2Cinterleave%3A!1%2CisFilter%3A!1%2CmaxCount%3A1%2Ceffect%3A7%2CcompatibleInstruments%3Anull%7D%2C%7Bname%3A%22detune%22%2CcomputeIndex%3A19%2CdisplayName%3A%22detune%22%2Cinterleave%3A!1%2CisFilter%3A!1%2CmaxCount%3A1%2Ceffect%3A8%2CcompatibleInstruments%3Anull%7D%2C%7Bname%3A%22vibratoDepth%22%2CcomputeIndex%3A20%2CdisplayName%3A%22vibrato%20range%22%2Cinterleave%3A!1%2CisFilter%3A!1%2CmaxCount%3A1%2Ceffect%3A9%2CcompatibleInstruments%3Anull%7D%2C%7Bname%3A%22noteFilterAllFreqs%22%2CcomputeIndex%3A1%2CdisplayName%3A%22n.%20filter%20freqs%22%2Cinterleave%3A!1%2CisFilter%3A!0%2CmaxCount%3A1%2Ceffect%3A5%2CcompatibleInstruments%3Anull%7D%2C%7Bname%3A%22noteFilterFreq%22%2CcomputeIndex%3A21%2CdisplayName%3A%22n.%20filter%20%23%20freq%22%2Cinterleave%3A!1%2CisFilter%3A!0%2CmaxCount%3Au.filterMaxPoints%2Ceffect%3A5%2CcompatibleInstruments%3Anull%7D%2C%7Bname%3A%22decimalOffset%22%2CcomputeIndex%3A37%2CdisplayName%3A%22decimal%20offset%22%2Cinterleave%3A!1%2CisFilter%3A!1%2CmaxCount%3A1%2Ceffect%3Anull%2CcompatibleInstruments%3A%5B6%2C8%5D%7D%2C%7Bname%3A%22supersawDynamism%22%2CcomputeIndex%3A38%2CdisplayName%3A%22dynamism%22%2Cinterleave%3A!1%2CisFilter%3A!1%2CmaxCount%3A1%2Ceffect%3Anull%2CcompatibleInstruments%3A%5B8%5D%7D%2C%7Bname%3A%22supersawSpread%22%2CcomputeIndex%3A39%2CdisplayName%3A%22spread%22%2Cinterleave%3A!1%2CisFilter%3A!1%2CmaxCount%3A1%2Ceffect%3Anull%2CcompatibleInstruments%3A%5B8%5D%7D%2C%7Bname%3A%22supersawShape%22%2CcomputeIndex%3A40%2CdisplayName%3A%22saw%E2%86%94pulse%22%2Cinterleave%3A!1%2CisFilter%3A!1%2CmaxCount%3A1%2Ceffect%3Anull%2CcompatibleInstruments%3A%5B8%5D%7D%5D)%2Cu.operatorWaves%3DS(%5B%7Bname%3A%22sine%22%2Csamples%3Au.sineWave%7D%2C%7Bname%3A%22triangle%22%2Csamples%3Afunction()%7Bconst%20e%3Dnew%20Float32Array(u.sineWaveLength%2B1)%3Bfor(let%20t%3D0%3Bt%3Cu.sineWaveLength%2B1%3Bt%2B%2B)e%5Bt%5D%3DMath.asin(Math.sin(t*Math.PI*2%2Fu.sineWaveLength))%2F(Math.PI%2F2)%3Breturn%20e%7D()%7D%2C%7Bname%3A%22pulse%20width%22%2Csamples%3Av()%7D%2C%7Bname%3A%22sawtooth%22%2Csamples%3Ag()%7D%2C%7Bname%3A%22ramp%22%2Csamples%3Ag(!0)%7D%2C%7Bname%3A%22trapezoid%22%2Csamples%3Afunction(e%3D2)%7Bconst%20t%3Dnew%20Float32Array(u.sineWaveLength%2B1)%3Bfor(let%20s%3D0%3Bs%3Cu.sineWaveLength%2B1%3Bs%2B%2B)t%5Bs%5D%3DMath.max(-1%2CMath.min(1%2CMath.asin(Math.sin(s*Math.PI*2%2Fu.sineWaveLength))*e))%3Breturn%20t%7D(2)%7D%2C%7Bname%3A%22quasi-sine%22%2Csamples%3Afunction()%7Bconst%20e%3Dnew%20Float32Array(u.sineWaveLength%2B1)%3Bfor(let%20t%3D0%3Bt%3Cu.sineWaveLength%2B1%3Bt%2B%2B)e%5Bt%5D%3DMath.round(Math.sin(t*Math.PI*2%2Fu.sineWaveLength))%3Breturn%20e%7D()%7D%5D)%2Cu.pwmOperatorWaves%3DS(%5B%7Bname%3A%221%25%22%2Csamples%3Av(.01)%7D%2C%7Bname%3A%225%25%22%2Csamples%3Av(.05)%7D%2C%7Bname%3A%2212.5%25%22%2Csamples%3Av(.125)%7D%2C%7Bname%3A%2225%25%22%2Csamples%3Av(.25)%7D%2C%7Bname%3A%2233%25%22%2Csamples%3Av(1%2F3)%7D%2C%7Bname%3A%2250%25%22%2Csamples%3Av(.5)%7D%2C%7Bname%3A%2266%25%22%2Csamples%3Av(2%2F3)%7D%2C%7Bname%3A%2275%25%22%2Csamples%3Av(.75)%7D%2C%7Bname%3A%2287.5%25%22%2Csamples%3Av(.875)%7D%2C%7Bname%3A%2295%25%22%2Csamples%3Av(.95)%7D%2C%7Bname%3A%2299%25%22%2Csamples%3Av(.99)%7D%5D)%2Cu.barEditorHeight%3D10%2Cu.modulators%3DS(%5B%7Bname%3A%22none%22%2CpianoName%3A%22None%22%2CmaxRawVol%3A6%2CnewNoteVol%3A6%2CforSong%3A!0%2CconvertRealFactor%3A0%2CassociatedEffect%3A12%2CpromptName%3A%22No%20Mod%20Setting%22%2CpromptDesc%3A%5B%22No%20setting%20has%20been%20chosen%20yet%2C%20so%20this%20modulator%20will%20have%20no%20effect.%20Try%20choosing%20a%20setting%20with%20the%20dropdown%2C%20then%20click%20this%20'%3F'%20again%20for%20more%20info.%22%2C%22%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22song%20volume%22%2CpianoName%3A%22Volume%22%2CmaxRawVol%3A100%2CnewNoteVol%3A100%2CforSong%3A!0%2CconvertRealFactor%3A0%2CassociatedEffect%3A12%2CpromptName%3A%22Song%20Volume%22%2CpromptDesc%3A%5B%22This%20setting%20affects%20the%20overall%20volume%20of%20the%20song%2C%20just%20like%20the%20main%20volume%20slider.%22%2C%22At%20%24HI%2C%20the%20volume%20will%20be%20unchanged%20from%20default%2C%20and%20it%20will%20get%20gradually%20quieter%20down%20to%20%24LO.%22%2C%22%5BMULTIPLICATIVE%5D%20%5B%24LO%20-%20%24HI%5D%20%5B%25%5D%22%5D%7D%2C%7Bname%3A%22tempo%22%2CpianoName%3A%22Tempo%22%2CmaxRawVol%3Au.tempoMax-u.tempoMin%2CnewNoteVol%3AMath.ceil((u.tempoMax-u.tempoMin)%2F2)%2CforSong%3A!0%2CconvertRealFactor%3Au.tempoMin%2CassociatedEffect%3A12%2CpromptName%3A%22Song%20Tempo%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20speed%20your%20song%20plays%20at%2C%20just%20like%20the%20tempo%20slider.%22%2C%22When%20you%20first%20make%20a%20note%20for%20this%20setting%2C%20it%20will%20default%20to%20your%20current%20tempo.%20Raising%20it%20speeds%20up%20the%20song%2C%20up%20to%20%24HI%20BPM%2C%20and%20lowering%20it%20slows%20it%20down%2C%20to%20a%20minimum%20of%20%24LO%20BPM.%22%2C%22Note%20that%20you%20can%20make%20a%20'swing'%20effect%20by%20rapidly%20changing%20between%20two%20tempo%20values.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%20%5BBPM%5D%22%5D%7D%2C%7Bname%3A%22song%20reverb%22%2CpianoName%3A%22Reverb%22%2CmaxRawVol%3A2*u.reverbRange%2CnewNoteVol%3Au.reverbRange%2CforSong%3A!0%2CconvertRealFactor%3A-u.reverbRange%2CassociatedEffect%3A12%2CpromptName%3A%22Song%20Reverb%22%2CpromptDesc%3A%5B%22This%20setting%20affects%20the%20overall%20reverb%20of%20your%20song.%20It%20works%20by%20multiplying%20existing%20reverb%20for%20instruments%2C%20so%20those%20with%20no%20reverb%20set%20will%20be%20unaffected.%22%2C%22At%20%24MID%2C%20all%20instruments'%20reverb%20will%20be%20unchanged%20from%20default.%20This%20increases%20up%20to%20double%20the%20reverb%20value%20at%20%24HI%2C%20or%20down%20to%20no%20reverb%20at%20%24LO.%22%2C%22%5BMULTIPLICATIVE%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22next%20bar%22%2CpianoName%3A%22Next%20Bar%22%2CmaxRawVol%3A1%2CnewNoteVol%3A1%2CforSong%3A!0%2CconvertRealFactor%3A0%2CassociatedEffect%3A12%2CpromptName%3A%22Go%20To%20Next%20Bar%22%2CpromptDesc%3A%5B%22This%20setting%20functions%20a%20little%20different%20from%20most.%20Wherever%20a%20note%20is%20placed%2C%20the%20song%20will%20jump%20immediately%20to%20the%20next%20bar%20when%20it%20is%20encountered.%22%2C%22This%20jump%20happens%20at%20the%20very%20start%20of%20the%20note%2C%20so%20the%20length%20of%20a%20next-bar%20note%20is%20irrelevant.%20Also%2C%20the%20note%20can%20be%20value%200%20or%201%2C%20but%20the%20value%20is%20also%20irrelevant%20-%20wherever%20you%20place%20a%20note%2C%20the%20song%20will%20jump.%22%2C%22You%20can%20make%20mixed-meter%20songs%20or%20intro%20sections%20by%20cutting%20off%20unneeded%20beats%20with%20a%20next-bar%20modulator.%22%2C%22%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22note%20volume%22%2CpianoName%3A%22Note%20Vol.%22%2CmaxRawVol%3Au.volumeRange%2CnewNoteVol%3AMath.ceil(u.volumeRange%2F2)%2CforSong%3A!1%2CconvertRealFactor%3AMath.ceil(-u.volumeRange%2F2)%2CassociatedEffect%3A12%2CpromptName%3A%22Note%20Volume%22%2CpromptDesc%3A%5B%22This%20setting%20affects%20the%20volume%20of%20your%20instrument%20as%20if%20its%20note%20size%20had%20been%20scaled.%22%2C%22At%20%24MID%2C%20an%20instrument's%20volume%20will%20be%20unchanged%20from%20default.%20This%20means%20you%20can%20still%20use%20the%20volume%20sliders%20to%20mix%20the%20base%20volume%20of%20instruments.%20The%20volume%20gradually%20increases%20up%20to%20%24HI%2C%20or%20decreases%20down%20to%20mute%20at%20%24LO.%22%2C%22This%20setting%20was%20the%20default%20for%20volume%20modulation%20in%20JummBox%20for%20a%20long%20time.%20Due%20to%20some%20new%20effects%20like%20distortion%20and%20bitcrush%2C%20note%20volume%20doesn't%20always%20allow%20fine%20volume%20control.%20Also%2C%20this%20modulator%20affects%20the%20value%20of%20FM%20modulator%20waves%20instead%20of%20just%20carriers.%20This%20can%20distort%20the%20sound%20which%20may%20be%20useful%2C%20but%20also%20may%20be%20undesirable.%20In%20those%20cases%2C%20use%20the%20'mix%20volume'%20modulator%20instead%2C%20which%20will%20always%20just%20scale%20the%20volume%20with%20no%20added%20effects.%22%2C%22For%20display%20purposes%2C%20this%20mod%20will%20show%20up%20on%20the%20instrument%20volume%20slider%2C%20as%20long%20as%20there%20is%20not%20also%20an%20active%20'mix%20volume'%20modulator%20anyhow.%20However%2C%20as%20mentioned%2C%20it%20works%20more%20like%20changing%20note%20volume.%22%2C%22%5BMULTIPLICATIVE%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22pan%22%2CpianoName%3A%22Pan%22%2CmaxRawVol%3Au.panMax%2CnewNoteVol%3AMath.ceil(u.panMax%2F2)%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A2%2CpromptName%3A%22Instrument%20Panning%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20panning%20of%20your%20instrument%2C%20just%20like%20the%20panning%20slider.%22%2C%22At%20%24LO%2C%20your%20instrument%20will%20sound%20like%20it%20is%20coming%20fully%20from%20the%20left-ear%20side.%20At%20%24MID%20it%20will%20be%20right%20in%20the%20middle%2C%20and%20at%20%24HI%2C%20it%20will%20sound%20like%20it's%20on%20the%20right.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%20%5BL-R%5D%22%5D%7D%2C%7Bname%3A%22reverb%22%2CpianoName%3A%22Reverb%22%2CmaxRawVol%3Au.reverbRange%2CnewNoteVol%3A0%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A0%2CpromptName%3A%22Instrument%20Reverb%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20reverb%20of%20your%20insturment%2C%20just%20like%20the%20reverb%20slider.%22%2C%22At%20%24LO%2C%20your%20instrument%20will%20have%20no%20reverb.%20At%20%24HI%2C%20it%20will%20be%20at%20maximum.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22distortion%22%2CpianoName%3A%22Distortion%22%2CmaxRawVol%3Au.distortionRange-1%2CnewNoteVol%3A0%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A3%2CpromptName%3A%22Instrument%20Distortion%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20amount%20of%20distortion%20for%20your%20instrument%2C%20just%20like%20the%20distortion%20slider.%22%2C%22At%20%24LO%2C%20your%20instrument%20will%20have%20no%20distortion.%20At%20%24HI%2C%20it%20will%20be%20at%20maximum.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22fm%20slider%201%22%2CpianoName%3A%22FM%201%22%2CmaxRawVol%3A15%2CnewNoteVol%3A15%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A12%2CpromptName%3A%22FM%20Slider%201%22%2CpromptDesc%3A%5B%22This%20setting%20affects%20the%20strength%20of%20the%20first%20FM%20slider%2C%20just%20like%20the%20corresponding%20slider%20on%20your%20instrument.%22%2C%22It%20works%20in%20a%20multiplicative%20way%2C%20so%20at%20%24HI%20your%20slider%20will%20sound%20the%20same%20is%20its%20default%20value%2C%20and%20at%20%24LO%20it%20will%20sound%20like%20it%20has%20been%20moved%20all%20the%20way%20to%20the%20left.%22%2C%22For%20the%20full%20range%20of%20control%20with%20this%20mod%2C%20move%20your%20underlying%20slider%20all%20the%20way%20to%20the%20right.%22%2C%22%5BMULTIPLICATIVE%5D%20%5B%24LO%20-%20%24HI%5D%20%5B%25%5D%22%5D%7D%2C%7Bname%3A%22fm%20slider%202%22%2CpianoName%3A%22FM%202%22%2CmaxRawVol%3A15%2CnewNoteVol%3A15%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A12%2CpromptName%3A%22FM%20Slider%202%22%2CpromptDesc%3A%5B%22This%20setting%20affects%20the%20strength%20of%20the%20second%20FM%20slider%2C%20just%20like%20the%20corresponding%20slider%20on%20your%20instrument.%22%2C%22It%20works%20in%20a%20multiplicative%20way%2C%20so%20at%20%24HI%20your%20slider%20will%20sound%20the%20same%20is%20its%20default%20value%2C%20and%20at%20%24LO%20it%20will%20sound%20like%20it%20has%20been%20moved%20all%20the%20way%20to%20the%20left.%22%2C%22For%20the%20full%20range%20of%20control%20with%20this%20mod%2C%20move%20your%20underlying%20slider%20all%20the%20way%20to%20the%20right.%22%2C%22%5BMULTIPLICATIVE%5D%20%5B%24LO%20-%20%24HI%5D%20%5B%25%5D%22%5D%7D%2C%7Bname%3A%22fm%20slider%203%22%2CpianoName%3A%22FM%203%22%2CmaxRawVol%3A15%2CnewNoteVol%3A15%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A12%2CpromptName%3A%22FM%20Slider%203%22%2CpromptDesc%3A%5B%22This%20setting%20affects%20the%20strength%20of%20the%20third%20FM%20slider%2C%20just%20like%20the%20corresponding%20slider%20on%20your%20instrument.%22%2C%22It%20works%20in%20a%20multiplicative%20way%2C%20so%20at%20%24HI%20your%20slider%20will%20sound%20the%20same%20is%20its%20default%20value%2C%20and%20at%20%24LO%20it%20will%20sound%20like%20it%20has%20been%20moved%20all%20the%20way%20to%20the%20left.%22%2C%22For%20the%20full%20range%20of%20control%20with%20this%20mod%2C%20move%20your%20underlying%20slider%20all%20the%20way%20to%20the%20right.%22%2C%22%5BMULTIPLICATIVE%5D%20%5B%24LO%20-%20%24HI%5D%20%5B%25%5D%22%5D%7D%2C%7Bname%3A%22fm%20slider%204%22%2CpianoName%3A%22FM%204%22%2CmaxRawVol%3A15%2CnewNoteVol%3A15%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A12%2CpromptName%3A%22FM%20Slider%204%22%2CpromptDesc%3A%5B%22This%20setting%20affects%20the%20strength%20of%20the%20fourth%20FM%20slider%2C%20just%20like%20the%20corresponding%20slider%20on%20your%20instrument.%22%2C%22It%20works%20in%20a%20multiplicative%20way%2C%20so%20at%20%24HI%20your%20slider%20will%20sound%20the%20same%20is%20its%20default%20value%2C%20and%20at%20%24LO%20it%20will%20sound%20like%20it%20has%20been%20moved%20all%20the%20way%20to%20the%20left.%22%2C%22For%20the%20full%20range%20of%20control%20with%20this%20mod%2C%20move%20your%20underlying%20slider%20all%20the%20way%20to%20the%20right.%22%2C%22%5BMULTIPLICATIVE%5D%20%5B%24LO%20-%20%24HI%5D%20%5B%25%5D%22%5D%7D%2C%7Bname%3A%22fm%20feedback%22%2CpianoName%3A%22FM%20Feedback%22%2CmaxRawVol%3A15%2CnewNoteVol%3A15%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A12%2CpromptName%3A%22FM%20Feedback%22%2CpromptDesc%3A%5B%22This%20setting%20affects%20the%20strength%20of%20the%20FM%20feedback%20slider%2C%20just%20like%20the%20corresponding%20slider%20on%20your%20instrument.%22%2C%22It%20works%20in%20a%20multiplicative%20way%2C%20so%20at%20%24HI%20your%20slider%20will%20sound%20the%20same%20is%20its%20default%20value%2C%20and%20at%20%24LO%20it%20will%20sound%20like%20it%20has%20been%20moved%20all%20the%20way%20to%20the%20left.%22%2C%22For%20the%20full%20range%20of%20control%20with%20this%20mod%2C%20move%20your%20underlying%20slider%20all%20the%20way%20to%20the%20right.%22%2C%22%5BMULTIPLICATIVE%5D%20%5B%24LO%20-%20%24HI%5D%20%5B%25%5D%22%5D%7D%2C%7Bname%3A%22pulse%20width%22%2CpianoName%3A%22Pulse%20Width%22%2CmaxRawVol%3Au.pulseWidthRange%2CnewNoteVol%3Au.pulseWidthRange%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A12%2CpromptName%3A%22Pulse%20Width%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20width%20of%20this%20instrument's%20pulse%20wave%2C%20just%20like%20the%20pulse%20width%20slider.%22%2C%22At%20%24HI%2C%20your%20instrument%20will%20sound%20like%20a%20pure%20square%20wave%20(on%2050%25%20of%20the%20time).%20It%20will%20gradually%20sound%20narrower%20down%20to%20%24LO%2C%20where%20it%20will%20be%20inaudible%20(as%20it%20is%20on%200%25%20of%20the%20time).%22%2C%22Changing%20pulse%20width%20randomly%20between%20a%20few%20values%20is%20a%20common%20strategy%20in%20chiptune%20music%20to%20lend%20some%20personality%20to%20a%20lead%20instrument.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%20%5B%25Duty%5D%22%5D%7D%2C%7Bname%3A%22detune%22%2CpianoName%3A%22Detune%22%2CmaxRawVol%3Au.detuneMax-u.detuneMin%2CnewNoteVol%3Au.detuneCenter%2CforSong%3A!1%2CconvertRealFactor%3A-u.detuneCenter%2CassociatedEffect%3A8%2CpromptName%3A%22Instrument%20Detune%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20detune%20for%20this%20instrument%2C%20just%20like%20the%20detune%20slider.%22%2C%22At%20%24MID%2C%20your%20instrument%20will%20have%20no%20detune%20applied.%20Each%20tick%20corresponds%20to%20one%20cent%2C%20or%20one-hundredth%20of%20a%20pitch.%20Thus%2C%20each%20change%20of%20100%20ticks%20corresponds%20to%20one%20half-step%20of%20detune%2C%20up%20to%20two%20half-steps%20up%20at%20%24HI%2C%20or%20two%20half-steps%20down%20at%20%24LO.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%20%5Bcents%5D%22%5D%7D%2C%7Bname%3A%22vibrato%20depth%22%2CpianoName%3A%22Vibrato%20Depth%22%2CmaxRawVol%3A50%2CnewNoteVol%3A0%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A9%2CpromptName%3A%22Vibrato%20Depth%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20amount%20that%20your%20pitch%20moves%20up%20and%20down%20by%20during%20vibrato%2C%20just%20like%20the%20vibrato%20depth%20slider.%22%2C%22At%20%24LO%2C%20your%20instrument%20will%20have%20no%20vibrato%20depth%20so%20its%20vibrato%20would%20be%20inaudible.%20This%20increases%20up%20to%20%24HI%2C%20where%20an%20extreme%20pitch%20change%20will%20be%20noticeable.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%20%5Bpitch%20%C3%B725%5D%22%5D%7D%2C%7Bname%3A%22song%20detune%22%2CpianoName%3A%22Detune%22%2CmaxRawVol%3Au.songDetuneMax-u.songDetuneMin%2CnewNoteVol%3AMath.ceil((u.songDetuneMax-u.songDetuneMin)%2F2)%2CforSong%3A!0%2CconvertRealFactor%3A-250%2CassociatedEffect%3A12%2CpromptName%3A%22Song%20Detune%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20overall%20detune%20of%20the%20entire%20song.%20There%20is%20no%20associated%20slider.%22%2C%22At%20%24MID%2C%20your%20song%20will%20have%20no%20extra%20detune%20applied%20and%20sound%20unchanged%20from%20default.%20Each%20tick%20corresponds%20to%20four%20cents%2C%20or%20four%20hundredths%20of%20a%20pitch.%20Thus%2C%20each%20change%20of%2025%20ticks%20corresponds%20to%20one%20half-step%20of%20detune%2C%20up%20to%2010%20half-steps%20up%20at%20%24HI%2C%20or%2010%20half-steps%20down%20at%20%24LO.%22%2C%22%5BMULTIPLICATIVE%5D%20%5B%24LO%20-%20%24HI%5D%20%5Bcents%20x4%5D%22%5D%7D%2C%7Bname%3A%22vibrato%20speed%22%2CpianoName%3A%22Vibrato%20Speed%22%2CmaxRawVol%3A30%2CnewNoteVol%3A0%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A9%2CpromptName%3A%22Vibrato%20Speed%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20speed%20your%20instrument%20will%20vibrato%20at%2C%20just%20like%20the%20slider.%22%2C%22A%20setting%20of%20%24LO%20means%20there%20will%20be%20no%20oscillation%2C%20and%20vibrato%20will%20be%20disabled.%20Higher%20settings%20will%20increase%20the%20speed%2C%20up%20to%20a%20dramatic%20trill%20at%20the%20max%20value%2C%20%24HI.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22vibrato%20delay%22%2CpianoName%3A%22Vibrato%20Delay%22%2CmaxRawVol%3A50%2CnewNoteVol%3A0%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A9%2CpromptName%3A%22Vibrato%20Delay%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20amount%20of%20time%20vibrato%20will%20be%20held%20off%20for%20before%20triggering%20for%20every%20new%20note%2C%20just%20like%20the%20slider.%22%2C%22A%20setting%20of%20%24LO%20means%20there%20will%20be%20no%20delay.%20A%20setting%20of%2024%20corresponds%20to%20one%20full%20beat%20of%20delay.%20As%20a%20sole%20exception%20to%20this%20scale%2C%20setting%20delay%20to%20%24HI%20will%20completely%20disable%20vibrato%20(as%20if%20it%20had%20infinite%20delay).%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%20%5Bbeats%20%C3%B724%5D%22%5D%7D%2C%7Bname%3A%22arp%20speed%22%2CpianoName%3A%22Arp%20Speed%22%2CmaxRawVol%3A50%2CnewNoteVol%3A12%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A11%2CpromptName%3A%22Arpeggio%20Speed%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20speed%20at%20which%20your%20instrument's%20chords%20arpeggiate%2C%20just%20like%20the%20arpeggio%20speed%20slider.%22%2C%22Each%20setting%20corresponds%20to%20a%20different%20speed%2C%20from%20the%20slowest%20to%20the%20fastest.%20The%20speeds%20are%20listed%20below.%22%2C%22%5B0-4%5D%3A%20x0%2C%20x1%2F16%2C%20x%E2%85%9B%2C%20x%E2%85%95%2C%20x%C2%BC%2C%22%2C%22%5B5-9%5D%3A%20x%E2%85%93%2C%20x%E2%85%96%2C%20x%C2%BD%2C%20x%E2%85%94%2C%20x%C2%BE%2C%22%2C%22%5B10-14%5D%3A%20x%E2%85%98%2C%20x0.9%2C%20x1%2C%20x1.1%2C%20x1.2%2C%22%2C%22%5B15-19%5D%3A%20x1.3%2C%20x1.4%2C%20x1.5%2C%20x1.6%2C%20x1.7%2C%22%2C%22%5B20-24%5D%3A%20x1.8%2C%20x1.9%2C%20x2%2C%20x2.1%2C%20x2.2%2C%22%2C%22%5B25-29%5D%3A%20x2.3%2C%20x2.4%2C%20x2.5%2C%20x2.6%2C%20x2.7%2C%22%2C%22%5B30-34%5D%3A%20x2.8%2C%20x2.9%2C%20x3%2C%20x3.1%2C%20x3.2%2C%22%2C%22%5B35-39%5D%3A%20x3.3%2C%20x3.4%2C%20x3.5%2C%20x3.6%2C%20x3.7%2C%22%2C%22%5B40-44%5D%3A%20x3.8%2C%20x3.9%2C%20x4%2C%20x4.15%2C%20x4.3%2C%22%2C%22%5B45-50%5D%3A%20x4.5%2C%20x4.8%2C%20x5%2C%20x5.5%2C%20x6%2C%20x8%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22pan%20delay%22%2CpianoName%3A%22Pan%20Delay%22%2CmaxRawVol%3A20%2CnewNoteVol%3A10%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A2%2CpromptName%3A%22Panning%20Delay%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20delay%20applied%20to%20panning%20for%20your%20instrument%2C%20just%20like%20the%20pan%20delay%20slider.%22%2C%22With%20more%20delay%2C%20the%20panning%20effect%20will%20generally%20be%20more%20pronounced.%20%24MID%20is%20the%20default%20value%2C%20whereas%20%24LO%20will%20remove%20any%20delay%20at%20all.%20No%20delay%20can%20be%20desirable%20for%20chiptune%20songs.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22reset%20arp%22%2CpianoName%3A%22Reset%20Arp%22%2CmaxRawVol%3A1%2CnewNoteVol%3A1%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A11%2CpromptName%3A%22Reset%20Arpeggio%22%2CpromptDesc%3A%5B%22This%20setting%20functions%20a%20little%20different%20from%20most.%20Wherever%20a%20note%20is%20placed%2C%20the%20arpeggio%20of%20this%20instrument%20will%20reset%20at%20the%20very%20start%20of%20that%20note.%20This%20is%20most%20noticeable%20with%20lower%20arpeggio%20speeds.%20The%20lengths%20and%20values%20of%20notes%20for%20this%20setting%20don't%20matter%2C%20just%20the%20note%20start%20times.%22%2C%22This%20mod%20can%20be%20used%20to%20sync%20up%20your%20apreggios%20so%20that%20they%20always%20sound%20the%20same%2C%20even%20if%20you%20are%20using%20an%20odd-ratio%20arpeggio%20speed%20or%20modulating%20arpeggio%20speed.%22%2C%22%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22eq%20filter%22%2CpianoName%3A%22EQFlt%22%2CmaxRawVol%3A10%2CnewNoteVol%3A0%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A12%2CpromptName%3A%22EQ%20Filter%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20a%20few%20separate%20things%20for%20your%20instrument's%20EQ%20filter.%22%2C%22When%20the%20option%20'morph'%20is%20selected%2C%20your%20modulator%20values%20will%20indicate%20a%20sub-filter%20index%20of%20your%20EQ%20filter%20to%20'morph'%20to%20over%20time.%20For%20example%2C%20a%20change%20from%200%20to%201%20means%20your%20main%20filter%20(default)%20will%20morph%20to%20sub-filter%201%20over%20the%20specified%20duration.%20You%20can%20shape%20the%20main%20filter%20and%20sub-filters%20in%20the%20large%20filter%20editor%20('%2B'%20button).%20If%20your%20two%20filters'%20number%2C%20type%2C%20and%20order%20of%20filter%20dots%20all%20match%20up%2C%20the%20morph%20will%20happen%20smoothly%20and%20you'll%20be%20able%20to%20hear%20them%20changing.%20If%20they%20do%20not%20match%20up%2C%20the%20filters%20will%20simply%20jump%20between%20each%20other.%22%2C%22Note%20that%20filters%20will%20morph%20based%20on%20endpoints%20in%20the%20pattern%20editor.%20So%2C%20if%20you%20specify%20a%20morph%20from%20sub-filter%201%20to%204%20but%20do%20not%20specifically%20drag%20in%20new%20endpoints%20for%202%20and%203%2C%20it%20will%20morph%20directly%20between%201%20and%204%20without%20going%20through%20the%20others.%22%2C%22If%20you%20target%20Dot%20X%20or%20Dot%20Y%2C%20you%20can%20finely%20tune%20the%20coordinates%20of%20a%20single%20dot%20for%20your%20filter.%20The%20number%20of%20available%20dots%20to%20choose%20is%20dependent%20on%20your%20main%20filter's%20dot%20count.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22note%20filter%22%2CpianoName%3A%22N.Flt%22%2CmaxRawVol%3A10%2CnewNoteVol%3A0%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A5%2CpromptName%3A%22Note%20Filter%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20a%20few%20separate%20things%20for%20your%20instrument's%20note%20filter.%22%2C%22When%20the%20option%20'morph'%20is%20selected%2C%20your%20modulator%20values%20will%20indicate%20a%20sub-filter%20index%20of%20your%20note%20filter%20to%20'morph'%20to%20over%20time.%20For%20example%2C%20a%20change%20from%200%20to%201%20means%20your%20main%20filter%20(default)%20will%20morph%20to%20sub-filter%201%20over%20the%20specified%20duration.%20You%20can%20shape%20the%20main%20filter%20and%20sub-filters%20in%20the%20large%20filter%20editor%20('%2B'%20button).%20If%20your%20two%20filters'%20number%2C%20type%2C%20and%20order%20of%20filter%20dots%20all%20match%20up%2C%20the%20morph%20will%20happen%20smoothly%20and%20you'll%20be%20able%20to%20hear%20them%20changing.%20If%20they%20do%20not%20match%20up%2C%20the%20filters%20will%20simply%20jump%20between%20each%20other.%22%2C%22Note%20that%20filters%20will%20morph%20based%20on%20endpoints%20in%20the%20pattern%20editor.%20So%2C%20if%20you%20specify%20a%20morph%20from%20sub-filter%201%20to%204%20but%20do%20not%20specifically%20drag%20in%20new%20endpoints%20for%202%20and%203%2C%20it%20will%20morph%20directly%20between%201%20and%204%20without%20going%20through%20the%20others.%22%2C%22If%20you%20target%20Dot%20X%20or%20Dot%20Y%2C%20you%20can%20finely%20tune%20the%20coordinates%20of%20a%20single%20dot%20for%20your%20filter.%20The%20number%20of%20available%20dots%20to%20choose%20is%20dependent%20on%20your%20main%20filter's%20dot%20count.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22bit%20crush%22%2CpianoName%3A%22Bitcrush%22%2CmaxRawVol%3Au.bitcrusherQuantizationRange-1%2CnewNoteVol%3AMath.round(u.bitcrusherQuantizationRange%2F2)%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A4%2CpromptName%3A%22Instrument%20Bit%20Crush%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20bit%20crush%20of%20your%20instrument%2C%20just%20like%20the%20bit%20crush%20slider.%22%2C%22At%20a%20value%20of%20%24LO%2C%20no%20bit%20crush%20will%20be%20applied.%20This%20increases%20and%20the%20bit%20crush%20effect%20gets%20more%20noticeable%20up%20to%20the%20max%20value%2C%20%24HI.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22freq%20crush%22%2CpianoName%3A%22Freq%20Crush%22%2CmaxRawVol%3Au.bitcrusherFreqRange-1%2CnewNoteVol%3AMath.round(u.bitcrusherFreqRange%2F2)%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A4%2CpromptName%3A%22Instrument%20Frequency%20Crush%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20frequency%20crush%20of%20your%20instrument%2C%20just%20like%20the%20freq%20crush%20slider.%22%2C%22At%20a%20value%20of%20%24LO%2C%20no%20frequency%20crush%20will%20be%20applied.%20This%20increases%20and%20the%20frequency%20crush%20effect%20gets%20more%20noticeable%20up%20to%20the%20max%20value%2C%20%24HI.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22echo%22%2CpianoName%3A%22Echo%22%2CmaxRawVol%3Au.echoSustainRange-1%2CnewNoteVol%3A0%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A6%2CpromptName%3A%22Instrument%20Echo%20Sustain%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20echo%20sustain%20(echo%20loudness)%20of%20your%20instrument%2C%20just%20like%20the%20echo%20slider.%22%2C%22At%20%24LO%2C%20your%20instrument%20will%20have%20no%20echo%20sustain%20and%20echo%20will%20not%20be%20audible.%20Echo%20sustain%20increases%20and%20the%20echo%20effect%20gets%20more%20noticeable%20up%20to%20the%20max%20value%2C%20%24HI.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22echo%20delay%22%2CpianoName%3A%22Echo%20Delay%22%2CmaxRawVol%3Au.echoDelayRange%2CnewNoteVol%3A0%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A12%2CpromptName%3A%22Instrument%20Echo%20Delay%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20echo%20delay%20of%20your%20instrument%2C%20just%20like%20the%20echo%20delay%20slider.%22%2C%22At%20%24LO%2C%20your%20instrument%20will%20have%20very%20little%20echo%20delay%2C%20and%20this%20increases%20up%20to%202%20beats%20of%20delay%20at%20%24HI.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%20%5B~beats%20%C3%B712%5D%22%5D%7D%2C%7Bname%3A%22chorus%22%2CpianoName%3A%22Chorus%22%2CmaxRawVol%3Au.chorusRange-1%2CnewNoteVol%3A0%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A1%2CpromptName%3A%22Instrument%20Chorus%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20chorus%20strength%20of%20your%20instrument%2C%20just%20like%20the%20chorus%20slider.%22%2C%22At%20%24LO%2C%20the%20chorus%20effect%20will%20be%20disabled.%20The%20strength%20of%20the%20chorus%20effect%20increases%20up%20to%20the%20max%20value%2C%20%24HI.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22eq%20filt%20cut%22%2CpianoName%3A%22EQFlt%20Cut%22%2CmaxRawVol%3Au.filterSimpleCutRange-1%2CnewNoteVol%3Au.filterSimpleCutRange-1%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A12%2CpromptName%3A%22EQ%20Filter%20Cutoff%20Frequency%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20filter%20cut%20position%20of%20your%20instrument%2C%20just%20like%20the%20filter%20cut%20slider.%22%2C%22This%20setting%20is%20roughly%20analagous%20to%20the%20horizontal%20position%20of%20a%20single%20low-pass%20dot%20on%20the%20advanced%20filter%20editor.%20At%20lower%20values%2C%20a%20wider%20range%20of%20frequencies%20is%20cut%20off.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22eq%20filt%20peak%22%2CpianoName%3A%22EQFlt%20Peak%22%2CmaxRawVol%3Au.filterSimplePeakRange-1%2CnewNoteVol%3A0%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A12%2CpromptName%3A%22EQ%20Filter%20Peak%20Gain%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20filter%20peak%20position%20of%20your%20instrument%2C%20just%20like%20the%20filter%20peak%20slider.%22%2C%22This%20setting%20is%20roughly%20analagous%20to%20the%20vertical%20position%20of%20a%20single%20low-pass%20dot%20on%20the%20advanced%20filter%20editor.%20At%20lower%20values%2C%20the%20cutoff%20frequency%20will%20not%20be%20emphasized%2C%20and%20at%20higher%20values%20you%20will%20hear%20emphasis%20on%20the%20cutoff%20frequency.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22note%20filt%20cut%22%2CpianoName%3A%22N.Flt%20Cut%22%2CmaxRawVol%3Au.filterSimpleCutRange-1%2CnewNoteVol%3Au.filterSimpleCutRange-1%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A5%2CpromptName%3A%22Note%20Filter%20Cutoff%20Frequency%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20filter%20cut%20position%20of%20your%20instrument%2C%20just%20like%20the%20filter%20cut%20slider.%22%2C%22This%20setting%20is%20roughly%20analagous%20to%20the%20horizontal%20position%20of%20a%20single%20low-pass%20dot%20on%20the%20advanced%20filter%20editor.%20At%20lower%20values%2C%20a%20wider%20range%20of%20frequencies%20is%20cut%20off.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22note%20filt%20peak%22%2CpianoName%3A%22N.Flt%20Peak%22%2CmaxRawVol%3Au.filterSimplePeakRange-1%2CnewNoteVol%3A0%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A5%2CpromptName%3A%22Note%20Filter%20Peak%20Gain%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20filter%20peak%20position%20of%20your%20instrument%2C%20just%20like%20the%20filter%20peak%20slider.%22%2C%22This%20setting%20is%20roughly%20analagous%20to%20the%20vertical%20position%20of%20a%20single%20low-pass%20dot%20on%20the%20advanced%20filter%20editor.%20At%20lower%20values%2C%20the%20cutoff%20frequency%20will%20not%20be%20emphasized%2C%20and%20at%20higher%20values%20you%20will%20hear%20emphasis%20on%20the%20cutoff%20frequency.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22pitch%20shift%22%2CpianoName%3A%22Pitch%20Shift%22%2CmaxRawVol%3Au.pitchShiftRange-1%2CnewNoteVol%3Au.pitchShiftCenter%2CforSong%3A!1%2CconvertRealFactor%3A-u.pitchShiftCenter%2CassociatedEffect%3A7%2CpromptName%3A%22Pitch%20Shift%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20pitch%20offset%20of%20your%20instrument%2C%20just%20like%20the%20pitch%20shift%20slider.%22%2C%22At%20%24MID%20your%20instrument%20will%20have%20no%20pitch%20shift.%20This%20increases%20as%20you%20decrease%20toward%20%24LO%20pitches%20(half-steps)%20at%20the%20low%20end%2C%20or%20increases%20towards%20%2B%24HI%20pitches%20at%20the%20high%20end.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%20%5Bpitch%5D%22%5D%7D%2C%7Bname%3A%22sustain%22%2CpianoName%3A%22Sustain%22%2CmaxRawVol%3Au.stringSustainRange-1%2CnewNoteVol%3A0%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A12%2CpromptName%3A%22Picked%20String%20Sustain%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20sustain%20of%20your%20picked%20string%20instrument%2C%20just%20like%20the%20sustain%20slider.%22%2C%22At%20%24LO%2C%20your%20instrument%20will%20have%20minimum%20sustain%20and%20sound%20'plucky'.%20This%20increases%20to%20a%20more%20held%20sound%20as%20your%20modulator%20approaches%20the%20maximum%2C%20%24HI.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22mix%20volume%22%2CpianoName%3A%22Mix%20Vol.%22%2CmaxRawVol%3Au.volumeRange%2CnewNoteVol%3AMath.ceil(u.volumeRange%2F2)%2CforSong%3A!1%2CconvertRealFactor%3AMath.ceil(-u.volumeRange%2F2)%2CassociatedEffect%3A12%2CpromptName%3A%22Mix%20Volume%22%2CpromptDesc%3A%5B%22This%20setting%20affects%20the%20volume%20of%20your%20instrument%20as%20if%20its%20volume%20slider%20had%20been%20moved.%22%2C%22At%20%24MID%2C%20an%20instrument's%20volume%20will%20be%20unchanged%20from%20default.%20This%20means%20you%20can%20still%20use%20the%20volume%20sliders%20to%20mix%20the%20base%20volume%20of%20instruments%2C%20since%20this%20setting%20and%20the%20default%20value%20work%20multiplicatively.%20The%20volume%20gradually%20increases%20up%20to%20%24HI%2C%20or%20decreases%20down%20to%20mute%20at%20%24LO.%22%2C%22Unlike%20the%20'note%20volume'%20setting%2C%20mix%20volume%20is%20very%20straightforward%20and%20simply%20affects%20the%20resultant%20instrument%20volume%20after%20all%20effects%20are%20applied.%22%2C%22%5BMULTIPLICATIVE%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22fm%20slider%205%22%2CpianoName%3A%22FM%205%22%2CmaxRawVol%3A15%2CnewNoteVol%3A15%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A12%2CpromptName%3A%22FM%20Slider%205%22%2CpromptDesc%3A%5B%22This%20setting%20affects%20the%20strength%20of%20the%20fifth%20FM%20slider%2C%20just%20like%20the%20corresponding%20slider%20on%20your%20instrument.%22%2C%22It%20works%20in%20a%20multiplicative%20way%2C%20so%20at%20%24HI%20your%20slider%20will%20sound%20the%20same%20is%20its%20default%20value%2C%20and%20at%20%24LO%20it%20will%20sound%20like%20it%20has%20been%20moved%20all%20the%20way%20to%20the%20left.%22%2C%22For%20the%20full%20range%20of%20control%20with%20this%20mod%2C%20move%20your%20underlying%20slider%20all%20the%20way%20to%20the%20right.%22%2C%22%5BMULTIPLICATIVE%5D%20%5B%24LO%20-%20%24HI%5D%20%5B%25%5D%22%5D%7D%2C%7Bname%3A%22fm%20slider%206%22%2CpianoName%3A%22FM%206%22%2CmaxRawVol%3A15%2CnewNoteVol%3A15%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A12%2CpromptName%3A%22FM%20Slider%206%22%2CpromptDesc%3A%5B%22This%20setting%20affects%20the%20strength%20of%20the%20sixth%20FM%20slider%2C%20just%20like%20the%20corresponding%20slider%20on%20your%20instrument.%22%2C%22It%20works%20in%20a%20multiplicative%20way%2C%20so%20at%20%24HI%20your%20slider%20will%20sound%20the%20same%20is%20its%20default%20value%2C%20and%20at%20%24LO%20it%20will%20sound%20like%20it%20has%20been%20moved%20all%20the%20way%20to%20the%20left.%22%2C%22For%20the%20full%20range%20of%20control%20with%20this%20mod%2C%20move%20your%20underlying%20slider%20all%20the%20way%20to%20the%20right.%22%2C%22%5BMULTIPLICATIVE%5D%20%5B%24LO%20-%20%24HI%5D%20%5B%25%5D%22%5D%7D%2C%7Bname%3A%22decimal%20offset%22%2CpianoName%3A%22Decimal%20Offset%22%2CmaxRawVol%3A99%2CnewNoteVol%3A0%2CforSong%3A!1%2CconvertRealFactor%3A0%2CinvertSliderIndicator%3A!0%2CassociatedEffect%3A12%2CpromptName%3A%22Decimal%20Offset%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20decimal%20offset%20that%20is%20subtracted%20from%20the%20pulse%20width%3B%20use%20this%20for%20creating%20values%20like%2012.5%20or%206.25.%22%2C%22%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22envelope%20speed%22%2CpianoName%3A%22EnvelopeSpd%22%2CmaxRawVol%3A50%2CnewNoteVol%3A12%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A12%2CpromptName%3A%22Envelope%20Speed%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20how%20fast%20all%20of%20the%20envelopes%20for%20the%20instrument%20play.%22%2C%22At%20%24LO%2C%20your%20instrument's%20envelopes%20will%20be%20frozen%2C%20and%20at%20values%20near%20there%20they%20will%20change%20very%20slowly.%20At%2012%2C%20the%20envelopes%20will%20work%20as%20usual%2C%20performing%20at%20normal%20speed.%20This%20increases%20up%20to%20%24HI%2C%20where%20the%20envelopes%20will%20change%20very%20quickly.%20The%20speeds%20are%20given%20below%3A%22%2C%22%5B0-4%5D%3A%20x0%2C%20x1%2F16%2C%20x%E2%85%9B%2C%20x%E2%85%95%2C%20x%C2%BC%2C%22%2C%22%5B5-9%5D%3A%20x%E2%85%93%2C%20x%E2%85%96%2C%20x%C2%BD%2C%20x%E2%85%94%2C%20x%C2%BE%2C%22%2C%22%5B10-14%5D%3A%20x%E2%85%98%2C%20x0.9%2C%20x1%2C%20x1.1%2C%20x1.2%2C%22%2C%22%5B15-19%5D%3A%20x1.3%2C%20x1.4%2C%20x1.5%2C%20x1.6%2C%20x1.7%2C%22%2C%22%5B20-24%5D%3A%20x1.8%2C%20x1.9%2C%20x2%2C%20x2.1%2C%20x2.2%2C%22%2C%22%5B25-29%5D%3A%20x2.3%2C%20x2.4%2C%20x2.5%2C%20x2.6%2C%20x2.7%2C%22%2C%22%5B30-34%5D%3A%20x2.8%2C%20x2.9%2C%20x3%2C%20x3.1%2C%20x3.2%2C%22%2C%22%5B35-39%5D%3A%20x3.3%2C%20x3.4%2C%20x3.5%2C%20x3.6%2C%20x3.7%2C%22%2C%22%5B40-44%5D%3A%20x3.8%2C%20x3.9%2C%20x4%2C%20x4.15%2C%20x4.3%2C%22%2C%22%5B45-50%5D%3A%20x4.5%2C%20x4.8%2C%20x5%2C%20x5.5%2C%20x6%2C%20x8%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22dynamism%22%2CpianoName%3A%22Dynamism%22%2CmaxRawVol%3Au.supersawDynamismMax%2CnewNoteVol%3A0%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A12%2CpromptName%3A%22Supersaw%20Dynamism%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20supersaw%20dynamism%20of%20your%20instrument%2C%20just%20like%20the%20dynamism%20slider.%22%2C%22At%20%24LO%2C%20your%20instrument%20will%20have%20only%20a%20single%20pulse%20contributing.%20Increasing%20this%20will%20raise%20the%20contribution%20of%20other%20waves%20which%20is%20similar%20to%20a%20chorus%20effect.%20The%20effect%20gets%20more%20noticeable%20up%20to%20the%20max%20value%2C%20%24HI.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22spread%22%2CpianoName%3A%22Spread%22%2CmaxRawVol%3Au.supersawSpreadMax%2CnewNoteVol%3A0%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A12%2CpromptName%3A%22Supersaw%20Spread%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20supersaw%20spread%20of%20your%20instrument%2C%20just%20like%20the%20spread%20slider.%22%2C%22At%20%24LO%2C%20all%20the%20pulses%20in%20your%20supersaw%20will%20be%20at%20the%20same%20frequency.%20Increasing%20this%20value%20raises%20the%20frequency%20spread%20of%20the%20contributing%20waves%2C%20up%20to%20a%20dissonant%20spread%20at%20the%20max%20value%2C%20%24HI.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%22%5D%7D%2C%7Bname%3A%22saw%20shape%22%2CpianoName%3A%22Saw%20Shape%22%2CmaxRawVol%3Au.supersawShapeMax%2CnewNoteVol%3A0%2CforSong%3A!1%2CconvertRealFactor%3A0%2CassociatedEffect%3A12%2CpromptName%3A%22Supersaw%20Shape%22%2CpromptDesc%3A%5B%22This%20setting%20controls%20the%20supersaw%20shape%20of%20your%20instrument%2C%20just%20like%20the%20Saw%E2%86%94Pulse%20slider.%22%2C%22As%20the%20slider's%20name%20implies%2C%20this%20effect%20will%20give%20you%20a%20sawtooth%20wave%20at%20%24LO%2C%20and%20a%20full%20pulse%20width%20wave%20at%20%24HI.%20Values%20in%20between%20will%20be%20a%20blend%20of%20the%20two.%22%2C%22%5BOVERWRITING%5D%20%5B%24LO%20-%20%24HI%5D%20%5B%25%5D%22%5D%7D%5D)%2C%2FAndroid%7CwebOS%7CiPhone%7CiPad%7CiPod%7CBlackBerry%7CIEMobile%7COpera%20Mini%7Candroid%7Cipad%7Cplaybook%7Csilk%2Fi.test(navigator.userAgent)%3Bclass%20z%7Bstatic%20valueToPreset(e)%7Bvar%20t%3Bconst%20s%3De%3E%3E6%2Ci%3D63%26e%3Breturn%20null%3D%3D%3D(t%3Dz.presetCategories%5Bs%5D)%7C%7Cvoid%200%3D%3D%3Dt%3Fvoid%200%3At.presets%5Bi%5D%7Dstatic%20midiProgramToPresetValue(e)%7Bfor(let%20t%3D0%3Bt%3Cz.presetCategories.length%3Bt%2B%2B)%7Bconst%20s%3Dz.presetCategories%5Bt%5D%3Bfor(let%20i%3D0%3Bi%3Cs.presets.length%3Bi%2B%2B)%7Bconst%20n%3Ds.presets%5Bi%5D%3Bif(n.generalMidi%26%26n.midiProgram%3D%3De)return(t%3C%3C6)%2Bi%7D%7Dreturn%20null%7Dstatic%20nameToPresetValue(e)%7Bfor(let%20t%3D0%3Bt%3Cz.presetCategories.length%3Bt%2B%2B)%7Bconst%20s%3Dz.presetCategories%5Bt%5D%3Bfor(let%20i%3D0%3Bi%3Cs.presets.length%3Bi%2B%2B)%7Bif(s.presets%5Bi%5D.name%3D%3De)return(t%3C%3C6)%2Bi%7D%7Dreturn%20null%7Dstatic%20instrumentToPreset(e)%7Bvar%20t%3Breturn%20null%3D%3D%3D(t%3Dz.presetCategories%5B0%5D.presets.dictionary)%7C%7Cvoid%200%3D%3D%3Dt%3Fvoid%200%3At%5Bnull%3D%3Ds%3Fvoid%200%3As%5Be%5D%5D%7D%7Dfunction%20A(e%2Ct)%7Bfor(let%20s%3D0%3Bs%3Ce.length%3Bs%2B%2B)e%5Bs%5D*%3Dt%7Dfunction%20C(e)%7Bif(!function(e)%7Breturn!(!e%7C%7Ce%26e-1)%7D(e))throw%20new%20Error(%22FFT%20array%20length%20must%20be%20a%20power%20of%202.%22)%3Breturn%20Math.round(Math.log(e)%2FMath.log(2))%7Dfunction%20H(e%2Ct)%7Bconst%20s%3DC(t)%3Bif(t%3C4)throw%20new%20Error(%22FFT%20array%20length%20must%20be%20at%20least%204.%22)%3Bfor(let%20i%3Ds-1%3Bi%3E%3D2%3Bi--)%7Bconst%20s%3D1%3C%3Ci%2Cn%3Ds%3E%3E1%2Ca%3Ds%3C%3C1%2Cr%3D2*Math.PI%2Fa%2Co%3DMath.cos(r)%2Cl%3DMath.sin(r)%2Ch%3D2*o%3Bfor(let%20i%3D0%3Bi%3Ct%3Bi%2B%3Da)%7Bconst%20t%3Di%2Ca%3Dt%2Bn%2Cr%3Dt%2Bs%2Cu%3Dr%2Bn%2Cc%3Dr%2Bs%2Cp%3De%5Bt%5D%2Cf%3De%5Br%5D%3Be%5Bt%5D%3Dp%2Bf%2Ce%5Ba%5D*%3D2%2Ce%5Br%5D%3Dp-f%2Ce%5Bu%5D*%3D2%3Blet%20m%3Do%2Cd%3D-l%2Cy%3D1%2Cv%3D0%3Bfor(let%20s%3D1%3Bs%3Cn%3Bs%2B%2B)%7Bconst%20i%3Dt%2Bs%2Cn%3Dr-s%2Ca%3Dr%2Bs%2Co%3Dc-s%2Cl%3De%5Bi%5D%2Cu%3De%5Bn%5D%2Cp%3De%5Ba%5D%2Cf%3De%5Bo%5D%2Cg%3Dl-u%2Cb%3Dp%2Bf%3Be%5Bi%5D%3Dl%2Bu%2Ce%5Bn%5D%3Df-p%2Ce%5Ba%5D%3Dg*m-b*d%2Ce%5Bo%5D%3Db*m%2Bg*d%3Bconst%20S%3Dh*m-y%2CM%3Dh*d-v%3By%3Dm%2Cv%3Dd%2Cm%3DS%2Cd%3DM%7D%7D%7Dfor(let%20s%3D0%3Bs%3Ct%3Bs%2B%3D4)%7Bconst%20t%3Ds%2B1%2Ci%3Ds%2B2%2Cn%3Ds%2B3%2Ca%3De%5Bs%5D%2Cr%3D2*e%5Bt%5D%2Co%3De%5Bi%5D%2Cl%3D2*e%5Bn%5D%2Ch%3Da%2Bo%2Cu%3Da-o%3Be%5Bs%5D%3Dh%2Br%2Ce%5Bt%5D%3Dh-r%2Ce%5Bi%5D%3Du%2Bl%2Ce%5Bn%5D%3Du-l%7D!function(e%2Ct)%7Bconst%20s%3DC(t)%3Bif(s%3E16)throw%20new%20Error(%22FFT%20array%20length%20must%20not%20be%20greater%20than%202%5E16.%22)%3Bconst%20i%3D16-s%3Bfor(let%20s%3D0%3Bs%3Ct%3Bs%2B%2B)%7Blet%20t%3Bif(t%3D(43690%26s)%3E%3E1%7C(21845%26s)%3C%3C1%2Ct%3D(52428%26t)%3E%3E2%7C(13107%26t)%3C%3C2%2Ct%3D(61680%26t)%3E%3E4%7C(3855%26t)%3C%3C4%2Ct%3D(t%3E%3E8%7C(255%26t)%3C%3C8)%3E%3Ei%2Ct%3Es)%7Blet%20i%3De%5Bs%5D%3Be%5Bs%5D%3De%5Bt%5D%2Ce%5Bt%5D%3Di%7D%7D%7D(e%2Ct)%7Dz.version%3D%222.2.15%22%2Cz.versionDisplayName%3D%22UltraBox%20%22%2Bz.version%2Cz.releaseNotesURL%3D%22.%2Fpatch_notes.html%22%2Cz.isOnMac%3D%2F%5EMac%2Fi.test(navigator.platform)%7C%7C%2FMac%20OS%20X%2Fi.test(navigator.userAgent)%7C%7C%2F%5E(iPhone%7CiPad%7CiPod)%2Fi.test(navigator.platform)%7C%7C%2F(iPhone%7CiPad%7CiPod)%2Fi.test(navigator.userAgent)%2Cz.ctrlSymbol%3Dz.isOnMac%3F%22%E2%8C%98%22%3A%22Ctrl%2B%22%2Cz.ctrlName%3Dz.isOnMac%3F%22command%22%3A%22control%22%2Cz.presetCategories%3DS(%5B%7Bname%3A%22Custom%20Instruments%22%2Cpresets%3AS(%5B%7Bname%3As%5B0%5D%2CcustomType%3A0%7D%2C%7Bname%3As%5B1%5D%2CcustomType%3A1%7D%2C%7Bname%3As%5B2%5D%2CcustomType%3A2%7D%2C%7Bname%3As%5B3%5D%2CcustomType%3A3%7D%2C%7Bname%3As%5B4%5D%2CcustomType%3A4%7D%2C%7Bname%3As%5B5%5D%2CcustomType%3A5%7D%2C%7Bname%3As%5B6%5D%2CcustomType%3A6%7D%2C%7Bname%3As%5B7%5D%2CcustomType%3A7%7D%2C%7Bname%3As%5B8%5D%2CcustomType%3A8%7D%2C%7Bname%3As%5B9%5D%2CcustomType%3A9%7D%2C%7Bname%3As%5B11%5D%2CcustomType%3A11%7D%5D)%7D%2C%7Bname%3A%22Retro%20Presets%22%2Cpresets%3AS(%5B%7Bname%3A%22square%20wave%22%2CmidiProgram%3A80%2Csettings%3A%7Btype%3A%22chip%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22aliasing%22%5D%2Ctransition%3A%22interrupt%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-1%2Cchord%3A%22arpeggio%22%2Cwave%3A%22square%22%2Cunison%3A%22none%22%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22triangle%20wave%22%2CmidiProgram%3A71%2Csettings%3A%7Btype%3A%22chip%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22aliasing%22%5D%2Ctransition%3A%22interrupt%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-1%2Cchord%3A%22arpeggio%22%2Cwave%3A%22triangle%22%2Cunison%3A%22none%22%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22square%20lead%22%2CmidiProgram%3A80%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22chip%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A8e3%2ClinearGain%3A.3536%7D%5D%2Ceffects%3A%5B%22aliasing%22%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Cchord%3A%22simultaneous%22%2Cwave%3A%22square%22%2Cunison%3A%22hum%22%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22sawtooth%20lead%201%22%2CmidiProgram%3A81%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22chip%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4e3%2ClinearGain%3A.5%7D%5D%2Ceffects%3A%5B%22aliasing%22%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Cchord%3A%22simultaneous%22%2Cwave%3A%22sawtooth%22%2Cunison%3A%22shimmer%22%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22sawtooth%20lead%202%22%2CmidiProgram%3A81%2Csettings%3A%7Btype%3A%22chip%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A6727.17%2ClinearGain%3A1%7D%5D%2Ceffects%3A%5B%22vibrato%22%2C%22aliasing%22%5D%2Cvibrato%3A%22light%22%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0125%2CfadeOutTicks%3A72%2Cchord%3A%22simultaneous%22%2Cwave%3A%22sawtooth%22%2Cunison%3A%22hum%22%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22chip%20noise%22%2CmidiProgram%3A116%2CisNoise%3A!0%2Csettings%3A%7Btype%3A%22noise%22%2Ctransition%3A%22hard%22%2Ceffects%3A%5B%22aliasing%22%5D%2Cchord%3A%22arpeggio%22%2CfilterCutoffHz%3A4e3%2CfilterResonance%3A0%2CfilterEnvelope%3A%22steady%22%2Cwave%3A%22retro%22%7D%7D%2C%7Bname%3A%22supersaw%20lead%22%2CmidiProgram%3A81%2Csettings%3A%7Btype%3A%22supersaw%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A6727.17%2ClinearGain%3A2%7D%5D%2Ceffects%3A%5B%22reverb%22%5D%2Creverb%3A67%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-6%2CpulseWidth%3A50%2Cdynamism%3A100%2Cspread%3A58%2Cshape%3A0%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22FM%20twang%22%2CmidiProgram%3A32%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Cchord%3A%22simultaneous%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22twang%202%22%2Cindex%3A1%7D%5D%7D%7D%2C%7Bname%3A%22FM%20bass%22%2CmidiProgram%3A36%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Cchord%3A%22custom%20interval%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%86%904)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2Coperators%3A%5B%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A11%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A7%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A9%7D%2C%7Bfrequency%3A%2220%C3%97%22%2Camplitude%3A3%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22twang%202%22%2Cindex%3A1%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22twang%203%22%2Cindex%3A2%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22twang%202%22%2Cindex%3A3%7D%5D%7D%7D%2C%7Bname%3A%22FM%20flute%22%2CmidiProgram%3A73%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0263%2CfadeOutTicks%3A-3%2Cchord%3A%22simultaneous%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A6%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22twang%202%22%2Cindex%3A1%7D%5D%7D%7D%2C%7Bname%3A%22FM%20organ%22%2CmidiProgram%3A16%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22vibrato%22%5D%2Cvibrato%3A%22delayed%22%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0263%2CfadeOutTicks%3A-3%2Cchord%3A%22custom%20interval%22%2Calgorithm%3A%221%E2%86%903%E2%80%832%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A14%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A14%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A11%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A11%7D%5D%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22FM%20sine%22%2CmidiProgram%3A55%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%5D%2CeqFilterType%3A!0%2CeqSimpleCut%3A10%2CeqSimplePeak%3A0%2CenvelopeSpeed%3A12%2CdiscreteEnvelope%3A!1%2Ceffects%3A%5B%5D%2CpanDelay%3A10%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-1%2Calgorithm%3A%221%E2%80%832%E2%80%833%E2%80%834%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cwaveform%3A%22sine%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cwaveform%3A%22sine%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cwaveform%3A%22sine%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cwaveform%3A%22sine%22%7D%5D%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22NES%20Pulse%22%2CmidiProgram%3A80%2Csettings%3A%7Btype%3A%22custom%20chip%22%2Ceffects%3A%5B%22aliasing%22%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Cchord%3A%22arpeggio%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A8e3%2ClinearGain%3A.5%7D%5D%2Cunison%3A%22none%22%2Cvibrato%3A%22none%22%2Cenvelopes%3A%5B%5D%2CcustomChipWave%3A%5B-24%2C-24%2C-24%2C-24%2C-23%2C-23%2C-23%2C-23%2C-22%2C-22%2C-22%2C-22%2C-21%2C-21%2C-21%2C-21%2C-20%2C-20%2C-20%2C-20%2C-19%2C-19%2C-19%2C-19%2C-18%2C-18%2C-18%2C-18%2C-17%2C-17%2C-17%2C-17%2C24%2C24%2C24%2C24%2C23%2C23%2C23%2C23%2C22%2C22%2C22%2C22%2C21%2C21%2C21%2C21%2C20%2C20%2C20%2C20%2C19%2C19%2C19%2C19%2C18%2C18%2C18%2C18%2C17%2C17%2C17%2C17%5D%7D%7D%2C%7Bname%3A%22Gameboy%20Pulse%22%2CmidiProgram%3A80%2Csettings%3A%7Btype%3A%22custom%20chip%22%2Ceffects%3A%5B%22aliasing%22%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Cchord%3A%22arpeggio%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A8e3%2ClinearGain%3A.5%7D%5D%2Cunison%3A%22none%22%2Cenvelopes%3A%5B%5D%2CcustomChipWave%3A%5B-24%2C-20%2C-17%2C-15%2C-13%2C-13%2C-11%2C-11%2C-11%2C-9%2C-9%2C-9%2C-9%2C-7%2C-7%2C-7%2C-7%2C-7%2C-5%2C-5%2C-5%2C-5%2C-5%2C-5%2C-3%2C-3%2C-3%2C-3%2C-3%2C-3%2C-3%2C-3%2C24%2C20%2C17%2C15%2C13%2C13%2C11%2C11%2C11%2C9%2C9%2C9%2C9%2C7%2C7%2C7%2C7%2C7%2C5%2C5%2C5%2C5%2C5%2C5%2C3%2C3%2C3%2C3%2C3%2C3%2C3%2C3%5D%7D%7D%2C%7Bname%3A%22VRC6%20Sawtooth%22%2CmidiProgram%3A81%2Csettings%3A%7Btype%3A%22custom%20chip%22%2Ceffects%3A%5B%22aliasing%22%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Cchord%3A%22arpeggio%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A8e3%2ClinearGain%3A.5%7D%5D%2Cunison%3A%22none%22%2Cenvelopes%3A%5B%5D%2CcustomChipWave%3A%5B-24%2C-20%2C-16%2C-13%2C-10%2C-8%2C-6%2C-5%2C-4%2C-4%2C0%2C0%2C0%2C0%2C4%2C4%2C4%2C4%2C4%2C4%2C8%2C8%2C8%2C8%2C8%2C8%2C8%2C8%2C12%2C12%2C12%2C12%2C12%2C12%2C12%2C12%2C16%2C16%2C16%2C16%2C16%2C16%2C16%2C16%2C20%2C20%2C20%2C20%2C20%2C20%2C20%2C20%2C24%2C24%2C24%2C24%2C24%2C24%2C24%2C24%2C24%2C24%2C24%2C24%5D%7D%7D%2C%7Bname%3A%22Atari%20Square%22%2CmidiProgram%3A80%2Csettings%3A%7Btype%3A%22custom%20chip%22%2Ceffects%3A%5B%22aliasing%22%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Cchord%3A%22arpeggio%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4e3%2ClinearGain%3A.5%7D%5D%2Cunison%3A%22none%22%2Cenvelopes%3A%5B%5D%2CcustomChipWave%3A%5B-24%2C-24%2C-24%2C-23%2C-23%2C-23%2C-22%2C-22%2C-22%2C-21%2C-21%2C-21%2C-20%2C-20%2C-20%2C-19%2C-19%2C-19%2C-18%2C-18%2C-18%2C-17%2C-17%2C-17%2C-16%2C-16%2C-16%2C-15%2C-15%2C-15%2C-14%2C-14%2C-14%2C-13%2C-13%2C-13%2C24%2C24%2C24%2C23%2C23%2C23%2C22%2C22%2C22%2C21%2C21%2C21%2C20%2C20%2C20%2C19%2C19%2C19%2C18%2C18%2C18%2C17%2C17%2C17%2C16%2C16%2C15%2C15%5D%7D%7D%2C%7Bname%3A%22Atari%20Bass%22%2CmidiProgram%3A36%2Csettings%3A%7Btype%3A%22custom%20chip%22%2Ceffects%3A%5B%22aliasing%22%5D%2Ctransition%3A%22interrupt%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Cchord%3A%22arpeggio%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4e3%2ClinearGain%3A.5%7D%5D%2Cunison%3A%22none%22%2Cenvelopes%3A%5B%5D%2CcustomChipWave%3A%5B-24%2C-24%2C-24%2C-24%2C-24%2C-24%2C-24%2C-24%2C-24%2C24%2C24%2C24%2C24%2C24%2C24%2C-24%2C-24%2C-24%2C24%2C24%2C24%2C-24%2C-24%2C-24%2C24%2C24%2C24%2C-24%2C-24%2C-24%2C24%2C24%2C-24%2C-24%2C-24%2C-24%2C-24%2C-24%2C-24%2C-24%2C-24%2C24%2C24%2C24%2C24%2C24%2C24%2C-24%2C-24%2C24%2C24%2C24%2C24%2C24%2C-24%2C-24%2C-24%2C-24%2C24%2C24%2C-24%2C-24%2C24%2C24%5D%7D%7D%2C%7Bname%3A%22Sunsoft%20Bass%22%2CmidiProgram%3A36%2Csettings%3A%7Btype%3A%22custom%20chip%22%2Ceffects%3A%5B%22aliasing%22%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Cchord%3A%22arpeggio%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4e3%2ClinearGain%3A.5%7D%5D%2Cunison%3A%22none%22%2Cenvelopes%3A%5B%5D%2CcustomChipWave%3A%5B24%2C24%2C15%2C15%2C9%2C9%2C-4%2C-4%2C0%2C0%2C-13%2C-13%2C-19%2C-19%2C-24%2C-24%2C-24%2C-24%2C-10%2C-10%2C0%2C0%2C-7%2C-7%2C-7%2C-7%2C0%2C0%2C6%2C6%2C-4%2C-4%2C3%2C3%2C-4%2C-4%2C3%2C3%2C3%2C3%2C9%2C9%2C15%2C15%2C15%2C15%2C6%2C6%2C-4%2C-4%2C-4%2C-4%2C-4%2C-4%2C-4%2C-4%2C-4%2C-4%2C3%2C3%2C12%2C12%2C24%2C24%5D%7D%7D%5D)%7D%2C%7Bname%3A%22Keyboard%20Presets%22%2Cpresets%3AS(%5B%7Bname%3A%22grand%20piano%201%22%2CmidiProgram%3A0%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22Picked%20String%22%2CeqFilter%3A%5B%7Btype%3A%22high-pass%22%2CcutoffHz%3A148.65%2ClinearGain%3A.7071%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A2e3%2ClinearGain%3A2.8284%7D%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22reverb%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A8e3%2ClinearGain%3A.125%7D%5D%2Creverb%3A67%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A48%2Cchord%3A%22simultaneous%22%2Charmonics%3A%5B100%2C100%2C86%2C86%2C86%2C71%2C71%2C71%2C0%2C86%2C71%2C71%2C71%2C57%2C57%2C71%2C57%2C14%2C57%2C57%2C57%2C57%2C57%2C57%2C57%2C57%2C29%2C57%5D%2Cunison%3A%22piano%22%2CstringSustain%3A79%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22note%20size%22%7D%5D%7D%7D%2C%7Bname%3A%22bright%20piano%22%2CmidiProgram%3A1%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22Picked%20String%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A1681.79%2ClinearGain%3A.7071%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A148.65%2ClinearGain%3A.5%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A3363.59%2ClinearGain%3A1.4142%7D%5D%2Ceffects%3A%5B%22reverb%22%5D%2Creverb%3A33%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A24%2Cchord%3A%22simultaneous%22%2Charmonics%3A%5B100%2C100%2C86%2C86%2C71%2C71%2C0%2C71%2C71%2C71%2C71%2C71%2C71%2C14%2C57%2C57%2C57%2C57%2C57%2C57%2C29%2C57%2C57%2C57%2C57%2C57%2C57%2C57%5D%2Cunison%3A%22piano%22%2CstringSustain%3A86%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22electric%20grand%22%2CmidiProgram%3A2%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22chip%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22note%20filter%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A2378.41%2ClinearGain%3A.5%7D%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A48%2Cchord%3A%22simultaneous%22%2Cwave%3A%221%2F8%20pulse%22%2Cunison%3A%22shimmer%22%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22twang%203%22%7D%5D%7D%7D%2C%7Bname%3A%22honky-tonk%20piano%22%2CmidiProgram%3A3%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22Picked%20String%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A5656.85%2ClinearGain%3A.3536%7D%5D%2Ceffects%3A%5B%22reverb%22%5D%2Creverb%3A33%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A48%2Cchord%3A%22simultaneous%22%2Charmonics%3A%5B100%2C100%2C86%2C71%2C86%2C71%2C43%2C71%2C43%2C43%2C57%2C57%2C57%2C29%2C57%2C57%2C57%2C57%2C57%2C57%2C43%2C57%2C57%2C57%2C43%2C43%2C43%2C43%5D%2Cunison%3A%22honky%20tonk%22%2CstringSustain%3A71%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22electric%20piano%201%22%2CmidiProgram%3A4%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22harmonics%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22note%20filter%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A3363.59%2ClinearGain%3A.5%7D%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Cchord%3A%22simultaneous%22%2Charmonics%3A%5B86%2C100%2C100%2C71%2C71%2C57%2C57%2C43%2C43%2C43%2C29%2C29%2C29%2C14%2C14%2C14%2C0%2C0%2C0%2C0%2C0%2C57%2C0%2C0%2C0%2C0%2C0%2C0%5D%2Cunison%3A%22none%22%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22twang%202%22%7D%5D%7D%7D%2C%7Bname%3A%22electric%20piano%202%22%2CmidiProgram%3A5%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22note%20filter%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A13454.34%2ClinearGain%3A.25%7D%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A48%2Cchord%3A%22simultaneous%22%2Calgorithm%3A%221%E2%86%903%E2%80%832%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A12%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A6%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A9%7D%2C%7Bfrequency%3A%2216%C3%97%22%2Camplitude%3A6%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22twang%203%22%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22twang%203%22%2Cindex%3A3%7D%5D%7D%7D%2C%7Bname%3A%22harpsichord%22%2CmidiProgram%3A6%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22Picked%20String%22%2CeqFilter%3A%5B%7Btype%3A%22high-pass%22%2CcutoffHz%3A250%2ClinearGain%3A.3536%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A11313.71%2ClinearGain%3A2.8284%7D%5D%2Ceffects%3A%5B%22reverb%22%5D%2Creverb%3A33%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A24%2Cchord%3A%22simultaneous%22%2Charmonics%3A%5B100%2C100%2C100%2C86%2C57%2C86%2C86%2C86%2C86%2C57%2C57%2C71%2C71%2C86%2C86%2C71%2C71%2C86%2C86%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C71%5D%2Cunison%3A%22none%22%2CstringSustain%3A79%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22clavinet%22%2CmidiProgram%3A7%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22note%20filter%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A19027.31%2ClinearGain%3A.3536%7D%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Cchord%3A%22simultaneous%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CfeedbackType%3A%223%E2%9F%B2%22%2CfeedbackAmplitude%3A6%2Coperators%3A%5B%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A15%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A6%7D%2C%7Bfrequency%3A%228%C3%97%22%2Camplitude%3A4%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22twang%202%22%7D%2C%7Btarget%3A%22feedbackAmplitude%22%2Cenvelope%3A%22twang%202%22%7D%5D%7D%7D%2C%7Bname%3A%22dulcimer%22%2CmidiProgram%3A15%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22Picked%20String%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A8e3%2ClinearGain%3A.3536%7D%5D%2Ceffects%3A%5B%22reverb%22%5D%2Creverb%3A33%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A48%2Cchord%3A%22strum%22%2Charmonics%3A%5B100%2C100%2C100%2C86%2C100%2C86%2C57%2C100%2C100%2C86%2C100%2C86%2C100%2C86%2C100%2C71%2C57%2C71%2C71%2C100%2C86%2C71%2C86%2C86%2C100%2C86%2C86%2C86%5D%2Cunison%3A%22piano%22%2CstringSustain%3A79%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22grand%20piano%202%22%2CmidiProgram%3A0%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22harmonics%22%2CeqFilter%3A%5B%7Btype%3A%22high-pass%22%2CcutoffHz%3A148.65%2ClinearGain%3A.7071%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A2e3%2ClinearGain%3A2.8284%7D%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22reverb%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A8e3%2ClinearGain%3A.125%7D%5D%2Creverb%3A67%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A48%2Cchord%3A%22simultaneous%22%2Charmonics%3A%5B100%2C86%2C86%2C86%2C86%2C71%2C71%2C57%2C0%2C57%2C29%2C43%2C57%2C57%2C57%2C43%2C43%2C0%2C29%2C43%2C43%2C43%2C43%2C43%2C43%2C29%2C0%2C29%5D%2Cunison%3A%22piano%22%2CstringSustain%3A79%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22note%20size%22%7D%5D%7D%7D%2C%7Bname%3A%22grand%20piano%203%22%2CmidiProgram%3A0%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22Picked%20String%22%2CeqFilter%3A%5B%7Btype%3A%22high-pass%22%2CcutoffHz%3A148.65%2ClinearGain%3A.7071%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A1681.79%2ClinearGain%3A4%7D%2C%7Btype%3A%22low-pass%22%2CcutoffHz%3A8e3%2ClinearGain%3A.1768%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A3363.59%2ClinearGain%3A4%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A2378.41%2ClinearGain%3A.25%7D%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22reverb%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4756.83%2ClinearGain%3A.3536%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A125%2ClinearGain%3A.0884%7D%5D%2Creverb%3A67%2CfadeInSeconds%3A0%2CfadeOutTicks%3A48%2Charmonics%3A%5B100%2C100%2C86%2C86%2C86%2C71%2C71%2C71%2C0%2C71%2C71%2C71%2C71%2C57%2C57%2C71%2C57%2C14%2C57%2C57%2C57%2C57%2C57%2C57%2C57%2C57%2C29%2C57%5D%2Cunison%3A%22piano%22%2CstringSustain%3A86%2CstringSustainType%3A%22acoustic%22%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterFreq%22%2Cenvelope%3A%22note%20size%22%2Cindex%3A0%7D%2C%7Btarget%3A%22noteFilterFreq%22%2Cenvelope%3A%22twang%201%22%2Cindex%3A1%7D%2C%7Btarget%3A%22noteFilterFreq%22%2Cenvelope%3A%22twang%201%22%2Cindex%3A1%7D%5D%7D%7D%5D)%7D%2C%7Bname%3A%22Idiophone%20Presets%22%2Cpresets%3AS(%5B%7Bname%3A%22celesta%22%2CmidiProgram%3A8%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A5657%2CfilterResonance%3A14%2CfilterEnvelope%3A%22twang%202%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%22(1%E2%80%822)%E2%86%90(3%E2%80%824)%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2CfeedbackEnvelope%3A%22steady%22%2Coperators%3A%5B%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A11%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%228%C3%97%22%2Camplitude%3A6%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%2220%C3%97%22%2Camplitude%3A3%2Cenvelope%3A%22twang%201%22%7D%2C%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A1%2Cenvelope%3A%22twang%202%22%7D%5D%7D%7D%2C%7Bname%3A%22glockenspiel%22%2CmidiProgram%3A9%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A5657%2CfilterResonance%3A14%2CfilterEnvelope%3A%22twang%202%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%22(1%E2%80%822%E2%80%823)%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%E2%80%833%E2%9F%B2%22%2CfeedbackAmplitude%3A2%2CfeedbackEnvelope%3A%22decay%201%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A7%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%225%C3%97%22%2Camplitude%3A11%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%228%C3%97%22%2Camplitude%3A7%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%2220%C3%97%22%2Camplitude%3A2%2Cenvelope%3A%22twang%201%22%7D%5D%7D%7D%2C%7Bname%3A%22music%20box%201%22%2CmidiProgram%3A10%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22Picked%20String%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4756.83%2ClinearGain%3A.5%7D%5D%2Ceffects%3A%5B%22reverb%22%5D%2Creverb%3A33%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A48%2Cchord%3A%22strum%22%2Charmonics%3A%5B100%2C0%2C0%2C100%2C0%2C0%2C0%2C0%2C0%2C0%2C100%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C86%2C0%2C0%2C0%2C0%2C0%2C0%2C71%2C0%5D%2Cunison%3A%22none%22%2CstringSustain%3A64%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22music%20box%202%22%2CmidiProgram%3A10%2Csettings%3A%7Btype%3A%22Picked%20String%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A2828.43%2ClinearGain%3A.7071%7D%5D%2Ceffects%3A%5B%22reverb%22%5D%2Creverb%3A33%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A48%2Cchord%3A%22strum%22%2Charmonics%3A%5B100%2C57%2C57%2C0%2C0%2C0%2C0%2C0%2C0%2C57%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C43%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%5D%2Cunison%3A%22none%22%2CstringSustain%3A29%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22vibraphone%22%2CmidiProgram%3A11%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A14%2CfilterEnvelope%3A%22twang%202%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%80%832%E2%80%833%E2%80%834%22%2CfeedbackType%3A%221%E2%86%922%E2%86%923%E2%86%924%22%2CfeedbackAmplitude%3A3%2CfeedbackEnvelope%3A%22twang%201%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A9%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A9%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%229%C3%97%22%2Camplitude%3A3%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A9%2Cenvelope%3A%22custom%22%7D%5D%7D%7D%2C%7Bname%3A%22marimba%22%2CmidiProgram%3A12%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A29%2CfilterEnvelope%3A%22decay%201%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%80%832%E2%86%90(3%E2%80%824)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2CfeedbackEnvelope%3A%22steady%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A10%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A6%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%2213%C3%97%22%2Camplitude%3A6%2Cenvelope%3A%22twang%201%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22kalimba%22%2CmidiProgram%3A108%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A14%2CfilterEnvelope%3A%22decay%201%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2CfeedbackEnvelope%3A%22steady%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A11%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%225%C3%97%22%2Camplitude%3A3%2Cenvelope%3A%22twang%202%22%7D%2C%7Bfrequency%3A%2220%C3%97%22%2Camplitude%3A3%2Cenvelope%3A%22twang%201%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22xylophone%22%2CmidiProgram%3A13%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22twang%201%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%22(1%E2%80%822%E2%80%823)%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%E2%80%833%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2CfeedbackEnvelope%3A%22steady%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A9%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%226%C3%97%22%2Camplitude%3A9%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%2211%C3%97%22%2Camplitude%3A9%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%2220%C3%97%22%2Camplitude%3A6%2Cenvelope%3A%22twang%201%22%7D%5D%7D%7D%2C%7Bname%3A%22tubular%20bell%22%2CmidiProgram%3A14%2CgeneralMidi%3A!0%2CmidiSubharmonicOctaves%3A1%2Csettings%3A%7Btype%3A%22Picked%20String%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4e3%2ClinearGain%3A.5%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A105.11%2ClinearGain%3A.3536%7D%5D%2Ceffects%3A%5B%22reverb%22%5D%2Creverb%3A33%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A96%2Cchord%3A%22strum%22%2Charmonics%3A%5B43%2C71%2C0%2C100%2C0%2C100%2C0%2C86%2C0%2C0%2C86%2C0%2C14%2C71%2C14%2C14%2C57%2C14%2C14%2C43%2C14%2C14%2C43%2C14%2C14%2C43%2C14%2C14%5D%2Cunison%3A%22shimmer%22%2CstringSustain%3A86%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22bell%20synth%22%2CmidiProgram%3A14%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A29%2CfilterEnvelope%3A%22twang%203%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2CfeedbackEnvelope%3A%22steady%22%2Coperators%3A%5B%7Bfrequency%3A%22~2%C3%97%22%2Camplitude%3A10%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%227%C3%97%22%2Camplitude%3A6%2Cenvelope%3A%22twang%203%22%7D%2C%7Bfrequency%3A%2220%C3%97%22%2Camplitude%3A1%2Cenvelope%3A%22twang%201%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22rain%20drop%22%2CmidiProgram%3A96%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A4e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22twang%201%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%22(1%E2%80%822)%E2%86%90(3%E2%80%824)%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2CfeedbackEnvelope%3A%22steady%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A12%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%226%C3%97%22%2Camplitude%3A4%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%2220%C3%97%22%2Camplitude%3A3%2Cenvelope%3A%22twang%201%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A6%2Cenvelope%3A%22tremolo1%22%7D%5D%7D%7D%2C%7Bname%3A%22crystal%22%2CmidiProgram%3A98%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A14%2CfilterEnvelope%3A%22twang%202%22%2Cvibrato%3A%22delayed%22%2Calgorithm%3A%221%E2%80%832%E2%80%833%E2%80%834%22%2CfeedbackType%3A%221%E2%9F%B2%202%E2%9F%B2%203%E2%9F%B2%204%E2%9F%B2%22%2CfeedbackAmplitude%3A4%2CfeedbackEnvelope%3A%22twang%201%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A10%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A7%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%226%C3%97%22%2Camplitude%3A4%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%2213%C3%97%22%2Camplitude%3A4%2Cenvelope%3A%22custom%22%7D%5D%7D%7D%2C%7Bname%3A%22tinkle%20bell%22%2CmidiProgram%3A112%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A14%2CfilterEnvelope%3A%22twang%202%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%80%832%E2%80%833%E2%80%834%22%2CfeedbackType%3A%221%E2%86%922%E2%86%923%E2%86%924%22%2CfeedbackAmplitude%3A5%2CfeedbackEnvelope%3A%22twang%203%22%2Coperators%3A%5B%7Bfrequency%3A%22~2%C3%97%22%2Camplitude%3A7%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%225%C3%97%22%2Camplitude%3A7%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%227%C3%97%22%2Camplitude%3A7%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%2216%C3%97%22%2Camplitude%3A7%2Cenvelope%3A%22custom%22%7D%5D%7D%7D%2C%7Bname%3A%22agogo%22%2CmidiProgram%3A113%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A4e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22decay%201%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%80%832%E2%80%833%E2%80%834%22%2CfeedbackType%3A%221%E2%86%924%22%2CfeedbackAmplitude%3A15%2CfeedbackEnvelope%3A%22decay%201%22%2Coperators%3A%5B%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A9%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%225%C3%97%22%2Camplitude%3A6%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%228%C3%97%22%2Camplitude%3A9%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%2213%C3%97%22%2Camplitude%3A11%2Cenvelope%3A%22custom%22%7D%5D%7D%7D%5D)%7D%2C%7Bname%3A%22Guitar%20Presets%22%2Cpresets%3AS(%5B%7Bname%3A%22nylon%20guitar%22%2CmidiProgram%3A24%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A5657%2CfilterResonance%3A14%2CfilterEnvelope%3A%22twang%201%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%902%E2%86%903%E2%86%904%22%2CfeedbackType%3A%223%E2%9F%B2%22%2CfeedbackAmplitude%3A6%2CfeedbackEnvelope%3A%22twang%201%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A6%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%225%C3%97%22%2Camplitude%3A2%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%227%C3%97%22%2Camplitude%3A4%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22steel%20guitar%22%2CmidiProgram%3A25%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22Picked%20String%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22reverb%22%5D%2Creverb%3A33%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A48%2Cchord%3A%22strum%22%2Charmonics%3A%5B100%2C100%2C86%2C71%2C71%2C71%2C86%2C86%2C71%2C57%2C43%2C43%2C43%2C57%2C57%2C57%2C57%2C57%2C43%2C43%2C43%2C43%2C43%2C43%2C43%2C43%2C43%2C43%5D%2Cunison%3A%22none%22%2CstringSustain%3A71%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22jazz%20guitar%22%2CmidiProgram%3A26%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22harmonics%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22twang%202%22%2Cinterval%3A%22union%22%2Cvibrato%3A%22none%22%2Charmonics%3A%5B100%2C100%2C86%2C71%2C57%2C71%2C71%2C43%2C57%2C71%2C57%2C43%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C14%2C14%2C14%2C14%2C14%2C14%2C14%2C0%5D%7D%7D%2C%7Bname%3A%22clean%20guitar%22%2CmidiProgram%3A27%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22harmonics%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A14%2CfilterEnvelope%3A%22twang%202%22%2Cinterval%3A%22union%22%2Cvibrato%3A%22none%22%2Charmonics%3A%5B86%2C100%2C100%2C100%2C86%2C57%2C86%2C100%2C100%2C100%2C71%2C57%2C43%2C71%2C86%2C71%2C57%2C57%2C71%2C71%2C71%2C71%2C57%2C57%2C57%2C57%2C57%2C43%5D%7D%7D%2C%7Bname%3A%22muted%20guitar%22%2CmidiProgram%3A28%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22twang%201%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%86%904)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A7%2CfeedbackEnvelope%3A%22twang%202%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A13%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A4%2Cenvelope%3A%22twang%203%22%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A4%2Cenvelope%3A%22twang%202%22%7D%2C%7Bfrequency%3A%2216%C3%97%22%2Camplitude%3A4%2Cenvelope%3A%22twang%201%22%7D%5D%7D%7D%5D)%7D%2C%7Bname%3A%22Picked%20Bass%20Presets%22%2Cpresets%3AS(%5B%7Bname%3A%22acoustic%20bass%22%2CmidiProgram%3A32%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22harmonics%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A4e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22twang%201%22%2Cinterval%3A%22union%22%2Cvibrato%3A%22none%22%2Charmonics%3A%5B100%2C86%2C71%2C71%2C71%2C71%2C57%2C57%2C57%2C57%2C43%2C43%2C43%2C43%2C43%2C29%2C29%2C29%2C29%2C29%2C29%2C14%2C14%2C14%2C14%2C14%2C14%2C14%5D%7D%7D%2C%7Bname%3A%22fingered%20bass%22%2CmidiProgram%3A33%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22harmonics%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A14%2CfilterEnvelope%3A%22twang%201%22%2Cinterval%3A%22union%22%2Cvibrato%3A%22none%22%2Charmonics%3A%5B100%2C86%2C71%2C57%2C71%2C43%2C57%2C29%2C29%2C29%2C29%2C29%2C29%2C14%2C14%2C14%2C14%2C14%2C14%2C14%2C14%2C14%2C14%2C14%2C14%2C14%2C14%2C0%5D%7D%7D%2C%7Bname%3A%22picked%20bass%22%2CmidiProgram%3A34%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A0%2CfilterEnvelope%3A%22twang%201%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%86%904)%22%2CfeedbackType%3A%223%E2%9F%B2%22%2CfeedbackAmplitude%3A4%2CfeedbackEnvelope%3A%22twang%201%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A5%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%2211%C3%97%22%2Camplitude%3A1%2Cenvelope%3A%22twang%203%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A9%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22fretless%20bass%22%2CmidiProgram%3A35%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22harmonics%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A1e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22flare%202%22%2Cinterval%3A%22union%22%2Cvibrato%3A%22none%22%2Charmonics%3A%5B100%2C100%2C86%2C71%2C71%2C57%2C57%2C71%2C71%2C71%2C57%2C57%2C57%2C57%2C57%2C57%2C57%2C43%2C43%2C43%2C43%2C43%2C43%2C43%2C43%2C29%2C29%2C14%5D%7D%7D%2C%7Bname%3A%22slap%20bass%201%22%2CmidiProgram%3A36%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22harmonics%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A4e3%2CfilterResonance%3A0%2CfilterEnvelope%3A%22twang%201%22%2Cinterval%3A%22union%22%2Cvibrato%3A%22none%22%2Charmonics%3A%5B100%2C100%2C100%2C100%2C86%2C71%2C57%2C29%2C29%2C43%2C43%2C57%2C71%2C57%2C29%2C29%2C43%2C57%2C57%2C57%2C43%2C43%2C43%2C57%2C71%2C71%2C71%2C71%5D%7D%7D%2C%7Bname%3A%22slap%20bass%202%22%2CmidiProgram%3A37%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A5657%2CfilterResonance%3A0%2CfilterEnvelope%3A%22twang%201%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%902%E2%86%903%E2%86%904%22%2CfeedbackType%3A%223%E2%9F%B2%22%2CfeedbackAmplitude%3A4%2CfeedbackEnvelope%3A%22steady%22%2Coperators%3A%5B%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A13%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A7%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%2213%C3%97%22%2Camplitude%3A3%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A11%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22bass%20synth%201%22%2CmidiProgram%3A38%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A4e3%2CfilterResonance%3A43%2CfilterEnvelope%3A%22twang%202%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%903%E2%80%832%E2%86%904%22%2CfeedbackType%3A%223%E2%9F%B2%E2%80%834%E2%9F%B2%22%2CfeedbackAmplitude%3A9%2CfeedbackEnvelope%3A%22twang%202%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A10%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A14%2Cenvelope%3A%22twang%201%22%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A13%2Cenvelope%3A%22twang%202%22%7D%5D%7D%7D%2C%7Bname%3A%22bass%20synth%202%22%2CmidiProgram%3A39%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A1e3%2CfilterResonance%3A57%2CfilterEnvelope%3A%22punch%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CfeedbackType%3A%221%E2%86%922%22%2CfeedbackAmplitude%3A4%2CfeedbackEnvelope%3A%22twang%203%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A9%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A9%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A0%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22bass%20%26%20lead%22%2CmidiProgram%3A87%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22chip%22%2Ctransition%3A%22hard%22%2Ceffects%3A%22reverb%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A4e3%2CfilterResonance%3A86%2CfilterEnvelope%3A%22twang%202%22%2Cwave%3A%22sawtooth%22%2Cinterval%3A%22shimmer%22%2Cvibrato%3A%22none%22%7D%7D%2C%7Bname%3A%22dubstep%20yoi%20yoi%22%2CmidiProgram%3A87%2Csettings%3A%7Btype%3A%22chip%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A6727.17%2ClinearGain%3A.7071%7D%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22bitcrusher%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A594.6%2ClinearGain%3A11.3137%7D%5D%2CbitcrusherOctave%3A1.5%2CbitcrusherQuantization%3A0%2Ctransition%3A%22slide%22%2CfadeInSeconds%3A.0263%2CfadeOutTicks%3A-3%2Cchord%3A%22arpeggio%22%2Cwave%3A%22sawtooth%22%2Cunison%3A%22none%22%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterFreq%22%2Cenvelope%3A%22flare%202%22%2Cindex%3A0%7D%5D%7D%7D%5D)%7D%2C%7Bname%3A%22Picked%20String%20Presets%22%2Cpresets%3AS(%5B%7Bname%3A%22pizzicato%20strings%22%2CmidiProgram%3A45%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22medium%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A1e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22twang%201%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%22(1%E2%80%822%E2%80%823)%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%202%E2%9F%B2%203%E2%9F%B2%204%E2%9F%B2%22%2CfeedbackAmplitude%3A7%2CfeedbackEnvelope%3A%22twang%201%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A14%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A11%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%226%C3%97%22%2Camplitude%3A9%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A10%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22harp%22%2CmidiProgram%3A46%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ctransition%3A%22hard%20fade%22%2Ceffects%3A%22reverb%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A0%2CfilterEnvelope%3A%22twang%201%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%903%E2%80%832%E2%86%904%22%2CfeedbackType%3A%223%E2%9F%B2%22%2CfeedbackAmplitude%3A6%2CfeedbackEnvelope%3A%22twang%202%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A6%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%22~2%C3%97%22%2Camplitude%3A3%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A6%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22sitar%22%2CmidiProgram%3A104%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ctransition%3A%22hard%20fade%22%2Ceffects%3A%22reverb%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A8e3%2CfilterResonance%3A57%2CfilterEnvelope%3A%22twang%202%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2CfeedbackEnvelope%3A%22steady%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A14%2Cenvelope%3A%22twang%203%22%7D%2C%7Bfrequency%3A%229%C3%97%22%2Camplitude%3A3%2Cenvelope%3A%22twang%203%22%7D%2C%7Bfrequency%3A%2216%C3%97%22%2Camplitude%3A9%2Cenvelope%3A%22swell%203%22%7D%5D%7D%7D%2C%7Bname%3A%22banjo%22%2CmidiProgram%3A105%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A14%2CfilterEnvelope%3A%22twang%202%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%86%904)%22%2CfeedbackType%3A%222%E2%9F%B2%22%2CfeedbackAmplitude%3A4%2CfeedbackEnvelope%3A%22steady%22%2Coperators%3A%5B%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A14%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A10%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%2211%C3%97%22%2Camplitude%3A3%2Cenvelope%3A%22twang%203%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A11%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22ukulele%22%2CmidiProgram%3A105%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A0%2CfilterEnvelope%3A%22twang%201%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%86%904)%22%2CfeedbackType%3A%223%E2%9F%B2%22%2CfeedbackAmplitude%3A5%2CfeedbackEnvelope%3A%22twang%201%22%2Coperators%3A%5B%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A14%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A6%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%229%C3%97%22%2Camplitude%3A4%2Cenvelope%3A%22twang%202%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A11%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22shamisen%22%2CmidiProgram%3A106%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A8e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22twang%201%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%86%904)%22%2CfeedbackType%3A%223%E2%9F%B2%22%2CfeedbackAmplitude%3A9%2CfeedbackEnvelope%3A%22twang%203%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A12%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%2216%C3%97%22%2Camplitude%3A4%2Cenvelope%3A%22twang%203%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A7%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22koto%22%2CmidiProgram%3A107%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A4e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22twang%202%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%903%E2%80%832%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%22%2CfeedbackAmplitude%3A5%2CfeedbackEnvelope%3A%22twang%202%22%2Coperators%3A%5B%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A12%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%226%C3%97%22%2Camplitude%3A10%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A8%2Cenvelope%3A%22twang%203%22%7D%2C%7Bfrequency%3A%22~2%C3%97%22%2Camplitude%3A8%2Cenvelope%3A%22twang%203%22%7D%5D%7D%7D%5D)%7D%2C%7Bname%3A%22Distortion%20Presets%22%2Cpresets%3AS(%5B%7Bname%3A%22overdrive%20guitar%22%2CmidiProgram%3A29%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22Picked%20String%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4756.83%2ClinearGain%3A.7071%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A210.22%2ClinearGain%3A1%7D%2C%7Btype%3A%22low-pass%22%2CcutoffHz%3A5656.85%2ClinearGain%3A1%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A840.9%2ClinearGain%3A.5%7D%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22distortion%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22high-pass%22%2CcutoffHz%3A297.3%2ClinearGain%3A2%7D%2C%7Btype%3A%22low-pass%22%2CcutoffHz%3A2378.41%2ClinearGain%3A.7071%7D%5D%2Cdistortion%3A71%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A12%2Cchord%3A%22strum%22%2Charmonics%3A%5B86%2C100%2C100%2C86%2C86%2C86%2C86%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C57%2C57%2C57%2C57%2C57%2C57%2C57%2C57%2C57%2C57%2C57%5D%2Cunison%3A%22none%22%2CstringSustain%3A71%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterFreq%22%2Cenvelope%3A%22note%20size%22%2Cindex%3A1%7D%5D%7D%7D%2C%7Bname%3A%22distortion%20guitar%22%2CmidiProgram%3A30%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22Picked%20String%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4756.83%2ClinearGain%3A.7071%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A210.22%2ClinearGain%3A1%7D%2C%7Btype%3A%22low-pass%22%2CcutoffHz%3A5656.85%2ClinearGain%3A1%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A594.6%2ClinearGain%3A.3536%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A1e3%2ClinearGain%3A.25%7D%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22distortion%22%2C%22reverb%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22high-pass%22%2CcutoffHz%3A353.55%2ClinearGain%3A2%7D%2C%7Btype%3A%22low-pass%22%2CcutoffHz%3A2e3%2ClinearGain%3A1%7D%5D%2Cdistortion%3A86%2Creverb%3A67%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A12%2Cchord%3A%22strum%22%2Charmonics%3A%5B86%2C100%2C100%2C86%2C86%2C86%2C86%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C57%2C57%2C57%2C57%2C57%2C57%2C57%2C57%2C57%2C57%2C57%5D%2Cunison%3A%22none%22%2CstringSustain%3A71%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterFreq%22%2Cenvelope%3A%22note%20size%22%2Cindex%3A1%7D%5D%7D%7D%2C%7Bname%3A%22charango%20synth%22%2CmidiProgram%3A84%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A11313.71%2ClinearGain%3A1%7D%5D%2Ceffects%3A%5B%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Cchord%3A%22strum%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%86%904)%22%2CfeedbackType%3A%221%E2%86%922%E2%86%923%E2%86%924%22%2CfeedbackAmplitude%3A8%2Coperators%3A%5B%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A13%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A5%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A6%7D%2C%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A7%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22feedbackAmplitude%22%2Cenvelope%3A%22twang%203%22%7D%5D%7D%7D%2C%7Bname%3A%22guitar%20harmonics%22%2CmidiProgram%3A31%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4e3%2ClinearGain%3A2%7D%5D%2Ceffects%3A%5B%22reverb%22%5D%2Creverb%3A33%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Cchord%3A%22strum%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823)%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A2%2Coperators%3A%5B%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A12%7D%2C%7Bfrequency%3A%2216%C3%97%22%2Camplitude%3A5%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A2%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A12%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22swell%201%22%2Cindex%3A1%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22punch%22%2Cindex%3A2%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22twang%201%22%2Cindex%3A3%7D%5D%7D%7D%2C%7Bname%3A%22PWM%20overdrive%22%2CmidiProgram%3A29%2Csettings%3A%7Btype%3A%22PWM%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A5656.85%2ClinearGain%3A1.4142%7D%5D%2Ceffects%3A%5B%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Cchord%3A%22strum%22%2CpulseWidth%3A17.67767%2Cenvelopes%3A%5B%7Btarget%3A%22pulseWidth%22%2Cenvelope%3A%22punch%22%7D%5D%7D%7D%2C%7Bname%3A%22PWM%20distortion%22%2CmidiProgram%3A30%2Csettings%3A%7Btype%3A%22PWM%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A3363.59%2ClinearGain%3A2%7D%5D%2Ceffects%3A%5B%22vibrato%22%5D%2Cvibrato%3A%22delayed%22%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Cchord%3A%22strum%22%2CpulseWidth%3A50%2Cenvelopes%3A%5B%7Btarget%3A%22pulseWidth%22%2Cenvelope%3A%22swell%201%22%7D%5D%7D%7D%2C%7Bname%3A%22FM%20overdrive%22%2CmidiProgram%3A29%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4756.83%2ClinearGain%3A1%7D%5D%2Ceffects%3A%5B%22reverb%22%5D%2Creverb%3A33%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Cchord%3A%22strum%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%86%904)%22%2CfeedbackType%3A%221%E2%86%922%22%2CfeedbackAmplitude%3A2%2Coperators%3A%5B%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A15%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A12%7D%2C%7Bfrequency%3A%22~2%C3%97%22%2Camplitude%3A6%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A12%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22twang%201%22%2Cindex%3A2%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22swell%203%22%2Cindex%3A3%7D%2C%7Btarget%3A%22feedbackAmplitude%22%2Cenvelope%3A%22punch%22%7D%5D%7D%7D%2C%7Bname%3A%22FM%20distortion%22%2CmidiProgram%3A30%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4e3%2ClinearGain%3A2%7D%5D%2Ceffects%3A%5B%22reverb%22%5D%2Creverb%3A33%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Cchord%3A%22strum%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%86%904)%22%2CfeedbackType%3A%221%E2%86%922%22%2CfeedbackAmplitude%3A4%2Coperators%3A%5B%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A15%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A11%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A9%7D%2C%7Bfrequency%3A%22~2%C3%97%22%2Camplitude%3A4%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22swell%201%22%2Cindex%3A2%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22swell%203%22%2Cindex%3A3%7D%5D%7D%7D%5D)%7D%2C%7Bname%3A%22Bellows%20Presets%22%2Cpresets%3AS(%5B%7Bname%3A%22drawbar%20organ%201%22%2CmidiProgram%3A16%2CgeneralMidi%3A!0%2CmidiSubharmonicOctaves%3A1%2Csettings%3A%7Btype%3A%22harmonics%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A14%2CfilterEnvelope%3A%22steady%22%2Cinterval%3A%22union%22%2Cvibrato%3A%22none%22%2Charmonics%3A%5B86%2C86%2C0%2C86%2C0%2C0%2C0%2C86%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C86%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%5D%7D%7D%2C%7Bname%3A%22drawbar%20organ%202%22%2CmidiProgram%3A16%2CmidiSubharmonicOctaves%3A1%2Csettings%3A%7Btype%3A%22harmonics%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A14%2CfilterEnvelope%3A%22steady%22%2Cinterval%3A%22union%22%2Cvibrato%3A%22none%22%2Charmonics%3A%5B86%2C29%2C71%2C86%2C71%2C14%2C0%2C100%2C0%2C0%2C0%2C86%2C0%2C0%2C0%2C71%2C0%2C0%2C0%2C57%2C0%2C0%2C0%2C29%2C0%2C0%2C0%2C0%5D%7D%7D%2C%7Bname%3A%22percussive%20organ%22%2CmidiProgram%3A17%2CgeneralMidi%3A!0%2CmidiSubharmonicOctaves%3A1%2Csettings%3A%7Btype%3A%22FM%22%2Ctransition%3A%22hard%22%2Ceffects%3A%22reverb%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22punch%22%2Cvibrato%3A%22light%22%2Calgorithm%3A%221%E2%80%832%E2%80%833%E2%80%834%22%2CfeedbackType%3A%221%E2%86%923%E2%80%832%E2%86%924%22%2CfeedbackAmplitude%3A7%2CfeedbackEnvelope%3A%22decay%201%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A7%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A7%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A8%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A8%2Cenvelope%3A%22custom%22%7D%5D%7D%7D%2C%7Bname%3A%22rock%20organ%22%2CmidiProgram%3A18%2CgeneralMidi%3A!0%2CmidiSubharmonicOctaves%3A1%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22chorus%20%26%20reverb%22%2Ctransition%3A%22hard%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A4e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22punch%22%2Cvibrato%3A%22delayed%22%2Calgorithm%3A%22(1%E2%80%822%E2%80%823)%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%E2%80%833%E2%9F%B2%22%2CfeedbackAmplitude%3A2%2CfeedbackEnvelope%3A%22flare%201%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A9%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A9%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%226%C3%97%22%2Camplitude%3A9%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A5%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22pipe%20organ%22%2CmidiProgram%3A19%2CgeneralMidi%3A!0%2CmidiSubharmonicOctaves%3A1%2Csettings%3A%7Btype%3A%22FM%22%2Ctransition%3A%22cross%20fade%22%2Ceffects%3A%22reverb%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A5657%2CfilterResonance%3A43%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%80%832%E2%80%833%E2%80%834%22%2CfeedbackType%3A%221%E2%9F%B2%202%E2%9F%B2%203%E2%9F%B2%204%E2%9F%B2%22%2CfeedbackAmplitude%3A5%2CfeedbackEnvelope%3A%22steady%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A8%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A9%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A9%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%228%C3%97%22%2Camplitude%3A8%2Cenvelope%3A%22custom%22%7D%5D%7D%7D%2C%7Bname%3A%22reed%20organ%22%2CmidiProgram%3A20%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22harmonics%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A29%2CfilterEnvelope%3A%22steady%22%2Cinterval%3A%22union%22%2Cvibrato%3A%22none%22%2Charmonics%3A%5B71%2C86%2C100%2C86%2C71%2C100%2C57%2C71%2C71%2C71%2C43%2C43%2C43%2C71%2C43%2C71%2C57%2C57%2C57%2C57%2C57%2C57%2C57%2C29%2C43%2C29%2C29%2C14%5D%7D%7D%2C%7Bname%3A%22accordion%22%2CmidiProgram%3A21%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22chip%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22cross%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A5657%2CfilterResonance%3A0%2CfilterEnvelope%3A%22swell%201%22%2Cwave%3A%22double%20saw%22%2Cinterval%3A%22honky%20tonk%22%2Cvibrato%3A%22none%22%7D%7D%2C%7Bname%3A%22bandoneon%22%2CmidiProgram%3A23%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22harmonics%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A4e3%2CfilterResonance%3A29%2CfilterEnvelope%3A%22swell%201%22%2Cinterval%3A%22hum%22%2Cvibrato%3A%22none%22%2Charmonics%3A%5B86%2C86%2C86%2C57%2C71%2C86%2C57%2C71%2C71%2C71%2C57%2C43%2C57%2C43%2C71%2C43%2C71%2C57%2C57%2C43%2C43%2C43%2C57%2C43%2C43%2C29%2C29%2C29%5D%7D%7D%2C%7Bname%3A%22bagpipe%22%2CmidiProgram%3A109%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22harmonics%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22cross%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A5657%2CfilterResonance%3A43%2CfilterEnvelope%3A%22punch%22%2Cinterval%3A%22hum%22%2Cvibrato%3A%22none%22%2Charmonics%3A%5B71%2C86%2C86%2C100%2C100%2C86%2C57%2C100%2C86%2C71%2C71%2C71%2C57%2C57%2C57%2C71%2C57%2C71%2C57%2C71%2C43%2C57%2C57%2C43%2C43%2C43%2C43%2C43%5D%7D%7D%5D)%7D%2C%7Bname%3A%22String%20Presets%22%2Cpresets%3AS(%5B%7Bname%3A%22violin%201%22%2CmidiProgram%3A40%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4e3%2ClinearGain%3A1.4142%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A105.11%2ClinearGain%3A.3536%7D%5D%2Ceffects%3A%5B%22vibrato%22%2C%22reverb%22%5D%2Cvibrato%3A%22delayed%22%2Creverb%3A67%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0413%2CfadeOutTicks%3A6%2Cchord%3A%22simultaneous%22%2Calgorithm%3A%22(1%E2%80%822)%E2%86%90(3%E2%80%824)%22%2CfeedbackType%3A%221%E2%86%922%22%2CfeedbackAmplitude%3A5%2Coperators%3A%5B%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A9%7D%2C%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A9%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A7%7D%2C%7Bfrequency%3A%227%C3%97%22%2Camplitude%3A5%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22swell%201%22%2Cindex%3A3%7D%2C%7Btarget%3A%22feedbackAmplitude%22%2Cenvelope%3A%22twang%203%22%7D%5D%7D%7D%2C%7Bname%3A%22viola%22%2CmidiProgram%3A41%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22cross%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A29%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22delayed%22%2Calgorithm%3A%22(1%E2%80%822%E2%80%823)%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%E2%80%833%E2%9F%B2%22%2CfeedbackAmplitude%3A8%2CfeedbackEnvelope%3A%22swell%201%22%2Coperators%3A%5B%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A11%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%227%C3%97%22%2Camplitude%3A7%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%2213%C3%97%22%2Camplitude%3A4%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A5%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22cello%22%2CmidiProgram%3A42%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4e3%2ClinearGain%3A.1768%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A297.3%2ClinearGain%3A.7071%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A4756.83%2ClinearGain%3A5.6569%7D%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22reverb%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A16e3%2ClinearGain%3A.0884%7D%5D%2Creverb%3A67%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0125%2CfadeOutTicks%3A12%2Cchord%3A%22simultaneous%22%2Calgorithm%3A%22(1%E2%80%822)%E2%86%903%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%22%2CfeedbackAmplitude%3A3%2Coperators%3A%5B%7Bfrequency%3A%2216%C3%97%22%2Camplitude%3A5%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A10%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A9%7D%2C%7Bfrequency%3A%226%C3%97%22%2Camplitude%3A3%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22swell%201%22%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22swell%201%22%2Cindex%3A3%7D%5D%7D%7D%2C%7Bname%3A%22contrabass%22%2CmidiProgram%3A43%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22cross%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A29%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22delayed%22%2Calgorithm%3A%22(1%E2%80%822)%E2%86%903%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2CfeedbackEnvelope%3A%22steady%22%2Coperators%3A%5B%7Bfrequency%3A%2216%C3%97%22%2Camplitude%3A5%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A10%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A10%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%226%C3%97%22%2Camplitude%3A3%2Cenvelope%3A%22swell%201%22%7D%5D%7D%7D%2C%7Bname%3A%22fiddle%22%2CmidiProgram%3A110%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A29%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22delayed%22%2Calgorithm%3A%22(1%E2%80%822)%E2%86%90(3%E2%80%824)%22%2CfeedbackType%3A%223%E2%9F%B2%E2%80%834%E2%9F%B2%22%2CfeedbackAmplitude%3A5%2CfeedbackEnvelope%3A%22twang%201%22%2Coperators%3A%5B%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A10%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%228%C3%97%22%2Camplitude%3A8%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A8%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%2216%C3%97%22%2Camplitude%3A3%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22tremolo%20strings%22%2CmidiProgram%3A44%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22chorus%20%26%20reverb%22%2Ctransition%3A%22medium%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A0%2CfilterEnvelope%3A%22tremolo4%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%80%832%E2%80%833%E2%80%834%22%2CfeedbackType%3A%221%E2%86%922%E2%86%923%E2%86%924%22%2CfeedbackAmplitude%3A12%2CfeedbackEnvelope%3A%22steady%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A8%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%22~2%C3%97%22%2Camplitude%3A8%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A8%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%227%C3%97%22%2Camplitude%3A8%2Cenvelope%3A%22custom%22%7D%5D%7D%7D%2C%7Bname%3A%22strings%22%2CmidiProgram%3A48%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22chorus%20%26%20reverb%22%2Ctransition%3A%22cross%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A43%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%22(1%E2%80%822)%E2%86%90(3%E2%80%824)%22%2CfeedbackType%3A%224%E2%9F%B2%22%2CfeedbackAmplitude%3A5%2CfeedbackEnvelope%3A%22twang%203%22%2Coperators%3A%5B%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A9%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A9%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A7%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%227%C3%97%22%2Camplitude%3A3%2Cenvelope%3A%22swell%201%22%7D%5D%7D%7D%2C%7Bname%3A%22slow%20strings%22%2CmidiProgram%3A49%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22chorus%20%26%20reverb%22%2Ctransition%3A%22soft%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A1414%2CfilterResonance%3A0%2CfilterEnvelope%3A%22swell%202%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%22(1%E2%80%822)%E2%86%90(3%E2%80%824)%22%2CfeedbackType%3A%224%E2%9F%B2%22%2CfeedbackAmplitude%3A6%2CfeedbackEnvelope%3A%22flare%203%22%2Coperators%3A%5B%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A10%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A10%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A7%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%227%C3%97%22%2Camplitude%3A4%2Cenvelope%3A%22swell%201%22%7D%5D%7D%7D%2C%7Bname%3A%22strings%20synth%201%22%2CmidiProgram%3A50%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22chip%22%2Ctransition%3A%22soft%20fade%22%2Ceffects%3A%22chorus%20%26%20reverb%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A1414%2CfilterResonance%3A43%2CfilterEnvelope%3A%22steady%22%2Cwave%3A%22sawtooth%22%2Cinterval%3A%22hum%22%2Cvibrato%3A%22delayed%22%7D%7D%2C%7Bname%3A%22strings%20synth%202%22%2CmidiProgram%3A51%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22chorus%20%26%20reverb%22%2Ctransition%3A%22soft%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A43%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%80%832%E2%80%833%E2%80%834%22%2CfeedbackType%3A%221%E2%9F%B2%202%E2%9F%B2%203%E2%9F%B2%204%E2%9F%B2%22%2CfeedbackAmplitude%3A12%2CfeedbackEnvelope%3A%22swell%201%22%2Coperators%3A%5B%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A6%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A7%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A8%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A9%2Cenvelope%3A%22custom%22%7D%5D%7D%7D%2C%7Bname%3A%22orchestra%20hit%201%22%2CmidiProgram%3A55%2CgeneralMidi%3A!0%2CmidiSubharmonicOctaves%3A1%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22chorus%20%26%20reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A8e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22custom%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%80%832%E2%80%833%E2%80%834%22%2CfeedbackType%3A%221%E2%9F%B2%202%E2%9F%B2%203%E2%9F%B2%204%E2%9F%B2%22%2CfeedbackAmplitude%3A14%2CfeedbackEnvelope%3A%22twang%203%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22twang%203%22%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22flare%203%22%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22flare%202%22%7D%2C%7Bfrequency%3A%228%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22flare%201%22%7D%5D%7D%7D%2C%7Bname%3A%22violin%202%22%2CmidiProgram%3A40%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A2828%2ClinearGain%3A1.4142%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A105.11%2ClinearGain%3A.3536%7D%5D%2Ceffects%3A%5B%22vibrato%22%2C%22reverb%22%5D%2Cvibrato%3A%22light%22%2Creverb%3A67%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0413%2CfadeOutTicks%3A6%2Cchord%3A%22simultaneous%22%2Calgorithm%3A%22(1%E2%80%822)%E2%86%90(3%E2%80%824)%22%2CfeedbackType%3A%224%E2%9F%B2%22%2CfeedbackAmplitude%3A5%2CfeedbackEnvelope%3A%22twang%203%22%2Coperators%3A%5B%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A13%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A7%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%227%C3%97%22%2Camplitude%3A8%2Cenvelope%3A%22swell%201%22%7D%5D%7D%7D%2C%7Bname%3A%22orchestra%20hit%202%22%2CmidiProgram%3A55%2CmidiSubharmonicOctaves%3A1%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22chorus%20%26%20reverb%22%2Ctransition%3A%22medium%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A8e3%2CfilterResonance%3A0%2CfilterEnvelope%3A%22decay%201%22%2Cvibrato%3A%22delayed%22%2Calgorithm%3A%221%E2%80%832%E2%80%833%E2%80%834%22%2CfeedbackType%3A%221%E2%9F%B2%202%E2%9F%B2%203%E2%9F%B2%204%E2%9F%B2%22%2CfeedbackAmplitude%3A14%2CfeedbackEnvelope%3A%22steady%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A12%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A14%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A12%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A14%2Cenvelope%3A%22custom%22%7D%5D%7D%7D%2C%7Bname%3A%22supersaw%20string%22%2CmidiProgram%3A41%2Csettings%3A%7Btype%3A%22supersaw%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A2828.43%2ClinearGain%3A1.4142%7D%2C%7Btype%3A%22low-pass%22%2CcutoffHz%3A3363.59%2ClinearGain%3A.1768%7D%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22reverb%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22high-pass%22%2CcutoffHz%3A500%2ClinearGain%3A.1768%7D%5D%2Creverb%3A33%2CfadeInSeconds%3A.0263%2CfadeOutTicks%3A6%2CpulseWidth%3A35.35534%2Cdynamism%3A83%2Cspread%3A8%2Cshape%3A50%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterFreq%22%2Cenvelope%3A%22twang%201%22%2Cindex%3A0%7D%5D%7D%7D%2C%7Bname%3A%22supersaw%20string%202%22%2CmidiProgram%3A41%2Csettings%3A%7Btype%3A%22supersaw%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A2378.41%2ClinearGain%3A.5%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A594.6%2ClinearGain%3A.25%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A2e3%2ClinearGain%3A2.8284%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A4756.83%2ClinearGain%3A2%7D%5D%2CeqFilterType%3A!1%2CeqSimpleCut%3A10%2CeqSimplePeak%3A0%2CenvelopeSpeed%3A12%2CdiscreteEnvelope%3A!1%2CeqSubFilters0%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A2378.41%2ClinearGain%3A.5%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A594.6%2ClinearGain%3A.25%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A2e3%2ClinearGain%3A2.8284%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A4756.83%2ClinearGain%3A2%7D%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22chorus%22%2C%22reverb%22%5D%2CnoteFilterType%3A!1%2CnoteSimpleCut%3A10%2CnoteSimplePeak%3A0%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A8e3%2ClinearGain%3A1%7D%5D%2CnoteSubFilters0%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A8e3%2ClinearGain%3A1%7D%5D%2Cchorus%3A57%2Creverb%3A42%2CfadeInSeconds%3A.0575%2CfadeOutTicks%3A-6%2CpulseWidth%3A50%2Cdynamism%3A67%2Cspread%3A58%2Cshape%3A0%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22punch%22%7D%2C%7Btarget%3A%22pulseWidth%22%2Cenvelope%3A%22flare%202%22%7D%5D%7D%7D%5D)%7D%2C%7Bname%3A%22Vocal%20Presets%22%2Cpresets%3AS(%5B%7Bname%3A%22choir%20soprano%22%2CmidiProgram%3A94%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22harmonics%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A2828.43%2ClinearGain%3A2%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A1189.21%2ClinearGain%3A5.6569%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A707.11%2ClinearGain%3A2.8284%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A2e3%2ClinearGain%3A.0884%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A840.9%2ClinearGain%3A.25%7D%2C%7Btype%3A%22low-pass%22%2CcutoffHz%3A6727.17%2ClinearGain%3A11.3137%7D%5D%2Ceffects%3A%5B%22vibrato%22%2C%22chorus%22%2C%22reverb%22%5D%2Cvibrato%3A%22shaky%22%2Cchorus%3A100%2Creverb%3A33%2CfadeInSeconds%3A.0413%2CfadeOutTicks%3A24%2Charmonics%3A%5B100%2C100%2C86%2C57%2C29%2C29%2C57%2C71%2C57%2C29%2C14%2C14%2C14%2C29%2C43%2C57%2C43%2C29%2C14%2C14%2C14%2C14%2C14%2C14%2C0%2C0%2C0%2C0%5D%2Cunison%3A%22none%22%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22choir%20tenor%22%2CmidiProgram%3A52%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22harmonics%22%2CeqFilter%3A%5B%7Btype%3A%22peak%22%2CcutoffHz%3A1e3%2ClinearGain%3A11.3137%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A707.11%2ClinearGain%3A5.6569%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A840.9%2ClinearGain%3A.0884%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A1681.79%2ClinearGain%3A.0884%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A297.3%2ClinearGain%3A.7071%7D%2C%7Btype%3A%22low-pass%22%2CcutoffHz%3A2828.43%2ClinearGain%3A11.3137%7D%5D%2Ceffects%3A%5B%22vibrato%22%2C%22chorus%22%2C%22reverb%22%5D%2Cvibrato%3A%22shaky%22%2Cchorus%3A100%2Creverb%3A67%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0413%2CfadeOutTicks%3A48%2Cchord%3A%22simultaneous%22%2Charmonics%3A%5B86%2C100%2C100%2C86%2C71%2C57%2C43%2C29%2C29%2C29%2C29%2C43%2C43%2C43%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C14%2C14%2C14%2C14%2C14%5D%2Cunison%3A%22none%22%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22choir%20bass%22%2CmidiProgram%3A52%2Csettings%3A%7Btype%3A%22harmonics%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A2378.41%2ClinearGain%3A11.3137%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A594.6%2ClinearGain%3A5.6569%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A1681.79%2ClinearGain%3A.0884%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A707.11%2ClinearGain%3A.0884%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A840.9%2ClinearGain%3A11.3137%7D%5D%2Ceffects%3A%5B%22vibrato%22%2C%22chorus%22%2C%22reverb%22%5D%2Cvibrato%3A%22shaky%22%2Cchorus%3A100%2Creverb%3A67%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0413%2CfadeOutTicks%3A48%2Cchord%3A%22simultaneous%22%2Charmonics%3A%5B71%2C86%2C100%2C100%2C86%2C86%2C57%2C43%2C29%2C29%2C29%2C29%2C29%2C29%2C43%2C43%2C43%2C43%2C43%2C29%2C29%2C29%2C29%2C14%2C14%2C14%2C14%2C14%5D%2Cunison%3A%22none%22%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22solo%20soprano%22%2CmidiProgram%3A85%2Csettings%3A%7Btype%3A%22harmonics%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A2828.43%2ClinearGain%3A2%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A1189.21%2ClinearGain%3A5.6569%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A707.11%2ClinearGain%3A2.8284%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A2e3%2ClinearGain%3A.0884%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A840.9%2ClinearGain%3A.25%7D%5D%2Ceffects%3A%5B%22vibrato%22%2C%22reverb%22%5D%2Cvibrato%3A%22shaky%22%2Creverb%3A33%2CfadeInSeconds%3A.0413%2CfadeOutTicks%3A12%2Charmonics%3A%5B86%2C100%2C86%2C43%2C14%2C14%2C57%2C71%2C57%2C14%2C14%2C14%2C14%2C14%2C43%2C57%2C43%2C14%2C14%2C14%2C14%2C14%2C14%2C14%2C0%2C0%2C0%2C0%5D%2Cunison%3A%22none%22%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22solo%20tenor%22%2CmidiProgram%3A85%2Csettings%3A%7Btype%3A%22harmonics%22%2CeqFilter%3A%5B%7Btype%3A%22peak%22%2CcutoffHz%3A1e3%2ClinearGain%3A11.3137%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A707.11%2ClinearGain%3A5.6569%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A840.9%2ClinearGain%3A.0884%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A1681.79%2ClinearGain%3A.0884%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A297.3%2ClinearGain%3A.7071%7D%2C%7Btype%3A%22low-pass%22%2CcutoffHz%3A2828.43%2ClinearGain%3A11.3137%7D%5D%2Ceffects%3A%5B%22vibrato%22%2C%22reverb%22%5D%2Cvibrato%3A%22shaky%22%2Creverb%3A33%2CfadeInSeconds%3A.0413%2CfadeOutTicks%3A12%2Charmonics%3A%5B86%2C100%2C100%2C86%2C71%2C57%2C43%2C29%2C29%2C29%2C29%2C43%2C43%2C43%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C14%2C14%2C14%2C14%2C14%5D%2Cunison%3A%22none%22%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22solo%20bass%22%2CmidiProgram%3A85%2Csettings%3A%7Btype%3A%22harmonics%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A2378.41%2ClinearGain%3A5.6569%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A594.6%2ClinearGain%3A8%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A1681.79%2ClinearGain%3A.0884%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A707.11%2ClinearGain%3A.0884%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A840.9%2ClinearGain%3A8%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A210.22%2ClinearGain%3A1.4142%7D%5D%2Ceffects%3A%5B%22vibrato%22%2C%22reverb%22%5D%2Cvibrato%3A%22shaky%22%2Creverb%3A33%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0263%2CfadeOutTicks%3A12%2Cchord%3A%22simultaneous%22%2Charmonics%3A%5B71%2C86%2C100%2C100%2C86%2C86%2C57%2C43%2C29%2C29%2C29%2C29%2C29%2C29%2C43%2C43%2C43%2C43%2C43%2C29%2C29%2C29%2C29%2C14%2C14%2C14%2C14%2C14%5D%2Cunison%3A%22none%22%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22voice%20ooh%22%2CmidiProgram%3A53%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22harmonics%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A1414%2CfilterResonance%3A57%2CfilterEnvelope%3A%22steady%22%2Cinterval%3A%22union%22%2Cvibrato%3A%22shaky%22%2Charmonics%3A%5B100%2C57%2C43%2C43%2C14%2C14%2C0%2C0%2C0%2C14%2C29%2C29%2C14%2C0%2C14%2C29%2C29%2C14%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%5D%7D%7D%2C%7Bname%3A%22voice%20synth%22%2CmidiProgram%3A54%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22chip%22%2Ctransition%3A%22medium%20fade%22%2Ceffects%3A%22chorus%20%26%20reverb%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A4e3%2CfilterResonance%3A57%2CfilterEnvelope%3A%22steady%22%2Cwave%3A%22rounded%22%2Cinterval%3A%22union%22%2Cvibrato%3A%22light%22%7D%7D%2C%7Bname%3A%22vox%20synth%20lead%22%2CmidiProgram%3A85%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22chorus%20%26%20reverb%22%2Ctransition%3A%22cross%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A14%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22light%22%2Calgorithm%3A%22(1%E2%80%822%E2%80%823)%E2%86%904%22%2CfeedbackType%3A%221%E2%86%922%E2%86%923%E2%86%924%22%2CfeedbackAmplitude%3A2%2CfeedbackEnvelope%3A%22punch%22%2Coperators%3A%5B%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A10%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%229%C3%97%22%2Camplitude%3A5%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%2220%C3%97%22%2Camplitude%3A1%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A4%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22tiny%20robot%22%2CmidiProgram%3A85%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22vibrato%22%2C%22reverb%22%5D%2Cvibrato%3A%22delayed%22%2Creverb%3A33%2Ctransition%3A%22slide%22%2CfadeInSeconds%3A.0263%2CfadeOutTicks%3A-3%2Cchord%3A%22simultaneous%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A2%2Coperators%3A%5B%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A15%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A7%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A7%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22punch%22%2Cindex%3A1%7D%2C%7Btarget%3A%22feedbackAmplitude%22%2Cenvelope%3A%22twang%203%22%7D%5D%7D%7D%2C%7Bname%3A%22yowie%22%2CmidiProgram%3A85%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22cross%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A86%2CfilterEnvelope%3A%22tremolo5%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%902%E2%86%90(3%E2%80%824)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A12%2CfeedbackEnvelope%3A%22tremolo3%22%2Coperators%3A%5B%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A12%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%2216%C3%97%22%2Camplitude%3A5%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A5%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22mouse%22%2CmidiProgram%3A85%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22vibrato%22%2C%22reverb%22%5D%2Cvibrato%3A%22light%22%2Creverb%3A33%2Ctransition%3A%22slide%20in%20pattern%22%2CfadeInSeconds%3A.0263%2CfadeOutTicks%3A-3%2Cchord%3A%22simultaneous%22%2Calgorithm%3A%221%E2%80%832%E2%80%833%E2%80%834%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%22%2CfeedbackAmplitude%3A5%2Coperators%3A%5B%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A13%7D%2C%7Bfrequency%3A%225%C3%97%22%2Camplitude%3A12%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteVolume%22%2Cenvelope%3A%22note%20size%22%7D%2C%7Btarget%3A%22feedbackAmplitude%22%2Cenvelope%3A%22flare%202%22%7D%5D%7D%7D%2C%7Bname%3A%22gumdrop%22%2CmidiProgram%3A85%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A8e3%2CfilterResonance%3A0%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%22(1%E2%80%822%E2%80%823)%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%E2%80%833%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2CfeedbackEnvelope%3A%22steady%22%2Coperators%3A%5B%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22punch%22%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22punch%22%7D%2C%7Bfrequency%3A%227%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22punch%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A10%2Cenvelope%3A%22twang%201%22%7D%5D%7D%7D%2C%7Bname%3A%22echo%20drop%22%2CmidiProgram%3A102%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22chorus%20%26%20reverb%22%2Ctransition%3A%22hard%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A14%2CfilterEnvelope%3A%22punch%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%86%904)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A2%2CfeedbackEnvelope%3A%22steady%22%2Coperators%3A%5B%7Bfrequency%3A%22~2%C3%97%22%2Camplitude%3A11%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A5%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%2211%C3%97%22%2Camplitude%3A2%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%2216%C3%97%22%2Camplitude%3A5%2Cenvelope%3A%22swell%203%22%7D%5D%7D%7D%2C%7Bname%3A%22dark%20choir%22%2CmidiProgram%3A85%2Csettings%3A%7Btype%3A%22spectrum%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A4e3%2CfilterResonance%3A29%2CfilterEnvelope%3A%22swell%201%22%2Cspectrum%3A%5B43%2C14%2C14%2C14%2C14%2C14%2C14%2C100%2C14%2C14%2C14%2C57%2C14%2C14%2C100%2C14%2C43%2C14%2C43%2C14%2C14%2C43%2C14%2C29%2C14%2C29%2C14%2C14%2C29%2C0%5D%7D%7D%5D)%7D%2C%7Bname%3A%22Brass%20Presets%22%2Cpresets%3AS(%5B%7Bname%3A%22trumpet%22%2CmidiProgram%3A56%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A43%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A9%2CfeedbackEnvelope%3A%22swell%201%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A14%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A8%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A5%2Cenvelope%3A%22flare%202%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22trombone%22%2CmidiProgram%3A57%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A43%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CfeedbackType%3A%222%E2%9F%B2%22%2CfeedbackAmplitude%3A7%2CfeedbackEnvelope%3A%22swell%201%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A14%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A8%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22tuba%22%2CmidiProgram%3A58%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A43%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CfeedbackType%3A%222%E2%9F%B2%22%2CfeedbackAmplitude%3A8%2CfeedbackEnvelope%3A%22swell%201%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A14%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A6%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22muted%20trumpet%22%2CmidiProgram%3A59%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A8e3%2ClinearGain%3A2.8284%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A4e3%2ClinearGain%3A2.8284%7D%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22reverb%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A3363.59%2ClinearGain%3A1%7D%5D%2Creverb%3A33%2CfadeInSeconds%3A.0263%2CfadeOutTicks%3A-3%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%86%904)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A5%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A13%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A5%7D%2C%7Bfrequency%3A%229%C3%97%22%2Camplitude%3A5%7D%2C%7Bfrequency%3A%2213%C3%97%22%2Camplitude%3A7%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22swell%201%22%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22swell%201%22%2Cindex%3A3%7D%2C%7Btarget%3A%22feedbackAmplitude%22%2Cenvelope%3A%22flare%202%22%7D%5D%7D%7D%2C%7Bname%3A%22french%20horn%22%2CmidiProgram%3A60%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4e3%2ClinearGain%3A1%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A2378.41%2ClinearGain%3A2.8284%7D%5D%2Ceffects%3A%5B%22reverb%22%5D%2Creverb%3A33%2CfadeInSeconds%3A.0263%2CfadeOutTicks%3A-3%2Calgorithm%3A%221%E2%86%903%E2%80%832%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%22%2CfeedbackAmplitude%3A3%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A12%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A10%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A8%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22swell%201%22%2Cindex%3A2%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22flare%202%22%2Cindex%3A3%7D%2C%7Btarget%3A%22feedbackAmplitude%22%2Cenvelope%3A%22swell%201%22%7D%5D%7D%7D%2C%7Bname%3A%22brass%20section%22%2CmidiProgram%3A61%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A14%2CfilterEnvelope%3A%22punch%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%903%E2%80%832%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%22%2CfeedbackAmplitude%3A6%2CfeedbackEnvelope%3A%22swell%201%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A14%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A12%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A10%2Cenvelope%3A%22swell%201%22%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A10%2Cenvelope%3A%22swell%201%22%7D%5D%7D%7D%2C%7Bname%3A%22brass%20synth%201%22%2CmidiProgram%3A62%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A4e3%2CfilterResonance%3A29%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%903%E2%80%832%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%22%2CfeedbackAmplitude%3A11%2CfeedbackEnvelope%3A%22swell%201%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A14%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A14%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A12%2Cenvelope%3A%22flare%201%22%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A8%2Cenvelope%3A%22flare%202%22%7D%5D%7D%7D%2C%7Bname%3A%22brass%20synth%202%22%2CmidiProgram%3A63%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ctransition%3A%22soft%22%2Ceffects%3A%22reverb%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A4e3%2CfilterResonance%3A43%2CfilterEnvelope%3A%22twang%203%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%903%E2%80%832%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%22%2CfeedbackAmplitude%3A9%2CfeedbackEnvelope%3A%22swell%201%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A10%2Cenvelope%3A%22flare%201%22%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A7%2Cenvelope%3A%22flare%201%22%7D%5D%7D%7D%2C%7Bname%3A%22pulse%20brass%22%2CmidiProgram%3A62%2Csettings%3A%7Btype%3A%22PWM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A4e3%2CfilterResonance%3A29%2CfilterEnvelope%3A%22swell%201%22%2CpulseWidth%3A50%2CpulseEnvelope%3A%22flare%203%22%2Cvibrato%3A%22none%22%7D%7D%5D)%7D%2C%7Bname%3A%22Reed%20Presets%22%2Cpresets%3AS(%5B%7Bname%3A%22soprano%20sax%22%2CmidiProgram%3A64%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A29%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%902%E2%86%903%E2%86%904%22%2CfeedbackType%3A%224%E2%9F%B2%22%2CfeedbackAmplitude%3A5%2CfeedbackEnvelope%3A%22swell%201%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A13%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A4%2Cenvelope%3A%22swell%201%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A7%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%225%C3%97%22%2Camplitude%3A4%2Cenvelope%3A%22punch%22%7D%5D%7D%7D%2C%7Bname%3A%22alto%20sax%22%2CmidiProgram%3A65%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A43%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%86%904)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A4%2CfeedbackEnvelope%3A%22punch%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A13%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A6%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A6%2Cenvelope%3A%22swell%201%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A12%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22tenor%20sax%22%2CmidiProgram%3A66%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A29%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%902%E2%86%903%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A6%2CfeedbackEnvelope%3A%22swell%201%22%2Coperators%3A%5B%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A12%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A7%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A3%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%228%C3%97%22%2Camplitude%3A3%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22baritone%20sax%22%2CmidiProgram%3A67%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A0%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%86%904)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A2%2CfeedbackEnvelope%3A%22swell%202%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A12%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%228%C3%97%22%2Camplitude%3A4%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A5%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A4%2Cenvelope%3A%22punch%22%7D%5D%7D%7D%2C%7Bname%3A%22sax%20synth%22%2CmidiProgram%3A64%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A8e3%2CfilterResonance%3A0%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22light%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%22%2CfeedbackAmplitude%3A4%2CfeedbackEnvelope%3A%22steady%22%2Coperators%3A%5B%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22shehnai%22%2CmidiProgram%3A111%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A8e3%2CfilterResonance%3A0%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22light%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A3%2CfeedbackEnvelope%3A%22steady%22%2Coperators%3A%5B%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A8%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22oboe%22%2CmidiProgram%3A68%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22cross%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A4e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22swell%201%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%80%832%E2%86%90(3%E2%80%824)%22%2CfeedbackType%3A%222%E2%9F%B2%22%2CfeedbackAmplitude%3A2%2CfeedbackEnvelope%3A%22tremolo5%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A7%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A12%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A6%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%226%C3%97%22%2Camplitude%3A2%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22english%20horn%22%2CmidiProgram%3A69%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22cross%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%80%832%E2%86%90(3%E2%80%824)%22%2CfeedbackType%3A%222%E2%9F%B2%22%2CfeedbackAmplitude%3A2%2CfeedbackEnvelope%3A%22steady%22%2Coperators%3A%5B%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A12%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A10%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A8%2Cenvelope%3A%22punch%22%7D%2C%7Bfrequency%3A%228%C3%97%22%2Camplitude%3A4%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22bassoon%22%2CmidiProgram%3A70%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A707%2CfilterResonance%3A57%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%86%904)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A2%2CfeedbackEnvelope%3A%22steady%22%2Coperators%3A%5B%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A11%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A6%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%226%C3%97%22%2Camplitude%3A6%2Cenvelope%3A%22swell%201%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22clarinet%22%2CmidiProgram%3A71%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22harmonics%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A1414%2CfilterResonance%3A14%2CfilterEnvelope%3A%22steady%22%2Cinterval%3A%22union%22%2Cvibrato%3A%22none%22%2Charmonics%3A%5B100%2C43%2C86%2C57%2C86%2C71%2C86%2C71%2C71%2C71%2C71%2C71%2C71%2C43%2C71%2C71%2C57%2C57%2C57%2C57%2C57%2C57%2C43%2C43%2C43%2C29%2C14%2C0%5D%7D%7D%2C%7Bname%3A%22harmonica%22%2CmidiProgram%3A22%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A5657%2CfilterResonance%3A29%2CfilterEnvelope%3A%22swell%201%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%86%904)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A9%2CfeedbackEnvelope%3A%22tremolo5%22%2Coperators%3A%5B%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A14%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%22~2%C3%97%22%2Camplitude%3A2%2Cenvelope%3A%22twang%203%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%5D)%7D%2C%7Bname%3A%22Flute%20Presets%22%2Cpresets%3AS(%5B%7Bname%3A%22flute%201%22%2CmidiProgram%3A73%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A5657%2CfilterResonance%3A14%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CfeedbackType%3A%224%E2%9F%B2%22%2CfeedbackAmplitude%3A7%2CfeedbackEnvelope%3A%22decay%202%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A4%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A3%2Cenvelope%3A%22steady%22%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A1%2Cenvelope%3A%22punch%22%7D%5D%7D%7D%2C%7Bname%3A%22recorder%22%2CmidiProgram%3A74%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22harmonics%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A4e3%2CfilterResonance%3A29%2CfilterEnvelope%3A%22swell%202%22%2Cinterval%3A%22union%22%2Cvibrato%3A%22none%22%2Charmonics%3A%5B100%2C43%2C57%2C43%2C57%2C43%2C43%2C43%2C43%2C43%2C43%2C43%2C43%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C14%2C14%2C14%2C14%2C14%2C14%2C14%2C0%5D%7D%7D%2C%7Bname%3A%22whistle%22%2CmidiProgram%3A78%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22harmonics%22%2Ceffects%3A%22chorus%20%26%20reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A43%2CfilterEnvelope%3A%22steady%22%2Cinterval%3A%22union%22%2Cvibrato%3A%22delayed%22%2Charmonics%3A%5B100%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%5D%7D%7D%2C%7Bname%3A%22ocarina%22%2CmidiProgram%3A79%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22harmonics%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A43%2CfilterEnvelope%3A%22steady%22%2Cinterval%3A%22union%22%2Cvibrato%3A%22none%22%2Charmonics%3A%5B100%2C14%2C57%2C14%2C29%2C14%2C14%2C14%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%5D%7D%7D%2C%7Bname%3A%22piccolo%22%2CmidiProgram%3A72%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A5657%2CfilterResonance%3A43%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%86%903%E2%80%832%E2%86%904%22%2CfeedbackType%3A%224%E2%9F%B2%22%2CfeedbackAmplitude%3A15%2CfeedbackEnvelope%3A%22twang%201%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A10%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%22~2%C3%97%22%2Camplitude%3A3%2Cenvelope%3A%22punch%22%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A5%2Cenvelope%3A%22punch%22%7D%5D%7D%7D%2C%7Bname%3A%22shakuhachi%22%2CmidiProgram%3A77%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22chorus%20%26%20reverb%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A4e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22delayed%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%86%904)%22%2CfeedbackType%3A%223%E2%86%924%22%2CfeedbackAmplitude%3A15%2CfeedbackEnvelope%3A%22steady%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A3%2Cenvelope%3A%22punch%22%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A4%2Cenvelope%3A%22twang%201%22%7D%2C%7Bfrequency%3A%2220%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22steady%22%7D%5D%7D%7D%2C%7Bname%3A%22pan%20flute%22%2CmidiProgram%3A75%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22spectrum%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A9513.66%2ClinearGain%3A5.6569%7D%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22reverb%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22high-pass%22%2CcutoffHz%3A4756.83%2ClinearGain%3A.7071%7D%5D%2Creverb%3A33%2CfadeInSeconds%3A.0125%2CfadeOutTicks%3A-3%2Cspectrum%3A%5B100%2C0%2C0%2C0%2C0%2C0%2C0%2C14%2C0%2C0%2C0%2C71%2C0%2C0%2C14%2C0%2C57%2C0%2C29%2C14%2C29%2C14%2C14%2C29%2C14%2C29%2C14%2C14%2C29%2C14%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterFreq%22%2Cenvelope%3A%22twang%201%22%2Cindex%3A0%7D%2C%7Btarget%3A%22noteVolume%22%2Cenvelope%3A%22punch%22%7D%5D%7D%7D%2C%7Bname%3A%22blown%20bottle%22%2CmidiProgram%3A76%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2Ceffects%3A%22chorus%20%26%20reverb%22%2Ctransition%3A%22cross%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A5657%2CfilterResonance%3A57%2CfilterEnvelope%3A%22steady%22%2Cvibrato%3A%22none%22%2Calgorithm%3A%221%E2%80%832%E2%80%833%E2%80%834%22%2CfeedbackType%3A%221%E2%9F%B2%202%E2%9F%B2%203%E2%9F%B2%204%E2%9F%B2%22%2CfeedbackAmplitude%3A7%2CfeedbackEnvelope%3A%22twang%201%22%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A4%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%226%C3%97%22%2Camplitude%3A2%2Cenvelope%3A%22custom%22%7D%2C%7Bfrequency%3A%2211%C3%97%22%2Camplitude%3A2%2Cenvelope%3A%22custom%22%7D%5D%7D%7D%2C%7Bname%3A%22calliope%22%2CmidiProgram%3A82%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22spectrum%22%2Ctransition%3A%22cross%20fade%22%2Ceffects%3A%22reverb%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A5657%2CfilterResonance%3A14%2CfilterEnvelope%3A%22steady%22%2Cspectrum%3A%5B100%2C0%2C0%2C0%2C0%2C0%2C0%2C86%2C0%2C0%2C0%2C71%2C0%2C0%2C57%2C0%2C43%2C0%2C29%2C14%2C14%2C29%2C14%2C14%2C14%2C14%2C14%2C14%2C14%2C14%5D%7D%7D%2C%7Bname%3A%22chiffer%22%2CmidiProgram%3A83%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22spectrum%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22punch%22%2Cspectrum%3A%5B86%2C0%2C0%2C0%2C0%2C0%2C0%2C71%2C0%2C0%2C0%2C71%2C0%2C0%2C57%2C0%2C57%2C0%2C43%2C14%2C14%2C43%2C14%2C29%2C14%2C29%2C29%2C29%2C29%2C14%5D%7D%7D%2C%7Bname%3A%22breath%20noise%22%2CmidiProgram%3A121%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22spectrum%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22chord%20type%22%2C%22note%20filter%22%2C%22reverb%22%5D%2Cchord%3A%22strum%22%2CnoteFilter%3A%5B%7Btype%3A%22high-pass%22%2CcutoffHz%3A840.9%2ClinearGain%3A.3536%7D%2C%7Btype%3A%22low-pass%22%2CcutoffHz%3A16e3%2ClinearGain%3A.3536%7D%5D%2Creverb%3A33%2CfadeInSeconds%3A.0413%2CfadeOutTicks%3A12%2Cspectrum%3A%5B71%2C0%2C0%2C0%2C0%2C0%2C0%2C29%2C0%2C0%2C0%2C71%2C0%2C0%2C29%2C0%2C100%2C29%2C14%2C29%2C100%2C29%2C100%2C14%2C14%2C71%2C0%2C29%2C0%2C0%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22twang%201%22%7D%5D%7D%7D%2C%7Bname%3A%22flute%202%22%2CmidiProgram%3A73%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22harmonics%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22seamless%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A1414%2CfilterResonance%3A14%2CfilterEnvelope%3A%22steady%22%2Cinterval%3A%22union%22%2Cvibrato%3A%22delayed%22%2Charmonics%3A%5B100%2C43%2C86%2C57%2C86%2C71%2C86%2C71%2C71%2C71%2C71%2C71%2C71%2C43%2C71%2C71%2C57%2C57%2C57%2C57%2C57%2C57%2C43%2C43%2C43%2C29%2C14%2C0%5D%7D%7D%5D)%7D%2C%7Bname%3A%22Pad%20Presets%22%2Cpresets%3AS(%5B%7Bname%3A%22new%20age%20pad%22%2CmidiProgram%3A88%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22chorus%22%5D%2Cchorus%3A100%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A48%2Cchord%3A%22simultaneous%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%86%904)%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%22%2CfeedbackAmplitude%3A3%2Coperators%3A%5B%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A14%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A4%7D%2C%7Bfrequency%3A%226%C3%97%22%2Camplitude%3A3%7D%2C%7Bfrequency%3A%2213%C3%97%22%2Camplitude%3A3%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22swell%202%22%2Cindex%3A1%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22twang%203%22%2Cindex%3A2%7D%2C%7Btarget%3A%22feedbackAmplitude%22%2Cenvelope%3A%22swell%203%22%7D%5D%7D%7D%2C%7Bname%3A%22warm%20pad%22%2CmidiProgram%3A89%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22chorus%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A3363.59%2ClinearGain%3A1%7D%5D%2Cchorus%3A100%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0575%2CfadeOutTicks%3A96%2Cchord%3A%22simultaneous%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A7%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A14%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A6%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22swell%203%22%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22swell%201%22%2Cindex%3A1%7D%5D%7D%7D%2C%7Bname%3A%22polysynth%20pad%22%2CmidiProgram%3A90%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22chip%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22vibrato%22%2C%22note%20filter%22%2C%22chorus%22%5D%2Cvibrato%3A%22delayed%22%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A2828.43%2ClinearGain%3A1%7D%5D%2Cchorus%3A100%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A48%2Cchord%3A%22simultaneous%22%2Cwave%3A%22sawtooth%22%2Cunison%3A%22honky%20tonk%22%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22twang%203%22%7D%5D%7D%7D%2C%7Bname%3A%22space%20voice%20pad%22%2CmidiProgram%3A91%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A6727.17%2ClinearGain%3A5.6569%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A2828.43%2ClinearGain%3A5.6569%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A1414.21%2ClinearGain%3A.1768%7D%5D%2Ceffects%3A%5B%22chorus%22%5D%2Cchorus%3A100%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0125%2CfadeOutTicks%3A72%2Cchord%3A%22simultaneous%22%2Calgorithm%3A%22(1%E2%80%822%E2%80%823)%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%202%E2%9F%B2%203%E2%9F%B2%204%E2%9F%B2%22%2CfeedbackAmplitude%3A5%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A10%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A8%7D%2C%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A7%7D%2C%7Bfrequency%3A%2211%C3%97%22%2Camplitude%3A2%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22punch%22%2Cindex%3A3%7D%2C%7Btarget%3A%22feedbackAmplitude%22%2Cenvelope%3A%22swell%202%22%7D%5D%7D%7D%2C%7Bname%3A%22bowed%20glass%20pad%22%2CmidiProgram%3A92%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22note%20filter%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4756.83%2ClinearGain%3A.5%7D%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0575%2CfadeOutTicks%3A96%2Cchord%3A%22simultaneous%22%2Calgorithm%3A%221%E2%86%903%E2%80%832%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A10%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A12%7D%2C%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A7%7D%2C%7Bfrequency%3A%227%C3%97%22%2Camplitude%3A4%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22twang%203%22%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22twang%203%22%2Cindex%3A2%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22flare%203%22%2Cindex%3A3%7D%5D%7D%7D%2C%7Bname%3A%22metallic%20pad%22%2CmidiProgram%3A93%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22note%20filter%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A6727.17%2ClinearGain%3A.5%7D%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0125%2CfadeOutTicks%3A72%2Cchord%3A%22simultaneous%22%2Calgorithm%3A%221%E2%86%903%E2%80%832%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%22%2CfeedbackAmplitude%3A13%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A9%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A7%7D%2C%7Bfrequency%3A%2211%C3%97%22%2Camplitude%3A7%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22twang%203%22%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22swell%202%22%2Cindex%3A2%7D%2C%7Btarget%3A%22feedbackAmplitude%22%2Cenvelope%3A%22twang%203%22%7D%5D%7D%7D%2C%7Bname%3A%22sweep%20pad%22%2CmidiProgram%3A95%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22chip%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22chorus%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4e3%2ClinearGain%3A4%7D%5D%2Cchorus%3A100%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0575%2CfadeOutTicks%3A96%2Cchord%3A%22simultaneous%22%2Cwave%3A%22sawtooth%22%2Cunison%3A%22hum%22%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22flare%203%22%7D%5D%7D%7D%2C%7Bname%3A%22atmosphere%22%2CmidiProgram%3A99%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4756.83%2ClinearGain%3A1%7D%5D%2Ceffects%3A%5B%22chorus%22%2C%22reverb%22%5D%2Cchorus%3A100%2Creverb%3A33%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A48%2Cchord%3A%22strum%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CfeedbackType%3A%223%E2%9F%B2%E2%80%834%E2%9F%B2%22%2CfeedbackAmplitude%3A3%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A14%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A10%7D%2C%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A7%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A7%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22swell%203%22%2Cindex%3A1%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22twang%202%22%2Cindex%3A2%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22twang%203%22%2Cindex%3A3%7D%5D%7D%7D%2C%7Bname%3A%22brightness%22%2CmidiProgram%3A100%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22Picked%20String%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4756.83%2ClinearGain%3A2%7D%5D%2Ceffects%3A%5B%22chorus%22%5D%2Cchorus%3A100%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0125%2CfadeOutTicks%3A72%2Cchord%3A%22simultaneous%22%2Charmonics%3A%5B100%2C86%2C86%2C86%2C43%2C57%2C43%2C71%2C43%2C43%2C43%2C57%2C43%2C43%2C57%2C71%2C57%2C43%2C29%2C43%2C57%2C57%2C43%2C29%2C29%2C29%2C29%2C14%5D%2Cunison%3A%22octave%22%2CstringSustain%3A86%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22goblins%22%2CmidiProgram%3A101%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%7Btype%3A%22peak%22%2CcutoffHz%3A2828.43%2ClinearGain%3A11.3137%7D%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22chorus%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A1681.79%2ClinearGain%3A.5%7D%5D%2Cchorus%3A100%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0575%2CfadeOutTicks%3A96%2Cchord%3A%22simultaneous%22%2Calgorithm%3A%221%E2%86%902%E2%86%903%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A10%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A5%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A10%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22swell%202%22%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22swell%203%22%2Cindex%3A1%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22tremolo1%22%2Cindex%3A2%7D%2C%7Btarget%3A%22feedbackAmplitude%22%2Cenvelope%3A%22flare%203%22%7D%5D%7D%7D%2C%7Bname%3A%22sci-fi%22%2CmidiProgram%3A103%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%7Btype%3A%22peak%22%2CcutoffHz%3A9513.66%2ClinearGain%3A2.8284%7D%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22chorus%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A6727.17%2ClinearGain%3A.5%7D%5D%2Cchorus%3A100%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0125%2CfadeOutTicks%3A48%2Cchord%3A%22simultaneous%22%2Calgorithm%3A%22(1%E2%80%822)%E2%86%903%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%202%E2%9F%B2%203%E2%9F%B2%204%E2%9F%B2%22%2CfeedbackAmplitude%3A8%2Coperators%3A%5B%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A13%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A10%7D%2C%7Bfrequency%3A%225%C3%97%22%2Camplitude%3A5%7D%2C%7Bfrequency%3A%2211%C3%97%22%2Camplitude%3A8%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22twang%203%22%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22twang%203%22%2Cindex%3A2%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22tremolo5%22%2Cindex%3A3%7D%2C%7Btarget%3A%22feedbackAmplitude%22%2Cenvelope%3A%22twang%203%22%7D%5D%7D%7D%2C%7Bname%3A%22flutter%20pad%22%2CmidiProgram%3A90%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22vibrato%22%2C%22note%20filter%22%2C%22chorus%22%5D%2Cvibrato%3A%22delayed%22%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4e3%2ClinearGain%3A4%7D%5D%2Cchorus%3A100%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A48%2Cchord%3A%22simultaneous%22%2Calgorithm%3A%22(1%E2%80%822)%E2%86%90(3%E2%80%824)%22%2CfeedbackType%3A%221%E2%9F%B2%E2%80%832%E2%9F%B2%E2%80%833%E2%9F%B2%22%2CfeedbackAmplitude%3A9%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A13%7D%2C%7Bfrequency%3A%225%C3%97%22%2Camplitude%3A7%7D%2C%7Bfrequency%3A%227%C3%97%22%2Camplitude%3A5%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A6%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22twang%203%22%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22tremolo1%22%2Cindex%3A2%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22punch%22%2Cindex%3A3%7D%5D%7D%7D%2C%7Bname%3A%22feedback%20pad%22%2CmidiProgram%3A89%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%7Btype%3A%22peak%22%2CcutoffHz%3A2378.41%2ClinearGain%3A8%7D%5D%2Ceffects%3A%5B%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0575%2CfadeOutTicks%3A96%2Cchord%3A%22custom%20interval%22%2Calgorithm%3A%221%E2%80%832%E2%80%833%E2%80%834%22%2CfeedbackType%3A%221%E2%9F%B2%202%E2%9F%B2%203%E2%9F%B2%204%E2%9F%B2%22%2CfeedbackAmplitude%3A8%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A15%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22feedbackAmplitude%22%2Cenvelope%3A%22swell%202%22%7D%5D%7D%7D%2C%7Bname%3A%22supersaw%20pad%22%2CmidiProgram%3A93%2Csettings%3A%7Btype%3A%22supersaw%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A8e3%2ClinearGain%3A.1768%7D%5D%2Ceffects%3A%5B%22reverb%22%5D%2Creverb%3A100%2CfadeInSeconds%3A.0263%2CfadeOutTicks%3A24%2CpulseWidth%3A50%2Cdynamism%3A100%2Cspread%3A58%2Cshape%3A0%2Cenvelopes%3A%5B%5D%7D%7D%5D)%7D%2C%7Bname%3A%22Drum%20Presets%22%2Cpresets%3AS(%5B%7Bname%3A%22standard%20drumset%22%2CmidiProgram%3A116%2CisNoise%3A!0%2Csettings%3A%7Btype%3A%22drumset%22%2Ceffects%3A%22reverb%22%2Cdrums%3A%5B%7BfilterEnvelope%3A%22twang%201%22%2Cspectrum%3A%5B57%2C71%2C71%2C86%2C86%2C86%2C71%2C71%2C71%2C71%2C57%2C57%2C57%2C57%2C43%2C43%2C43%2C43%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%5D%7D%2C%7BfilterEnvelope%3A%22twang%201%22%2Cspectrum%3A%5B0%2C0%2C0%2C100%2C71%2C71%2C57%2C86%2C57%2C57%2C57%2C71%2C43%2C43%2C57%2C43%2C43%2C43%2C43%2C43%2C43%2C43%2C43%2C43%2C43%2C43%2C43%2C43%2C43%2C43%5D%7D%2C%7BfilterEnvelope%3A%22twang%201%22%2Cspectrum%3A%5B0%2C0%2C0%2C0%2C100%2C57%2C43%2C43%2C29%2C57%2C43%2C29%2C71%2C43%2C43%2C43%2C43%2C57%2C43%2C43%2C43%2C43%2C43%2C43%2C43%2C43%2C29%2C43%2C43%2C43%5D%7D%2C%7BfilterEnvelope%3A%22twang%201%22%2Cspectrum%3A%5B0%2C0%2C0%2C0%2C0%2C71%2C57%2C43%2C43%2C43%2C57%2C57%2C43%2C29%2C57%2C43%2C43%2C43%2C29%2C43%2C57%2C43%2C43%2C43%2C43%2C43%2C43%2C29%2C43%2C43%5D%7D%2C%7BfilterEnvelope%3A%22decay%202%22%2Cspectrum%3A%5B0%2C14%2C29%2C43%2C86%2C71%2C29%2C43%2C43%2C43%2C43%2C29%2C71%2C29%2C71%2C29%2C43%2C43%2C43%2C43%2C57%2C43%2C43%2C57%2C43%2C43%2C43%2C57%2C57%2C57%5D%7D%2C%7BfilterEnvelope%3A%22decay%201%22%2Cspectrum%3A%5B0%2C0%2C14%2C14%2C14%2C14%2C29%2C29%2C29%2C43%2C43%2C43%2C57%2C57%2C57%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C57%2C57%2C57%2C57%2C43%2C43%2C43%5D%7D%2C%7BfilterEnvelope%3A%22twang%203%22%2Cspectrum%3A%5B43%2C43%2C43%2C71%2C29%2C29%2C43%2C43%2C43%2C29%2C43%2C43%2C43%2C29%2C29%2C43%2C43%2C29%2C29%2C29%2C57%2C14%2C57%2C43%2C43%2C57%2C43%2C43%2C57%2C57%5D%7D%2C%7BfilterEnvelope%3A%22decay%203%22%2Cspectrum%3A%5B29%2C43%2C43%2C43%2C43%2C29%2C29%2C43%2C29%2C29%2C43%2C29%2C14%2C29%2C43%2C29%2C43%2C29%2C57%2C29%2C43%2C57%2C43%2C71%2C43%2C71%2C57%2C57%2C71%2C71%5D%7D%2C%7BfilterEnvelope%3A%22twang%203%22%2Cspectrum%3A%5B43%2C29%2C29%2C43%2C29%2C29%2C29%2C57%2C29%2C29%2C29%2C57%2C43%2C43%2C29%2C29%2C57%2C43%2C43%2C43%2C71%2C43%2C43%2C71%2C57%2C71%2C71%2C71%2C71%2C71%5D%7D%2C%7BfilterEnvelope%3A%22decay%203%22%2Cspectrum%3A%5B57%2C57%2C57%2C43%2C57%2C57%2C43%2C43%2C57%2C43%2C43%2C43%2C71%2C57%2C43%2C57%2C86%2C71%2C57%2C86%2C71%2C57%2C86%2C100%2C71%2C86%2C86%2C86%2C86%2C86%5D%7D%2C%7BfilterEnvelope%3A%22flare%201%22%2Cspectrum%3A%5B0%2C0%2C14%2C14%2C14%2C14%2C29%2C29%2C29%2C43%2C43%2C43%2C57%2C57%2C71%2C71%2C86%2C86%2C100%2C100%2C100%2C100%2C100%2C100%2C100%2C100%2C86%2C57%2C29%2C0%5D%7D%2C%7BfilterEnvelope%3A%22decay%202%22%2Cspectrum%3A%5B14%2C14%2C14%2C14%2C29%2C14%2C14%2C29%2C14%2C43%2C14%2C43%2C57%2C86%2C57%2C57%2C100%2C57%2C43%2C43%2C57%2C100%2C57%2C43%2C29%2C14%2C0%2C0%2C0%2C0%5D%7D%5D%7D%7D%2C%7Bname%3A%22steel%20pan%22%2CmidiProgram%3A114%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%7Btype%3A%22high-pass%22%2CcutoffHz%3A62.5%2ClinearGain%3A.1768%7D%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22chorus%22%2C%22reverb%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A13454.34%2ClinearGain%3A.25%7D%5D%2Cchorus%3A67%2Creverb%3A33%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A24%2Cchord%3A%22simultaneous%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%86%904)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2Coperators%3A%5B%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A14%7D%2C%7Bfrequency%3A%227%C3%97%22%2Camplitude%3A3%7D%2C%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A5%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A4%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22decay%202%22%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22flare%201%22%2Cindex%3A1%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22flare%202%22%2Cindex%3A2%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22swell%202%22%2Cindex%3A3%7D%5D%7D%7D%2C%7Bname%3A%22steel%20pan%20synth%22%2CmidiProgram%3A114%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22note%20filter%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A13454.34%2ClinearGain%3A.25%7D%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Cchord%3A%22simultaneous%22%2Calgorithm%3A%221%E2%80%832%E2%80%833%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A5%2Coperators%3A%5B%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A12%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A15%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A14%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A3%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22twang%201%22%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22note%20size%22%2Cindex%3A0%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22note%20size%22%2Cindex%3A1%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22flare%201%22%2Cindex%3A2%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22flare%202%22%2Cindex%3A3%7D%2C%7Btarget%3A%22feedbackAmplitude%22%2Cenvelope%3A%22flare%201%22%7D%5D%7D%7D%2C%7Bname%3A%22timpani%22%2CmidiProgram%3A47%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22spectrum%22%2CeqFilter%3A%5B%7Btype%3A%22peak%22%2CcutoffHz%3A6727.17%2ClinearGain%3A5.6569%7D%5D%2Ceffects%3A%5B%22pitch%20shift%22%2C%22note%20filter%22%2C%22reverb%22%5D%2CpitchShiftSemitones%3A15%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A19027.31%2ClinearGain%3A.5%7D%5D%2Creverb%3A33%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A48%2Cchord%3A%22simultaneous%22%2Cspectrum%3A%5B100%2C0%2C0%2C0%2C86%2C0%2C0%2C71%2C0%2C14%2C43%2C14%2C43%2C43%2C0%2C29%2C43%2C29%2C29%2C29%2C43%2C29%2C43%2C29%2C43%2C43%2C43%2C43%2C43%2C43%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22twang%201%22%7D%2C%7Btarget%3A%22pitchShift%22%2Cenvelope%3A%22twang%201%22%7D%5D%7D%7D%2C%7Bname%3A%22dark%20strike%22%2CmidiProgram%3A47%2Csettings%3A%7Btype%3A%22spectrum%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22reverb%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4756.83%2ClinearGain%3A.7071%7D%5D%2Creverb%3A33%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A48%2Cchord%3A%22simultaneous%22%2Cspectrum%3A%5B0%2C0%2C14%2C14%2C14%2C29%2C29%2C43%2C43%2C86%2C43%2C43%2C43%2C29%2C86%2C29%2C29%2C29%2C86%2C29%2C14%2C14%2C14%2C14%2C0%2C0%2C0%2C0%2C0%2C0%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22twang%202%22%7D%5D%7D%7D%2C%7Bname%3A%22woodblock%22%2CmidiProgram%3A115%2CgeneralMidi%3A!0%2CisNoise%3A!0%2CmidiSubharmonicOctaves%3A-2.5%2Csettings%3A%7Btype%3A%22spectrum%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A14%2CfilterEnvelope%3A%22twang%201%22%2Cspectrum%3A%5B0%2C14%2C29%2C43%2C43%2C57%2C86%2C86%2C71%2C57%2C57%2C43%2C43%2C57%2C86%2C86%2C43%2C43%2C71%2C57%2C57%2C57%2C57%2C57%2C86%2C86%2C71%2C71%2C71%2C71%5D%7D%7D%2C%7Bname%3A%22taiko%20drum%22%2CmidiProgram%3A116%2CgeneralMidi%3A!0%2CisNoise%3A!0%2CmidiSubharmonicOctaves%3A-.5%2Csettings%3A%7Btype%3A%22spectrum%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A29%2CfilterEnvelope%3A%22twang%201%22%2Cspectrum%3A%5B71%2C100%2C100%2C43%2C43%2C71%2C71%2C43%2C43%2C43%2C43%2C43%2C43%2C57%2C29%2C57%2C43%2C57%2C43%2C43%2C57%2C43%2C43%2C43%2C43%2C43%2C43%2C43%2C43%2C43%5D%7D%7D%2C%7Bname%3A%22melodic%20drum%22%2CmidiProgram%3A117%2CgeneralMidi%3A!0%2CisNoise%3A!0%2CmidiSubharmonicOctaves%3A-1.5%2Csettings%3A%7Btype%3A%22spectrum%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A43%2CfilterEnvelope%3A%22twang%201%22%2Cspectrum%3A%5B100%2C71%2C71%2C57%2C57%2C43%2C43%2C71%2C43%2C43%2C43%2C57%2C43%2C43%2C57%2C43%2C43%2C43%2C43%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%5D%7D%7D%2C%7Bname%3A%22drum%20synth%22%2CmidiProgram%3A118%2CgeneralMidi%3A!0%2CisNoise%3A!0%2CmidiSubharmonicOctaves%3A-2%2Csettings%3A%7Btype%3A%22spectrum%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A4e3%2CfilterResonance%3A43%2CfilterEnvelope%3A%22decay%201%22%2Cspectrum%3A%5B100%2C86%2C71%2C57%2C43%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%2C29%5D%7D%7D%2C%7Bname%3A%22tom-tom%22%2CmidiProgram%3A116%2CisNoise%3A!0%2CmidiSubharmonicOctaves%3A-1%2Csettings%3A%7Btype%3A%22spectrum%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22twang%201%22%2Cspectrum%3A%5B100%2C29%2C14%2C0%2C0%2C86%2C14%2C43%2C29%2C86%2C29%2C14%2C29%2C57%2C43%2C43%2C43%2C43%2C57%2C43%2C43%2C43%2C29%2C57%2C43%2C43%2C43%2C43%2C43%2C43%5D%7D%7D%2C%7Bname%3A%22metal%20pipe%22%2CmidiProgram%3A117%2CisNoise%3A!0%2CmidiSubharmonicOctaves%3A-1.5%2Csettings%3A%7Btype%3A%22spectrum%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A8e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22twang%202%22%2Cspectrum%3A%5B29%2C43%2C86%2C43%2C43%2C43%2C43%2C43%2C100%2C29%2C14%2C14%2C100%2C14%2C14%2C0%2C0%2C0%2C0%2C0%2C14%2C29%2C29%2C14%2C0%2C0%2C14%2C29%2C0%2C0%5D%7D%7D%2C%7Bname%3A%22synth%20kick%22%2CmidiProgram%3A47%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-6%2Cchord%3A%22simultaneous%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2Coperators%3A%5B%7Bfrequency%3A%228%C3%97%22%2Camplitude%3A15%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22operatorFrequency%22%2Cenvelope%3A%22twang%201%22%2Cindex%3A0%7D%2C%7Btarget%3A%22noteVolume%22%2Cenvelope%3A%22twang%202%22%7D%5D%7D%7D%5D)%7D%2C%7Bname%3A%22Novelty%20Presets%22%2Cpresets%3AS(%5B%7Bname%3A%22guitar%20fret%20noise%22%2CmidiProgram%3A120%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22spectrum%22%2CeqFilter%3A%5B%7Btype%3A%22high-pass%22%2CcutoffHz%3A1e3%2ClinearGain%3A.1768%7D%5D%2Ceffects%3A%5B%22note%20filter%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A6727.17%2ClinearGain%3A5.6569%7D%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0125%2CfadeOutTicks%3A-3%2Cchord%3A%22simultaneous%22%2Cspectrum%3A%5B0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C14%2C0%2C0%2C0%2C29%2C14%2C0%2C0%2C43%2C0%2C43%2C0%2C71%2C43%2C0%2C57%2C0%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22flare%201%22%7D%2C%7Btarget%3A%22noteVolume%22%2Cenvelope%3A%22twang%202%22%7D%5D%7D%7D%2C%7Bname%3A%22fifth%20saw%20lead%22%2CmidiProgram%3A86%2CgeneralMidi%3A!0%2CmidiSubharmonicOctaves%3A1%2Csettings%3A%7Btype%3A%22chip%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22chorus%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A2828.43%2ClinearGain%3A1.4142%7D%5D%2Cchorus%3A67%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A48%2Cchord%3A%22simultaneous%22%2Cwave%3A%22sawtooth%22%2Cunison%3A%22fifth%22%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22twang%203%22%7D%5D%7D%7D%2C%7Bname%3A%22fifth%20swell%22%2CmidiProgram%3A86%2CmidiSubharmonicOctaves%3A1%2Csettings%3A%7Btype%3A%22chip%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22chorus%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A2e3%2ClinearGain%3A2%7D%5D%2Cchorus%3A100%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0125%2CfadeOutTicks%3A72%2Cchord%3A%22simultaneous%22%2Cwave%3A%22sawtooth%22%2Cunison%3A%22fifth%22%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22swell%203%22%7D%5D%7D%7D%2C%7Bname%3A%22soundtrack%22%2CmidiProgram%3A97%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22chip%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22chorus%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A2378.41%2ClinearGain%3A.5%7D%5D%2Cchorus%3A67%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0413%2CfadeOutTicks%3A72%2Cchord%3A%22simultaneous%22%2Cwave%3A%22sawtooth%22%2Cunison%3A%22fifth%22%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22flare%203%22%7D%5D%7D%7D%2C%7Bname%3A%22reverse%20cymbal%22%2CmidiProgram%3A119%2CgeneralMidi%3A!0%2CisNoise%3A!0%2CmidiSubharmonicOctaves%3A-3%2Csettings%3A%7Btype%3A%22spectrum%22%2Ceffects%3A%22none%22%2Ctransition%3A%22soft%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A4e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22swell%203%22%2Cspectrum%3A%5B29%2C57%2C57%2C29%2C57%2C57%2C29%2C29%2C43%2C29%2C29%2C43%2C29%2C29%2C57%2C57%2C14%2C57%2C14%2C57%2C71%2C71%2C57%2C86%2C57%2C100%2C86%2C86%2C86%2C86%5D%7D%7D%2C%7Bname%3A%22seashore%22%2CmidiProgram%3A122%2CgeneralMidi%3A!0%2CisNoise%3A!0%2CmidiSubharmonicOctaves%3A-3%2Csettings%3A%7Btype%3A%22spectrum%22%2Ctransition%3A%22soft%20fade%22%2Ceffects%3A%22reverb%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2828%2CfilterResonance%3A0%2CfilterEnvelope%3A%22swell%203%22%2Cspectrum%3A%5B14%2C14%2C29%2C29%2C43%2C43%2C43%2C57%2C57%2C57%2C57%2C57%2C57%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C57%5D%7D%7D%2C%7Bname%3A%22bird%20tweet%22%2CmidiProgram%3A123%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22harmonics%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22chord%20type%22%2C%22vibrato%22%2C%22reverb%22%5D%2Cchord%3A%22strum%22%2Cvibrato%3A%22heavy%22%2Creverb%3A67%2CfadeInSeconds%3A.0575%2CfadeOutTicks%3A-6%2Charmonics%3A%5B0%2C0%2C0%2C100%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%5D%2Cunison%3A%22hum%22%2Cenvelopes%3A%5B%7Btarget%3A%22noteVolume%22%2Cenvelope%3A%22decay%201%22%7D%5D%7D%7D%2C%7Bname%3A%22telephone%20ring%22%2CmidiProgram%3A124%2CgeneralMidi%3A!0%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22note%20filter%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A5656.85%2ClinearGain%3A1%7D%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0125%2CfadeOutTicks%3A-3%2Cchord%3A%22arpeggio%22%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2Coperators%3A%5B%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A12%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A4%7D%2C%7Bfrequency%3A%2220%C3%97%22%2Camplitude%3A1%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22tremolo4%22%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22tremolo1%22%2Cindex%3A1%7D%5D%7D%7D%2C%7Bname%3A%22helicopter%22%2CmidiProgram%3A125%2CgeneralMidi%3A!0%2CisNoise%3A!0%2CmidiSubharmonicOctaves%3A-.5%2Csettings%3A%7Btype%3A%22spectrum%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22seamless%22%2Cchord%3A%22arpeggio%22%2CfilterCutoffHz%3A1414%2CfilterResonance%3A14%2CfilterEnvelope%3A%22tremolo4%22%2Cspectrum%3A%5B14%2C43%2C43%2C57%2C57%2C57%2C71%2C71%2C71%2C71%2C86%2C86%2C86%2C86%2C86%2C86%2C86%2C86%2C86%2C86%2C86%2C71%2C71%2C71%2C71%2C71%2C71%2C71%2C57%2C57%5D%7D%7D%2C%7Bname%3A%22applause%22%2CmidiProgram%3A126%2CgeneralMidi%3A!0%2CisNoise%3A!0%2CmidiSubharmonicOctaves%3A-3%2Csettings%3A%7Btype%3A%22spectrum%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22soft%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22swell%203%22%2Cspectrum%3A%5B14%2C14%2C29%2C29%2C29%2C43%2C43%2C57%2C71%2C71%2C86%2C86%2C86%2C71%2C71%2C57%2C57%2C57%2C71%2C86%2C86%2C86%2C86%2C86%2C71%2C71%2C57%2C57%2C57%2C57%5D%7D%7D%2C%7Bname%3A%22gunshot%22%2CmidiProgram%3A127%2CgeneralMidi%3A!0%2CisNoise%3A!0%2CmidiSubharmonicOctaves%3A-2%2Csettings%3A%7Btype%3A%22spectrum%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22strum%22%2CfilterCutoffHz%3A1414%2CfilterResonance%3A29%2CfilterEnvelope%3A%22twang%201%22%2Cspectrum%3A%5B14%2C29%2C43%2C43%2C57%2C57%2C57%2C71%2C71%2C71%2C86%2C86%2C86%2C86%2C86%2C86%2C86%2C86%2C86%2C86%2C86%2C71%2C71%2C71%2C71%2C57%2C57%2C57%2C57%2C43%5D%7D%7D%2C%7Bname%3A%22scoot%22%2CmidiProgram%3A92%2Csettings%3A%7Btype%3A%22chip%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22note%20filter%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A707.11%2ClinearGain%3A4%7D%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0125%2CfadeOutTicks%3A-3%2Cchord%3A%22simultaneous%22%2Cwave%3A%22double%20saw%22%2Cunison%3A%22shimmer%22%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22flare%201%22%7D%5D%7D%7D%2C%7Bname%3A%22buzz%20saw%22%2CmidiProgram%3A30%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A9513.66%2ClinearGain%3A.5%7D%5D%2Ceffects%3A%5B%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0263%2CfadeOutTicks%3A-3%2Cchord%3A%22custom%20interval%22%2Calgorithm%3A%221%E2%86%902%E2%86%903%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A4%2Coperators%3A%5B%7Bfrequency%3A%225%C3%97%22%2Camplitude%3A13%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A10%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A6%7D%2C%7Bfrequency%3A%2211%C3%97%22%2Camplitude%3A12%7D%5D%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22mosquito%22%2CmidiProgram%3A93%2Csettings%3A%7Btype%3A%22PWM%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A2828.43%2ClinearGain%3A2%7D%5D%2Ceffects%3A%5B%22vibrato%22%5D%2Cvibrato%3A%22shaky%22%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0575%2CfadeOutTicks%3A-6%2Cchord%3A%22simultaneous%22%2CpulseWidth%3A4.41942%2Cenvelopes%3A%5B%7Btarget%3A%22pulseWidth%22%2Cenvelope%3A%22tremolo6%22%7D%5D%7D%7D%2C%7Bname%3A%22breathing%22%2CmidiProgram%3A126%2CisNoise%3A!0%2CmidiSubharmonicOctaves%3A-1%2Csettings%3A%7Btype%3A%22spectrum%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22hard%20fade%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A14%2CfilterEnvelope%3A%22swell%202%22%2Cspectrum%3A%5B14%2C14%2C14%2C29%2C29%2C29%2C29%2C29%2C43%2C29%2C29%2C43%2C43%2C43%2C29%2C29%2C71%2C43%2C86%2C86%2C57%2C100%2C86%2C86%2C86%2C86%2C71%2C86%2C71%2C57%5D%7D%7D%2C%7Bname%3A%22klaxon%20synth%22%2CmidiProgram%3A125%2CisNoise%3A!0%2CmidiSubharmonicOctaves%3A-1%2Csettings%3A%7Btype%3A%22noise%22%2Ceffects%3A%22reverb%22%2Ctransition%3A%22slide%22%2Cchord%3A%22harmony%22%2CfilterCutoffHz%3A2e3%2CfilterResonance%3A86%2CfilterEnvelope%3A%22steady%22%2Cwave%3A%22buzz%22%7D%7D%2C%7Bname%3A%22theremin%22%2CmidiProgram%3A40%2Csettings%3A%7Btype%3A%22harmonics%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A8e3%2ClinearGain%3A.7071%7D%5D%2Ceffects%3A%5B%22vibrato%22%2C%22reverb%22%5D%2Cvibrato%3A%22heavy%22%2Creverb%3A33%2Ctransition%3A%22slide%20in%20pattern%22%2CfadeInSeconds%3A.0263%2CfadeOutTicks%3A-6%2Cchord%3A%22simultaneous%22%2Charmonics%3A%5B100%2C71%2C57%2C43%2C29%2C29%2C14%2C14%2C14%2C14%2C14%2C14%2C14%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%5D%2Cunison%3A%22none%22%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22sonar%20ping%22%2CmidiProgram%3A121%2Csettings%3A%7Btype%3A%22spectrum%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22reverb%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A1681.79%2ClinearGain%3A.5%7D%5D%2Creverb%3A33%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A.0125%2CfadeOutTicks%3A72%2Cchord%3A%22simultaneous%22%2Cspectrum%3A%5B100%2C43%2C29%2C29%2C14%2C14%2C14%2C14%2C14%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22twang%202%22%7D%5D%7D%7D%5D)%7D%2C%7Bname%3A%22UltraBox%20Presets%22%2Cpresets%3AS(%5B%7Bname%3A%22nes%20white%22%2CmidiProgram%3A116%2CgeneralMidi%3A!0%2CisNoise%3A!0%2Csettings%3A%7Btype%3A%22noise%22%2CeqFilter%3A%5B%5D%2CeqFilterType%3A!1%2CeqSimpleCut%3A8%2CeqSimplePeak%3A0%2CeqSubFilters1%3A%5B%5D%2Ceffects%3A%5B%22panning%22%5D%2Cpan%3A0%2CpanDelay%3A10%2CfadeInSeconds%3A0%2CfadeOutTicks%3A0%2Cwave%3A%221-bit%20white%22%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22nes%20ping%22%2CmidiProgram%3A116%2CgeneralMidi%3A!0%2CisNoise%3A!0%2Csettings%3A%7Btype%3A%22noise%22%2CeqFilter%3A%5B%5D%2CeqFilterType%3A!1%2CeqSimpleCut%3A8%2CeqSimplePeak%3A0%2CeqSubFilters1%3A%5B%5D%2Ceffects%3A%5B%22panning%22%5D%2Cpan%3A0%2CpanDelay%3A10%2CfadeInSeconds%3A0%2CfadeOutTicks%3A0%2Cwave%3A%221-bit%20metallic%22%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22distorted%20pulse%20vocal%22%2CgeneralMidi%3A!1%2Csettings%3A%7Btype%3A%22chip%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A19027.31%2ClinearGain%3A.0884%7D%5D%2CeqFilterType%3A!1%2CeqSimpleCut%3A10%2CeqSimplePeak%3A0%2CeqSubFilters0%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A19027.31%2ClinearGain%3A.0884%7D%5D%2Ceffects%3A%5B%22panning%22%2C%22transition%20type%22%2C%22pitch%20shift%22%2C%22vibrato%22%2C%22note%20filter%22%2C%22bitcrusher%22%2C%22echo%22%2C%22reverb%22%5D%2Ctransition%3A%22normal%22%2CclicklessTransition%3A!1%2CpitchShiftSemitones%3A0%2Cvibrato%3A%22delayed%22%2CvibratoDepth%3A.3%2CvibratoDelay%3A18.5%2CvibratoSpeed%3A10%2CvibratoType%3A0%2CnoteFilterType%3A!1%2CnoteSimpleCut%3A10%2CnoteSimplePeak%3A0%2CnoteFilter%3A%5B%7Btype%3A%22high-pass%22%2CcutoffHz%3A840.9%2ClinearGain%3A11.3137%7D%2C%7Btype%3A%22low-pass%22%2CcutoffHz%3A297.3%2ClinearGain%3A8%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A500%2ClinearGain%3A11.3137%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A62.5%2ClinearGain%3A1.4142%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A176.78%2ClinearGain%3A11.3137%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A250%2ClinearGain%3A11.3137%7D%5D%2CnoteSubFilters0%3A%5B%7Btype%3A%22high-pass%22%2CcutoffHz%3A840.9%2ClinearGain%3A11.3137%7D%2C%7Btype%3A%22low-pass%22%2CcutoffHz%3A297.3%2ClinearGain%3A8%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A500%2ClinearGain%3A11.3137%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A62.5%2ClinearGain%3A1.4142%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A176.78%2ClinearGain%3A11.3137%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A250%2ClinearGain%3A11.3137%7D%5D%2CbitcrusherOctave%3A6.5%2CbitcrusherQuantization%3A71%2Cpan%3A0%2CpanDelay%3A10%2CechoSustain%3A14%2CechoDelayBeats%3A.167%2Creverb%3A0%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Cwave%3A%221%2F8%20pulse%22%2Cunison%3A%22none%22%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22dubsteb%20bwah%22%2CgeneralMidi%3A!1%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A19027.31%2ClinearGain%3A.7071%7D%5D%2CeqFilterType%3A!0%2CeqSimpleCut%3A10%2CeqSimplePeak%3A0%2CeqSubFilters1%3A%5B%5D%2Ceffects%3A%5B%22panning%22%2C%22transition%20type%22%2C%22chord%20type%22%5D%2Ctransition%3A%22interrupt%22%2CclicklessTransition%3A!1%2Cchord%3A%22custom%20interval%22%2CfastTwoNoteArp%3A!1%2CarpeggioSpeed%3A12%2Cpan%3A0%2CpanDelay%3A10%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-1%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A10%2Coperators%3A%5B%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A15%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A15%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A11%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A13%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteVolume%22%2Cenvelope%3A%22note%20size%22%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22swell%202%22%2Cindex%3A1%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22punch%22%2Cindex%3A2%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22note%20size%22%2Cindex%3A3%7D%5D%7D%7D%2C%7Bname%3A%22FM%20cool%20bass%22%2CgeneralMidi%3A!1%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A6727.17%2ClinearGain%3A1%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A88.39%2ClinearGain%3A1%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A1e3%2ClinearGain%3A.7071%7D%5D%2CeqFilterType%3A!1%2CeqSimpleCut%3A10%2CeqSimplePeak%3A0%2CeqSubFilters0%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A6727.17%2ClinearGain%3A1%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A88.39%2ClinearGain%3A1%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A1e3%2ClinearGain%3A.7071%7D%5D%2Ceffects%3A%5B%22panning%22%2C%22transition%20type%22%2C%22note%20filter%22%2C%22reverb%22%5D%2Ctransition%3A%22interrupt%22%2CclicklessTransition%3A!1%2CnoteFilterType%3A!0%2CnoteSimpleCut%3A9%2CnoteSimplePeak%3A2%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A7231.23%2ClinearGain%3A1%7D%5D%2CnoteSubFilters1%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A7231.23%2ClinearGain%3A1%7D%5D%2Cpan%3A0%2CpanDelay%3A10%2Creverb%3A0%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-1%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%86%904)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2Coperators%3A%5B%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A15%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A8%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A7%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%2213%C3%97%22%2Camplitude%3A11%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22punch%22%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22twang%202%22%2Cindex%3A1%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22twang%203%22%2Cindex%3A2%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22twang%202%22%2Cindex%3A3%7D%5D%7D%7D%2C%7Bname%3A%22FM%20funky%20bass%22%2CgeneralMidi%3A!1%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A9513.66%2ClinearGain%3A.1768%7D%5D%2CeqFilterType%3A!0%2CeqSimpleCut%3A5%2CeqSimplePeak%3A0%2CeqSubFilters1%3A%5B%5D%2Ceffects%3A%5B%22panning%22%2C%22transition%20type%22%2C%22reverb%22%5D%2Ctransition%3A%22normal%22%2CclicklessTransition%3A!1%2Cpan%3A0%2CpanDelay%3A10%2Creverb%3A0%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A8%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22noteVolume%22%2Cenvelope%3A%22punch%22%7D%2C%7Btarget%3A%22noteVolume%22%2Cenvelope%3A%22note%20size%22%7D%5D%7D%7D%2C%7Bname%3A%22talking%20bass%22%2CgeneralMidi%3A!1%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22chord%20type%22%5D%2Cchord%3A%22custom%20interval%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Calgorithm%3A%221%E2%86%90(2%E2%80%823)%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A15%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A15%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A8%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A5%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A12%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22note%20size%22%2Cindex%3A2%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22note%20size%22%2Cindex%3A3%7D%2C%7Btarget%3A%22feedbackAmplitude%22%2Cenvelope%3A%22note%20size%22%7D%5D%7D%7D%2C%7Bname%3A%22synth%20marimba%22%2CgeneralMidi%3A!1%2Csettings%3A%7Btype%3A%22Picked%20String%22%2CeqFilter%3A%5B%7Btype%3A%22high-pass%22%2CcutoffHz%3A176.78%2ClinearGain%3A1%7D%2C%7Btype%3A%22peak%22%2CcutoffHz%3A4e3%2ClinearGain%3A.5%7D%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22echo%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A6727.17%2ClinearGain%3A1.4142%7D%5D%2CechoSustain%3A71%2CechoDelayBeats%3A.5%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-1%2Charmonics%3A%5B86%2C100%2C29%2C29%2C0%2C0%2C0%2C100%2C0%2C0%2C0%2C86%2C29%2C0%2C14%2C100%2C0%2C0%2C0%2C0%2C0%2C14%2C0%2C0%2C14%2C0%2C0%2C86%5D%2Cunison%3A%22fifth%22%2CstringSustain%3A7%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22punch%22%7D%5D%7D%7D%2C%7Bname%3A%22italian%20accordian%22%2CgeneralMidi%3A!1%2Csettings%3A%7Btype%3A%22custom%20chip%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A6e3%2ClinearGain%3A.5%7D%5D%2CeqFilterType%3A!0%2CeqSimpleCut%3A8%2CeqSimplePeak%3A1%2CeqSubFilters1%3A%5B%5D%2Ceffects%3A%5B%22panning%22%2C%22chorus%22%2C%22reverb%22%5D%2Cpan%3A0%2CpanDelay%3A10%2Cchorus%3A71%2Creverb%3A45%2CfadeInSeconds%3A.0263%2CfadeOutTicks%3A-3%2Cwave%3A%22square%22%2Cunison%3A%22honky%20tonk%22%2CcustomChipWave%3A%7B0%3A-24%2C1%3A-24%2C2%3A-24%2C3%3A-24%2C4%3A-24%2C5%3A-24%2C6%3A-24%2C7%3A-24%2C8%3A-24%2C9%3A-24%2C10%3A-24%2C11%3A-24%2C12%3A-24%2C13%3A-24%2C14%3A-24%2C15%3A-24%2C16%3A24%2C17%3A24%2C18%3A24%2C19%3A24%2C20%3A24%2C21%3A24%2C22%3A24%2C23%3A24%2C24%3A-24%2C25%3A-24%2C26%3A-24%2C27%3A-24%2C28%3A-24%2C29%3A-24%2C30%3A-24%2C31%3A-24%2C32%3A-24%2C33%3A-24%2C34%3A-24%2C35%3A-24%2C36%3A-24%2C37%3A-24%2C38%3A-24%2C39%3A-24%2C40%3A24%2C41%3A24%2C42%3A24%2C43%3A24%2C44%3A24%2C45%3A24%2C46%3A24%2C47%3A24%2C48%3A-24%2C49%3A-24%2C50%3A-24%2C51%3A-24%2C52%3A-24%2C53%3A-24%2C54%3A-24%2C55%3A-24%2C56%3A-24%2C57%3A-24%2C58%3A-24%2C59%3A-24%2C60%3A-24%2C61%3A-24%2C62%3A-24%2C63%3A-24%7D%2CcustomChipWaveIntegral%3A%7B0%3A0%2C1%3A0%2C2%3A0%2C3%3A0%2C4%3A0%2C5%3A0%2C6%3A0%2C7%3A0%2C8%3A0%2C9%3A0%2C10%3A0%2C11%3A0%2C12%3A0%2C13%3A0%2C14%3A0%2C15%3A0%2C16%3A0%2C17%3A0%2C18%3A0%2C19%3A0%2C20%3A0%2C21%3A0%2C22%3A0%2C23%3A0%2C24%3A0%2C25%3A0%2C26%3A0%2C27%3A0%2C28%3A0%2C29%3A0%2C30%3A0%2C31%3A0%2C32%3A0%2C33%3A0%2C34%3A0%2C35%3A0%2C36%3A0%2C37%3A0%2C38%3A0%2C39%3A0%2C40%3A0%2C41%3A0%2C42%3A0%2C43%3A0%2C44%3A0%2C45%3A0%2C46%3A0%2C47%3A0%2C48%3A0%2C49%3A0%2C50%3A0%2C51%3A0%2C52%3A0%2C53%3A0%2C54%3A0%2C55%3A0%2C56%3A0%2C57%3A0%2C58%3A0%2C59%3A0%2C60%3A0%2C61%3A0%2C62%3A0%2C63%3A0%2C64%3A0%7D%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22chip%20supersaw%22%2CgeneralMidi%3A!1%2Csettings%3A%7Btype%3A%22custom%20chip%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A19027.31%2ClinearGain%3A.7071%7D%5D%2CeqFilterType%3A!0%2CeqSimpleCut%3A10%2CeqSimplePeak%3A0%2CeqSubFilters1%3A%5B%5D%2Ceffects%3A%5B%22panning%22%2C%22transition%20type%22%2C%22vibrato%22%2C%22chorus%22%2C%22reverb%22%5D%2Ctransition%3A%22interrupt%22%2CclicklessTransition%3A!1%2Cvibrato%3A%22delayed%22%2CvibratoDepth%3A.3%2CvibratoDelay%3A18.5%2CvibratoSpeed%3A10%2CvibratoType%3A0%2Cpan%3A0%2CpanDelay%3A10%2Cchorus%3A29%2Creverb%3A29%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-1%2Cwave%3A%22square%22%2Cunison%3A%22dissonant%22%2CcustomChipWave%3A%7B0%3A22%2C1%3A22%2C2%3A16%2C3%3A6%2C4%3A0%2C5%3A-3%2C6%3A-8%2C7%3A-10%2C8%3A-13%2C9%3A-16%2C10%3A-19%2C11%3A-19%2C12%3A-20%2C13%3A-22%2C14%3A-22%2C15%3A-24%2C16%3A-24%2C17%3A-24%2C18%3A-24%2C19%3A-24%2C20%3A-24%2C21%3A-24%2C22%3A-24%2C23%3A-24%2C24%3A-24%2C25%3A-24%2C26%3A-24%2C27%3A-24%2C28%3A-24%2C29%3A-24%2C30%3A-24%2C31%3A24%2C32%3A24%2C33%3A16%2C34%3A9%2C35%3A6%2C36%3A4%2C37%3A2%2C38%3A0%2C39%3A-1%2C40%3A-3%2C41%3A-4%2C42%3A-4%2C43%3A-6%2C44%3A-6%2C45%3A-6%2C46%3A-6%2C47%3A-5%2C48%3A-5%2C49%3A-4%2C50%3A-2%2C51%3A-2%2C52%3A1%2C53%3A4%2C54%3A6%2C55%3A8%2C56%3A10%2C57%3A12%2C58%3A14%2C59%3A16%2C60%3A18%2C61%3A19%2C62%3A22%2C63%3A24%7D%2CcustomChipWaveIntegral%3A%7B0%3A0%2C1%3A0%2C2%3A0%2C3%3A0%2C4%3A0%2C5%3A0%2C6%3A0%2C7%3A0%2C8%3A0%2C9%3A0%2C10%3A0%2C11%3A0%2C12%3A0%2C13%3A0%2C14%3A0%2C15%3A0%2C16%3A0%2C17%3A0%2C18%3A0%2C19%3A0%2C20%3A0%2C21%3A0%2C22%3A0%2C23%3A0%2C24%3A0%2C25%3A0%2C26%3A0%2C27%3A0%2C28%3A0%2C29%3A0%2C30%3A0%2C31%3A0%2C32%3A0%2C33%3A0%2C34%3A0%2C35%3A0%2C36%3A0%2C37%3A0%2C38%3A0%2C39%3A0%2C40%3A0%2C41%3A0%2C42%3A0%2C43%3A0%2C44%3A0%2C45%3A0%2C46%3A0%2C47%3A0%2C48%3A0%2C49%3A0%2C50%3A0%2C51%3A0%2C52%3A0%2C53%3A0%2C54%3A0%2C55%3A0%2C56%3A0%2C57%3A0%2C58%3A0%2C59%3A0%2C60%3A0%2C61%3A0%2C62%3A0%2C63%3A0%2C64%3A0%7D%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22fm%20supersaw%22%2CgeneralMidi%3A!1%2Csettings%3A%7Btype%3A%22FM6op%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A19027.31%2ClinearGain%3A1.4142%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A148.65%2ClinearGain%3A.7071%7D%5D%2CeqFilterType%3A!1%2CeqSimpleCut%3A10%2CeqSimplePeak%3A0%2CeqSubFilters0%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A19027.31%2ClinearGain%3A1.4142%7D%2C%7Btype%3A%22high-pass%22%2CcutoffHz%3A148.65%2ClinearGain%3A.7071%7D%5D%2Ceffects%3A%5B%22panning%22%2C%22transition%20type%22%2C%22pitch%20shift%22%2C%22note%20filter%22%2C%22chorus%22%2C%22reverb%22%5D%2Ctransition%3A%22continue%22%2CclicklessTransition%3A!1%2CpitchShiftSemitones%3A0%2CnoteFilterType%3A!1%2CnoteSimpleCut%3A10%2CnoteSimplePeak%3A0%2CnoteFilter%3A%5B%5D%2CnoteSubFilters0%3A%5B%5D%2CnoteSubFilters1%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A4756.83%2ClinearGain%3A1%7D%5D%2Cpan%3A0%2CpanDelay%3A10%2Cchorus%3A71%2Creverb%3A0%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-1%2Calgorithm%3A%221%E2%80%832%E2%80%833%E2%80%834%E2%80%835%E2%80%836%22%2CfeedbackType%3A%221%E2%9F%B2%22%2CfeedbackAmplitude%3A0%2Coperators%3A%5B%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A13%2Cwaveform%3A%22sawtooth%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%22~1%C3%97%22%2Camplitude%3A15%2Cwaveform%3A%22sawtooth%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%222%C3%97%22%2Camplitude%3A10%2Cwaveform%3A%22sawtooth%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%223%C3%97%22%2Camplitude%3A7%2Cwaveform%3A%22sawtooth%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A9%2Cwaveform%3A%22sawtooth%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%228%C3%97%22%2Camplitude%3A6%2Cwaveform%3A%22sawtooth%22%2CpulseWidth%3A5%7D%5D%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22wind%22%2CgeneralMidi%3A!1%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A250.03%2ClinearGain%3A11.3137%7D%5D%2CeqFilterType%3A!0%2CeqSimpleCut%3A0%2CeqSimplePeak%3A7%2CenvelopeSpeed%3A12%2CdiscreteEnvelope%3A!1%2CeqSubFilters1%3A%5B%5D%2Ceffects%3A%5B%22transition%20type%22%2C%22reverb%22%5D%2Ctransition%3A%22continue%22%2CclicklessTransition%3A!1%2CpanDelay%3A10%2Creverb%3A0%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-1%2Calgorithm%3A%221%E2%86%90(2%E2%80%823%E2%80%824)%22%2CfeedbackType%3A%221%E2%86%923%E2%80%832%E2%86%924%22%2CfeedbackAmplitude%3A15%2Coperators%3A%5B%7Bfrequency%3A%2216%C3%97%22%2Camplitude%3A15%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%2216%C3%97%22%2Camplitude%3A0%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%2216%C3%97%22%2Camplitude%3A15%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%2216%C3%97%22%2Camplitude%3A0%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%221%C3%97%22%2Camplitude%3A0%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%5D%2Cenvelopes%3A%5B%5D%7D%7D%2C%7Bname%3A%22mrow%22%2CgeneralMidi%3A!1%2Csettings%3A%7Btype%3A%22FM%22%2CeqFilter%3A%5B%5D%2CeqFilterType%3A!1%2CeqSimpleCut%3A10%2CeqSimplePeak%3A0%2CeqSubFilters0%3A%5B%5D%2Ceffects%3A%5B%22panning%22%2C%22chord%20type%22%2C%22reverb%22%5D%2Cchord%3A%22custom%20interval%22%2CfastTwoNoteArp%3A!1%2CarpeggioSpeed%3A12%2Cpan%3A0%2CpanDelay%3A10%2Creverb%3A35%2CfadeInSeconds%3A.0263%2CfadeOutTicks%3A-3%2Calgorithm%3A%221%E2%86%903%E2%80%832%E2%86%904%22%2CfeedbackType%3A%221%E2%9F%B2%202%E2%9F%B2%203%E2%9F%B2%204%E2%9F%B2%22%2CfeedbackAmplitude%3A5%2Coperators%3A%5B%7Bfrequency%3A%224%C3%97%22%2Camplitude%3A15%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%22~2%C3%97%22%2Camplitude%3A13%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%22~2%C3%97%22%2Camplitude%3A8%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%2C%7Bfrequency%3A%22~2%C3%97%22%2Camplitude%3A9%2Cwaveform%3A%22sine%22%2CpulseWidth%3A5%7D%5D%2Cenvelopes%3A%5B%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22flare%201%22%2Cindex%3A0%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22note%20size%22%2Cindex%3A1%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22note%20size%22%2Cindex%3A2%7D%2C%7Btarget%3A%22operatorAmplitude%22%2Cenvelope%3A%22flare%203%22%2Cindex%3A3%7D%2C%7Btarget%3A%22feedbackAmplitude%22%2Cenvelope%3A%22flare%201%22%7D%5D%7D%7D%2C%7Bname%3A%22vocal%20why%22%2CgeneralMidi%3A!1%2Csettings%3A%7Btype%3A%22harmonics%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%22note%20filter%22%2C%22panning%22%2C%22reverb%22%5D%2CnoteFilter%3A%5B%7Btype%3A%22low-pass%22%2CcutoffHz%3A840.9%2ClinearGain%3A11.3137%7D%5D%2Cpan%3A0%2Creverb%3A0%2CfadeInSeconds%3A.0263%2CfadeOutTicks%3A-3%2Charmonics%3A%5B100%2C86%2C29%2C29%2C14%2C14%2C0%2C14%2C14%2C43%2C71%2C100%2C100%2C86%2C71%2C71%2C57%2C57%2C43%2C43%2C43%2C43%2C43%2C0%2C0%2C0%2C0%2C0%5D%2Cunison%3A%22octave%22%2Cenvelopes%3A%5B%7Btarget%3A%22noteFilterAllFreqs%22%2Cenvelope%3A%22note%20size%22%7D%5D%7D%7D%5D)%7D%5D)%3Bclass%20E%7Bconstructor()%7Bthis.i%3D1%2Cthis.o%3D%5Bvoid%200%5D%2Cthis.l%3D0%2Cthis.h%3D0%2Cthis.u%3D0%7DpushFront(e)%7Bthis.u%3E%3Dthis.i%26%26this.p()%2Cthis.h%3Dthis.h-1%26this.l%2Cthis.o%5Bthis.h%5D%3De%2Cthis.u%2B%2B%7DpushBack(e)%7Bthis.u%3E%3Dthis.i%26%26this.p()%2Cthis.o%5Bthis.h%2Bthis.u%26this.l%5D%3De%2Cthis.u%2B%2B%7DpopFront()%7Bif(this.u%3C%3D0)throw%20new%20Error(%22No%20elements%20left%20to%20pop.%22)%3Bconst%20e%3Dthis.o%5Bthis.h%5D%3Breturn%20this.o%5Bthis.h%5D%3Dvoid%200%2Cthis.h%3Dthis.h%2B1%26this.l%2Cthis.u--%2Ce%7DpopBack()%7Bif(this.u%3C%3D0)throw%20new%20Error(%22No%20elements%20left%20to%20pop.%22)%3Bthis.u--%3Bconst%20e%3Dthis.h%2Bthis.u%26this.l%2Ct%3Dthis.o%5Be%5D%3Breturn%20this.o%5Be%5D%3Dvoid%200%2Ct%7DpeakFront()%7Bif(this.u%3C%3D0)throw%20new%20Error(%22No%20elements%20left%20to%20pop.%22)%3Breturn%20this.o%5Bthis.h%5D%7DpeakBack()%7Bif(this.u%3C%3D0)throw%20new%20Error(%22No%20elements%20left%20to%20pop.%22)%3Breturn%20this.o%5Bthis.h%2Bthis.u-1%26this.l%5D%7Dcount()%7Breturn%20this.u%7Dset(e%2Ct)%7Bif(e%3C0%7C%7Ce%3E%3Dthis.u)throw%20new%20Error(%22Invalid%20index%22)%3Bthis.o%5Bthis.h%2Be%26this.l%5D%3Dt%7Dget(e)%7Bif(e%3C0%7C%7Ce%3E%3Dthis.u)throw%20new%20Error(%22Invalid%20index%22)%3Breturn%20this.o%5Bthis.h%2Be%26this.l%5D%7Dremove(e)%7Bif(e%3C0%7C%7Ce%3E%3Dthis.u)throw%20new%20Error(%22Invalid%20index%22)%3Bif(e%3C%3Dthis.u%3E%3E1)%7Bfor(%3Be%3E0%3B)this.set(e%2Cthis.get(e-1))%2Ce--%3Bthis.popFront()%7Delse%7Bfor(e%2B%2B%3Be%3Cthis.u%3B)this.set(e-1%2Cthis.get(e))%2Ce%2B%2B%3Bthis.popBack()%7D%7Dp()%7Bif(this.i%3E%3D1073741824)throw%20new%20Error(%22Capacity%20too%20big.%22)%3Bthis.i%3Dthis.i%3C%3C1%3Bconst%20e%3Dthis.o%2Ct%3Dnew%20Array(this.i)%2Cs%3D0%7Cthis.u%2Ci%3D0%7Cthis.h%3Bfor(let%20n%3D0%3Bn%3Cs%3Bn%2B%2B)t%5Bn%5D%3De%5Bi%2Bn%26this.l%5D%3Bfor(let%20e%3Ds%3Be%3Cthis.i%3Be%2B%2B)t%5Be%5D%3Dvoid%200%3Bthis.h%3D0%2Cthis.o%3Dt%2Cthis.l%3Dthis.i-1%7D%7Dconst%20L%3Dnew%20class%7Bconstructor()%7Bthis.activeEvents%3D%5B%5D%2Cthis.listeners%3D%7B%7D%2Cthis.activeEvents%3D%5B%5D%2Cthis.listeners%3D%7B%7D%7Draise(e%2Ct%2Cs)%7Bif(null!%3Dthis.listeners%5Be%5D)%7Bthis.activeEvents.push(e)%3Bfor(let%20i%3D0%3Bi%3Cthis.listeners%5Be%5D.length%3Bi%2B%2B)this.listeners%5Be%5D%5Bi%5D(t%2Cs)%3Bthis.activeEvents.pop()%7D%7Dlisten(e%2Ct)%7Bnull%3D%3Dthis.listeners%5Be%5D%26%26(this.listeners%5Be%5D%3D%5B%5D)%2Cthis.listeners%5Be%5D.push(t)%7Dunlisten(e%2Ct)%7Bif(null%3D%3Dthis.listeners%5Be%5D)return%3Bconst%20s%3Dthis.listeners%5Be%5D.indexOf(t)%3B-1!%3Ds%26%26this.listeners%5Be%5D.splice(s%2C1)%7DunlistenAll(e)%7Bnull!%3Dthis.listeners%5Be%5D%26%26(this.listeners%5Be%5D%3D%5B%5D)%7D%7D%3Bclass%20N%7Bconstructor()%7Bthis.a%3D%5B1%5D%2Cthis.b%3D%5B1%5D%2Cthis.order%3D0%7DlinearGain0thOrder(e)%7Bthis.b%5B0%5D%3De%2Cthis.order%3D0%7DlowPass1stOrderButterworth(e)%7Bconst%20t%3D1%2FMath.tan(.5*e)%2Cs%3D1%2Bt%3Bthis.a%5B1%5D%3D(1-t)%2Fs%2Cthis.b%5B1%5D%3Dthis.b%5B0%5D%3D1%2Fs%2Cthis.order%3D1%7DlowPass1stOrderSimplified(e)%7Bconst%20t%3D2*Math.sin(.5*e)%3Bthis.a%5B1%5D%3Dt-1%2Cthis.b%5B0%5D%3Dt%2Cthis.b%5B1%5D%3D0%2Cthis.order%3D1%7DhighPass1stOrderButterworth(e)%7Bconst%20t%3D1%2FMath.tan(.5*e)%2Cs%3D1%2Bt%3Bthis.a%5B1%5D%3D(1-t)%2Fs%2Cthis.b%5B0%5D%3Dt%2Fs%2Cthis.b%5B1%5D%3D-t%2Fs%2Cthis.order%3D1%7DhighShelf1stOrder(e%2Ct)%7Bconst%20s%3DMath.tan(.5*e)%2Ci%3DMath.sqrt(t)%2Cn%3D(s*i-1)%2F(s*i%2B1)%3Bthis.a%5B1%5D%3Dn%2F1%2Cthis.b%5B0%5D%3D(1%2Bn%2Bt*(1-n))%2F2%2Cthis.b%5B1%5D%3D(1%2Bn-t*(1-n))%2F2%2Cthis.order%3D1%7DallPass1stOrderInvertPhaseAbove(e)%7Bconst%20t%3D(Math.sin(e)-1)%2FMath.cos(e)%3Bthis.a%5B1%5D%3Dt%2Cthis.b%5B0%5D%3Dt%2Cthis.b%5B1%5D%3D1%2Cthis.order%3D1%7DallPass1stOrderFractionalDelay(e)%7Bconst%20t%3D(1-e)%2F(1%2Be)%3Bthis.a%5B1%5D%3Dt%2Cthis.b%5B0%5D%3Dt%2Cthis.b%5B1%5D%3D1%2Cthis.order%3D1%7DlowPass2ndOrderButterworth(e%2Ct)%7Bconst%20s%3DMath.sin(e)%2F(2*t)%2Ci%3DMath.cos(e)%2Cn%3D1%2Bs%3Bthis.a%5B1%5D%3D-2*i%2Fn%2Cthis.a%5B2%5D%3D(1-s)%2Fn%2Cthis.b%5B2%5D%3Dthis.b%5B0%5D%3D(1-i)%2F(2*n)%2Cthis.b%5B1%5D%3D(1-i)%2Fn%2Cthis.order%3D2%7DlowPass2ndOrderSimplified(e%2Ct)%7Bconst%20s%3D2*Math.sin(e%2F2)%2Ci%3D1-1%2F(2*t)%2Cn%3Di%2Bi%2F(1-s)%3Bthis.a%5B1%5D%3D2*s%2B(s-1)*s*n-2%2Cthis.a%5B2%5D%3D(s-1)*(s-s*n-1)%2Cthis.b%5B0%5D%3Ds*s%2Cthis.b%5B1%5D%3D0%2Cthis.b%5B2%5D%3D0%2Cthis.order%3D2%7DhighPass2ndOrderButterworth(e%2Ct)%7Bconst%20s%3DMath.sin(e)%2F(2*t)%2Ci%3DMath.cos(e)%2Cn%3D1%2Bs%3Bthis.a%5B1%5D%3D-2*i%2Fn%2Cthis.a%5B2%5D%3D(1-s)%2Fn%2Cthis.b%5B2%5D%3Dthis.b%5B0%5D%3D(1%2Bi)%2F(2*n)%2Cthis.b%5B1%5D%3D-(1%2Bi)%2Fn%2Cthis.order%3D2%7DhighShelf2ndOrder(e%2Ct%2Cs)%7Bconst%20i%3DMath.sqrt(t)%2Cn%3DMath.cos(e)%2Ca%3Di%2B1%2Cr%3Di-1%2Co%3D.5*Math.sin(e)*Math.sqrt(a%2Fi*(1%2Fs-1)%2B2)%2Cl%3D2*Math.sqrt(i)*o%2Ch%3Da-r*n%2Bl%3Bthis.a%5B1%5D%3D2*(r-a*n)%2Fh%2Cthis.a%5B2%5D%3D(a-r*n-l)%2Fh%2Cthis.b%5B0%5D%3Di*(a%2Br*n%2Bl)%2Fh%2Cthis.b%5B1%5D%3D-2*i*(r%2Ba*n)%2Fh%2Cthis.b%5B2%5D%3Di*(a%2Br*n-l)%2Fh%2Cthis.order%3D2%7Dpeak2ndOrder(e%2Ct%2Cs)%7Bconst%20i%3DMath.sqrt(t)%2Cn%3Ds*e%2F(i%3E%3D1%3Fi%3A1%2Fi)%2Ca%3DMath.tan(.5*n)%2Cr%3D1%2Ba%2Fi%3Bthis.b%5B0%5D%3D(1%2Ba*i)%2Fr%2Cthis.b%5B1%5D%3Dthis.a%5B1%5D%3D-2*Math.cos(e)%2Fr%2Cthis.b%5B2%5D%3D(1-a*i)%2Fr%2Cthis.a%5B2%5D%3D(1-a%2Fi)%2Fr%2Cthis.order%3D2%7D%7Dclass%20G%7Bconstructor()%7Bthis.real%3D0%2Cthis.imag%3D0%2Cthis.denom%3D1%7Danalyze(e%2Ct)%7Bthis.analyzeComplex(e%2CMath.cos(t)%2CMath.sin(t))%7DanalyzeComplex(e%2Ct%2Cs)%7Bconst%20i%3De.a%2Cn%3De.b%2Ca%3Dt%2Cr%3D-s%3Blet%20o%3Dn%5B0%5D%2Bn%5B1%5D*a%2Cl%3Dn%5B1%5D*r%2Ch%3D1%2Bi%5B1%5D*a%2Cu%3Di%5B1%5D*r%2Cc%3Da%2Cp%3Dr%3Bfor(let%20t%3D2%3Bt%3C%3De.order%3Bt%2B%2B)%7Bconst%20e%3Dc*r%2Bp*a%3Bc%3Dc*a-p*r%2Cp%3De%2Co%2B%3Dn%5Bt%5D*c%2Cl%2B%3Dn%5Bt%5D*p%2Ch%2B%3Di%5Bt%5D*c%2Cu%2B%3Di%5Bt%5D*p%7Dthis.denom%3Dh*h%2Bu*u%2Cthis.real%3Do*h%2Bl*u%2Cthis.imag%3Dl*h-o*u%7Dmagnitude()%7Breturn%20Math.sqrt(this.real*this.real%2Bthis.imag*this.imag)%2Fthis.denom%7Dangle()%7Breturn%20Math.atan2(this.imag%2Cthis.real)%7D%7Dclass%20V%7Bconstructor()%7Bthis.a1%3D0%2Cthis.a2%3D0%2Cthis.b0%3D1%2Cthis.b1%3D0%2Cthis.b2%3D0%2Cthis.a1Delta%3D0%2Cthis.a2Delta%3D0%2Cthis.b0Delta%3D0%2Cthis.b1Delta%3D0%2Cthis.b2Delta%3D0%2Cthis.output1%3D0%2Cthis.output2%3D0%2Cthis.useMultiplicativeInputCoefficients%3D!1%7DresetOutput()%7Bthis.output1%3D0%2Cthis.output2%3D0%7DloadCoefficientsWithGradient(e%2Ct%2Cs%2Ci)%7Bif(2!%3De.order%7C%7C2!%3Dt.order)throw%20new%20Error%3Bthis.a1%3De.a%5B1%5D%2Cthis.a2%3De.a%5B2%5D%2Cthis.b0%3De.b%5B0%5D%2Cthis.b1%3De.b%5B1%5D%2Cthis.b2%3De.b%5B2%5D%2Cthis.a1Delta%3D(t.a%5B1%5D-e.a%5B1%5D)*s%2Cthis.a2Delta%3D(t.a%5B2%5D-e.a%5B2%5D)*s%2Ci%3F(this.b0Delta%3DMath.pow(t.b%5B0%5D%2Fe.b%5B0%5D%2Cs)%2Cthis.b1Delta%3DMath.pow(t.b%5B1%5D%2Fe.b%5B1%5D%2Cs)%2Cthis.b2Delta%3DMath.pow(t.b%5B2%5D%2Fe.b%5B2%5D%2Cs))%3A(this.b0Delta%3D(t.b%5B0%5D-e.b%5B0%5D)*s%2Cthis.b1Delta%3D(t.b%5B1%5D-e.b%5B1%5D)*s%2Cthis.b2Delta%3D(t.b%5B2%5D-e.b%5B2%5D)*s)%2Cthis.useMultiplicativeInputCoefficients%3Di%7D%7Dfunction%20B(e)%7Breturn%202*Math.atan(.5*e)%7Dconst%20W%3D1e-24%3Bfunction%20%24(e%2Ct%2Cs)%7Breturn%20s%3C%3D(t-%3D1)%3Fs%3E%3De%3Fs%3Ae%3At%7Dfunction%20j(e%2Ct%2Cs)%7Bif(e%3C%3Ds%26%26s%3C%3Dt)return%20s%3Bthrow%20new%20Error(%60Value%20%24%7Bs%7D%20not%20in%20range%20%5B%24%7Be%7D%2C%20%24%7Bt%7D%5D%60)%7Dfunction%20U(e%2Ct)%7Blet%20s%3DparseFloat(e)%3Breturn%20Number.isNaN(s)%26%26(s%3Dt)%2Cs%7Dfunction%20_(e%2Ct)%7Blet%20s%3DparseInt(e)%3Breturn%20Number.isNaN(s)%26%26(s%3Dt)%2Cs%7Dfunction%20K(e%2Ct)%7Be.push(X%5Bt%3E%3E%3E30%263%5D)%2Ce.push(X%5Bt%3E%3E%3E24%2663%5D)%2Ce.push(X%5Bt%3E%3E%3E18%2663%5D)%2Ce.push(X%5Bt%3E%3E%3E12%2663%5D)%2Ce.push(X%5Bt%3E%3E%3E6%2663%5D)%2Ce.push(X%5Bt%3E%3E%3E0%2663%5D)%7Dfunction%20J(e%2Ct)%7Blet%20s%3D0%3Breturn%20s%7C%3DZ%5Be.charCodeAt(t%2B%2B)%5D%3C%3C30%2Cs%7C%3DZ%5Be.charCodeAt(t%2B%2B)%5D%3C%3C24%2Cs%7C%3DZ%5Be.charCodeAt(t%2B%2B)%5D%3C%3C18%2Cs%7C%3DZ%5Be.charCodeAt(t%2B%2B)%5D%3C%3C12%2Cs%7C%3DZ%5Be.charCodeAt(t%2B%2B)%5D%3C%3C6%2Cs%7C%3DZ%5Be.charCodeAt(t%2B%2B)%5D%3C%3C0%2Cs%7Dfunction%20Q(e%2Ct%2Cs%2Ci%2Cn%2Ca)%7Be.push(X%5Bt%5D)%2Ce.push(X%5BNumber(s%3E0)%5D)%3Blet%20r%3DMath.round(1e3*Math.abs(s))%2Co%3DMath.floor(r%2F63)%3Be.push(X%5Br%2563%5D%2CX%5Bo%2563%5D%2CX%5BMath.floor(o%2F63)%5D)%2Ce.push(X%5BNumber(i%3E0)%5D)%3Blet%20l%3DMath.round(1e3*Math.abs(i))%2Ch%3DMath.floor(l%2F63)%3Be.push(X%5Bl%2563%5D%2CX%5Bh%2563%5D%2CX%5BMath.floor(h%2F63)%5D)%2Ce.push(X%5BNumber(n%3E0)%5D)%3Blet%20u%3DMath.round(1e3*Math.abs(n))%3Be.push(X%5Bu%2563%5D%2CX%5BMath.floor(u%2F63)%5D)%2Ce.push(X%5BNumber(a%3E0)%5D)%3Blet%20c%3DMath.round(1e3*Math.abs(a))%3Be.push(X%5Bc%2563%5D%2CX%5BMath.floor(c%2F63)%5D)%7Dfunction%20Y(e)%7Blet%20t%3D%24(0%2Cu.keys.length%2Ce)%2Cs%3D0%3Breturn%2012%3D%3D%3De%3F(t%3D0%2Cs%3D1)%3A13%3D%3D%3De%3F(t%3D6%2Cs%3D-1)%3A14%3D%3D%3De%3F(t%3D0%2Cs%3D-1)%3A15%3D%3D%3De%26%26(t%3D5%2Cs%3D-1)%2C%5Bt%2Cs%5D%7Dconst%20X%3D%5B48%2C49%2C50%2C51%2C52%2C53%2C54%2C55%2C56%2C57%2C97%2C98%2C99%2C100%2C101%2C102%2C103%2C104%2C105%2C106%2C107%2C108%2C109%2C110%2C111%2C112%2C113%2C114%2C115%2C116%2C117%2C118%2C119%2C120%2C121%2C122%2C65%2C66%2C67%2C68%2C69%2C70%2C71%2C72%2C73%2C74%2C75%2C76%2C77%2C78%2C79%2C80%2C81%2C82%2C83%2C84%2C85%2C86%2C87%2C88%2C89%2C90%2C45%2C95%5D%2CZ%3D%5B0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C62%2C62%2C0%2C0%2C1%2C2%2C3%2C4%2C5%2C6%2C7%2C8%2C9%2C0%2C0%2C0%2C0%2C0%2C0%2C0%2C36%2C37%2C38%2C39%2C40%2C41%2C42%2C43%2C44%2C45%2C46%2C47%2C48%2C49%2C50%2C51%2C52%2C53%2C54%2C55%2C56%2C57%2C58%2C59%2C60%2C61%2C0%2C0%2C0%2C0%2C63%2C0%2C10%2C11%2C12%2C13%2C14%2C15%2C16%2C17%2C18%2C19%2C20%2C21%2C22%2C23%2C24%2C25%2C26%2C27%2C28%2C29%2C30%2C31%2C32%2C33%2C34%2C35%2C0%2C0%2C0%2C0%2C0%5D%3Bclass%20ee%7Bconstructor(e%2Ct%2Cs)%7Bthis.m%3D%5B%5D%2Cthis.v%3D0%3Bfor(let%20i%3Dt%3Bi%3Cs%3Bi%2B%2B)%7Bconst%20t%3DZ%5Be.charCodeAt(i)%5D%3Bthis.m.push(t%3E%3E5%261)%2Cthis.m.push(t%3E%3E4%261)%2Cthis.m.push(t%3E%3E3%261)%2Cthis.m.push(t%3E%3E2%261)%2Cthis.m.push(t%3E%3E1%261)%2Cthis.m.push(1%26t)%7D%7Dread(e)%7Blet%20t%3D0%3Bfor(%3Be%3E0%3B)t%3C%3C%3D1%2Ct%2B%3Dthis.m%5Bthis.v%2B%2B%5D%2Ce--%3Breturn%20t%7DreadLongTail(e%2Ct)%7Blet%20s%3De%2Ci%3Dt%3Bfor(%3Bthis.m%5Bthis.v%2B%2B%5D%3B)s%2B%3D1%3C%3Ci%2Ci%2B%2B%3Bfor(%3Bi%3E0%3B)i--%2Cthis.m%5Bthis.v%2B%2B%5D%26%26(s%2B%3D1%3C%3Ci)%3Breturn%20s%7DreadPartDuration()%7Breturn%20this.readLongTail(1%2C3)%7DreadLegacyPartDuration()%7Breturn%20this.readLongTail(1%2C2)%7DreadPinCount()%7Breturn%20this.readLongTail(1%2C0)%7DreadPitchInterval()%7Breturn%20this.read(1)%3F-this.readLongTail(1%2C3)%3Athis.readLongTail(1%2C3)%7D%7Dclass%20te%7Bconstructor()%7Bthis.g%3D0%2Cthis.m%3D%5B%5D%7Dclear()%7Bthis.g%3D0%7Dwrite(e%2Ct)%7Bfor(e--%3Be%3E%3D0%3B)this.m%5Bthis.g%2B%2B%5D%3Dt%3E%3E%3Ee%261%2Ce--%7DwriteLongTail(e%2Ct%2Cs)%7Bif(s%3Ce)throw%20new%20Error(%22value%20out%20of%20bounds%22)%3Bs-%3De%3Blet%20i%3Dt%3Bfor(%3Bs%3E%3D1%3C%3Ci%3B)this.m%5Bthis.g%2B%2B%5D%3D1%2Cs-%3D1%3C%3Ci%2Ci%2B%2B%3Bfor(this.m%5Bthis.g%2B%2B%5D%3D0%3Bi%3E0%3B)i--%2Cthis.m%5Bthis.g%2B%2B%5D%3Ds%3E%3E%3Ei%261%7DwritePartDuration(e)%7Bthis.writeLongTail(1%2C3%2Ce)%7DwritePinCount(e)%7Bthis.writeLongTail(1%2C0%2Ce)%7DwritePitchInterval(e)%7Be%3C0%3F(this.write(1%2C1)%2Cthis.writeLongTail(1%2C3%2C-e))%3A(this.write(1%2C0)%2Cthis.writeLongTail(1%2C3%2Ce))%7Dconcat(e)%7Bfor(let%20t%3D0%3Bt%3Ce.g%3Bt%2B%2B)this.m%5Bthis.g%2B%2B%5D%3De.m%5Bt%5D%7DencodeBase64(e)%7Bfor(let%20t%3D0%3Bt%3Cthis.g%3Bt%2B%3D6)%7Bconst%20s%3Dthis.m%5Bt%5D%3C%3C5%7Cthis.m%5Bt%2B1%5D%3C%3C4%7Cthis.m%5Bt%2B2%5D%3C%3C3%7Cthis.m%5Bt%2B3%5D%3C%3C2%7Cthis.m%5Bt%2B4%5D%3C%3C1%7Cthis.m%5Bt%2B5%5D%3Be.push(X%5Bs%5D)%7Dreturn%20e%7DlengthBase64()%7Breturn%20Math.ceil(this.g%2F6)%7D%7Dfunction%20se(e%2Ct%2Cs)%7Breturn%7Binterval%3Ae%2Ctime%3At%2Csize%3As%7D%7Dclass%20ie%7Bconstructor(e%2Ct%2Cs%2Ci%2Cn%3D!1)%7Bthis.pitches%3D%5Be%5D%2Cthis.pins%3D%5Bse(0%2C0%2Ci)%2Cse(0%2Cs-t%2Cn%3F0%3Ai)%5D%2Cthis.start%3Dt%2Cthis.end%3Ds%2Cthis.continuesLastPattern%3D!1%7DpickMainInterval()%7Blet%20e%3D0%2Ct%3D0%3Bfor(let%20s%3D1%3Bs%3Cthis.pins.length%3Bs%2B%2B)%7Bconst%20i%3Dthis.pins%5Bs-1%5D%2Cn%3Dthis.pins%5Bs%5D%3Bif(i.interval%3D%3Dn.interval)%7Bconst%20s%3Dn.time-i.time%3Be%3Cs%26%26(e%3Ds%2Ct%3Di.interval)%7D%7Dif(0%3D%3De)%7Blet%20e%3D0%3Bfor(let%20s%3D0%3Bs%3Cthis.pins.length%3Bs%2B%2B)%7Bconst%20i%3Dthis.pins%5Bs%5D%3Be%3Ci.size%26%26(e%3Di.size%2Ct%3Di.interval)%7D%7Dreturn%20t%7Dclone()%7Bconst%20e%3Dnew%20ie(-1%2Cthis.start%2Cthis.end%2C3)%3Be.pitches%3Dthis.pitches.concat()%2Ce.pins%3D%5B%5D%3Bfor(const%20t%20of%20this.pins)e.pins.push(se(t.interval%2Ct.time%2Ct.size))%3Breturn%20e.continuesLastPattern%3Dthis.continuesLastPattern%2Ce%7DgetEndPinIndex(e)%7Blet%20t%3Bfor(t%3D1%3Bt%3Cthis.pins.length-1%26%26!(this.pins%5Bt%5D.time%2Bthis.start%3Ee)%3Bt%2B%2B)%3Breturn%20t%7D%7Dclass%20ne%7Bconstructor()%7Bthis.notes%3D%5B%5D%2Cthis.instruments%3D%5B0%5D%7DcloneNotes()%7Bconst%20e%3D%5B%5D%3Bfor(const%20t%20of%20this.notes)e.push(t.clone())%3Breturn%20e%7Dreset()%7Bthis.notes.length%3D0%2Cthis.instruments%5B0%5D%3D0%2Cthis.instruments.length%3D1%7DtoJsonObject(e%2Ct%2Cs)%7Bconst%20i%3D%5B%5D%3Bfor(const%20n%20of%20this.notes)%7Blet%20a%3Dt.instruments%5Bthis.instruments%5B0%5D%5D%2Cr%3DMath.max(0%2Cu.modCount-n.pitches%5B0%5D-1)%2Co%3De.getVolumeCapForSetting(s%2Ca.modulators%5Br%5D%2Ca.modFilterTypes%5Br%5D)%3Bconst%20l%3D%5B%5D%3Bfor(const%20t%20of%20n.pins)%7Blet%20i%3Ds%3FMath.round(t.size)%3AMath.round(100*t.size%2Fo)%3Bl.push(%7Btick%3A(t.time%2Bn.start)*u.rhythms%5Be.rhythm%5D.stepsPerBeat%2Fu.partsPerBeat%2CpitchBend%3At.interval%2Cvolume%3Ai%2CforMod%3As%7D)%7Dconst%20h%3D%7Bpitches%3An.pitches%2Cpoints%3Al%7D%3B0%3D%3Dn.start%26%26(h.continuesLastPattern%3Dn.continuesLastPattern)%2Ci.push(h)%7Dconst%20n%3D%7Bnotes%3Ai%7D%3Breturn%20e.patternInstruments%26%26(n.instruments%3Dthis.instruments.map((e%3D%3Ee%2B1)))%2Cn%7DfromJsonObject(e%2Ct%2Cs%2Ci%2Cn%2Ca%2Cr%3D%22auto%22)%7Bconst%20o%3Dr.toLowerCase()%3Bif(t.patternInstruments)if(Array.isArray(e.instruments))%7Bconst%20i%3De.instruments%2Cn%3D%24(u.instrumentCountMin%2Ct.getMaxInstrumentsPerPatternForChannel(s)%2B1%2Ci.length)%3Bfor(let%20e%3D0%3Be%3Cn%3Be%2B%2B)this.instruments%5Be%5D%3D%24(0%2Cs.instruments.length%2C(0%7Ci%5Be%5D)-1)%3Bthis.instruments.length%3Dn%7Delse%20this.instruments%5B0%5D%3D%24(0%2Cs.instruments.length%2C(0%7Ce.instrument)-1)%2Cthis.instruments.length%3D1%3Bif(e.notes%26%26e.notes.length%3E0)%7Bconst%20r%3DMath.min(t.beatsPerBar*u.partsPerBeat*(a%3Fu.modCount%3A1)%2Ce.notes.length%3E%3E%3E0)%3Bfor(let%20l%3D0%3Bl%3Ce.notes.length%26%26!(l%3E%3Dr)%3Bl%2B%2B)%7Bconst%20r%3De.notes%5Bl%5D%3Bif(!(r%26%26r.pitches%26%26r.pitches.length%3E%3D1%26%26r.points%26%26r.points.length%3E%3D2))continue%3Bconst%20h%3Dnew%20ie(0%2C0%2C0%2C0)%3Bh.pitches%3D%5B%5D%2Ch.pins%3D%5B%5D%3Bfor(let%20e%3D0%3Be%3Cr.pitches.length%3Be%2B%2B)%7Bconst%20t%3D0%7Cr.pitches%5Be%5D%3Bif(-1%3D%3Dh.pitches.indexOf(t)%26%26(h.pitches.push(t)%2Ch.pitches.length%3E%3Du.maxChordSize))break%7Dif(h.pitches.length%3C1)continue%3Blet%20c%3D0%2Cp%3Ds.instruments%5Bthis.instruments%5B0%5D%5D%2Cf%3DMath.max(0%2Cu.modCount-h.pitches%5B0%5D-1)%3Bfor(let%20e%3D0%3Be%3Cr.points.length%3Be%2B%2B)%7Bconst%20s%3Dr.points%5Be%5D%3Bif(null%3D%3Ds%7C%7Cnull%3D%3Ds.tick)continue%3Bconst%20n%3Dnull%3D%3Ds.pitchBend%3F0%3A0%7Cs.pitchBend%2Co%3DMath.round(%2Bs.tick*u.partsPerBeat%2Fi)%3Blet%20l%2Cm%3Dt.getVolumeCapForSetting(a%2Cp.modulators%5Bf%5D%2Cp.modFilterTypes%5Bf%5D)%3Bl%3Dnull%3D%3Ds.volume%3Fm%3Anull%3D%3Ds.forMod%3FMath.max(0%2CMath.min(m%2CMath.round((0%7Cs.volume)*m%2F100)))%3A(0%7Cs.forMod)%3E0%3FMath.round(0%7Cs.volume)%3AMath.max(0%2CMath.min(m%2CMath.round((0%7Cs.volume)*m%2F100)))%2Co%3Et.beatsPerBar*u.partsPerBeat%7C%7C(0%3D%3Dh.pins.length%26%26(h.start%3Do%2Cc%3Dn)%2Ch.pins.push(se(n-c%2Co-h.start%2Cl)))%7Dif(h.pins.length%3C2)continue%3Bh.end%3Dh.pins%5Bh.pins.length-1%5D.time%2Bh.start%3Bconst%20m%3Dn%3Fu.drumCount-1%3Au.maxPitch%3Blet%20d%3Dm%2Cy%3D0%3Bfor(let%20e%3D0%3Be%3Ch.pitches.length%3Be%2B%2B)h.pitches%5Be%5D%2B%3Dc%2C(h.pitches%5Be%5D%3C0%7C%7Ch.pitches%5Be%5D%3Em)%26%26(h.pitches.splice(e%2C1)%2Ce--)%2Ch.pitches%5Be%5D%3Cd%26%26(d%3Dh.pitches%5Be%5D)%2Ch.pitches%5Be%5D%3Ey%26%26(y%3Dh.pitches%5Be%5D)%3Bif(!(h.pitches.length%3C1))%7Bfor(let%20e%3D0%3Be%3Ch.pins.length%3Be%2B%2B)%7Bconst%20t%3Dh.pins%5Be%5D%3Bt.interval%2Bd%3C0%26%26(t.interval%3D-d)%2Ct.interval%2By%3Em%26%26(t.interval%3Dm-y)%2Ce%3E%3D2%26%26t.interval%3D%3Dh.pins%5Be-1%5D.interval%26%26t.interval%3D%3Dh.pins%5Be-2%5D.interval%26%26t.size%3D%3Dh.pins%5Be-1%5D.size%26%26t.size%3D%3Dh.pins%5Be-2%5D.size%26%26(h.pins.splice(e-1%2C1)%2Ce--)%7Dif(0%3D%3Dh.start%3Fh.continuesLastPattern%3D!0%3D%3D%3Dr.continuesLastPattern%3Ah.continuesLastPattern%3D!1%2C%22ultrabox%22!%3Do%26%26p.modulators%5Bf%5D%3D%3Du.modulators.dictionary.tempo.index)for(const%20e%20of%20h.pins)%7Bconst%20t%3D30%2Cs%3D1%2Ci%3De.size%2Bt%3Be.size%3Di-s%7Dthis.notes.push(h)%7D%7D%7D%7D%7Dclass%20ae%7Bconstructor(e)%7Bthis.frequency%3D4%2Cthis.amplitude%3D0%2Cthis.waveform%3D0%2Cthis.pulseWidth%3D.5%2Cthis.reset(e)%7Dreset(e)%7Bthis.frequency%3D4%2Cthis.amplitude%3De%3C%3D1%3Fu.operatorAmplitudeMax%3A0%2Cthis.waveform%3D0%2Cthis.pulseWidth%3D5%7Dcopy(e)%7Bthis.frequency%3De.frequency%2Cthis.amplitude%3De.amplitude%2Cthis.waveform%3De.waveform%2Cthis.pulseWidth%3De.pulseWidth%7D%7Dclass%20re%7Bconstructor()%7Bthis.name%3D%22%22%2Cthis.carrierCount%3D0%2Cthis.modulatedBy%3D%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%2Cthis.associatedCarrier%3D%5B%5D%2Cthis.fromPreset(1)%7Dset(e%2Ct)%7Bthis.reset()%2Cthis.carrierCount%3De%3Bfor(let%20s%3D0%3Bs%3Cthis.modulatedBy.length%3Bs%2B%2B)%7Bthis.modulatedBy%5Bs%5D%3Dt%5Bs%5D%2Cs%3Ce%26%26(this.associatedCarrier%5Bs%5D%3Ds%2B1)%2Cthis.name%2B%3Ds%2B1%3Bfor(let%20i%3D0%3Bi%3Ct%5Bs%5D.length%3Bi%2B%2B)this.name%2B%3Dt%5Bs%5D%5Bi%5D%2Ct%5Bs%5D%5Bi%5D%3Ee-1%26%26(this.associatedCarrier%5Bt%5Bs%5D%5Bi%5D-1%5D%3Ds%2B1)%2Cthis.name%2B%3D%22%2C%22%3Bthis.name%2B%3Ds%3Ce%3F%22%7C%22%3A%22.%22%7D%7Dreset()%7Bthis.name%3D%22%22%2Cthis.carrierCount%3D1%2Cthis.modulatedBy%3D%5B%5B2%2C3%2C4%2C5%2C6%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%2Cthis.associatedCarrier%3D%5B1%2C1%2C1%2C1%2C1%2C1%5D%7Dcopy(e)%7Bthis.name%3De.name%2Cthis.carrierCount%3De.carrierCount%2Cthis.modulatedBy%3De.modulatedBy%2Cthis.associatedCarrier%3De.associatedCarrier%7DfromPreset(e)%7Bthis.reset()%3Blet%20t%3Du.algorithms6Op%5Be%5D%3Bthis.name%3Dt.name%2Cthis.carrierCount%3Dt.carrierCount%3Bfor(var%20s%3D0%3Bs%3Ct.modulatedBy.length%3Bs%2B%2B)this.modulatedBy%5Bs%5D%3DArray.from(t.modulatedBy%5Bs%5D)%2Cthis.associatedCarrier%5Bs%5D%3Dt.associatedCarrier%5Bs%5D%7D%7Dclass%20oe%7Bconstructor()%7Bthis.name%3D%22%22%2Cthis.indices%3D%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%2Cthis.fromPreset(1)%7Dset(e)%7Bthis.reset()%3Bfor(let%20t%3D0%3Bt%3Cthis.indices.length%3Bt%2B%2B)%7Bthis.indices%5Bt%5D%3De%5Bt%5D%3Bfor(let%20s%3D0%3Bs%3Ce%5Bt%5D.length%3Bs%2B%2B)this.name%2B%3De%5Bt%5D%5Bs%5D%2Cthis.name%2B%3D%22%2C%22%3Bthis.name%2B%3D%22.%22%7D%7Dreset()%7Bthis.reset%2Cthis.name%3D%22%22%2Cthis.indices%3D%5B%5B1%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7Dcopy(e)%7Bthis.name%3De.name%2Cthis.indices%3De.indices%7DfromPreset(e)%7Bthis.reset()%3Blet%20t%3Du.feedbacks6Op%5Be%5D%3Bfor(var%20s%3D0%3Bs%3Ct.indices.length%3Bs%2B%2B)%7Bthis.indices%5Bs%5D%3DArray.from(t.indices%5Bs%5D)%3Bfor(let%20e%3D0%3Be%3Ct.indices%5Bs%5D.length%3Be%2B%2B)this.name%2B%3Dt.indices%5Bs%5D%5Be%5D%2Cthis.name%2B%3D%22%2C%22%3Bthis.name%2B%3D%22.%22%7D%7D%7Dclass%20le%7Bconstructor(e)%7Bthis.spectrum%3D%5B%5D%2Cthis.hash%3D-1%2Cthis.reset(e)%7Dreset(e)%7Bfor(let%20t%3D0%3Bt%3Cu.spectrumControlPoints%3Bt%2B%2B)if(e)this.spectrum%5Bt%5D%3DMath.round(u.spectrumMax*(1%2FMath.sqrt(1%2Bt%2F3)))%3Belse%7Bconst%20e%3D0%3D%3Dt%7C%7C7%3D%3Dt%7C%7C11%3D%3Dt%7C%7C14%3D%3Dt%7C%7C16%3D%3Dt%7C%7C18%3D%3Dt%7C%7C21%3D%3Dt%7C%7C23%3D%3Dt%7C%7Ct%3E%3D25%3Bthis.spectrum%5Bt%5D%3De%3FMath.max(0%2CMath.round(u.spectrumMax*(1-t%2F30)))%3A0%7Dthis.markCustomWaveDirty()%7DmarkCustomWaveDirty()%7Bconst%20e%3Dxe.fittingPowerOfTwo(u.spectrumMax%2B2)-1%3Blet%20t%3D0%3Bfor(const%20s%20of%20this.spectrum)t%3Dt*e%2Bs%3E%3E%3E0%3Bthis.hash%3Dt%7D%7Dclass%20he%7Bconstructor()%7Bthis.wave%3Dnull%2Cthis.S%3D-1%7DgetCustomWave(e%2Ct)%7Bif(this.S%3D%3De.hash)return%20this.wave%3Bthis.S%3De.hash%3Bconst%20s%3Du.spectrumNoiseLength%3Bnull!%3Dthis.wave%26%26this.wave.length%3D%3Ds%2B1%7C%7C(this.wave%3Dnew%20Float32Array(s%2B1))%3Bconst%20i%3Dthis.wave%3Bfor(let%20e%3D0%3Be%3Cs%3Be%2B%2B)i%5Be%5D%3D0%3Bconst%20n%3D%5B0%2C1%2F7%2CMath.log2(5%2F4)%2C3%2F7%2CMath.log2(1.5)%2C5%2F7%2C6%2F7%5D%3Bfunction%20a(e)%7Breturn%20t%2BMath.floor(e%2Fu.spectrumControlPointsPerOctave)%2Bn%5B(e%2Bu.spectrumControlPointsPerOctave)%25u.spectrumControlPointsPerOctave%5D%7Dlet%20r%3D1%3Bfor(let%20t%3D0%3Bt%3Cu.spectrumControlPoints%2B1%3Bt%2B%2B)%7Bconst%20n%3Dt%3C%3D0%3F0%3Ae.spectrum%5Bt-1%5D%2Co%3Dt%3E%3Du.spectrumControlPoints%3Fe.spectrum%5Bu.spectrumControlPoints-1%5D%3Ae.spectrum%5Bt%5D%2Cl%3Da(t-1)%3Blet%20h%3Da(t)%3Bt%3E%3Du.spectrumControlPoints%26%26(h%3D14%2B.25*(h-14))%2C0%3D%3Dn%26%260%3D%3Do%7C%7C(r%2B%3D.02*y(i%2Cs%2Cl%2Ch%2Cn%2Fu.spectrumMax%2Co%2Fu.spectrumMax%2C-.5))%7Dreturn%20e.spectrum%5Bu.spectrumControlPoints-1%5D%3E0%26%26(r%2B%3D.02*y(i%2Cs%2C14%2B.25*(a(u.spectrumControlPoints)-14)%2C14%2Ce.spectrum%5Bu.spectrumControlPoints-1%5D%2Fu.spectrumMax%2C0%2C-.5))%2CH(i%2Cs)%2CA(i%2C5%2F(Math.sqrt(s)*Math.pow(r%2C.75)))%2Ci%5Bs%5D%3Di%5B0%5D%2Ci%7D%7Dclass%20ue%7Bconstructor()%7Bthis.harmonics%3D%5B%5D%2Cthis.hash%3D-1%2Cthis.reset()%7Dreset()%7Bfor(let%20e%3D0%3Be%3Cu.harmonicsControlPoints%3Be%2B%2B)this.harmonics%5Be%5D%3D0%3Bthis.harmonics%5B0%5D%3Du.harmonicsMax%2Cthis.harmonics%5B3%5D%3Du.harmonicsMax%2Cthis.harmonics%5B6%5D%3Du.harmonicsMax%2Cthis.markCustomWaveDirty()%7DmarkCustomWaveDirty()%7Bconst%20e%3Dxe.fittingPowerOfTwo(u.harmonicsMax%2B2)-1%3Blet%20t%3D0%3Bfor(const%20s%20of%20this.harmonics)t%3Dt*e%2Bs%3E%3E%3E0%3Bthis.hash%3Dt%7D%7Dclass%20ce%7Bconstructor()%7Bthis.wave%3Dnull%2Cthis.S%3D-1%7DgetCustomWave(e%2Ct)%7Bif(this.S%3D%3De.hash%26%26this.M%3D%3Dt)return%20this.wave%3Bthis.S%3De.hash%2Cthis.M%3Dt%3Bconst%20s%3D7%3D%3Dt%3Fu.harmonicsRenderedForPickedString%3Au.harmonicsRendered%2Ci%3Du.harmonicsWavelength%2Cn%3Dd(0%2Cnull%2Cnull)%3Bnull!%3Dthis.wave%26%26this.wave.length%3D%3Di%2B1%7C%7C(this.wave%3Dnew%20Float32Array(i%2B1))%3Bconst%20a%3Dthis.wave%3Bfor(let%20e%3D0%3Be%3Ci%3Be%2B%2B)a%5Be%5D%3D0%3Blet%20r%3D1%3Bfor(let%20t%3D0%3Bt%3Cs%3Bt%2B%2B)%7Bconst%20o%3Dt%2B1%3Blet%20l%3Dt%3Cu.harmonicsControlPoints%3Fe.harmonics%5Bt%5D%3Ae.harmonics%5Bu.harmonicsControlPoints-1%5D%3Bt%3E%3Du.harmonicsControlPoints%26%26(l*%3D1-(t-u.harmonicsControlPoints)%2F(s-u.harmonicsControlPoints))%3Bconst%20h%3Dl%2Fu.harmonicsMax%3Blet%20c%3DMath.pow(2%2Cl-u.harmonicsMax%2B1)*Math.sqrt(h)%3Bt%3Cu.harmonicsControlPoints%26%26(r%2B%3Dc)%2Cc*%3DMath.pow(o%2C-.25)%2Cc*%3Dn%5Bt%2B589%5D%2Ca%5Bi-o%5D%3Dc%7DH(a%2Ci)%3Bconst%20o%3D1%2FMath.pow(r%2C.7)%3Bfor(let%20e%3D0%3Be%3Ca.length%3Be%2B%2B)a%5Be%5D*%3Do%3Breturn%20function(e)%7Blet%20t%3D0%3Bfor(let%20s%3D0%3Bs%3Ce.length%3Bs%2B%2B)%7Bconst%20i%3De%5Bs%5D%3Be%5Bs%5D%3Dt%2Ct%2B%3Di%7D%7D(a)%2Ca%5Bi%5D%3Da%5B0%5D%2Ca%7D%7Dclass%20pe%7Bconstructor()%7Bthis.freq%3D0%2Cthis.gain%3Du.filterGainCenter%2Cthis.type%3D2%7Dset(e%2Ct)%7Bthis.freq%3De%2Cthis.gain%3Dt%7DgetHz()%7Breturn%20pe.getHzFromSettingValue(this.freq)%7Dstatic%20getHzFromSettingValue(e)%7Breturn%20u.filterFreqReferenceHz*Math.pow(2%2C(e-u.filterFreqReferenceSetting)*u.filterFreqStep)%7Dstatic%20getSettingValueFromHz(e)%7Breturn%20Math.log2(e%2Fu.filterFreqReferenceHz)%2Fu.filterFreqStep%2Bu.filterFreqReferenceSetting%7Dstatic%20getRoundedSettingValueFromHz(e)%7Breturn%20Math.max(0%2CMath.min(u.filterFreqRange-1%2CMath.round(pe.getSettingValueFromHz(e))))%7DgetLinearGain(e%3D1)%7Bconst%20t%3D(this.gain-u.filterGainCenter)*u.filterGainStep%2Cs%3D2%3D%3Dthis.type%3F0%3A-.5%2Ci%3Ds%2B(t-s)*e%3Breturn%20Math.pow(2%2Ci)%7Dstatic%20getRoundedSettingValueFromLinearGain(e)%7Breturn%20Math.max(0%2CMath.min(u.filterGainRange-1%2CMath.round(Math.log2(e)%2Fu.filterGainStep%2Bu.filterGainCenter)))%7DtoCoefficients(e%2Ct%2Cs%3D1%2Ci%3D1)%7Bconst%20n%3D2*Math.PI*Math.max(u.filterFreqMinHz%2CMath.min(u.filterFreqMaxHz%2Cs*this.getHz()))%2Ft%2Ca%3Dthis.getLinearGain(i)%3Bswitch(this.type)%7Bcase%200%3Ae.lowPass2ndOrderButterworth(n%2Ca)%3Bbreak%3Bcase%201%3Ae.highPass2ndOrderButterworth(n%2Ca)%3Bbreak%3Bcase%202%3Ae.peak2ndOrder(n%2Ca%2C1)%3Bbreak%3Bdefault%3Athrow%20new%20Error%7D%7DgetVolumeCompensationMult()%7Bconst%20e%3D(this.freq-u.filterFreqReferenceSetting)*u.filterFreqStep%2Ct%3D(this.gain-u.filterGainCenter)*u.filterGainStep%3Bswitch(this.type)%7Bcase%200%3Aconst%20s%3DMath.pow(2%2Ce)*u.filterFreqReferenceHz%2F8e3%2Ci%3D(Math.sqrt(1%2B4*s)-1)%2F2%2Cn%3DMath.log2(i)%3Breturn%20Math.pow(.5%2C.2*Math.max(0%2Ct%2B1)%2BMath.min(0%2CMath.max(-3%2C.595*n%2B.35*Math.min(0%2Ct%2B1))))%3Bcase%201%3Areturn%20Math.pow(.5%2C.125*Math.max(0%2Ct%2B1)%2BMath.min(0%2C.3*(-e-Math.log2(u.filterFreqReferenceHz%2F125))%2B.2*Math.min(0%2Ct%2B1)))%3Bcase%202%3Aconst%20a%3De%2BMath.log2(u.filterFreqReferenceHz%2F2e3)%2Cr%3DMath.pow(1%2F(1%2BMath.pow(a%2F3%2C2))%2C2)%3Breturn%20Math.pow(.5%2C.125*Math.max(0%2Ct)%2B.1*r*Math.min(0%2Ct))%3Bdefault%3Athrow%20new%20Error%7D%7D%7Dclass%20fe%7Bconstructor()%7Bthis.controlPoints%3D%5B%5D%2Cthis.controlPointCount%3D0%2Cthis.reset()%7Dreset()%7Bthis.controlPointCount%3D0%7DaddPoint(e%2Ct%2Cs)%7Blet%20i%3Bthis.controlPoints.length%3C%3Dthis.controlPointCount%3F(i%3Dnew%20pe%2Cthis.controlPoints%5Bthis.controlPointCount%5D%3Di)%3Ai%3Dthis.controlPoints%5Bthis.controlPointCount%5D%2Cthis.controlPointCount%2B%2B%2Ci.type%3De%2Ci.set(t%2Cs)%7DtoJsonObject()%7Bconst%20e%3D%5B%5D%3Bfor(let%20t%3D0%3Bt%3Cthis.controlPointCount%3Bt%2B%2B)%7Bconst%20s%3Dthis.controlPoints%5Bt%5D%3Be.push(%7Btype%3Au.filterTypeNames%5Bs.type%5D%2CcutoffHz%3AMath.round(100*s.getHz())%2F100%2ClinearGain%3AMath.round(1e4*s.getLinearGain())%2F1e4%7D)%7Dreturn%20e%7DfromJsonObject(e)%7Bif(this.controlPoints.length%3D0%2Ce)for(const%20t%20of%20e)%7Bconst%20e%3Dnew%20pe%3Be.type%3Du.filterTypeNames.indexOf(t.type)%2C-1%3D%3De.type%26%26(e.type%3D2)%2Cnull!%3Dt.cutoffHz%3Fe.freq%3Dpe.getRoundedSettingValueFromHz(t.cutoffHz)%3Ae.freq%3D0%2Cnull!%3Dt.linearGain%3Fe.gain%3Dpe.getRoundedSettingValueFromLinearGain(t.linearGain)%3Ae.gain%3Du.filterGainCenter%2Cthis.controlPoints.push(e)%7Dthis.controlPointCount%3Dthis.controlPoints.length%7Dstatic%20filtersCanMorph(e%2Ct)%7Bif(e.controlPointCount!%3Dt.controlPointCount)return!1%3Bfor(let%20s%3D0%3Bs%3Ce.controlPointCount%3Bs%2B%2B)if(e.controlPoints%5Bs%5D.type!%3Dt.controlPoints%5Bs%5D.type)return!1%3Breturn!0%7Dstatic%20lerpFilters(e%2Ct%2Cs)%7Blet%20i%3Dnew%20fe%3Bif(null%3D%3De)return%20e%3Bif(null%3D%3Dt)return%20t%3Bif(s%3DMath.max(0%2CMath.min(1%2Cs))%2Cthis.filtersCanMorph(e%2Ct))%7Bfor(let%20n%3D0%3Bn%3Ce.controlPointCount%3Bn%2B%2B)i.controlPoints%5Bn%5D%3Dnew%20pe%2Ci.controlPoints%5Bn%5D.type%3De.controlPoints%5Bn%5D.type%2Ci.controlPoints%5Bn%5D.freq%3De.controlPoints%5Bn%5D.freq%2B(t.controlPoints%5Bn%5D.freq-e.controlPoints%5Bn%5D.freq)*s%2Ci.controlPoints%5Bn%5D.gain%3De.controlPoints%5Bn%5D.gain%2B(t.controlPoints%5Bn%5D.gain-e.controlPoints%5Bn%5D.gain)*s%3Breturn%20i.controlPointCount%3De.controlPointCount%2Ci%7Dreturn%20s%3E%3D1%3Ft%3Ae%7DconvertLegacySettings(e%2Ct%2Cs)%7Bthis.reset()%3Bconst%20i%3D2*Math.asin(.475)%2Cn%3Dt%3E1%2Ca%3D0%3D%3Dt%2Cr%3D10%3D%3De%2Co%3D3%3D%3Ds.type%7C%7C4%3D%3Ds.type%7C%7C8%3D%3Ds.type%7C%7C0%3D%3Ds.type%2Cl%3D48e3%2Ch%3D8e3*Math.pow(2%2C.5*(e-10))%2Cu%3DMath.min(i%2C2*Math.PI*h%2Fl)%3Bif(1%3D%3Ds.type%26%26!n%26%26r)%3Belse%20if(a)%7Bconst%20e%3D3.5%2Ct%3Du*Math.pow(2%2Ce)%2Cs%3Dl*(t%2F(1%2Bt%2FMath.PI))%2F(2*Math.PI)%2Ci%3Dpe.getRoundedSettingValueFromHz(s)%2Cn%3Dpe.getHzFromSettingValue(i)%2Ca%3D2*Math.PI*n%2Fl%2Cr%3Dnew%20N%3Br.lowPass1stOrderSimplified(u)%3Bconst%20h%3Dnew%20G%3Bh.analyze(r%2Ca)%3Bconst%20c%3Dh.magnitude()%3Blet%20p%3DMath.log2(c)%3Bp%3D.82*(p%2Be)-e%2Co%26%26(p%3DMath.min(p%2C-1))%3Bconst%20f%3DMath.pow(2%2Cp)%2Cm%3Dpe.getRoundedSettingValueFromLinearGain(f)%3Bthis.addPoint(0%2Ci%2Cm)%7Delse%7Bconst%20e%3D.5%2F(1-.95*Math.sqrt(Math.max(0%2Ct-1)%2F6))%2Cs%3D.5%2Fe%2Ci%3Du%2B(u*(u%2F(2*Math.PI*8e3%2Fl)*Math.pow(s%2C.9)%2B1)-u)*s%3Blet%20a%3Ba%3Do%3Fl*Math.min(i%2Cu*Math.pow(2%2C.25))%2F(2*Math.PI)%3Al*i%2F(2*Math.PI)%3Bconst%20r%3Dpe.getRoundedSettingValueFromHz(a)%3Blet%20h%3Bif(o)h%3De%3Belse%7Bconst%20t%3Dnew%20N%3Bt.lowPass2ndOrderSimplified(u%2Ce)%3Bconst%20s%3Dnew%20G%3Bs.analyze(t%2Ci)%2Ch%3Ds.magnitude()%7Dn%7C%7C(h%3DMath.min(h%2CMath.sqrt(.5)))%3Bconst%20c%3Dpe.getRoundedSettingValueFromLinearGain(h)%3Bthis.addPoint(0%2Cr%2Cc)%7Dthis.controlPoints.length%3Dthis.controlPointCount%7DconvertLegacySettingsForSynth(e%2Ct%2Cs%3D!1)%7Bthis.reset()%3Bconst%20i%3D2*Math.asin(.475)%2Cn%3D0%3D%3Dt%26%26s%2Ca%3D48e3%2Cr%3D8e3*Math.pow(2%2C.5*(e-10))%2Co%3DMath.min(i%2C2*Math.PI*r%2Fa)%3Bif(n)%7Bconst%20e%3D3.5%2Ct%3Do*Math.pow(2%2Ce)%2Cs%3Da*(t%2F(1%2Bt%2FMath.PI))%2F(2*Math.PI)%2Ci%3Dpe.getRoundedSettingValueFromHz(s)%2Cn%3Dpe.getHzFromSettingValue(i)%2Cr%3D2*Math.PI*n%2Fa%2Cl%3Dnew%20N%3Bl.lowPass1stOrderSimplified(o)%3Bconst%20h%3Dnew%20G%3Bh.analyze(l%2Cr)%3Bconst%20u%3Dh.magnitude()%3Blet%20c%3DMath.log2(u)%3Bc%3D.82*(c%2Be)-e%3Bconst%20p%3DMath.pow(2%2Cc)%2Cf%3Dpe.getRoundedSettingValueFromLinearGain(p)%3Bthis.addPoint(0%2Ci%2Cf)%7Delse%7Bconst%20e%3D.5%2F(1-.95*Math.sqrt(Math.max(0%2Ct-1)%2F6))%2Cs%3D.5%2Fe%2Ci%3Do%2B(o*(o%2F(2*Math.PI*8e3%2Fa)*Math.pow(s%2C.9)%2B1)-o)*s%3Blet%20n%3Bn%3Da*i%2F(2*Math.PI)%3Bconst%20r%3Dpe.getSettingValueFromHz(n)%3Blet%20l%3Bconst%20h%3Dnew%20N%3Bh.lowPass2ndOrderSimplified(o%2Ce)%3Bconst%20u%3Dnew%20G%3Bu.analyze(h%2Ci)%2Cl%3Du.magnitude()%3Bconst%20c%3Dpe.getRoundedSettingValueFromLinearGain(l)%3Bthis.addPoint(0%2Cr%2Cc)%7D%7D%7Dclass%20me%7Bconstructor()%7Bthis.target%3D0%2Cthis.index%3D0%2Cthis.envelope%3D0%2Cthis.reset()%7Dreset()%7Bthis.target%3D0%2Cthis.index%3D0%2Cthis.envelope%3D0%7DtoJsonObject()%7Bconst%20e%3D%7Btarget%3Au.instrumentAutomationTargets%5Bthis.target%5D.name%2Cenvelope%3Au.envelopes%5Bthis.envelope%5D.name%7D%3Breturn%20u.instrumentAutomationTargets%5Bthis.target%5D.maxCount%3E1%26%26(e.index%3Dthis.index)%2Ce%7DfromJsonObject(e)%7Bthis.reset()%3Blet%20t%3Du.instrumentAutomationTargets.dictionary%5Be.target%5D%3Bnull%3D%3Dt%26%26(t%3Du.instrumentAutomationTargets.dictionary.noteVolume)%2Cthis.target%3Dt.index%3Blet%20s%3Du.envelopes.dictionary%5Be.envelope%5D%3Bnull%3D%3Ds%26%26(s%3Du.envelopes.dictionary.none)%2Cthis.envelope%3Ds.index%2Cnull!%3De.index%3Fthis.index%3D%24(0%2Cu.instrumentAutomationTargets%5Bthis.target%5D.maxCount%2C0%7Ce.index)%3Athis.index%3D0%7D%7Dclass%20de%7Bconstructor(e%2Ct)%7Bif(this.type%3D0%2Cthis.preset%3D0%2Cthis.chipWave%3D2%2Cthis.isUsingAdvancedLoopControls%3D!1%2Cthis.chipWaveLoopStart%3D0%2Cthis.chipWaveLoopEnd%3Du.rawRawChipWaves%5Bthis.chipWave%5D.samples.length-1%2Cthis.chipWaveLoopMode%3D0%2Cthis.chipWavePlayBackwards%3D!1%2Cthis.chipWaveStartOffset%3D0%2Cthis.chipNoise%3D1%2Cthis.eqFilter%3Dnew%20fe%2Cthis.eqFilterType%3D!1%2Cthis.eqFilterSimpleCut%3Du.filterSimpleCutRange-1%2Cthis.eqFilterSimplePeak%3D0%2Cthis.noteFilter%3Dnew%20fe%2Cthis.noteFilterType%3D!1%2Cthis.noteFilterSimpleCut%3Du.filterSimpleCutRange-1%2Cthis.noteFilterSimplePeak%3D0%2Cthis.eqSubFilters%3D%5B%5D%2Cthis.noteSubFilters%3D%5B%5D%2Cthis.envelopes%3D%5B%5D%2Cthis.fadeIn%3D0%2Cthis.fadeOut%3Du.fadeOutNeutral%2Cthis.envelopeCount%3D0%2Cthis.transition%3Du.transitions.dictionary.normal.index%2Cthis.pitchShift%3D0%2Cthis.detune%3D0%2Cthis.vibrato%3D0%2Cthis.interval%3D0%2Cthis.vibratoDepth%3D0%2Cthis.vibratoSpeed%3D10%2Cthis.vibratoDelay%3D0%2Cthis.vibratoType%3D0%2Cthis.envelopeSpeed%3D12%2Cthis.discreteEnvelope%3D!1%2Cthis.unison%3D0%2Cthis.unisonVoices%3D1%2Cthis.unisonSpread%3D0%2Cthis.unisonOffset%3D0%2Cthis.unisonExpression%3D1.4%2Cthis.unisonSign%3D1%2Cthis.effects%3D0%2Cthis.chord%3D1%2Cthis.volume%3D0%2Cthis.pan%3Du.panCenter%2Cthis.panDelay%3D0%2Cthis.arpeggioSpeed%3D12%2Cthis.fastTwoNoteArp%3D!1%2Cthis.legacyTieOver%3D!1%2Cthis.clicklessTransition%3D!1%2Cthis.aliases%3D!1%2Cthis.pulseWidth%3Du.pulseWidthRange%2Cthis.decimalOffset%3D0%2Cthis.supersawDynamism%3Du.supersawDynamismMax%2Cthis.supersawSpread%3DMath.ceil(u.supersawSpreadMax%2F2)%2Cthis.supersawShape%3D0%2Cthis.stringSustain%3D10%2Cthis.stringSustainType%3D1%2Cthis.distortion%3D0%2Cthis.bitcrusherFreq%3D0%2Cthis.bitcrusherQuantization%3D0%2Cthis.chorus%3D0%2Cthis.reverb%3D0%2Cthis.echoSustain%3D0%2Cthis.echoDelay%3D0%2Cthis.algorithm%3D0%2Cthis.feedbackType%3D0%2Cthis.algorithm6Op%3D1%2Cthis.feedbackType6Op%3D1%2Cthis.customAlgorithm%3Dnew%20re%2Cthis.customFeedbackType%3Dnew%20oe%2Cthis.feedbackAmplitude%3D0%2Cthis.customChipWave%3Dnew%20Float32Array(64)%2Cthis.customChipWaveIntegral%3Dnew%20Float32Array(65)%2Cthis.operators%3D%5B%5D%2Cthis.harmonicsWave%3Dnew%20ue%2Cthis.drumsetEnvelopes%3D%5B%5D%2Cthis.drumsetSpectrumWaves%3D%5B%5D%2Cthis.modChannels%3D%5B%5D%2Cthis.modInstruments%3D%5B%5D%2Cthis.modulators%3D%5B%5D%2Cthis.modFilterTypes%3D%5B%5D%2Cthis.invalidModulators%3D%5B%5D%2Ct)for(let%20e%3D0%3Be%3Cu.modCount%3Be%2B%2B)this.modChannels.push(-2)%2Cthis.modInstruments.push(0)%2Cthis.modulators.push(u.modulators.dictionary.none.index)%3Bthis.spectrumWave%3Dnew%20le(e)%3Bfor(let%20e%3D0%3Be%3Cu.operatorCount%2B2%3Be%2B%2B)this.operators%5Be%5D%3Dnew%20ae(e)%3Bfor(let%20e%3D0%3Be%3Cu.drumCount%3Be%2B%2B)this.drumsetEnvelopes%5Be%5D%3Du.envelopes.dictionary%5B%22twang%202%22%5D.index%2Cthis.drumsetSpectrumWaves%5Be%5D%3Dnew%20le(!0)%3Bfor(let%20e%3D0%3Be%3C64%3Be%2B%2B)this.customChipWave%5Be%5D%3D24-Math.floor(.75*e)%3Blet%20s%3D0%3Bfor(let%20e%3D0%3Be%3Cthis.customChipWave.length%3Be%2B%2B)s%2B%3Dthis.customChipWave%5Be%5D%3Bconst%20i%3Ds%2Fthis.customChipWave.length%3Blet%20n%3D0%2Ca%3D0%3Bfor(let%20e%3D0%3Be%3Cthis.customChipWave.length%3Be%2B%2B)n%2B%3Da%2Ca%3Dthis.customChipWave%5Be%5D-i%2Cthis.customChipWaveIntegral%5Be%5D%3Dn%3Bthis.customChipWaveIntegral%5B64%5D%3D0%7DsetTypeAndReset(e%2Ct%2Cs)%7Bs%26%26(e%3D10)%2Cthis.type%3De%2Cthis.preset%3De%2Cthis.volume%3D0%2Cthis.effects%3D4%2Cthis.chorus%3Du.chorusRange-1%2Cthis.reverb%3D0%2Cthis.echoSustain%3DMath.floor(.5*(u.echoSustainRange-1))%2Cthis.echoDelay%3DMath.floor(.5*(u.echoDelayRange-1))%2Cthis.eqFilter.reset()%2Cthis.eqFilterType%3D!1%2Cthis.eqFilterSimpleCut%3Du.filterSimpleCutRange-1%2Cthis.eqFilterSimplePeak%3D0%3Bfor(let%20e%3D0%3Be%3Cu.filterMorphCount%3Be%2B%2B)this.eqSubFilters%5Be%5D%3Dnull%2Cthis.noteSubFilters%5Be%5D%3Dnull%3Bswitch(this.noteFilter.reset()%2Cthis.noteFilterType%3D!1%2Cthis.noteFilterSimpleCut%3Du.filterSimpleCutRange-1%2Cthis.noteFilterSimplePeak%3D0%2Cthis.distortion%3DMath.floor(.75*(u.distortionRange-1))%2Cthis.bitcrusherFreq%3DMath.floor(.5*(u.bitcrusherFreqRange-1))%2Cthis.bitcrusherQuantization%3DMath.floor(.5*(u.bitcrusherQuantizationRange-1))%2Cthis.pan%3Du.panCenter%2Cthis.panDelay%3D0%2Cthis.pitchShift%3Du.pitchShiftCenter%2Cthis.detune%3Du.detuneCenter%2Cthis.vibrato%3D0%2Cthis.unison%3D0%2Cthis.stringSustain%3D10%2Cthis.stringSustainType%3Du.enableAcousticSustain%3F1%3A0%2Cthis.clicklessTransition%3D!1%2Cthis.arpeggioSpeed%3D12%2Cthis.envelopeSpeed%3D12%2Cthis.discreteEnvelope%3D!1%2Cthis.legacyTieOver%3D!1%2Cthis.aliases%3D!1%2Cthis.fadeIn%3D0%2Cthis.fadeOut%3Du.fadeOutNeutral%2Cthis.transition%3Du.transitions.dictionary.normal.index%2Cthis.envelopeCount%3D0%2Ce)%7Bcase%200%3Athis.chipWave%3D2%2Cthis.chord%3Du.chords.dictionary.arpeggio.index%2Cthis.isUsingAdvancedLoopControls%3D!1%2Cthis.chipWaveLoopStart%3D0%2Cthis.chipWaveLoopEnd%3Du.rawRawChipWaves%5Bthis.chipWave%5D.samples.length-1%2Cthis.chipWaveLoopMode%3D0%2Cthis.chipWavePlayBackwards%3D!1%2Cthis.chipWaveStartOffset%3D0%3Bbreak%3Bcase%209%3Athis.chipWave%3D2%2Cthis.chord%3Du.chords.dictionary.arpeggio.index%3Bfor(let%20e%3D0%3Be%3C64%3Be%2B%2B)this.customChipWave%5Be%5D%3D24-Math.floor(.75*e)%3Blet%20s%3D0%3Bfor(let%20e%3D0%3Be%3Cthis.customChipWave.length%3Be%2B%2B)s%2B%3Dthis.customChipWave%5Be%5D%3Bconst%20i%3Ds%2Fthis.customChipWave.length%3Blet%20n%3D0%2Ca%3D0%3Bfor(let%20e%3D0%3Be%3Cthis.customChipWave.length%3Be%2B%2B)n%2B%3Da%2Ca%3Dthis.customChipWave%5Be%5D-i%2Cthis.customChipWaveIntegral%5Be%5D%3Dn%3Bthis.customChipWaveIntegral%5B64%5D%3D0%3Bbreak%3Bcase%201%3Athis.chord%3Du.chords.dictionary%5B%22custom%20interval%22%5D.index%2Cthis.algorithm%3D0%2Cthis.feedbackType%3D0%2Cthis.feedbackAmplitude%3D0%3Bfor(let%20e%3D0%3Be%3Cthis.operators.length%3Be%2B%2B)this.operators%5Be%5D.reset(e)%3Bbreak%3Bcase%2011%3Athis.transition%3D1%2Cthis.vibrato%3D0%2Cthis.effects%3D1%2Cthis.chord%3D3%2Cthis.algorithm%3D0%2Cthis.feedbackType%3D0%2Cthis.algorithm6Op%3D1%2Cthis.feedbackType6Op%3D1%2Cthis.customAlgorithm.fromPreset(1)%2Cthis.feedbackAmplitude%3D0%3Bfor(let%20e%3D0%3Be%3Cthis.operators.length%3Be%2B%2B)this.operators%5Be%5D.reset(e)%3Bbreak%3Bcase%202%3Athis.chipNoise%3D1%2Cthis.chord%3Du.chords.dictionary.arpeggio.index%3Bbreak%3Bcase%203%3Athis.chord%3Du.chords.dictionary.simultaneous.index%2Cthis.spectrumWave.reset(t)%3Bbreak%3Bcase%204%3Athis.chord%3Du.chords.dictionary.simultaneous.index%3Bfor(let%20e%3D0%3Be%3Cu.drumCount%3Be%2B%2B)this.drumsetEnvelopes%5Be%5D%3Du.envelopes.dictionary%5B%22twang%202%22%5D.index%2Cnull%3D%3Dthis.drumsetSpectrumWaves%5Be%5D%26%26(this.drumsetSpectrumWaves%5Be%5D%3Dnew%20le(!0))%2Cthis.drumsetSpectrumWaves%5Be%5D.reset(t)%3Bbreak%3Bcase%205%3Athis.chord%3Du.chords.dictionary.simultaneous.index%2Cthis.harmonicsWave.reset()%3Bbreak%3Bcase%206%3Athis.chord%3Du.chords.dictionary.arpeggio.index%2Cthis.pulseWidth%3Du.pulseWidthRange%2Cthis.decimalOffset%3D0%3Bbreak%3Bcase%207%3Athis.chord%3Du.chords.dictionary.strum.index%2Cthis.harmonicsWave.reset()%3Bbreak%3Bcase%2010%3Athis.transition%3D0%2Cthis.vibrato%3D0%2Cthis.interval%3D0%2Cthis.effects%3D0%2Cthis.chord%3D0%2Cthis.modChannels%3D%5B%5D%2Cthis.modInstruments%3D%5B%5D%2Cthis.modulators%3D%5B%5D%3Bfor(let%20e%3D0%3Be%3Cu.modCount%3Be%2B%2B)this.modChannels.push(-2)%2Cthis.modInstruments.push(0)%2Cthis.modulators.push(u.modulators.dictionary.none.index)%2Cthis.invalidModulators%5Be%5D%3D!1%2Cthis.modFilterTypes%5Be%5D%3D0%3Bbreak%3Bcase%208%3Athis.chord%3Du.chords.dictionary.arpeggio.index%2Cthis.supersawDynamism%3Du.supersawDynamismMax%2Cthis.supersawSpread%3DMath.ceil(u.supersawSpreadMax%2F2)%2Cthis.supersawShape%3D0%2Cthis.pulseWidth%3Du.pulseWidthRange-1%2Cthis.decimalOffset%3D0%3Bbreak%3Bdefault%3Athrow%20new%20Error(%22Unrecognized%20instrument%20type%3A%20%22%2Be)%7Dthis.chord!%3Du.chords.dictionary.simultaneous.index%26%26(this.effects%3D2048%7Cthis.effects)%7DconvertLegacySettings(e%2Ct)%7Blet%20s%3De.filterCutoff%2Ci%3De.filterResonance%2Cn%3De.filterEnvelope%2Ca%3De.pulseEnvelope%2Cr%3De.operatorEnvelopes%2Co%3De.feedbackEnvelope%3Bnull%3D%3Ds%26%26(s%3D0%3D%3Dthis.type%3F6%3A10)%2Cnull%3D%3Di%26%26(i%3D0)%2Cnull%3D%3Dn%26%26(n%3Du.envelopes.dictionary.none)%2Cnull%3D%3Da%26%26(a%3Du.envelopes.dictionary%5B6%3D%3Dthis.type%3F%22twang%202%22%3A%22none%22%5D)%2Cnull%3D%3Dr%26%26(r%3D%5Bu.envelopes.dictionary%5B1%3D%3Dthis.type%3F%22note%20size%22%3A%22none%22%5D%2Cu.envelopes.dictionary.none%2Cu.envelopes.dictionary.none%2Cu.envelopes.dictionary.none%5D)%2Cnull%3D%3Do%26%26(o%3Du.envelopes.dictionary.none)%3B10%3D%3Ds%26%262%3D%3Dn.type%26%26(n%3Du.envelopes.dictionary.none)%3Bconst%20l%3Du.algorithms%5Bthis.algorithm%5D.carrierCount%3Blet%20h%3D!0%2Cc%3D!0%2Cp%3D0%3D%3Dn.type%7C%7C0%3D%3Da.type%3Bif(1%3D%3Dthis.type%7C%7C11%3D%3Dthis.type)%7Bp%3Dp%7C%7C0%3D%3Do.type%3Bfor(let%20e%3D0%3Be%3Cr.length%3Be%2B%2B)e%3Cl%3F0!%3Dr%5Be%5D.type%3Fc%3D!1%3Ah%3D!1%3Ap%3Dp%7C%7C0%3D%3Dr%5Be%5D.type%7Dthis.envelopeCount%3D0%2C1!%3Dthis.type%26%2611!%3Dthis.type%7C%7C(c%26%26p%3Fthis.addEnvelope(u.instrumentAutomationTargets.dictionary.noteVolume.index%2C0%2Cu.envelopes.dictionary%5B%22note%20size%22%5D.index)%3Ah%26%26!p%26%26this.addEnvelope(u.instrumentAutomationTargets.dictionary.none.index%2C0%2Cu.envelopes.dictionary%5B%22note%20size%22%5D.index))%2C1%3D%3Dn.type%3F(this.noteFilter.reset()%2Cthis.noteFilterType%3D!1%2Cthis.eqFilter.convertLegacySettings(s%2Ci%2Cn)%2Cthis.effects%26%3D-33%2C(t%7C%7Cthis.eqFilterType)%26%26(this.eqFilterType%3D!0%2Cthis.eqFilterSimpleCut%3Ds%2Cthis.eqFilterSimplePeak%3Di))%3A(this.eqFilter.reset()%2Cthis.eqFilterType%3D!1%2Cthis.noteFilterType%3D!1%2Cthis.noteFilter.convertLegacySettings(s%2Ci%2Cn)%2Cthis.effects%7C%3D32%2Cthis.addEnvelope(u.instrumentAutomationTargets.dictionary.noteFilterAllFreqs.index%2C0%2Cn.index)%2C(t%7C%7Cthis.noteFilterType)%26%26(this.noteFilterType%3D!0%2Cthis.noteFilterSimpleCut%3Ds%2Cthis.noteFilterSimplePeak%3Di))%2C1!%3Da.type%26%26this.addEnvelope(u.instrumentAutomationTargets.dictionary.pulseWidth.index%2C0%2Ca.index)%3Bfor(let%20e%3D0%3Be%3Cr.length%3Be%2B%2B)e%3Cl%26%26c%7C%7C1!%3Dr%5Be%5D.type%26%26this.addEnvelope(u.instrumentAutomationTargets.dictionary.operatorAmplitude.index%2Ce%2Cr%5Be%5D.index)%3B1!%3Do.type%26%26this.addEnvelope(u.instrumentAutomationTargets.dictionary.feedbackAmplitude.index%2C0%2Co.index)%7DtoJsonObject()%7Bconst%20e%3D%7Btype%3Au.instrumentTypeNames%5Bthis.type%5D%2Cvolume%3Athis.volume%2CeqFilter%3Athis.eqFilter.toJsonObject()%2CeqFilterType%3Athis.eqFilterType%2CeqSimpleCut%3Athis.eqFilterSimpleCut%2CeqSimplePeak%3Athis.eqFilterSimplePeak%2CenvelopeSpeed%3Athis.envelopeSpeed%2CdiscreteEnvelope%3Athis.discreteEnvelope%7D%3Bthis.preset!%3Dthis.type%26%26(e.preset%3Dthis.preset)%3Bfor(let%20t%3D0%3Bt%3Cu.filterMorphCount%3Bt%2B%2B)null!%3Dthis.eqSubFilters%5Bt%5D%26%26(e%5B%22eqSubFilters%22%2Bt%5D%3Dthis.eqSubFilters%5Bt%5D.toJsonObject())%3Bconst%20t%3D%5B%5D%3Bfor(const%20e%20of%20u.effectOrder)this.effects%261%3C%3Ce%26%26t.push(u.effectNames%5Be%5D)%3Bif(e.effects%3Dt%2CM(this.effects)%26%26(e.transition%3Du.transitions%5Bthis.transition%5D.name%2Ce.clicklessTransition%3Dthis.clicklessTransition)%2Cw(this.effects)%26%26(e.chord%3Dthis.getChord().name%2Ce.fastTwoNoteArp%3Dthis.fastTwoNoteArp%2Ce.arpeggioSpeed%3Dthis.arpeggioSpeed)%2Cx(this.effects)%26%26(e.pitchShiftSemitones%3Dthis.pitchShift)%2Ck(this.effects)%26%26(e.detuneCents%3Dxe.detuneToCents(this.detune))%2CF(this.effects)%26%26(-1%3D%3Dthis.vibrato%26%26(this.vibrato%3D5)%2C5!%3Dthis.vibrato%3Fe.vibrato%3Du.vibratos%5Bthis.vibrato%5D.name%3Ae.vibrato%3D%22custom%22%2Ce.vibratoDepth%3Dthis.vibratoDepth%2Ce.vibratoDelay%3Dthis.vibratoDelay%2Ce.vibratoSpeed%3Dthis.vibratoSpeed%2Ce.vibratoType%3Dthis.vibratoType)%2CP(this.effects))%7Be.noteFilterType%3Dthis.noteFilterType%2Ce.noteSimpleCut%3Dthis.noteFilterSimpleCut%2Ce.noteSimplePeak%3Dthis.noteFilterSimplePeak%2Ce.noteFilter%3Dthis.noteFilter.toJsonObject()%3Bfor(let%20t%3D0%3Bt%3Cu.filterMorphCount%3Bt%2B%2B)null!%3Dthis.noteSubFilters%5Bt%5D%26%26(e%5B%22noteSubFilters%22%2Bt%5D%3Dthis.noteSubFilters%5Bt%5D.toJsonObject())%7Dif(I(this.effects)%26%26(e.distortion%3DMath.round(100*this.distortion%2F(u.distortionRange-1))%2Ce.aliases%3Dthis.aliases)%2Cq(this.effects)%26%26(e.bitcrusherOctave%3D(u.bitcrusherFreqRange-1-this.bitcrusherFreq)*u.bitcrusherOctaveStep%2Ce.bitcrusherQuantization%3DMath.round(100*this.bitcrusherQuantization%2F(u.bitcrusherQuantizationRange-1)))%2CT(this.effects)%26%26(e.pan%3DMath.round(100*(this.pan-u.panCenter)%2Fu.panCenter)%2Ce.panDelay%3Dthis.panDelay)%2CD(this.effects)%26%26(e.chorus%3DMath.round(100*this.chorus%2F(u.chorusRange-1)))%2CO(this.effects)%26%26(e.echoSustain%3DMath.round(100*this.echoSustain%2F(u.echoSustainRange-1))%2Ce.echoDelayBeats%3DMath.round(1e3*(this.echoDelay%2B1)*u.echoDelayStepTicks%2F(u.ticksPerPart*u.partsPerBeat))%2F1e3)%2CR(this.effects)%26%26(e.reverb%3DMath.round(100*this.reverb%2F(u.reverbRange-1)))%2C4!%3Dthis.type%26%26(e.fadeInSeconds%3DMath.round(1e4*xe.fadeInSettingToSeconds(this.fadeIn))%2F1e4%2Ce.fadeOutTicks%3Dxe.fadeOutSettingToTicks(this.fadeOut))%2C5%3D%3Dthis.type%7C%7C7%3D%3Dthis.type)%7Be.harmonics%3D%5B%5D%3Bfor(let%20t%3D0%3Bt%3Cu.harmonicsControlPoints%3Bt%2B%2B)e.harmonics%5Bt%5D%3DMath.round(100*this.harmonicsWave.harmonics%5Bt%5D%2Fu.harmonicsMax)%7Dif(2%3D%3Dthis.type)e.wave%3Du.chipNoises%5Bthis.chipNoise%5D.name%2Ce.unison%3Dthis.unison%3D%3Du.unisons.length%3F%22custom%22%3Au.unisons%5Bthis.unison%5D.name%2Cthis.unison%3D%3Du.unisons.length%26%26(e.unisonVoices%3Dthis.unisonVoices%2Ce.unisonSpread%3Dthis.unisonSpread%2Ce.unisonOffset%3Dthis.unisonOffset%2Ce.unisonExpression%3Dthis.unisonExpression%2Ce.unisonSign%3Dthis.unisonSign)%3Belse%20if(3%3D%3Dthis.type)%7Be.spectrum%3D%5B%5D%3Bfor(let%20t%3D0%3Bt%3Cu.spectrumControlPoints%3Bt%2B%2B)e.spectrum%5Bt%5D%3DMath.round(100*this.spectrumWave.spectrum%5Bt%5D%2Fu.spectrumMax)%3Be.unison%3Dthis.unison%3D%3Du.unisons.length%3F%22custom%22%3Au.unisons%5Bthis.unison%5D.name%2Cthis.unison%3D%3Du.unisons.length%26%26(e.unisonVoices%3Dthis.unisonVoices%2Ce.unisonSpread%3Dthis.unisonSpread%2Ce.unisonOffset%3Dthis.unisonOffset%2Ce.unisonExpression%3Dthis.unisonExpression%2Ce.unisonSign%3Dthis.unisonSign)%7Delse%20if(4%3D%3Dthis.type)%7Be.drums%3D%5B%5D%3Bfor(let%20t%3D0%3Bt%3Cu.drumCount%3Bt%2B%2B)%7Bconst%20s%3D%5B%5D%3Bfor(let%20e%3D0%3Be%3Cu.spectrumControlPoints%3Be%2B%2B)s%5Be%5D%3DMath.round(100*this.drumsetSpectrumWaves%5Bt%5D.spectrum%5Be%5D%2Fu.spectrumMax)%3Be.drums%5Bt%5D%3D%7BfilterEnvelope%3Athis.getDrumsetEnvelope(t).name%2Cspectrum%3As%7D%7D%7Delse%20if(0%3D%3Dthis.type)e.wave%3Du.chipWaves%5Bthis.chipWave%5D.name%2Ce.unison%3Dthis.unison%3D%3Du.unisons.length%3F%22custom%22%3Au.unisons%5Bthis.unison%5D.name%2Cthis.unison%3D%3Du.unisons.length%26%26(e.unisonVoices%3Dthis.unisonVoices%2Ce.unisonSpread%3Dthis.unisonSpread%2Ce.unisonOffset%3Dthis.unisonOffset%2Ce.unisonExpression%3Dthis.unisonExpression%2Ce.unisonSign%3Dthis.unisonSign)%2Ce.isUsingAdvancedLoopControls%3Dthis.isUsingAdvancedLoopControls%2Ce.chipWaveLoopStart%3Dthis.chipWaveLoopStart%2Ce.chipWaveLoopEnd%3Dthis.chipWaveLoopEnd%2Ce.chipWaveLoopMode%3Dthis.chipWaveLoopMode%2Ce.chipWavePlayBackwards%3Dthis.chipWavePlayBackwards%2Ce.chipWaveStartOffset%3Dthis.chipWaveStartOffset%3Belse%20if(6%3D%3Dthis.type)e.pulseWidth%3Dthis.pulseWidth%2Ce.decimalOffset%3Dthis.decimalOffset%2Ce.unison%3Dthis.unison%3D%3Du.unisons.length%3F%22custom%22%3Au.unisons%5Bthis.unison%5D.name%2Cthis.unison%3D%3Du.unisons.length%26%26(e.unisonVoices%3Dthis.unisonVoices%2Ce.unisonSpread%3Dthis.unisonSpread%2Ce.unisonOffset%3Dthis.unisonOffset%2Ce.unisonExpression%3Dthis.unisonExpression%2Ce.unisonSign%3Dthis.unisonSign)%3Belse%20if(8%3D%3Dthis.type)e.pulseWidth%3Dthis.pulseWidth%2Ce.decimalOffset%3Dthis.decimalOffset%2Ce.dynamism%3DMath.round(100*this.supersawDynamism%2Fu.supersawDynamismMax)%2Ce.spread%3DMath.round(100*this.supersawSpread%2Fu.supersawSpreadMax)%2Ce.shape%3DMath.round(100*this.supersawShape%2Fu.supersawShapeMax)%3Belse%20if(7%3D%3Dthis.type)e.unison%3Dthis.unison%3D%3Du.unisons.length%3F%22custom%22%3Au.unisons%5Bthis.unison%5D.name%2Cthis.unison%3D%3Du.unisons.length%26%26(e.unisonVoices%3Dthis.unisonVoices%2Ce.unisonSpread%3Dthis.unisonSpread%2Ce.unisonOffset%3Dthis.unisonOffset%2Ce.unisonExpression%3Dthis.unisonExpression%2Ce.unisonSign%3Dthis.unisonSign)%2Ce.stringSustain%3DMath.round(100*this.stringSustain%2F(u.stringSustainRange-1))%2Cu.enableAcousticSustain%26%26(e.stringSustainType%3Du.sustainTypeNames%5Bthis.stringSustainType%5D)%3Belse%20if(5%3D%3Dthis.type)e.unison%3Dthis.unison%3D%3Du.unisons.length%3F%22custom%22%3Au.unisons%5Bthis.unison%5D.name%2Cthis.unison%3D%3Du.unisons.length%26%26(e.unisonVoices%3Dthis.unisonVoices%2Ce.unisonSpread%3Dthis.unisonSpread%2Ce.unisonOffset%3Dthis.unisonOffset%2Ce.unisonExpression%3Dthis.unisonExpression%2Ce.unisonSign%3Dthis.unisonSign)%3Belse%20if(1%3D%3Dthis.type%7C%7C11%3D%3Dthis.type)%7Bconst%20t%3D%5B%5D%3Bfor(const%20e%20of%20this.operators)t.push(%7Bfrequency%3Au.operatorFrequencies%5Be.frequency%5D.name%2Camplitude%3Ae.amplitude%2Cwaveform%3Au.operatorWaves%5Be.waveform%5D.name%2CpulseWidth%3Ae.pulseWidth%7D)%3Bif(1%3D%3Dthis.type)e.algorithm%3Du.algorithms%5Bthis.algorithm%5D.name%2Ce.feedbackType%3Du.feedbacks%5Bthis.feedbackType%5D.name%2Ce.feedbackAmplitude%3Dthis.feedbackAmplitude%2Ce.operators%3Dt%3Belse%7Bif(e.algorithm%3Du.algorithms6Op%5Bthis.algorithm6Op%5D.name%2Ce.feedbackType%3Du.feedbacks6Op%5Bthis.feedbackType6Op%5D.name%2Ce.feedbackAmplitude%3Dthis.feedbackAmplitude%2C0%3D%3Dthis.algorithm6Op)%7Bconst%20t%3D%7B%7D%3Bt.mods%3Dthis.customAlgorithm.modulatedBy%2Ct.carrierCount%3Dthis.customAlgorithm.carrierCount%2Ce.customAlgorithm%3Dt%7Dif(0%3D%3Dthis.feedbackType6Op)%7Bconst%20t%3D%7B%7D%3Bt.mods%3Dthis.customFeedbackType.indices%2Ce.customFeedback%3Dt%7De.operators%3Dt%7D%7Delse%20if(9%3D%3Dthis.type)%7Be.wave%3Du.chipWaves%5Bthis.chipWave%5D.name%2Ce.unison%3Dthis.unison%3D%3Du.unisons.length%3F%22custom%22%3Au.unisons%5Bthis.unison%5D.name%2Cthis.unison%3D%3Du.unisons.length%26%26(e.unisonVoices%3Dthis.unisonVoices%2Ce.unisonSpread%3Dthis.unisonSpread%2Ce.unisonOffset%3Dthis.unisonOffset%2Ce.unisonExpression%3Dthis.unisonExpression%2Ce.unisonSign%3Dthis.unisonSign)%2Ce.customChipWave%3Dnew%20Float64Array(64)%2Ce.customChipWaveIntegral%3Dnew%20Float64Array(65)%3Bfor(let%20t%3D0%3Bt%3Cthis.customChipWave.length%3Bt%2B%2B)e.customChipWave%5Bt%5D%3Dthis.customChipWave%5Bt%5D%7Delse%7Bif(10!%3Dthis.type)throw%20new%20Error(%22Unrecognized%20instrument%20type%22)%3Be.modChannels%3D%5B%5D%2Ce.modInstruments%3D%5B%5D%2Ce.modSettings%3D%5B%5D%2Ce.modFilterTypes%3D%5B%5D%3Bfor(let%20t%3D0%3Bt%3Cu.modCount%3Bt%2B%2B)e.modChannels%5Bt%5D%3Dthis.modChannels%5Bt%5D%2Ce.modInstruments%5Bt%5D%3Dthis.modInstruments%5Bt%5D%2Ce.modSettings%5Bt%5D%3Dthis.modulators%5Bt%5D%2Ce.modFilterTypes%5Bt%5D%3Dthis.modFilterTypes%5Bt%5D%7Dconst%20s%3D%5B%5D%3Bfor(let%20e%3D0%3Be%3Cthis.envelopeCount%3Be%2B%2B)s.push(this.envelopes%5Be%5D.toJsonObject())%3Breturn%20e.envelopes%3Ds%2Ce%7DfromJsonObject(e%2Ct%2Cs%2Ci%2Cn%2Ca%3D0%2Cr%3Du.jsonFormat)%7Bnull%3D%3De%26%26(e%3D%7B%7D)%3Bconst%20o%3Dr.toLowerCase()%3Blet%20l%3Du.instrumentTypeNames.indexOf(e.type)%3Bif(%22synthbox%22%3D%3Do%26%26%22FM%22%3D%3De.type%26%26(l%3Du.instrumentTypeNames.indexOf(%22FM6op%22))%2C-1%3D%3Dl%26%26(l%3Ds%3F10%3At%3F2%3A0)%2Cthis.setTypeAndReset(l%2Ct%2Cs)%2Cthis.effects%26%3D-5%2Cnull!%3De.preset%26%26(this.preset%3De.preset%3E%3E%3E0)%2Cnull!%3De.volume%3Fthis.volume%3D%22jummbox%22%3D%3Do%7C%7C%22midbox%22%3D%3Do%7C%7C%22synthbox%22%3D%3Do%7C%7C%22goldbox%22%3D%3Do%7C%7C%22paandorasbox%22%3D%3Do%7C%7C%22ultrabox%22%3D%3Do%3F%24(-u.volumeRange%2F2%2Cu.volumeRange%2F2%2B1%2C0%7Ce.volume)%3AMath.round(25*-%24(0%2C8%2CMath.round(5-(0%7Ce.volume)%2F20))%2F7)%3Athis.volume%3D0%2Cnull!%3De.envelopeSpeed%3Fthis.envelopeSpeed%3D%24(0%2Cu.modulators.dictionary%5B%22envelope%20speed%22%5D.maxRawVol%2B1%2C0%7Ce.envelopeSpeed)%3Athis.envelopeSpeed%3D12%2Cnull!%3De.discreteEnvelope%3Fthis.discreteEnvelope%3De.discreteEnvelope%3Athis.discreteEnvelope%3D!1%2CArray.isArray(e.effects))%7Blet%20t%3D0%3Bfor(let%20s%3D0%3Bs%3Ce.effects.length%3Bs%2B%2B)t%7C%3D1%3C%3Cu.effectNames.indexOf(e.effects%5Bs%5D)%3Bthis.effects%3D4095%26t%7Delse%7Bconst%20t%3D%5B%22none%22%2C%22reverb%22%2C%22chorus%22%2C%22chorus%20%26%20reverb%22%5D%3Bthis.effects%3Dt.indexOf(e.effects)%2C-1%3D%3Dthis.effects%26%26(this.effects%3D2%3D%3Dthis.type%3F0%3A1)%7Dthis.transition%3Du.transitions.dictionary.normal.index%3Bconst%20h%3De.transition%7C%7Ce.envelope%3Bif(null!%3Dh)%7Blet%20t%3Du.transitions.dictionary%5Bh%5D%3Bif(null%3D%3De.fadeInSeconds%7C%7Cnull%3D%3De.fadeOutTicks)%7Bconst%20e%3D%7Bbinary%3A%7Btransition%3A%22interrupt%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-1%7D%2Cseamless%3A%7Btransition%3A%22interrupt%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-1%7D%2Csudden%3A%7Btransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%7D%2Chard%3A%7Btransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%7D%2Csmooth%3A%7Btransition%3A%22normal%22%2CfadeInSeconds%3A.025%2CfadeOutTicks%3A-3%7D%2Csoft%3A%7Btransition%3A%22normal%22%2CfadeInSeconds%3A.025%2CfadeOutTicks%3A-3%7D%2Cslide%3A%7Btransition%3A%22slide%20in%20pattern%22%2CfadeInSeconds%3A.025%2CfadeOutTicks%3A-3%7D%2C%22cross%20fade%22%3A%7Btransition%3A%22normal%22%2CfadeInSeconds%3A.04%2CfadeOutTicks%3A6%7D%2C%22hard%20fade%22%3A%7Btransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A48%7D%2C%22medium%20fade%22%3A%7Btransition%3A%22normal%22%2CfadeInSeconds%3A.0125%2CfadeOutTicks%3A72%7D%2C%22soft%20fade%22%3A%7Btransition%3A%22normal%22%2CfadeInSeconds%3A.06%2CfadeOutTicks%3A96%7D%7D%5Bh%5D%3Bnull!%3De%26%26(t%3Du.transitions.dictionary%5Be.transition%5D%2Cthis.fadeIn%3Dxe.secondsToFadeInSetting(e.fadeInSeconds)%2Cthis.fadeOut%3Dxe.ticksToFadeOutSetting(e.fadeOutTicks))%7Dnull!%3Dt%26%26(this.transition%3Dt.index)%2Cthis.transition!%3Du.transitions.dictionary.normal.index%26%26(this.effects%3D1024%7Cthis.effects)%7Dnull!%3De.fadeInSeconds%26%26(this.fadeIn%3Dxe.secondsToFadeInSetting(%2Be.fadeInSeconds))%2Cnull!%3De.fadeOutTicks%26%26(this.fadeOut%3Dxe.ticksToFadeOutSetting(%2Be.fadeOutTicks))%3B%7Bconst%20t%3De.chord%2Cs%3D%7Bharmony%3A%22simultaneous%22%7D%2Ci%3Du.chords.dictionary%5Bs%5Bt%5D%5D%7C%7Cu.chords.dictionary%5Bt%5D%3Bnull!%3Di%3Fthis.chord%3Di.index%3A2%3D%3Dthis.type%3Fthis.chord%3Du.chords.dictionary.arpeggio.index%3A7%3D%3Dthis.type%3Fthis.chord%3Du.chords.dictionary.strum.index%3A0%3D%3Dthis.type%3Fthis.chord%3Du.chords.dictionary.arpeggio.index%3A1%3D%3Dthis.type%7C%7C11%3D%3Dthis.type%3Fthis.chord%3Du.chords.dictionary%5B%22custom%20interval%22%5D.index%3Athis.chord%3Du.chords.dictionary.simultaneous.index%7Dthis.unison%3Du.unisons.dictionary.none.index%3Bconst%20c%3De.unison%7C%7Ce.interval%7C%7Ce.chorus%3Bif(null!%3Dc)%7Bconst%20e%3D%7Bunion%3A%22none%22%2Cfifths%3A%22fifth%22%2Coctaves%3A%22octave%22%2Cerror%3A%22voiced%22%7D%2Ct%3Du.unisons.dictionary%5Be%5Bc%5D%5D%7C%7Cu.unisons.dictionary%5Bc%5D%3Bnull!%3Dt%26%26(this.unison%3Dt.index)%2C%22custom%22%3D%3Dc%26%26(this.unison%3Du.unisons.length)%7Dif(this.unisonVoices%3Dnull%3D%3De.unisonVoices%3Fu.unisons%5Bthis.unison%5D.voices%3Ae.unisonVoices%2Cthis.unisonSpread%3Dnull%3D%3De.unisonSpread%3Fu.unisons%5Bthis.unison%5D.spread%3Ae.unisonSpread%2Cthis.unisonOffset%3Dnull%3D%3De.unisonOffset%3Fu.unisons%5Bthis.unison%5D.offset%3Ae.unisonOffset%2Cthis.unisonExpression%3Dnull%3D%3De.unisonExpression%3Fu.unisons%5Bthis.unison%5D.expression%3Ae.unisonExpression%2Cthis.unisonSign%3Dnull%3D%3De.unisonSign%3Fu.unisons%5Bthis.unison%5D.sign%3Ae.unisonSign%2C%22custom%20harmony%22%3D%3De.chorus%26%26(this.unison%3Du.unisons.dictionary.hum.index%2Cthis.chord%3Du.chords.dictionary%5B%22custom%20interval%22%5D.index)%2Cthis.chord%3D%3Du.chords.dictionary.simultaneous.index%7C%7CArray.isArray(e.effects)%7C%7C(this.effects%3D2048%7Cthis.effects)%2Cnull!%3De.pitchShiftSemitones%26%26(this.pitchShift%3D%24(0%2Cu.pitchShiftRange%2CMath.round(%2Be.pitchShiftSemitones)))%2Cnull!%3De.octoff)%7Blet%20t%3De.octoff%3Bthis.effects%3D128%7Cthis.effects%2Cthis.pitchShift%3D%22%2B1%20(octave)%22%3D%3Dt%7C%7C%22%2B2%20(2%20octaves)%22%3D%3Dt%3F24%3A%22%2B1%2F2%20(fifth)%22%3D%3Dt%7C%7C%22%2B1%201%2F2%20(octave%20and%20fifth)%22%3D%3Dt%3F18%3A%22-1%20(octave)%22%3D%3Dt%7C%7C%22-2%20(2%20octaves%22%3D%3Dt%3F0%3A%22-1%2F2%20(fifth)%22%3D%3Dt%7C%7C%22-1%201%2F2%20(octave%20and%20fifth)%22%3D%3Dt%3F6%3A12%7Dnull!%3De.detuneCents%26%26(this.detune%3D%24(u.detuneMin%2Cu.detuneMax%2B1%2CMath.round(xe.centsToDetune(%2Be.detuneCents))))%2Cthis.vibrato%3Du.vibratos.dictionary.none.index%3Bconst%20p%3De.vibrato%7C%7Ce.effect%3Bif(null!%3Dp)%7Bconst%20t%3D%7B%22vibrato%20light%22%3A%22light%22%2C%22vibrato%20delayed%22%3A%22delayed%22%2C%22vibrato%20heavy%22%3A%22heavy%22%7D%2Cs%3Du.vibratos.dictionary%5Bt%5Bc%5D%5D%7C%7Cu.vibratos.dictionary%5Bp%5D%3Bnull!%3Ds%3Fthis.vibrato%3Ds.index%3A%22custom%22%3D%3Dp%26%26(this.vibrato%3Du.vibratos.length)%2Cthis.vibrato%3D%3Du.vibratos.length%3F(this.vibratoDepth%3De.vibratoDepth%2Cthis.vibratoSpeed%3De.vibratoSpeed%2Cthis.vibratoDelay%3De.vibratoDelay%2Cthis.vibratoType%3De.vibratoType)%3A(this.vibratoDepth%3Du.vibratos%5Bthis.vibrato%5D.amplitude%2Cthis.vibratoDelay%3Du.vibratos%5Bthis.vibrato%5D.delayTicks%2F2%2Cthis.vibratoSpeed%3D10%2Cthis.vibratoType%3Du.vibratos%5Bthis.vibrato%5D.type)%2Cs!%3Du.vibratos.dictionary.none%26%26(this.effects%3D512%7Cthis.effects)%7Dif(null!%3De.pan%3Fthis.pan%3D%24(0%2Cu.panMax%2B1%2CMath.round(u.panCenter%2B(0%7Ce.pan)*u.panCenter%2F100))%3Anull!%3De.ipan%3Fthis.pan%3D%24(0%2Cu.panMax%2B1%2Cu.panCenter%2B-50*e.ipan)%3Athis.pan%3Du.panCenter%2Cthis.pan!%3Du.panCenter%26%26(this.effects%3D4%7Cthis.effects)%2Cnull!%3De.panDelay%3Fthis.panDelay%3D0%7Ce.panDelay%3Athis.panDelay%3D0%2Cnull!%3De.detune%3Fthis.detune%3D%24(u.detuneMin%2Cu.detuneMax%2B1%2C0%7Ce.detune)%3Anull%3D%3De.detuneCents%26%26(this.detune%3Du.detuneCenter)%2Cnull!%3De.distortion%26%26(this.distortion%3D%24(0%2Cu.distortionRange%2CMath.round((u.distortionRange-1)*(0%7Ce.distortion)%2F100)))%2Cnull!%3De.bitcrusherOctave%26%26(this.bitcrusherFreq%3Du.bitcrusherFreqRange-1-%2Be.bitcrusherOctave%2Fu.bitcrusherOctaveStep)%2Cnull!%3De.bitcrusherQuantization%26%26(this.bitcrusherQuantization%3D%24(0%2Cu.bitcrusherQuantizationRange%2CMath.round((u.bitcrusherQuantizationRange-1)*(0%7Ce.bitcrusherQuantization)%2F100)))%2Cnull!%3De.echoSustain%26%26(this.echoSustain%3D%24(0%2Cu.echoSustainRange%2CMath.round((u.echoSustainRange-1)*(0%7Ce.echoSustain)%2F100)))%2Cnull!%3De.echoDelayBeats%26%26(this.echoDelay%3D%24(0%2Cu.echoDelayRange%2CMath.round(%2Be.echoDelayBeats*(u.ticksPerPart*u.partsPerBeat)%2Fu.echoDelayStepTicks-1)))%2CisNaN(e.chorus)%7C%7C(this.chorus%3D%24(0%2Cu.chorusRange%2CMath.round((u.chorusRange-1)*(0%7Ce.chorus)%2F100)))%2Cnull!%3De.reverb%3Fthis.reverb%3D%24(0%2Cu.reverbRange%2CMath.round((u.reverbRange-1)*(0%7Ce.reverb)%2F100))%3Athis.reverb%3Da%2Cnull!%3De.pulseWidth%3Fthis.pulseWidth%3D%24(1%2Cu.pulseWidthRange%2B1%2CMath.round(e.pulseWidth))%3Athis.pulseWidth%3Du.pulseWidthRange%2Cnull!%3De.decimalOffset%3Fthis.decimalOffset%3D%24(0%2C100%2CMath.round(e.decimalOffset))%3Athis.decimalOffset%3D0%2Cnull!%3De.dynamism%3Fthis.supersawDynamism%3D%24(0%2Cu.supersawDynamismMax%2B1%2CMath.round(u.supersawDynamismMax*(0%7Ce.dynamism)%2F100))%3Athis.supersawDynamism%3Du.supersawDynamismMax%2Cnull!%3De.spread%3Fthis.supersawSpread%3D%24(0%2Cu.supersawSpreadMax%2B1%2CMath.round(u.supersawSpreadMax*(0%7Ce.spread)%2F100))%3Athis.supersawSpread%3DMath.ceil(u.supersawSpreadMax%2F2)%2Cnull!%3De.shape%3Fthis.supersawShape%3D%24(0%2Cu.supersawShapeMax%2B1%2CMath.round(u.supersawShapeMax*(0%7Ce.shape)%2F100))%3Athis.supersawShape%3D0%2Cnull!%3De.harmonics)%7Bfor(let%20t%3D0%3Bt%3Cu.harmonicsControlPoints%3Bt%2B%2B)this.harmonicsWave.harmonics%5Bt%5D%3DMath.max(0%2CMath.min(u.harmonicsMax%2CMath.round(u.harmonicsMax*%2Be.harmonics%5Bt%5D%2F100)))%3Bthis.harmonicsWave.markCustomWaveDirty()%7Delse%20this.harmonicsWave.reset()%3Bif(null!%3De.spectrum)for(let%20t%3D0%3Bt%3Cu.spectrumControlPoints%3Bt%2B%2B)this.spectrumWave.spectrum%5Bt%5D%3DMath.max(0%2CMath.min(u.spectrumMax%2CMath.round(u.spectrumMax*%2Be.spectrum%5Bt%5D%2F100)))%2Cthis.spectrumWave.markCustomWaveDirty()%3Belse%20this.spectrumWave.reset(t)%3Bnull!%3De.stringSustain%3Fthis.stringSustain%3D%24(0%2Cu.stringSustainRange%2CMath.round((u.stringSustainRange-1)*(0%7Ce.stringSustain)%2F100))%3Athis.stringSustain%3D10%2Cthis.stringSustainType%3Du.enableAcousticSustain%3Fu.sustainTypeNames.indexOf(e.stringSustainType)%3A0%2C-1%3D%3Dthis.stringSustainType%26%26(this.stringSustainType%3D0)%2C2%3D%3Dthis.type%26%26(this.chipNoise%3Du.chipNoises.findIndex((t%3D%3Et.name%3D%3De.wave))%2C%22pink%20noise%22%3D%3De.wave%26%26(this.chipNoise%3Du.chipNoises.findIndex((e%3D%3E%22pink%22%3D%3De.name)))%2C%22brownian%20noise%22%3D%3De.wave%26%26(this.chipNoise%3Du.chipNoises.findIndex((e%3D%3E%22brownian%22%3D%3De.name)))%2C-1%3D%3Dthis.chipNoise%26%26(this.chipNoise%3D1))%3Bconst%20f%3D%7Bcustom%3A%22note%20size%22%2Csteady%3A%22none%22%2C%22pluck%201%22%3A%22twang%201%22%2C%22pluck%202%22%3A%22twang%202%22%2C%22pluck%203%22%3A%22twang%203%22%7D%2Cm%3De%3D%3Enull!%3Df%5Be%5D%3Fu.envelopes.dictionary%5Bf%5Be%5D%5D%3Au.envelopes.dictionary%5Be%5D%3Bif(4%3D%3Dthis.type%26%26null!%3De.drums)for(let%20t%3D0%3Bt%3Cu.drumCount%3Bt%2B%2B)%7Bconst%20s%3De.drums%5Bt%5D%3Bif(null!%3Ds)%7Bif(this.drumsetEnvelopes%5Bt%5D%3Du.envelopes.dictionary%5B%22twang%202%22%5D.index%2Cnull!%3Ds.filterEnvelope)%7Bconst%20e%3Dm(s.filterEnvelope)%3Bnull!%3De%26%26(this.drumsetEnvelopes%5Bt%5D%3De.index)%7Dif(null!%3Ds.spectrum)for(let%20e%3D0%3Be%3Cu.spectrumControlPoints%3Be%2B%2B)this.drumsetSpectrumWaves%5Bt%5D.spectrum%5Be%5D%3DMath.max(0%2CMath.min(u.spectrumMax%2CMath.round(u.spectrumMax*%2Bs.spectrum%5Be%5D%2F100)))%3Bthis.drumsetSpectrumWaves%5Bt%5D.markCustomWaveDirty()%7D%7Dif(0%3D%3Dthis.type)%7Bconst%20t%3D%7Btriangle%3A1%2Csquare%3A2%2C%22pulse%20wide%22%3A3%2C%22pulse%20narrow%22%3A4%2Csawtooth%3A5%2C%22double%20saw%22%3A6%2C%22double%20pulse%22%3A7%2Cspiky%3A8%2Cplateau%3A0%7D%2Cs%3D%7B%2210%25%20pulse%22%3A22%2C%22sunsoft%20bass%22%3A23%2C%22loud%20pulse%22%3A24%2Csax%3A25%2Cguitar%3A26%2C%22atari%20bass%22%3A28%2C%22atari%20pulse%22%3A29%2C%221%25%20pulse%22%3A30%2C%22curved%20sawtooth%22%3A31%2Cviola%3A32%2Cbrass%3A33%2C%22acoustic%20bass%22%3A34%2Clyre%3A35%2C%22ramp%20pulse%22%3A36%2Cpiccolo%3A37%2Csquaretooth%3A38%2Cflatline%3A39%2C%22pnryshk%20a%20(u5)%22%3A40%2C%22pnryshk%20b%20(riff)%22%3A41%7D%2Ci%3D%7B%22shrill%20lute%22%3A42%2C%22shrill%20bass%22%3A44%2C%22nes%20pulse%22%3A45%2C%22saw%20bass%22%3A46%2Ceuphonium%3A47%2C%22shrill%20pulse%22%3A48%2C%22r-sawtooth%22%3A49%2Crecorder%3A50%2C%22narrow%20saw%22%3A51%2C%22deep%20square%22%3A52%2C%22ring%20pulse%22%3A53%2C%22double%20sine%22%3A54%2Ccontrabass%3A55%2C%22double%20bass%22%3A56%7D%2Cn%3D%7B%22semi-square%22%3A63%2C%22deep%20square%22%3A64%2Csquaretal%3A40%2C%22saw%20wide%22%3A65%2C%22saw%20narrow%20%22%3A66%2C%22deep%20sawtooth%22%3A67%2Csawtal%3A68%2Cpulse%3A69%2C%22triple%20pulse%22%3A70%2C%22high%20pulse%22%3A71%2C%22deep%20pulse%22%3A72%7D%2Ca%3D%7Btest1%3A56%2C%22pokey%204bit%20lfsr%22%3A57%2C%22pokey%205step%20bass%22%3A58%2C%22isolated%20spiky%22%3A59%2C%22unnamed%201%22%3A60%2C%22unnamed%202%22%3A61%2C%22guitar%20string%22%3A75%2Cintense%3A76%2C%22buzz%20wave%22%3A77%2C%22pokey%20square%22%3A57%2C%22pokey%20bass%22%3A58%2C%22banana%20wave%22%3A83%2C%22test%201%22%3A84%2C%22test%202%22%3A84%2C%22real%20snare%22%3A85%2C%22earthbound%20o.%20guitar%22%3A86%7D%2Cr%3D%7Bkick%3A87%2Csnare%3A88%2Cpiano1%3A89%2CWOW%3A90%2Coverdrive%3A91%2Ctrumpet%3A92%2Csaxophone%3A93%2Corchestrahit%3A94%2C%22detached%20violin%22%3A95%2Csynth%3A96%2Csonic3snare%3A97%2C%22come%20on%22%3A98%2Cchoir%3A99%2Coverdriveguitar%3A100%2Cflute%3A101%2C%22legato%20violin%22%3A102%2C%22tremolo%20violin%22%3A103%2C%22amen%20break%22%3A104%2C%22pizzicato%20violin%22%3A105%2C%22tim%20allen%20grunt%22%3A106%2Ctuba%3A107%2Cloopingcymbal%3A108%2Cstandardkick%3A109%2Cstandardsnare%3A110%2Cclosedhihat%3A111%2Cfoothihat%3A112%2Copenhihat%3A113%2Ccrashcymbal%3A114%2CpianoC4%3A115%2C%22liver%20pad%22%3A116%2Cmarimba%3A117%2Csusdotwav%3A118%2Cwackyboxtts%3A119%7D%3Bthis.chipWave%3D-1%3Bconst%20o%3De.wave%3Bfor(const%20e%20of%5Bt%2Cs%2Ci%2Cn%2Ca%2Cr%5D)if(-1%3D%3Dthis.chipWave%26%26null!%3De%5Bo%5D%26%26null!%3Du.chipWaves%5Be%5Bo%5D%5D)%7Bthis.chipWave%3De%5Bo%5D%3Bbreak%7Dif(-1%3D%3Dthis.chipWave)%7Bconst%20e%3Du.chipWaves.findIndex((e%3D%3Ee.name%3D%3Do))%3B-1!%3De%26%26(this.chipWave%3De)%7D-1%3D%3Dthis.chipWave%26%26(this.chipWave%3D1)%7Dif(1%3D%3Dthis.type%7C%7C11%3D%3Dthis.type)%7Bif(1%3D%3Dthis.type)this.algorithm%3Du.algorithms.findIndex((t%3D%3Et.name%3D%3De.algorithm))%2C-1%3D%3Dthis.algorithm%26%26(this.algorithm%3D0)%2Cthis.feedbackType%3Du.feedbacks.findIndex((t%3D%3Et.name%3D%3De.feedbackType))%2C-1%3D%3Dthis.feedbackType%26%26(this.feedbackType%3D0)%3Belse%7Bif(this.algorithm6Op%3Du.algorithms6Op.findIndex((t%3D%3Et.name%3D%3De.algorithm))%2C-1%3D%3Dthis.algorithm6Op%26%26(this.algorithm6Op%3D1)%2C0%3D%3Dthis.algorithm6Op%3Fthis.customAlgorithm.set(e.customAlgorithm.carrierCount%2Ce.customAlgorithm.mods)%3Athis.customAlgorithm.fromPreset(this.algorithm6Op)%2Cthis.feedbackType6Op%3Du.feedbacks6Op.findIndex((t%3D%3Et.name%3D%3De.feedbackType))%2C-1%3D%3Dthis.feedbackType6Op)%7Blet%20t%3DS(%5B%7Bname%3A%222%E2%9F%B2%203%E2%9F%B2%22%2Cindices%3A%5B%5B%5D%2C%5B2%5D%2C%5B3%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%223%E2%9F%B2%204%E2%9F%B2%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B3%5D%2C%5B4%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%224%E2%9F%B2%205%E2%9F%B2%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B4%5D%2C%5B5%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%225%E2%9F%B2%206%E2%9F%B2%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B5%5D%2C%5B6%5D%5D%7D%2C%7Bname%3A%221%E2%9F%B2%206%E2%9F%B2%22%2Cindices%3A%5B%5B1%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B6%5D%5D%7D%2C%7Bname%3A%221%E2%9F%B2%203%E2%9F%B2%22%2Cindices%3A%5B%5B1%5D%2C%5B%5D%2C%5B3%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%9F%B2%204%E2%9F%B2%22%2Cindices%3A%5B%5B1%5D%2C%5B%5D%2C%5B%5D%2C%5B4%5D%2C%5B%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%221%E2%9F%B2%205%E2%9F%B2%22%2Cindices%3A%5B%5B1%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B5%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%224%E2%9F%B2%206%E2%9F%B2%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B4%5D%2C%5B%5D%2C%5B6%5D%5D%7D%2C%7Bname%3A%222%E2%9F%B2%206%E2%9F%B2%22%2Cindices%3A%5B%5B%5D%2C%5B2%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B6%5D%5D%7D%2C%7Bname%3A%223%E2%9F%B2%206%E2%9F%B2%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B3%5D%2C%5B%5D%2C%5B%5D%2C%5B6%5D%5D%7D%2C%7Bname%3A%224%E2%9F%B2%205%E2%9F%B2%206%E2%9F%B2%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B4%5D%2C%5B5%5D%2C%5B6%5D%5D%7D%2C%7Bname%3A%221%E2%9F%B2%203%E2%9F%B2%206%E2%9F%B2%22%2Cindices%3A%5B%5B1%5D%2C%5B%5D%2C%5B3%5D%2C%5B%5D%2C%5B%5D%2C%5B6%5D%5D%7D%2C%7Bname%3A%222%E2%86%925%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B2%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%222%E2%86%926%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B2%5D%5D%7D%2C%7Bname%3A%223%E2%86%925%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B3%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%223%E2%86%926%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B3%5D%5D%7D%2C%7Bname%3A%224%E2%86%926%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B4%5D%5D%7D%2C%7Bname%3A%225%E2%86%926%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B5%5D%5D%7D%2C%7Bname%3A%221%E2%86%923%E2%86%924%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B1%5D%2C%5B%5D%2C%5B3%5D%2C%5B%5D%5D%7D%2C%7Bname%3A%222%E2%86%925%E2%86%926%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B2%5D%2C%5B5%5D%5D%7D%2C%7Bname%3A%222%E2%86%924%E2%86%926%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B2%5D%2C%5B%5D%2C%5B4%5D%5D%7D%2C%7Bname%3A%224%E2%86%925%E2%86%926%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B4%5D%2C%5B5%5D%5D%7D%2C%7Bname%3A%223%E2%86%924%E2%86%925%E2%86%926%22%2Cindices%3A%5B%5B%5D%2C%5B%5D%2C%5B%5D%2C%5B3%5D%2C%5B4%5D%2C%5B5%5D%5D%7D%2C%7Bname%3A%222%E2%86%923%E2%86%924%E2%86%925%E2%86%926%22%2Cindices%3A%5B%5B%5D%2C%5B1%5D%2C%5B2%5D%2C%5B3%5D%2C%5B4%5D%2C%5B5%5D%5D%7D%2C%7Bname%3A%221%E2%86%922%E2%86%923%E2%86%924%E2%86%925%E2%86%926%22%2Cindices%3A%5B%5B%5D%2C%5B1%5D%2C%5B2%5D%2C%5B3%5D%2C%5B4%5D%2C%5B5%5D%5D%7D%5D)%2Cs%3Dt%5Bt.findIndex((t%3D%3Et.name%3D%3De.feedbackType))%5D.indices%3Bnull!%3Ds%3F(this.feedbackType6Op%3D0%2Cthis.customFeedbackType.set(s))%3Athis.feedbackType6Op%3D1%7D0%3D%3Dthis.feedbackType6Op%26%26null!%3De.customFeedback%3Fthis.customFeedbackType.set(e.customFeedback.mods)%3Athis.customFeedbackType.fromPreset(this.feedbackType6Op)%7Dnull!%3De.feedbackAmplitude%3Fthis.feedbackAmplitude%3D%24(0%2Cu.operatorAmplitudeMax%2B1%2C0%7Ce.feedbackAmplitude)%3Athis.feedbackAmplitude%3D0%3Bfor(let%20t%3D0%3Bt%3Cu.operatorCount%2B(11%3D%3Dthis.type%3F2%3A0)%3Bt%2B%2B)%7Bconst%20s%3Dthis.operators%5Bt%5D%3Blet%20i%3Bif(null!%3De.operators%26%26(i%3De.operators%5Bt%5D)%2Cnull%3D%3Di%26%26(i%3D%7B%7D)%2Cs.frequency%3Du.operatorFrequencies.findIndex((e%3D%3Ee.name%3D%3Di.frequency))%2C-1%3D%3Ds.frequency%26%26(s.frequency%3D0)%2Cnull!%3Di.amplitude%3Fs.amplitude%3D%24(0%2Cu.operatorAmplitudeMax%2B1%2C0%7Ci.amplitude)%3As.amplitude%3D0%2Cnull!%3Di.waveform)%7Bif(%22goldbox%22%3D%3Do%26%26t%3E3)%7Bs.waveform%3D0%3Bcontinue%7Ds.waveform%3Du.operatorWaves.findIndex((e%3D%3Ee.name%3D%3Di.waveform))%2C-1%3D%3Ds.waveform%26%26(%22square%22%3D%3Di.waveform%3F(s.waveform%3Du.operatorWaves.dictionary%5B%22pulse%20width%22%5D.index%2Cs.pulseWidth%3D5)%3A%22rounded%22%3D%3Di.waveform%3Fs.waveform%3Du.operatorWaves.dictionary%5B%22quasi-sine%22%5D.index%3As.waveform%3D0)%7Delse%20s.waveform%3D0%3Bnull!%3Di.pulseWidth%3Fs.pulseWidth%3D0%7Ci.pulseWidth%3As.pulseWidth%3D5%7D%7Delse%20if(9%3D%3Dthis.type)%7Bif(e.customChipWave)%7Bfor(let%20t%3D0%3Bt%3C64%3Bt%2B%2B)this.customChipWave%5Bt%5D%3De.customChipWave%5Bt%5D%3Blet%20t%3D0%3Bfor(let%20e%3D0%3Be%3Cthis.customChipWave.length%3Be%2B%2B)t%2B%3Dthis.customChipWave%5Be%5D%3Bconst%20s%3Dt%2Fthis.customChipWave.length%3Blet%20i%3D0%2Cn%3D0%3Bfor(let%20e%3D0%3Be%3Cthis.customChipWave.length%3Be%2B%2B)i%2B%3Dn%2Cn%3Dthis.customChipWave%5Be%5D-s%2Cthis.customChipWaveIntegral%5Be%5D%3Di%3Bthis.customChipWaveIntegral%5B64%5D%3D0%7D%7Delse%20if(10%3D%3Dthis.type%26%26null!%3De.modChannels)for(let%20t%3D0%3Bt%3Cu.modCount%3Bt%2B%2B)this.modChannels%5Bt%5D%3De.modChannels%5Bt%5D%2Cthis.modInstruments%5Bt%5D%3De.modInstruments%5Bt%5D%2Cthis.modulators%5Bt%5D%3De.modSettings%5Bt%5D%2Cnull!%3De.modFilterTypes%26%26(this.modFilterTypes%5Bt%5D%3De.modFilterTypes%5Bt%5D)%3Bif(10!%3Dthis.type)%7Bthis.chord%3D%3Du.chords.dictionary.arpeggio.index%26%26null!%3De.arpeggioSpeed%3Fthis.arpeggioSpeed%3De.arpeggioSpeed%3Athis.arpeggioSpeed%3Di%3F9%3A12%2Cnull!%3De.fastTwoNoteArp%3Fthis.fastTwoNoteArp%3De.fastTwoNoteArp%3Athis.fastTwoNoteArp%3Dn%2Cnull!%3De.clicklessTransition%3Fthis.clicklessTransition%3De.clicklessTransition%3Athis.clicklessTransition%3D!1%2Cnull!%3De.aliases%3Fthis.aliases%3De.aliases%3A%22modbox%22%3D%3Do%3F(this.effects%3D8%7Cthis.effects%2Cthis.aliases%3D!0%2Cthis.distortion%3D0)%3Athis.aliases%3D!1%2Cnull!%3De.noteFilterType%26%26(this.noteFilterType%3De.noteFilterType)%2Cnull!%3De.noteSimpleCut%26%26(this.noteFilterSimpleCut%3De.noteSimpleCut)%2Cnull!%3De.noteSimplePeak%26%26(this.noteFilterSimplePeak%3De.noteSimplePeak)%2Cnull!%3De.noteFilter%3Fthis.noteFilter.fromJsonObject(e.noteFilter)%3Athis.noteFilter.reset()%3Bfor(let%20t%3D0%3Bt%3Cu.filterMorphCount%3Bt%2B%2B)Array.isArray(e%5B%22noteSubFilters%22%2Bt%5D)%26%26(this.noteSubFilters%5Bt%5D%3Dnew%20fe%2Cthis.noteSubFilters%5Bt%5D.fromJsonObject(e%5B%22noteSubFilters%22%2Bt%5D))%3Bif(null!%3De.eqFilterType%26%26(this.eqFilterType%3De.eqFilterType)%2Cnull!%3De.eqSimpleCut%26%26(this.eqFilterSimpleCut%3De.eqSimpleCut)%2Cnull!%3De.eqSimplePeak%26%26(this.eqFilterSimplePeak%3De.eqSimplePeak)%2CArray.isArray(e.eqFilter))this.eqFilter.fromJsonObject(e.eqFilter)%3Belse%7Bthis.eqFilter.reset()%3Bconst%20t%3D%7B%7D%2Cs%3D8e3%2Ci%3D11%2Cn%3D8%3Bif(null!%3De.filterCutoffHz%3Ft.filterCutoff%3D%24(0%2Ci%2CMath.round(i-1%2B2*Math.log((0%7Ce.filterCutoffHz)%2Fs)%2FMath.LN2))%3At.filterCutoff%3D0%3D%3Dthis.type%3F6%3A10%2Cnull!%3De.filterResonance%3Ft.filterResonance%3D%24(0%2Cn%2CMath.round((n-1)*(0%7Ce.filterResonance)%2F100))%3At.filterResonance%3D0%2Ct.filterEnvelope%3Dm(e.filterEnvelope)%2Ct.pulseEnvelope%3Dm(e.pulseEnvelope)%2Ct.feedbackEnvelope%3Dm(e.feedbackEnvelope)%2CArray.isArray(e.operators))%7Bt.operatorEnvelopes%3D%5B%5D%3Bfor(let%20s%3D0%3Bs%3Cu.operatorCount%2B(11%3D%3Dthis.type%3F2%3A0)%3Bs%2B%2B)%7Blet%20i%3Bnull!%3De.operators%5Bs%5D%26%26(i%3Dm(e.operators%5Bs%5D.envelope))%2Ct.operatorEnvelopes%5Bs%5D%3Dnull!%3Di%3Fi%3Au.envelopes.dictionary.none%7D%7Dif(null!%3De.filter)%7Bconst%20s%3D%5B10%2C6%2C3%2C0%2C8%2C5%2C2%5D%2Ci%3D%5B%22none%22%2C%22none%22%2C%22none%22%2C%22none%22%2C%22decay%201%22%2C%22decay%202%22%2C%22decay%203%22%5D%2Cn%3D%5B%22none%22%2C%22bright%22%2C%22medium%22%2C%22soft%22%2C%22decay%20bright%22%2C%22decay%20medium%22%2C%22decay%20soft%22%5D%2Ca%3D%7B%22sustain%20sharp%22%3A1%2C%22sustain%20medium%22%3A2%2C%22sustain%20soft%22%3A3%2C%22decay%20sharp%22%3A4%7D%3Blet%20r%3Dnull!%3Da%5Be.filter%5D%3Fa%5Be.filter%5D%3An.indexOf(e.filter)%3B-1%3D%3Dr%26%26(r%3D0)%2Ct.filterCutoff%3Ds%5Br%5D%2Ct.filterEnvelope%3Dm(i%5Br%5D)%2Ct.filterResonance%3D0%7Dthis.convertLegacySettings(t%2C!0)%7Dfor(let%20t%3D0%3Bt%3Cu.filterMorphCount%3Bt%2B%2B)Array.isArray(e%5B%22eqSubFilters%22%2Bt%5D)%26%26(this.eqSubFilters%5Bt%5D%3Dnew%20fe%2Cthis.eqSubFilters%5Bt%5D.fromJsonObject(e%5B%22eqSubFilters%22%2Bt%5D))%3Bif(Array.isArray(e.envelopes))%7Bconst%20t%3De.envelopes%3Bfor(let%20e%3D0%3Be%3Ct.length%26%26!(this.envelopeCount%3E%3Du.maxEnvelopeCount)%3Be%2B%2B)%7Bconst%20s%3Dnew%20me%3Bs.fromJsonObject(t%5Be%5D)%2Cthis.addEnvelope(s.target%2Cs.index%2Cs.envelope)%7D%7D%7D0%3D%3D%3Dl%26%26(null!%3De.isUsingAdvancedLoopControls%3F(this.isUsingAdvancedLoopControls%3De.isUsingAdvancedLoopControls%2Cthis.chipWaveLoopStart%3De.chipWaveLoopStart%2Cthis.chipWaveLoopEnd%3De.chipWaveLoopEnd%2Cthis.chipWaveLoopMode%3De.chipWaveLoopMode%2Cthis.chipWavePlayBackwards%3De.chipWavePlayBackwards%2Cthis.chipWaveStartOffset%3De.chipWaveStartOffset)%3A(this.isUsingAdvancedLoopControls%3D!1%2Cthis.chipWaveLoopStart%3D0%2Cthis.chipWaveLoopEnd%3Du.rawRawChipWaves%5Bthis.chipWave%5D.samples.length-1%2Cthis.chipWaveLoopMode%3D0%2Cthis.chipWavePlayBackwards%3D!1%2Cthis.chipWaveStartOffset%3D0))%7DgetLargestControlPointCount(e)%7Blet%20t%3Bif(e)%7Bt%3Dthis.noteFilter.controlPointCount%3Bfor(let%20e%3D0%3Be%3Cu.filterMorphCount%3Be%2B%2B)null!%3Dthis.noteSubFilters%5Be%5D%26%26this.noteSubFilters%5Be%5D.controlPointCount%3Et%26%26(t%3Dthis.noteSubFilters%5Be%5D.controlPointCount)%7Delse%7Bt%3Dthis.eqFilter.controlPointCount%3Bfor(let%20e%3D0%3Be%3Cu.filterMorphCount%3Be%2B%2B)null!%3Dthis.eqSubFilters%5Be%5D%26%26this.eqSubFilters%5Be%5D.controlPointCount%3Et%26%26(t%3Dthis.eqSubFilters%5Be%5D.controlPointCount)%7Dreturn%20t%7Dstatic%20frequencyFromPitch(e)%7Breturn%20440*Math.pow(2%2C(e-69)%2F12)%7DaddEnvelope(e%2Ct%2Cs)%7Blet%20i%3D!1%3Bif(this.supportsEnvelopeTarget(e%2Ct)%7C%7C(i%3D!0)%2Cthis.envelopeCount%3E%3Du.maxEnvelopeCount)throw%20new%20Error%3Bfor(%3Bthis.envelopes.length%3C%3Dthis.envelopeCount%3B)this.envelopes%5Bthis.envelopes.length%5D%3Dnew%20me%3Bconst%20n%3Dthis.envelopes%5Bthis.envelopeCount%5D%3Bn.target%3Di%3Fu.instrumentAutomationTargets.dictionary.none.index%3Ae%2Cn.index%3Di%3F0%3At%2Cn.envelope%3Ds%2Cthis.envelopeCount%2B%2B%7DsupportsEnvelopeTarget(e%2Ct)%7Bconst%20s%3Du.instrumentAutomationTargets%5Be%5D%3Bif(null%3D%3Ds.computeIndex%26%26%22none%22!%3Ds.name)return!1%3Bif(t%3E%3Ds.maxCount)return!1%3Bif(null!%3Ds.compatibleInstruments%26%26-1%3D%3Ds.compatibleInstruments.indexOf(this.type))return!1%3Bif(null!%3Ds.effect%26%260%3D%3D(this.effects%261%3C%3Cs.effect))return!1%3Bif(s.isFilter)%7Blet%20e%3Dthis.noteFilter.controlPointCount%3Bif(this.noteFilterType%26%26(e%3D1)%2Ct%3E%3De)return!1%7Dreturn%22operatorFrequency%22!%3Ds.name%26%26%22operatorAmplitude%22!%3Ds.name%7C%7C!(t%3E%3D4%2B(11%3D%3Dthis.type%3F2%3A0))%7DclearInvalidEnvelopeTargets()%7Bfor(let%20e%3D0%3Be%3Cthis.envelopeCount%3Be%2B%2B)%7Bconst%20t%3Dthis.envelopes%5Be%5D.target%2Cs%3Dthis.envelopes%5Be%5D.index%3Bthis.supportsEnvelopeTarget(t%2Cs)%7C%7C(this.envelopes%5Be%5D.target%3Du.instrumentAutomationTargets.dictionary.none.index%2Cthis.envelopes%5Be%5D.index%3D0)%7D%7DgetTransition()%7Breturn%20M(this.effects)%3Fu.transitions%5Bthis.transition%5D%3A10%3D%3Dthis.type%3Fu.transitions.dictionary.interrupt%3Au.transitions.dictionary.normal%7DgetFadeInSeconds()%7Breturn%204%3D%3Dthis.type%3F0%3Axe.fadeInSettingToSeconds(this.fadeIn)%7DgetFadeOutTicks()%7Breturn%204%3D%3Dthis.type%3Fu.drumsetFadeOutTicks%3Axe.fadeOutSettingToTicks(this.fadeOut)%7DgetChord()%7Breturn%20w(this.effects)%3Fu.chords%5Bthis.chord%5D%3Au.chords.dictionary.simultaneous%7DgetDrumsetEnvelope(e)%7Bif(4!%3Dthis.type)throw%20new%20Error(%22Can't%20getDrumsetEnvelope()%20for%20non-drumset.%22)%3Breturn%20u.envelopes%5Bthis.drumsetEnvelopes%5Be%5D%5D%7D%7Dclass%20ye%7Bconstructor()%7Bthis.octave%3D0%2Cthis.instruments%3D%5B%5D%2Cthis.patterns%3D%5B%5D%2Cthis.bars%3D%5B%5D%2Cthis.muted%3D!1%2Cthis.name%3D%22%22%7D%7Dclass%20ve%7Bconstructor(e)%7Bthis.scaleCustom%3D%5B%5D%2Cthis.channels%3D%5B%5D%2Cthis.limitDecay%3D4%2Cthis.limitRise%3D4e3%2Cthis.compressionThreshold%3D1%2Cthis.limitThreshold%3D1%2Cthis.compressionRatio%3D1%2Cthis.limitRatio%3D1%2Cthis.masterGain%3D1%2Cthis.inVolumeCap%3D0%2Cthis.outVolumeCap%3D0%2Cthis.getNewNoteVolume%3D(e%2Ct%2Cs%2Ci)%3D%3E%7Bif(e%26%26null!%3Dt%26%26null!%3Ds%26%26null!%3Di)%7Bi%3Du.modCount-i-1%3Blet%20e%3Du.modulators%5Bthis.channels%5Bt%5D.instruments%5Bs%5D.modulators%5Bi%5D%5D.newNoteVol%2Cn%3Du.modulators.dictionary.tempo.index%3Breturn%20this.channels%5Bt%5D.instruments%5Bs%5D.modulators%5Bi%5D%3D%3Dn%26%26(e%3Dthis.tempo-u.modulators%5Bn%5D.convertRealFactor)%2Cnull!%3De%3Fe%3A6%7Dreturn%206%7D%2Cthis.getVolumeCap%3D(e%2Ct%2Cs%2Ci)%3D%3E%7Bif(e%26%26null!%3Dt%26%26null!%3Ds%26%26null!%3Di)%7Bi%3Du.modCount-i-1%3Blet%20e%3Dthis.channels%5Bt%5D.instruments%5Bs%5D%2Cn%3Du.modulators%5Be.modulators%5Bi%5D%5D%2Ca%3Dn.maxRawVol%3Breturn%20null!%3Da%3F(%22eq%20filter%22!%3Dn.name%26%26%22note%20filter%22!%3Dn.name%7C%7C(a%3Du.filterMorphCount-1%2Ce.modFilterTypes%5Bi%5D%3E0%26%26e.modFilterTypes%5Bi%5D%252%3Fa%3Du.filterFreqRange%3Ae.modFilterTypes%5Bi%5D%3E0%26%26(a%3Du.filterGainRange))%2Ca)%3A6%7Dreturn%206%7D%2Cthis.getVolumeCapForSetting%3D(e%2Ct%2Cs)%3D%3E%7Bif(e)%7Blet%20e%3Du.modulators%5Bt%5D.maxRawVol%3Breturn%20null!%3De%3F(null%3D%3Ds%7C%7C%22eq%20filter%22!%3Du.modulators%5Bt%5D.name%26%26%22note%20filter%22!%3Du.modulators%5Bt%5D.name%7C%7C(e%3Du.filterMorphCount-1%2Cs%3E0%26%26s%252%3Fe%3Du.filterFreqRange%3As%3E0%26%26(e%3Du.filterGainRange))%2Ce)%3Au.noteSizeMax%7Dreturn%20u.noteSizeMax%7D%2Cnull!%3De%3Fthis.fromBase64String(e)%3Athis.initToDefault(!0)%7DgetChannelCount()%7Breturn%20this.pitchChannelCount%2Bthis.noiseChannelCount%2Bthis.modChannelCount%7DgetMaxInstrumentsPerChannel()%7Breturn%20Math.max(this.layeredInstruments%3Fu.layeredInstrumentCountMax%3Au.instrumentCountMin%2Cthis.patternInstruments%3Fu.patternInstrumentCountMax%3Au.instrumentCountMin)%7DgetMaxInstrumentsPerPattern(e)%7Breturn%20this.getMaxInstrumentsPerPatternForChannel(this.channels%5Be%5D)%7DgetMaxInstrumentsPerPatternForChannel(e)%7Breturn%20this.layeredInstruments%3FMath.min(u.layeredInstrumentCountMax%2Ce.instruments.length)%3A1%7DgetChannelIsNoise(e)%7Breturn%20e%3E%3Dthis.pitchChannelCount%26%26e%3Cthis.pitchChannelCount%2Bthis.noiseChannelCount%7DgetChannelIsMod(e)%7Breturn%20e%3E%3Dthis.pitchChannelCount%2Bthis.noiseChannelCount%7DinitToDefault(e%3D!0)%7Bif(this.scale%3D0%2Cthis.scaleCustom%3D%5B!0%2C!1%2C!0%2C!0%2C!1%2C!1%2C!1%2C!0%2C!0%2C!1%2C!0%2C!0%5D%2Cthis.key%3D0%2Cthis.octave%3D0%2Cthis.loopStart%3D0%2Cthis.loopLength%3D4%2Cthis.tempo%3D120%2Cthis.reverb%3D0%2Cthis.beatsPerBar%3D8%2Cthis.barCount%3D16%2Cthis.patternsPerChannel%3D8%2Cthis.rhythm%3D1%2Cthis.layeredInstruments%3D!1%2Cthis.patternInstruments%3D!1%2Cthis.title%3D%22Untitled%22%2Ce)%7Bthis.pitchChannelCount%3D3%2Cthis.noiseChannelCount%3D1%2Cthis.modChannelCount%3D0%3Bfor(let%20e%3D0%3Be%3Cthis.getChannelCount()%3Be%2B%2B)%7Bconst%20t%3De%3E%3Dthis.pitchChannelCount%26%26e%3Cthis.pitchChannelCount%2Bthis.noiseChannelCount%2Cs%3De%3E%3Dthis.pitchChannelCount%2Bthis.noiseChannelCount%3Bthis.channels.length%3C%3De%26%26(this.channels%5Be%5D%3Dnew%20ye)%3Bconst%20i%3Dthis.channels%5Be%5D%3Bi.octave%3DMath.max(3-e%2C0)%3Bfor(let%20e%3D0%3Be%3Cthis.patternsPerChannel%3Be%2B%2B)i.patterns.length%3C%3De%3Fi.patterns%5Be%5D%3Dnew%20ne%3Ai.patterns%5Be%5D.reset()%3Bi.patterns.length%3Dthis.patternsPerChannel%3Bfor(let%20e%3D0%3Be%3Cu.instrumentCountMin%3Be%2B%2B)i.instruments.length%3C%3De%26%26(i.instruments%5Be%5D%3Dnew%20de(t%2Cs))%2Ci.instruments%5Be%5D.setTypeAndReset(s%3F10%3At%3F2%3A0%2Ct%2Cs)%3Bi.instruments.length%3Du.instrumentCountMin%3Bfor(let%20e%3D0%3Be%3Cthis.barCount%3Be%2B%2B)i.bars%5Be%5D%3De%3C4%3F1%3A0%3Bi.bars.length%3Dthis.barCount%7Dthis.channels.length%3Dthis.getChannelCount()%7D%7DtoBase64String()%7Blet%20e%2Ct%3D%5B%5D%3Bt.push(ve.k)%2Ct.push(X%5Bve.P%5D)%2Ct.push(78)%3Bvar%20s%3DencodeURIComponent(this.title)%3Bt.push(X%5Bs.length%3E%3E6%5D%2CX%5B63%26s.length%5D)%3Bfor(let%20e%3D0%3Be%3Cs.length%3Be%2B%2B)t.push(s.charCodeAt(e))%3Bif(t.push(110%2CX%5Bthis.pitchChannelCount%5D%2CX%5Bthis.noiseChannelCount%5D%2CX%5Bthis.modChannelCount%5D)%2Ct.push(115%2CX%5Bthis.scale%5D)%2Cthis.scale%3D%3Du.scales.dictionary.Custom.index)for(var%20i%3D1%3Bi%3Cu.pitchesPerOctave%3Bi%2B%2B)t.push(X%5Bthis.scaleCustom%5Bi%5D%3F1%3A0%5D)%3Bt.push(107%2CX%5Bthis.key%5D%2CX%5Bthis.octave-u.octaveMin%5D)%2Ct.push(108%2CX%5Bthis.loopStart%3E%3E6%5D%2CX%5B63%26this.loopStart%5D)%2Ct.push(101%2CX%5Bthis.loopLength-1%3E%3E6%5D%2CX%5Bthis.loopLength-1%2663%5D)%2Ct.push(116%2CX%5Bthis.tempo%3E%3E6%5D%2CX%5B63%26this.tempo%5D)%2Ct.push(97%2CX%5Bthis.beatsPerBar-1%5D)%2Ct.push(103%2CX%5Bthis.barCount-1%3E%3E6%5D%2CX%5Bthis.barCount-1%2663%5D)%2Ct.push(106%2CX%5Bthis.patternsPerChannel-1%3E%3E6%5D%2CX%5Bthis.patternsPerChannel-1%2663%5D)%2Ct.push(114%2CX%5Bthis.rhythm%5D)%2Ct.push(79)%2C1!%3Dthis.compressionRatio%7C%7C1!%3Dthis.limitRatio%7C%7C4e3!%3Dthis.limitRise%7C%7C4!%3Dthis.limitDecay%7C%7C1!%3Dthis.limitThreshold%7C%7C1!%3Dthis.compressionThreshold%7C%7C1!%3Dthis.masterGain%3F(t.push(X%5BMath.round(this.compressionRatio%3C1%3F10*this.compressionRatio%3A10%2B60*(this.compressionRatio-1))%5D)%2Ct.push(X%5BMath.round(this.limitRatio%3C1%3F10*this.limitRatio%3A9%2Bthis.limitRatio)%5D)%2Ct.push(X%5Bthis.limitDecay%5D)%2Ct.push(X%5BMath.round((this.limitRise-2e3)%2F250)%5D)%2Ct.push(X%5BMath.round(20*this.compressionThreshold)%5D)%2Ct.push(X%5BMath.round(20*this.limitThreshold)%5D)%2Ct.push(X%5BMath.round(50*this.masterGain)%3E%3E6%5D%2CX%5B63%26Math.round(50*this.masterGain)%5D))%3At.push(X%5B63%5D)%2Ct.push(85)%3Bfor(let%20e%3D0%3Be%3Cthis.getChannelCount()%3Be%2B%2B)%7Bvar%20n%3DencodeURIComponent(this.channels%5Be%5D.name)%3Bt.push(X%5Bn.length%3E%3E6%5D%2CX%5B63%26n.length%5D)%3Bfor(let%20e%3D0%3Be%3Cn.length%3Be%2B%2B)t.push(n.charCodeAt(e))%7Dif(t.push(105%2CX%5Bthis.layeredInstruments%3C%3C1%7Cthis.patternInstruments%5D)%2Cthis.layeredInstruments%7C%7Cthis.patternInstruments)for(let%20e%3D0%3Be%3Cthis.getChannelCount()%3Be%2B%2B)t.push(X%5Bthis.channels%5Be%5D.instruments.length-u.instrumentCountMin%5D)%3Bt.push(111)%3Bfor(let%20e%3D0%3Be%3Cthis.pitchChannelCount%3Be%2B%2B)t.push(X%5Bthis.channels%5Be%5D.octave%5D)%3Bfor(let%20e%3D0%3Be%3Cthis.getChannelCount()%3Be%2B%2B)for(let%20s%3D0%3Bs%3Cthis.channels%5Be%5D.instruments.length%3Bs%2B%2B)%7Bconst%20i%3Dthis.channels%5Be%5D.instruments%5Bs%5D%3Bif(t.push(84%2CX%5Bi.type%5D)%2Ct.push(118%2CX%5Bi.volume%2Bu.volumeRange%2F2%3E%3E6%5D%2CX%5Bi.volume%2Bu.volumeRange%2F2%2663%5D)%2Ct.push(117%2CX%5Bi.preset%3E%3E6%5D%2CX%5B63%26i.preset%5D)%2Ct.push(102)%2Ct.push(X%5B%2Bi.eqFilterType%5D)%2Ci.eqFilterType)t.push(X%5Bi.eqFilterSimpleCut%5D)%2Ct.push(X%5Bi.eqFilterSimplePeak%5D)%3Belse%7Bif(null%3D%3Di.eqFilter)t.push(X%5B0%5D)%2Cconsole.log(%22Null%20EQ%20filter%20settings%20detected%20in%20toBase64String%20for%20channelIndex%20%22%2Be%2B%22%2C%20instrumentIndex%20%22%2Bs)%3Belse%7Bt.push(X%5Bi.eqFilter.controlPointCount%5D)%3Bfor(let%20e%3D0%3Be%3Ci.eqFilter.controlPointCount%3Be%2B%2B)%7Bconst%20s%3Di.eqFilter.controlPoints%5Be%5D%3Bt.push(X%5Bs.type%5D%2CX%5BMath.round(s.freq)%5D%2CX%5BMath.round(s.gain)%5D)%7D%7Dlet%20n%3D0%3Bfor(let%20e%3D0%3Be%3Cu.filterMorphCount-1%3Be%2B%2B)n%7C%3D%2B(null!%3Di.eqSubFilters%5Be%2B1%5D)%3C%3Ce%3Bt.push(X%5Bn%3E%3E6%5D%2CX%5B63%26n%5D)%3Bfor(let%20e%3D0%3Be%3Cu.filterMorphCount-1%3Be%2B%2B)if(n%261%3C%3Ce)%7Bt.push(X%5Bi.eqSubFilters%5Be%2B1%5D.controlPointCount%5D)%3Bfor(let%20s%3D0%3Bs%3Ci.eqSubFilters%5Be%2B1%5D.controlPointCount%3Bs%2B%2B)%7Bconst%20n%3Di.eqSubFilters%5Be%2B1%5D.controlPoints%5Bs%5D%3Bt.push(X%5Bn.type%5D%2CX%5BMath.round(n.freq)%5D%2CX%5BMath.round(n.gain)%5D)%7D%7D%7Dif(t.push(113%2CX%5Bi.effects%3E%3E6%5D%2CX%5B63%26i.effects%5D)%2CP(i.effects))if(t.push(X%5B%2Bi.noteFilterType%5D)%2Ci.noteFilterType)t.push(X%5Bi.noteFilterSimpleCut%5D)%2Ct.push(X%5Bi.noteFilterSimplePeak%5D)%3Belse%7Bif(null%3D%3Di.noteFilter)t.push(X%5B0%5D)%2Cconsole.log(%22Null%20note%20filter%20settings%20detected%20in%20toBase64String%20for%20channelIndex%20%22%2Be%2B%22%2C%20instrumentIndex%20%22%2Bs)%3Belse%7Bt.push(X%5Bi.noteFilter.controlPointCount%5D)%3Bfor(let%20e%3D0%3Be%3Ci.noteFilter.controlPointCount%3Be%2B%2B)%7Bconst%20s%3Di.noteFilter.controlPoints%5Be%5D%3Bt.push(X%5Bs.type%5D%2CX%5BMath.round(s.freq)%5D%2CX%5BMath.round(s.gain)%5D)%7D%7Dlet%20n%3D0%3Bfor(let%20e%3D0%3Be%3Cu.filterMorphCount-1%3Be%2B%2B)n%7C%3D%2B(null!%3Di.noteSubFilters%5Be%2B1%5D)%3C%3Ce%3Bt.push(X%5Bn%3E%3E6%5D%2CX%5B63%26n%5D)%3Bfor(let%20e%3D0%3Be%3Cu.filterMorphCount-1%3Be%2B%2B)if(n%261%3C%3Ce)%7Bt.push(X%5Bi.noteSubFilters%5Be%2B1%5D.controlPointCount%5D)%3Bfor(let%20s%3D0%3Bs%3Ci.noteSubFilters%5Be%2B1%5D.controlPointCount%3Bs%2B%2B)%7Bconst%20n%3Di.noteSubFilters%5Be%2B1%5D.controlPoints%5Bs%5D%3Bt.push(X%5Bn.type%5D%2CX%5BMath.round(n.freq)%5D%2CX%5BMath.round(n.gain)%5D)%7D%7D%7Dif(M(i.effects)%26%26t.push(X%5Bi.transition%5D)%2Cw(i.effects)%26%26(t.push(X%5Bi.chord%5D)%2Ci.chord%3D%3Du.chords.dictionary.arpeggio.index%26%26(t.push(X%5Bi.arpeggioSpeed%5D)%2Ct.push(X%5B%2Bi.fastTwoNoteArp%5D)))%2Cx(i.effects)%26%26t.push(X%5Bi.pitchShift%5D)%2Ck(i.effects)%26%26t.push(X%5Bi.detune-u.detuneMin%3E%3E6%5D%2CX%5Bi.detune-u.detuneMin%2663%5D)%2CF(i.effects)%26%26(t.push(X%5Bi.vibrato%5D)%2Ci.vibrato%3D%3Du.vibratos.length%26%26(t.push(X%5BMath.round(25*i.vibratoDepth)%5D)%2Ct.push(X%5Bi.vibratoSpeed%5D)%2Ct.push(X%5BMath.round(i.vibratoDelay)%5D)%2Ct.push(X%5Bi.vibratoType%5D)))%2CI(i.effects)%26%26(t.push(X%5Bi.distortion%5D)%2Ct.push(X%5B%2Bi.aliases%5D))%2Cq(i.effects)%26%26t.push(X%5Bi.bitcrusherFreq%5D%2CX%5Bi.bitcrusherQuantization%5D)%2CT(i.effects)%26%26(t.push(X%5Bi.pan%3E%3E6%5D%2CX%5B63%26i.pan%5D)%2Ct.push(X%5Bi.panDelay%5D))%2CD(i.effects)%26%26t.push(X%5Bi.chorus%5D)%2CO(i.effects)%26%26t.push(X%5Bi.echoSustain%5D%2CX%5Bi.echoDelay%5D)%2CR(i.effects)%26%26t.push(X%5Bi.reverb%5D)%2C4!%3Di.type%26%26(t.push(100%2CX%5Bi.fadeIn%5D%2CX%5Bi.fadeOut%5D)%2Ct.push(X%5B%2Bi.clicklessTransition%5D))%2C5%3D%3Di.type%7C%7C7%3D%3Di.type)%7Bt.push(72)%3Bconst%20e%3Dnew%20te%3Bfor(let%20t%3D0%3Bt%3Cu.harmonicsControlPoints%3Bt%2B%2B)e.write(u.harmonicsControlPointBits%2Ci.harmonicsWave.harmonics%5Bt%5D)%3Be.encodeBase64(t)%7Dif(0%3D%3Di.type)%7Bi.chipWave%3E186%3F(t.push(119%2CX%5Bi.chipWave-186%5D)%2Ct.push(X%5B3%5D))%3Ai.chipWave%3E124%3F(t.push(119%2CX%5Bi.chipWave-124%5D)%2Ct.push(X%5B2%5D))%3Ai.chipWave%3E62%3F(t.push(119%2CX%5Bi.chipWave-62%5D)%2Ct.push(X%5B1%5D))%3A(t.push(119%2CX%5Bi.chipWave%5D)%2Ct.push(X%5B0%5D))%2Ct.push(104%2CX%5Bi.unison%5D)%2Ci.unison%3D%3Du.unisons.length%26%26Q(t%2Ci.unisonVoices%2Ci.unisonSpread%2Ci.unisonOffset%2Ci.unisonExpression%2Ci.unisonSign)%2Ct.push(121)%3Bconst%20e%3D%24(0%2C32%2Ci.chipWaveLoopMode)%3C%3C1%7C(i.isUsingAdvancedLoopControls%3F1%3A0)%3Bt.push(X%5Be%5D)%3Bconst%20s%3D%24(0%2C32%2C0)%3C%3C1%7C(i.chipWavePlayBackwards%3F1%3A0)%3Bt.push(X%5Bs%5D)%2CK(t%2Ci.chipWaveLoopStart)%2CK(t%2Ci.chipWaveLoopEnd)%2CK(t%2Ci.chipWaveStartOffset)%7Delse%20if(1%3D%3Di.type%7C%7C11%3D%3Di.type)%7Bif(1%3D%3Di.type)t.push(65%2CX%5Bi.algorithm%5D)%2Ct.push(70%2CX%5Bi.feedbackType%5D)%3Belse%7Bif(t.push(65%2CX%5Bi.algorithm6Op%5D)%2C0%3D%3Di.algorithm6Op)%7Bt.push(67%2CX%5Bi.customAlgorithm.carrierCount%5D)%2Ct.push(113)%3Bfor(let%20e%3D0%3Be%3Ci.customAlgorithm.modulatedBy.length%3Be%2B%2B)%7Bfor(let%20s%3D0%3Bs%3Ci.customAlgorithm.modulatedBy%5Be%5D.length%3Bs%2B%2B)t.push(X%5Bi.customAlgorithm.modulatedBy%5Be%5D%5Bs%5D%5D)%3Bt.push(82)%7Dt.push(113)%7Dif(t.push(70%2CX%5Bi.feedbackType6Op%5D)%2C0%3D%3Di.feedbackType6Op)%7Bt.push(113)%3Bfor(let%20e%3D0%3Be%3Ci.customFeedbackType.indices.length%3Be%2B%2B)%7Bfor(let%20s%3D0%3Bs%3Ci.customFeedbackType.indices%5Be%5D.length%3Bs%2B%2B)t.push(X%5Bi.customFeedbackType.indices%5Be%5D%5Bs%5D%5D)%3Bt.push(82)%7Dt.push(113)%7D%7Dt.push(66%2CX%5Bi.feedbackAmplitude%5D)%2Ct.push(81)%3Bfor(let%20e%3D0%3Be%3C(11%3D%3Di.type%3F6%3Au.operatorCount)%3Be%2B%2B)t.push(X%5Bi.operators%5Be%5D.frequency%5D)%3Bt.push(80)%3Bfor(let%20e%3D0%3Be%3C(11%3D%3Di.type%3F6%3Au.operatorCount)%3Be%2B%2B)t.push(X%5Bi.operators%5Be%5D.amplitude%5D)%3Bt.push(82)%3Bfor(let%20e%3D0%3Be%3C(11%3D%3Di.type%3F6%3Au.operatorCount)%3Be%2B%2B)t.push(X%5Bi.operators%5Be%5D.waveform%5D)%2C2%3D%3Di.operators%5Be%5D.waveform%26%26t.push(X%5Bi.operators%5Be%5D.pulseWidth%5D)%7Delse%20if(9%3D%3Di.type)%7Bi.chipWave%3E186%3F(t.push(119%2CX%5Bi.chipWave-186%5D)%2Ct.push(X%5B3%5D))%3Ai.chipWave%3E124%3F(t.push(119%2CX%5Bi.chipWave-124%5D)%2Ct.push(X%5B2%5D))%3Ai.chipWave%3E62%3F(t.push(119%2CX%5Bi.chipWave-62%5D)%2Ct.push(X%5B1%5D))%3A(t.push(119%2CX%5Bi.chipWave%5D)%2Ct.push(X%5B0%5D))%2Ct.push(104%2CX%5Bi.unison%5D)%2Ci.unison%3D%3Du.unisons.length%26%26Q(t%2Ci.unisonVoices%2Ci.unisonSpread%2Ci.unisonOffset%2Ci.unisonExpression%2Ci.unisonSign)%2Ct.push(77)%3Bfor(let%20e%3D0%3Be%3C64%3Be%2B%2B)t.push(X%5Bi.customChipWave%5Be%5D%2B24%5D)%7Delse%20if(2%3D%3Di.type)t.push(119%2CX%5Bi.chipNoise%5D)%2Ct.push(104%2CX%5Bi.unison%5D)%2Ci.unison%3D%3Du.unisons.length%26%26Q(t%2Ci.unisonVoices%2Ci.unisonSpread%2Ci.unisonOffset%2Ci.unisonExpression%2Ci.unisonSign)%3Belse%20if(3%3D%3Di.type)%7Bt.push(83)%3Bconst%20e%3Dnew%20te%3Bfor(let%20t%3D0%3Bt%3Cu.spectrumControlPoints%3Bt%2B%2B)e.write(u.spectrumControlPointBits%2Ci.spectrumWave.spectrum%5Bt%5D)%3Be.encodeBase64(t)%2Ct.push(104%2CX%5Bi.unison%5D)%2Ci.unison%3D%3Du.unisons.length%26%26Q(t%2Ci.unisonVoices%2Ci.unisonSpread%2Ci.unisonOffset%2Ci.unisonExpression%2Ci.unisonSign)%7Delse%20if(4%3D%3Di.type)%7Bt.push(122)%3Bfor(let%20e%3D0%3Be%3Cu.drumCount%3Be%2B%2B)t.push(X%5Bi.drumsetEnvelopes%5Be%5D%5D)%3Bt.push(83)%3Bconst%20e%3Dnew%20te%3Bfor(let%20t%3D0%3Bt%3Cu.drumCount%3Bt%2B%2B)for(let%20s%3D0%3Bs%3Cu.spectrumControlPoints%3Bs%2B%2B)e.write(u.spectrumControlPointBits%2Ci.drumsetSpectrumWaves%5Bt%5D.spectrum%5Bs%5D)%3Be.encodeBase64(t)%7Delse%20if(5%3D%3Di.type)t.push(104%2CX%5Bi.unison%5D)%2Ci.unison%3D%3Du.unisons.length%26%26Q(t%2Ci.unisonVoices%2Ci.unisonSpread%2Ci.unisonOffset%2Ci.unisonExpression%2Ci.unisonSign)%3Belse%20if(6%3D%3Di.type)t.push(87%2CX%5Bi.pulseWidth%5D)%2Ct.push(X%5Bi.decimalOffset%3E%3E6%5D%2CX%5B63%26i.decimalOffset%5D)%2Ct.push(104%2CX%5Bi.unison%5D)%2Ci.unison%3D%3Du.unisons.length%26%26Q(t%2Ci.unisonVoices%2Ci.unisonSpread%2Ci.unisonOffset%2Ci.unisonExpression%2Ci.unisonSign)%3Belse%20if(8%3D%3Di.type)t.push(120%2CX%5Bi.supersawDynamism%5D%2CX%5Bi.supersawSpread%5D%2CX%5Bi.supersawShape%5D)%2Ct.push(87%2CX%5Bi.pulseWidth%5D)%2Ct.push(X%5Bi.decimalOffset%3E%3E6%5D%2CX%5B63%26i.decimalOffset%5D)%3Belse%20if(7%3D%3Di.type)%7Bif(u.stringSustainRange%3E32)throw%20new%20Error(%22Not%20enough%20bits%20to%20represent%20sustain%20value%20and%20type%20in%20same%20base64%20character.%22)%3Bt.push(104%2CX%5Bi.unison%5D)%2Ci.unison%3D%3Du.unisons.length%26%26Q(t%2Ci.unisonVoices%2Ci.unisonSpread%2Ci.unisonOffset%2Ci.unisonExpression%2Ci.unisonSign)%2Ct.push(73%2CX%5Bi.stringSustain%7Ci.stringSustainType%3C%3C5%5D)%7Delse%20if(10!%3Di.type)throw%20new%20Error(%22Unknown%20instrument%20type.%22)%3Bt.push(69%2CX%5Bi.envelopeCount%5D)%2Ct.push(X%5Bi.envelopeSpeed%5D)%2Ct.push(X%5B%2Bi.discreteEnvelope%5D)%3Bfor(let%20e%3D0%3Be%3Ci.envelopeCount%3Be%2B%2B)t.push(X%5Bi.envelopes%5Be%5D.target%5D)%2Cu.instrumentAutomationTargets%5Bi.envelopes%5Be%5D.target%5D.maxCount%3E1%26%26t.push(X%5Bi.envelopes%5Be%5D.index%5D)%2Ct.push(X%5Bi.envelopes%5Be%5D.envelope%5D)%7Dt.push(98)%2Ce%3Dnew%20te%3Blet%20a%3D0%3Bfor(%3B1%3C%3Ca%3Cthis.patternsPerChannel%2B1%3B)a%2B%2B%3Bfor(let%20t%3D0%3Bt%3Cthis.getChannelCount()%3Bt%2B%2B)for(let%20s%3D0%3Bs%3Cthis.barCount%3Bs%2B%2B)e.write(a%2Cthis.channels%5Bt%5D.bars%5Bs%5D)%3Be.encodeBase64(t)%2Ct.push(112)%2Ce%3Dnew%20te%3Bconst%20r%3Dnew%20te%2Co%3Dve.getNeededBits(u.noteSizeMax)%3Bfor(let%20t%3D0%3Bt%3Cthis.getChannelCount()%3Bt%2B%2B)%7Bconst%20s%3Dthis.channels%5Bt%5D%2Ci%3Dthis.getMaxInstrumentsPerPattern(t)%2Cn%3Dthis.getChannelIsNoise(t)%2Ca%3Dthis.getChannelIsMod(t)%2Cl%3Dve.getNeededBits(i-u.instrumentCountMin)%2Ch%3Dve.getNeededBits(s.instruments.length-1)%3Bif(a)%7Bconst%20i%3Dve.getNeededBits(this.getMaxInstrumentsPerChannel()%2B2)%3Bfor(let%20n%3D0%3Bn%3Cs.instruments.length%3Bn%2B%2B)%7Blet%20s%3Dthis.channels%5Bt%5D.instruments%5Bn%5D%3Bfor(let%20t%3D0%3Bt%3Cu.modCount%3Bt%2B%2B)%7Bconst%20n%3Ds.modChannels%5Bt%5D%2Ca%3Ds.modInstruments%5Bt%5D%2Cr%3Ds.modulators%5Bt%5D%2Co%3Ds.modFilterTypes%5Bt%5D%3Blet%20l%3Du.modulators%5Br%5D.forSong%3F2%3A0%3Br%3D%3Du.modulators.dictionary.none.index%26%26(l%3D3)%2Ce.write(2%2Cl)%2C0!%3Dl%26%261!%3Dl%7C%7C(e.write(8%2Cn)%2Ce.write(i%2Ca))%2C3!%3Dl%26%26e.write(6%2Cr)%2C%22eq%20filter%22!%3Du.modulators%5Bs.modulators%5Bt%5D%5D.name%26%26%22note%20filter%22!%3Du.modulators%5Bs.modulators%5Bt%5D%5D.name%7C%7Ce.write(6%2Co)%7D%7D%7Dconst%20c%3Dn%7C%7Ca%3F0%3As.octave*u.pitchesPerOctave%3Blet%20p%3Dn%3F4%3Ac%3Bconst%20f%3Da%3F%5B0%2C1%2C2%2C3%2C4%2C5%5D%3An%3F%5B4%2C6%2C7%2C2%2C3%2C8%2C0%2C10%5D%3A%5B0%2C7%2C12%2C19%2C24%2C-5%2C-12%5D%2Cm%3D%5B%5D%3Bfor(let%20e%3D0%3Be%3Cf.length%3Be%2B%2B)f%5Be%5D%2B%3Dc%3Bfor(const%20t%20of%20s.patterns)%7Bif(this.patternInstruments)%7Bconst%20s%3Dj(u.instrumentCountMin%2Ci%2Ct.instruments.length)%3Be.write(l%2Cs-u.instrumentCountMin)%3Bfor(let%20i%3D0%3Bi%3Cs%3Bi%2B%2B)e.write(h%2Ct.instruments%5Bi%5D)%7Dif(t.notes.length%3E0)%7Be.write(1%2C1)%3Blet%20s%3D0%3Bfor(const%20i%20of%20t.notes)%7Bi.start%3Cs%26%26a%26%26(e.write(2%2C0)%2Ce.write(1%2C1)%2Ce.writePartDuration(s-i.start))%2Ci.start%3Es%26%26(e.write(2%2C0)%2Ca%26%26e.write(1%2C0)%2Ce.writePartDuration(i.start-s))%2Cr.clear()%2C1%3D%3Di.pitches.length%3Fr.write(1%2C0)%3A(r.write(1%2C1)%2Cr.write(3%2Ci.pitches.length-2))%2Cr.writePinCount(i.pins.length-1)%2Ca%3Fr.write(9%2Ci.pins%5B0%5D.size)%3Ar.write(o%2Ci.pins%5B0%5D.size)%3Blet%20t%3D0%2Cn%3Di.pitches%5B0%5D%2Cl%3Dn%3Bconst%20h%3D%5B%5D%3Bfor(let%20e%3D1%3Be%3Ci.pins.length%3Be%2B%2B)%7Bconst%20s%3Di.pins%5Be%5D%2Cu%3Dn%2Bs.interval%3Bl!%3Du%3F(r.write(1%2C1)%2Ch.push(u)%2Cl%3Du)%3Ar.write(1%2C0)%2Cr.writePartDuration(s.time-t)%2Ct%3Ds.time%2Ca%3Fr.write(9%2Cs.size)%3Ar.write(o%2Cs.size)%7Dconst%20u%3DString.fromCharCode.apply(null%2Cr.encodeBase64(%5B%5D))%2Cc%3Dm.indexOf(u)%3B-1%3D%3Dc%3F(e.write(2%2C1)%2Ce.concat(r))%3A(e.write(1%2C1)%2Ce.writeLongTail(0%2C0%2Cc)%2Cm.splice(c%2C1))%2Cm.unshift(u)%2Cm.length%3E10%26%26m.pop()%3Bconst%20d%3Di.pitches.concat(h)%3Bfor(let%20t%3D0%3Bt%3Cd.length%3Bt%2B%2B)%7Bconst%20s%3Dd%5Bt%5D%2Cn%3Df.indexOf(s)%3Bif(-1%3D%3Dn)%7Blet%20t%3D0%2Ci%3Dp%3Bif(i%3Cs)for(%3Bi!%3Ds%3B)i%2B%2B%2C-1%3D%3Df.indexOf(i)%26%26t%2B%2B%3Belse%20for(%3Bi!%3Ds%3B)i--%2C-1%3D%3Df.indexOf(i)%26%26t--%3Be.write(1%2C0)%2Ce.writePitchInterval(t)%7Delse%20e.write(1%2C1)%2Ce.write(4%2Cn)%2Cf.splice(n%2C1)%3Bf.unshift(s)%2Cf.length%3E16%26%26f.pop()%2Cp%3Dt%3D%3Di.pitches.length-1%3Fi.pitches%5B0%5D%3As%7D0%3D%3Di.start%26%26e.write(1%2Ci.continuesLastPattern%3F1%3A0)%2Cs%3Di.end%7Ds%3Cthis.beatsPerBar*u.partsPerBeat%2B%20%2Ba%26%26(e.write(2%2C0)%2Ca%26%26e.write(1%2C0)%2Ce.writePartDuration(this.beatsPerBar*u.partsPerBeat%2B%20%2Ba-s))%7Delse%20e.write(1%2C0)%7D%7Dlet%20l%3De.lengthBase64()%2Ch%3D%5B%5D%3Bfor(%3Bl%3E0%3B)h.unshift(X%5B63%26l%5D)%2Cl%3E%3E%3D6%3Bt.push(X%5Bh.length%5D)%2CArray.prototype.push.apply(t%2Ch)%2Ce.encodeBase64(t)%3Bconst%20c%3D64e3%3Blet%20p%3D%22%22%3Bif(null!%3Dz.customSamples%26%26z.customSamples.length%3E0%26%26(p%3D%22%7C%22%2Bz.customSamples.join(%22%7C%22))%2Ct.length%3Cc)return%20String.fromCharCode.apply(null%2Ct)%2Bp%3B%7Blet%20e%3D%22%22%3Bfor(let%20s%3D0%3Bs%3Ct.length%3Bs%2B%3Dc)e%2B%3DString.fromCharCode.apply(null%2Ct.slice(s%2Cs%2Bc))%3Breturn%20e%2Bp%7D%7Dstatic%20I(e)%7Breturn%200%3D%3De%3Fe%3D1%3A1%3D%3De%26%26(e%3D0)%2Cu.envelopes%5B%24(0%2Cu.envelopes.length%2Ce)%5D%7DfromBase64String(e%2Ct%3D%22auto%22)%7Bif(null%3D%3De%7C%7C%22%22%3D%3De)return%20ve.q()%2Cvoid%20this.initToDefault(!0)%3Blet%20s%3D0%3Bfor(%3Be.charCodeAt(s)%3C%3D32%3B)s%2B%2B%3Bif(35%3D%3De.charCodeAt(s)%26%26s%2B%2B%2C123%3D%3De.charCodeAt(s))return%20void%20this.fromJsonObject(JSON.parse(0%3D%3Ds%3Fe%3Ae.substring(s))%2Ct)%3Bconst%20a%3De.charCodeAt(s)%3Blet%20o%2Cl%2Cc%2Cp%3B106%3D%3Da%3F(o%3D!1%2Cl%3D!0%2Cc%3D!1%2Cp%3D!1%2Cs%2B%2B)%3A103%3D%3Da%3F(o%3D!1%2Cl%3D!1%2Cc%3D!0%2Cp%3D!1%2Cs%2B%2B)%3A117%3D%3Da%3F(o%3D!1%2Cl%3D!1%2Cc%3D!1%2Cp%3D!0%2Cs%2B%2B)%3A100%3D%3Da%3F(o%3D!1%2Cl%3D!0%2Cc%3D!1%2Cp%3D!1%2Cs%2B%2B)%3A(o%3D!0%2Cl%3D!1%2Cc%3D!1%2Cp%3D!1)%3Bconst%20f%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3Bif(o%26%26(-1%3D%3Df%7C%7Cf%3Eve.T%7C%7Cf%3Cve.O))return%3Bif(l%26%26(-1%3D%3Df%7C%7Cf%3Eve.R%7C%7Cf%3Cve.H))return%3Bif(c%26%26(-1%3D%3Df%7C%7Cf%3Eve.L%7C%7Cf%3Cve.N))return%3Bif(p%26%26(-1%3D%3Df%7C%7Cf%3Eve.P%7C%7Cf%3Cve.V))return%3Bconst%20m%3Df%3C2%2Cd%3Df%3C3%2Cy%3Df%3C4%2Cv%3Df%3C5%2Cg%3Df%3C6%2Cb%3Df%3C7%2CA%3Df%3C8%2CC%3Df%3C9%3Bthis.initToDefault(o%26%26C%7C%7Cl%26%26v%7C%7Cy%26%26c)%3Bconst%20H%3Do%26%26C%7C%7Cl%26%26v%3Blet%20E%3D!1%3Bif(p%7C%7Cc)%7Bvar%20L%3D(e%3De.replaceAll(%22%257C%22%2C%22%7C%22)).split(%22%7C%22)%3Bif(e%3DL.shift()%2Cnull%3D%3Dz.customSamples%7C%7Cz.customSamples.join(%22%2C%20%22)!%3DL.join(%22%2C%20%22))%7Bve.W()%3Blet%20e%3D!1%2Ct%3D!1%2Cs%3D!1%3Bconst%20a%3D%5B%5D%2Co%3D%5B%5D%3Bi.statusTable%3D%7B%7D%2Ci.urlTable%3D%7B%7D%2Ci.totalSamples%3D0%2Ci.samplesLoaded%3D0%2Cr.dispatchEvent(new%20n(i.totalSamples%2Ci.samplesLoaded))%3Bfor(const%20n%20of%20L)if(%22legacysamples%22%3D%3D%3Dn.toLowerCase())e%7C%7C(e%3D!0%2Ca.push(n)%2Ch(0))%3Belse%20if(%22nintariboxsamples%22%3D%3D%3Dn.toLowerCase())t%7C%7C(t%3D!0%2Ca.push(n)%2Ch(1))%3Belse%20if(%22mariopaintboxsamples%22%3D%3D%3Dn.toLowerCase())s%7C%7C(s%3D!0%2Ca.push(n)%2Ch(2))%3Belse%7Bconst%20e%3Dd%3Bif(!ve.%24(n%2Ca%2Co%2Ci%2Ce))continue%7Dif(a.length%3E0%26%26(z.customSamples%3Da)%2Co.length%3E0)%7Bconst%20e%3DS(o)%3Bz.presetCategories%5Bz.presetCategories.length%5D%3D%7Bname%3A%22Custom%20Sample%20Presets%22%2Cpresets%3Ae%2Cindex%3Az.presetCategories.length%7D%7D%7D%7Dif(d%26%26o)%7Bfor(const%20e%20of%20this.channels)e.instruments%5B0%5D.transition%3Du.transitions.dictionary.interrupt.index%2Ce.instruments%5B0%5D.effects%7C%3D1024%3Bthis.channels%5B3%5D.instruments%5B0%5D.chipNoise%3D0%7Dlet%20N%3Dnull%3Bif(o%26%26C%7C%7Cl%26%26v%7C%7Cy%26%26c)%7BN%3D%5B%5D%3Bfor(let%20e%3DN.length%3Be%3Cthis.getChannelCount()%3Be%2B%2B)%7BN%5Be%5D%3D%5B%5D%3Bfor(let%20t%3D0%3Bt%3Cu.instrumentCountMin%3Bt%2B%2B)N%5Be%5D%5Bt%5D%3D%7B%7D%7D%7Dlet%20G%2CV%3D0%2CB%3D0%2CW%3D-1%2CU%3D!1%2C_%3D!1%3Bfor(%3Bs%3Ce.length%3B)switch(G%3De.charCodeAt(s%2B%2B))%7Bcase%2078%3Avar%20K%3D(Z%5Be.charCodeAt(s%2B%2B)%5D%3C%3C6)%2BZ%5Be.charCodeAt(s%2B%2B)%5D%3Bthis.title%3DdecodeURIComponent(e.substring(s%2Cs%2BK))%2Cs%2B%3DK%3Bbreak%3Bcase%20110%3Athis.pitchChannelCount%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2Cthis.noiseChannelCount%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2Cthis.modChannelCount%3Do%7C%7Cl%26%26m%3F0%3AZ%5Be.charCodeAt(s%2B%2B)%5D%2Cthis.pitchChannelCount%3Dj(u.pitchChannelCountMin%2Cu.pitchChannelCountMax%2Cthis.pitchChannelCount)%2Cthis.noiseChannelCount%3Dj(u.noiseChannelCountMin%2Cu.noiseChannelCountMax%2Cthis.noiseChannelCount)%2Cthis.modChannelCount%3Dj(u.modChannelCountMin%2Cu.modChannelCountMax%2Cthis.modChannelCount)%3Bfor(let%20e%3Dthis.channels.length%3Be%3Cthis.getChannelCount()%3Be%2B%2B)this.channels%5Be%5D%3Dnew%20ye%3Bif(this.channels.length%3Dthis.getChannelCount()%2Co%26%26C%7C%7Cl%26%26v%7C%7Cy%26%26c)for(let%20e%3DN.length%3Be%3Cthis.getChannelCount()%3Be%2B%2B)%7BN%5Be%5D%3D%5B%5D%3Bfor(let%20t%3D0%3Bt%3Cu.instrumentCountMin%3Bt%2B%2B)N%5Be%5D%5Bt%5D%3D%7B%7D%7Dbreak%3Bcase%20115%3Aif(this.scale%3D%24(0%2Cu.scales.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Cthis.scale%3D%3Du.scales.dictionary.Custom.index)for(var%20Q%3D1%3BQ%3Cu.pitchesPerOctave%3BQ%2B%2B)this.scaleCustom%5BQ%5D%3D1%3D%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3Bo%26%26(this.scale%3D0)%3Bbreak%3Bcase%20107%3Aif(b%26%26o)this.key%3D%24(0%2Cu.keys.length%2C11-Z%5Be.charCodeAt(s%2B%2B)%5D)%2Cthis.octave%3D0%3Belse%20if(o%7C%7Cl)this.key%3D%24(0%2Cu.keys.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Cthis.octave%3D0%3Belse%20if(c%7C%7Cd%26%26p)%7Bconst%20t%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2C%5Bi%2Cn%5D%3DY(t)%3Bthis.key%3Di%2Cthis.octave%3Dn%7Delse%20this.key%3D%24(0%2Cu.keys.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Cthis.octave%3D%24(u.octaveMin%2Cu.octaveMax%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D%2Bu.octaveMin)%3Bbreak%3Bcase%20108%3Athis.loopStart%3Dv%26%26o%3FZ%5Be.charCodeAt(s%2B%2B)%5D%3A(Z%5Be.charCodeAt(s%2B%2B)%5D%3C%3C6)%2BZ%5Be.charCodeAt(s%2B%2B)%5D%3Bbreak%3Bcase%20101%3Athis.loopLength%3Dv%26%26o%3FZ%5Be.charCodeAt(s%2B%2B)%5D%3A(Z%5Be.charCodeAt(s%2B%2B)%5D%3C%3C6)%2BZ%5Be.charCodeAt(s%2B%2B)%5D%2B1%3Bbreak%3Bcase%20116%3Athis.tempo%3Dy%26%26o%3F%5B95%2C120%2C151%2C190%5D%5BZ%5Be.charCodeAt(s%2B%2B)%5D%5D%3Ab%26%26o%3F%5B88%2C95%2C103%2C111%2C120%2C130%2C140%2C151%2C163%2C176%2C190%2C206%2C222%2C240%2C259%5D%5BZ%5Be.charCodeAt(s%2B%2B)%5D%5D%3AZ%5Be.charCodeAt(s%2B%2B)%5D%3C%3C6%7CZ%5Be.charCodeAt(s%2B%2B)%5D%2Cthis.tempo%3D%24(u.tempoMin%2Cu.tempoMax%2B1%2Cthis.tempo)%3Bbreak%3Bcase%20109%3AC%26%26o%3F(V%3D12*Z%5Be.charCodeAt(s%2B%2B)%5D%2CV%3D%24(0%2Cu.reverbRange%2CV))%3A(l%26%26v%7C%7Cy%26%26c)%26%26(V%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2CV%3D%24(0%2Cu.reverbRange%2CV))%3Bbreak%3Bcase%2097%3Athis.beatsPerBar%3Dd%26%26o%3F%5B6%2C7%2C8%2C9%2C10%5D%5BZ%5Be.charCodeAt(s%2B%2B)%5D%5D%3AZ%5Be.charCodeAt(s%2B%2B)%5D%2B1%2Cthis.beatsPerBar%3DMath.max(u.beatsPerBarMin%2CMath.min(u.beatsPerBarMax%2Cthis.beatsPerBar))%3Bbreak%3Bcase%20103%3A%7Bconst%20t%3D(Z%5Be.charCodeAt(s%2B%2B)%5D%3C%3C6)%2BZ%5Be.charCodeAt(s%2B%2B)%5D%2B1%3Bthis.barCount%3Dj(u.barCountMin%2Cu.barCountMax%2Ct)%3Bfor(let%20e%3D0%3Be%3Cthis.getChannelCount()%3Be%2B%2B)%7Bfor(let%20t%3Dthis.channels%5Be%5D.bars.length%3Bt%3Cthis.barCount%3Bt%2B%2B)this.channels%5Be%5D.bars%5Bt%5D%3Dt%3C4%3F1%3A0%3Bthis.channels%5Be%5D.bars.length%3Dthis.barCount%7D%7Dbreak%3Bcase%20106%3A%7Blet%20t%3Bt%3DA%26%26o%3FZ%5Be.charCodeAt(s%2B%2B)%5D%2B1%3A(Z%5Be.charCodeAt(s%2B%2B)%5D%3C%3C6)%2BZ%5Be.charCodeAt(s%2B%2B)%5D%2B1%2Cthis.patternsPerChannel%3Dj(1%2Cu.barCountMax%2Ct)%3Bconst%20i%3Dthis.getChannelCount()%3Bfor(let%20e%3D0%3Be%3Ci%3Be%2B%2B)%7Bconst%20t%3Dthis.channels%5Be%5D.patterns%3Bfor(let%20e%3Dt.length%3Be%3Cthis.patternsPerChannel%3Be%2B%2B)t%5Be%5D%3Dnew%20ne%3Bt.length%3Dthis.patternsPerChannel%7D%7Dbreak%3Bcase%20105%3Aif(C%26%26o%7C%7Cl%26%26v%7C%7Cy%26%26c)%7Bconst%20t%3Dj(u.instrumentCountMin%2Cu.patternInstrumentCountMax%2CZ%5Be.charCodeAt(s%2B%2B)%5D%2Bu.instrumentCountMin)%3Bthis.layeredInstruments%3D!1%2Cthis.patternInstruments%3Dt%3E1%3Bfor(let%20e%3D0%3Be%3Cthis.getChannelCount()%3Be%2B%2B)%7Bconst%20s%3De%3E%3Dthis.pitchChannelCount%26%26e%3Cthis.pitchChannelCount%2Bthis.noiseChannelCount%2Ci%3De%3E%3Dthis.pitchChannelCount%2Bthis.noiseChannelCount%3Bfor(let%20n%3Dthis.channels%5Be%5D.instruments.length%3Bn%3Ct%3Bn%2B%2B)this.channels%5Be%5D.instruments%5Bn%5D%3Dnew%20de(s%2Ci)%3Bif(this.channels%5Be%5D.instruments.length%3Dt%2Cg%26%26o)for(let%20n%3D0%3Bn%3Ct%3Bn%2B%2B)this.channels%5Be%5D.instruments%5Bn%5D.setTypeAndReset(s%3F2%3A0%2Cs%2Ci)%3Bfor(let%20s%3DN%5Be%5D.length%3Bs%3Ct%3Bs%2B%2B)N%5Be%5D%5Bs%5D%3D%7B%7D%7D%7Delse%7Bconst%20t%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3Bthis.layeredInstruments%3D0!%3D(2%26t)%2Cthis.patternInstruments%3D0!%3D(1%26t)%3Bfor(let%20t%3D0%3Bt%3Cthis.getChannelCount()%3Bt%2B%2B)%7Blet%20i%3D1%3B(this.layeredInstruments%7C%7Cthis.patternInstruments)%26%26(i%3Dj(u.instrumentCountMin%2Cthis.getMaxInstrumentsPerChannel()%2CZ%5Be.charCodeAt(s%2B%2B)%5D%2Bu.instrumentCountMin))%3Bconst%20n%3Dthis.channels%5Bt%5D%2Ca%3Dthis.getChannelIsNoise(t)%2Cr%3Dthis.getChannelIsMod(t)%3Bfor(let%20e%3Dn.instruments.length%3Be%3Ci%3Be%2B%2B)n.instruments%5Be%5D%3Dnew%20de(a%2Cr)%3Bn.instruments.length%3Di%7D%7Dbreak%3Bcase%20114%3Ap%3Fthis.rhythm%3D%24(0%2Cu.rhythms.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%3A(this.rhythm%3D%24(0%2Cu.rhythms.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2C(l%26%26d%7C%7Co)%26%26(this.rhythm!%3Du.rhythms.dictionary%5B%22%C3%B73%20(triplets)%22%5D.index%26%26this.rhythm!%3Du.rhythms.dictionary%5B%22%C3%B76%22%5D.index%7C%7C(U%3D!0)%2Cthis.rhythm%3E%3Du.rhythms.dictionary%5B%22%C3%B76%22%5D.index%26%26(_%3D!0)))%3Bbreak%3Bcase%20111%3Aif(d%26%26o)%7Bconst%20t%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3Bthis.channels%5Bt%5D.octave%3D%24(0%2Cu.pitchOctaves%2CZ%5Be.charCodeAt(s%2B%2B)%5D%2B1)%2Ct%3E%3Dthis.pitchChannelCount%26%26(this.channels%5Bt%5D.octave%3D0)%7Delse%20if(C%26%26o%7C%7Cl%26%26v%7C%7Cy%26%26c)for(let%20t%3D0%3Bt%3Cthis.getChannelCount()%3Bt%2B%2B)this.channels%5Bt%5D.octave%3D%24(0%2Cu.pitchOctaves%2CZ%5Be.charCodeAt(s%2B%2B)%5D%2B1)%2Ct%3E%3Dthis.pitchChannelCount%26%26(this.channels%5Bt%5D.octave%3D0)%3Belse%7Bfor(let%20t%3D0%3Bt%3Cthis.pitchChannelCount%3Bt%2B%2B)this.channels%5Bt%5D.octave%3D%24(0%2Cu.pitchOctaves%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%3Bfor(let%20e%3Dthis.pitchChannelCount%3Be%3Cthis.getChannelCount()%3Be%2B%2B)this.channels%5Be%5D.octave%3D0%7Dbreak%3Bcase%2084%3A%7BW%2B%2B%2CW%3E%3Dthis.channels%5BB%5D.instruments.length%26%26(B%2B%2B%2CW%3D0)%2Cj(0%2Cthis.channels.length-1%2CB)%3Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Blet%20i%3Dj(0%2C11%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%3Bl%26%26v%7C%7Cy%26%26c%3F7!%3Di%26%268!%3Di%7C%7C(i%2B%3D2)%3A(l%26%26g%7C%7Cc%26%26!y%7C%7Cp%26%26v)%26%26(8!%3Di%26%269!%3Di%26%2610!%3Di%7C%7C(i%2B%3D1))%2Ct.setTypeAndReset(i%2CB%3E%3Dthis.pitchChannelCount%26%26B%3Cthis.pitchChannelCount%2Bthis.noiseChannelCount%2CB%3E%3Dthis.pitchChannelCount%2Bthis.noiseChannelCount)%2C!(b%26%26o%7C%7Cm%26%26l)%7C%7C0!%3Di%26%269!%3Di%26%266!%3Di%7C%7C(t.aliases%3D!0%2Ct.distortion%3D0%2Ct.effects%7C%3D8)%2CU%26%26(t.arpeggioSpeed%3D9)%2C_%26%26(t.fastTwoNoteArp%3D!0)%2Cb%26%26o%26%26t.chord!%3Du.chords.dictionary.simultaneous.index%26%26(t.effects%7C%3D2048)%7Dbreak%3Bcase%20117%3A%7Bconst%20t%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3C%3C6%7CZ%5Be.charCodeAt(s%2B%2B)%5D%3Bthis.channels%5BB%5D.instruments%5BW%5D.preset%3Dt%2Cl%26%26v%7C%7Cy%26%26c%3F7%3D%3Dthis.channels%5BB%5D.instruments%5BW%5D.preset%26%26(this.channels%5BB%5D.instruments%5BW%5D.preset%3D9%2Cthis.channels%5BB%5D.instruments%5BW%5D.type%3D9)%3A(l%26%26g%7C%7Cp%26%26v)%26%26(8%3D%3Dthis.channels%5BB%5D.instruments%5BW%5D.preset%26%26(this.channels%5BB%5D.instruments%5BW%5D.preset%3D9%2Cthis.channels%5BB%5D.instruments%5BW%5D.type%3D9)%2C10%3D%3Dthis.channels%5BB%5D.instruments%5BW%5D.preset%26%26(this.channels%5BB%5D.instruments%5BW%5D.preset%3D11%2Cthis.channels%5BB%5D.instruments%5BW%5D.type%3D11))%2Co%26%26t%3D%3Dz.nameToPresetValue(%22grand%20piano%201%22)%26%26(this.channels%5BB%5D.instruments%5BW%5D.preset%3Dz.nameToPresetValue(%22grand%20piano%203%22))%7Dbreak%3Bcase%20119%3Aif(d%26%26o)%7Bconst%20t%3D%5B1%2C2%2C3%2C4%2C5%2C6%2C7%2C8%2C0%5D%2Ci%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2Cn%3Dthis.channels%5Bi%5D.instruments%5B0%5D%3Bn.chipWave%3D%24(0%2Cu.chipWaves.length%2C0%7Ct%5BZ%5Be.charCodeAt(s%2B%2B)%5D%5D)%2Cn.convertLegacySettings(N%5Bi%5D%5B0%5D%2CH)%7Delse%20if(g%26%26o)%7Bconst%20t%3D%5B1%2C2%2C3%2C4%2C5%2C6%2C7%2C8%2C0%5D%3Bfor(let%20i%3D0%3Bi%3Cthis.getChannelCount()%3Bi%2B%2B)for(const%20n%20of%20this.channels%5Bi%5D.instruments)i%3E%3Dthis.pitchChannelCount%3Fn.chipNoise%3D%24(0%2Cu.chipNoises.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%3An.chipWave%3D%24(0%2Cu.chipWaves.length%2C0%7Ct%5BZ%5Be.charCodeAt(s%2B%2B)%5D%5D)%7Delse%20if(b%26%26o)%7Bconst%20t%3D%5B1%2C2%2C3%2C4%2C5%2C6%2C7%2C8%2C0%5D%3BB%3E%3Dthis.pitchChannelCount%3Fthis.channels%5BB%5D.instruments%5BW%5D.chipNoise%3D%24(0%2Cu.chipNoises.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%3Athis.channels%5BB%5D.instruments%5BW%5D.chipWave%3D%24(0%2Cu.chipWaves.length%2C0%7Ct%5BZ%5Be.charCodeAt(s%2B%2B)%5D%5D)%7Delse%20if(2%3D%3Dthis.channels%5BB%5D.instruments%5BW%5D.type)this.channels%5BB%5D.instruments%5BW%5D.chipNoise%3D%24(0%2Cu.chipNoises.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%3Belse%20if(p)%7Bconst%20t%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2Ci%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3Bthis.channels%5BB%5D.instruments%5BW%5D.chipWave%3D%24(0%2Cu.chipWaves.length%2C3%3D%3Di%3Ft%2B186%3A2%3D%3Di%3Ft%2B124%3A1%3D%3Di%3Ft%2B62%3At)%7Delse%20this.channels%5BB%5D.instruments%5BW%5D.chipWave%3D%24(0%2Cu.chipWaves.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%3Bbreak%3Bcase%20102%3Aif(C%26%26o%7C%7Cv%26%26l%7C%7Cy%26%26c)if(b%26%26o)%7Bconst%20t%3D%5B10%2C6%2C3%2C0%2C8%2C5%2C2%5D%2Ci%3D%5B%22none%22%2C%22none%22%2C%22none%22%2C%22none%22%2C%22decay%201%22%2C%22decay%202%22%2C%22decay%203%22%5D%3Bif(d%26%26o)%7Bconst%20n%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2Ca%3Dthis.channels%5Bn%5D.instruments%5B0%5D%2Cr%3DN%5Bn%5D%5B0%5D%2Co%3D%5B1%2C3%2C4%2C5%5D%5B%24(0%2Ct.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%5D%3Br.filterCutoff%3Dt%5Bo%5D%2Cr.filterResonance%3D0%2Cr.filterEnvelope%3Du.envelopes.dictionary%5Bi%5Bo%5D%5D%2Ca.convertLegacySettings(r%2CH)%7Delse%20if(g%26%26o)for(let%20n%3D0%3Bn%3Cthis.getChannelCount()%3Bn%2B%2B)for(let%20a%3D0%3Ba%3Cthis.channels%5Bn%5D.instruments.length%3Ba%2B%2B)%7Bconst%20r%3Dthis.channels%5Bn%5D.instruments%5Ba%5D%2Co%3DN%5Bn%5D%5Ba%5D%2Cl%3D%24(0%2Ct.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D%2B1)%3Bn%3Cthis.pitchChannelCount%3F(o.filterCutoff%3Dt%5Bl%5D%2Co.filterResonance%3D0%2Co.filterEnvelope%3Du.envelopes.dictionary%5Bi%5Bl%5D%5D)%3A(o.filterCutoff%3D10%2Co.filterResonance%3D0%2Co.filterEnvelope%3Du.envelopes.dictionary.none)%2Cr.convertLegacySettings(o%2CH)%7Delse%7Bconst%20n%3D%24(0%2Ct.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ca%3Dthis.channels%5BB%5D.instruments%5BW%5D%2Cr%3DN%5BB%5D%5BW%5D%3Br.filterCutoff%3Dt%5Bn%5D%2Cr.filterResonance%3D0%2Cr.filterEnvelope%3Du.envelopes.dictionary%5Bi%5Bn%5D%5D%2Ca.convertLegacySettings(r%2CH)%7D%7Delse%7Bconst%20t%3D11%2Ci%3Dthis.channels%5BB%5D.instruments%5BW%5D%2Cn%3DN%5BB%5D%5BW%5D%3Bn.filterCutoff%3D%24(0%2Ct%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ci.convertLegacySettings(n%2CH)%7Delse%7Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Blet%20i%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3Bif(o%7C%7C0%3D%3Di)%7Bt.eqFilterType%3D!1%2C(l%7C%7Cc%7C%7Cp)%26%26(i%3DZ%5Be.charCodeAt(s%2B%2B)%5D)%3Bconst%20n%3Di%3Bt.eqFilter.controlPointCount%3D%24(0%2Cu.filterMaxPoints%2B1%2Cn)%3Bfor(let%20e%3Dt.eqFilter.controlPoints.length%3Be%3Ct.eqFilter.controlPointCount%3Be%2B%2B)t.eqFilter.controlPoints%5Be%5D%3Dnew%20pe%3Bfor(let%20i%3D0%3Bi%3Ct.eqFilter.controlPointCount%3Bi%2B%2B)%7Bconst%20n%3Dt.eqFilter.controlPoints%5Bi%5D%3Bn.type%3D%24(0%2C3%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Cn.freq%3D%24(0%2Cu.filterFreqRange%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Cn.gain%3D%24(0%2Cu.filterGainRange%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%7Dfor(let%20e%3Dt.eqFilter.controlPointCount%3Be%3Cn%3Be%2B%2B)s%2B%3D3%3Bif(t.eqSubFilters%5B0%5D%3Dt.eqFilter%2Cl%26%26!v%7C%7Cc%26%26!y%7C%7Cp)%7Blet%20i%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3C%3C6%7CZ%5Be.charCodeAt(s%2B%2B)%5D%3Bfor(let%20n%3D0%3Bn%3Cu.filterMorphCount-1%3Bn%2B%2B)if(i%261%3C%3Cn)%7Bconst%20i%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3Bnull%3D%3Dt.eqSubFilters%5Bn%2B1%5D%26%26(t.eqSubFilters%5Bn%2B1%5D%3Dnew%20fe)%2Ct.eqSubFilters%5Bn%2B1%5D.controlPointCount%3D%24(0%2Cu.filterMaxPoints%2B1%2Ci)%3Bfor(let%20e%3Dt.eqSubFilters%5Bn%2B1%5D.controlPoints.length%3Be%3Ct.eqSubFilters%5Bn%2B1%5D.controlPointCount%3Be%2B%2B)t.eqSubFilters%5Bn%2B1%5D.controlPoints%5Be%5D%3Dnew%20pe%3Bfor(let%20i%3D0%3Bi%3Ct.eqSubFilters%5Bn%2B1%5D.controlPointCount%3Bi%2B%2B)%7Bconst%20a%3Dt.eqSubFilters%5Bn%2B1%5D.controlPoints%5Bi%5D%3Ba.type%3D%24(0%2C3%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ca.freq%3D%24(0%2Cu.filterFreqRange%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ca.gain%3D%24(0%2Cu.filterGainRange%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%7Dfor(let%20e%3Dt.eqSubFilters%5Bn%2B1%5D.controlPointCount%3Be%3Ci%3Be%2B%2B)s%2B%3D3%7D%7D%7Delse%20t.eqFilterType%3D!0%2Ct.eqFilterSimpleCut%3D%24(0%2Cu.filterSimpleCutRange%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ct.eqFilterSimplePeak%3D%24(0%2Cu.filterSimplePeakRange%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%7Dbreak%3Bcase%20121%3Aif(p)if(d)%7Bconst%20t%3DJ(e%2Cs)%3Bs%2B%3D6%3Bconst%20i%3De.slice(s%2Cs%2Bt)%3Bs%2B%3Dt%3Bconst%20n%3DJSON.parse(atob(i))%3Bfor(const%20e%20of%20n)%7Bconst%20t%3De.channel%2Cs%3De.instrument%2Ci%3De.info%2Cn%3Dthis.channels%5Bt%5D.instruments%5Bs%5D%3Bn.isUsingAdvancedLoopControls%3Di.isUsingAdvancedLoopControls%2Cn.chipWaveLoopStart%3Di.chipWaveLoopStart%2Cn.chipWaveLoopEnd%3Di.chipWaveLoopEnd%2Cn.chipWaveLoopMode%3Di.chipWaveLoopMode%2Cn.chipWavePlayBackwards%3Di.chipWavePlayBackwards%2Cn.chipWaveStartOffset%3Di.chipWaveStartOffset%7D%7Delse%7Bconst%20t%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2Ci%3DBoolean(1%26t)%2Cn%3Dt%3E%3E1%2Ca%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2Cr%3DBoolean(1%26a)%2Co%3DJ(e%2Cs)%3Bs%2B%3D6%3Bconst%20l%3DJ(e%2Cs)%3Bs%2B%3D6%3Bconst%20h%3DJ(e%2Cs)%3Bs%2B%3D6%3Bconst%20u%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Bu.isUsingAdvancedLoopControls%3Di%2Cu.chipWaveLoopStart%3Do%2Cu.chipWaveLoopEnd%3Dl%2Cu.chipWaveLoopMode%3Dn%2Cu.chipWavePlayBackwards%3Dr%2Cu.chipWaveStartOffset%3Dh%7Delse%20if(c%26%26!y%26%26g)%22legacysamples%22!%3Ddocument.URL.substring(document.URL.length-13).toLowerCase()%26%26(E%7C%7C(E%3D!0%2Cu.willReloadForCustomSamples%3D!1%2Cz.customSamples%3D%5B%22legacySamples%22%5D%2Ch(0)))%2Cthis.channels%5BB%5D.instruments%5BW%5D.chipWave%3D%24(0%2Cu.chipWaves.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D%2B125)%3Belse%20if(C%26%26o%7C%7Cl%26%26v%7C%7Cy%26%26c)%7Bconst%20t%3D8%2Ci%3Dthis.channels%5BB%5D.instruments%5BW%5D%2Cn%3DN%5BB%5D%5BW%5D%3Bn.filterResonance%3D%24(0%2Ct%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ci.convertLegacySettings(n%2CH)%7Dbreak%3Bcase%20122%3A%7Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%2Ci%3D%5B0%2C1%2C2%2C4%2C5%2C6%2C8%2C9%2C10%2C12%2C13%2C14%2C16%2C17%2C18%2C19%2C20%2C21%2C23%2C24%2C25%2C27%2C28%2C29%2C32%2C33%2C34%2C31%2C11%5D%3Bif(C%26%26o%7C%7Cv%26%26l%7C%7Cy%26%26c)if(4%3D%3Dt.type)for(let%20n%3D0%3Bn%3Cu.drumCount%3Bn%2B%2B)%7Blet%20a%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3B(m%26%26c%7C%7C!c%26%26!p)%26%26(a%3Di%5Ba%5D)%2Ct.drumsetEnvelopes%5Bn%5D%3Dve.I(a).index%7Delse%7Bconst%20n%3DN%5BB%5D%5BW%5D%3Blet%20a%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3B(m%26%26c%7C%7C!c%26%26!p)%26%26(a%3Di%5Ba%5D)%2Cn.filterEnvelope%3Dve.I(a)%2Ct.convertLegacySettings(n%2CH)%7Delse%20for(let%20n%3D0%3Bn%3Cu.drumCount%3Bn%2B%2B)%7Blet%20a%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3B(m%26%26c%7C%7C!c%26%26!p)%26%26(a%3Di%5Ba%5D)%2Ct.drumsetEnvelopes%5Bn%5D%3D%24(0%2Cu.envelopes.length%2Ca)%7D%7Dbreak%3Bcase%2087%3A%7Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Bif(t.pulseWidth%3D%24(0%2Cu.pulseWidthRange%2B%20%2Bl%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Co%26%26(t.pulseWidth%3DMath.round(Math.pow(.5%2C(7-t.pulseWidth)*u.pulseWidthStepPower)*u.pulseWidthRange))%2CC%26%26o%7C%7Cv%26%26l%7C%7Cy%26%26c)%7Bconst%20i%3D%5B0%2C1%2C2%2C4%2C5%2C6%2C8%2C9%2C10%2C12%2C13%2C14%2C16%2C17%2C18%2C19%2C20%2C21%2C23%2C24%2C25%2C27%2C28%2C29%2C32%2C33%2C34%2C31%2C11%5D%2Cn%3DN%5BB%5D%5BW%5D%3Blet%20a%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3B(m%26%26c%7C%7C!c%26%26!p)%26%26(a%3Di%5Ba%5D)%2Cn.pulseEnvelope%3Dve.I(a)%2Ct.convertLegacySettings(n%2CH)%7Dp%26%26!y%26%26(t.decimalOffset%3D%24(0%2C100%2C(Z%5Be.charCodeAt(s%2B%2B)%5D%3C%3C6)%2BZ%5Be.charCodeAt(s%2B%2B)%5D))%7Dbreak%3Bcase%2073%3A%7Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%2Ci%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3Bt.stringSustain%3D%24(0%2Cu.stringSustainRange%2C31%26i)%2Ct.stringSustainType%3Du.enableAcousticSustain%3F%24(0%2C2%2Ci%3E%3E5)%3A0%7Dbreak%3Bcase%20100%3Aif(C%26%26o%7C%7Cl%26%26v%7C%7Cy%26%26c)%7Bconst%20t%3D%5B%7Btransition%3A%22interrupt%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-1%7D%2C%7Btransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%7D%2C%7Btransition%3A%22normal%22%2CfadeInSeconds%3A.025%2CfadeOutTicks%3A-3%7D%2C%7Btransition%3A%22slide%20in%20pattern%22%2CfadeInSeconds%3A.025%2CfadeOutTicks%3A-3%7D%2C%7Btransition%3A%22normal%22%2CfadeInSeconds%3A.04%2CfadeOutTicks%3A6%7D%2C%7Btransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A48%7D%2C%7Btransition%3A%22normal%22%2CfadeInSeconds%3A.0125%2CfadeOutTicks%3A72%7D%2C%7Btransition%3A%22normal%22%2CfadeInSeconds%3A.06%2CfadeOutTicks%3A96%7D%2C%7Btransition%3A%22slide%20in%20pattern%22%2CfadeInSeconds%3A.025%2CfadeOutTicks%3A-3%7D%5D%3Bif(d%26%26o)%7Bconst%20i%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2Cn%3Dt%5B%24(0%2Ct.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%5D%2Ca%3Dthis.channels%5Bi%5D.instruments%5B0%5D%3Ba.fadeIn%3Dxe.secondsToFadeInSetting(n.fadeInSeconds)%2Ca.fadeOut%3Dxe.ticksToFadeOutSetting(n.fadeOutTicks)%2Ca.transition%3Du.transitions.dictionary%5Bn.transition%5D.index%2Ca.transition!%3Du.transitions.dictionary.normal.index%26%26(a.effects%7C%3D1024)%7Delse%20if(g%26%26o)for(let%20i%3D0%3Bi%3Cthis.getChannelCount()%3Bi%2B%2B)for(const%20n%20of%20this.channels%5Bi%5D.instruments)%7Bconst%20i%3Dt%5B%24(0%2Ct.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%5D%3Bn.fadeIn%3Dxe.secondsToFadeInSetting(i.fadeInSeconds)%2Cn.fadeOut%3Dxe.ticksToFadeOutSetting(i.fadeOutTicks)%2Cn.transition%3Du.transitions.dictionary%5Bi.transition%5D.index%2Cn.transition!%3Du.transitions.dictionary.normal.index%26%26(n.effects%7C%3D1024)%7Delse%20if(y%26%26!c%26%26!p%7C%7Co)%7Bconst%20i%3Dt%5B%24(0%2Ct.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%5D%2Cn%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Bn.fadeIn%3Dxe.secondsToFadeInSetting(i.fadeInSeconds)%2Cn.fadeOut%3Dxe.ticksToFadeOutSetting(i.fadeOutTicks)%2Cn.transition%3Du.transitions.dictionary%5Bi.transition%5D.index%2Cn.transition!%3Du.transitions.dictionary.normal.index%26%26(n.effects%7C%3D1024)%7Delse%7Bconst%20i%3Dt%5B%24(0%2Ct.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%5D%2Cn%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Bn.fadeIn%3Dxe.secondsToFadeInSetting(i.fadeInSeconds)%2Cn.fadeOut%3Dxe.ticksToFadeOutSetting(i.fadeOutTicks)%2Cn.transition%3Du.transitions.dictionary%5Bi.transition%5D.index%2CZ%5Be.charCodeAt(s%2B%2B)%5D%3E0%26%26(n.legacyTieOver%3D!0)%2Cn.clicklessTransition%3D!!Z%5Be.charCodeAt(s%2B%2B)%5D%2C(n.transition!%3Du.transitions.dictionary.normal.index%7C%7Cn.clicklessTransition)%26%26(n.effects%7C%3D1024)%7D%7Delse%7Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Bt.fadeIn%3D%24(0%2Cu.fadeInRange%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ct.fadeOut%3D%24(0%2Cu.fadeOutTicks.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2C(l%7C%7Cc%7C%7Cp)%26%26(t.clicklessTransition%3D!!Z%5Be.charCodeAt(s%2B%2B)%5D)%7Dbreak%3Bcase%2099%3Aif(C%26%26o%7C%7Cl%26%26v%7C%7Cy%26%26c)if(b%26%26o)if(d%26%26o)%7Bconst%20t%3D%5B0%2C3%2C2%2C0%5D%2Ci%3D%5B%22none%22%2C%22none%22%2C%22none%22%2C%22tremolo2%22%5D%2Cn%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2Ca%3D%24(0%2Ct.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Cr%3Dthis.channels%5Bn%5D.instruments%5B0%5D%2Co%3DN%5Bn%5D%5B0%5D%3Br.vibrato%3Dt%5Ba%5D%2Cnull!%3Do.filterEnvelope%26%261!%3Do.filterEnvelope.type%7C%7C(o.filterEnvelope%3Du.envelopes.dictionary%5Bi%5Ba%5D%5D%2Cr.convertLegacySettings(o%2CH))%2Cr.vibrato!%3Du.vibratos.dictionary.none.index%26%26(r.effects%7C%3D512)%7Delse%20if(g%26%26o)%7Bconst%20t%3D%5B0%2C1%2C2%2C3%2C0%2C0%5D%2Ci%3D%5B%22none%22%2C%22none%22%2C%22none%22%2C%22none%22%2C%22tremolo5%22%2C%22tremolo2%22%5D%3Bfor(let%20n%3D0%3Bn%3Cthis.getChannelCount()%3Bn%2B%2B)for(let%20a%3D0%3Ba%3Cthis.channels%5Bn%5D.instruments.length%3Ba%2B%2B)%7Bconst%20r%3D%24(0%2Ct.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Co%3Dthis.channels%5Bn%5D.instruments%5Ba%5D%2Ch%3DN%5Bn%5D%5Ba%5D%3Bo.vibrato%3Dt%5Br%5D%2Cnull!%3Dh.filterEnvelope%26%261!%3Dh.filterEnvelope.type%7C%7C(h.filterEnvelope%3Du.envelopes.dictionary%5Bi%5Br%5D%5D%2Co.convertLegacySettings(h%2CH))%2Co.vibrato!%3Du.vibratos.dictionary.none.index%26%26(o.effects%7C%3D512)%2C(0!%3DV%7C%7Cl%26%26v%7C%7Cy%26%26c)%26%26!this.getChannelIsNoise(n)%26%26(o.effects%7C%3D1%2Co.reverb%3DV)%7D%7Delse%7Bconst%20t%3D%5B0%2C1%2C2%2C3%2C0%2C0%5D%2Ci%3D%5B%22none%22%2C%22none%22%2C%22none%22%2C%22none%22%2C%22tremolo5%22%2C%22tremolo2%22%5D%2Cn%3D%24(0%2Ct.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ca%3Dthis.channels%5BB%5D.instruments%5BW%5D%2Cr%3DN%5BB%5D%5BW%5D%3Ba.vibrato%3Dt%5Bn%5D%2Cnull!%3Dr.filterEnvelope%26%261!%3Dr.filterEnvelope.type%7C%7C(r.filterEnvelope%3Du.envelopes.dictionary%5Bi%5Bn%5D%5D%2Ca.convertLegacySettings(r%2CH))%2Ca.vibrato!%3Du.vibratos.dictionary.none.index%26%26(a.effects%7C%3D512)%2C(0!%3DV%7C%7Cl%26%26v%7C%7Cy%26%26c)%26%26(a.effects%7C%3D1%2Ca.reverb%3DV)%7Delse%7Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%2Ci%3D%24(0%2Cu.vibratos.length%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%3Bt.vibrato%3Di%2Ct.vibrato!%3Du.vibratos.dictionary.none.index%26%26(t.effects%7C%3D512)%2Ci%3D%3Du.vibratos.length%3F(t.vibratoDepth%3D%24(0%2Cu.modulators.dictionary%5B%22vibrato%20depth%22%5D.maxRawVol%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2F50%2Ct.vibratoSpeed%3D%24(0%2Cu.modulators.dictionary%5B%22vibrato%20speed%22%5D.maxRawVol%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ct.vibratoDelay%3D%24(0%2Cu.modulators.dictionary%5B%22vibrato%20delay%22%5D.maxRawVol%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2F2%2Ct.vibratoType%3D%24(0%2Cu.vibratoTypes.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ct.effects%7C%3D512)%3A(t.vibratoDepth%3Du.vibratos%5Bt.vibrato%5D.amplitude%2Ct.vibratoSpeed%3D10%2Ct.vibratoDelay%3Du.vibratos%5Bt.vibrato%5D.delayTicks%2F2%2Ct.vibratoType%3Du.vibratos%5Bt.vibrato%5D.type)%7Dbreak%3Bcase%2071%3Aif(l%26%26v%7C%7Cy%26%26c)%7Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Bt.arpeggioSpeed%3D%24(0%2Cu.modulators.dictionary%5B%22arp%20speed%22%5D.maxRawVol%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ct.fastTwoNoteArp%3D!!Z%5Be.charCodeAt(s%2B%2B)%5D%7Dbreak%3Bcase%20104%3Aif(d%26%26o)%7Bconst%20t%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3Bthis.channels%5Bt%5D.instruments%5B0%5D.unison%3D%24(0%2Cu.unisons.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%3Bconst%20i%3Dthis.channels%5Bt%5D.instruments%5B0%5D%3Bi.unisonVoices%3Du.unisons%5Bi.unison%5D.voices%2Ci.unisonSpread%3Du.unisons%5Bi.unison%5D.spread%2Ci.unisonOffset%3Du.unisons%5Bi.unison%5D.offset%2Ci.unisonExpression%3Du.unisons%5Bi.unison%5D.expression%2Ci.unisonSign%3Du.unisons%5Bi.unison%5D.sign%7Delse%20if(g%26%26o)for(let%20t%3D0%3Bt%3Cthis.getChannelCount()%3Bt%2B%2B)for(const%20i%20of%20this.channels%5Bt%5D.instruments)%7Bconst%20t%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3Blet%20n%3D%24(0%2Cu.unisons.length%2Ct)%3B8%3D%3Dt%26%26(n%3D2%2Ci.chord%3D3)%2Ci.unison%3Dn%2Ci.unisonVoices%3Du.unisons%5Bi.unison%5D.voices%2Ci.unisonSpread%3Du.unisons%5Bi.unison%5D.spread%2Ci.unisonOffset%3Du.unisons%5Bi.unison%5D.offset%2Ci.unisonExpression%3Du.unisons%5Bi.unison%5D.expression%2Ci.unisonSign%3Du.unisons%5Bi.unison%5D.sign%7Delse%20if(b%26%26o)%7Bconst%20t%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3Blet%20i%3D%24(0%2Cu.unisons.length%2Ct)%3B8%3D%3Dt%26%26(i%3D2%2Cthis.channels%5BB%5D.instruments%5BW%5D.chord%3D3)%2Cthis.channels%5BB%5D.instruments%5BW%5D.unison%3Di%3Bconst%20n%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Bn.unisonVoices%3Du.unisons%5Bn.unison%5D.voices%2Cn.unisonSpread%3Du.unisons%5Bn.unison%5D.spread%2Cn.unisonOffset%3Du.unisons%5Bn.unison%5D.offset%2Cn.unisonExpression%3Du.unisons%5Bn.unison%5D.expression%2Cn.unisonSign%3Du.unisons%5Bn.unison%5D.sign%7Delse%7Bthis.channels%5BB%5D.instruments%5BW%5D.unison%3D%24(0%2Cu.unisons.length%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%3Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Bif(p%26%26!v%26%26t.unison%3D%3Du.unisons.length)%7Bt.unisonVoices%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3Bconst%20i%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2Cn%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2B63*(Z%5Be.charCodeAt(s%2B%2B)%5D%2B63*Z%5Be.charCodeAt(s%2B%2B)%5D)%2Ca%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2Cr%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2B63*(Z%5Be.charCodeAt(s%2B%2B)%5D%2B63*Z%5Be.charCodeAt(s%2B%2B)%5D)%2Co%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2Cl%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2B63*Z%5Be.charCodeAt(s%2B%2B)%5D%2Ch%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2Cu%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2B63*Z%5Be.charCodeAt(s%2B%2B)%5D%3Bt.unisonSpread%3Dn%2F1e3%2C0%3D%3Di%26%26(t.unisonSpread*%3D-1)%2Ct.unisonOffset%3Dr%2F1e3%2C0%3D%3Da%26%26(t.unisonOffset*%3D-1)%2Ct.unisonExpression%3Dl%2F1e3%2C0%3D%3Do%26%26(t.unisonExpression*%3D-1)%2Ct.unisonSign%3Du%2F1e3%2C0%3D%3Dh%26%26(t.unisonSign*%3D-1)%7Delse%20t.unisonVoices%3Du.unisons%5Bt.unison%5D.voices%2Ct.unisonSpread%3Du.unisons%5Bt.unison%5D.spread%2Ct.unisonOffset%3Du.unisons%5Bt.unison%5D.offset%2Ct.unisonExpression%3Du.unisons%5Bt.unison%5D.expression%2Ct.unisonSign%3Du.unisons%5Bt.unison%5D.sign%7Dbreak%3Bcase%2067%3Aif(C%26%26o%7C%7Cl%26%26v%7C%7Cy%26%26c)%7Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Bt.chord%3D%24(0%2Cu.chords.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ct.chord!%3Du.chords.dictionary.simultaneous.index%26%26(t.effects%7C%3D2048)%7Dbreak%3Bcase%20113%3A%7Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Bif(C%26%26o%7C%7Cl%26%26v%7C%7Cy%26%26c)%7Bt.effects%3D4095%26Z%5Be.charCodeAt(s%2B%2B)%5D%2C0!%3DV%7C%7Cl%26%26v%7C%7Cy%26%26c%3FR(t.effects)%26%26(t.reverb%3DV)%3At.effects%26%3D-2%2Ct.effects%7C%3D4%2Ct.vibrato!%3Du.vibratos.dictionary.none.index%26%26(t.effects%7C%3D512)%2Ct.detune!%3Du.detuneCenter%26%26(t.effects%7C%3D256)%2Ct.aliases%3Ft.effects%7C%3D8%3At.effects%26%3D-9%3Bconst%20i%3DN%5BB%5D%5BW%5D%3Bt.convertLegacySettings(i%2CH)%7Delse%7Bif(t.effects%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3C%3C6%7CZ%5Be.charCodeAt(s%2B%2B)%5D%2CP(t.effects))%7Blet%20i%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3Bif(o%7C%7C0%3D%3Di)%7Bt.noteFilterType%3D!1%2C(l%7C%7Cc%7C%7Cp)%26%26(i%3DZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ct.noteFilter.controlPointCount%3D%24(0%2Cu.filterMaxPoints%2B1%2Ci)%3Bfor(let%20e%3Dt.noteFilter.controlPoints.length%3Be%3Ct.noteFilter.controlPointCount%3Be%2B%2B)t.noteFilter.controlPoints%5Be%5D%3Dnew%20pe%3Bfor(let%20i%3D0%3Bi%3Ct.noteFilter.controlPointCount%3Bi%2B%2B)%7Bconst%20n%3Dt.noteFilter.controlPoints%5Bi%5D%3Bn.type%3D%24(0%2C3%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Cn.freq%3D%24(0%2Cu.filterFreqRange%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Cn.gain%3D%24(0%2Cu.filterGainRange%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%7Dfor(let%20e%3Dt.noteFilter.controlPointCount%3Be%3Ci%3Be%2B%2B)s%2B%3D3%3Bif(t.noteSubFilters%5B0%5D%3Dt.noteFilter%2Cl%26%26!v%7C%7Cc%7C%7Cp)%7Blet%20i%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3C%3C6%7CZ%5Be.charCodeAt(s%2B%2B)%5D%3Bfor(let%20n%3D0%3Bn%3Cu.filterMorphCount-1%3Bn%2B%2B)if(i%261%3C%3Cn)%7Bconst%20i%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3Bnull%3D%3Dt.noteSubFilters%5Bn%2B1%5D%26%26(t.noteSubFilters%5Bn%2B1%5D%3Dnew%20fe)%2Ct.noteSubFilters%5Bn%2B1%5D.controlPointCount%3D%24(0%2Cu.filterMaxPoints%2B1%2Ci)%3Bfor(let%20e%3Dt.noteSubFilters%5Bn%2B1%5D.controlPoints.length%3Be%3Ct.noteSubFilters%5Bn%2B1%5D.controlPointCount%3Be%2B%2B)t.noteSubFilters%5Bn%2B1%5D.controlPoints%5Be%5D%3Dnew%20pe%3Bfor(let%20i%3D0%3Bi%3Ct.noteSubFilters%5Bn%2B1%5D.controlPointCount%3Bi%2B%2B)%7Bconst%20a%3Dt.noteSubFilters%5Bn%2B1%5D.controlPoints%5Bi%5D%3Ba.type%3D%24(0%2C3%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ca.freq%3D%24(0%2Cu.filterFreqRange%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ca.gain%3D%24(0%2Cu.filterGainRange%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%7Dfor(let%20e%3Dt.noteSubFilters%5Bn%2B1%5D.controlPointCount%3Be%3Ci%3Be%2B%2B)s%2B%3D3%7D%7D%7Delse%20t.noteFilterType%3D!0%2Ct.noteFilter.reset()%2Ct.noteFilterSimpleCut%3D%24(0%2Cu.filterSimpleCutRange%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ct.noteFilterSimplePeak%3D%24(0%2Cu.filterSimplePeakRange%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%7DM(t.effects)%26%26(t.transition%3D%24(0%2Cu.transitions.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D))%2Cw(t.effects)%26%26(t.chord%3D%24(0%2Cu.chords.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ct.chord%3D%3Du.chords.dictionary.arpeggio.index%26%26(l%7C%7Cc%7C%7Cp)%26%26(t.arpeggioSpeed%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2Ct.fastTwoNoteArp%3D!!Z%5Be.charCodeAt(s%2B%2B)%5D))%2Cx(t.effects)%26%26(t.pitchShift%3D%24(0%2Cu.pitchShiftRange%2CZ%5Be.charCodeAt(s%2B%2B)%5D))%2Ck(t.effects)%26%26(o%3F(t.detune%3D%24(u.detuneMin%2Cu.detuneMax%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ct.detune%3DMath.round((t.detune-9)*(Math.abs(t.detune-9)%2B1)%2F2%2Bu.detuneCenter))%3At.detune%3D%24(u.detuneMin%2Cu.detuneMax%2B1%2C(Z%5Be.charCodeAt(s%2B%2B)%5D%3C%3C6)%2BZ%5Be.charCodeAt(s%2B%2B)%5D))%2CF(t.effects)%26%26(t.vibrato%3D%24(0%2Cu.vibratos.length%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ct.vibrato%3D%3Du.vibratos.length%26%26(l%7C%7Cc%7C%7Cp)%3F(t.vibratoDepth%3D%24(0%2Cu.modulators.dictionary%5B%22vibrato%20depth%22%5D.maxRawVol%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2F25%2Ct.vibratoSpeed%3D%24(0%2Cu.modulators.dictionary%5B%22vibrato%20speed%22%5D.maxRawVol%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ct.vibratoDelay%3D%24(0%2Cu.modulators.dictionary%5B%22vibrato%20delay%22%5D.maxRawVol%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ct.vibratoType%3D%24(0%2Cu.vibratoTypes.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D))%3A(t.vibratoDepth%3Du.vibratos%5Bt.vibrato%5D.amplitude%2Ct.vibratoSpeed%3D10%2Ct.vibratoDelay%3Du.vibratos%5Bt.vibrato%5D.delayTicks%2F2%2Ct.vibratoType%3Du.vibratos%5Bt.vibrato%5D.type))%2CI(t.effects)%26%26(t.distortion%3D%24(0%2Cu.distortionRange%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2C(l%26%26!v%7C%7Cc%7C%7Cp)%26%26(t.aliases%3D!!Z%5Be.charCodeAt(s%2B%2B)%5D))%2Cq(t.effects)%26%26(t.bitcrusherFreq%3D%24(0%2Cu.bitcrusherFreqRange%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ct.bitcrusherQuantization%3D%24(0%2Cu.bitcrusherQuantizationRange%2CZ%5Be.charCodeAt(s%2B%2B)%5D))%2CT(t.effects)%26%26(t.pan%3D%24(0%2Cu.panMax%2B1%2Co%3FMath.round(Z%5Be.charCodeAt(s%2B%2B)%5D*(u.panMax%2F8))%3A(Z%5Be.charCodeAt(s%2B%2B)%5D%3C%3C6)%2BZ%5Be.charCodeAt(s%2B%2B)%5D)%2C(l%26%26!m%7C%7Cc%7C%7Cp)%26%26(t.panDelay%3DZ%5Be.charCodeAt(s%2B%2B)%5D))%2CD(t.effects)%26%26(t.chorus%3Do%3F2*%24(0%2Cu.chorusRange%2F2%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%3A%24(0%2Cu.chorusRange%2CZ%5Be.charCodeAt(s%2B%2B)%5D))%2CO(t.effects)%26%26(t.echoSustain%3D%24(0%2Cu.echoSustainRange%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ct.echoDelay%3D%24(0%2Cu.echoDelayRange%2CZ%5Be.charCodeAt(s%2B%2B)%5D))%2CR(t.effects)%26%26(t.reverb%3D%24(0%2Cu.reverbRange%2Co%3FMath.round(Z%5Be.charCodeAt(s%2B%2B)%5D*u.reverbRange%2F3)%3AZ%5Be.charCodeAt(s%2B%2B)%5D))%7Dt.effects%26%3D4095%7Dbreak%3Bcase%20118%3Aif(d%26%26o)%7Bconst%20t%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3Bthis.channels%5Bt%5D.instruments%5B0%5D.volume%3DMath.round(%24(-u.volumeRange%2F2%2C1%2C5*-Z%5Be.charCodeAt(s%2B%2B)%5D))%7Delse%20if(g%26%26o)for(let%20t%3D0%3Bt%3Cthis.getChannelCount()%3Bt%2B%2B)for(const%20i%20of%20this.channels%5Bt%5D.instruments)i.volume%3DMath.round(%24(-u.volumeRange%2F2%2C1%2C5*-Z%5Be.charCodeAt(s%2B%2B)%5D))%3Belse%20if(b%26%26o)%7Bthis.channels%5BB%5D.instruments%5BW%5D.volume%3DMath.round(%24(-u.volumeRange%2F2%2C1%2C5*-Z%5Be.charCodeAt(s%2B%2B)%5D))%7Delse%20if(o)%7Bthis.channels%5BB%5D.instruments%5BW%5D.volume%3DMath.round(%24(-u.volumeRange%2F2%2C1%2C25*-Z%5Be.charCodeAt(s%2B%2B)%5D%2F7))%7Delse%7Bthis.channels%5BB%5D.instruments%5BW%5D.volume%3DMath.round(%24(-u.volumeRange%2F2%2Cu.volumeRange%2F2%2B1%2C(Z%5Be.charCodeAt(s%2B%2B)%5D%3C%3C6%7CZ%5Be.charCodeAt(s%2B%2B)%5D)-u.volumeRange%2F2))%7Dbreak%3Bcase%2076%3Aif(C%26%26o)%7Bthis.channels%5BB%5D.instruments%5BW%5D.pan%3D%24(0%2Cu.panMax%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D*(u.panMax%2F8))%7Delse%20if(l%26%26v%7C%7Cy%26%26c)%7Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Bt.pan%3D%24(0%2Cu.panMax%2B1%2C(Z%5Be.charCodeAt(s%2B%2B)%5D%3C%3C6)%2BZ%5Be.charCodeAt(s%2B%2B)%5D)%2C(l%26%26!d%7C%7Cc%7C%7Cp)%26%26(t.panDelay%3DZ%5Be.charCodeAt(s%2B%2B)%5D)%7Dbreak%3Bcase%2068%3A%7Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%3B(l%26%26v%7C%7Cy%26%26c)%26%26(t.detune%3D%24(u.detuneMin%2Cu.detuneMax%2B1%2C4*((Z%5Be.charCodeAt(s%2B%2B)%5D%3C%3C6)%2BZ%5Be.charCodeAt(s%2B%2B)%5D))%2Ct.effects%7C%3D256)%7Dbreak%3Bcase%2077%3A%7Blet%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Bfor(let%20i%3D0%3Bi%3C64%3Bi%2B%2B)t.customChipWave%5Bi%5D%3D%24(-24%2C25%2CZ%5Be.charCodeAt(s%2B%2B)%5D-24)%3Blet%20i%3D0%3Bfor(let%20e%3D0%3Be%3Ct.customChipWave.length%3Be%2B%2B)i%2B%3Dt.customChipWave%5Be%5D%3Bconst%20n%3Di%2Ft.customChipWave.length%3Blet%20a%3D0%2Cr%3D0%3Bfor(let%20e%3D0%3Be%3Ct.customChipWave.length%3Be%2B%2B)a%2B%3Dr%2Cr%3Dt.customChipWave%5Be%5D-n%2Ct.customChipWaveIntegral%5Be%5D%3Da%3Bt.customChipWaveIntegral%5B64%5D%3D0%7Dbreak%3Bcase%2079%3A%7Blet%20t%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3B63%3D%3Dt%3Fthis.restoreLimiterDefaults()%3A(this.compressionRatio%3Dt%3C10%3Ft%2F10%3A1%2B(t-10)%2F60%2Ct%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2Cthis.limitRatio%3Dt%3C10%3Ft%2F10%3At-9%2Cthis.limitDecay%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2Cthis.limitRise%3D250*Z%5Be.charCodeAt(s%2B%2B)%5D%2B2e3%2Cthis.compressionThreshold%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2F20%2Cthis.limitThreshold%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2F20%2Cthis.masterGain%3D((Z%5Be.charCodeAt(s%2B%2B)%5D%3C%3C6)%2BZ%5Be.charCodeAt(s%2B%2B)%5D)%2F50)%7Dbreak%3Bcase%2085%3Afor(let%20t%3D0%3Bt%3Cthis.getChannelCount()%3Bt%2B%2B)%7Bvar%20X%3BX%3D!y%7C%7Cc%7C%7Cp%3F(Z%5Be.charCodeAt(s%2B%2B)%5D%3C%3C6)%2BZ%5Be.charCodeAt(s%2B%2B)%5D%3AZ%5Be.charCodeAt(s%2B%2B)%5D%2Cthis.channels%5Bt%5D.name%3DdecodeURIComponent(e.substring(s%2Cs%2BX))%2Cs%2B%3DX%7Dbreak%3Bcase%2065%3A%7Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Bif(1%3D%3Dt.type)t.algorithm%3D%24(0%2Cu.algorithms.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%3Belse%20if(t.algorithm6Op%3D%24(0%2Cu.algorithms6Op.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ct.customAlgorithm.fromPreset(t.algorithm6Op)%2C67%3D%3De.charCodeAt(s))%7Blet%20i%3D%24(1%2Cu.operatorCount%2B2%2B1%2CZ%5Be.charCodeAt(s%2B1)%5D)%3Bs%2B%2B%3Blet%20n%3D%5B%5D%3Bif(113%3D%3De.charCodeAt(s%2B1))%7Bs%2B%2B%3Blet%20a%3D0%3Bfor(s%2B%2B%3B113!%3De.charCodeAt(s)%3B)%7Bn%5Ba%5D%3D%5B%5D%3Blet%20t%3D0%3Bfor(%3B82!%3De.charCodeAt(s)%3B)n%5Ba%5D%5Bt%5D%3D%24(1%2Cu.operatorCount%2B3%2CZ%5Be.charCodeAt(s)%5D)%2Ct%2B%2B%2Cs%2B%2B%3Ba%2B%2B%2Cs%2B%2B%7Dt.customAlgorithm.set(i%2Cn)%2Cs%2B%2B%7D%7Dif(C%26%26o%7C%7Cv%26%26l%7C%7Cy%26%26c)%7Bconst%20e%3DN%5BB%5D%5BW%5D%3Bt.convertLegacySettings(e%2CH)%7D%7Dbreak%3Bcase%20120%3Aif(c%26%26!y%26%26g)%7Bconst%20t%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3Bt%2B62%3E85%26%26%22legacysamples%22!%3Ddocument.URL.substring(document.URL.length-13).toLowerCase()%26%26(E%7C%7C(E%3D!0%2Cu.willReloadForCustomSamples%3D!1%2Cz.customSamples%3D%5B%22legacySamples%22%5D%2Ch(0)))%2Cthis.channels%5BB%5D.instruments%5BW%5D.chipWave%3Dt%2B62%3E78%3F%24(0%2Cu.chipWaves.length%2Ct%2B63)%3At%2B62%3E67%3F%24(0%2Cu.chipWaves.length%2Ct%2B61)%3At%2B62%3D%3D67%3F40%3A%24(0%2Cu.chipWaves.length%2Ct%2B62)%7Delse%7Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Bt.supersawDynamism%3D%24(0%2Cu.supersawDynamismMax%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ct.supersawSpread%3D%24(0%2Cu.supersawSpreadMax%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ct.supersawShape%3D%24(0%2Cu.supersawShapeMax%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%7Dbreak%3Bcase%2070%3A%7Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Bif(1%3D%3Dt.type)t.feedbackType%3D%24(0%2Cu.feedbacks.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%3Belse%7Bt.feedbackType6Op%3D%24(0%2Cu.feedbacks6Op.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Ct.customFeedbackType.fromPreset(t.feedbackType6Op)%3Blet%20i%3D%5B%5D%3Bif(113%3D%3De.charCodeAt(s))%7Blet%20n%3D0%3Bfor(s%2B%2B%3B113!%3De.charCodeAt(s)%3B)%7Bi%5Bn%5D%3D%5B%5D%3Blet%20t%3D0%3Bfor(%3B82!%3De.charCodeAt(s)%3B)i%5Bn%5D%5Bt%5D%3D%24(1%2Cu.operatorCount%2B2%2CZ%5Be.charCodeAt(s)%5D)%2Ct%2B%2B%2Cs%2B%2B%3Bn%2B%2B%2Cs%2B%2B%7Dt.customFeedbackType.set(i)%2Cs%2B%2B%7D%7D%7Dbreak%3Bcase%2066%3Athis.channels%5BB%5D.instruments%5BW%5D.feedbackAmplitude%3D%24(0%2Cu.operatorAmplitudeMax%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%3Bbreak%3Bcase%2086%3Aif(C%26%26o%7C%7Cv%26%26l%7C%7Cy%26%26c)%7Bconst%20t%3D%5B0%2C1%2C2%2C4%2C5%2C6%2C8%2C9%2C10%2C12%2C13%2C14%2C16%2C17%2C18%2C19%2C20%2C21%2C23%2C24%2C25%2C27%2C28%2C29%2C32%2C33%2C34%2C31%2C11%5D%2Ci%3Dthis.channels%5BB%5D.instruments%5BW%5D%2Cn%3DN%5BB%5D%5BW%5D%3Blet%20a%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3B(m%26%26c%7C%7C!c%26%26!p)%26%26(a%3Dt%5Ba%5D)%2Cn.feedbackEnvelope%3Dve.I(Z%5Ba%5D)%2Ci.convertLegacySettings(n%2CH)%7Dbreak%3Bcase%2081%3A%7Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Bif(d%26%26c)%7Bconst%20i%3D%5B4%2C5%2C6%2C7%2C8%2C10%2C12%2C13%2C14%2C15%2C16%2C18%2C20%2C22%2C24%2C2%2C1%2C9%2C17%2C19%2C21%2C23%2C0%2C3%5D%3Bfor(let%20n%3D0%3Bn%3C(11%3D%3Dt.type%3F6%3Au.operatorCount)%3Bn%2B%2B)t.operators%5Bn%5D.frequency%3Di%5B%24(0%2Ci.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%5D%7Delse%20if(c%7C%7Cp)for(let%20i%3D0%3Bi%3C(11%3D%3Dt.type%3F6%3Au.operatorCount)%3Bi%2B%2B)t.operators%5Bi%5D.frequency%3D%24(0%2Cu.operatorFrequencies.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%3Belse%7Bconst%20i%3D%5B4%2C5%2C6%2C7%2C8%2C10%2C12%2C13%2C14%2C15%2C16%2C18%2C20%2C23%2C27%2C2%2C1%2C9%2C17%2C19%2C21%2C23%2C0%2C3%5D%3Bfor(let%20n%3D0%3Bn%3C(11%3D%3Dt.type%3F6%3Au.operatorCount)%3Bn%2B%2B)t.operators%5Bn%5D.frequency%3Di%5B%24(0%2Ci.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%5D%7D%7Dbreak%3Bcase%2080%3A%7Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Bfor(let%20i%3D0%3Bi%3C(11%3D%3Dt.type%3F6%3Au.operatorCount)%3Bi%2B%2B)t.operators%5Bi%5D.amplitude%3D%24(0%2Cu.operatorAmplitudeMax%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%7Dbreak%3Bcase%2069%3A%7Bconst%20t%3D%5B0%2C1%2C2%2C4%2C5%2C6%2C8%2C9%2C10%2C12%2C13%2C14%2C16%2C17%2C18%2C19%2C20%2C21%2C23%2C24%2C25%2C27%2C28%2C29%2C32%2C33%2C34%2C31%2C11%5D%2Ci%3D%5B0%2C1%2C2%2C4%2C5%2C6%2C8%2C9%2C10%2C12%2C13%2C14%2C16%2C17%2C18%2C19%2C20%2C21%2C23%2C24%2C25%2C58%2C59%2C60%5D%2Cn%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Bif(C%26%26o%7C%7Cv%26%26l%7C%7Cy%26%26c)%7Bconst%20a%3DN%5BB%5D%5BW%5D%3Ba.operatorEnvelopes%3D%5B%5D%3Bfor(let%20r%3D0%3Br%3C(11%3D%3Dn.type%3F6%3Au.operatorCount)%3Br%2B%2B)%7Blet%20n%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3B(m%26%26c%7C%7Co)%26%26(n%3Dt%5Bn%5D)%2Cl%26%26(n%3Di%5Bn%5D)%2Ca.operatorEnvelopes%5Br%5D%3Dve.I(n)%7Dn.convertLegacySettings(a%2CH)%7Delse%7Bconst%20a%3D%24(0%2Cu.maxEnvelopeCount%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%3B(l%26%26!g%7C%7Cp%26%26!v)%26%26(n.envelopeSpeed%3D%24(0%2Cu.modulators.dictionary%5B%22envelope%20speed%22%5D.maxRawVol%2B1%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%2Cn.discreteEnvelope%3D!!Z%5Be.charCodeAt(s%2B%2B)%5D)%3Bfor(let%20r%3D0%3Br%3Ca%3Br%2B%2B)%7Bconst%20a%3D%24(0%2Cu.instrumentAutomationTargets.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%3Blet%20r%3D0%3Bconst%20h%3Du.instrumentAutomationTargets%5Ba%5D.maxCount%3Bh%3E1%26%26(r%3D%24(0%2Ch%2CZ%5Be.charCodeAt(s%2B%2B)%5D))%3Blet%20p%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3B(m%26%26c%7C%7Co)%26%26(p%3Dt%5Bp%5D)%2Cl%26%26(p%3Di%5Bp%5D)%3Bconst%20f%3D%24(0%2Cu.envelopes.length%2Cp)%3Bn.addEnvelope(a%2Cr%2Cf)%7D%7D%7Dbreak%3Bcase%2082%3A%7Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Bif(d%26%26c)for(let%20i%3D0%3Bi%3Cu.operatorCount%3Bi%2B%2B)%7Bconst%20n%3D%5B0%2C1%2C3%2C2%2C2%2C2%2C4%2C5%5D%2Ca%3D%24(0%2Cn.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%3B3%3D%3Da%3Ft.operators%5Bi%5D.pulseWidth%3D5%3A4%3D%3Da%3Ft.operators%5Bi%5D.pulseWidth%3D4%3A5%3D%3Da%26%26(t.operators%5Bi%5D.pulseWidth%3D6)%2Ct.operators%5Bi%5D.waveform%3Dn%5Ba%5D%7Delse%20for(let%20i%3D0%3Bi%3C(11%3D%3Dt.type%3F6%3Au.operatorCount)%3Bi%2B%2B)%7Bif(l)%7Bconst%20n%3D%5B0%2C1%2C3%2C2%2C4%2C5%5D%3Bt.operators%5Bi%5D.waveform%3Dn%5B%24(0%2Cu.operatorWaves.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%5D%7Delse%20t.operators%5Bi%5D.waveform%3D%24(0%2Cu.operatorWaves.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%3B2%3D%3Dt.operators%5Bi%5D.waveform%26%26(t.operators%5Bi%5D.pulseWidth%3D%24(0%2Cu.pwmOperatorWaves.length%2CZ%5Be.charCodeAt(s%2B%2B)%5D))%7D%7Dbreak%3Bcase%2083%3A%7Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Bif(3%3D%3Dt.type)%7Bconst%20i%3DMath.ceil(u.spectrumControlPoints*u.spectrumControlPointBits%2F6)%2Cn%3Dnew%20ee(e%2Cs%2Cs%2Bi)%3Bfor(let%20e%3D0%3Be%3Cu.spectrumControlPoints%3Be%2B%2B)t.spectrumWave.spectrum%5Be%5D%3Dn.read(u.spectrumControlPointBits)%3Bt.spectrumWave.markCustomWaveDirty()%2Cs%2B%3Di%7Delse%7Bif(4!%3Dt.type)throw%20new%20Error(%22Unhandled%20instrument%20type%20for%20spectrum%20song%20tag%20code.%22)%3B%7Bconst%20i%3DMath.ceil(u.drumCount*u.spectrumControlPoints*u.spectrumControlPointBits%2F6)%2Cn%3Dnew%20ee(e%2Cs%2Cs%2Bi)%3Bfor(let%20e%3D0%3Be%3Cu.drumCount%3Be%2B%2B)%7Bfor(let%20s%3D0%3Bs%3Cu.spectrumControlPoints%3Bs%2B%2B)t.drumsetSpectrumWaves%5Be%5D.spectrum%5Bs%5D%3Dn.read(u.spectrumControlPointBits)%3Bt.drumsetSpectrumWaves%5Be%5D.markCustomWaveDirty()%7Ds%2B%3Di%7D%7D%7Dbreak%3Bcase%2072%3A%7Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%2Ci%3DMath.ceil(u.harmonicsControlPoints*u.harmonicsControlPointBits%2F6)%2Cn%3Dnew%20ee(e%2Cs%2Cs%2Bi)%3Bfor(let%20e%3D0%3Be%3Cu.harmonicsControlPoints%3Be%2B%2B)t.harmonicsWave.harmonics%5Be%5D%3Dn.read(u.harmonicsControlPointBits)%3Bt.harmonicsWave.markCustomWaveDirty()%2Cs%2B%3Di%7Dbreak%3Bcase%2088%3Aif(l%26%26v%7C%7Cc%26%26y)%7Bconst%20t%3Dthis.channels%5BB%5D.instruments%5BW%5D%3Bt.aliases%3D!!Z%5Be.charCodeAt(s%2B%2B)%5D%2Ct.aliases%26%26(t.distortion%3D0%2Ct.effects%7C%3D8)%7Delse%20if(p)%7Bthis.channels%5BB%5D.instruments%5BW%5D.decimalOffset%3D%24(0%2C51%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%7Dbreak%3Bcase%2098%3A%7Blet%20t%3Bif(d%26%26o)%7Bconst%20i%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2Cn%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3Bt%3DMath.ceil(.5*n)%3Bconst%20a%3Dnew%20ee(e%2Cs%2Cs%2Bt)%3Bfor(let%20e%3D0%3Be%3Cn%3Be%2B%2B)this.channels%5Bi%5D.bars%5Be%5D%3Da.read(3)%2B1%7Delse%20if(v%26%26o)%7Blet%20i%3D0%3Bfor(%3B1%3C%3Ci%3Cthis.patternsPerChannel%3B)i%2B%2B%3Bt%3DMath.ceil(this.getChannelCount()*this.barCount*i%2F6)%3Bconst%20n%3Dnew%20ee(e%2Cs%2Cs%2Bt)%3Bfor(let%20e%3D0%3Be%3Cthis.getChannelCount()%3Be%2B%2B)for(let%20t%3D0%3Bt%3Cthis.barCount%3Bt%2B%2B)this.channels%5Be%5D.bars%5Bt%5D%3Dn.read(i)%2B1%7Delse%7Blet%20i%3D0%3Bfor(%3B1%3C%3Ci%3Cthis.patternsPerChannel%2B1%3B)i%2B%2B%3Bt%3DMath.ceil(this.getChannelCount()*this.barCount*i%2F6)%3Bconst%20n%3Dnew%20ee(e%2Cs%2Cs%2Bt)%3Bfor(let%20e%3D0%3Be%3Cthis.getChannelCount()%3Be%2B%2B)for(let%20t%3D0%3Bt%3Cthis.barCount%3Bt%2B%2B)this.channels%5Be%5D.bars%5Bt%5D%3Dn.read(i)%7Ds%2B%3Dt%7Dbreak%3Bcase%20112%3A%7Blet%20t%2Ci%3D0%2Cn%3D!(y%26%26l%7C%7Co)%2Ca%3Dn%3F4%3A3%2Cr%3Dn%3F16%3A8%3Bif(d%26%26o)t%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2Cs%2B%2B%2Ci%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2Ci%3C%3C%3D6%2Ci%2B%3DZ%5Be.charCodeAt(s%2B%2B)%5D%3Belse%7Bt%3D0%3Blet%20n%3Dj(1%2C4%2CZ%5Be.charCodeAt(s%2B%2B)%5D)%3Bfor(%3Bn%3E0%3B)i%3C%3C%3D6%2Ci%2B%3DZ%5Be.charCodeAt(s%2B%2B)%5D%2Cn--%7Dconst%20h%3Dnew%20ee(e%2Cs%2Cs%2Bi)%3Bs%2B%3Di%3Bconst%20f%3Dve.getNeededBits(u.noteSizeMax)%3Blet%20m%3D-1%2Cg%3D-1%2CS%3D-1%3Bconst%20M%3Dl%2Cw%3D30%3Bfor(%3B%3B)%7Bconst%20e%3Dthis.channels%5Bt%5D%2Cs%3Dthis.getChannelIsNoise(t)%2Ci%3Dthis.getChannelIsMod(t)%2Cx%3Dthis.getMaxInstrumentsPerPattern(t)%2Ck%3Dve.getNeededBits(x-u.instrumentCountMin)%2CF%3Dve.getNeededBits(e.instruments.length-1)%3Bif(i)%7Blet%20s%3Dv%26%26l%7C%7Cy%26%26c%3Bconst%20i%3Ds%3FF%3Ave.getNeededBits(this.getMaxInstrumentsPerChannel()%2B2)%3Bfor(let%20n%3D0%3Bn%3Ce.instruments.length%3Bn%2B%2B)%7Blet%20a%3De.instruments%5Bn%5D%3Bfor(let%20e%3D0%3Be%3Cu.modCount%3Be%2B%2B)%7Blet%20r%3Dh.read(2)%3Bswitch(r)%7Bcase%200%3Aa.modChannels%5Be%5D%3D%24(0%2Cthis.pitchChannelCount%2Bthis.noiseChannelCount%2B1%2Ch.read(8))%2Ca.modInstruments%5Be%5D%3D%24(0%2Cthis.channels%5Ba.modChannels%5Be%5D%5D.instruments.length%2B2%2Ch.read(i))%3Bbreak%3Bcase%201%3Aa.modChannels%5Be%5D%3Dthis.pitchChannelCount%2B%24(0%2Cthis.noiseChannelCount%2B1%2Ch.read(8))%2Ca.modInstruments%5Be%5D%3D%24(0%2Cthis.channels%5Ba.modChannels%5Be%5D%5D.instruments.length%2B2%2Ch.read(F))%3Bbreak%3Bcase%202%3Aa.modChannels%5Be%5D%3D-1%3Bbreak%3Bcase%203%3Aa.modChannels%5Be%5D%3D-2%7Dif(3!%3Dr%26%26(a.modulators%5Be%5D%3Dh.read(6))%2Cs%7C%7C%22eq%20filter%22!%3Du.modulators%5Ba.modulators%5Be%5D%5D.name%26%26%22note%20filter%22!%3Du.modulators%5Ba.modulators%5Be%5D%5D.name%7C%7C(a.modFilterTypes%5Be%5D%3Dh.read(6))%2Cs%26%26a.modChannels%5Be%5D%3E%3D0)%7Blet%20t%3DP(this.channels%5Ba.modChannels%5Be%5D%5D.instruments%5Ba.modInstruments%5Be%5D%5D.effects)%3B7%3D%3Da.modulators%5Be%5D%3F(a.modulators%5Be%5D%3Dt%3Fu.modulators.dictionary%5B%22note%20filt%20cut%22%5D.index%3Au.modulators.dictionary%5B%22eq%20filt%20cut%22%5D.index%2Ca.modFilterTypes%5Be%5D%3D1)%3A8%3D%3Da.modulators%5Be%5D%26%26(a.modulators%5Be%5D%3Dt%3Fu.modulators.dictionary%5B%22note%20filt%20peak%22%5D.index%3Au.modulators.dictionary%5B%22eq%20filt%20peak%22%5D.index%2Ca.modFilterTypes%5Be%5D%3D2)%7Delse%20s%26%26a.modulators%5Be%5D%3D%3Du.modulators.dictionary%5B%22song%20reverb%22%5D.index%26%26(m%3Dt%2Cg%3Dn%2CS%3De)%3Bs%26%2612!%3Du.modulators%5Ba.modulators%5Be%5D%5D.associatedEffect%26%26(this.channels%5Ba.modChannels%5Be%5D%5D.instruments%5Ba.modInstruments%5Be%5D%5D.effects%7C%3D1%3C%3Cu.modulators%5Ba.modulators%5Be%5D%5D.associatedEffect)%7D%7D%7Dconst%20I%3D%5B%5D%3Bfor(let%20t%3D0%3Bt%3Ce.instruments.length%3Bt%2B%2B)%7BI%5Bt%5D%3D%5B%5D%3Bfor(let%20s%3D0%3Bs%3Cu.modCount%3Bs%2B%2B)I%5Bt%5D%5Bu.modCount-1-s%5D%3D1%2B3*%2B((v%26%26l%7C%7Cy%26%26c)%26%26i%26%26e.instruments%5Bt%5D.modulators%5Bs%5D%3D%3Du.modulators.dictionary.detune.index)%7Dconst%20q%3Ds%7C%7Ci%3F0%3A12*e.octave%3Blet%20T%3Ds%7C%7Ci%3F4%3Aq%3Bconst%20D%3Di%3F%5B0%2C1%2C2%2C3%2C4%2C5%5D%3As%3F%5B4%2C6%2C7%2C2%2C3%2C8%2C0%2C10%5D%3A%5B0%2C7%2C12%2C19%2C24%2C-5%2C-12%5D%2CO%3D%5B%5D%3Bfor(let%20e%3D0%3Be%3CD.length%3Be%2B%2B)D%5Be%5D%2B%3Dq%3Bfor(let%20t%3D0%3Bt%3Cthis.patternsPerChannel%3Bt%2B%2B)%7Bconst%20s%3De.patterns%5Bt%5D%3Bif(C%26%26o%7C%7Cv%26%26l%7C%7Cy%26%26c)s.instruments%5B0%5D%3Dj(0%2Ce.instruments.length-1%2Ch.read(F))%2Cs.instruments.length%3D1%3Belse%20if(this.patternInstruments)%7Bconst%20t%3Dj(u.instrumentCountMin%2Cx%2Ch.read(k)%2Bu.instrumentCountMin)%3Bfor(let%20n%3D0%3Bn%3Ct%3Bn%2B%2B)s.instruments%5Bn%5D%3Dj(0%2Ce.instruments.length-1%2B2*%2Bi%2Ch.read(F))%3Bs.instruments.length%3Dt%7Delse%20s.instruments%5B0%5D%3D0%2Cs.instruments.length%3Du.instrumentCountMin%3Bif(!(o%26%26d%7C%7C0!%3Dh.read(1)))%7Bs.notes.length%3D0%3Bcontinue%7Dlet%20m%3D0%3Bconst%20g%3Ds.notes%3Blet%20S%3D0%3Bfor(%3Bm%3Cthis.beatsPerBar*u.partsPerBeat%2B%20%2Bi%3B)%7Bconst%20t%3D1%3D%3Dh.read(1)%3Blet%20d%3D!1%2Cx%3D0%3Bif(t%3Fx%3Dj(0%2CO.length-1%2Ch.readLongTail(0%2C0))%3Ad%3D1%3D%3Dh.read(1)%2Ct%7C%7Cd)%7Blet%20d%2Ck%2CF%3Bif(t)d%3DO%5Bx%5D%2CO.splice(x%2C1)%3Belse%7Bif(d%3D%7B%7D%2Cn)1%3D%3Dh.read(1)%3Fd.pitchCount%3Dh.read(3)%2B2%3Ad.pitchCount%3D1%3Belse%20for(d.pitchCount%3D1%3Bd.pitchCount%3C4%26%261%3D%3Dh.read(1)%3B)d.pitchCount%2B%2B%3Bd.pinCount%3Dh.readPinCount()%2Cd.initialSize%3Do%3F2*h.read(2)%3Ai%3Fh.read(9)%3Ah.read(f)%2Cd.pins%3D%5B%5D%2Cd.length%3D0%2Cd.bendCount%3D0%3Bfor(let%20e%3D0%3Be%3Cd.pinCount%3Be%2B%2B)%7Blet%20e%3D%7B%7D%3Be.pitchBend%3D1%3D%3Dh.read(1)%2Ce.pitchBend%26%26d.bendCount%2B%2B%2Cd.length%2B%3Db%26%26o%3Fh.readLegacyPartDuration()*u.partsPerBeat%2Fu.rhythms%5Bthis.rhythm%5D.stepsPerBeat%3Ah.readPartDuration()%2Ce.time%3Dd.length%2Ce.size%3Do%3F2*h.read(2)%3Ai%3Fh.read(9)%3Ah.read(f)%2Cd.pins.push(e)%7D%7DO.unshift(d)%2CO.length%3E10%26%26O.pop()%2Cg.length%3C%3DS%3F(k%3Dnew%20ie(0%2Cm%2Cm%2Bd.length%2Cd.initialSize)%2Cg%5BS%2B%2B%5D%3Dk)%3A(k%3Dg%5BS%2B%2B%5D%2Ck.start%3Dm%2Ck.end%3Dm%2Bd.length%2Ck.pins%5B0%5D.size%3Dd.initialSize)%3Blet%20P%3D0%3Bconst%20q%3D%5B%5D%3Bfor(let%20e%3D0%3Be%3Cd.pitchCount%2Bd.bendCount%3Be%2B%2B)%7Bif(1%3D%3Dh.read(1))%7Bconst%20e%3Dj(0%2CD.length-1%2Ch.read(a))%3BF%3DD%5Be%5D%2CD.splice(e%2C1)%7Delse%7BF%3DT%3Blet%20e%3Dh.readPitchInterval()%3Bfor(%3Be%3E0%3B)%7Bfor(F%2B%2B%3B-1!%3DD.indexOf(F)%3B)F%2B%2B%3Be--%7Dfor(%3Be%3C0%3B)%7Bfor(F--%3B-1!%3DD.indexOf(F)%3B)F--%3Be%2B%2B%7D%7DD.unshift(F)%2CD.length%3Er%26%26D.pop()%2Ce%3Cd.pitchCount%3Fk.pitches%5BP%2B%2B%5D%3DF%3Aq.push(F)%2CT%3De%3D%3Dd.pitchCount-1%3Fk.pitches%5B0%5D%3AF%7Dk.pitches.length%3DP%2Cq.unshift(k.pitches%5B0%5D)%3Bconst%20R%3Di%26%26e.instruments%5Bs.instruments%5B0%5D%5D.modulators%5Bu.modCount-1-k.pitches%5B0%5D%5D%3D%3D%3Du.modulators.dictionary.tempo.index%3Blet%20z%3D0%3BM%26%26R%26%26(z%3Dw-u.tempoMin)%2Ci%26%26(k.pins%5B0%5D.size%2B%3Dz%2Ck.pins%5B0%5D.size*%3DI%5Bs.instruments%5B0%5D%5D%5Bk.pitches%5B0%5D%5D)%3Blet%20A%3D1%3Bfor(const%20e%20of%20d.pins)%7Be.pitchBend%26%26q.shift()%3Bconst%20t%3Dq%5B0%5D-k.pitches%5B0%5D%3Bif(k.pins.length%3C%3DA)k.pins%5BA%2B%2B%5D%3Dse(t%2Ce.time%2Ci%3Fe.size*I%5Bs.instruments%5B0%5D%5D%5Bk.pitches%5B0%5D%5D%2Bz%3Ae.size)%3Belse%7Bconst%20n%3Dk.pins%5BA%2B%2B%5D%3Bn.interval%3Dt%2Cn.time%3De.time%2Cn.size%3Di%3Fe.size*I%5Bs.instruments%5B0%5D%5D%5Bk.pitches%5B0%5D%5D%2Bz%3Ae.size%7D%7Dk.pins.length%3DA%2C0%3D%3Dk.start%26%26(k.continuesLastPattern%3DC%26%26o%7C%7Cv%26%26l%7C%7Cy%26%26c%3F!(y%26%26!p%7C%7Co)%26%26e.instruments%5Bs.instruments%5B0%5D%5D.legacyTieOver%3A1%3D%3Dh.read(1))%2Cm%3Dj(0%2Cthis.beatsPerBar*u.partsPerBeat%2Ck.end)%7Delse%20if(i)%7Bconst%20e%3D1%3D%3Dh.read(1)%2Ct%3Dh.readPartDuration()%3Be%3Fm-%3Dt%3Am%2B%3Dt%7Delse%7Bm%2B%3Db%26%26o%3Fh.readLegacyPartDuration()*u.partsPerBeat%2Fu.rhythms%5Bthis.rhythm%5D.stepsPerBeat%3Ah.readPartDuration()%7D%7Dg.length%3DS%7Dif(d%26%26o)break%3Bif(t%2B%2B%2Ct%3E%3Dthis.getChannelCount())break%7Dif((l%26%26v%7C%7Cy%26%26c)%26%26S%3E%3D0)for(let%20e%3D0%3Be%3Cthis.channels.length%3Be%2B%2B)for(let%20t%3D0%3Bt%3Cthis.channels%5Be%5D.instruments.length%3Bt%2B%2B)%7Bconst%20s%3Dthis.channels%5Be%5D.instruments%5Bt%5D%3Bif(R(s.effects)%26%26(s.reverb%3Du.reverbRange-1)%2Cm%3D%3De%26%26g%3D%3Dt)%7Bconst%20t%3Dthis.channels%5Be%5D.bars%5B0%5D%3Bif(t%3E0)%7Bconst%20s%3Dthis.channels%5Be%5D.patterns%5Bt-1%5D%3Blet%20i%3D6%3Bfor(const%20e%20of%20s.notes)e.pitches%5B0%5D%3D%3Du.modCount-1-S%26%26(i%3DMath.min(i%2Ce.start))%3Bi%3E0%26%26s.notes.push(new%20ie(u.modCount-1-S%2C0%2Ci%2CV))%7Delse%20if(this.channels%5Be%5D.patterns.length%3Cu.barCountMax)%7Bconst%20t%3Dnew%20ne%3Bif(this.channels%5Be%5D.patterns.push(t)%2Cthis.channels%5Be%5D.bars%5B0%5D%3Dthis.channels%5Be%5D.patterns.length%2Cthis.channels%5Be%5D.patterns.length%3Ethis.patternsPerChannel)%7Bfor(let%20e%3D0%3Be%3Cthis.channels.length%3Be%2B%2B)this.channels%5Be%5D.patterns.length%3C%3Dthis.patternsPerChannel%26%26this.channels%5Be%5D.patterns.push(new%20ne)%3Bthis.patternsPerChannel%2B%2B%7Dt.instruments.length%3D1%2Ct.instruments%5B0%5D%3Dg%2Ct.notes.length%3D0%2Ct.notes.push(new%20ie(u.modCount-1-S%2C0%2C6%2CV))%7D%7D%7D%7Dbreak%3Bdefault%3Athrow%20new%20Error(%22Unrecognized%20song%20tag%20code%20%22%2BString.fromCharCode(G)%2B%22%20at%20index%20%22%2B(s-1)%2B%22%20%22%2Be.substring(0%2Cs))%7Du.willReloadForCustomSamples%7Dstatic%20j(e)%7Btry%7Breturn%20Boolean(new%20URL(e))%7Dcatch(e)%7Breturn!1%7D%7Dstatic%20%24(e%2Ct%2Cs%2Ci%2Cn)%7Bconst%20a%3Du.chipWaves%5B0%5D.samples%2Cr%3Du.rawRawChipWaves%5B0%5D.samples%2Cl%3Dt.length%3Bt.push(e)%3Bconst%20h%3Du.chipWaves.length%3Blet%20c%3De%2Cp%3D44100%2Cf%3D!1%2Cm%3D60%2Cd%3D!1%2Cy%3Dnull%2Cv%3Dnull%2Cg%3Dnull%2Cb%3Dnull%2CS%3D!1%2CM%3D!1%2Cw%3De.indexOf(%22!%22)%2Cx%3D-1%3Bif(0%3D%3D%3Dw%26%26(x%3De.indexOf(%22!%22%2Cw%2B1)%2C-1!%3D%3Dx))%7Bconst%20F%3De.slice(w%2B1%2Cx).split(%22%2C%22)%3Bfor(const%20P%20of%20F)%7Bconst%20I%3DP.charAt(0)%2Cq%3DP.slice(1%2CP.length)%3B%22s%22%3D%3D%3DI%3Fp%3D%24(8e3%2C96001%2CU(q%2C44100))%3A%22r%22%3D%3D%3DI%3Fm%3DU(q%2C60)%3A%22p%22%3D%3D%3DI%3Ff%3D!0%3A%22a%22%3D%3D%3DI%3F(y%3D_(q%2Cnull)%2Cnull!%3Dy%26%26(d%3D!0))%3A%22b%22%3D%3D%3DI%3F(v%3D_(q%2Cnull)%2Cnull!%3Dv%26%26(d%3D!0))%3A%22c%22%3D%3D%3DI%3F(g%3D_(q%2Cnull)%2Cnull!%3Dg%26%26(d%3D!0))%3A%22d%22%3D%3D%3DI%3F(b%3D_(q%2Cnull)%2Cnull!%3Db%26%26(b%3D%24(0%2C4%2Cb)%2Cd%3D!0))%3A%22e%22%3D%3D%3DI%26%26(S%3D!0%2Cd%3D!0)%7Dc%3De.slice(x%2B1%2Ce.length)%2CM%3D!0%7Dlet%20k%3Dnull%3Bif(!ve.j(c))return%20alert(e%2B%22%20is%20not%20a%20valid%20url%22)%2C!1%3Bif(k%3Dnew%20URL(c)%2Cn%26%26!M%26%26null!%3Dk)%7Bfunction%20T()%7Bc%3De.slice(0%2Ce.indexOf(%22%2C%22))%2Ck%3Dnew%20URL(c)%2Cp%3D%24(8e3%2C96001%2CU(e.slice(e.indexOf(%22%2C%22)%2B1)%2C44100))%7Dfunction%20D()%7Bc%3De.slice(0%2Ce.indexOf(%22!%22))%2Ck%3Dnew%20URL(c)%2Cm%3DU(e.slice(e.indexOf(%22!%22)%2B1)%2C60)%7D-1!%3De.indexOf(%22%40%22)%26%26(c%3De.replaceAll(%22%40%22%2C%22%22)%2Ck%3Dnew%20URL(c)%2Cf%3D!0)%2C-1!%3De.indexOf(%22%2C%22)%26%26-1!%3De.indexOf(%22!%22)%3Fe.indexOf(%22%2C%22)%3Ce.indexOf(%22!%22)%3F(D()%2CT())%3A(T()%2CD())%3A(-1!%3De.indexOf(%22%2C%22)%26%26T()%2C-1!%3De.indexOf(%22!%22)%26%26D())%7Dif(null!%3Dk)%7Blet%20O%3Dc%3Bconst%20R%3D%5B%5D%3Blet%20z%3B44100!%3D%3Dp%26%26R.push(%22s%22%2Bp)%2C60!%3D%3Dm%26%26R.push(%22r%22%2Bm)%2Cf%26%26R.push(%22p%22)%2Cd%26%26(null!%3Dy%26%26R.push(%22a%22%2By)%2Cnull!%3Dv%26%26R.push(%22b%22%2Bv)%2Cnull!%3Dg%26%26R.push(%22c%22%2Bg)%2Cnull!%3Db%26%26R.push(%22d%22%2Bb)%2CS%26%26R.push(%22e%22))%2CR.length%3E0%26%26(O%3D%22!%22%2BR.join(%22%2C%22)%2B%22!%22%2Bc)%2Ct%5Bl%5D%3DO%2Cz%3DdecodeURIComponent(k.pathname.replace(%2F%5E(%5B%5E%5C%2F%5D*%5C%2F)%2B%2F%2C%22%22))%3Bconst%20A%3D1%3Bu.chipWaves%5Bh%5D%3D%7Bname%3Az%2Cexpression%3AA%2CisCustomSampled%3A!0%2CisPercussion%3Af%2CrootKey%3Am%2CsampleRate%3Ap%2Csamples%3Aa%2Cindex%3Ah%7D%2Cu.rawChipWaves%5Bh%5D%3D%7Bname%3Az%2Cexpression%3AA%2CisCustomSampled%3A!0%2CisPercussion%3Af%2CrootKey%3Am%2CsampleRate%3Ap%2Csamples%3Ar%2Cindex%3Ah%7D%2Cu.rawRawChipWaves%5Bh%5D%3D%7Bname%3Az%2Cexpression%3AA%2CisCustomSampled%3A!0%2CisPercussion%3Af%2CrootKey%3Am%2CsampleRate%3Ap%2Csamples%3Ar%2Cindex%3Ah%7D%3Bconst%20C%3D%7Btype%3A%22chip%22%2CeqFilter%3A%5B%5D%2Ceffects%3A%5B%5D%2Ctransition%3A%22normal%22%2CfadeInSeconds%3A0%2CfadeOutTicks%3A-3%2Cchord%3A%22harmony%22%2Cwave%3Az%2Cunison%3A%22none%22%2Cenvelopes%3A%5B%5D%7D%3Bd%26%26(C.isUsingAdvancedLoopControls%3D!0%2CC.chipWaveLoopStart%3Dnull!%3Dy%3Fy%3A0%2CC.chipWaveLoopEnd%3Dnull!%3Dv%3Fv%3A2%2CC.chipWaveLoopMode%3Dnull!%3Db%3Fb%3A0%2CC.chipWavePlayBackwards%3DS%2CC.chipWaveStartOffset%3Dnull!%3Dg%3Fg%3A0)%3Bconst%20H%3D%7Bindex%3A0%2Cname%3Az%2CmidiProgram%3A80%2Csettings%3AC%7D%3Bs.push(H)%3Bo(c%2Ch%2CC%2C%7BisUsingAdvancedLoopControls%3Ad%2CchipWaveLoopStart%3Ay%2CchipWaveLoopEnd%3Av%2CchipWaveLoopMode%3Ab%2CchipWavePlayBackwards%3AS%2CchipWaveStartOffset%3Ag%7D%2Cp)%2Ci.statusTable%5Bh%5D%3D0%2Ci.urlTable%5Bh%5D%3Dc%2Ci.totalSamples%2B%2B%7Dreturn!0%7Dstatic%20W()%7Bu.chipWaves%3DS(u.chipWaves.slice(0%2Cu.firstIndexForSamplesInChipWaveList))%2Cu.rawChipWaves%3DS(u.rawChipWaves.slice(0%2Cu.firstIndexForSamplesInChipWaveList))%2Cu.rawRawChipWaves%3DS(u.rawRawChipWaves.slice(0%2Cu.firstIndexForSamplesInChipWaveList))%7Dstatic%20q()%7Bz.customSamples%3Dnull%2Cve.W()%2Ci.statusTable%3D%7B%7D%2Ci.urlTable%3D%7B%7D%2Ci.totalSamples%3D0%2Ci.samplesLoaded%3D0%2Cr.dispatchEvent(new%20n(i.totalSamples%2Ci.samplesLoaded))%7DtoJsonObject(e%3D!0%2Ct%3D1%2Cs%3D!0)%7Bconst%20i%3D%5B%5D%3Bfor(let%20n%3D0%3Bn%3Cthis.getChannelCount()%3Bn%2B%2B)%7Bconst%20a%3Dthis.channels%5Bn%5D%2Cr%3D%5B%5D%2Co%3Dthis.getChannelIsNoise(n)%2Cl%3Dthis.getChannelIsMod(n)%3Bfor(const%20e%20of%20a.instruments)r.push(e.toJsonObject())%3Bconst%20h%3D%5B%5D%3Bfor(const%20e%20of%20a.patterns)h.push(e.toJsonObject(this%2Ca%2Cl))%3Bconst%20u%3D%5B%5D%3Bif(e)for(let%20e%3D0%3Be%3Cthis.loopStart%3Be%2B%2B)u.push(a.bars%5Be%5D)%3Bfor(let%20e%3D0%3Be%3Ct%3Be%2B%2B)for(let%20e%3Dthis.loopStart%3Be%3Cthis.loopStart%2Bthis.loopLength%3Be%2B%2B)u.push(a.bars%5Be%5D)%3Bif(s)for(let%20e%3Dthis.loopStart%2Bthis.loopLength%3Be%3Cthis.barCount%3Be%2B%2B)u.push(a.bars%5Be%5D)%3Bconst%20c%3D%7Btype%3Al%3F%22mod%22%3Ao%3F%22drum%22%3A%22pitch%22%2Cname%3Aa.name%2Cinstruments%3Ar%2Cpatterns%3Ah%2Csequence%3Au%7D%3Bo%7C%7C(c.octaveScrollBar%3Da.octave-1)%2Ci.push(c)%7Dconst%20n%3D%7Bname%3Athis.title%2Cformat%3Ave.U%2Cversion%3Ave.P%2Cscale%3Au.scales%5Bthis.scale%5D.name%2CcustomScale%3Athis.scaleCustom%2Ckey%3Au.keys%5Bthis.key%5D.name%2CkeyOctave%3Athis.octave%2CintroBars%3Athis.loopStart%2CloopBars%3Athis.loopLength%2CbeatsPerBar%3Athis.beatsPerBar%2CticksPerBeat%3Au.rhythms%5Bthis.rhythm%5D.stepsPerBeat%2CbeatsPerMinute%3Athis.tempo%2Creverb%3Athis.reverb%2CmasterGain%3Athis.masterGain%2CcompressionThreshold%3Athis.compressionThreshold%2ClimitThreshold%3Athis.limitThreshold%2ClimitDecay%3Athis.limitDecay%2ClimitRise%3Athis.limitRise%2ClimitRatio%3Athis.limitRatio%2CcompressionRatio%3Athis.compressionRatio%2ClayeredInstruments%3Athis.layeredInstruments%2CpatternInstruments%3Athis.patternInstruments%2Cchannels%3Ai%7D%3Breturn%20null!%3Dz.customSamples%26%26z.customSamples.length%3E0%26%26(n.customSamples%3Dz.customSamples)%2Cn%7DfromJsonObject(e%2Ct%3D%22auto%22)%7Bif(this.initToDefault(!0)%2C!e)return%3B%22auto%22%3D%3Dt%26%26%22BeepBox%22%3D%3De.format%26%26(null!%3De.riff%26%26(t%3D%22modbox%22)%2Cnull!%3De.masterGain%26%26(t%3D%22jummbox%22))%3Bconst%20s%3D(%22auto%22%3D%3Dt%3Fe.format%3At).toLowerCase()%3Bif(null!%3De.name%26%26(this.title%3De.name)%2Cnull!%3De.customSamples)%7Bconst%20t%3De.customSamples%3Bif(null%3D%3Dz.customSamples%7C%7Cz.customSamples.join(%22%2C%20%22)!%3Dt.join(%22%2C%20%22))%7Bu.willReloadForCustomSamples%3D!1%2Cve.W()%3Blet%20e%3D!1%2Cs%3D!1%2Cn%3D!1%3Bconst%20a%3D%5B%5D%2Cr%3D%5B%5D%3Bfor(const%20o%20of%20t)if(%22legacysamples%22%3D%3D%3Do.toLowerCase())e%7C%7C(e%3D!0%2Ca.push(o)%2Ch(0))%3Belse%20if(%22nintariboxsamples%22%3D%3D%3Do.toLowerCase())s%7C%7C(s%3D!0%2Ca.push(o)%2Ch(1))%3Belse%20if(%22mariopaintboxsamples%22%3D%3D%3Do.toLowerCase())n%7C%7C(n%3D!0%2Ca.push(o)%2Ch(2))%3Belse%7Bconst%20e%3D!1%3Bve.%24(o%2Ca%2Cr%2Ci%2Ce)%7Dif(a.length%3E0%26%26(z.customSamples%3Da)%2Cr.length%3E0)%7Bconst%20e%3DS(r)%3Bz.presetCategories%5Bz.presetCategories.length%5D%3D%7Bname%3A%22Custom%20Sample%20Presets%22%2Cpresets%3Ae%2Cindex%3Az.presetCategories.length%7D%7D%7D%7Delse%7Blet%20t%3D!1%3Bif(null!%3De.channels)for(let%20i%3D0%3Bi%3Ce.channels.length%3Bi%2B%2B)%7Bconst%20n%3De.channels%5Bi%5D%3Bif(%22pitch%22%3D%3D%3Dn.type%26%26Array.isArray(n.instruments))%7Bconst%20e%3Dn.instruments%3Bfor(let%20i%3D0%3Bi%3Ce.length%3Bi%2B%2B)%7Bconst%20n%3De%5Bi%5D%3Bif(%22chip%22!%3D%3Dn.type)continue%3Bif(null%3D%3Dn.wave)continue%3Bconst%20a%3Dn.wave%2Cr%3D%5B%22paandorasbox%20kick%22%2C%22paandorasbox%20snare%22%2C%22paandorasbox%20piano1%22%2C%22paandorasbox%20WOW%22%2C%22paandorasbox%20overdrive%22%2C%22paandorasbox%20trumpet%22%2C%22paandorasbox%20saxophone%22%2C%22paandorasbox%20orchestrahit%22%2C%22paandorasbox%20detatched%20violin%22%2C%22paandorasbox%20synth%22%2C%22paandorasbox%20sonic3snare%22%2C%22paandorasbox%20come%20on%22%2C%22paandorasbox%20choir%22%2C%22paandorasbox%20overdriveguitar%22%2C%22paandorasbox%20flute%22%2C%22paandorasbox%20legato%20violin%22%2C%22paandorasbox%20tremolo%20violin%22%2C%22paandorasbox%20amen%20break%22%2C%22paandorasbox%20pizzicato%20violin%22%2C%22paandorasbox%20tim%20allen%20grunt%22%2C%22paandorasbox%20tuba%22%2C%22paandorasbox%20loopingcymbal%22%2C%22paandorasbox%20standardkick%22%2C%22paandorasbox%20standardsnare%22%2C%22paandorasbox%20closedhihat%22%2C%22paandorasbox%20foothihat%22%2C%22paandorasbox%20openhihat%22%2C%22paandorasbox%20crashcymbal%22%2C%22paandorasbox%20pianoC4%22%2C%22paandorasbox%20liver%20pad%22%2C%22paandorasbox%20marimba%22%2C%22paandorasbox%20susdotwav%22%2C%22paandorasbox%20wackyboxtts%22%2C%22paandorasbox%20peppersteak_1%22%2C%22paandorasbox%20peppersteak_2%22%2C%22paandorasbox%20vinyl_noise%22%2C%22paandorasbeta%20slap%20bass%22%2C%22paandorasbeta%20HD%20EB%20overdrive%20guitar%22%2C%22paandorasbeta%20sunsoft%20bass%22%2C%22paandorasbeta%20masculine%20choir%22%2C%22paandorasbeta%20feminine%20choir%22%2C%22paandorasbeta%20tololoche%22%2C%22paandorasbeta%20harp%22%2C%22paandorasbeta%20pan%20flute%22%2C%22paandorasbeta%20krumhorn%22%2C%22paandorasbeta%20timpani%22%2C%22paandorasbeta%20crowd%20hey%22%2C%22paandorasbeta%20wario%20land%204%20brass%22%2C%22paandorasbeta%20wario%20land%204%20rock%20organ%22%2C%22paandorasbeta%20wario%20land%204%20DAOW%22%2C%22paandorasbeta%20wario%20land%204%20hour%20chime%22%2C%22paandorasbeta%20wario%20land%204%20tick%22%2C%22paandorasbeta%20kirby%20kick%22%2C%22paandorasbeta%20kirby%20snare%22%2C%22paandorasbeta%20kirby%20bongo%22%2C%22paandorasbeta%20kirby%20click%22%2C%22paandorasbeta%20sonor%20kick%22%2C%22paandorasbeta%20sonor%20snare%22%2C%22paandorasbeta%20sonor%20snare%20(left%20hand)%22%2C%22paandorasbeta%20sonor%20snare%20(right%20hand)%22%2C%22paandorasbeta%20sonor%20high%20tom%22%2C%22paandorasbeta%20sonor%20low%20tom%22%2C%22paandorasbeta%20sonor%20hihat%20(closed)%22%2C%22paandorasbeta%20sonor%20hihat%20(half%20opened)%22%2C%22paandorasbeta%20sonor%20hihat%20(open)%22%2C%22paandorasbeta%20sonor%20hihat%20(open%20tip)%22%2C%22paandorasbeta%20sonor%20hihat%20(pedal)%22%2C%22paandorasbeta%20sonor%20crash%22%2C%22paandorasbeta%20sonor%20crash%20(tip)%22%2C%22paandorasbeta%20sonor%20ride%22%5D%2Co%3D%5B%22pandoraasbox%20kick%22%2C%22pandoraasbox%20snare%22%2C%22pandoraasbox%20piano1%22%2C%22pandoraasbox%20WOW%22%2C%22pandoraasbox%20overdrive%22%2C%22pandoraasbox%20trumpet%22%2C%22pandoraasbox%20saxophone%22%2C%22pandoraasbox%20orchestrahit%22%2C%22pandoraasbox%20detatched%20violin%22%2C%22pandoraasbox%20synth%22%2C%22pandoraasbox%20sonic3snare%22%2C%22pandoraasbox%20come%20on%22%2C%22pandoraasbox%20choir%22%2C%22pandoraasbox%20overdriveguitar%22%2C%22pandoraasbox%20flute%22%2C%22pandoraasbox%20legato%20violin%22%2C%22pandoraasbox%20tremolo%20violin%22%2C%22pandoraasbox%20amen%20break%22%2C%22pandoraasbox%20pizzicato%20violin%22%2C%22pandoraasbox%20tim%20allen%20grunt%22%2C%22pandoraasbox%20tuba%22%2C%22pandoraasbox%20loopingcymbal%22%2C%22pandoraasbox%20standardkick%22%2C%22pandoraasbox%20standardsnare%22%2C%22pandoraasbox%20closedhihat%22%2C%22pandoraasbox%20foothihat%22%2C%22pandoraasbox%20openhihat%22%2C%22pandoraasbox%20crashcymbal%22%2C%22pandoraasbox%20pianoC4%22%2C%22pandoraasbox%20liver%20pad%22%2C%22pandoraasbox%20marimba%22%2C%22pandoraasbox%20susdotwav%22%2C%22pandoraasbox%20wackyboxtts%22%2C%22pandoraasbox%20peppersteak_1%22%2C%22pandoraasbox%20peppersteak_2%22%2C%22pandoraasbox%20vinyl_noise%22%2C%22pandoraasbeta%20slap%20bass%22%2C%22pandoraasbeta%20HD%20EB%20overdrive%20guitar%22%2C%22pandoraasbeta%20sunsoft%20bass%22%2C%22pandoraasbeta%20masculine%20choir%22%2C%22pandoraasbeta%20feminine%20choir%22%2C%22pandoraasbeta%20tololoche%22%2C%22pandoraasbeta%20harp%22%2C%22pandoraasbeta%20pan%20flute%22%2C%22pandoraasbeta%20krumhorn%22%2C%22pandoraasbeta%20timpani%22%2C%22pandoraasbeta%20crowd%20hey%22%2C%22pandoraasbeta%20wario%20land%204%20brass%22%2C%22pandoraasbeta%20wario%20land%204%20rock%20organ%22%2C%22pandoraasbeta%20wario%20land%204%20DAOW%22%2C%22pandoraasbeta%20wario%20land%204%20hour%20chime%22%2C%22pandoraasbeta%20wario%20land%204%20tick%22%2C%22pandoraasbeta%20kirby%20kick%22%2C%22pandoraasbeta%20kirby%20snare%22%2C%22pandoraasbeta%20kirby%20bongo%22%2C%22pandoraasbeta%20kirby%20click%22%2C%22pandoraasbeta%20sonor%20kick%22%2C%22pandoraasbeta%20sonor%20snare%22%2C%22pandoraasbeta%20sonor%20snare%20(left%20hand)%22%2C%22pandoraasbeta%20sonor%20snare%20(right%20hand)%22%2C%22pandoraasbeta%20sonor%20high%20tom%22%2C%22pandoraasbeta%20sonor%20low%20tom%22%2C%22pandoraasbeta%20sonor%20hihat%20(closed)%22%2C%22pandoraasbeta%20sonor%20hihat%20(half%20opened)%22%2C%22pandoraasbeta%20sonor%20hihat%20(open)%22%2C%22pandoraasbeta%20sonor%20hihat%20(open%20tip)%22%2C%22pandoraasbeta%20sonor%20hihat%20(pedal)%22%2C%22pandoraasbeta%20sonor%20crash%22%2C%22pandoraasbeta%20sonor%20crash%20(tip)%22%2C%22pandoraasbeta%20sonor%20ride%22%5D%2Cl%3D%5B%22kick%22%2C%22snare%22%2C%22piano1%22%2C%22WOW%22%2C%22overdrive%22%2C%22trumpet%22%2C%22saxophone%22%2C%22orchestrahit%22%2C%22detatched%20violin%22%2C%22synth%22%2C%22sonic3snare%22%2C%22come%20on%22%2C%22choir%22%2C%22overdriveguitar%22%2C%22flute%22%2C%22legato%20violin%22%2C%22tremolo%20violin%22%2C%22amen%20break%22%2C%22pizzicato%20violin%22%2C%22tim%20allen%20grunt%22%2C%22tuba%22%2C%22loopingcymbal%22%2C%22standardkick%22%2C%22standardsnare%22%2C%22closedhihat%22%2C%22foothihat%22%2C%22openhihat%22%2C%22crashcymbal%22%2C%22pianoC4%22%2C%22liver%20pad%22%2C%22marimba%22%2C%22susdotwav%22%2C%22wackyboxtts%22%5D%3Br.includes(a)%3Ft%3D!0%3Ao.includes(a)%3F(t%3D!0%2Cn.wave%3Dr%5Bo.findIndex((e%3D%3Ee%3D%3D%3Da))%5D)%3Al.includes(a)%26%26(%22trumpet%22!%3D%3Da%26%26%22flute%22!%3D%3Da%7C%7C%22paandorasbox%22%3D%3Ds)%26%26(t%3D!0%2Cn.wave%3Dr%5Bl.findIndex((e%3D%3Ee%3D%3D%3Da))%5D)%7D%7D%7Dt%3F(u.willReloadForCustomSamples%3D!1%2Cve.W()%2Ch(0)%2Cz.customSamples%3D%5B%22legacySamples%22%5D)%3Anull!%3Dz.customSamples%26%26z.customSamples.length%3E0%26%26(u.willReloadForCustomSamples%3D!1%2Cve.q())%7Dif(this.scale%3D0%2Cnull!%3De.scale)%7Bconst%20t%3D%7B%22romani%20%3A)%22%3A%22double%20harmonic%20%3A)%22%2C%22romani%20%3A(%22%3A%22double%20harmonic%20%3A(%22%2C%22dbl%20harmonic%20%3A)%22%3A%22double%20harmonic%20%3A)%22%2C%22dbl%20harmonic%20%3A(%22%3A%22double%20harmonic%20%3A(%22%2Cenigma%3A%22strange%22%7D%2Cs%3Dnull!%3Dt%5Be.scale%5D%3Ft%5Be.scale%5D%3Ae.scale%2Ci%3Du.scales.findIndex((e%3D%3Ee.name%3D%3Ds))%3Bif(-1!%3Di%26%26(this.scale%3Di)%2Cthis.scale%3D%3Du.scales.dictionary.Custom.index%26%26null!%3De.customScale)for(var%20n%20of%20e.customScale.keys())this.scaleCustom%5Bn%5D%3De.customScale%5Bn%5D%7Dif(null!%3De.key)if(%22number%22%3D%3Dtypeof%20e.key)this.key%3D(e.key%2B1200%3E%3E%3E0)%25u.keys.length%3Belse%20if(%22string%22%3D%3Dtypeof%20e.key)%7Bconst%20t%3De.key%3Bif(%22C%2B%22%3D%3D%3Dt)this.key%3D0%2Cthis.octave%3D1%3Belse%20if(%22G-%20(actually%20F%23-)%22%3D%3D%3Dt)this.key%3D6%2Cthis.octave%3D-1%3Belse%20if(%22C-%22%3D%3D%3Dt)this.key%3D0%2Cthis.octave%3D-1%3Belse%20if(%22oh%20no%20(F-)%22%3D%3D%3Dt)this.key%3D5%2Cthis.octave%3D-1%3Belse%7Bconst%20e%3Dt.charAt(0).toUpperCase()%2Cs%3Dt.charAt(1).toLowerCase()%3Blet%20i%3D%7BC%3A0%2CD%3A2%2CE%3A4%2CF%3A5%2CG%3A7%2CA%3A9%2CB%3A11%7D%5Be%5D%3Bconst%20n%3D%7B%22%23%22%3A1%2C%22%E2%99%AF%22%3A1%2Cb%3A-1%2C%22%E2%99%AD%22%3A-1%7D%5Bs%5D%3Bnull!%3Di%26%26(null!%3Dn%26%26(i%2B%3Dn)%2Ci%3C0%26%26(i%2B%3D12)%2Ci%25%3D12%2Cthis.key%3Di)%7D%7Dnull!%3De.beatsPerMinute%26%26(this.tempo%3D%24(u.tempoMin%2Cu.tempoMax%2B1%2C0%7Ce.beatsPerMinute))%2Cnull!%3De.keyOctave%26%26(this.octave%3D%24(u.octaveMin%2Cu.octaveMax%2B1%2C0%7Ce.keyOctave))%3Blet%20a%3D0%3Bnull!%3De.reverb%26%26(a%3D%24(0%2C32%2C0%7Ce.reverb))%2Cnull!%3De.beatsPerBar%26%26(this.beatsPerBar%3DMath.max(u.beatsPerBarMin%2CMath.min(u.beatsPerBarMax%2C0%7Ce.beatsPerBar)))%3Blet%20r%3D4%3Bnull!%3De.ticksPerBeat%26%26(r%3D0%7Ce.ticksPerBeat%7C%7C4%2Cthis.rhythm%3Du.rhythms.findIndex((e%3D%3Ee.stepsPerBeat%3D%3Dr))%2C-1%3D%3Dthis.rhythm%26%26(this.rhythm%3D1))%2Cnull!%3De.masterGain%3Fthis.masterGain%3DMath.max(0%2CMath.min(5%2Ce.masterGain%7C%7C0))%3Athis.masterGain%3D1%2Cnull!%3De.limitThreshold%3Fthis.limitThreshold%3DMath.max(0%2CMath.min(2%2Ce.limitThreshold%7C%7C0))%3Athis.limitThreshold%3D1%2Cnull!%3De.compressionThreshold%3Fthis.compressionThreshold%3DMath.max(0%2CMath.min(1.1%2Ce.compressionThreshold%7C%7C0))%3Athis.compressionThreshold%3D1%2Cnull!%3De.limitRise%3Fthis.limitRise%3DMath.max(2e3%2CMath.min(1e4%2Ce.limitRise%7C%7C0))%3Athis.limitRise%3D4e3%2Cnull!%3De.limitDecay%3Fthis.limitDecay%3DMath.max(1%2CMath.min(30%2Ce.limitDecay%7C%7C0))%3Athis.limitDecay%3D4%2Cnull!%3De.limitRatio%3Fthis.limitRatio%3DMath.max(0%2CMath.min(11%2Ce.limitRatio%7C%7C0))%3Athis.limitRatio%3D1%2Cnull!%3De.compressionRatio%3Fthis.compressionRatio%3DMath.max(0%2CMath.min(1.168%2Ce.compressionRatio%7C%7C0))%3Athis.compressionRatio%3D1%3Blet%20o%3D1%2Cl%3D1%2Cc%3D1%3Bif(null!%3De.channels)for(const%20t%20of%20e.channels)t.instruments%26%26(o%3DMath.max(o%2C0%7Ct.instruments.length))%2Ct.patterns%26%26(l%3DMath.max(l%2C0%7Ct.patterns.length))%2Ct.sequence%26%26(c%3DMath.max(c%2C0%7Ct.sequence.length))%3Bnull!%3De.layeredInstruments%3Fthis.layeredInstruments%3D!!e.layeredInstruments%3Athis.layeredInstruments%3D!1%2Cnull!%3De.patternInstruments%3Fthis.patternInstruments%3D!!e.patternInstruments%3Athis.patternInstruments%3Do%3E1%2Cthis.patternsPerChannel%3DMath.min(l%2Cu.barCountMax)%2Cthis.barCount%3DMath.min(c%2Cu.barCountMax)%2Cnull!%3De.introBars%26%26(this.loopStart%3D%24(0%2Cthis.barCount%2C0%7Ce.introBars))%2Cnull!%3De.loopBars%26%26(this.loopLength%3D%24(1%2Cthis.barCount-this.loopStart%2B1%2C0%7Ce.loopBars))%3Bconst%20p%3D%5B%5D%2Cf%3D%5B%5D%2Cm%3D%5B%5D%3Bif(null!%3De.channels)for(let%20t%3D0%3Bt%3Ce.channels.length%3Bt%2B%2B)%7Blet%20i%3De.channels%5Bt%5D%3Bconst%20n%3Dnew%20ye%3Blet%20o%3D!1%2Cl%3D!1%3Bif(null!%3Di.type%3F(o%3D%22drum%22%3D%3Di.type%2Cl%3D%22mod%22%3D%3Di.type)%3Ao%3Dt%3E%3D3%2Co%3Ff.push(n)%3Al%3Fm.push(n)%3Ap.push(n)%2Cnull!%3Di.octaveScrollBar%26%26(n.octave%3D%24(0%2Cu.pitchOctaves%2C1%2B(0%7Ci.octaveScrollBar))%2Co%26%26(n.octave%3D0))%2Cnull!%3Di.name%3Fn.name%3Di.name%3An.name%3D%22%22%2CArray.isArray(i.instruments))%7Bconst%20e%3Di.instruments%3Bfor(let%20t%3D0%3Bt%3Ce.length%26%26!(t%3E%3Dthis.getMaxInstrumentsPerChannel())%3Bt%2B%2B)%7Bconst%20i%3Dnew%20de(o%2Cl)%3Bn.instruments%5Bt%5D%3Di%2Ci.fromJsonObject(e%5Bt%5D%2Co%2Cl%2C!1%2C!1%2Ca%2Cs)%7D%7Dfor(let%20e%3D0%3Be%3Cthis.patternsPerChannel%3Be%2B%2B)%7Bconst%20t%3Dnew%20ne%3Blet%20a%3Bn.patterns%5Be%5D%3Dt%2Ci.patterns%26%26(a%3Di.patterns%5Be%5D)%2Cnull!%3Da%26%26t.fromJsonObject(a%2Cthis%2Cn%2Cr%2Co%2Cl%2Cs)%7Dn.patterns.length%3Dthis.patternsPerChannel%3Bfor(let%20e%3D0%3Be%3Cthis.barCount%3Be%2B%2B)n.bars%5Be%5D%3Dnull!%3Di.sequence%3FMath.min(this.patternsPerChannel%2Ci.sequence%5Be%5D%3E%3E%3E0)%3A0%3Bn.bars.length%3Dthis.barCount%7Dp.length%3Eu.pitchChannelCountMax%26%26(p.length%3Du.pitchChannelCountMax)%2Cf.length%3Eu.noiseChannelCountMax%26%26(f.length%3Du.noiseChannelCountMax)%2Cm.length%3Eu.modChannelCountMax%26%26(m.length%3Du.modChannelCountMax)%2Cthis.pitchChannelCount%3Dp.length%2Cthis.noiseChannelCount%3Df.length%2Cthis.modChannelCount%3Dm.length%2Cthis.channels.length%3D0%2CArray.prototype.push.apply(this.channels%2Cp)%2CArray.prototype.push.apply(this.channels%2Cf)%2CArray.prototype.push.apply(this.channels%2Cm)%2Cu.willReloadForCustomSamples%7DgetPattern(e%2Ct)%7Bif(t%3C0%7C%7Ct%3E%3Dthis.barCount)return%20null%3Bconst%20s%3Dthis.channels%5Be%5D.bars%5Bt%5D%3Breturn%200%3D%3Ds%3Fnull%3Athis.channels%5Be%5D.patterns%5Bs-1%5D%7DgetBeatsPerMinute()%7Breturn%20this.tempo%7Dstatic%20getNeededBits(e)%7Breturn%2032-Math.clz32(Math.ceil(e%2B1)-1)%7DrestoreLimiterDefaults()%7Bthis.compressionRatio%3D1%2Cthis.limitRatio%3D1%2Cthis.limitRise%3D4e3%2Cthis.limitDecay%3D4%2Cthis.limitThreshold%3D1%2Cthis.compressionThreshold%3D1%2Cthis.masterGain%3D1%7D%7Dve.U%3Du.jsonFormat%2Cve.O%3D2%2Cve.T%3D9%2Cve.H%3D1%2Cve.R%3D6%2Cve.N%3D1%2Cve.L%3D4%2Cve.V%3D1%2Cve.P%3D5%2Cve.k%3D117%3Bclass%20ge%7Bconstructor()%7Bthis.delayLine%3Dnull%2Cthis.allPassG%3D0%2Cthis.allPassGDelta%3D0%2Cthis.sustainFilterA1%3D0%2Cthis.sustainFilterA1Delta%3D0%2Cthis.sustainFilterA2%3D0%2Cthis.sustainFilterA2Delta%3D0%2Cthis.sustainFilterB0%3D0%2Cthis.sustainFilterB0Delta%3D0%2Cthis.sustainFilterB1%3D0%2Cthis.sustainFilterB1Delta%3D0%2Cthis.sustainFilterB2%3D0%2Cthis.sustainFilterB2Delta%3D0%2Cthis.reset()%7Dreset()%7Bthis.delayIndex%3D-1%2Cthis.allPassSample%3D0%2Cthis.allPassPrevInput%3D0%2Cthis.sustainFilterSample%3D0%2Cthis.sustainFilterPrevOutput2%3D0%2Cthis.sustainFilterPrevInput1%3D0%2Cthis.sustainFilterPrevInput2%3D0%2Cthis.fractionalDelaySample%3D0%2Cthis.prevDelayLength%3D-1%2Cthis.delayResetOffset%3D0%7Dupdate(e%2Ct%2Cs%2Ci%2Cn%2Ca%2Cr%2Co)%7Bconst%20l%3D2*Math.PI*u.pickedStringDispersionCenterFreq%2Fe.samplesPerSecond%2Ch%3Dthis.prevDelayLength%2Cc%3Ds.phaseDeltas%5Bi%5D%2Cp%3Ds.phaseDeltaScales%5Bi%5D%2Cf%3Dc*Math.pow(p%2Cn)%2Cm%3D2*Math.PI*c%2Cd%3D2*Math.PI*f%2Cy%3D2*m%2Cv%3D2*d%2Cg%3DMath.min(Math.PI%2Cm*u.pickedStringDispersionFreqMult*Math.pow(l%2Fm%2Cu.pickedStringDispersionFreqScale))%2Cb%3DMath.min(Math.PI%2Cd*u.pickedStringDispersionFreqMult*Math.pow(l%2Fd%2Cu.pickedStringDispersionFreqScale))%2CS%3D2*Math.PI*u.pickedStringShelfHz%2Fe.samplesPerSecond%2CM%3D(Math.pow(100%2Ca)-1)%2F99%2Cw%3D(Math.pow(100%2Cr)-1)%2F99%2Cx%3D1%3D%3Do%3F.25%3A0%2Ck%3D15.6%2CF%3D3*e.samplesPerSecond%2F48e3%2CP%3DMath.pow(.5%2CM*Math.pow(S%2F(m*k)%2C1%2B2*x)*k)%2CI%3DMath.pow(.5%2Cw*Math.pow(S%2F(d*k)%2C1%2B2*x)*k)%2Cq%3DMath.pow(P%2C.002)%2CT%3DMath.pow(I%2C.002)%3Bxe.tempFilterStartCoefficients.allPass1stOrderInvertPhaseAbove(g)%2Ce.tempFrequencyResponse.analyze(xe.tempFilterStartCoefficients%2Cy)%3Bconst%20D%3Dxe.tempFilterStartCoefficients.b%5B0%5D%2CO%3D-e.tempFrequencyResponse.angle()%2Fy%3Bxe.tempFilterEndCoefficients.allPass1stOrderInvertPhaseAbove(b)%2Ce.tempFrequencyResponse.analyze(xe.tempFilterEndCoefficients%2Cv)%3Bconst%20R%3Dxe.tempFilterEndCoefficients.b%5B0%5D%2Cz%3D-e.tempFrequencyResponse.angle()%2Fv%2CA%3D0%3D%3Do%3F0%3A1%3Bif(0%3D%3DA)%7Bconst%20e%3DMath.pow(P%2Cu.stringDecayRate)%2Ct%3DMath.pow(I%2Cu.stringDecayRate)%3Bxe.tempFilterStartCoefficients.highShelf2ndOrder(S%2Ce%2C.5)%2Cxe.tempFilterEndCoefficients.highShelf2ndOrder(S%2Ct%2C.5)%7Delse%7Bconst%20t%3DMath.pow(1%3D%3DA%3F0%3A1%2C.25)%2Cs%3DMath.pow(F*F*m*3.3*48e3%2Fe.samplesPerSecond%2C.5%2Bx)%2FF%2FMath.pow(M%2C.5)%2Ci%3DMath.pow(F*F*d*3.3*48e3%2Fe.samplesPerSecond%2C.5%2Bx)%2FF%2FMath.pow(w%2C.5)%2Cn%3Ds*Math.pow(2%2C.5-1.75*(1-Math.pow(1-t%2C.85)))%2Ca%3Di*Math.pow(2%2C.5-1.75*(1-Math.pow(1-t%2C.85)))%2Cr%3DMath.pow(2%2C-Math.pow(2%2C-Math.pow(t%2C.9)))%2Co%3DMath.pow(2%2C-Math.pow(2%2C-Math.pow(t%2C.9)))%3Bxe.tempFilterStartCoefficients.lowPass2ndOrderButterworth(B(n)%2Cr)%2Cxe.tempFilterEndCoefficients.lowPass2ndOrderButterworth(B(a)%2Co)%7De.tempFrequencyResponse.analyze(xe.tempFilterStartCoefficients%2Cy)%3Bconst%20C%3Dxe.tempFilterStartCoefficients.a%5B1%5D%2CH%3Dxe.tempFilterStartCoefficients.a%5B2%5D%2CE%3Dxe.tempFilterStartCoefficients.b%5B0%5D*q%2CL%3Dxe.tempFilterStartCoefficients.b%5B1%5D*q%2CN%3Dxe.tempFilterStartCoefficients.b%5B2%5D*q%2CG%3D-e.tempFrequencyResponse.angle()%2Fy%3Be.tempFrequencyResponse.analyze(xe.tempFilterEndCoefficients%2Cv)%3Bconst%20V%3Dxe.tempFilterEndCoefficients.a%5B1%5D%2CW%3Dxe.tempFilterEndCoefficients.a%5B2%5D%2C%24%3Dxe.tempFilterEndCoefficients.b%5B0%5D*T%2Cj%3Dxe.tempFilterEndCoefficients.b%5B1%5D*T%2CU%3Dxe.tempFilterEndCoefficients.b%5B2%5D*T%2C_%3D-e.tempFrequencyResponse.angle()%2Fv%2CK%3D1%2Fc%2CJ%3D1%2Ff%2CQ%3DMath.ceil(2*Math.max(K%2CJ))%2CY%3DK-O-G%2CX%3DJ-z-_%3Bthis.prevDelayLength%3DY%2Cthis.delayLengthDelta%3D(X-Y)%2Fn%2Cthis.allPassG%3DD%2Cthis.sustainFilterA1%3DC%2Cthis.sustainFilterA2%3DH%2Cthis.sustainFilterB0%3DE%2Cthis.sustainFilterB1%3DL%2Cthis.sustainFilterB2%3DN%2Cthis.allPassGDelta%3D(R-D)%2Fn%2Cthis.sustainFilterA1Delta%3D(V-C)%2Fn%2Cthis.sustainFilterA2Delta%3D(W-H)%2Fn%2Cthis.sustainFilterB0Delta%3D(%24-E)%2Fn%2Cthis.sustainFilterB1Delta%3D(j-L)%2Fn%2Cthis.sustainFilterB2Delta%3D(U-N)%2Fn%3Bconst%20Z%3DMath.abs(Math.log2(Y%2Fh))%3E.01%2Cee%3D-1%3D%3Dthis.delayIndex%7C%7CZ%3Bif(null%3D%3Dthis.delayLine%7C%7Cthis.delayLine.length%3C%3DQ)%7Bconst%20t%3DMath.ceil(2*e.samplesPerSecond%2Fde.frequencyFromPitch(12))%2Cs%3Dnew%20Float32Array(xe.fittingPowerOfTwo(Math.max(t%2CQ)))%3Bif(!ee%26%26null!%3Dthis.delayLine)%7Bconst%20e%3Dthis.delayLine.length-1%3E%3E0%2Ct%3Dthis.delayIndex%2Bthis.delayResetOffset%3Bthis.delayIndex%3Dthis.delayLine.length-this.delayResetOffset%3Bfor(let%20i%3D0%3Bi%3Cthis.delayLine.length%3Bi%2B%2B)s%5Bi%5D%3Dthis.delayLine%5Bt%2Bi%26e%5D%7Dthis.delayLine%3Ds%7Dconst%20te%3Dthis.delayLine%2Cse%3Dte.length-1%3E%3E0%3Bif(ee)%7Bthis.delayIndex%3D0%2Cthis.allPassSample%3D0%2Cthis.allPassPrevInput%3D0%2Cthis.sustainFilterSample%3D0%2Cthis.sustainFilterPrevOutput2%3D0%2Cthis.sustainFilterPrevInput1%3D0%2Cthis.sustainFilterPrevInput2%3D0%2Cthis.fractionalDelaySample%3D0%3Bconst%20s%3D-Y%2Ci%3DMath.floor(s-K%2F2)%2Cn%3DMath.ceil(i%2B2*K)%3Bthis.delayResetOffset%3Dn%3Bfor(let%20e%3Di%3Be%3C%3Dn%3Be%2B%2B)te%5Be%26se%5D%3D0%3Bconst%20a%3Dt.wave%2Cr%3Da.length-1%2Co%3Dr%2FK%2Cl%3DMath.min(.2*K%2C.003*e.samplesPerSecond)%2Ch%3DMath.ceil(s)%2Cu%3Ds%2BK%2Bl%2Cc%3Du%3Blet%20p%3D(h-s)*o%2Cf%3D0%3Bfor(let%20e%3Dh%3Be%3C%3Dc%3Be%2B%2B)%7Bconst%20t%3D0%7Cp%2Ci%3Dt%25r%3Blet%20n%3Da%5Bi%5D%3Bconst%20h%3Dp-t%3Bn%2B%3D(a%5Bi%2B1%5D-n)*h%3Bconst%20c%3D(n-f)%2Fo%2Cm%3DMath.min(1%2C(e-s)%2Fl)*Math.min(1%2C(u-e)%2Fl)%2Cd%3Dm*m*(3-2*m)%3Bte%5Be%26se%5D%2B%3Dc*d%2Cf%3Dn%2Cp%2B%3Do%7D%7D%7D%7Dclass%20be%7Bconstructor()%7Bthis.noteSecondsStart%3D0%2Cthis.noteSecondsStartUnscaled%3D0%2Cthis.noteSecondsEnd%3D0%2Cthis.noteSecondsEndUnscaled%3D0%2Cthis.noteTicksStart%3D0%2Cthis.noteTicksEnd%3D0%2Cthis.noteSizeStart%3Du.noteSizeMax%2Cthis.noteSizeEnd%3Du.noteSizeMax%2Cthis.prevNoteSize%3Du.noteSizeMax%2Cthis.nextNoteSize%3Du.noteSizeMax%2Cthis._%3Du.noteSizeMax%2Cthis.prevNoteSecondsStart%3D0%2Cthis.prevNoteSecondsStartUnscaled%3D0%2Cthis.prevNoteSecondsEnd%3D0%2Cthis.prevNoteSecondsEndUnscaled%3D0%2Cthis.prevNoteTicksStart%3D0%2Cthis.prevNoteTicksEnd%3D0%2Cthis.K%3Du.noteSizeMax%2Cthis.prevSlideStart%3D!1%2Cthis.prevSlideEnd%3D!1%2Cthis.nextSlideStart%3D!1%2Cthis.nextSlideEnd%3D!1%2Cthis.prevSlideRatioStart%3D0%2Cthis.prevSlideRatioEnd%3D0%2Cthis.nextSlideRatioStart%3D0%2Cthis.nextSlideRatioEnd%3D0%2Cthis.envelopeStarts%3D%5B%5D%2Cthis.envelopeEnds%3D%5B%5D%2Cthis.J%3D%5B%5D%2Cthis.Y%3D0%2Cthis.lowpassCutoffDecayVolumeCompensation%3D1%3Bfor(let%20e%3D0%3Be%3C41%3Be%2B%2B)this.envelopeStarts%5Be%5D%3D1%2Cthis.envelopeEnds%5Be%5D%3D1%3Bthis.reset()%7Dreset()%7Bthis.noteSecondsEnd%3D0%2Cthis.noteSecondsEndUnscaled%3D0%2Cthis.noteTicksEnd%3D0%2Cthis._%3Du.noteSizeMax%2Cthis.prevNoteSecondsEnd%3D0%2Cthis.prevNoteSecondsEndUnscaled%3D0%2Cthis.prevNoteTicksEnd%3D0%2Cthis.K%3Du.noteSizeMax%2Cthis.Y%3D0%7DcomputeEnvelopes(e%2Ct%2Cs%2Ci%2Cn%2Ca%2Cr)%7Bconst%20o%3Dn%3Bn*%3Dr%3Bconst%20l%3De.getTransition()%3Bnull%3D%3Da%7C%7C!a.atNoteStart%7C%7Cl.continues%7C%7Ca.forceContinueAtStart%7C%7C(this.prevNoteSecondsEnd%3Dthis.noteSecondsEnd%2Cthis.prevNoteSecondsEndUnscaled%3Dthis.noteSecondsEndUnscaled%2Cthis.prevNoteTicksEnd%3Dthis.noteTicksEnd%2Cthis.K%3Dthis._%2Cthis.noteSecondsEnd%3D0%2Cthis.noteSecondsEndUnscaled%3D0%2Cthis.noteTicksEnd%3D0)%2Cnull!%3Da%26%26(null!%3Da.note%3Fthis._%3Da.note.pins%5Ba.note.pins.length-1%5D.size%3Athis._%3Du.noteSizeMax)%3Bconst%20h%3Ds%2Br%2Cc%3Di%2B1%2Cp%3Dthis.noteSecondsEnd%2Cf%3Dthis.noteSecondsEndUnscaled%2Cm%3Dp%2Bn%2Cd%3Df%2Bo%2Cy%3Dthis.noteTicksEnd%2Cv%3Dy%2B1%2Cg%3Dthis.prevNoteSecondsEnd%2Cb%3Dthis.prevNoteSecondsEndUnscaled%2CS%3Dg%2Bn%2CM%3Db%2Bo%2Cw%3Dthis.prevNoteTicksEnd%2Cx%3Dw%2B1%2Ck%3D1%2F(u.ticksPerPart*u.partsPerBeat)%2CF%3Dk*s%2CP%3Dk*h%3Blet%20I%3Dthis._%2Cq%3Dthis._%2CT%3Dthis.K%2CD%3D0%2CO%3D!1%2CR%3D!1%2Cz%3D!1%2CA%3D!1%2CC%3D0%2CH%3D0%2CE%3D0%2CL%3D0%3Bif(null!%3Da%26%26null!%3Da.note%26%26!a.passedEndOfNote)%7Bconst%20e%3Da.note.getEndPinIndex(t)%2Cs%3Da.note.pins%5Be-1%5D%2Cn%3Da.note.pins%5Be%5D%2Cr%3D(a.note.start%2Bs.time)*u.ticksPerPart%2Co%3D(a.note.start%2Bn.time)*u.ticksPerPart%2Ch%3D(i-r)%2F(o-r)%2Cp%3D(c-r)%2F(o-r)%3Bif(I%3Ds.size%2B(n.size-s.size)*h%2Cq%3Ds.size%2B(n.size-s.size)*p%2Cl.slides)%7Bconst%20e%3Da.noteStartPart*u.ticksPerPart%2Ct%3Da.noteEndPart*u.ticksPerPart%2Cs%3D.5*(t-e)%2Cn%3DMath.min(s%2Cl.slideTicks)%3Bnull%3D%3Da.prevNote%7C%7Ca.forceContinueAtStart%7C%7C(i-e%3Cn%26%26(O%3D!0%2CC%3D.5*(1-(i-e)%2Fn))%2Cc-e%3Cn%26%26(R%3D!0%2CH%3D.5*(1-(c-e)%2Fn)))%2Cnull%3D%3Da.nextNote%7C%7Ca.forceContinueAtEnd%7C%7C(D%3Da.nextNote.pins%5B0%5D.size%2Ct-i%3Cn%26%26(z%3D!0%2CE%3D.5*(1-(t-i)%2Fn))%2Ct-c%3Cn%26%26(A%3D!0%2CL%3D.5*(1-(t-c)%2Fn)))%7D%7Dlet%20N%3D1%2CG%3D!1%3Bfor(let%20t%3D0%3Bt%3C%3De.envelopeCount%3Bt%2B%2B)%7Blet%20s%2Ci%2Cn%3Bif(t%3D%3De.envelopeCount)%7Bif(G)break%3Bs%3Du.instrumentAutomationTargets.dictionary.noteVolume%2Ci%3D0%2Cn%3Du.envelopes.dictionary%5B%22note%20size%22%5D%7Delse%7Blet%20a%3De.envelopes%5Bt%5D%3Bs%3Du.instrumentAutomationTargets%5Ba.target%5D%2Ci%3Da.index%2Cn%3Du.envelopes%5Ba.envelope%5D%2C0%3D%3Dn.type%26%26(G%3D!0)%7Dif(null!%3Ds.computeIndex)%7Bconst%20t%3Ds.computeIndex%2Bi%3Blet%20a%3Dbe.computeEnvelope(n%2Cp%2CF%2CI)%3Bif(O)%7Ba%2B%3D(be.computeEnvelope(n%2Cg%2CF%2CT)-a)*C%7Dif(z)%7Ba%2B%3D(be.computeEnvelope(n%2C0%2CF%2CD)-a)*E%7Dlet%20r%3Da%3Bif(0%3D%3De.discreteEnvelope)%7Bif(r%3Dbe.computeEnvelope(n%2Cm%2CP%2Cq)%2CR)%7Br%2B%3D(be.computeEnvelope(n%2CS%2CP%2CT)-r)*H%7Dif(A)%7Br%2B%3D(be.computeEnvelope(n%2C0%2CP%2CD)-r)*L%7D%7Dif(this.envelopeStarts%5Bt%5D*%3Da%2Cthis.envelopeEnds%5Bt%5D*%3Dr%2Cthis.J%5Bthis.Y%2B%2B%5D%3Dt%2Cs.isFilter)%7Bconst%20t%3Dnull!%3De.tmpNoteFilterStart%3Fe.tmpNoteFilterStart%3Ae.noteFilter%3Bt.controlPointCount%3Ei%26%260%3D%3Dt.controlPoints%5Bi%5D.type%26%26(N%3DMath.max(N%2Cbe.getLowpassCutoffDecayVolumeCompensation(n)))%7D%7D%7Dthis.noteSecondsStart%3Dp%2Cthis.noteSecondsStartUnscaled%3Df%2Cthis.noteSecondsEnd%3Dm%2Cthis.noteSecondsEndUnscaled%3Dd%2Cthis.noteTicksStart%3Dy%2Cthis.noteTicksEnd%3Dv%2Cthis.prevNoteSecondsStart%3Dg%2Cthis.prevNoteSecondsStartUnscaled%3Db%2Cthis.prevNoteSecondsEnd%3DS%2Cthis.prevNoteSecondsEndUnscaled%3DM%2Cthis.prevNoteTicksStart%3Dw%2Cthis.prevNoteTicksEnd%3Dx%2Cthis.prevNoteSize%3DT%2Cthis.nextNoteSize%3DD%2Cthis.noteSizeStart%3DI%2Cthis.noteSizeEnd%3Dq%2Cthis.prevSlideStart%3DO%2Cthis.prevSlideEnd%3DR%2Cthis.nextSlideStart%3Dz%2Cthis.nextSlideEnd%3DA%2Cthis.prevSlideRatioStart%3DC%2Cthis.prevSlideRatioEnd%3DH%2Cthis.nextSlideRatioStart%3DE%2Cthis.nextSlideRatioEnd%3DL%2Cthis.lowpassCutoffDecayVolumeCompensation%3DN%7DclearEnvelopes()%7Bfor(let%20e%3D0%3Be%3Cthis.Y%3Be%2B%2B)%7Bconst%20t%3Dthis.J%5Be%5D%3Bthis.envelopeStarts%5Bt%5D%3D1%2Cthis.envelopeEnds%5Bt%5D%3D1%7Dthis.Y%3D0%7Dstatic%20computeEnvelope(e%2Ct%2Cs%2Ci)%7Bswitch(e.type)%7Bcase%200%3Areturn%20xe.noteSizeToVolumeMult(i)%3Bcase%201%3Areturn%201%3Bcase%204%3Areturn%201%2F(1%2Bt*e.speed)%3Bcase%205%3Areturn%201-1%2F(1%2Bt*e.speed)%3Bcase%206%3Areturn.5-.5*Math.cos(2*s*Math.PI*e.speed)%3Bcase%207%3Areturn.75-.25*Math.cos(2*s*Math.PI*e.speed)%3Bcase%202%3Areturn%20Math.max(1%2C2-10*t)%3Bcase%203%3Aconst%20n%3D.25%2FMath.sqrt(e.speed)%3Breturn%20t%3Cn%3Ft%2Fn%3A1%2F(1%2B(t-n)*e.speed)%3Bcase%208%3Areturn%20Math.pow(2%2C-e.speed*t)%3Bcase%2013%3Areturn%201*%2B(t%3C.25%2FMath.sqrt(e.speed))%3Bcase%209%3Alet%20a%3D.5-.5*Math.cos(s*e.speed)%3Breturn%20a%3D1%2F(1%2Bt*(e.speed-a%2F(1.5%2Fe.speed)))%2Ca%3Da%3E0%3Fa%3A0%2Ca%3Bcase%2011%3A%7Blet%20s%3D1-t%2F(16%2Fe.speed)%3Breturn%20s%3Ds%3E0%3Fs%3A0%2Cs%7Dcase%2012%3A%7Blet%20s%3Dt%2F(16%2Fe.speed)%3Breturn%20s%3Ds%3C1%3Fs%3A1%2Cs%7Ddefault%3Athrow%20new%20Error(%22Unrecognized%20operator%20envelope%20type.%22)%7D%7Dstatic%20getLowpassCutoffDecayVolumeCompensation(e)%7Breturn%208%3D%3De.type%3F1.25%2B.025*e.speed%3A4%3D%3De.type%3F1%2B.02*e.speed%3A1%7D%7Dclass%20Se%7Bconstructor()%7Bthis.pitches%3DArray(u.maxChordSize%2B2).fill(0)%2Cthis.pitchCount%3D0%2Cthis.chordSize%3D0%2Cthis.drumsetPitch%3Dnull%2Cthis.note%3Dnull%2Cthis.prevNote%3Dnull%2Cthis.nextNote%3Dnull%2Cthis.prevNotePitchIndex%3D0%2Cthis.nextNotePitchIndex%3D0%2Cthis.freshlyAllocated%3D!0%2Cthis.atNoteStart%3D!1%2Cthis.isOnLastTick%3D!1%2Cthis.passedEndOfNote%3D!1%2Cthis.forceContinueAtStart%3D!1%2Cthis.forceContinueAtEnd%3D!1%2Cthis.noteStartPart%3D0%2Cthis.noteEndPart%3D0%2Cthis.ticksSinceReleased%3D0%2Cthis.liveInputSamplesHeld%3D0%2Cthis.lastInterval%3D0%2Cthis.noiseSample%3D0%2Cthis.noiseSampleA%3D0%2Cthis.noiseSampleB%3D0%2Cthis.stringSustainStart%3D0%2Cthis.stringSustainEnd%3D0%2Cthis.phases%3D%5B%5D%2Cthis.operatorWaves%3D%5B%5D%2Cthis.phaseDeltas%3D%5B%5D%2Cthis.directions%3D%5B%5D%2Cthis.chipWaveCompletions%3D%5B%5D%2Cthis.chipWavePrevWaves%3D%5B%5D%2Cthis.chipWaveCompletionsLastWave%3D%5B%5D%2Cthis.phaseDeltaScales%3D%5B%5D%2Cthis.expression%3D0%2Cthis.expressionDelta%3D0%2Cthis.operatorExpressions%3D%5B%5D%2Cthis.operatorExpressionDeltas%3D%5B%5D%2Cthis.prevPitchExpressions%3DArray(u.maxPitchOrOperatorCount).fill(null)%2Cthis.prevVibrato%3Dnull%2Cthis.prevStringDecay%3Dnull%2Cthis.pulseWidth%3D0%2Cthis.pulseWidthDelta%3D0%2Cthis.decimalOffset%3D0%2Cthis.supersawDynamism%3D0%2Cthis.supersawDynamismDelta%3D0%2Cthis.supersawUnisonDetunes%3D%5B%5D%2Cthis.supersawShape%3D0%2Cthis.supersawShapeDelta%3D0%2Cthis.supersawDelayLength%3D0%2Cthis.supersawDelayLengthDelta%3D0%2Cthis.supersawDelayLine%3Dnull%2Cthis.supersawDelayIndex%3D-1%2Cthis.supersawPrevPhaseDelta%3Dnull%2Cthis.pickedStrings%3D%5B%5D%2Cthis.noteFilters%3D%5B%5D%2Cthis.noteFilterCount%3D0%2Cthis.initialNoteFilterInput1%3D0%2Cthis.initialNoteFilterInput2%3D0%2Cthis.specialIntervalExpressionMult%3D1%2Cthis.feedbackOutputs%3D%5B%5D%2Cthis.feedbackMult%3D0%2Cthis.feedbackDelta%3D0%2Cthis.stereoVolumeLStart%3D0%2Cthis.stereoVolumeRStart%3D0%2Cthis.stereoVolumeLDelta%3D0%2Cthis.stereoVolumeRDelta%3D0%2Cthis.stereoDelayStart%3D0%2Cthis.stereoDelayEnd%3D0%2Cthis.stereoDelayDelta%3D0%2Cthis.customVolumeStart%3D0%2Cthis.customVolumeEnd%3D0%2Cthis.filterResonanceStart%3D0%2Cthis.filterResonanceDelta%3D0%2Cthis.isFirstOrder%3D!1%2Cthis.envelopeComputer%3Dnew%20be%2Cthis.reset()%7Dreset()%7Bthis.noiseSample%3D0%2Cthis.noiseSampleA%3D0%2Cthis.noiseSampleB%3D0%3Bfor(let%20e%3D0%3Be%3Cu.maxPitchOrOperatorCount%3Be%2B%2B)this.phases%5Be%5D%3D0%2Cthis.directions%5Be%5D%3D1%2Cthis.chipWaveCompletions%5Be%5D%3D0%2Cthis.chipWavePrevWaves%5Be%5D%3D0%2Cthis.chipWaveCompletionsLastWave%5Be%5D%3D0%2Cthis.operatorWaves%5Be%5D%3Du.operatorWaves%5B0%5D%2Cthis.feedbackOutputs%5Be%5D%3D0%2Cthis.prevPitchExpressions%5Be%5D%3Dnull%3Bfor(let%20e%3D0%3Be%3Cthis.noteFilterCount%3Be%2B%2B)this.noteFilters%5Be%5D.resetOutput()%3Bthis.noteFilterCount%3D0%2Cthis.initialNoteFilterInput1%3D0%2Cthis.initialNoteFilterInput2%3D0%2Cthis.liveInputSamplesHeld%3D0%2Cthis.supersawDelayIndex%3D-1%3Bfor(const%20e%20of%20this.pickedStrings)e.reset()%3Bthis.envelopeComputer.reset()%2Cthis.prevVibrato%3Dnull%2Cthis.prevStringDecay%3Dnull%2Cthis.supersawPrevPhaseDelta%3Dnull%2Cthis.drumsetPitch%3Dnull%7D%7Dclass%20Me%7Bconstructor()%7Bthis.awake%3D!1%2Cthis.computed%3D!1%2Cthis.tonesAddedInThisTick%3D!1%2Cthis.flushingDelayLines%3D!1%2Cthis.deactivateAfterThisTick%3D!1%2Cthis.attentuationProgress%3D0%2Cthis.flushedSamples%3D0%2Cthis.activeTones%3Dnew%20E%2Cthis.activeModTones%3Dnew%20E%2Cthis.releasedTones%3Dnew%20E%2Cthis.liveInputTones%3Dnew%20E%2Cthis.type%3D0%2Cthis.synthesizer%3Dnull%2Cthis.wave%3Dnull%2Cthis.isUsingAdvancedLoopControls%3D!1%2Cthis.chipWaveLoopStart%3D0%2Cthis.chipWaveLoopEnd%3D0%2Cthis.chipWaveLoopMode%3D0%2Cthis.chipWavePlayBackwards%3D!1%2Cthis.chipWaveStartOffset%3D0%2Cthis.noisePitchFilterMult%3D1%2Cthis.unison%3Dnull%2Cthis.unisonVoices%3D1%2Cthis.unisonSpread%3D0%2Cthis.unisonOffset%3D0%2Cthis.unisonExpression%3D1.4%2Cthis.unisonSign%3D1%2Cthis.chord%3Dnull%2Cthis.effects%3D0%2Cthis.volumeScale%3D0%2Cthis.aliases%3D!1%2Cthis.arpTime%3D0%2Cthis.vibratoTime%3D0%2Cthis.nextVibratoTime%3D0%2Cthis.envelopeTime%3D0%2Cthis.eqFilterVolume%3D1%2Cthis.eqFilterVolumeDelta%3D0%2Cthis.mixVolume%3D1%2Cthis.mixVolumeDelta%3D0%2Cthis.delayInputMult%3D0%2Cthis.delayInputMultDelta%3D0%2Cthis.distortion%3D0%2Cthis.distortionDelta%3D0%2Cthis.distortionDrive%3D0%2Cthis.distortionDriveDelta%3D0%2Cthis.distortionFractionalInput1%3D0%2Cthis.distortionFractionalInput2%3D0%2Cthis.distortionFractionalInput3%3D0%2Cthis.distortionPrevInput%3D0%2Cthis.distortionNextOutput%3D0%2Cthis.bitcrusherPrevInput%3D0%2Cthis.bitcrusherCurrentOutput%3D0%2Cthis.bitcrusherPhase%3D1%2Cthis.bitcrusherPhaseDelta%3D0%2Cthis.bitcrusherPhaseDeltaScale%3D1%2Cthis.bitcrusherScale%3D1%2Cthis.bitcrusherScaleScale%3D1%2Cthis.bitcrusherFoldLevel%3D1%2Cthis.bitcrusherFoldLevelScale%3D1%2Cthis.eqFilters%3D%5B%5D%2Cthis.eqFilterCount%3D0%2Cthis.initialEqFilterInput1%3D0%2Cthis.initialEqFilterInput2%3D0%2Cthis.panningDelayLine%3Dnull%2Cthis.panningDelayPos%3D0%2Cthis.panningVolumeL%3D0%2Cthis.panningVolumeR%3D0%2Cthis.panningVolumeDeltaL%3D0%2Cthis.panningVolumeDeltaR%3D0%2Cthis.panningOffsetL%3D0%2Cthis.panningOffsetR%3D0%2Cthis.panningOffsetDeltaL%3D0%2Cthis.panningOffsetDeltaR%3D0%2Cthis.chorusDelayLineL%3Dnull%2Cthis.chorusDelayLineR%3Dnull%2Cthis.chorusDelayLineDirty%3D!1%2Cthis.chorusDelayPos%3D0%2Cthis.chorusPhase%3D0%2Cthis.chorusVoiceMult%3D0%2Cthis.chorusVoiceMultDelta%3D0%2Cthis.chorusCombinedMult%3D0%2Cthis.chorusCombinedMultDelta%3D0%2Cthis.echoDelayLineL%3Dnull%2Cthis.echoDelayLineR%3Dnull%2Cthis.echoDelayLineDirty%3D!1%2Cthis.echoDelayPos%3D0%2Cthis.echoDelayOffsetStart%3D0%2Cthis.echoDelayOffsetEnd%3Dnull%2Cthis.echoDelayOffsetRatio%3D0%2Cthis.echoDelayOffsetRatioDelta%3D0%2Cthis.echoMult%3D0%2Cthis.echoMultDelta%3D0%2Cthis.echoShelfA1%3D0%2Cthis.echoShelfB0%3D0%2Cthis.echoShelfB1%3D0%2Cthis.echoShelfSampleL%3D0%2Cthis.echoShelfSampleR%3D0%2Cthis.echoShelfPrevInputL%3D0%2Cthis.echoShelfPrevInputR%3D0%2Cthis.reverbDelayLine%3Dnull%2Cthis.reverbDelayLineDirty%3D!1%2Cthis.reverbDelayPos%3D0%2Cthis.reverbMult%3D0%2Cthis.reverbMultDelta%3D0%2Cthis.reverbShelfA1%3D0%2Cthis.reverbShelfB0%3D0%2Cthis.reverbShelfB1%3D0%2Cthis.reverbShelfSample0%3D0%2Cthis.reverbShelfSample1%3D0%2Cthis.reverbShelfSample2%3D0%2Cthis.reverbShelfSample3%3D0%2Cthis.reverbShelfPrevInput0%3D0%2Cthis.reverbShelfPrevInput1%3D0%2Cthis.reverbShelfPrevInput2%3D0%2Cthis.reverbShelfPrevInput3%3D0%2Cthis.spectrumWave%3Dnew%20he%2Cthis.harmonicsWave%3Dnew%20ce%2Cthis.drumsetSpectrumWaves%3D%5B%5D%3Bfor(let%20e%3D0%3Be%3Cu.drumCount%3Be%2B%2B)this.drumsetSpectrumWaves%5Be%5D%3Dnew%20he%7DallocateNecessaryBuffers(e%2Ct%2Cs)%7Bif(T(t.effects)%26%26(null%3D%3Dthis.panningDelayLine%7C%7Cthis.panningDelayLine.length%3Ce.panningDelayBufferSize)%26%26(this.panningDelayLine%3Dnew%20Float32Array(e.panningDelayBufferSize))%2CD(t.effects)%26%26((null%3D%3Dthis.chorusDelayLineL%7C%7Cthis.chorusDelayLineL.length%3Ce.chorusDelayBufferSize)%26%26(this.chorusDelayLineL%3Dnew%20Float32Array(e.chorusDelayBufferSize))%2C(null%3D%3Dthis.chorusDelayLineR%7C%7Cthis.chorusDelayLineR.length%3Ce.chorusDelayBufferSize)%26%26(this.chorusDelayLineR%3Dnew%20Float32Array(e.chorusDelayBufferSize)))%2CO(t.effects))%7Bconst%20e%3DMath.max(u.echoDelayRange%3E%3E1%2Ct.echoDelay%2B1)%2Ci%3D2*xe.fittingPowerOfTwo(e*u.echoDelayStepTicks*s)%3Bif(null%3D%3Dthis.echoDelayLineL%7C%7Cnull%3D%3Dthis.echoDelayLineR)this.echoDelayLineL%3Dnew%20Float32Array(i)%2Cthis.echoDelayLineR%3Dnew%20Float32Array(i)%3Belse%20if(this.echoDelayLineL.length%3Ci%7C%7Cthis.echoDelayLineR.length%3Ci)%7Bconst%20e%3Dnew%20Float32Array(i)%2Ct%3Dnew%20Float32Array(i)%2Cs%3Dthis.echoDelayLineL.length-1%3Bfor(let%20i%3D0%3Bi%3Cthis.echoDelayLineL.length%3Bi%2B%2B)e%5Bi%5D%3Dthis.echoDelayLineL%5Bthis.echoDelayPos%2Bi%26s%5D%2Ct%5Bi%5D%3Dthis.echoDelayLineL%5Bthis.echoDelayPos%2Bi%26s%5D%3Bthis.echoDelayPos%3Dthis.echoDelayLineL.length%2Cthis.echoDelayLineL%3De%2Cthis.echoDelayLineR%3Dt%7D%7DR(t.effects)%26%26null%3D%3Dthis.reverbDelayLine%26%26(this.reverbDelayLine%3Dnew%20Float32Array(u.reverbDelayBufferSize))%7Ddeactivate()%7Bthis.bitcrusherPrevInput%3D0%2Cthis.bitcrusherCurrentOutput%3D0%2Cthis.bitcrusherPhase%3D1%3Bfor(let%20e%3D0%3Be%3Cthis.eqFilterCount%3Be%2B%2B)this.eqFilters%5Be%5D.resetOutput()%3Bif(this.eqFilterCount%3D0%2Cthis.initialEqFilterInput1%3D0%2Cthis.initialEqFilterInput2%3D0%2Cthis.distortionFractionalInput1%3D0%2Cthis.distortionFractionalInput2%3D0%2Cthis.distortionFractionalInput3%3D0%2Cthis.distortionPrevInput%3D0%2Cthis.distortionNextOutput%3D0%2Cthis.panningDelayPos%3D0%2Cnull!%3Dthis.panningDelayLine)for(let%20e%3D0%3Be%3Cthis.panningDelayLine.length%3Be%2B%2B)this.panningDelayLine%5Be%5D%3D0%3Bthis.echoDelayOffsetEnd%3Dnull%2Cthis.echoShelfSampleL%3D0%2Cthis.echoShelfSampleR%3D0%2Cthis.echoShelfPrevInputL%3D0%2Cthis.echoShelfPrevInputR%3D0%2Cthis.reverbShelfSample0%3D0%2Cthis.reverbShelfSample1%3D0%2Cthis.reverbShelfSample2%3D0%2Cthis.reverbShelfSample3%3D0%2Cthis.reverbShelfPrevInput0%3D0%2Cthis.reverbShelfPrevInput1%3D0%2Cthis.reverbShelfPrevInput2%3D0%2Cthis.reverbShelfPrevInput3%3D0%2Cthis.volumeScale%3D1%2Cthis.aliases%3D!1%2Cthis.awake%3D!1%2Cthis.flushingDelayLines%3D!1%2Cthis.deactivateAfterThisTick%3D!1%2Cthis.attentuationProgress%3D0%2Cthis.flushedSamples%3D0%7DresetAllEffects()%7Bif(this.deactivate()%2Cthis.vibratoTime%3D0%2Cthis.nextVibratoTime%3D0%2Cthis.arpTime%3D0%2Cthis.envelopeTime%3D0%2Cthis.chorusDelayLineDirty)%7Bfor(let%20e%3D0%3Be%3Cthis.chorusDelayLineL.length%3Be%2B%2B)this.chorusDelayLineL%5Be%5D%3D0%3Bfor(let%20e%3D0%3Be%3Cthis.chorusDelayLineR.length%3Be%2B%2B)this.chorusDelayLineR%5Be%5D%3D0%7Dif(this.echoDelayLineDirty)%7Bfor(let%20e%3D0%3Be%3Cthis.echoDelayLineL.length%3Be%2B%2B)this.echoDelayLineL%5Be%5D%3D0%3Bfor(let%20e%3D0%3Be%3Cthis.echoDelayLineR.length%3Be%2B%2B)this.echoDelayLineR%5Be%5D%3D0%7Dif(this.reverbDelayLineDirty)for(let%20e%3D0%3Be%3Cthis.reverbDelayLine.length%3Be%2B%2B)this.reverbDelayLine%5Be%5D%3D0%3Bthis.chorusPhase%3D0%7Dcompute(e%2Ct%2Cs%2Ci%2Cn%2Ca%2Cr)%7Bthis.computed%3D!0%2Cthis.type%3Dt.type%2Cthis.synthesizer%3Dxe.getInstrumentSynthFunction(t)%2Cthis.unison%3Du.unisons%5Bt.unison%5D%2Cthis.chord%3Dt.getChord()%2Cthis.noisePitchFilterMult%3Du.chipNoises%5Bt.chipNoise%5D.pitchFilterMult%2Cthis.effects%3Dt.effects%2Cthis.aliases%3Dt.aliases%2Cthis.volumeScale%3D1%2Cthis.allocateNecessaryBuffers(e%2Ct%2Cs)%3Bconst%20o%3De.samplesPerSecond%3Bthis.updateWaves(t%2Co)%3Bconst%20l%3DI(this.effects)%2Ch%3Dq(this.effects)%2Cc%3DT(this.effects)%2Cp%3DD(this.effects)%2Cf%3DO(this.effects)%2Cm%3DR(this.effects)%3Bif(l)%7Blet%20s%3Dt.distortion%2Cn%3Dt.distortion%3Be.isModActive(u.modulators.dictionary.distortion.index%2Ca%2Cr)%26%26(s%3De.getModValue(u.modulators.dictionary.distortion.index%2Ca%2Cr%2C!1)%2Cn%3De.getModValue(u.modulators.dictionary.distortion.index%2Ca%2Cr%2C!0))%3Bconst%20o%3DMath.min(1%2Cs%2F(u.distortionRange-1))%2Cl%3DMath.min(1%2Cn%2F(u.distortionRange-1))%2Ch%3DMath.pow(1-.895*(Math.pow(20%2Co)-1)%2F19%2C2)%2Cc%3DMath.pow(1-.895*(Math.pow(20%2Cl)-1)%2F19%2C2)%2Cp%3D(1%2B2*o)%2Fu.distortionBaseVolume%2Cf%3D(1%2B2*l)%2Fu.distortionBaseVolume%3Bthis.distortion%3Dh%2Cthis.distortionDelta%3D(c-h)%2Fi%2Cthis.distortionDrive%3Dp%2Cthis.distortionDriveDelta%3D(f-p)%2Fi%7Dif(h)%7Blet%20s%3Dt.bitcrusherFreq%2Cn%3Dt.bitcrusherFreq%3Be.isModActive(u.modulators.dictionary%5B%22freq%20crush%22%5D.index%2Ca%2Cr)%26%26(s%3De.getModValue(u.modulators.dictionary%5B%22freq%20crush%22%5D.index%2Ca%2Cr%2C!1)%2Cn%3De.getModValue(u.modulators.dictionary%5B%22freq%20crush%22%5D.index%2Ca%2Cr%2C!0))%3Blet%20l%3Dt.bitcrusherQuantization%2Ch%3Dt.bitcrusherQuantization%3Be.isModActive(u.modulators.dictionary%5B%22bit%20crush%22%5D.index%2Ca%2Cr)%26%26(l%3De.getModValue(u.modulators.dictionary%5B%22bit%20crush%22%5D.index%2Ca%2Cr%2C!1)%2Ch%3De.getModValue(u.modulators.dictionary%5B%22bit%20crush%22%5D.index%2Ca%2Cr%2C!0))%3Bconst%20c%3Du.keys%5Be.song.key%5D.basePitch%2Bu.pitchesPerOctave*e.song.octave%2Cp%3Dde.frequencyFromPitch(c%2B60)*Math.pow(2%2C(u.bitcrusherFreqRange-1-s)*u.bitcrusherOctaveStep)%2Cf%3Dde.frequencyFromPitch(c%2B60)*Math.pow(2%2C(u.bitcrusherFreqRange-1-n)*u.bitcrusherOctaveStep)%2Cm%3DMath.min(1%2Cp%2Fo)%2Cd%3DMath.min(1%2Cf%2Fo)%3Bthis.bitcrusherPhaseDelta%3Dm%2Cthis.bitcrusherPhaseDeltaScale%3DMath.pow(d%2Fm%2C1%2Fi)%3Bconst%20y%3D2*u.bitcrusherBaseVolume*Math.pow(2%2C1-Math.pow(2%2C.5*(u.bitcrusherQuantizationRange-1-l)))%2Cv%3D2*u.bitcrusherBaseVolume*Math.pow(2%2C1-Math.pow(2%2C.5*(u.bitcrusherQuantizationRange-1-h)))%3Bthis.bitcrusherScale%3Dy%2Cthis.bitcrusherScaleScale%3DMath.pow(v%2Fy%2C1%2Fi)%3Bconst%20g%3D2*u.bitcrusherBaseVolume*Math.pow(1.5%2Cu.bitcrusherQuantizationRange-1-l)%2Cb%3D2*u.bitcrusherBaseVolume*Math.pow(1.5%2Cu.bitcrusherQuantizationRange-1-h)%3Bthis.bitcrusherFoldLevel%3Dg%2Cthis.bitcrusherFoldLevelScale%3DMath.pow(b%2Fg%2C1%2Fi)%7Dlet%20d%3D1%3Bif(t.eqFilterType)%7Bconst%20s%3Dt.eqFilter%3Bnull%3D%3Dt.eqSubFilters%5B1%5D%26%26(t.eqSubFilters%5B1%5D%3Dnew%20fe)%3Bconst%20n%3Dt.eqSubFilters%5B1%5D%3Blet%20l%2Ch%3Dt.eqFilterSimpleCut%2Cc%3Dt.eqFilterSimplePeak%2Cp%3Dt.eqFilterSimpleCut%2Cf%3Dt.eqFilterSimplePeak%2Cm%3D!1%3Bif(e.isModActive(u.modulators.dictionary%5B%22eq%20filt%20cut%22%5D.index%2Ca%2Cr)%26%26(h%3De.getModValue(u.modulators.dictionary%5B%22eq%20filt%20cut%22%5D.index%2Ca%2Cr%2C!1)%2Cp%3De.getModValue(u.modulators.dictionary%5B%22eq%20filt%20cut%22%5D.index%2Ca%2Cr%2C!0)%2Cm%3D!0)%2Ce.isModActive(u.modulators.dictionary%5B%22eq%20filt%20peak%22%5D.index%2Ca%2Cr)%26%26(c%3De.getModValue(u.modulators.dictionary%5B%22eq%20filt%20peak%22%5D.index%2Ca%2Cr%2C!1)%2Cf%3De.getModValue(u.modulators.dictionary%5B%22eq%20filt%20peak%22%5D.index%2Ca%2Cr%2C!0)%2Cm%3D!0)%2Cm)%7Bs.convertLegacySettingsForSynth(h%2Cc)%2Cn.convertLegacySettingsForSynth(p%2Cf)%2Cl%3Ds.controlPoints%5B0%5D%3Blet%20e%3Dn.controlPoints%5B0%5D%3Bl.toCoefficients(xe.tempFilterStartCoefficients%2Co%2C1%2C1)%2Ce.toCoefficients(xe.tempFilterEndCoefficients%2Co%2C1%2C1)%2Cthis.eqFilters.length%3C1%26%26(this.eqFilters%5B0%5D%3Dnew%20V)%2Cthis.eqFilters%5B0%5D.loadCoefficientsWithGradient(xe.tempFilterStartCoefficients%2Cxe.tempFilterEndCoefficients%2C1%2Fi%2C0%3D%3Dl.type)%7Delse%20s.convertLegacySettingsForSynth(h%2Cc%2C!0)%2Cl%3Ds.controlPoints%5B0%5D%2Cl.toCoefficients(xe.tempFilterStartCoefficients%2Co%2C1%2C1)%2Cthis.eqFilters.length%3C1%26%26(this.eqFilters%5B0%5D%3Dnew%20V)%2Cthis.eqFilters%5B0%5D.loadCoefficientsWithGradient(xe.tempFilterStartCoefficients%2Cxe.tempFilterStartCoefficients%2C1%2Fi%2C0%3D%3Dl.type)%3Bd*%3Dl.getVolumeCompensationMult()%2Cthis.eqFilterCount%3D1%2Cd%3DMath.min(3%2Cd)%7Delse%7Bconst%20e%3Dnull!%3Dt.tmpEqFilterStart%3Ft.tmpEqFilterStart%3At.eqFilter%3Bfor(let%20s%3D0%3Bs%3Ce.controlPointCount%3Bs%2B%2B)%7Blet%20n%3De.controlPoints%5Bs%5D%2Ca%3Dnull!%3Dt.tmpEqFilterEnd%26%26null!%3Dt.tmpEqFilterEnd.controlPoints%5Bs%5D%3Ft.tmpEqFilterEnd.controlPoints%5Bs%5D%3Ae.controlPoints%5Bs%5D%3Bn.type!%3Da.type%26%26(n%3Da)%2Cn.toCoefficients(xe.tempFilterStartCoefficients%2Co%2C1%2C1)%2Ca.toCoefficients(xe.tempFilterEndCoefficients%2Co%2C1%2C1)%2Cthis.eqFilters.length%3C%3Ds%26%26(this.eqFilters%5Bs%5D%3Dnew%20V)%2Cthis.eqFilters%5Bs%5D.loadCoefficientsWithGradient(xe.tempFilterStartCoefficients%2Cxe.tempFilterEndCoefficients%2C1%2Fi%2C0%3D%3Dn.type)%2Cd*%3Dn.getVolumeCompensationMult()%7Dthis.eqFilterCount%3De.controlPointCount%2Cd%3DMath.min(3%2Cd)%7Dconst%20y%3Dxe.instrumentVolumeToVolumeMult(t.volume)%3Bthis.mixVolume%3Dy%3Blet%20v%3Dy%3Bif(e.isModActive(u.modulators.dictionary%5B%22mix%20volume%22%5D.index%2Ca%2Cr))%7Bconst%20t%3De.getModValue(u.modulators.dictionary%5B%22mix%20volume%22%5D.index%2Ca%2Cr%2C!1)%2Cs%3De.getModValue(u.modulators.dictionary%5B%22mix%20volume%22%5D.index%2Ca%2Cr%2C!0)%3Bthis.mixVolume*%3Dt%3C%3D0%3F(t%2Bu.volumeRange%2F2)%2F(u.volumeRange%2F2)%3Axe.instrumentVolumeToVolumeMult(t)%2Cv*%3Ds%3C%3D0%3F(s%2Bu.volumeRange%2F2)%2F(u.volumeRange%2F2)%3Axe.instrumentVolumeToVolumeMult(s)%7De.isModActive(u.modulators.dictionary%5B%22song%20volume%22%5D.index)%26%26(this.mixVolume*%3De.getModValue(u.modulators.dictionary%5B%22song%20volume%22%5D.index%2Cvoid%200%2Cvoid%200%2C!1)%2F100%2Cv*%3De.getModValue(u.modulators.dictionary%5B%22song%20volume%22%5D.index%2Cvoid%200%2Cvoid%200%2C!0)%2F100)%2Cthis.mixVolumeDelta%3D(v-this.mixVolume)%2Fi%3Blet%20g%3Dd%2Cb%3Dd%2CS%3D1%2CM%3D1%3Bif(c)%7Blet%20s%3Dt.pan%2Cn%3Dt.pan%3Be.isModActive(u.modulators.dictionary.pan.index%2Ca%2Cr)%26%26(s%3De.getModValue(u.modulators.dictionary.pan.index%2Ca%2Cr%2C!1)%2Cn%3De.getModValue(u.modulators.dictionary.pan.index%2Ca%2Cr%2C!0))%3Blet%20l%3DMath.max(-1%2CMath.min(1%2C(s-u.panCenter)%2Fu.panCenter))%2Ch%3DMath.max(-1%2CMath.min(1%2C(n-u.panCenter)%2Fu.panCenter))%3Bconst%20c%3D1.414*Math.cos((1%2Bl)*Math.PI*.25)%2Cp%3D1.414*Math.cos((1-l)*Math.PI*.25)%2Cf%3D1.414*Math.cos((1%2Bh)*Math.PI*.25)%2Cm%3D1.414*Math.cos((1-h)*Math.PI*.25)%2Cd%3Do*u.panDelaySecondsMax%3Blet%20y%3Dt.panDelay%2Cv%3Dt.panDelay%3Be.isModActive(u.modulators.dictionary%5B%22pan%20delay%22%5D.index%2Ca%2Cr)%26%26(y%3De.getModValue(u.modulators.dictionary%5B%22pan%20delay%22%5D.index%2Ca%2Cr%2C!1)%2Cv%3De.getModValue(u.modulators.dictionary%5B%22pan%20delay%22%5D.index%2Ca%2Cr%2C!0))%3Bconst%20g%3Dl*y*d%2F10%2Cb%3Dh*v*d%2F10%2CS%3DMath.max(0%2Cg)%2CM%3DMath.max(0%2C-g)%2Cw%3DMath.max(0%2Cb)%2Cx%3DMath.max(0%2C-b)%3Bthis.panningVolumeL%3Dc%2Cthis.panningVolumeR%3Dp%2Cthis.panningVolumeDeltaL%3D(f-c)%2Fi%2Cthis.panningVolumeDeltaR%3D(m-p)%2Fi%2Cthis.panningOffsetL%3Dthis.panningDelayPos-S%2Be.panningDelayBufferSize%2Cthis.panningOffsetR%3Dthis.panningDelayPos-M%2Be.panningDelayBufferSize%2Cthis.panningOffsetDeltaL%3D(w-S)%2Fi%2Cthis.panningOffsetDeltaR%3D(x-M)%2Fi%7Dif(p)%7Blet%20s%3Dt.chorus%2Cn%3Dt.chorus%3Be.isModActive(u.modulators.dictionary.chorus.index%2Ca%2Cr)%26%26(s%3De.getModValue(u.modulators.dictionary.chorus.index%2Ca%2Cr%2C!1)%2Cn%3De.getModValue(u.modulators.dictionary.chorus.index%2Ca%2Cr%2C!0))%3Blet%20o%3DMath.min(1%2Cs%2F(u.chorusRange-1))%2Cl%3DMath.min(1%2Cn%2F(u.chorusRange-1))%3Bo%3D.6*o%2B.4*Math.pow(o%2C6)%2Cl%3D.6*l%2B.4*Math.pow(l%2C6)%3Bconst%20h%3D1%2FMath.sqrt(3*o*o%2B1)%2Cc%3D1%2FMath.sqrt(3*l*l%2B1)%3Bthis.chorusVoiceMult%3Do%2Cthis.chorusVoiceMultDelta%3D(l-o)%2Fi%2Cthis.chorusCombinedMult%3Dh%2Cthis.chorusCombinedMultDelta%3D(c-h)%2Fi%7Dlet%20w%3D0%2Cx%3D0%3Bif(f)%7Blet%20n%3Dt.echoSustain%2Cl%3Dt.echoSustain%3Be.isModActive(u.modulators.dictionary.echo.index%2Ca%2Cr)%26%26(n%3DMath.max(0%2Ce.getModValue(u.modulators.dictionary.echo.index%2Ca%2Cr%2C!1))%2Cl%3DMath.max(0%2Ce.getModValue(u.modulators.dictionary.echo.index%2Ca%2Cr%2C!0)))%3Bconst%20h%3D.9*Math.min(1%2CMath.pow(n%2Fu.echoSustainRange%2C1.1))%2Cc%3D.9*Math.min(1%2CMath.pow(l%2Fu.echoSustainRange%2C1.1))%3Bthis.echoMult%3Dh%2Cthis.echoMultDelta%3DMath.max(0%2C(c-h)%2Fi)%2Cw%3DMath.max(h%2Cc)%3Blet%20p%3Dt.echoDelay%2Cf%3Dt.echoDelay%2Cm%3D!1%3Be.isModActive(u.modulators.dictionary%5B%22echo%20delay%22%5D.index%2Ca%2Cr)%26%26(p%3De.getModValue(u.modulators.dictionary%5B%22echo%20delay%22%5D.index%2Ca%2Cr%2C!1)%2Cf%3De.getModValue(u.modulators.dictionary%5B%22echo%20delay%22%5D.index%2Ca%2Cr%2C!0)%2Cm%3D!0)%3Bconst%20d%3DMath.round((p%2B1)*u.echoDelayStepTicks*s)%2Cy%3DMath.round((f%2B1)*u.echoDelayStepTicks*s)%3Bnull%3D%3Dthis.echoDelayOffsetEnd%7C%7Cm%3Fthis.echoDelayOffsetStart%3Dd%3Athis.echoDelayOffsetStart%3Dthis.echoDelayOffsetEnd%2Cthis.echoDelayOffsetEnd%3Dy%2Cx%3D.5*(this.echoDelayOffsetStart%2Bthis.echoDelayOffsetEnd)%2Fo%2Cthis.echoDelayOffsetRatio%3D0%2Cthis.echoDelayOffsetRatioDelta%3D1%2Fi%3Bconst%20v%3D2*Math.PI*u.echoShelfHz%2Fe.samplesPerSecond%3Bxe.tempFilterStartCoefficients.highShelf1stOrder(v%2Cu.echoShelfGain)%2Cthis.echoShelfA1%3Dxe.tempFilterStartCoefficients.a%5B1%5D%2Cthis.echoShelfB0%3Dxe.tempFilterStartCoefficients.b%5B0%5D%2Cthis.echoShelfB1%3Dxe.tempFilterStartCoefficients.b%5B1%5D%7Dlet%20k%3D0%3Bif(m)%7Blet%20s%3Dt.reverb%2Cn%3Dt.reverb%3Be.isModActive(u.modulators.dictionary.reverb.index%2Ca%2Cr)%26%26(s%3De.getModValue(u.modulators.dictionary.reverb.index%2Ca%2Cr%2C!1)%2Cn%3De.getModValue(u.modulators.dictionary.reverb.index%2Ca%2Cr%2C!0))%2Ce.isModActive(u.modulators.dictionary%5B%22song%20reverb%22%5D.index%2Ca%2Cr)%26%26(s*%3D(e.getModValue(u.modulators.dictionary%5B%22song%20reverb%22%5D.index%2Cvoid%200%2Cvoid%200%2C!1)-u.modulators.dictionary%5B%22song%20reverb%22%5D.convertRealFactor)%2Fu.reverbRange%2Cn*%3D(e.getModValue(u.modulators.dictionary%5B%22song%20reverb%22%5D.index%2Cvoid%200%2Cvoid%200%2C!0)-u.modulators.dictionary%5B%22song%20reverb%22%5D.convertRealFactor)%2Fu.reverbRange)%3Bconst%20o%3D.425*Math.min(1%2CMath.pow(s%2Fu.reverbRange%2C.667))%2Cl%3D.425*Math.min(1%2CMath.pow(n%2Fu.reverbRange%2C.667))%3Bthis.reverbMult%3Do%2Cthis.reverbMultDelta%3D(l-o)%2Fi%2Ck%3DMath.max(o%2Cl)%3Bconst%20h%3D2*Math.PI*u.reverbShelfHz%2Fe.samplesPerSecond%3Bxe.tempFilterStartCoefficients.highShelf1stOrder(h%2Cu.reverbShelfGain)%2Cthis.reverbShelfA1%3Dxe.tempFilterStartCoefficients.a%5B1%5D%2Cthis.reverbShelfB0%3Dxe.tempFilterStartCoefficients.b%5B0%5D%2Cthis.reverbShelfB1%3Dxe.tempFilterStartCoefficients.b%5B1%5D%7Dif(this.tonesAddedInThisTick)this.attentuationProgress%3D0%2Cthis.flushedSamples%3D0%2Cthis.flushingDelayLines%3D!1%3Belse%20if(this.flushingDelayLines)%7Bg%3D0%2Cb%3D0%2CS%3D0%2CM%3D0%3Blet%20t%3D0%3Bp%26%26(t%2B%3De.chorusDelayBufferSize)%2Cf%26%26(t%2B%3Dthis.echoDelayLineL.length)%2Cm%26%26(t%2B%3Du.reverbDelayBufferSize)%2Cthis.flushedSamples%2B%3Di%2Cthis.flushedSamples%3E%3Dt%26%26(this.deactivateAfterThisTick%3D!0)%7Delse%7B0%3D%3Dthis.attentuationProgress%7C%7C(g%3D0)%2Cb%3D0%3Bconst%20e%3D1%2F256%2Ct%3D-Math.log2(e)%3Blet%20i%3D0%3Bif(p%26%26(i%2B%3Du.chorusMaxDelay)%2Cf)%7Bconst%20e%3DMath.pow(w%2C1%2Fx)%3Bi%2B%3D-1%2FMath.log2(e)*t%7Dif(m)%7Bconst%20e%3D2*k%2Cs%3Du.reverbDelayBufferSize%2F4%2Fo%2Cn%3DMath.pow(e%2C1%2Fs)%3Bi%2B%3D-1%2FMath.log2(n)*t%7Dconst%20n%3Ds%2Fo%2Fi%2Ca%3Dthis.attentuationProgress%2Bn%3Ba%3E%3D1%26%26(M%3D0)%2Cthis.attentuationProgress%3Da%2Cthis.attentuationProgress%3E%3D1%26%26(this.flushingDelayLines%3D!0)%7Dthis.eqFilterVolume%3Dg%2Cthis.eqFilterVolumeDelta%3D(b-g)%2Fi%2Cthis.delayInputMult%3DS%2Cthis.delayInputMultDelta%3D(M-S)%2Fi%7DupdateWaves(e%2Ct)%7Bif(this.volumeScale%3D1%2C0%3D%3De.type)this.wave%3Dthis.aliases%3Fu.rawChipWaves%5Be.chipWave%5D.samples%3Au.chipWaves%5Be.chipWave%5D.samples%2Cthis.isUsingAdvancedLoopControls%3De.isUsingAdvancedLoopControls%2Cthis.chipWaveLoopStart%3De.chipWaveLoopStart%2Cthis.chipWaveLoopEnd%3De.chipWaveLoopEnd%2Cthis.chipWaveLoopMode%3De.chipWaveLoopMode%2Cthis.chipWavePlayBackwards%3De.chipWavePlayBackwards%2Cthis.chipWaveStartOffset%3De.chipWaveStartOffset%2Cthis.unisonVoices%3De.unisonVoices%2Cthis.unisonSpread%3De.unisonSpread%2Cthis.unisonOffset%3De.unisonOffset%2Cthis.unisonExpression%3De.unisonExpression%2Cthis.unisonSign%3De.unisonSign%3Belse%20if(6%3D%3De.type)this.unisonVoices%3De.unisonVoices%2Cthis.unisonSpread%3De.unisonSpread%2Cthis.unisonOffset%3De.unisonOffset%2Cthis.unisonExpression%3De.unisonExpression%2Cthis.unisonSign%3De.unisonSign%3Belse%20if(9%3D%3De.type)this.wave%3Dthis.aliases%3Fe.customChipWave%3Ae.customChipWaveIntegral%2Cthis.volumeScale%3D.05%2Cthis.unisonVoices%3De.unisonVoices%2Cthis.unisonSpread%3De.unisonSpread%2Cthis.unisonOffset%3De.unisonOffset%2Cthis.unisonExpression%3De.unisonExpression%2Cthis.unisonSign%3De.unisonSign%3Belse%20if(2%3D%3De.type)this.wave%3Dd(e.chipNoise%2CH%2CA)%2Cthis.unisonVoices%3De.unisonVoices%2Cthis.unisonSpread%3De.unisonSpread%2Cthis.unisonOffset%3De.unisonOffset%2Cthis.unisonExpression%3De.unisonExpression%2Cthis.unisonSign%3De.unisonSign%3Belse%20if(5%3D%3De.type)this.wave%3Dthis.harmonicsWave.getCustomWave(e.harmonicsWave%2Ce.type)%2Cthis.unisonVoices%3De.unisonVoices%2Cthis.unisonSpread%3De.unisonSpread%2Cthis.unisonOffset%3De.unisonOffset%2Cthis.unisonExpression%3De.unisonExpression%2Cthis.unisonSign%3De.unisonSign%3Belse%20if(7%3D%3De.type)this.wave%3Dthis.harmonicsWave.getCustomWave(e.harmonicsWave%2Ce.type)%2Cthis.unisonVoices%3De.unisonVoices%2Cthis.unisonSpread%3De.unisonSpread%2Cthis.unisonOffset%3De.unisonOffset%2Cthis.unisonExpression%3De.unisonExpression%2Cthis.unisonSign%3De.unisonSign%3Belse%20if(3%3D%3De.type)this.wave%3Dthis.spectrumWave.getCustomWave(e.spectrumWave%2C8)%2Cthis.unisonVoices%3De.unisonVoices%2Cthis.unisonSpread%3De.unisonSpread%2Cthis.unisonOffset%3De.unisonOffset%2Cthis.unisonExpression%3De.unisonExpression%2Cthis.unisonSign%3De.unisonSign%3Belse%20if(4%3D%3De.type)%7Bfor(let%20t%3D0%3Bt%3Cu.drumCount%3Bt%2B%2B)this.drumsetSpectrumWaves%5Bt%5D.getCustomWave(e.drumsetSpectrumWaves%5Bt%5D%2CMe.X(t))%3Bthis.wave%3Dnull%7Delse%20this.wave%3Dnull%7DgetDrumsetWave(e)%7Bif(4%3D%3Dthis.type)return%20this.drumsetSpectrumWaves%5Be%5D.wave%3Bthrow%20new%20Error(%22Unhandled%20instrument%20type%20in%20getDrumsetWave%22)%7Dstatic%20drumsetIndexReferenceDelta(e)%7Breturn%20de.frequencyFromPitch(u.spectrumBasePitch%2B6*e)%2F44100%7Dstatic%20X(e)%7Breturn%2015%2BMath.log2(Me.drumsetIndexReferenceDelta(e))%7D%7Dclass%20we%7Bconstructor()%7Bthis.instruments%3D%5B%5D%2Cthis.muted%3D!1%2Cthis.singleSeamlessInstrument%3Dnull%7D%7Dclass%20xe%7BsyncSongState()%7Bconst%20e%3Dthis.song.getChannelCount()%3Bfor(let%20t%3Dthis.channels.length%3Bt%3Ce%3Bt%2B%2B)this.channels%5Bt%5D%3Dnew%20we%3Bthis.channels.length%3De%3Bfor(let%20t%3D0%3Bt%3Ce%3Bt%2B%2B)%7Bconst%20e%3Dthis.song.channels%5Bt%5D%2Cs%3Dthis.channels%5Bt%5D%3Bfor(let%20t%3Ds.instruments.length%3Bt%3Ce.instruments.length%3Bt%2B%2B)s.instruments%5Bt%5D%3Dnew%20Me%3Bif(s.instruments.length%3De.instruments.length%2Cs.muted!%3De.muted%26%26(s.muted%3De.muted%2Cs.muted))for(const%20e%20of%20s.instruments)e.resetAllEffects()%7D%7DinitModFilters(e)%7Bif(null!%3De)for(let%20t%3D0%3Bt%3Ce.getChannelCount()%3Bt%2B%2B)for(let%20s%3D0%3Bs%3Ce.channels%5Bt%5D.instruments.length%3Bs%2B%2B)%7Bconst%20i%3De.channels%5Bt%5D.instruments%5Bs%5D%3Bi.tmpEqFilterStart%3Di.eqFilter%2Ci.tmpEqFilterEnd%3Dnull%2Ci.tmpNoteFilterStart%3Di.noteFilter%2Ci.tmpNoteFilterEnd%3Dnull%7D%7DwarmUpSynthesizer(e)%7Bif(null!%3De)%7Bthis.syncSongState()%3Bconst%20t%3Dthis.getSamplesPerTick()%3Bfor(let%20s%3D0%3Bs%3Ce.getChannelCount()%3Bs%2B%2B)for(let%20i%3D0%3Bi%3Ce.channels%5Bs%5D.instruments.length%3Bi%2B%2B)%7Bconst%20n%3De.channels%5Bs%5D.instruments%5Bi%5D%2Ca%3Dthis.channels%5Bs%5D.instruments%5Bi%5D%3Bxe.getInstrumentSynthFunction(n)%2Ca.vibratoTime%3D0%2Ca.nextVibratoTime%3D0%2Ca.envelopeTime%3D0%2Ca.arpTime%3D0%2Ca.updateWaves(n%2Cthis.samplesPerSecond)%2Ca.allocateNecessaryBuffers(this%2Cn%2Ct)%7D%7Dvar%20t%3Dnew%20Float32Array(1)%3Bthis.isPlayingSong%3D!0%2Cthis.synthesize(t%2Ct%2C1%2C!0)%2Cthis.isPlayingSong%3D!1%7DcomputeLatestModValues()%7Bif(null!%3Dthis.song%26%26this.song.modChannelCount%3E0)%7Blet%20e%3D%5B%5D%2Ct%3D%5B%5D%3Bthis.modValues%3D%5B%5D%2Cthis.nextModValues%3D%5B%5D%2Cthis.modInsValues%3D%5B%5D%2Cthis.nextModInsValues%3D%5B%5D%2Cthis.heldMods%3D%5B%5D%3Bfor(let%20e%3D0%3Be%3Cthis.song.pitchChannelCount%2Bthis.song.noiseChannelCount%3Be%2B%2B)%7Bt%5Be%5D%3D%5B%5D%2Cthis.modInsValues%5Be%5D%3D%5B%5D%2Cthis.nextModInsValues%5Be%5D%3D%5B%5D%3Bfor(let%20s%3D0%3Bs%3Cthis.song.channels%5Be%5D.instruments.length%3Bs%2B%2B)this.modInsValues%5Be%5D%5Bs%5D%3D%5B%5D%2Cthis.nextModInsValues%5Be%5D%5Bs%5D%3D%5B%5D%2Ct%5Be%5D%5Bs%5D%3D%5B%5D%7Dlet%20s%3Dthis.beat*u.partsPerBeat%2Bthis.part%3Bfor(let%20i%3Dthis.song.pitchChannelCount%2Bthis.song.noiseChannelCount%3Bi%3Cthis.song.getChannelCount()%3Bi%2B%2B)if(!this.song.channels%5Bi%5D.muted)%7Blet%20n%3Bfor(let%20a%3Dthis.bar%3Ba%3E%3D0%3Ba--)if(n%3Dthis.song.getPattern(i%2Ca)%2Cnull!%3Dn)%7Blet%20r%3Dn.instruments%5B0%5D%2Co%3Dthis.song.channels%5Bi%5D.instruments%5Br%5D%2Cl%3D%5B%5D%2Ch%3D%5B%5D%2Cc%3Da%3D%3Dthis.bar%3Fs%3Athis.findPartsInBar(a)%3Bfor(const%20e%20of%20n.notes)if(e.start%3C%3Dc%26%26(null%3D%3Dl%5Bu.modCount-1-e.pitches%5B0%5D%5D%7C%7Ce.end%3El%5Bu.modCount-1-e.pitches%5B0%5D%5D))if(e.start%3D%3Dc%26%26(l%5Bu.modCount-1-e.pitches%5B0%5D%5D%3De.start%2Ch%5Bu.modCount-1-e.pitches%5B0%5D%5D%3De.pins%5B0%5D.size)%2Ce.end%3C%3Dc)l%5Bu.modCount-1-e.pitches%5B0%5D%5D%3De.end%2Ch%5Bu.modCount-1-e.pitches%5B0%5D%5D%3De.pins%5Be.pins.length-1%5D.size%3Belse%7Bl%5Bu.modCount-1-e.pitches%5B0%5D%5D%3Dc%3Bfor(let%20t%3D0%3Bt%3Ce.pins.length%3Bt%2B%2B)if(e.pins%5Bt%5D.time%2Be.start%3Ec)%7Bconst%20s%3De.pins%5Bt%5D.time-e.pins%5Bt-1%5D.time%2Ci%3Dc-e.start-e.pins%5Bt-1%5D.time%2Cn%3De.pins%5Bt%5D.size-e.pins%5Bt-1%5D.size%3Bh%5Bu.modCount-1-e.pitches%5B0%5D%5D%3DMath.round(e.pins%5Bt-1%5D.size%2Bn*i%2Fs)%2Ct%3De.pins.length%7D%7Dfor(let%20s%3D0%3Bs%3Cu.modCount%3Bs%2B%2B)if(null!%3Dl%5Bs%5D)if(u.modulators%5Bo.modulators%5Bs%5D%5D.forSong)(null%3D%3De%5Bo.modulators%5Bs%5D%5D%7C%7Ca*u.partsPerBeat*this.song.beatsPerBar%2Bl%5Bs%5D%3Ee%5Bo.modulators%5Bs%5D%5D)%26%26(this.setModValue(h%5Bs%5D%2Ch%5Bs%5D%2Co.modChannels%5Bs%5D%2Co.modInstruments%5Bs%5D%2Co.modulators%5Bs%5D)%2Ce%5Bo.modulators%5Bs%5D%5D%3Da*u.partsPerBeat*this.song.beatsPerBar%2Bl%5Bs%5D)%3Belse%7Blet%20e%3D%5B%5D%3Bif(o.modInstruments%5Bs%5D%3D%3Dthis.song.channels%5Bo.modChannels%5Bs%5D%5D.instruments.length)for(let%20t%3D0%3Bt%3Cthis.song.channels%5Bo.modChannels%5Bs%5D%5D.instruments.length%3Bt%2B%2B)e.push(t)%3Belse%20if(o.modInstruments%5Bs%5D%3Ethis.song.channels%5Bo.modChannels%5Bs%5D%5D.instruments.length)%7Bconst%20t%3Dthis.song.getPattern(o.modChannels%5Bs%5D%2Ca)%3Bnull!%3Dt%26%26(e%3Dt.instruments)%7Delse%20e.push(o.modInstruments%5Bs%5D)%3Bfor(let%20i%3D0%3Bi%3Ce.length%3Bi%2B%2B)%7Bconst%20n%3Do.modulators%5Bs%5D%3D%3Du.modulators.dictionary%5B%22eq%20filter%22%5D.index%2Cr%3Do.modulators%5Bs%5D%3D%3Du.modulators.dictionary%5B%22note%20filter%22%5D.index%3Blet%20c%3Do.modulators%5Bs%5D%3Bif(n%3Fc%3Du.modulators.length%2B(0%7Co.modFilterTypes%5Bs%5D)%3Ar%26%26(c%3Du.modulators.length%2B1%2B2*u.filterMaxPoints%2B(0%7Co.modFilterTypes%5Bs%5D))%2Cnull%3D%3Dt%5Bo.modChannels%5Bs%5D%5D%5Be%5Bi%5D%5D%5Bc%5D%7C%7Ca*u.partsPerBeat*this.song.beatsPerBar%2Bl%5Bs%5D%3Et%5Bo.modChannels%5Bs%5D%5D%5Be%5Bi%5D%5D%5Bc%5D)%7Bif(n)%7Blet%20t%3Dthis.song.channels%5Bo.modChannels%5Bs%5D%5D.instruments%5Be%5Bi%5D%5D%3Bif(0%3D%3Do.modFilterTypes%5Bs%5D)t.tmpEqFilterStart%3Dt.eqSubFilters%5Bh%5Bs%5D%5D%3Belse%7Bfor(let%20e%3D0%3Be%3Cu.filterMorphCount%3Be%2B%2B)null!%3Dt.tmpEqFilterStart%26%26t.tmpEqFilterStart%3D%3Dt.eqSubFilters%5Be%5D%26%26(t.tmpEqFilterStart%3Dnew%20fe%2Ct.tmpEqFilterStart.fromJsonObject(t.eqSubFilters%5Be%5D.toJsonObject())%2Ce%3Du.filterMorphCount)%3Bnull!%3Dt.tmpEqFilterStart%26%26Math.floor((o.modFilterTypes%5Bs%5D-1)%2F2)%3Ct.tmpEqFilterStart.controlPointCount%26%26(o.modFilterTypes%5Bs%5D%252%3Ft.tmpEqFilterStart.controlPoints%5BMath.floor((o.modFilterTypes%5Bs%5D-1)%2F2)%5D.freq%3Dh%5Bs%5D%3At.tmpEqFilterStart.controlPoints%5BMath.floor((o.modFilterTypes%5Bs%5D-1)%2F2)%5D.gain%3Dh%5Bs%5D)%7Dt.tmpEqFilterEnd%3Dt.tmpEqFilterStart%7Delse%20if(r)%7Blet%20t%3Dthis.song.channels%5Bo.modChannels%5Bs%5D%5D.instruments%5Be%5Bi%5D%5D%3Bif(0%3D%3Do.modFilterTypes%5Bs%5D)t.tmpNoteFilterStart%3Dt.noteSubFilters%5Bh%5Bs%5D%5D%3Belse%7Bfor(let%20e%3D0%3Be%3Cu.filterMorphCount%3Be%2B%2B)null!%3Dt.tmpNoteFilterStart%26%26t.tmpNoteFilterStart%3D%3Dt.noteSubFilters%5Be%5D%26%26(t.tmpNoteFilterStart%3Dnew%20fe%2Ct.tmpNoteFilterStart.fromJsonObject(t.noteSubFilters%5Be%5D.toJsonObject())%2Ce%3Du.filterMorphCount)%3Bnull!%3Dt.tmpNoteFilterStart%26%26Math.floor((o.modFilterTypes%5Bs%5D-1)%2F2)%3Ct.tmpNoteFilterStart.controlPointCount%26%26(o.modFilterTypes%5Bs%5D%252%3Ft.tmpNoteFilterStart.controlPoints%5BMath.floor((o.modFilterTypes%5Bs%5D-1)%2F2)%5D.freq%3Dh%5Bs%5D%3At.tmpNoteFilterStart.controlPoints%5BMath.floor((o.modFilterTypes%5Bs%5D-1)%2F2)%5D.gain%3Dh%5Bs%5D)%7Dt.tmpNoteFilterEnd%3Dt.tmpNoteFilterStart%7Delse%20this.setModValue(h%5Bs%5D%2Ch%5Bs%5D%2Co.modChannels%5Bs%5D%2Ce%5Bi%5D%2Cc)%3Bt%5Bo.modChannels%5Bs%5D%5D%5Be%5Bi%5D%5D%5Bc%5D%3Da*u.partsPerBeat*this.song.beatsPerBar%2Bl%5Bs%5D%7D%7D%7D%7D%7D%7D%7DdetermineInvalidModulators(e)%7Bif(null!%3Dthis.song)for(let%20t%3D0%3Bt%3Cu.modCount%3Bt%2B%2B)%7Bif(e.invalidModulators%5Bt%5D%3D!0%2C-1%3D%3De.modChannels%5Bt%5D)%7B0!%3De.modulators%5Bt%5D%26%26(e.invalidModulators%5Bt%5D%3D!1)%3Bcontinue%7Dconst%20s%3Dthis.song.channels%5Be.modChannels%5Bt%5D%5D%3Bif(null%3D%3Ds)continue%3Blet%20i%3D%5B%5D%3Bi%3De.modInstruments%5Bt%5D%3E%3Ds.instruments.length%3Fs.instruments%3A%5Bs.instruments%5Be.modInstruments%5Bt%5D%5D%5D%3Bfor(let%20s%3D0%3Bs%3Ci.length%3Bs%2B%2B)%7Bconst%20n%3Di%5Bs%5D%3Bif(null%3D%3Dn)continue%3Bconst%20a%3Du.modulators%5Be.modulators%5Bt%5D%5D.name%3B12!%3Du.modulators%5Be.modulators%5Bt%5D%5D.associatedEffect%26%26!(n.effects%261%3C%3Cu.modulators%5Be.modulators%5Bt%5D%5D.associatedEffect)%7C%7C1!%3Dn.type%26%2611!%3Dn.type%26%26(%22fm%20slider%201%22%3D%3Da%7C%7C%22fm%20slider%202%22%3D%3Da%7C%7C%22fm%20slider%203%22%3D%3Da%7C%7C%22fm%20slider%204%22%3D%3Da%7C%7C%22fm%20feedback%22%3D%3Da)%7C%7C11!%3Dn.type%26%26(%22fm%20slider%205%22%3D%3Da%7C%7C%22fm%20slider%206%22%3D%3Da)%7C%7C6!%3Dn.type%26%268!%3Dn.type%26%26(%22pulse%20width%22%3D%3Da%7C%7C%22decimal%20offset%22%3D%3Da)%7C%7C8!%3Dn.type%26%26(%22dynamism%22%3D%3Da%7C%7C%22spread%22%3D%3Da%7C%7C%22saw%20shape%22%3D%3Da)%7C%7C!n.getChord().arpeggiates%26%26(%22arp%20speed%22%3D%3Da%7C%7C%22reset%20arp%22%3D%3Da)%7C%7Cn.eqFilterType%26%26%22eq%20filter%22%3D%3Da%7C%7C!n.eqFilterType%26%26(%22eq%20filt%20cut%22%3D%3Da%7C%7C%22eq%20filt%20peak%22%3D%3Da)%7C%7C%22eq%20filter%22%3D%3Da%26%26Math.floor((e.modFilterTypes%5Bt%5D%2B1)%2F2)%3En.getLargestControlPointCount(!1)%7C%7Cn.noteFilterType%26%26%22note%20filter%22%3D%3Da%7C%7C!n.noteFilterType%26%26(%22note%20filt%20cut%22%3D%3Da%7C%7C%22note%20filt%20peak%22%3D%3Da)%7C%7C%22note%20filter%22%3D%3Da%26%26Math.floor((e.modFilterTypes%5Bt%5D%2B1)%2F2)%3En.getLargestControlPointCount(!0)%7C%7C(e.invalidModulators%5Bt%5D%3D!1%2Cs%3Di.length)%7D%7D%7Dstatic%20operatorAmplitudeCurve(e)%7Breturn(Math.pow(16%2Ce%2F15)-1)%2F15%7Dget%20playing()%7Breturn%20this.isPlayingSong%7Dget%20recording()%7Breturn%20this.isRecording%7Dget%20playhead()%7Breturn%20this.playheadInternal%7Dset%20playhead(e)%7Bif(null!%3Dthis.song)%7Bthis.playheadInternal%3DMath.max(0%2CMath.min(this.song.barCount%2Ce))%3Blet%20t%3Dthis.playheadInternal%3Bthis.bar%3DMath.floor(t)%2Ct%3Dthis.song.beatsPerBar*(t-this.bar)%2Cthis.beat%3DMath.floor(t)%2Ct%3Du.partsPerBeat*(t-this.beat)%2Cthis.part%3DMath.floor(t)%2Ct%3Du.ticksPerPart*(t-this.part)%2Cthis.tick%3DMath.floor(t)%2Cthis.tickSampleCountdown%3D0%2Cthis.isAtStartOfTick%3D!0%2Cthis.prevBar%3Dnull%7D%7DgetSamplesPerBar()%7Bif(null%3D%3Dthis.song)throw%20new%20Error%3Breturn%20this.getSamplesPerTick()*u.ticksPerPart*u.partsPerBeat*this.song.beatsPerBar%7DgetTicksIntoBar()%7Breturn(this.beat*u.partsPerBeat%2Bthis.part)*u.ticksPerPart%2Bthis.tick%7DgetCurrentPart()%7Breturn%20this.beat*u.partsPerBeat%2Bthis.part%7DfindPartsInBar(e)%7Bif(null%3D%3Dthis.song)return%200%3Blet%20t%3Du.partsPerBeat*this.song.beatsPerBar%3Bfor(let%20s%3Dthis.song.pitchChannelCount%2Bthis.song.noiseChannelCount%3Bs%3Cthis.song.getChannelCount()%3Bs%2B%2B)%7Blet%20i%3Dthis.song.getPattern(s%2Ce)%3Bif(null!%3Di)%7Blet%20e%3Dthis.song.channels%5Bs%5D.instruments%5Bi.instruments%5B0%5D%5D%3Bfor(let%20s%3D0%3Bs%3Cu.modCount%3Bs%2B%2B)if(e.modulators%5Bs%5D%3D%3Du.modulators.dictionary%5B%22next%20bar%22%5D.index)for(const%20e%20of%20i.notes)e.pitches%5B0%5D%3D%3Du.modCount-1-s%26%26t%3Ee.start%26%26(t%3De.start)%7D%7Dreturn%20t%7DgetTotalSamples(e%2Ct%2Cs)%7Bif(null%3D%3Dthis.song)return-1%3Blet%20i%3De%3F0%3Athis.song.loopStart%2Cn%3Dt%3Fthis.song.barCount%3Athis.song.loopStart%2Bthis.song.loopLength%2Ca%3D!1%2Cr%3D!1%2Co%3Dthis.song.tempo%3Bfor(let%20e%3Dthis.song.getChannelCount()-1%3Be%3E%3Dthis.song.pitchChannelCount%2Bthis.song.noiseChannelCount%3Be--)for(let%20t%3Di%3Bt%3Cn%3Bt%2B%2B)%7Blet%20s%3Dthis.song.getPattern(e%2Ct)%3Bif(null!%3Ds)%7Blet%20t%3Dthis.song.channels%5Be%5D.instruments%5Bs.instruments%5B0%5D%5D%3Bfor(let%20e%3D0%3Be%3Cu.modCount%3Be%2B%2B)t.modulators%5Be%5D%3D%3Du.modulators.dictionary.tempo.index%26%26(a%3D!0)%2Ct.modulators%5Be%5D%3D%3Du.modulators.dictionary%5B%22next%20bar%22%5D.index%26%26(r%3D!0)%7D%7Dif(i%3E0)%7Blet%20e%3Dnull%2Ct%3D0%3Bfor(let%20s%3Di-1%3Bs%3E%3D0%3Bs--)%7Bfor(let%20i%3Dthis.song.getChannelCount()-1%3Bi%3E%3Dthis.song.pitchChannelCount%2Bthis.song.noiseChannelCount%3Bi--)%7Blet%20n%3Dthis.song.getPattern(i%2Cs)%3Bif(null!%3Dn)%7Blet%20a%3Dn.instruments%5B0%5D%2Cr%3Dthis.song.channels%5Bi%5D.instruments%5Ba%5D%2Co%3Dthis.findPartsInBar(s)%3Bfor(const%20s%20of%20n.notes)if(r.modulators%5Bu.modCount-1-s.pitches%5B0%5D%5D%3D%3Du.modulators.dictionary.tempo.index%26%26s.start%3Co%26%26(null%3D%3De%7C%7Cs.end%3Ee))if(s.end%3C%3Do)e%3Ds.end%2Ct%3Ds.pins%5Bs.pins.length-1%5D.size%3Belse%7Be%3Do%3Bfor(let%20e%3D0%3Be%3Cs.pins.length%3Be%2B%2B)if(s.pins%5Be%5D.time%2Bs.start%3Eo)%7Bconst%20i%3Ds.pins%5Be%5D.time-s.pins%5Be-1%5D.time%2Cn%3Do-s.start-s.pins%5Be-1%5D.time%2Ca%3Ds.pins%5Be%5D.size-s.pins%5Be-1%5D.size%3Bt%3DMath.round(s.pins%5Be-1%5D.size%2Ba*n%2Fi)%2Ce%3Ds.pins.length%7D%7D%7D%7Dnull!%3De%26%26(o%3Dt%2Bu.modulators.dictionary.tempo.convertRealFactor%2Cs%3D-1)%7D%7Dif(a%7C%7Cr)%7Blet%20e%3Di%2Ct%3D!1%2Cl%3D0%3Bfor(%3B!t%3B)%7Blet%20i%3Du.partsPerBeat*this.song.beatsPerBar%2Ch%3D0%3Bif(r%26%26(i%3Dthis.findPartsInBar(e))%2Ca)%7Blet%20t%3D!1%3Bfor(let%20s%3Dthis.song.getChannelCount()-1%3Bs%3E%3Dthis.song.pitchChannelCount%2Bthis.song.noiseChannelCount%3Bs--)if(0%3D%3Dt)%7Blet%20n%3Dthis.song.getPattern(s%2Ce)%3Bif(null!%3Dn)%7Blet%20e%3Dthis.song.channels%5Bs%5D.instruments%5Bn.instruments%5B0%5D%5D%3Bfor(let%20s%3D0%3Bs%3Cu.modCount%3Bs%2B%2B)if(0%3D%3Dt%26%26e.modulators%5Bs%5D%3D%3Du.modulators.dictionary.tempo.index%26%26n.notes.find((e%3D%3Ee.pitches%5B0%5D%3D%3Du.modCount-1-s)))%7Bt%3D!0%2Cn.notes.sort((function(e%2Ct)%7Breturn%20e.start%3D%3Dt.start%3Fe.pitches%5B0%5D-t.pitches%5B0%5D%3Ae.start-t.start%7D))%3Bfor(const%20e%20of%20n.notes)if(e.pitches%5B0%5D%3D%3Du.modCount-1-s%26%26(l%2B%3DMath.min(i-h%2Ce.start-h)*u.ticksPerPart*this.getSamplesPerTickSpecificBPM(o)%2Ce.start%3Ci))for(let%20t%3D1%3Bt%3Ce.pins.length%3Bt%2B%2B)%7Bif(e.pins%5Bt-1%5D.time%2Be.start%3C%3Di)%7Bconst%20s%3Du.ticksPerPart*Math.min(i-(e.start%2Be.pins%5Bt-1%5D.time)%2Ce.pins%5Bt%5D.time-e.pins%5Bt-1%5D.time)%2Cn%3De.pins%5Bt-1%5D.size%2Bu.modulators.dictionary.tempo.convertRealFactor%3Blet%20a%3De.pins%5Bt%5D.size%2Bu.modulators.dictionary.tempo.convertRealFactor%3Be.pins%5Bt%5D.time%2Be.start%3Ei%26%26(a%3De.pins%5Bt-1%5D.size%2B(e.pins%5Bt%5D.size-e.pins%5Bt-1%5D.size)*(i-(e.start%2Be.pins%5Bt-1%5D.time))%2F(e.pins%5Bt%5D.time-e.pins%5Bt-1%5D.time)%2Bu.modulators.dictionary.tempo.convertRealFactor)%3Blet%20r%3Du.partsPerBeat*u.ticksPerPart%2F60%3Bl%2B%3Da!%3Dn%3F-this.samplesPerSecond*s*(Math.log(r*a*s)-Math.log(r*n*s))%2F(r*(n-a))%3As*this.getSamplesPerTickSpecificBPM(a)%2Co%3Da%7Dh%3DMath.min(e.start%2Be.pins%5Bt%5D.time%2Ci)%7D%7D%7D%7D%7Dl%2B%3D(i-h)*u.ticksPerPart*this.getSamplesPerTickSpecificBPM(o)%2Ce%2B%2B%2C0!%3Ds%26%26e%3D%3Dthis.song.loopStart%2Bthis.song.loopLength%26%26(e%3Dthis.song.loopStart%2Cs%3E0%26%26s--)%2Ce%3E%3Dn%26%26(t%3D!0)%7Dreturn%20Math.ceil(l)%7Dreturn%20this.getSamplesPerBar()*this.getTotalBars(e%2Ct%2Cs)%7DgetTotalBars(e%2Ct%2Cs%3Dthis.loopRepeatCount)%7Bif(null%3D%3Dthis.song)throw%20new%20Error%3Blet%20i%3Dthis.song.loopLength*(s%2B1)%3Breturn%20e%26%26(i%2B%3Dthis.song.loopStart)%2Ct%26%26(i%2B%3Dthis.song.barCount-(this.song.loopStart%2Bthis.song.loopLength))%2Ci%7Dconstructor(e%3Dnull)%7Bthis.samplesPerSecond%3D44100%2Cthis.song%3Dnull%2Cthis.preferLowerLatency%3D!1%2Cthis.anticipatePoorPerformance%3D!1%2Cthis.liveInputDuration%3D0%2Cthis.liveBassInputDuration%3D0%2Cthis.liveInputStarted%3D!1%2Cthis.liveBassInputStarted%3D!1%2Cthis.liveInputPitches%3D%5B%5D%2Cthis.liveBassInputPitches%3D%5B%5D%2Cthis.liveInputChannel%3D0%2Cthis.liveBassInputChannel%3D0%2Cthis.liveInputInstruments%3D%5B%5D%2Cthis.liveBassInputInstruments%3D%5B%5D%2Cthis.loopRepeatCount%3D-1%2Cthis.volume%3D1%2Cthis.oscRefreshEventTimer%3D0%2Cthis.oscEnabled%3D!0%2Cthis.enableMetronome%3D!1%2Cthis.countInMetronome%3D!1%2Cthis.renderingSong%3D!1%2Cthis.heldMods%3D%5B%5D%2Cthis.wantToSkip%3D!1%2Cthis.playheadInternal%3D0%2Cthis.bar%3D0%2Cthis.prevBar%3Dnull%2Cthis.nextBar%3Dnull%2Cthis.beat%3D0%2Cthis.part%3D0%2Cthis.tick%3D0%2Cthis.isAtStartOfTick%3D!0%2Cthis.isAtEndOfTick%3D!0%2Cthis.tickSampleCountdown%3D0%2Cthis.modValues%3D%5B%5D%2Cthis.modInsValues%3D%5B%5D%2Cthis.nextModValues%3D%5B%5D%2Cthis.nextModInsValues%3D%5B%5D%2Cthis.isPlayingSong%3D!1%2Cthis.isRecording%3D!1%2Cthis.liveInputEndTime%3D0%2Cthis.browserAutomaticallyClearsAudioBuffer%3D!0%2Cthis.tempDrumSetControlPoint%3Dnew%20pe%2Cthis.tempFrequencyResponse%3Dnew%20G%2Cthis.loopBarStart%3D-1%2Cthis.loopBarEnd%3D-1%2Cthis.channels%3D%5B%5D%2Cthis.tonePool%3Dnew%20E%2Cthis.tempMatchedPitchTones%3DArray(u.maxChordSize).fill(null)%2Cthis.startedMetronome%3D!1%2Cthis.metronomeSamplesRemaining%3D-1%2Cthis.metronomeAmplitude%3D0%2Cthis.metronomePrevAmplitude%3D0%2Cthis.metronomeFilter%3D0%2Cthis.limit%3D0%2Cthis.tempMonoInstrumentSampleBuffer%3Dnull%2Cthis.audioCtx%3Dnull%2Cthis.scriptNode%3Dnull%2Cthis.audioProcessCallback%3De%3D%3E%7Bconst%20t%3De.outputBuffer%2Cs%3Dt.getChannelData(0)%2Ci%3Dt.getChannelData(1)%3Bif(!this.browserAutomaticallyClearsAudioBuffer%7C%7C0%3D%3Ds%5B0%5D%26%260%3D%3Di%5B0%5D%26%260%3D%3Ds%5Bt.length-1%5D%26%260%3D%3Di%5Bt.length-1%5D%7C%7C(this.browserAutomaticallyClearsAudioBuffer%3D!1)%2C!this.browserAutomaticallyClearsAudioBuffer)%7Bconst%20e%3Dt.length%3Bfor(let%20t%3D0%3Bt%3Ce%3Bt%2B%2B)s%5Bt%5D%3D0%2Ci%5Bt%5D%3D0%7D!this.isPlayingSong%26%26performance.now()%3E%3Dthis.liveInputEndTime%3Fthis.deactivateAudio()%3A(this.synthesize(s%2Ci%2Ct.length%2Cthis.isPlayingSong)%2Cthis.oscEnabled%26%26(this.oscRefreshEventTimer%3C%3D0%3F(L.raise(%22oscilloscopeUpdate%22%2Cs%2Ci)%2Cthis.oscRefreshEventTimer%3D2)%3Athis.oscRefreshEventTimer--))%7D%2Cthis.computeDelayBufferSizes()%2Cnull!%3De%26%26this.setSong(e)%7DsetSong(e)%7B%22string%22%3D%3Dtypeof%20e%3Fthis.song%3Dnew%20ve(e)%3Ae%20instanceof%20ve%26%26(this.song%3De)%2Cthis.prevBar%3Dnull%7DcomputeDelayBufferSizes()%7Bthis.panningDelayBufferSize%3Dxe.fittingPowerOfTwo(this.samplesPerSecond*u.panDelaySecondsMax)%2Cthis.panningDelayBufferMask%3Dthis.panningDelayBufferSize-1%2Cthis.chorusDelayBufferSize%3Dxe.fittingPowerOfTwo(this.samplesPerSecond*u.chorusMaxDelay)%2Cthis.chorusDelayBufferMask%3Dthis.chorusDelayBufferSize-1%7DactivateAudio()%7Bconst%20e%3Dthis.anticipatePoorPerformance%3Fthis.preferLowerLatency%3F2048%3A4096%3Athis.preferLowerLatency%3F512%3A2048%3Bif(null%3D%3Dthis.audioCtx%7C%7Cnull%3D%3Dthis.scriptNode%7C%7Cthis.scriptNode.bufferSize!%3De)%7Bnull!%3Dthis.scriptNode%26%26this.deactivateAudio()%3Bconst%20t%3Dthis.anticipatePoorPerformance%3Fthis.preferLowerLatency%3F%22balanced%22%3A%22playback%22%3Athis.preferLowerLatency%3F%22interactive%22%3A%22balanced%22%3Bthis.audioCtx%3Dthis.audioCtx%7C%7Cnew(window.AudioContext%7C%7Cwindow.webkitAudioContext)(%7BlatencyHint%3At%7D)%2Cthis.samplesPerSecond%3Dthis.audioCtx.sampleRate%2Cthis.scriptNode%3Dthis.audioCtx.createScriptProcessor%3Fthis.audioCtx.createScriptProcessor(e%2C0%2C2)%3Athis.audioCtx.createJavaScriptNode(e%2C0%2C2)%2Cthis.scriptNode.onaudioprocess%3Dthis.audioProcessCallback%2Cthis.scriptNode.channelCountMode%3D%22explicit%22%2Cthis.scriptNode.channelInterpretation%3D%22speakers%22%2Cthis.scriptNode.connect(this.audioCtx.destination)%2Cthis.computeDelayBufferSizes()%7Dthis.audioCtx.resume()%7DdeactivateAudio()%7Bnull!%3Dthis.audioCtx%26%26null!%3Dthis.scriptNode%26%26(this.scriptNode.disconnect(this.audioCtx.destination)%2Cthis.scriptNode%3Dnull%2Cthis.audioCtx.close%26%26this.audioCtx.close()%2Cthis.audioCtx%3Dnull)%7DmaintainLiveInput()%7Bthis.activateAudio()%2Cthis.liveInputEndTime%3Dperformance.now()%2B1e4%7Dplay()%7Bthis.isPlayingSong%7C%7C(this.initModFilters(this.song)%2Cthis.computeLatestModValues()%2Cthis.activateAudio()%2Cthis.warmUpSynthesizer(this.song)%2Cthis.isPlayingSong%3D!0)%7Dpause()%7Bif(this.isPlayingSong%26%26(this.isPlayingSong%3D!1%2Cthis.isRecording%3D!1%2Cthis.modValues%3D%5B%5D%2Cthis.nextModValues%3D%5B%5D%2Cthis.heldMods%3D%5B%5D%2Cnull!%3Dthis.song))%7Bthis.song.inVolumeCap%3D0%2Cthis.song.outVolumeCap%3D0%3Bfor(let%20e%3D0%3Be%3Cthis.song.pitchChannelCount%2Bthis.song.noiseChannelCount%3Be%2B%2B)this.modInsValues%5Be%5D%3D%5B%5D%2Cthis.nextModInsValues%5Be%5D%3D%5B%5D%7D%7DstartRecording()%7Bthis.preferLowerLatency%3D!0%2Cthis.isRecording%3D!0%2Cthis.play()%7DresetEffects()%7Bif(this.limit%3D0%2Cthis.freeAllTones()%2Cnull!%3Dthis.song)for(const%20e%20of%20this.channels)for(const%20t%20of%20e.instruments)t.resetAllEffects()%7DsetModValue(e%2Ct%2Cs%2Ci%2Cn)%7Blet%20a%3De%2Bu.modulators%5Bn%5D.convertRealFactor%2Cr%3Dt%2Bu.modulators%5Bn%5D.convertRealFactor%3Breturn%20u.modulators%5Bn%5D.forSong%3Fnull!%3Dthis.modValues%5Bn%5D%26%26this.modValues%5Bn%5D%3D%3Da%26%26this.nextModValues%5Bn%5D%3D%3Dr%7C%7C(this.modValues%5Bn%5D%3Da%2Cthis.nextModValues%5Bn%5D%3Dr)%3Anull!%3Dthis.modInsValues%5Bs%5D%5Bi%5D%5Bn%5D%26%26this.modInsValues%5Bs%5D%5Bi%5D%5Bn%5D%3D%3Da%26%26this.nextModInsValues%5Bs%5D%5Bi%5D%5Bn%5D%3D%3Dr%7C%7C(this.modInsValues%5Bs%5D%5Bi%5D%5Bn%5D%3Da%2Cthis.nextModInsValues%5Bs%5D%5Bi%5D%5Bn%5D%3Dr)%2Ca%7DgetModValue(e%2Ct%2Cs%2Ci)%7Bif(u.modulators%5Be%5D.forSong)%7Bif(null!%3Dthis.modValues%5Be%5D%26%26null!%3Dthis.nextModValues%5Be%5D)return%20i%3Fthis.nextModValues%5Be%5D%3Athis.modValues%5Be%5D%7Delse%20if(null!%3Dt%26%26null!%3Ds%26%26null!%3Dthis.modInsValues%5Bt%5D%5Bs%5D%5Be%5D%26%26null!%3Dthis.nextModInsValues%5Bt%5D%5Bs%5D%5Be%5D)return%20i%3Fthis.nextModInsValues%5Bt%5D%5Bs%5D%5Be%5D%3Athis.modInsValues%5Bt%5D%5Bs%5D%5Be%5D%3Breturn-1%7DisAnyModActive(e%2Ct)%7Bfor(let%20s%3D0%3Bs%3Cu.modulators.length%3Bs%2B%2B)if(null!%3Dthis.modValues%26%26null!%3Dthis.modValues%5Bs%5D%7C%7Cnull!%3Dthis.modInsValues%26%26null!%3Dthis.modInsValues%5Be%5D%26%26null!%3Dthis.modInsValues%5Be%5D%5Bt%5D%26%26null!%3Dthis.modInsValues%5Be%5D%5Bt%5D%5Bs%5D)return!0%3Breturn!1%7DunsetMod(e%2Ct%2Cs)%7Bif(this.isModActive(e)%7C%7Cnull!%3Dt%26%26null!%3Ds%26%26this.isModActive(e%2Ct%2Cs))%7Bthis.modValues%5Be%5D%3Dnull%2Cthis.nextModValues%5Be%5D%3Dnull%3Bfor(let%20i%3D0%3Bi%3Cthis.heldMods.length%3Bi%2B%2B)null!%3Dt%26%26null!%3Ds%3Fthis.heldMods%5Bi%5D.channelIndex%3D%3Dt%26%26this.heldMods%5Bi%5D.instrumentIndex%3D%3Ds%26%26this.heldMods%5Bi%5D.setting%3D%3De%26%26this.heldMods.splice(i%2C1)%3Athis.heldMods%5Bi%5D.setting%3D%3De%26%26this.heldMods.splice(i%2C1)%3Bnull!%3Dt%26%26null!%3Ds%26%26(this.modInsValues%5Bt%5D%5Bs%5D%5Be%5D%3Dnull%2Cthis.nextModInsValues%5Bt%5D%5Bs%5D%5Be%5D%3Dnull)%7D%7DisFilterModActive(e%2Ct%2Cs)%7Bconst%20i%3Dthis.song.channels%5Bt%5D.instruments%5Bs%5D%3Bif(e)%7Bif(i.noteFilterType)return!1%3Bif(null!%3Di.tmpNoteFilterEnd)return!0%7Delse%7Bif(i.eqFilterType)return!1%3Bif(null!%3Di.tmpEqFilterEnd)return!0%7Dreturn!1%7DisModActive(e%2Ct%2Cs)%7Breturn%20u.modulators%5Be%5D.forSong%3Fnull!%3Dthis.modValues%26%26null!%3Dthis.modValues%5Be%5D%3Anull!%3Dt%26%26null!%3Ds%26%26null!%3Dthis.modInsValues%26%26null!%3Dthis.modInsValues%5Bt%5D%26%26null!%3Dthis.modInsValues%5Bt%5D%5Bs%5D%26%26null!%3Dthis.modInsValues%5Bt%5D%5Bs%5D%5Be%5D%7DforceHoldMods(e%2Ct%2Cs%2Ci)%7Blet%20n%3D!1%3Bfor(let%20a%3D0%3Ba%3Cthis.heldMods.length%3Ba%2B%2B)this.heldMods%5Ba%5D.channelIndex%3D%3Dt%26%26this.heldMods%5Ba%5D.instrumentIndex%3D%3Ds%26%26this.heldMods%5Ba%5D.setting%3D%3Di%26%26(this.heldMods%5Ba%5D.volume%3De%2Cthis.heldMods%5Ba%5D.holdFor%3D24%2Cn%3D!0)%3Bn%7C%7Cthis.heldMods.push(%7Bvolume%3Ae%2CchannelIndex%3At%2CinstrumentIndex%3As%2Csetting%3Ai%2CholdFor%3A24%7D)%7DsnapToStart()%7Bthis.bar%3D0%2Cthis.resetEffects()%2Cthis.snapToBar()%7DgoToBar(e)%7Bthis.bar%3De%2Cthis.resetEffects()%2Cthis.playheadInternal%3Dthis.bar%7DsnapToBar()%7Bthis.playheadInternal%3Dthis.bar%2Cthis.beat%3D0%2Cthis.part%3D0%2Cthis.tick%3D0%2Cthis.tickSampleCountdown%3D0%7DjumpIntoLoop()%7Bif(this.song%26%26(this.bar%3Cthis.song.loopStart%7C%7Cthis.bar%3E%3Dthis.song.loopStart%2Bthis.song.loopLength))%7Bconst%20e%3Dthis.bar%3Bthis.bar%3Dthis.song.loopStart%2Cthis.playheadInternal%2B%3Dthis.bar-e%2Cthis.playing%26%26this.computeLatestModValues()%7D%7DgoToNextBar()%7Bif(!this.song)return%3Bthis.prevBar%3Dthis.bar%3Bconst%20e%3Dthis.bar%3Bthis.bar%2B%2B%2Cthis.bar%3E%3Dthis.song.barCount%26%26(this.bar%3D0)%2Cthis.playheadInternal%2B%3Dthis.bar-e%2Cthis.playing%26%26this.computeLatestModValues()%7DgoToPrevBar()%7Bif(!this.song)return%3Bthis.prevBar%3Dnull%3Bconst%20e%3Dthis.bar%3Bthis.bar--%2C(this.bar%3C0%7C%7Cthis.bar%3E%3Dthis.song.barCount)%26%26(this.bar%3Dthis.song.barCount-1)%2Cthis.playheadInternal%2B%3Dthis.bar-e%2Cthis.playing%26%26this.computeLatestModValues()%7DgetNextBar()%7Blet%20e%3Dthis.bar%2B1%3Breturn%20this.isRecording%3Fe%3E%3Dthis.song.barCount%26%26(e%3Dthis.song.barCount-1)%3Athis.bar!%3Dthis.loopBarEnd%7C%7Cthis.renderingSong%3F0!%3Dthis.loopRepeatCount%26%26e%3D%3DMath.max(this.loopBarEnd%2B1%2Cthis.song.loopStart%2Bthis.song.loopLength)%26%26(e%3Dthis.song.loopStart)%3Ae%3Dthis.loopBarStart%2Ce%7DskipBar()%7Bif(!this.song)return%3Bconst%20e%3Dthis.getSamplesPerTick()%3Bthis.prevBar%3Dthis.bar%2Cthis.loopBarEnd!%3Dthis.bar%3Fthis.bar%2B%2B%3Athis.bar%3Dthis.loopBarStart%2Cthis.beat%3D0%2Cthis.part%3D0%2Cthis.tick%3D0%2Cthis.tickSampleCountdown%3De%2Cthis.isAtStartOfTick%3D!0%2C0!%3Dthis.loopRepeatCount%26%26this.bar%3D%3DMath.max(this.song.loopStart%2Bthis.song.loopLength%2Cthis.loopBarEnd)%26%26(this.bar%3Dthis.song.loopStart%2C-1!%3Dthis.loopBarStart%26%26(this.bar%3Dthis.loopBarStart)%2Cthis.loopRepeatCount%3E0%26%26this.loopRepeatCount--)%7Dsynthesize(e%2Ct%2Cs%2Ci%3D!0)%7Bif(null%3D%3Dthis.song)%7Bfor(let%20i%3D0%3Bi%3Cs%3Bi%2B%2B)e%5Bi%5D%3D0%2Ct%5Bi%5D%3D0%3Breturn%20void%20this.deactivateAudio()%7Dconst%20n%3Dthis.song%3Bthis.song.inVolumeCap%3D0%2Cthis.song.outVolumeCap%3D0%3Blet%20a%3Dthis.getSamplesPerTick()%2Cr%3D!1%3B(this.tickSampleCountdown%3C%3D0%7C%7Cthis.tickSampleCountdown%3Ea)%26%26(this.tickSampleCountdown%3Da%2Cthis.isAtStartOfTick%3D!0)%2Ci%26%26(this.beat%3E%3Dn.beatsPerBar%26%26(this.beat%3D0%2Cthis.part%3D0%2Cthis.tick%3D0%2Cthis.tickSampleCountdown%3Da%2Cthis.isAtStartOfTick%3D!0%2Cthis.prevBar%3Dthis.bar%2Cthis.bar%3Dthis.getNextBar()%2Cthis.bar%3C%3Dthis.prevBar%26%26this.loopRepeatCount%3E0%26%26this.loopRepeatCount--)%2Cthis.bar%3E%3Dn.barCount%26%26(this.bar%3D0%2C-1!%3Dthis.loopRepeatCount%26%26(r%3D!0%2Cthis.pause())))%2Cthis.syncSongState()%2C(null%3D%3Dthis.tempMonoInstrumentSampleBuffer%7C%7Cthis.tempMonoInstrumentSampleBuffer.length%3Cs)%26%26(this.tempMonoInstrumentSampleBuffer%3Dnew%20Float32Array(s))%3Bconst%20o%3D%2Bthis.volume%2Cl%3D1-Math.pow(.5%2Cthis.song.limitDecay%2Fthis.samplesPerSecond)%2Ch%3D1-Math.pow(.5%2Cthis.song.limitRise%2Fthis.samplesPerSecond)%3Blet%20c%3D%2Bthis.limit%2Cp%3D%5B%5D%2Cf%3D-1%2Cm%3D0%3Bfor(%3Bm%3Cs%26%26!r%3B)%7Bthis.nextBar%3Dthis.getNextBar()%2Cthis.nextBar%3E%3Dn.barCount%26%26(this.nextBar%3Dnull)%3Bconst%20d%3Ds-m%2Cy%3DMath.ceil(this.tickSampleCountdown)%2Cv%3DMath.min(y%2Cd)%2Cg%3Dm%2Bv%3Bif(this.isPlayingSong%7C%7Cthis.renderingSong)%7Bfor(let%20e%3Dn.pitchChannelCount%2Bn.noiseChannelCount%3Be%3Cn.getChannelCount()%3Be%2B%2B)%7Bconst%20t%3Dn.channels%5Be%5D%2Cs%3Dthis.channels%5Be%5D%3Bthis.determineCurrentActiveTones(n%2Ce%2Ca%2Ci)%3Bfor(let%20i%3D0%3Bi%3Ct.instruments.length%3Bi%2B%2B)%7Bconst%20t%3Ds.instruments%5Bi%5D%3Bfor(let%20s%3D0%3Bs%3Ct.activeModTones.count()%3Bs%2B%2B)%7Bconst%20i%3Dt.activeModTones.get(s)%2Cr%3Dn.channels%5Be%5D.instruments%5Bi.instrumentIndex%5D%3Blet%20o%3Du.modCount-1-i.pitches%5B0%5D%3B(r.modulators%5Bo%5D%3D%3Du.modulators.dictionary%5B%22note%20filter%22%5D.index%7C%7Cr.modulators%5Bo%5D%3D%3Du.modulators.dictionary%5B%22eq%20filter%22%5D.index)%26%26null!%3Dr.modFilterTypes%5Bo%5D%26%26r.modFilterTypes%5Bo%5D%3E0%7C%7Cthis.playModTone(n%2Ce%2Ca%2Cm%2Cv%2Ci%2C!1%2C!1)%7D%7D%7Dfor(let%20e%3Dn.pitchChannelCount%2Bn.noiseChannelCount%3Be%3Cn.getChannelCount()%3Be%2B%2B)%7Bconst%20t%3Dn.channels%5Be%5D%2Cs%3Dthis.channels%5Be%5D%3Bfor(let%20i%3D0%3Bi%3Ct.instruments.length%3Bi%2B%2B)%7Bconst%20t%3Ds.instruments%5Bi%5D%3Bfor(let%20s%3D0%3Bs%3Ct.activeModTones.count()%3Bs%2B%2B)%7Bconst%20i%3Dt.activeModTones.get(s)%2Cr%3Dn.channels%5Be%5D.instruments%5Bi.instrumentIndex%5D%3Blet%20o%3Du.modCount-1-i.pitches%5B0%5D%3B(r.modulators%5Bo%5D%3D%3Du.modulators.dictionary%5B%22note%20filter%22%5D.index%7C%7Cr.modulators%5Bo%5D%3D%3Du.modulators.dictionary%5B%22eq%20filter%22%5D.index)%26%26null!%3Dr.modFilterTypes%5Bo%5D%26%26r.modFilterTypes%5Bo%5D%3E0%26%26this.playModTone(n%2Ce%2Ca%2Cm%2Cv%2Ci%2C!1%2C!1)%7D%7D%7D%7Dif(this.wantToSkip)%7Blet%20e%3Dp.includes(this.bar)%3Bif(e%26%26m%3D%3Df)return%20void%20this.pause()%3B-1%3D%3Df%26%26(f%3Dm)%2Ce%7C%7Cp.push(this.bar)%2Cthis.wantToSkip%3D!1%2Cthis.skipBar()%7Delse%7Bfor(let%20s%3D0%3Bs%3Cn.pitchChannelCount%2Bn.noiseChannelCount%3Bs%2B%2B)%7Bconst%20r%3Dn.channels%5Bs%5D%2Co%3Dthis.channels%5Bs%5D%3Bthis.isAtStartOfTick%26%26(this.determineCurrentActiveTones(n%2Cs%2Ca%2Ci%26%26!this.countInMetronome)%2Cthis.determineLiveInputTones(n%2Cs%2Ca))%3Bfor(let%20i%3D0%3Bi%3Cr.instruments.length%3Bi%2B%2B)%7Bconst%20l%3Dr.instruments%5Bi%5D%2Ch%3Do.instruments%5Bi%5D%3Bif(this.isAtStartOfTick)%7Blet%20e%3Dh.activeTones.count()%2Bh.liveInputTones.count()%3Bfor(let%20t%3D0%3Bt%3Ch.releasedTones.count()%3Bt%2B%2B)%7Bconst%20i%3Dh.releasedTones.get(t)%3Bif(i.ticksSinceReleased%3E%3DMath.abs(l.getFadeOutTicks()))%7Bthis.freeReleasedTone(h%2Ct)%2Ct--%3Bcontinue%7Dconst%20r%3De%3E%3Du.maximumTonesPerChannel%3Bthis.computeTone(n%2Cs%2Ca%2Ci%2C!0%2Cr)%2Ce%2B%2B%7Dh.awake%26%26(h.computed%7C%7Ch.compute(this%2Cl%2Ca%2CMath.ceil(a)%2Cnull%2Cs%2Ci)%2Ch.computed%3D!1)%7Dfor(let%20e%3D0%3Be%3Ch.activeTones.count()%3Be%2B%2B)%7Bconst%20t%3Dh.activeTones.get(e)%3Bthis.playTone(s%2Cm%2Cv%2Ct)%7Dfor(let%20e%3D0%3Be%3Ch.liveInputTones.count()%3Be%2B%2B)%7Bconst%20t%3Dh.liveInputTones.get(e)%3Bthis.playTone(s%2Cm%2Cv%2Ct)%7Dfor(let%20e%3D0%3Be%3Ch.releasedTones.count()%3Be%2B%2B)%7Bconst%20t%3Dh.releasedTones.get(e)%3Bthis.playTone(s%2Cm%2Cv%2Ct)%7Dh.awake%26%26xe.effectsSynth(this%2Ce%2Ct%2Cm%2Cv%2Ch)%3Bconst%20c%3Dthis.tickSampleCountdown%2Cp%3D1-c%2Fa%2Cf%3D1-(c-v)%2Fa%2Cd%3D(this.beat*u.partsPerBeat%2Bthis.part)*u.ticksPerPart%2Bthis.tick%2Cy%3Dd%2Fu.ticksPerPart%2Cg%3D(d%2B1)%2Fu.ticksPerPart%2Cb%3Dy%2B(g-y)*p%2CS%3Dy%2B(g-y)*f%3Blet%20M%3Dl.vibratoSpeed%3Bh.vibratoTime%3Dh.nextVibratoTime%2Cthis.isModActive(u.modulators.dictionary%5B%22vibrato%20speed%22%5D.index%2Cs%2Ci)%26%26(M%3Dthis.getModValue(u.modulators.dictionary%5B%22vibrato%20speed%22%5D.index%2Cs%2Ci))%2C0%3D%3DM%3F(h.vibratoTime%3D0%2Ch.nextVibratoTime%3D0)%3Ah.nextVibratoTime%2B%3D.1*M*(S-b)%7D%7Dif(this.enableMetronome%7C%7Cthis.countInMetronome)if(0%3D%3Dthis.part)%7Bif(!this.startedMetronome)%7Bconst%20e%3Dn.beatsPerBar%3E4%26%26n.beatsPerBar%252%3D%3D0%26%26this.beat%3D%3Dn.beatsPerBar%2F2%2Ct%3D0%3D%3Dthis.beat%3F8%3Ae%3F6%3A4%2Cs%3D0%3D%3Dthis.beat%3F1600%3Ae%3F1200%3A800%2Ci%3D0%3D%3Dthis.beat%3F.06%3Ae%3F.05%3A.04%2Ca%3Dthis.samplesPerSecond%2Fs%2Cr%3D2*Math.PI%2Fa%3Bthis.metronomeSamplesRemaining%3DMath.floor(a*t)%2Cthis.metronomeFilter%3D2*Math.cos(r)%2Cthis.metronomeAmplitude%3Di*Math.sin(r)%2Cthis.metronomePrevAmplitude%3D0%2Cthis.startedMetronome%3D!0%7Dif(this.metronomeSamplesRemaining%3E0)%7Bconst%20s%3DMath.min(g%2Cm%2Bthis.metronomeSamplesRemaining)%3Bthis.metronomeSamplesRemaining-%3Ds-m%3Bfor(let%20i%3Dm%3Bi%3Cs%3Bi%2B%2B)%7Be%5Bi%5D%2B%3Dthis.metronomeAmplitude%2Ct%5Bi%5D%2B%3Dthis.metronomeAmplitude%3Bconst%20s%3Dthis.metronomeFilter*this.metronomeAmplitude-this.metronomePrevAmplitude%3Bthis.metronomePrevAmplitude%3Dthis.metronomeAmplitude%2Cthis.metronomeAmplitude%3Ds%7D%7D%7Delse%20this.startedMetronome%3D!1%3Bfor(let%20s%3Dm%3Bs%3Cg%3Bs%2B%2B)%7Bconst%20i%3De%5Bs%5D*n.masterGain*n.masterGain%2Ca%3Dt%5Bs%5D*n.masterGain*n.masterGain%2Cr%3Di%3C0%3F-i%3Ai%2Cu%3Da%3C0%3F-a%3Aa%2Cp%3Dr%3Eu%3Fr%3Au%3Bthis.song.inVolumeCap%3Dthis.song.inVolumeCap%3Ep%3Fthis.song.inVolumeCap%3Ap%3Bconst%20f%3D%2B(p%3En.compressionThreshold)%2B%20%2B(p%3En.limitThreshold)%2Cm%3D%2B(0%3D%3Df)*((.8*(p%2B1-n.compressionThreshold)%2B.25)*n.compressionRatio%2B1.05*(1-n.compressionRatio))%2B1.05*%2B(1%3D%3Df)%2B%20%2B(2%3D%3Df)*(1.05*((p%2B1-n.limitThreshold)*n.limitRatio%2B(1-n.limitThreshold)))%3Bc%2B%3D(m-c)*(c%3Cm%3Fh%3Al)%3Bconst%20d%3Do%2F(c%3E%3D1%3F1.05*c%3A.8*c%2B.25)%3Be%5Bs%5D%3Di*d%2Ct%5Bs%5D%3Da*d%2Cthis.song.outVolumeCap%3Dthis.song.outVolumeCap%3Ep*d%3Fthis.song.outVolumeCap%3Ap*d%7Dif(m%2B%3Dv%2Cthis.isAtStartOfTick%3D!1%2Cthis.tickSampleCountdown-%3Dv%2Cthis.tickSampleCountdown%3C%3D0)%7Bthis.isAtStartOfTick%3D!0%3Bfor(const%20e%20of%20this.channels)for(const%20t%20of%20e.instruments)%7Bfor(let%20e%3D0%3Be%3Ct.releasedTones.count()%3Be%2B%2B)%7Bconst%20s%3Dt.releasedTones.get(e)%3Bs.isOnLastTick%3F(this.freeReleasedTone(t%2Ce)%2Ce--)%3As.ticksSinceReleased%2B%2B%7Dt.deactivateAfterThisTick%26%26t.deactivate()%2Ct.tonesAddedInThisTick%3D!1%7Dfor(let%20e%3D0%3Be%3Cthis.song.pitchChannelCount%2Bthis.song.noiseChannelCount%3Be%2B%2B)for(let%20t%3D0%3Bt%3Cthis.song.channels%5Be%5D.instruments.length%3Bt%2B%2B)%7Blet%20s%3Dthis.song.channels%5Be%5D.instruments%5Bt%5D%2Ci%3Dthis.channels%5Be%5D.instruments%5Bt%5D%2Cn%3Ds.arpeggioSpeed%3Bthis.isModActive(u.modulators.dictionary%5B%22arp%20speed%22%5D.index%2Ce%2Ct)%3F(n%3DMath.max(0%2CMath.min(u.arpSpeedScale.length-1%2Cthis.getModValue(u.modulators.dictionary%5B%22arp%20speed%22%5D.index%2Ce%2Ct%2C!1)))%2CNumber.isInteger(n)%3Fi.arpTime%2B%3Du.arpSpeedScale%5Bn%5D%3Ai.arpTime%2B%3D(1-n%251)*u.arpSpeedScale%5BMath.floor(n)%5D%2Bn%251*u.arpSpeedScale%5BMath.ceil(n)%5D)%3Ai.arpTime%2B%3Du.arpSpeedScale%5Bn%5D%3Blet%20a%3Ds.envelopeSpeed%3Bthis.isModActive(u.modulators.dictionary%5B%22envelope%20speed%22%5D.index%2Ce%2Ct)%3F(a%3DMath.max(0%2CMath.min(u.arpSpeedScale.length-1%2Cthis.getModValue(u.modulators.dictionary%5B%22envelope%20speed%22%5D.index%2Ce%2Ct%2C!1)))%2CNumber.isInteger(a)%3Fi.envelopeTime%2B%3Du.arpSpeedScale%5Ba%5D%3Ai.envelopeTime%2B%3D(1-a%251)*u.arpSpeedScale%5BMath.floor(a)%5D%2Ba%251*u.arpSpeedScale%5BMath.ceil(a)%5D)%3Ai.envelopeTime%2B%3Du.arpSpeedScale%5Ba%5D%7Dfor(let%20e%3D0%3Be%3Cthis.song.pitchChannelCount%2Bthis.song.noiseChannelCount%3Be%2B%2B)for(let%20t%3D0%3Bt%3Cthis.song.channels%5Be%5D.instruments.length%3Bt%2B%2B)%7Blet%20s%3Dthis.song.channels%5Be%5D.instruments%5Bt%5D%3Bnull!%3Ds.tmpEqFilterEnd%3Fs.tmpEqFilterStart%3Ds.tmpEqFilterEnd%3As.tmpEqFilterStart%3Ds.eqFilter%2Cnull!%3Ds.tmpNoteFilterEnd%3Fs.tmpNoteFilterStart%3Ds.tmpNoteFilterEnd%3As.tmpNoteFilterStart%3Ds.noteFilter%7Dif(this.tick%2B%2B%2Cthis.tickSampleCountdown%2B%3Da%2Cthis.tick%3D%3Du.ticksPerPart)%7Bthis.tick%3D0%2Cthis.part%2B%2B%2Cthis.liveInputDuration--%2Cthis.liveBassInputDuration--%3Bfor(let%20e%3D0%3Be%3Cthis.heldMods.length%3Be%2B%2B)this.heldMods%5Be%5D.holdFor--%2Cthis.heldMods%5Be%5D.holdFor%3C%3D0%26%26this.heldMods.splice(e%2C1)%3Bthis.part%3D%3Du.partsPerBeat%26%26(this.part%3D0%2Ci%26%26(this.beat%2B%2B%2Cthis.beat%3D%3Dn.beatsPerBar%26%26(this.beat%3D0%2Cthis.countInMetronome%3Fthis.countInMetronome%3D!1%3A(this.prevBar%3Dthis.bar%2Cthis.bar%3Dthis.getNextBar()%2Cthis.bar%3C%3Dthis.prevBar%26%26this.loopRepeatCount%3E0%26%26this.loopRepeatCount--%2Cthis.bar%3E%3Dn.barCount%26%26(this.bar%3D0%2C-1!%3Dthis.loopRepeatCount%26%26(r%3D!0%2Cthis.resetEffects()%2Cthis.pause()))))))%7D%7Dfor(let%20e%3D0%3Be%3Cu.modulators.length%3Be%2B%2B)null!%3Dthis.nextModValues%26%26null!%3Dthis.nextModValues%5Be%5D%26%26(this.modValues%5Be%5D%3Dthis.nextModValues%5Be%5D)%3Bthis.isModActive(u.modulators.dictionary.tempo.index)%26%26(a%3Dthis.getSamplesPerTick()%2Cthis.tickSampleCountdown%3DMath.min(this.tickSampleCountdown%2Ca))%3Bfor(let%20e%3D0%3Be%3Cthis.song.pitchChannelCount%2Bthis.song.noiseChannelCount%3Be%2B%2B)for(let%20t%3D0%3Bt%3Cthis.channels%5Be%5D.instruments.length%3Bt%2B%2B)%7Bconst%20s%3Dthis.channels%5Be%5D.instruments%5Bt%5D%2Ci%3Dthis.song.channels%5Be%5D.instruments%5Bt%5D%3Bs.nextVibratoTime%3Ds.nextVibratoTime%25(u.vibratoTypes%5Bi.vibratoType%5D.period%2F(u.ticksPerPart*a%2Fthis.samplesPerSecond))%2Cs.arpTime%3Ds.arpTime%25(2520*u.ticksPerArpeggio)%2Cs.envelopeTime%3Ds.envelopeTime%25(u.partsPerBeat*u.ticksPerPart*this.song.beatsPerBar)%7Dfor(let%20e%3D0%3Be%3Cu.modulators.length%3Be%2B%2B)for(let%20t%3D0%3Bt%3Cthis.song.pitchChannelCount%2Bthis.song.noiseChannelCount%3Bt%2B%2B)for(let%20s%3D0%3Bs%3Cthis.song.getMaxInstrumentsPerChannel()%3Bs%2B%2B)null!%3Dthis.nextModInsValues%26%26null!%3Dthis.nextModInsValues%5Bt%5D%26%26null!%3Dthis.nextModInsValues%5Bt%5D%5Bs%5D%26%26null!%3Dthis.nextModInsValues%5Bt%5D%5Bs%5D%5Be%5D%26%26(this.modInsValues%5Bt%5D%5Bs%5D%5Be%5D%3Dthis.nextModInsValues%5Bt%5D%5Bs%5D%5Be%5D)%7D%7D(!Number.isFinite(c)%7C%7CMath.abs(c)%3CW)%26%26(c%3D0)%2Cthis.limit%3Dc%2Ci%26%26!this.countInMetronome%26%26(this.playheadInternal%3D(((this.tick%2B1-this.tickSampleCountdown%2Fa)%2F2%2Bthis.part)%2Fu.partsPerBeat%2Bthis.beat)%2Fn.beatsPerBar%2Bthis.bar)%7DfreeTone(e)%7Bthis.tonePool.pushBack(e)%7DnewTone()%7Bif(this.tonePool.count()%3E0)%7Bconst%20e%3Dthis.tonePool.popBack()%3Breturn%20e.freshlyAllocated%3D!0%2Ce%7Dreturn%20new%20Se%7DreleaseTone(e%2Ct)%7Be.releasedTones.pushFront(t)%2Ct.atNoteStart%3D!1%2Ct.passedEndOfNote%3D!0%7DfreeReleasedTone(e%2Ct)%7Bthis.freeTone(e.releasedTones.get(t))%2Ce.releasedTones.remove(t)%7DfreeAllTones()%7Bfor(const%20e%20of%20this.channels)for(const%20t%20of%20e.instruments)%7Bfor(%3Bt.activeTones.count()%3E0%3B)this.freeTone(t.activeTones.popBack())%3Bfor(%3Bt.activeModTones.count()%3E0%3B)this.freeTone(t.activeModTones.popBack())%3Bfor(%3Bt.releasedTones.count()%3E0%3B)this.freeTone(t.releasedTones.popBack())%3Bfor(%3Bt.liveInputTones.count()%3E0%3B)this.freeTone(t.liveInputTones.popBack())%7D%7DdetermineLiveInputTones(e%2Ct%2Cs)%7Bconst%20i%3De.channels%5Bt%5D%2Cn%3Dthis.channels%5Bt%5D%2Ca%3Dthis.liveInputPitches%2Cr%3Dthis.liveBassInputPitches%3Bfor(let%20o%3D0%3Bo%3Ci.instruments.length%3Bo%2B%2B)%7Bconst%20l%3Dn.instruments%5Bo%5D%2Ch%3Dl.liveInputTones%3Blet%20u%3D0%3Bif(this.liveInputDuration%3E0%26%26t%3D%3Dthis.liveInputChannel%26%26a.length%3E0%26%26-1!%3Dthis.liveInputInstruments.indexOf(o))%7Bconst%20n%3Di.instruments%5Bo%5D%3Bif(n.getChord().singleTone)%7Blet%20i%3Bh.count()%3C%3Du%3F(i%3Dthis.newTone()%2Ch.pushBack(i))%3A!n.getTransition().isSeamless%26%26this.liveInputStarted%3F(this.releaseTone(l%2Ch.get(u))%2Ci%3Dthis.newTone()%2Ch.set(u%2Ci))%3Ai%3Dh.get(u)%2Cu%2B%2B%3Bfor(let%20e%3D0%3Be%3Ca.length%3Be%2B%2B)i.pitches%5Be%5D%3Da%5Be%5D%3Bi.pitchCount%3Da.length%2Ci.chordSize%3D1%2Ci.instrumentIndex%3Do%2Ci.note%3Di.prevNote%3Di.nextNote%3Dnull%2Ci.atNoteStart%3Dthis.liveInputStarted%2Ci.forceContinueAtStart%3D!1%2Ci.forceContinueAtEnd%3D!1%2Cthis.computeTone(e%2Ct%2Cs%2Ci%2C!1%2C!1)%7Delse%7Bthis.moveTonesIntoOrderedTempMatchedList(h%2Ca)%3Bfor(let%20i%3D0%3Bi%3Ca.length%3Bi%2B%2B)%7Blet%20n%3Bnull!%3Dthis.tempMatchedPitchTones%5Bu%5D%3F(n%3Dthis.tempMatchedPitchTones%5Bu%5D%2Cthis.tempMatchedPitchTones%5Bu%5D%3Dnull%2C1%3D%3Dn.pitchCount%26%26n.pitches%5B0%5D%3D%3Da%5Bi%5D%7C%7C(this.releaseTone(l%2Cn)%2Cn%3Dthis.newTone())%2Ch.pushBack(n))%3A(n%3Dthis.newTone()%2Ch.pushBack(n))%2Cu%2B%2B%2Cn.pitches%5B0%5D%3Da%5Bi%5D%2Cn.pitchCount%3D1%2Cn.chordSize%3Da.length%2Cn.instrumentIndex%3Do%2Cn.note%3Dn.prevNote%3Dn.nextNote%3Dnull%2Cn.atNoteStart%3Dthis.liveInputStarted%2Cn.forceContinueAtStart%3D!1%2Cn.forceContinueAtEnd%3D!1%2Cthis.computeTone(e%2Ct%2Cs%2Cn%2C!1%2C!1)%7D%7D%7Dif(this.liveBassInputDuration%3E0%26%26t%3D%3Dthis.liveBassInputChannel%26%26r.length%3E0%26%26-1!%3Dthis.liveBassInputInstruments.indexOf(o))%7Bconst%20n%3Di.instruments%5Bo%5D%3Bif(n.getChord().singleTone)%7Blet%20i%3Bh.count()%3C%3Du%3F(i%3Dthis.newTone()%2Ch.pushBack(i))%3A!n.getTransition().isSeamless%26%26this.liveInputStarted%3F(this.releaseTone(l%2Ch.get(u))%2Ci%3Dthis.newTone()%2Ch.set(u%2Ci))%3Ai%3Dh.get(u)%2Cu%2B%2B%3Bfor(let%20e%3D0%3Be%3Cr.length%3Be%2B%2B)i.pitches%5Be%5D%3Dr%5Be%5D%3Bi.pitchCount%3Dr.length%2Ci.chordSize%3D1%2Ci.instrumentIndex%3Do%2Ci.note%3Di.prevNote%3Di.nextNote%3Dnull%2Ci.atNoteStart%3Dthis.liveBassInputStarted%2Ci.forceContinueAtStart%3D!1%2Ci.forceContinueAtEnd%3D!1%2Cthis.computeTone(e%2Ct%2Cs%2Ci%2C!1%2C!1)%7Delse%7Bthis.moveTonesIntoOrderedTempMatchedList(h%2Cr)%3Bfor(let%20i%3D0%3Bi%3Cr.length%3Bi%2B%2B)%7Blet%20n%3Bnull!%3Dthis.tempMatchedPitchTones%5Bu%5D%3F(n%3Dthis.tempMatchedPitchTones%5Bu%5D%2Cthis.tempMatchedPitchTones%5Bu%5D%3Dnull%2C1%3D%3Dn.pitchCount%26%26n.pitches%5B0%5D%3D%3Dr%5Bi%5D%7C%7C(this.releaseTone(l%2Cn)%2Cn%3Dthis.newTone())%2Ch.pushBack(n))%3A(n%3Dthis.newTone()%2Ch.pushBack(n))%2Cu%2B%2B%2Cn.pitches%5B0%5D%3Dr%5Bi%5D%2Cn.pitchCount%3D1%2Cn.chordSize%3Dr.length%2Cn.instrumentIndex%3Do%2Cn.note%3Dn.prevNote%3Dn.nextNote%3Dnull%2Cn.atNoteStart%3Dthis.liveBassInputStarted%2Cn.forceContinueAtStart%3D!1%2Cn.forceContinueAtEnd%3D!1%2Cthis.computeTone(e%2Ct%2Cs%2Cn%2C!1%2C!1)%7D%7D%7Dfor(%3Bh.count()%3Eu%3B)this.releaseTone(l%2Ch.popBack())%3Bthis.clearTempMatchedPitchTones(u%2Cl)%7Dthis.liveInputStarted%3D!1%2Cthis.liveBassInputStarted%3D!1%7DadjacentPatternHasCompatibleInstrumentTransition(e%2Ct%2Cs%2Ci%2Cn%2Ca%2Cr%2Co%2Cl%2Ch)%7Bif(e.patternInstruments%26%26-1%3D%3Di.instruments.indexOf(n))%7Bif(s.instruments.length%3E1%7C%7Ci.instruments.length%3E1)return%20null%3Bconst%20e%3Dt.instruments%5Bi.instruments%5B0%5D%5D%3Bif(h)return%20e.getChord()%3Bconst%20n%3De.getTransition()%3Breturn%20a.includeAdjacentPatterns%26%26n.includeAdjacentPatterns%26%26n.slides%3D%3Da.slides%3Fe.getChord()%3Anull%7Dreturn%20h%7C%7Ca.includeAdjacentPatterns%3Fr%3Anull%7Dstatic%20adjacentNotesHaveMatchingPitches(e%2Ct)%7Bif(e.pitches.length!%3Dt.pitches.length)return!1%3Bconst%20s%3De.pins%5Be.pins.length-1%5D.interval%3Bfor(const%20i%20of%20e.pitches)if(-1%3D%3Dt.pitches.indexOf(i%2Bs))return!1%3Breturn!0%7DmoveTonesIntoOrderedTempMatchedList(e%2Ct)%7Bfor(let%20s%3D0%3Bs%3Ce.count()%3Bs%2B%2B)%7Bconst%20i%3De.get(s)%2Cn%3Di.pitches%5B0%5D%2Bi.lastInterval%3Bfor(let%20a%3D0%3Ba%3Ct.length%3Ba%2B%2B)if(t%5Ba%5D%3D%3Dn)%7Bthis.tempMatchedPitchTones%5Ba%5D%3Di%2Ce.remove(s)%2Cs--%3Bbreak%7D%7Dfor(%3Be.count()%3E0%3B)%7Bconst%20t%3De.popFront()%3Bfor(let%20e%3D0%3Be%3Cthis.tempMatchedPitchTones.length%3Be%2B%2B)if(null%3D%3Dthis.tempMatchedPitchTones%5Be%5D)%7Bthis.tempMatchedPitchTones%5Be%5D%3Dt%3Bbreak%7D%7D%7DdetermineCurrentActiveTones(e%2Ct%2Cs%2Ci)%7Bconst%20n%3De.channels%5Bt%5D%2Ca%3Dthis.channels%5Bt%5D%2Cr%3De.getPattern(t%2Cthis.bar)%2Co%3Dthis.getCurrentPart()%2Cl%3Dthis.tick%2Bu.ticksPerPart*o%3Bif(i%26%26e.getChannelIsMod(t))%7Blet%20s%3D%5B%5D%2Ci%3D%5B%5D%2Ch%3D%5B%5D%2Cc%3Du.modCount%3Bfor(%3Bc--%3B)s.push(null)%2Ci.push(null)%2Ch.push(null)%3Bif(null!%3Dr%26%26!n.muted)for(let%20e%3D0%3Be%3Cr.notes.length%3Be%2B%2B)r.notes%5Be%5D.end%3C%3Do%3F(null%3D%3Di%5Br.notes%5Be%5D.pitches%5B0%5D%5D%7C%7Cr.notes%5Be%5D.end%3Ei%5Br.notes%5Be%5D.pitches%5B0%5D%5D.start)%26%26(i%5Br.notes%5Be%5D.pitches%5B0%5D%5D%3Dr.notes%5Be%5D)%3Ar.notes%5Be%5D.start%3C%3Do%26%26r.notes%5Be%5D.end%3Eo%3Fs%5Br.notes%5Be%5D.pitches%5B0%5D%5D%3Dr.notes%5Be%5D%3Ar.notes%5Be%5D.start%3Eo%26%26(null%3D%3Dh%5Br.notes%5Be%5D.pitches%5B0%5D%5D%7C%7Cr.notes%5Be%5D.start%3Ch%5Br.notes%5Be%5D.pitches%5B0%5D%5D.start)%26%26(h%5Br.notes%5Be%5D.pitches%5B0%5D%5D%3Dr.notes%5Be%5D)%3Blet%20p%3D0%3Bconst%20f%3De.patternInstruments%26%26null!%3Dr%3Fr.instruments%5B0%5D%3A0%2Cm%3Da.instruments%5Bf%5D%2Cd%3Dm.activeModTones%3Bfor(let%20e%3D0%3Be%3Cu.modCount%3Be%2B%2B)%7Bif(null!%3Ds%5Be%5D%26%26(null!%3Di%5Be%5D%26%26i%5Be%5D.end!%3Ds%5Be%5D.start%26%26(i%5Be%5D%3Dnull)%2Cnull!%3Dh%5Be%5D%26%26h%5Be%5D.start!%3Ds%5Be%5D.end%26%26(h%5Be%5D%3Dnull))%2Cnull!%3Da.singleSeamlessInstrument%26%26a.singleSeamlessInstrument!%3Df%26%26a.singleSeamlessInstrument%3Ca.instruments.length)%7Bconst%20e%3Da.instruments%5Ba.singleSeamlessInstrument%5D%2Ct%3Da.instruments%5Bf%5D%3Bfor(%3Be.activeModTones.count()%3E0%3B)t.activeModTones.pushFront(e.activeModTones.popBack())%7Dif(a.singleSeamlessInstrument%3Df%2Cnull!%3Ds%5Be%5D)%7Blet%20t%3Di%5Be%5D%2Cn%3Dh%5Be%5D%2Ca%3D!1%2Cr%3D!1%3Bconst%20o%3Du.ticksPerPart*s%5Be%5D.start%3D%3Dl%26%26this.isAtStartOfTick%3Blet%20c%3Bif(d.count()%3C%3Dp)c%3Dthis.newTone()%2Cd.pushBack(c)%3Belse%20if(o%26%26null%3D%3Dt)%7Bconst%20e%3Dd.get(p)%3Be.isOnLastTick%3Fthis.freeTone(e)%3Athis.releaseTone(m%2Ce)%2Cc%3Dthis.newTone()%2Cd.set(p%2Cc)%7Delse%20c%3Dd.get(p)%3Bp%2B%2B%3Bfor(let%20t%3D0%3Bt%3Cs%5Be%5D.pitches.length%3Bt%2B%2B)c.pitches%5Bt%5D%3Ds%5Be%5D.pitches%5Bt%5D%3Bc.pitchCount%3Ds%5Be%5D.pitches.length%2Cc.chordSize%3D1%2Cc.instrumentIndex%3Df%2Cc.note%3Ds%5Be%5D%2Cc.noteStartPart%3Ds%5Be%5D.start%2Cc.noteEndPart%3Ds%5Be%5D.end%2Cc.prevNote%3Dt%2Cc.nextNote%3Dn%2Cc.prevNotePitchIndex%3D0%2Cc.nextNotePitchIndex%3D0%2Cc.atNoteStart%3Do%2Cc.passedEndOfNote%3D!1%2Cc.forceContinueAtStart%3Da%2Cc.forceContinueAtEnd%3Dr%7D%7Dfor(%3Bd.count()%3Ep%3B)%7Bconst%20s%3Dd.popBack()%2Ci%3De.channels%5Bt%5D%3Bif(s.instrumentIndex%3Ci.instruments.length%26%26!s.isOnLastTick)%7Bconst%20e%3Dthis.channels%5Bt%5D.instruments%5Bs.instrumentIndex%5D%3Bthis.releaseTone(e%2Cs)%7Delse%20this.freeTone(s)%7D%7Delse%20if(!e.getChannelIsMod(t))%7Blet%20h%3Dnull%2Cc%3Dnull%2Cp%3Dnull%3Bif(i%26%26null!%3Dr%26%26!n.muted%26%26(!this.isRecording%7C%7Cthis.liveInputChannel!%3Dt))%7Bfor(let%20e%3D0%3Be%3Cr.notes.length%3Be%2B%2B)if(r.notes%5Be%5D.end%3C%3Do)c%3Dr.notes%5Be%5D%3Belse%20if(r.notes%5Be%5D.start%3C%3Do%26%26r.notes%5Be%5D.end%3Eo)h%3Dr.notes%5Be%5D%3Belse%20if(r.notes%5Be%5D.start%3Eo)%7Bp%3Dr.notes%5Be%5D%3Bbreak%7Dnull!%3Dh%26%26(null!%3Dc%26%26c.end!%3Dh.start%26%26(c%3Dnull)%2Cnull!%3Dp%26%26p.start!%3Dh.end%26%26(p%3Dnull))%7Dif(null!%3Dr%26%26(!e.layeredInstruments%7C%7C1%3D%3Dn.instruments.length%7C%7Ce.patternInstruments%26%261%3D%3Dr.instruments.length))%7Bconst%20t%3De.patternInstruments%3Fr.instruments%5B0%5D%3A0%3Bif(null!%3Da.singleSeamlessInstrument%26%26a.singleSeamlessInstrument!%3Dt%26%26a.singleSeamlessInstrument%3Ca.instruments.length)%7Bconst%20e%3Da.instruments%5Ba.singleSeamlessInstrument%5D%2Cs%3Da.instruments%5Bt%5D%3Bfor(%3Be.activeTones.count()%3E0%3B)s.activeTones.pushFront(e.activeTones.popBack())%7Da.singleSeamlessInstrument%3Dt%7Delse%20a.singleSeamlessInstrument%3Dnull%3Bfor(let%20i%3D0%3Bi%3Cn.instruments.length%3Bi%2B%2B)%7Bconst%20f%3Da.instruments%5Bi%5D%2Cm%3Df.activeTones%3Blet%20d%3D0%3Bif(null!%3Dh%26%26(!e.patternInstruments%7C%7C-1!%3Dr.instruments.indexOf(i)))%7Bconst%20a%3Dn.instruments%5Bi%5D%3Blet%20y%3Dc%2Cv%3Dp%3Bconst%20g%3Du.partsPerBeat*e.beatsPerBar%2Cb%3Da.getTransition()%2CS%3Da.getChord()%3Blet%20M%3D!1%2Cw%3D!1%2Cx%3D0%2Ck%3D0%3Bif(0%3D%3Dh.start)%7Blet%20s%3Dnull%3D%3Dthis.prevBar%3Fnull%3Ae.getPattern(t%2Cthis.prevBar)%3Bif(null!%3Ds)%7Bconst%20t%3Ds.notes.length%3C%3D0%3Fnull%3As.notes%5Bs.notes.length-1%5D%3Bif(null!%3Dt%26%26t.end%3D%3Dg)%7Bconst%20a%3Dh.continuesLastPattern%26%26xe.adjacentNotesHaveMatchingPitches(t%2Ch)%2Co%3Dthis.adjacentPatternHasCompatibleInstrumentTransition(e%2Cn%2Cr%2Cs%2Ci%2Cb%2CS%2Ch%2Ct%2Ca)%3Bnull!%3Do%26%26(y%3Dt%2Cx%3Do.singleTone%3F1%3Ay.pitches.length%2CM%3Da)%7D%7D%7Delse%20null!%3Dy%26%26(x%3DS.singleTone%3F1%3Ay.pitches.length)%3Bif(h.end%3D%3Dg)%7Blet%20s%3Dnull%3D%3Dthis.nextBar%3Fnull%3Ae.getPattern(t%2Cthis.nextBar)%3Bif(null!%3Ds)%7Bconst%20t%3Ds.notes.length%3C%3D0%3Fnull%3As.notes%5B0%5D%3Bif(null!%3Dt%26%260%3D%3Dt.start)%7Bconst%20a%3Dt.continuesLastPattern%26%26xe.adjacentNotesHaveMatchingPitches(h%2Ct)%2Co%3Dthis.adjacentPatternHasCompatibleInstrumentTransition(e%2Cn%2Cr%2Cs%2Ci%2Cb%2CS%2Ch%2Ct%2Ca)%3Bnull!%3Do%26%26(v%3Dt%2Ck%3Do.singleTone%3F1%3Av.pitches.length%2Cw%3Da)%7D%7D%7Delse%20null!%3Dv%26%26(k%3DS.singleTone%3F1%3Av.pitches.length)%3Bif(S.singleTone)%7Bconst%20n%3Du.ticksPerPart*h.start%3D%3Dl%3Blet%20r%3Bif(m.count()%3C%3Dd)r%3Dthis.newTone()%2Cm.pushBack(r)%3Belse%20if(!n%7C%7C(b.isSeamless%7C%7Ca.clicklessTransition%7C%7CM)%26%26null!%3Dy)r%3Dm.get(d)%3Belse%7Bconst%20e%3Dm.get(d)%3Be.isOnLastTick%3Fthis.freeTone(e)%3Athis.releaseTone(f%2Ce)%2Cr%3Dthis.newTone()%2Cm.set(d%2Cr)%7Dd%2B%2B%3Bfor(let%20e%3D0%3Be%3Ch.pitches.length%3Be%2B%2B)r.pitches%5Be%5D%3Dh.pitches%5Be%5D%3Br.pitchCount%3Dh.pitches.length%2Cr.chordSize%3D1%2Cr.instrumentIndex%3Di%2Cr.note%3Dh%2Cr.noteStartPart%3Dh.start%2Cr.noteEndPart%3Dh.end%2Cr.prevNote%3Dy%2Cr.nextNote%3Dv%2Cr.prevNotePitchIndex%3D0%2Cr.nextNotePitchIndex%3D0%2Cr.atNoteStart%3Dn%2Cr.passedEndOfNote%3D!1%2Cr.forceContinueAtStart%3DM%2Cr.forceContinueAtEnd%3Dw%2Cthis.computeTone(e%2Ct%2Cs%2Cr%2C!1%2C!1)%7Delse%7Bconst%20n%3Da.getTransition()%3B(n.isSeamless%26%26!n.slides%26%260%3D%3DS.strumParts%7C%7CM)%26%26u.ticksPerPart*h.start%3D%3Dl%26%26null!%3Dy%26%26this.moveTonesIntoOrderedTempMatchedList(m%2Ch.pitches)%3Blet%20r%3D0%3Bfor(let%20a%3D0%3Ba%3Ch.pitches.length%3Ba%2B%2B)%7Blet%20c%3Dx%3Ea%3Fy%3Anull%2Cp%3Dh%2Cg%3Dk%3Ea%3Fv%3Anull%2Cb%3Dp.start%2Br%2CF%3D!1%3Bif(b%3Eo)%7Bif(!(m.count()%3Ea%26%26(n.isSeamless%7C%7CM)%26%26null!%3Dc))break%3Bg%3Dp%2Cp%3Dc%2Cc%3Dnull%2Cb%3Dp.start%2Br%2CF%3D!0%7Dlet%20P%3Dp.end%3B(n.isSeamless%7C%7CM)%26%26null!%3Dg%26%26(P%3DMath.min(u.partsPerBeat*this.song.beatsPerBar%2CP%2Br))%2C(n.continues%7C%7CM)%26%26null!%3Dc%7C%7C(r%2B%3DS.strumParts)%3Bconst%20I%3Du.ticksPerPart*b%3D%3Dl%3Blet%20q%3Bif(null!%3Dthis.tempMatchedPitchTones%5Bd%5D)q%3Dthis.tempMatchedPitchTones%5Bd%5D%2Cthis.tempMatchedPitchTones%5Bd%5D%3Dnull%2Cm.pushBack(q)%3Belse%20if(m.count()%3C%3Dd)q%3Dthis.newTone()%2Cm.pushBack(q)%3Belse%20if(!I%7C%7C(n.isSeamless%7C%7CM)%26%26null!%3Dc)q%3Dm.get(d)%3Belse%7Bconst%20e%3Dm.get(d)%3Be.isOnLastTick%3Fthis.freeTone(e)%3Athis.releaseTone(f%2Ce)%2Cq%3Dthis.newTone()%2Cm.set(d%2Cq)%7Dd%2B%2B%2Cq.pitches%5B0%5D%3Dp.pitches%5Ba%5D%2Cq.pitchCount%3D1%2Cq.chordSize%3Dp.pitches.length%2Cq.instrumentIndex%3Di%2Cq.note%3Dp%2Cq.noteStartPart%3Db%2Cq.noteEndPart%3DP%2Cq.prevNote%3Dc%2Cq.nextNote%3Dg%2Cq.prevNotePitchIndex%3Da%2Cq.nextNotePitchIndex%3Da%2Cq.atNoteStart%3DI%2Cq.passedEndOfNote%3DF%2Cq.forceContinueAtStart%3DM%26%26null!%3Dc%2Cq.forceContinueAtEnd%3Dw%26%26null!%3Dg%2Cthis.computeTone(e%2Ct%2Cs%2Cq%2C!1%2C!1)%7D%7D%7Dfor(%3Bm.count()%3Ed%3B)%7Bconst%20s%3Dm.popBack()%2Ci%3De.channels%5Bt%5D%3Bif(s.instrumentIndex%3Ci.instruments.length%26%26!s.isOnLastTick)%7Bconst%20e%3Da.instruments%5Bs.instrumentIndex%5D%3Bthis.releaseTone(e%2Cs)%7Delse%20this.freeTone(s)%7Dthis.clearTempMatchedPitchTones(d%2Cf)%7D%7D%7DclearTempMatchedPitchTones(e%2Ct)%7Bfor(let%20s%3De%3Bs%3Cthis.tempMatchedPitchTones.length%3Bs%2B%2B)%7Bconst%20e%3Dthis.tempMatchedPitchTones%5Bs%5D%3Bnull!%3De%26%26(e.isOnLastTick%3Fthis.freeTone(e)%3Athis.releaseTone(t%2Ce)%2Cthis.tempMatchedPitchTones%5Bs%5D%3Dnull)%7D%7DplayTone(e%2Ct%2Cs%2Ci)%7Bconst%20n%3Dthis.channels%5Be%5D.instruments%5Bi.instrumentIndex%5D%3Bnull!%3Dn.synthesizer%26%26n.synthesizer(this%2Ct%2Cs%2Ci%2Cn)%2Ci.envelopeComputer.clearEnvelopes()%7DplayModTone(e%2Ct%2Cs%2Ci%2Cn%2Ca%2Cr%2Co)%7Bconst%20l%3De.channels%5Bt%5D.instruments%5Ba.instrumentIndex%5D%3Bif(null!%3Da.note)%7Bconst%20e%3Dthis.getTicksIntoBar()%2Ct%3De%2Fu.ticksPerPart%2Cr%3D(e%2B1)%2Fu.ticksPerPart%2Co%3Dthis.tickSampleCountdown%2Ch%3Dt%2B(r-t)*(1-o%2Fs)%2Cc%3Dt%2B(r-t)*(1-(o-n)%2Fs)%2Cp%3Du.ticksPerPart*h%2Cf%3Du.ticksPerPart*c%2Cm%3Da.note.getEndPinIndex(this.getCurrentPart())%2Cd%3Da.note.pins%5Bm-1%5D%2Cy%3Da.note.pins%5Bm%5D%2Cv%3D(a.note.start%2Bd.time)*u.ticksPerPart%2Cg%3D(a.note.start%2By.time)*u.ticksPerPart%2Cb%3D(p-v)%2F(g-v)%2CS%3D(f-v)%2F(g-v)%3Ba.expression%3Dd.size%2B(y.size-d.size)*b%2Ca.expressionDelta%3Dd.size%2B(y.size-d.size)*S-a.expression%2Cxe.modSynth(this%2Ci%2Cn%2Ca%2Cl)%7D%7Dstatic%20computeChordExpression(e)%7Breturn%201%2F(.25*(e-1)%2B1)%7DcomputeTone(e%2Ct%2Cs%2Ci%2Cn%2Ca)%7Bconst%20r%3DMath.ceil(s)%2Co%3De.channels%5Bt%5D%2Cl%3Dthis.channels%5Bt%5D%2Ch%3Do.instruments%5Bi.instrumentIndex%5D%2Cc%3Dl.instruments%5Bi.instrumentIndex%5D%3Bc.awake%3D!0%2Cc.tonesAddedInThisTick%3D!0%2Cc.computed%7C%7Cc.compute(this%2Ch%2Cs%2Cr%2Ci%2Ct%2Ci.instrumentIndex)%3Bconst%20p%3Dh.getTransition()%2Cf%3Dh.getChord()%2Cd%3Df.singleTone%3F1%3Axe.computeChordExpression(i.chordSize)%2Cy%3De.getChannelIsNoise(t)%2Cv%3Dy%3Fu.noiseInterval%3A1%2Cg%3Du.ticksPerPart*s%2Fthis.samplesPerSecond%2CS%3D1%2Fthis.samplesPerSecond%2CM%3D1%2Fu.partsPerBeat%2Cw%3Dthis.getTicksIntoBar()%2CI%3Dw%2Fu.ticksPerPart%2Cq%3D(w%2B1)%2Fu.ticksPerPart%2CT%3Dthis.getCurrentPart()%3Blet%20D%3D1%3Bi.specialIntervalExpressionMult%3D1%3Blet%20O%3Da%2CR%3D0%2Cz%3D0%2CA%3D1%2CC%3D1%2CH%3Dd%2CE%3Dd%2CL%3D16%2CN%3Du.keys%5Be.key%5D.basePitch%2Bu.pitchesPerOctave*e.octave%2CG%3D1%2CB%3D48%3Bif(3%3D%3Dh.type)G%3Du.spectrumBaseExpression%2Cy%26%26(N%3Du.spectrumBasePitch%2CG*%3D2)%2CL%3Du.spectrumBasePitch%2CB%3D28%3Belse%20if(4%3D%3Dh.type)N%3Du.spectrumBasePitch%2CG%3Du.drumsetBaseExpression%2CL%3DN%3Belse%20if(2%3D%3Dh.type)N%3Dy%3Fu.chipNoises%5Bh.chipNoise%5D.basePitch%3AN%2Bu.chipNoises%5Bh.chipNoise%5D.basePitch-12%2CG%3Du.noiseBaseExpression%2CL%3DN%2CB%3Du.chipNoises%5Bh.chipNoise%5D.isSoft%3F24%3A60%3Belse%20if(1%3D%3Dh.type%7C%7C11%3D%3Dh.type)G%3Du.fmBaseExpression%3Belse%20if(0%3D%3Dh.type)G%3Du.chipBaseExpression%2Cu.chipWaves%5Bh.chipWave%5D.isCustomSampled%3Fu.chipWaves%5Bh.chipWave%5D.isPercussion%3FN%3D-12*Math.log2(u.chipWaves%5Bh.chipWave%5D.samples.length%2Fu.chipWaves%5Bh.chipWave%5D.sampleRate)-84.37-(-60%2Bu.chipWaves%5Bh.chipWave%5D.rootKey)%3AN%2B%3D-12*Math.log2(u.chipWaves%5Bh.chipWave%5D.samples.length%2Fu.chipWaves%5Bh.chipWave%5D.sampleRate)-96.37-(-60%2Bu.chipWaves%5Bh.chipWave%5D.rootKey)%3Au.chipWaves%5Bh.chipWave%5D.isSampled%26%26!u.chipWaves%5Bh.chipWave%5D.isPercussion%3FN%3DN-63%2Bu.chipWaves%5Bh.chipWave%5D.extraSampleDetune%3Au.chipWaves%5Bh.chipWave%5D.isSampled%26%26u.chipWaves%5Bh.chipWave%5D.isPercussion%26%26(N%3D-51%2Bu.chipWaves%5Bh.chipWave%5D.extraSampleDetune)%3Belse%20if(9%3D%3Dh.type)G%3Du.chipBaseExpression%3Belse%20if(5%3D%3Dh.type)G%3Du.harmonicsBaseExpression%3Belse%20if(6%3D%3Dh.type)G%3Du.pwmBaseExpression%3Belse%20if(8%3D%3Dh.type)G%3Du.supersawBaseExpression%3Belse%20if(7%3D%3Dh.type)G%3Du.pickedStringBaseExpression%3Belse%7Bif(10!%3Dh.type)throw%20new%20Error(%22Unknown%20instrument%20type%20in%20computeTone.%22)%3BG%3D1%2CL%3D0%2CB%3D1%2CN%3D0%7Dif((i.atNoteStart%26%26!p.isSeamless%26%26!i.forceContinueAtStart%7C%7Ci.freshlyAllocated)%26%26(i.reset()%2C0%3D%3Dh.type%26%26h.isUsingAdvancedLoopControls))%7Bconst%20e%3Du.rawRawChipWaves%5Bh.chipWave%5D.samples.length-1%2Ct%3Dh.chipWaveStartOffset%2Fe%2Cs%3D.999999999999999%3Bfor(let%20e%3D0%3Be%3Cu.maxPitchOrOperatorCount%3Be%2B%2B)i.phases%5Be%5D%3Dh.chipWavePlayBackwards%3FMath.max(0%2CMath.min(s%2Ct))%3AMath.max(0%2Ct)%2Ci.directions%5Be%5D%3Dh.chipWavePlayBackwards%3F-1%3A1%2Ci.chipWaveCompletions%5Be%5D%3D0%2Ci.chipWavePrevWaves%5Be%5D%3D0%2Ci.chipWaveCompletionsLastWave%5Be%5D%3D0%7Di.freshlyAllocated%3D!1%3Bfor(let%20e%3D0%3Be%3Cu.maxPitchOrOperatorCount%3Be%2B%2B)i.phaseDeltas%5Be%5D%3D0%2Ci.phaseDeltaScales%5Be%5D%3D0%2Ci.operatorExpressions%5Be%5D%3D0%2Ci.operatorExpressionDeltas%5Be%5D%3D0%3Bi.expression%3D0%2Ci.expressionDelta%3D0%3Bfor(let%20e%3D0%3Be%3C(11%3D%3Dh.type%3F6%3Au.operatorCount)%3Be%2B%2B)i.operatorWaves%5Be%5D%3Dxe.getOperatorWave(h.operators%5Be%5D.waveform%2Ch.operators%5Be%5D.pulseWidth)%3Bif(n)%7Bconst%20e%3Di.ticksSinceReleased%2Ct%3Di.ticksSinceReleased%2B1%3BR%3Dz%3Di.lastInterval%3Bconst%20s%3DMath.abs(h.getFadeOutTicks())%3BA%3Dxe.noteSizeToVolumeMult((1-e%2Fs)*u.noteSizeMax)%2CC%3Dxe.noteSizeToVolumeMult((1-t%2Fs)*u.noteSizeMax)%2Ca%26%26(C%3D0)%2Ci.ticksSinceReleased%2B1%3E%3Ds%26%26(O%3D!0)%7Delse%20if(null%3D%3Di.note)A%3DC%3D1%2Ci.lastInterval%3D0%2Ci.ticksSinceReleased%3D0%2Ci.liveInputSamplesHeld%2B%3Dr%3Belse%7Bconst%20e%3Di.note%2Ct%3Di.nextNote%2Cs%3Di.noteStartPart%2Cn%3Di.noteEndPart%2Ca%3De.getEndPinIndex(T)%2Cr%3De.pins%5Ba-1%5D%2Co%3De.pins%5Ba%5D%2Cl%3Ds*u.ticksPerPart%2Cc%3Dn*u.ticksPerPart%2Cf%3D(e.start%2Br.time)*u.ticksPerPart%2Cm%3D(e.start%2Bo.time)*u.ticksPerPart%3Bi.ticksSinceReleased%3D0%3Bconst%20d%3DT*u.ticksPerPart%2Bthis.tick%2Cy%3Dd%2B1%2Cv%3Dd-l%2Cg%3Dy-l%2Cb%3DMath.min(1%2C(d-f)%2F(m-f))%2CS%3DMath.min(1%2C(y-f)%2F(m-f))%3Bif(A%3D1%2CC%3D1%2CR%3Dr.interval%2B(o.interval-r.interval)*b%2Cz%3Dr.interval%2B(o.interval-r.interval)*S%2Ci.lastInterval%3Dz%2C!p.isSeamless%26%26!i.forceContinueAtEnd%7C%7Cnull%3D%3Dt)%7Bconst%20e%3D-h.getFadeOutTicks()%3Bif(e%3E0)%7Bconst%20t%3Dc-l%3BA*%3DMath.min(1%2C(t-v)%2Fe)%2CC*%3DMath.min(1%2C(t-g)%2Fe)%2Cy%3E%3Dl%2Bt%26%26(O%3D!0)%7D%7D%7Di.isOnLastTick%3DO%3Blet%20W%2C%24%2Cj%3Dh.noteFilter%3Bif(h.noteFilterType)%7Bconst%20e%3Dh.noteFilter%3Bnull%3D%3Dh.noteSubFilters%5B1%5D%26%26(h.noteSubFilters%5B1%5D%3Dnew%20fe)%3Bconst%20s%3Dh.noteSubFilters%5B1%5D%3Blet%20n%3Dh.noteFilterSimpleCut%2Ca%3Dh.noteFilterSimplePeak%2Cr%3Dh.noteFilterSimpleCut%2Co%3Dh.noteFilterSimplePeak%2Cl%3D!1%3Bthis.isModActive(u.modulators.dictionary%5B%22note%20filt%20cut%22%5D.index%2Ct%2Ci.instrumentIndex)%26%26(n%3Dthis.getModValue(u.modulators.dictionary%5B%22note%20filt%20cut%22%5D.index%2Ct%2Ci.instrumentIndex%2C!1)%2Cr%3Dthis.getModValue(u.modulators.dictionary%5B%22note%20filt%20cut%22%5D.index%2Ct%2Ci.instrumentIndex%2C!0)%2Cl%3D!0)%2Cthis.isModActive(u.modulators.dictionary%5B%22note%20filt%20peak%22%5D.index%2Ct%2Ci.instrumentIndex)%26%26(a%3Dthis.getModValue(u.modulators.dictionary%5B%22note%20filt%20peak%22%5D.index%2Ct%2Ci.instrumentIndex%2C!1)%2Co%3Dthis.getModValue(u.modulators.dictionary%5B%22note%20filt%20peak%22%5D.index%2Ct%2Ci.instrumentIndex%2C!0)%2Cl%3D!0)%2Ce.convertLegacySettingsForSynth(n%2Ca%2C!l)%2Cs.convertLegacySettingsForSynth(r%2Co%2C!l)%2CW%3De.controlPoints%5B0%5D%2C%24%3Ds.controlPoints%5B0%5D%2Ch.noteFilter%3De%2Ch.tmpNoteFilterStart%3De%7Dconst%20U%3Di.envelopeComputer%3Blet%20_%3Du.arpSpeedScale%5Bh.envelopeSpeed%5D%3Bthis.isModActive(u.modulators.dictionary%5B%22envelope%20speed%22%5D.index%2Ct%2Ci.instrumentIndex)%26%26(_%3DMath.max(0%2CMath.min(u.arpSpeedScale.length-1%2Cthis.getModValue(u.modulators.dictionary%5B%22envelope%20speed%22%5D.index%2Ct%2Ci.instrumentIndex%2C!1)))%2C_%3DNumber.isInteger(_)%3Fu.arpSpeedScale%5B_%5D%3A(1-_%251)*u.arpSpeedScale%5BMath.floor(_)%5D%2B_%251*u.arpSpeedScale%5BMath.ceil(_)%5D)%2CU.computeEnvelopes(h%2CT%2Cc.envelopeTime%2Cu.ticksPerPart*I%2Cs%2Fthis.samplesPerSecond%2Ci%2C_)%3Bconst%20K%3Di.envelopeComputer.envelopeStarts%2CJ%3Di.envelopeComputer.envelopeEnds%3Bif(h.noteFilter%3Dj%2Cnull!%3Di.note%26%26p.slides)%7Bconst%20e%3Di.prevNote%2Ct%3Di.nextNote%3Bif(null!%3De)%7Bconst%20t%3De.pitches%5Bi.prevNotePitchIndex%5D%2Be.pins%5Be.pins.length-1%5D.interval-i.pitches%5B0%5D%3Bif(U.prevSlideStart%26%26(R%2B%3Dt*U.prevSlideRatioStart)%2CU.prevSlideEnd%26%26(z%2B%3Dt*U.prevSlideRatioEnd)%2C!f.singleTone)%7Bconst%20t%3De.pitches.length-i.chordSize%3BU.prevSlideStart%26%26(H%3Dxe.computeChordExpression(i.chordSize%2Bt*U.prevSlideRatioStart))%2CU.prevSlideEnd%26%26(E%3Dxe.computeChordExpression(i.chordSize%2Bt*U.prevSlideRatioEnd))%7D%7Dif(null!%3Dt)%7Bconst%20e%3Dt.pitches%5Bi.nextNotePitchIndex%5D-(i.pitches%5B0%5D%2Bi.note.pins%5Bi.note.pins.length-1%5D.interval)%3Bif(U.nextSlideStart%26%26(R%2B%3De*U.nextSlideRatioStart)%2CU.nextSlideEnd%26%26(z%2B%3De*U.nextSlideRatioEnd)%2C!f.singleTone)%7Bconst%20e%3Dt.pitches.length-i.chordSize%3BU.nextSlideStart%26%26(H%3Dxe.computeChordExpression(i.chordSize%2Be*U.nextSlideRatioStart))%2CU.nextSlideEnd%26%26(E%3Dxe.computeChordExpression(i.chordSize%2Be*U.nextSlideRatioEnd))%7D%7D%7Dif(x(h.effects))%7Blet%20e%3Du.justIntonationSemitones%5Bh.pitchShift%5D%2Fv%2Cs%3D1%2Cn%3D1%3Bthis.isModActive(u.modulators.dictionary%5B%22pitch%20shift%22%5D.index%2Ct%2Ci.instrumentIndex)%26%26(e%3Du.justIntonationSemitones%5Bu.justIntonationSemitones.length-1%5D%2Cs%3Dthis.getModValue(u.modulators.dictionary%5B%22pitch%20shift%22%5D.index%2Ct%2Ci.instrumentIndex%2C!1)%2Fu.pitchShiftCenter%2Cn%3Dthis.getModValue(u.modulators.dictionary%5B%22pitch%20shift%22%5D.index%2Ct%2Ci.instrumentIndex%2C!0)%2Fu.pitchShiftCenter)%3BR%2B%3De*K%5B18%5D*s%2Cz%2B%3De*J%5B18%5D*n%7Dif(k(h.effects)%7C%7Cthis.isModActive(u.modulators.dictionary%5B%22song%20detune%22%5D.index%2Ct%2Ci.instrumentIndex))%7Bconst%20e%3DK%5B19%5D%2Cs%3DJ%5B19%5D%3Blet%20n%3Dh.detune%2Ca%3Dh.detune%3Bthis.isModActive(u.modulators.dictionary.detune.index%2Ct%2Ci.instrumentIndex)%26%26(n%3Dthis.getModValue(u.modulators.dictionary.detune.index%2Ct%2Ci.instrumentIndex%2C!1)%2Bu.detuneCenter%2Ca%3Dthis.getModValue(u.modulators.dictionary.detune.index%2Ct%2Ci.instrumentIndex%2C!0)%2Bu.detuneCenter)%2Cthis.isModActive(u.modulators.dictionary%5B%22song%20detune%22%5D.index%2Ct%2Ci.instrumentIndex)%26%26(n%2B%3D4*this.getModValue(u.modulators.dictionary%5B%22song%20detune%22%5D.index%2Ct%2Ci.instrumentIndex%2C!1)%2Ca%2B%3D4*this.getModValue(u.modulators.dictionary%5B%22song%20detune%22%5D.index%2Ct%2Ci.instrumentIndex%2C!0))%2CR%2B%3Dxe.detuneToCents(n)*e*u.pitchesPerOctave%2F1200%2Cz%2B%3Dxe.detuneToCents(a)*s*u.pitchesPerOctave%2F1200%7Dif(F(h.effects))%7Blet%20e%2Cs%2Cn%2Ca%3Bif(h.vibrato%3D%3Du.vibratos.length%3F(e%3D2*h.vibratoDelay%2Ch.vibratoDelay%3D%3Du.modulators.dictionary%5B%22vibrato%20delay%22%5D.maxRawVol%26%26(e%3DNumber.POSITIVE_INFINITY)%2Cs%3Dh.vibratoDepth%2Cn%3Ds)%3A(e%3Du.vibratos%5Bh.vibrato%5D.delayTicks%2Cs%3Du.vibratos%5Bh.vibrato%5D.amplitude%2Cn%3Ds)%2Cthis.isModActive(u.modulators.dictionary%5B%22vibrato%20delay%22%5D.index%2Ct%2Ci.instrumentIndex)%26%26(e%3D2*this.getModValue(u.modulators.dictionary%5B%22vibrato%20delay%22%5D.index%2Ct%2Ci.instrumentIndex%2C!1)%2Ce%3D%3D2*u.modulators.dictionary%5B%22vibrato%20delay%22%5D.maxRawVol%26%26(e%3DNumber.POSITIVE_INFINITY))%2Cthis.isModActive(u.modulators.dictionary%5B%22vibrato%20depth%22%5D.index%2Ct%2Ci.instrumentIndex)%26%26(s%3Dthis.getModValue(u.modulators.dictionary%5B%22vibrato%20depth%22%5D.index%2Ct%2Ci.instrumentIndex%2C!1)%2F25%2Cn%3Dthis.getModValue(u.modulators.dictionary%5B%22vibrato%20depth%22%5D.index%2Ct%2Ci.instrumentIndex%2C!0)%2F25)%2Cnull!%3Di.prevVibrato)a%3Di.prevVibrato%3Belse%7Bif(a%3Ds*xe.getLFOAmplitude(h%2Cg*c.vibratoTime)*K%5B20%5D%2Ce%3E0)%7Bconst%20t%3De-U.noteTicksStart%3Ba*%3DMath.max(0%2CMath.min(1%2C1-t%2F2))%7D%7Dlet%20r%3Dxe.getLFOAmplitude(h%2Cg*c.nextVibratoTime)%3Bconst%20o%3DJ%5B20%5D%3Bif(10!%3Dh.type)%7Blet%20t%3Dn*r*o%3Bif(e%3E0)%7Bconst%20s%3De-U.noteTicksEnd%3Bt*%3DMath.max(0%2CMath.min(1%2C1-s%2F2))%7Di.prevVibrato%3Dt%2CR%2B%3Da%2Cz%2B%3Dt%7D%7Dif(!p.isSeamless%26%26!i.forceContinueAtStart%7C%7Cnull%3D%3Di.prevNote)%7Bconst%20e%3Dh.getFadeInSeconds()%3Be%3E0%26%26(A*%3DMath.min(1%2CU.noteSecondsStartUnscaled%2Fe)%2CC*%3DMath.min(1%2CU.noteSecondsEndUnscaled%2Fe))%7D4%3D%3Dh.type%26%26null%3D%3Di.drumsetPitch%26%26(i.drumsetPitch%3Di.pitches%5B0%5D%2Cnull!%3Di.note%26%26(i.drumsetPitch%2B%3Di.note.pickMainInterval())%2Ci.drumsetPitch%3DMath.max(0%2CMath.min(u.drumCount-1%2Ci.drumsetPitch)))%3Blet%20Q%3DU.lowpassCutoffDecayVolumeCompensation%3Bif(P(h.effects))%7Bconst%20e%3DK%5B1%5D%2Ct%3DJ%5B1%5D%3Bif(h.noteFilterType)%7Bconst%20s%3DK%5B21%5D%2Cn%3DJ%5B21%5D%2Ca%3DK%5B29%5D%2Co%3DJ%5B29%5D%3BW.toCoefficients(xe.tempFilterStartCoefficients%2Cthis.samplesPerSecond%2Ce*s%2Ca)%2C%24.toCoefficients(xe.tempFilterEndCoefficients%2Cthis.samplesPerSecond%2Ct*n%2Co)%2Ci.noteFilters.length%3C1%26%26(i.noteFilters%5B0%5D%3Dnew%20V)%2Ci.noteFilters%5B0%5D.loadCoefficientsWithGradient(xe.tempFilterStartCoefficients%2Cxe.tempFilterEndCoefficients%2C1%2Fr%2C0%3D%3DW.type)%2CQ*%3DW.getVolumeCompensationMult()%2Ci.noteFilterCount%3D1%7Delse%7Bconst%20s%3Dnull!%3Dh.tmpNoteFilterStart%3Fh.tmpNoteFilterStart%3Ah.noteFilter%3Bfor(let%20n%3D0%3Bn%3Cs.controlPointCount%3Bn%2B%2B)%7Bconst%20a%3DK%5B21%2Bn%5D%2Co%3DJ%5B21%2Bn%5D%2Cl%3DK%5B29%2Bn%5D%2Cu%3DJ%5B29%2Bn%5D%3Blet%20c%3Ds.controlPoints%5Bn%5D%3Bconst%20p%3Dnull!%3Dh.tmpNoteFilterEnd%26%26null!%3Dh.tmpNoteFilterEnd.controlPoints%5Bn%5D%3Fh.tmpNoteFilterEnd.controlPoints%5Bn%5D%3As.controlPoints%5Bn%5D%3Bc.type!%3Dp.type%26%26(c%3Dp)%2Cc.toCoefficients(xe.tempFilterStartCoefficients%2Cthis.samplesPerSecond%2Ce*a%2Cl)%2Cp.toCoefficients(xe.tempFilterEndCoefficients%2Cthis.samplesPerSecond%2Ct*o%2Cu)%2Ci.noteFilters.length%3C%3Dn%26%26(i.noteFilters%5Bn%5D%3Dnew%20V)%2Ci.noteFilters%5Bn%5D.loadCoefficientsWithGradient(xe.tempFilterStartCoefficients%2Cxe.tempFilterEndCoefficients%2C1%2Fr%2C0%3D%3Dc.type)%2CQ*%3Dc.getVolumeCompensationMult()%7Di.noteFilterCount%3Ds.controlPointCount%7D%7Delse%20i.noteFilterCount%3D0%3Bif(4%3D%3Dh.type)%7Bconst%20e%3Dh.getDrumsetEnvelope(i.drumsetPitch)%3BQ*%3Dbe.getLowpassCutoffDecayVolumeCompensation(e)%3Blet%20t%3Dbe.computeEnvelope(e%2CU.noteSecondsStart%2CM*I%2CU.noteSizeStart)%3Bif(U.prevSlideStart)%7Bt%2B%3D(be.computeEnvelope(e%2CU.prevNoteSecondsStart%2CM*I%2CU.prevNoteSize)-t)*U.prevSlideRatioStart%7Dif(U.nextSlideStart)%7Bt%2B%3D(be.computeEnvelope(e%2C0%2CM*I%2CU.nextNoteSize)-t)*U.nextSlideRatioStart%7Dlet%20s%3Dt%3Bif(0%3D%3Dh.discreteEnvelope)%7Bif(s%3Dbe.computeEnvelope(e%2CU.noteSecondsEnd%2CM*q%2CU.noteSizeEnd)%2CU.prevSlideEnd)%7Bs%2B%3D(be.computeEnvelope(e%2CU.prevNoteSecondsEnd%2CM*q%2CU.prevNoteSize)-s)*U.prevSlideRatioEnd%7Dif(U.nextSlideEnd)%7Bs%2B%3D(be.computeEnvelope(e%2C0%2CM*q%2CU.nextNoteSize)-s)*U.nextSlideRatioEnd%7D%7Dconst%20n%3Dthis.tempDrumSetControlPoint%3Bn.type%3D0%2Cn.gain%3Dpe.getRoundedSettingValueFromLinearGain(.5)%2Cn.freq%3Dpe.getRoundedSettingValueFromHz(8e3)%2Cn.toCoefficients(xe.tempFilterStartCoefficients%2Cthis.samplesPerSecond%2Ct*(1%2Bt)%2C1)%2Cn.toCoefficients(xe.tempFilterEndCoefficients%2Cthis.samplesPerSecond%2Cs*(1%2Bs)%2C1)%2Ci.noteFilters.length%3D%3Di.noteFilterCount%26%26(i.noteFilters%5Bi.noteFilterCount%5D%3Dnew%20V)%2Ci.noteFilters%5Bi.noteFilterCount%5D.loadCoefficientsWithGradient(xe.tempFilterStartCoefficients%2Cxe.tempFilterEndCoefficients%2C1%2Fr%2C!0)%2Ci.noteFilterCount%2B%2B%7Dif(Q%3DMath.min(3%2CQ)%2C1%3D%3Dh.type%7C%7C11%3D%3Dh.type)%7Blet%20e%3D1%2Cs%3D0%2Cn%3D0%3Bconst%20a%3Df.arpeggiates%3Bif(i.pitchCount%3E1%26%26a)%7Bconst%20e%3DMath.floor(c.arpTime%2Fu.ticksPerArpeggio)%3Bn%3Di.pitches%5Bb(i.pitchCount%2Ch.fastTwoNoteArp%2Ce)%5D-i.pitches%5B0%5D%7Dconst%20o%3D11%3D%3Dh.type%3Fh.customAlgorithm.carrierCount%3Au.algorithms%5Bh.algorithm%5D.carrierCount%3Bfor(let%20l%3D0%3Bl%3C(11%3D%3Dh.type%3F6%3Au.operatorCount)%3Bl%2B%2B)%7Bconst%20c%3D11%3D%3Dh.type%3Fh.customAlgorithm.associatedCarrier%5Bl%5D-1%3Au.algorithms%5Bh.algorithm%5D.associatedCarrier%5Bl%5D-1%2Cp%3Di.pitches%5Ba%3F0%3Al%3Ci.pitchCount%3Fl%3Ac%3Ci.pitchCount%3Fc%3A0%5D%2Cf%3Du.operatorFrequencies%5Bh.operators%5Bl%5D.frequency%5D.mult%2Cm%3Du.operatorCarrierInterval%5Bc%5D%2Bn%2Cd%3DN%2B(p%2BR)*v%2Bm%2Cy%3DN%2B(p%2Bz)*v%2Bm%2Cg%3Dde.frequencyFromPitch(d)%2Cb%3Dde.frequencyFromPitch(y)%2CM%3Du.operatorFrequencies%5Bh.operators%5Bl%5D.frequency%5D.hzOffset%2Cw%3Df*g%2BM%2Cx%3Df*b%2BM%2Ck%3DK%5B5%2Bl%5D%2CF%3DJ%5B5%2Bl%5D%3Blet%20P%2CI%3B1!%3Dk%7C%7C1!%3DF%3F(P%3DMath.pow(2%2CMath.log2(w%2Fg)*k)*g%2CI%3DMath.pow(2%2CMath.log2(x%2Fb)*F)*b)%3A(P%3Dw%2CI%3Dx)%2Ci.phaseDeltas%5Bl%5D%3DP*S%2Ci.phaseDeltaScales%5Bl%5D%3DMath.pow(I%2FP%2C1%2Fr)%3Blet%20q%3Dh.operators%5Bl%5D.amplitude%2CT%3Dh.operators%5Bl%5D.amplitude%3Bl%3C4%3Fthis.isModActive(u.modulators.dictionary%5B%22fm%20slider%201%22%5D.index%2Bl%2Ct%2Ci.instrumentIndex)%26%26(q*%3Dthis.getModValue(u.modulators.dictionary%5B%22fm%20slider%201%22%5D.index%2Bl%2Ct%2Ci.instrumentIndex%2C!1)%2F15%2CT*%3Dthis.getModValue(u.modulators.dictionary%5B%22fm%20slider%201%22%5D.index%2Bl%2Ct%2Ci.instrumentIndex%2C!0)%2F15)%3Athis.isModActive(u.modulators.dictionary%5B%22fm%20slider%205%22%5D.index%2Bl-4%2Ct%2Ci.instrumentIndex)%26%26(q*%3Dthis.getModValue(u.modulators.dictionary%5B%22fm%20slider%205%22%5D.index%2Bl-4%2Ct%2Ci.instrumentIndex%2C!1)%2F15%2CT*%3Dthis.getModValue(u.modulators.dictionary%5B%22fm%20slider%205%22%5D.index%2Bl-4%2Ct%2Ci.instrumentIndex%2C!0)%2F15)%3Bconst%20D%3Dxe.operatorAmplitudeCurve(q)%2CO%3Dxe.operatorAmplitudeCurve(T)%3Blet%20A%3DD*u.operatorFrequencies%5Bh.operators%5Bl%5D.frequency%5D.amplitudeSign%2CC%3DO*u.operatorFrequencies%5Bh.operators%5Bl%5D.frequency%5D.amplitudeSign%3Bif(l%3Co)%7Blet%20e%3Be%3Dnull!%3Di.prevPitchExpressions%5Bl%5D%3Fi.prevPitchExpressions%5Bl%5D%3AMath.pow(2%2C-(d-L)%2FB)%3Bconst%20t%3DMath.pow(2%2C-(y-L)%2FB)%3Bi.prevPitchExpressions%5Bl%5D%3Dt%2CA*%3De%2CC*%3Dt%2Cs%2B%3DO%7Delse%20A*%3D1.5*u.sineWaveLength%2CC*%3D1.5*u.sineWaveLength%2Ce*%3D1-Math.min(1%2Ch.operators%5Bl%5D.amplitude%2F15)%3Bif(A*%3DK%5B11%2Bl%5D%2CC*%3DJ%5B11%2Bl%5D%2Cthis.isModActive(u.modulators.dictionary%5B%22note%20volume%22%5D.index%2Ct%2Ci.instrumentIndex))%7Bconst%20e%3Dthis.getModValue(u.modulators.dictionary%5B%22note%20volume%22%5D.index%2Ct%2Ci.instrumentIndex%2C!1)%2Cs%3Dthis.getModValue(u.modulators.dictionary%5B%22note%20volume%22%5D.index%2Ct%2Ci.instrumentIndex%2C!0)%3BA*%3De%3C%3D0%3F(e%2Bu.volumeRange%2F2)%2F(u.volumeRange%2F2)%3Axe.instrumentVolumeToVolumeMult(e)%2CC*%3Ds%3C%3D0%3F(s%2Bu.volumeRange%2F2)%2F(u.volumeRange%2F2)%3Axe.instrumentVolumeToVolumeMult(s)%7Di.operatorExpressions%5Bl%5D%3DA%2Ci.operatorExpressionDeltas%5Bl%5D%3D(C-A)%2Fr%7De*%3D(Math.pow(2%2C2-1.4*h.feedbackAmplitude%2F15)-1)%2F3%2Ce*%3D1-Math.min(1%2CMath.max(0%2Cs-1)%2F2)%2Ce%3D1%2B3*e%3Bconst%20l%3DG*e*Q*A*H*K%5B0%5D%2Cp%3DG*e*Q*C*E*J%5B0%5D%3Bi.expression%3Dl%2Ci.expressionDelta%3D(p-l)%2Fr%3Blet%20m%3Dh.feedbackAmplitude%2Cd%3Dh.feedbackAmplitude%3Bthis.isModActive(u.modulators.dictionary%5B%22fm%20feedback%22%5D.index%2Ct%2Ci.instrumentIndex)%26%26(m*%3Dthis.getModValue(u.modulators.dictionary%5B%22fm%20feedback%22%5D.index%2Ct%2Ci.instrumentIndex%2C!1)%2F15%2Cd*%3Dthis.getModValue(u.modulators.dictionary%5B%22fm%20feedback%22%5D.index%2Ct%2Ci.instrumentIndex%2C!0)%2F15)%3Blet%20y%3D.3*u.sineWaveLength*m%2F15%3Bconst%20g%3D.3*u.sineWaveLength*d%2F15%3Blet%20M%3Dy*K%5B17%5D%2Cw%3Dg*J%5B17%5D%3Bi.feedbackMult%3DM%2Ci.feedbackDelta%3D(w-M)%2Fr%7Delse%7Bconst%20e%3DMath.pow(2%2C(z-R)*v%2F12)%2Cs%3DMath.pow(e%2C1%2Fr)%3Blet%20n%3Di.pitches%5B0%5D%3Bif(i.pitchCount%3E1%26%26(f.arpeggiates%7C%7Cf.customInterval))%7Bconst%20e%3DMath.floor(c.arpTime%2Fu.ticksPerArpeggio)%3Bif(f.customInterval)%7Bconst%20t%3Di.pitches%5B1%2Bb(i.pitchCount-1%2Ch.fastTwoNoteArp%2Ce)%5D-i.pitches%5B0%5D%3BD%3DMath.pow(2%2Ct%2F12)%2Ci.specialIntervalExpressionMult%3DMath.pow(2%2C-t%2FB)%7Delse%20n%3Di.pitches%5Bb(i.pitchCount%2Ch.fastTwoNoteArp%2Ce)%5D%7Dconst%20a%3DN%2B(n%2BR)*v%2Co%3DN%2B(n%2Bz)*v%3Blet%20l%3Bl%3Dnull!%3Di.prevPitchExpressions%5B0%5D%3Fi.prevPitchExpressions%5B0%5D%3AMath.pow(2%2C-(a-L)%2FB)%3Bconst%20d%3DMath.pow(2%2C-(o-L)%2FB)%3Bi.prevPitchExpressions%5B0%5D%3Dd%3Blet%20y%3DG*Q%3Bif(2%3D%3Dh.type%26%26(y*%3Du.chipNoises%5Bh.chipNoise%5D.expression)%2C0%3D%3Dh.type%26%26(y*%3Du.chipWaves%5Bh.chipWave%5D.expression)%2C6%3D%3Dh.type)%7Bconst%20e%3Dm(h.pulseWidth)%3Blet%20s%3De%2Cn%3De%3Bthis.isModActive(u.modulators.dictionary%5B%22pulse%20width%22%5D.index%2Ct%2Ci.instrumentIndex)%26%26(s%3Dthis.getModValue(u.modulators.dictionary%5B%22pulse%20width%22%5D.index%2Ct%2Ci.instrumentIndex%2C!1)%2F(2*u.pulseWidthRange)%2Cn%3Dthis.getModValue(u.modulators.dictionary%5B%22pulse%20width%22%5D.index%2Ct%2Ci.instrumentIndex%2C!0)%2F(2*u.pulseWidthRange))%3Bconst%20a%3Ds*K%5B2%5D%2Co%3Dn*J%5B2%5D%3Bi.pulseWidth%3Da%2Ci.pulseWidthDelta%3D(o-a)%2Fr%3Blet%20l%3Dh.decimalOffset%3Bthis.isModActive(u.modulators.dictionary%5B%22decimal%20offset%22%5D.index%2Ct%2Ci.instrumentIndex)%26%26(l%3Dthis.getModValue(u.modulators.dictionary%5B%22decimal%20offset%22%5D.index%2Ct%2Ci.instrumentIndex%2C!1))%3Bconst%20c%3Dl*K%5B37%5D%3Bi.decimalOffset%3Dc%2Ci.pulseWidth-%3Di.decimalOffset%2F1e4%7Dif(7%3D%3Dh.type)%7Blet%20e%3Dh.stringSustain%2Cs%3Dh.stringSustain%3Bthis.isModActive(u.modulators.dictionary.sustain.index%2Ct%2Ci.instrumentIndex)%26%26(e%3Dthis.getModValue(u.modulators.dictionary.sustain.index%2Ct%2Ci.instrumentIndex%2C!1)%2Cs%3Dthis.getModValue(u.modulators.dictionary.sustain.index%2Ct%2Ci.instrumentIndex%2C!0))%2Ci.stringSustainStart%3De%2Ci.stringSustainEnd%3Ds%2Cy*%3DMath.pow(2%2C.7*(1-e%2F(u.stringSustainRange-1)))%7Dconst%20g%3Dde.frequencyFromPitch(a)%3Bif(0%3D%3Dh.type%7C%7C9%3D%3Dh.type%7C%7C5%3D%3Dh.type%7C%7C7%3D%3Dh.type%7C%7C3%3D%3Dh.type%7C%7C6%3D%3Dh.type%7C%7C2%3D%3Dh.type)%7Bconst%20e%3Dh.unisonVoices%2Ct%3Dh.unisonSpread%2Cn%3Dh.unisonOffset%3By*%3Dh.unisonExpression*(7%3D%3Dh.type%3F1%3Ae%2F2)%3Bconst%20a%3DK%5B4%5D%2Co%3DJ%5B4%5D%2Cl%3DMath.pow(2%2C(n%2Bt)*a%2F12)%2Cu%3DMath.pow(2%2C(n%2Bt)*o%2F12)%2Cc%3DMath.pow(2%2C(n-t)*a%2F12)*D%2Cp%3DMath.pow(2%2C(n-t)*o%2F12)*D%3Bi.phaseDeltas%5B0%5D%3Dg*S*l%2Ci.phaseDeltas%5B1%5D%3Dg*S*c%2Ci.phaseDeltaScales%5B0%5D%3Ds*Math.pow(u%2Fl%2C1%2Fr)%2Ci.phaseDeltaScales%5B1%5D%3Ds*Math.pow(p%2Fc%2C1%2Fr)%7Delse%20i.phaseDeltas%5B0%5D%3Dg*S%2Ci.phaseDeltaScales%5B0%5D%3Ds%3Blet%20M%3D1%2Cw%3D1%3Bif(8%3D%3Dh.type)%7Bconst%20s%3D1%2FMath.sqrt(u.supersawVoiceCount)%3Blet%20n%3Dh.supersawDynamism%2Fu.supersawDynamismMax%2Ca%3Dh.supersawDynamism%2Fu.supersawDynamismMax%3Bthis.isModActive(u.modulators.dictionary.dynamism.index%2Ct%2Ci.instrumentIndex)%26%26(n%3Dthis.getModValue(u.modulators.dictionary.dynamism.index%2Ct%2Ci.instrumentIndex%2C!1)%2Fu.supersawDynamismMax%2Ca%3Dthis.getModValue(u.modulators.dictionary.dynamism.index%2Ct%2Ci.instrumentIndex%2C!0)%2Fu.supersawDynamismMax)%3Bconst%20o%3D1-Math.pow(Math.max(0%2C1-n*K%5B38%5D)%2C.2)%2Cl%3D1-Math.pow(Math.max(0%2C1-a*J%5B38%5D)%2C.2)%2Cc%3DMath.pow(2%2CMath.log2(s)*o)%2Cp%3DMath.pow(2%2CMath.log2(s)*l)%2Cf%3DMath.sqrt((1%2FMath.pow(c%2C2)-1)%2F(u.supersawVoiceCount-1))%2Cd%3DMath.sqrt((1%2FMath.pow(p%2C2)-1)%2F(u.supersawVoiceCount-1))%3Bi.supersawDynamism%3Df%2Ci.supersawDynamismDelta%3D(d-f)%2Fr%3Bconst%20y%3D-1%3D%3Di.supersawDelayIndex%3Bif(y)%7Blet%20e%3D0%3Bfor(let%20t%3D0%3Bt%3Cu.supersawVoiceCount%3Bt%2B%2B)i.phases%5Bt%5D%3De%2Ce%2B%3D-Math.log(Math.random())%3Bconst%20t%3D1%2B(u.supersawVoiceCount-1)*f%3Blet%20s%3D0%3Bfor(let%20t%3D0%3Bt%3Cu.supersawVoiceCount%3Bt%2B%2B)%7Bconst%20n%3D0%3D%3Dt%3F1%3Af%2Ca%3Di.phases%5Bt%5D%2Fe%3Bi.phases%5Bt%5D%3Da%2Cs%2B%3D(a-.5)*n%7Dlet%20n%3D1%2Ca%3D0%3Bfor(let%20e%3Du.supersawVoiceCount-1%3Be%3E%3D0%3Be--)%7Bconst%20r%3D1-i.phases%5Be%5D%2Co%3Dr-a%3Bif(s%3C0)%7Bconst%20e%3D-s%2Ft%3Bif(e%3Co)%7Bn%3Da%2Be%3Bbreak%7D%7Ds%2B%3Do*t-(0%3D%3De%3F1%3Af)%2Ca%3Dr%7Dfor(let%20e%3D0%3Be%3Cu.supersawVoiceCount%3Be%2B%2B)i.phases%5Be%5D%2B%3Dn%3Bfor(let%20e%3D1%3Be%3Cu.supersawVoiceCount-1%3Be%2B%2B)%7Bconst%20t%3De%2BMath.floor(Math.random()*(u.supersawVoiceCount-e))%2Cs%3Di.phases%5Be%5D%3Bi.phases%5Be%5D%3Di.phases%5Bt%5D%2Ci.phases%5Bt%5D%3Ds%7D%7Dconst%20v%3Dh.supersawSpread%2Fu.supersawSpreadMax%3Blet%20b%3Dv%2Cx%3Dv%3Bthis.isModActive(u.modulators.dictionary.spread.index%2Ct%2Ci.instrumentIndex)%26%26(b%3Dthis.getModValue(u.modulators.dictionary.spread.index%2Ct%2Ci.instrumentIndex%2C!1)%2Fu.supersawSpreadMax%2Cx%3Dthis.getModValue(u.modulators.dictionary.spread.index%2Ct%2Ci.instrumentIndex%2C!0)%2Fu.supersawSpreadMax)%3Bconst%20k%3D.5*(b*K%5B39%5D%2Bx*J%5B39%5D)%2CF%3DMath.pow(1-Math.sqrt(Math.max(0%2C1-k))%2C1.75)%3Bfor(let%20e%3D0%3Be%3Cu.supersawVoiceCount%3Be%2B%2B)%7Bconst%20t%3D0%3D%3De%3F0%3AMath.pow(((e%2B1%3E%3E1)-.5%2B.025*((2%26e)-1))%2F(u.supersawVoiceCount%3E%3E1)%2C1.1)*(2*(1%26e)-1)%3Bi.supersawUnisonDetunes%5Be%5D%3DMath.pow(2%2CF*t%2F12)%7Dconst%20P%3Dh.supersawShape%2Fu.supersawShapeMax%3Blet%20I%3DP*K%5B40%5D%2Cq%3DP*J%5B40%5D%3Bthis.isModActive(u.modulators.dictionary%5B%22saw%20shape%22%5D.index%2Ct%2Ci.instrumentIndex)%26%26(I%3Dthis.getModValue(u.modulators.dictionary%5B%22saw%20shape%22%5D.index%2Ct%2Ci.instrumentIndex%2C!1)%2Fu.supersawShapeMax%2Cq%3Dthis.getModValue(u.modulators.dictionary%5B%22saw%20shape%22%5D.index%2Ct%2Ci.instrumentIndex%2C!0)%2Fu.supersawShapeMax)%3Bconst%20T%3DI*K%5B40%5D%2CD%3Dq*J%5B40%5D%3Bi.supersawShape%3DT%2Ci.supersawShapeDelta%3D(D-T)%2Fr%3Blet%20O%3Dh.decimalOffset%3Bthis.isModActive(u.modulators.dictionary%5B%22decimal%20offset%22%5D.index%2Ct%2Ci.instrumentIndex)%26%26(O%3Dthis.getModValue(u.modulators.dictionary%5B%22decimal%20offset%22%5D.index%2Ct%2Ci.instrumentIndex%2C!1))%3Bconst%20R%3DO*K%5B37%5D%3Bi.decimalOffset%3DR%3Bconst%20z%3Dm(h.pulseWidth)%3Blet%20A%3Dz%2CC%3Dz%3Bthis.isModActive(u.modulators.dictionary%5B%22pulse%20width%22%5D.index%2Ct%2Ci.instrumentIndex)%26%26(A%3Dthis.getModValue(u.modulators.dictionary%5B%22pulse%20width%22%5D.index%2Ct%2Ci.instrumentIndex%2C!1)%2F(2*u.pulseWidthRange)%2CC%3Dthis.getModValue(u.modulators.dictionary%5B%22pulse%20width%22%5D.index%2Ct%2Ci.instrumentIndex%2C!0)%2F(2*u.pulseWidthRange))%3Blet%20H%3DA*K%5B2%5D%2CE%3DC*J%5B2%5D%3BH-%3DR%2F1e4%2CE-%3DR%2F1e4%3Bconst%20L%3Dnull!%3Di.supersawPrevPhaseDelta%3Fi.supersawPrevPhaseDelta%3Ag*S%2CN%3Dg*S*e%3Bi.supersawPrevPhaseDelta%3DN%3Bconst%20G%3DH%2FL%2CV%3DE%2FN%3Bi.supersawDelayLength%3DG%2Ci.supersawDelayLengthDelta%3D(V-G)%2Fr%3Bconst%20B%3DMath.ceil(Math.max(G%2CV))%2B2%3Bif(null%3D%3Di.supersawDelayLine%7C%7Ci.supersawDelayLine.length%3C%3DB)%7Bconst%20e%3DMath.ceil(.5*this.samplesPerSecond%2Fde.frequencyFromPitch(24))%2Ct%3Dnew%20Float32Array(xe.fittingPowerOfTwo(Math.max(e%2CB)))%3Bif(!y%26%26null!%3Di.supersawDelayLine)%7Bconst%20e%3Di.supersawDelayLine.length-1%3E%3E0%2Cs%3Di.supersawDelayIndex%3Bfor(let%20n%3D0%3Bn%3Ci.supersawDelayLine.length%3Bn%2B%2B)t%5Bn%5D%3Di.supersawDelayLine%5Bs%2Bn%26e%5D%7Di.supersawDelayLine%3Dt%2Ci.supersawDelayIndex%3Di.supersawDelayLine.length%7Delse%20y%26%26(i.supersawDelayLine.fill(0)%2Ci.supersawDelayIndex%3Di.supersawDelayLine.length)%3Bconst%20W%3Du.pwmBaseExpression%2Fu.supersawBaseExpression%3BM*%3D(1%2B(W-1)*T)%2FMath.sqrt(1%2B(u.supersawVoiceCount-1)*f*f)%2Cw*%3D(1%2B(W-1)*D)%2FMath.sqrt(1%2B(u.supersawVoiceCount-1)*d*d)%7Dlet%20x%3Dy*A*H*l*K%5B0%5D*M%2Ck%3Dy*C*E*d*J%5B0%5D*w%3Bif(this.isModActive(u.modulators.dictionary%5B%22note%20volume%22%5D.index%2Ct%2Ci.instrumentIndex))%7Bconst%20e%3Dthis.getModValue(u.modulators.dictionary%5B%22note%20volume%22%5D.index%2Ct%2Ci.instrumentIndex%2C!1)%2Cs%3Dthis.getModValue(u.modulators.dictionary%5B%22note%20volume%22%5D.index%2Ct%2Ci.instrumentIndex%2C!0)%3Bx*%3De%3C%3D0%3F(e%2Bu.volumeRange%2F2)%2F(u.volumeRange%2F2)%3Axe.instrumentVolumeToVolumeMult(e)%2Ck*%3Ds%3C%3D0%3F(s%2Bu.volumeRange%2F2)%2F(u.volumeRange%2F2)%3Axe.instrumentVolumeToVolumeMult(s)%7Dif(i.expression%3Dx%2Ci.expressionDelta%3D(k-x)%2Fr%2C7%3D%3Dh.type)%7Blet%20e%3Bif(null!%3Di.prevStringDecay)e%3Di.prevStringDecay%3Belse%7Bconst%20t%3Di.envelopeComputer.envelopeStarts%5B3%5D%3Be%3D1-Math.min(1%2Ct*i.stringSustainStart%2F(u.stringSustainRange-1))%7Dconst%20t%3Di.envelopeComputer.envelopeEnds%5B3%5D%3Blet%20s%3D1-Math.min(1%2Ct*i.stringSustainEnd%2F(u.stringSustainRange-1))%3Bi.prevStringDecay%3Ds%3Bconst%20n%3Dh.unisonVoices%3Bfor(let%20e%3Di.pickedStrings.length%3Be%3Cn%3Be%2B%2B)i.pickedStrings%5Be%5D%3Dnew%20ge%3Bif(i.atNoteStart%26%26!p.continues%26%26!i.forceContinueAtStart)for(const%20e%20of%20i.pickedStrings)e.delayIndex%3D-1%3Bfor(let%20t%3D0%3Bt%3Cn%3Bt%2B%2B)i.pickedStrings%5Bt%5D.update(this%2Cc%2Ci%2Ct%2Cr%2Ce%2Cs%2Ch.stringSustainType)%7D%7D%7Dstatic%20getLFOAmplitude(e%2Ct)%7Blet%20s%3D0%3Bfor(const%20i%20of%20u.vibratoTypes%5Be.vibratoType%5D.periodsSeconds)s%2B%3DMath.sin(2*Math.PI*t%2Fi)%3Breturn%20s%7Dstatic%20getInstrumentSynthFunction(e)%7Bif(1%3D%3De.type)%7Bconst%20t%3De.algorithm%2B%22_%22%2Be.feedbackType%3Bif(null%3D%3Dxe.fmSynthFunctionCache%5Bt%5D)%7Bconst%20s%3D%5B%5D%3Bfor(const%20t%20of%20xe.fmSourceTemplate)if(-1!%3Dt.indexOf(%22%2F%2F%20CARRIER%20OUTPUTS%22))%7Bconst%20i%3D%5B%5D%3Bfor(let%20t%3D0%3Bt%3Cu.algorithms%5Be.algorithm%5D.carrierCount%3Bt%2B%2B)i.push(%22operator%22%2Bt%2B%22Scaled%22)%3Bs.push(t.replace(%22%2F*operator%23Scaled*%2F%22%2Ci.join(%22%20%2B%20%22)))%7Delse%20if(-1!%3Dt.indexOf(%22%2F%2F%20INSERT%20OPERATOR%20COMPUTATION%20HERE%22))for(let%20t%3Du.operatorCount-1%3Bt%3E%3D0%3Bt--)for(const%20i%20of%20xe.operatorSourceTemplate)if(-1!%3Di.indexOf(%22%2F*%20%2B%20operator%40Scaled*%2F%22))%7Blet%20n%3D%22%22%3Bfor(const%20s%20of%20u.algorithms%5Be.algorithm%5D.modulatedBy%5Bt%5D)n%2B%3D%22%20%2B%20operator%22%2B(s-1)%2B%22Scaled%22%3Bconst%20a%3Du.feedbacks%5Be.feedbackType%5D.indices%5Bt%5D%3Bif(a.length%3E0)%7Bn%2B%3D%22%20%2B%20feedbackMult%20*%20(%22%3Bconst%20e%3D%5B%5D%3Bfor(const%20t%20of%20a)e.push(%22operator%22%2B(t-1)%2B%22Output%22)%3Bn%2B%3De.join(%22%20%2B%20%22)%2B%22)%22%7Ds.push(i.replace(%2F%5C%23%2Fg%2Ct%2B%22%22).replace(%22%2F*%20%2B%20operator%40Scaled*%2F%22%2Cn))%7Delse%20s.push(i.replace(%2F%5C%23%2Fg%2Ct%2B%22%22))%3Belse%20if(-1!%3Dt.indexOf(%22%23%22))for(let%20e%3D0%3Be%3Cu.operatorCount%3Be%2B%2B)s.push(t.replace(%2F%5C%23%2Fg%2Ce%2B%22%22))%3Belse%20s.push(t)%3Bconst%20i%3D%22return%20(synth%2C%20bufferIndex%2C%20roundedSamplesPerTick%2C%20tone%2C%20instrument)%20%3D%3E%20%7B%22%2Bs.join(%22%5Cn%22)%2B%22%7D%22%3Bxe.fmSynthFunctionCache%5Bt%5D%3Dnew%20Function(%22Config%22%2C%22Synth%22%2Ci)(u%2Cxe)%7Dreturn%20xe.fmSynthFunctionCache%5Bt%5D%7Dif(0%3D%3De.type)return%20e.isUsingAdvancedLoopControls%3Fxe.loopableChipSynth%3Axe.chipSynth%3Bif(9%3D%3De.type)return%20xe.chipSynth%3Bif(5%3D%3De.type)return%20xe.harmonicsSynth%3Bif(6%3D%3De.type)return%20xe.pulseWidthSynth%3Bif(8%3D%3De.type)return%20xe.supersawSynth%3Bif(7%3D%3De.type)return%20xe.pickedStringSynth%3Bif(2%3D%3De.type)return%20xe.noiseSynth%3Bif(3%3D%3De.type)return%20xe.spectrumSynth%3Bif(4%3D%3De.type)return%20xe.drumsetSynth%3Bif(10%3D%3De.type)return%20xe.modSynth%3Bif(11%3D%3De.type)%7Bconst%20t%3De.customAlgorithm.name%2B%22_%22%2Be.customFeedbackType.name%3Bif(null%3D%3Dxe.fm6SynthFunctionCache%5Bt%5D)%7Bconst%20s%3D%5B%5D%3Bfor(const%20t%20of%20xe.fmSourceTemplate)if(-1!%3Dt.indexOf(%22%2F%2F%20CARRIER%20OUTPUTS%22))%7Bconst%20i%3D%5B%5D%3Bfor(let%20t%3D0%3Bt%3Ce.customAlgorithm.carrierCount%3Bt%2B%2B)i.push(%22operator%22%2Bt%2B%22Scaled%22)%3Bs.push(t.replace(%22%2F*operator%23Scaled*%2F%22%2Ci.join(%22%20%2B%20%22)))%7Delse%20if(-1!%3Dt.indexOf(%22%2F%2F%20INSERT%20OPERATOR%20COMPUTATION%20HERE%22))for(let%20t%3Du.operatorCount%2B2-1%3Bt%3E%3D0%3Bt--)for(const%20i%20of%20xe.operatorSourceTemplate)if(-1!%3Di.indexOf(%22%2F*%20%2B%20operator%40Scaled*%2F%22))%7Blet%20n%3D%22%22%3Bfor(const%20s%20of%20e.customAlgorithm.modulatedBy%5Bt%5D)n%2B%3D%22%20%2B%20operator%22%2B(s-1)%2B%22Scaled%22%3Bconst%20a%3De.customFeedbackType.indices%5Bt%5D%3Bif(a.length%3E0)%7Bn%2B%3D%22%20%2B%20feedbackMult%20*%20(%22%3Bconst%20e%3D%5B%5D%3Bfor(const%20t%20of%20a)e.push(%22operator%22%2B(t-1)%2B%22Output%22)%3Bn%2B%3De.join(%22%20%2B%20%22)%2B%22)%22%7Ds.push(i.replace(%2F%5C%23%2Fg%2Ct%2B%22%22).replace(%22%2F*%20%2B%20operator%40Scaled*%2F%22%2Cn))%7Delse%20s.push(i.replace(%2F%5C%23%2Fg%2Ct%2B%22%22))%3Belse%20if(-1!%3Dt.indexOf(%22%23%22))for(let%20e%3D0%3Be%3Cu.operatorCount%2B2%3Be%2B%2B)s.push(t.replace(%2F%5C%23%2Fg%2Ce%2B%22%22))%3Belse%20s.push(t)%3Bconst%20i%3D%22return%20(synth%2C%20bufferIndex%2C%20roundedSamplesPerTick%2C%20tone%2C%20instrument)%20%3D%3E%20%7B%22%2Bs.join(%22%5Cn%22)%2B%22%7D%22%3Bxe.fm6SynthFunctionCache%5Bt%5D%3Dnew%20Function(%22Config%22%2C%22Synth%22%2Ci)(u%2Cxe)%7Dreturn%20xe.fm6SynthFunctionCache%5Bt%5D%7Dthrow%20new%20Error(%22Unrecognized%20instrument%20type%3A%20%22%2Be.type)%7Dstatic%20wrap(e%2Ct)%7Breturn(e%25t%2Bt)%25t%7Dstatic%20loopableChipSynth(e%2Ct%2Cs%2Ci%2Cn)%7Bconst%20a%3DI(n.effects)%26%26n.aliases%2Cr%3De.tempMonoInstrumentSampleBuffer%2Co%3Dn.wave%2Cl%3Dn.volumeScale%2Ch%3Da%26%268%3D%3Dn.type%3Fo.length%3Ao.length-1%3Blet%20u%3DMath.max(0%2CMath.min(h%2Cn.chipWaveLoopEnd))%2Cc%3DMath.max(0%2CMath.min(u-1%2Cn.chipWaveLoopStart))%2Cp%3Du-c%3Bp%3C2%26%26(c%3D0%2Cu%3Dh%2Cp%3Dh)%3Bconst%20f%3Dn.chipWaveLoopMode%2Cm%3Dn.chipWavePlayBackwards%2Cd%3Di.specialIntervalExpressionMult*n.unisonSign%3B1!%3Dn.unisonVoices%7C%7C0!%3Dn.unisonSpread%7C%7Cn.chord.customInterval%7C%7C(i.phases%5B1%5D%3Di.phases%5B0%5D)%3Blet%20y%3Di.phaseDeltas%5B0%5D*h%2Cv%3Di.phaseDeltas%5B1%5D*h%2Cg%3Di.directions%5B0%5D%2Cb%3Di.directions%5B1%5D%2CS%3Di.chipWaveCompletions%5B0%5D%2CM%3Di.chipWaveCompletions%5B1%5D%3B3!%3D%3Df%26%262!%3D%3Df%26%260!%3D%3Df%7C%7C(m%3F(g%3D-1%2Cb%3D-1)%3A(g%3D1%2Cb%3D1))%2C0!%3D%3Df%26%261!%3D%3Df%7C%7C(S%3D0%2CM%3D0)%3Blet%20w%3Di.chipWaveCompletionsLastWave%5B0%5D%2Cx%3Di.chipWaveCompletionsLastWave%5B1%5D%3Bconst%20k%3D1e3%2CF%3D%2Bi.phaseDeltaScales%5B0%5D%2CP%3D%2Bi.phaseDeltaScales%5B1%5D%3Blet%20q%3D%2Bi.expression%3Bconst%20T%3D%2Bi.expressionDelta%3Blet%20D%3Dxe.wrap(i.phases%5B0%5D%2C1)*h%2CO%3Dxe.wrap(i.phases%5B1%5D%2C1)*h%2CR%3D0%2Cz%3D0%3Bif(!a)%7Bconst%20e%3DMath.floor(D)%2Ct%3DMath.floor(O)%2Cs%3Dxe.wrap(e%2Ch)%2Ci%3Dxe.wrap(t%2Ch)%2Cn%3DD-e%2Ca%3DO-t%3BR%3D%2Bo%5Bs%5D%2Cz%3D%2Bo%5Bi%5D%2CR%2B%3D(o%5Bxe.wrap(s%2B1%2Ch)%5D-R)*n%2Cz%2B%3D(o%5Bxe.wrap(i%2B1%2Ch)%5D-z)*a%7Dconst%20A%3Di.noteFilters%2CC%3D0%7Ci.noteFilterCount%3Blet%20H%3D%2Bi.initialNoteFilterInput1%2CE%3D%2Bi.initialNoteFilterInput2%3Bconst%20L%3Dxe.applyFilters%2CN%3Dt%2Bs%3Blet%20G%3Di.chipWavePrevWaves%5B0%5D%2CV%3Di.chipWavePrevWaves%5B1%5D%3Bfor(let%20e%3Dt%3Be%3CN%3Be%2B%2B)%7BS%3E0%26%26S%3Ck%26%26S%2B%2B%2CM%3E0%26%26M%3Ck%26%26M%2B%2B%3Blet%20t%3D0%3BD%2B%3Dy*g%2CO%2B%3Dv*b%2C2%3D%3D%3Df%3F(1%3D%3D%3Dg%3FD%3Eh%26%26(S%3C%3D0%26%26(w%3DG%2CS%2B%2B)%2Ct%3D1)%3A-1%3D%3D%3Dg%26%26D%3C0%26%26(S%3C%3D0%26%26(w%3DG%2CS%2B%2B)%2Ct%3D1)%2C1%3D%3D%3Db%3FO%3Eh%26%26(M%3C%3D0%26%26(x%3DV%2CM%2B%2B)%2Ct%3D1)%3A-1%3D%3D%3Dg%26%26O%3C0%26%26(M%3C%3D0%26%26(x%3DV%2CM%2B%2B)%2Ct%3D1))%3A3%3D%3D%3Df%3F(1%3D%3D%3Dg%3FD%3Eu%26%26(S%3C%3D0%26%26(w%3DG%2CS%2B%2B)%2Ct%3D1)%3A-1%3D%3D%3Dg%26%26D%3Cc%26%26(S%3C%3D0%26%26(w%3DG%2CS%2B%2B)%2Ct%3D1)%2C1%3D%3D%3Db%3FO%3Eu%26%26(M%3C%3D0%26%26(x%3DV%2CM%2B%2B)%2Ct%3D1)%3A-1%3D%3D%3Dg%26%26O%3Cc%26%26(M%3C%3D0%26%26(x%3DV%2CM%2B%2B)%2Ct%3D1))%3A0%3D%3D%3Df%3F(1%3D%3D%3Dg%3FD%3Eu%26%26(D%3Dc%2Bxe.wrap(D-u%2Cp)%2Ct%3D1)%3A-1%3D%3D%3Dg%26%26D%3Cc%26%26(D%3Du-xe.wrap(c-D%2Cp)%2Ct%3D1)%2C1%3D%3D%3Db%3FO%3Eu%26%26(O%3Dc%2Bxe.wrap(O-u%2Cp)%2Ct%3D1)%3A-1%3D%3D%3Db%26%26O%3Cc%26%26(O%3Du-xe.wrap(c-O%2Cp)%2Ct%3D1))%3A1%3D%3D%3Df%26%26(1%3D%3D%3Dg%3FD%3Eu%26%26(D%3Du-xe.wrap(D-u%2Cp)%2Cg%3D-1%2Ct%3D1)%3A-1%3D%3D%3Dg%26%26D%3Cc%26%26(D%3Dc%2Bxe.wrap(c-D%2Cp)%2Cg%3D1%2Ct%3D1)%2C1%3D%3D%3Db%3FO%3Eu%26%26(O%3Du-xe.wrap(O-u%2Cp)%2Cb%3D-1%2Ct%3D1)%3A-1%3D%3D%3Db%26%26O%3Cc%26%26(O%3Dc%2Bxe.wrap(c-O%2Cp)%2Cb%3D1%2Ct%3D1))%3Blet%20s%3D0%2Ci%3D0%2Cn%3D0%3Bif(a)%7Bs%3Do%5Bxe.wrap(Math.floor(D)%2Ch)%5D%2Ci%3Do%5Bxe.wrap(Math.floor(O)%2Ch)%5D%2CG%3Ds%2CV%3Di%3Bconst%20e%3DS%3E0%3F(k-Math.min(S%2Ck))%2Fk%3A1%2Ct%3DM%3E0%3F(k-Math.min(M%2Ck))%2Fk%3A1%3Bn%3D0%2Cn%2B%3DS%3E0%3Fw*e%3As%2Cn%2B%3DM%3E0%3Fx*t%3Ai%7Delse%7Bconst%20e%3DMath.floor(D)%2Ca%3DMath.floor(O)%2Cr%3Dxe.wrap(e%2Ch)%2Cl%3Dxe.wrap(a%2Ch)%3Blet%20p%3Do%5Br%5D%2Cm%3Do%5Bl%5D%3Bconst%20F%3DD-e%2CP%3DO-a%3Bif(p%2B%3D(o%5Bxe.wrap(r%2B1%2Ch)%5D-p)*F%2Cm%2B%3D(o%5Bxe.wrap(l%2B1%2Ch)%5D-m)*P%2C(0!%3D%3Df%7C%7C0!%3D%3Dc%7C%7Cu!%3D%3Dh)%26%260!%3D%3Dt)%7Blet%20e%3D0%2Ct%3D0%3Bconst%20s%3DMath.max(0%2CD-y*g)%2Ci%3DMath.max(0%2CO-v*b)%2Cn%3DMath.floor(s)%2Ca%3DMath.floor(i)%2Cr%3Dxe.wrap(n%2Ch)%2Cl%3Dxe.wrap(a%2Ch)%3Be%3Do%5Br%5D%2Ct%3Do%5Bl%5D%2Ce%2B%3D(o%5Bxe.wrap(r%2B1%2Ch)%5D-e)*(s-n)*g%2Ct%2B%3D(o%5Bxe.wrap(l%2B1%2Ch)%5D-t)*(i-a)*b%2CR%3De%2Cz%3Dt%7D1%3D%3D%3Df%26%260!%3D%3Dt%3F(s%3DG%2Ci%3DV)%3A(s%3D(p-R)%2F(y*g)%2Ci%3D(m-z)%2F(v*b))%2CG%3Ds%2CV%3Di%2CR%3Dp%2Cz%3Dm%3Bconst%20I%3DS%3E0%3F(k-Math.min(S%2Ck))%2Fk%3A1%2Cq%3DM%3E0%3F(k-Math.min(M%2Ck))%2Fk%3A1%3Bn%2B%3DS%3E0%3Fw*I%3As%2Cn%2B%3DM%3E0%3Fx*q%3Ai*d%7Dconst%20m%3DL(n*l%2CH%2CE%2CC%2CA)%3BE%3DH%2CH%3Dn*l%2Cy*%3DF%2Cv*%3DP%3Bconst%20I%3Dm*q%3Bq%2B%3DT%2Cr%5Be%5D%2B%3DI%7Di.phases%5B0%5D%3DD%2Fh%2Ci.phases%5B1%5D%3DO%2Fh%2Ci.phaseDeltas%5B0%5D%3Dy%2Fh%2Ci.phaseDeltas%5B1%5D%3Dv%2Fh%2Ci.directions%5B0%5D%3Dg%2Ci.directions%5B1%5D%3Db%2Ci.chipWaveCompletions%5B0%5D%3DS%2Ci.chipWaveCompletions%5B1%5D%3DM%2Ci.chipWavePrevWaves%5B0%5D%3DG%2Ci.chipWavePrevWaves%5B1%5D%3DV%2Ci.chipWaveCompletionsLastWave%5B0%5D%3Dw%2Ci.chipWaveCompletionsLastWave%5B1%5D%3Dx%2Ci.expression%3Dq%2Ce.sanitizeFilters(A)%2Ci.initialNoteFilterInput1%3DH%2Ci.initialNoteFilterInput2%3DE%7Dstatic%20chipSynth(e%2Ct%2Cs%2Ci%2Cn)%7Bconst%20a%3DI(n.effects)%26%26n.aliases%2Cr%3De.tempMonoInstrumentSampleBuffer%2Co%3Dn.wave%2Cl%3Dn.volumeScale%2Ch%3Da%26%268%3D%3Dn.type%3Fo.length%3Ao.length-1%2Cu%3Di.specialIntervalExpressionMult*n.unisonSign%3B1!%3Dn.unisonVoices%7C%7C0!%3Dn.unisonSpread%7C%7Cn.chord.customInterval%7C%7C(i.phases%5B1%5D%3Di.phases%5B0%5D)%3Blet%20c%3Di.phaseDeltas%5B0%5D*h%2Cp%3Di.phaseDeltas%5B1%5D*h%3Bconst%20f%3D%2Bi.phaseDeltaScales%5B0%5D%2Cm%3D%2Bi.phaseDeltaScales%5B1%5D%3Blet%20d%3D%2Bi.expression%3Bconst%20y%3D%2Bi.expressionDelta%3Blet%20v%3Di.phases%5B0%5D%251*h%2Cg%3Di.phases%5B1%5D%251*h%3Bconst%20b%3Di.noteFilters%2CS%3D0%7Ci.noteFilterCount%3Blet%20M%3D%2Bi.initialNoteFilterInput1%2Cw%3D%2Bi.initialNoteFilterInput2%3Bconst%20x%3Dxe.applyFilters%3Blet%20k%3D0%2CF%3D0%3Bif(!a)%7Bconst%20e%3D0%7Cv%2Ct%3D0%7Cg%2Cs%3De%25h%2Ci%3Dt%25h%2Cn%3Dv-e%2Ca%3Dg-t%3Bk%3D%2Bo%5Bs%5D%2CF%3D%2Bo%5Bi%5D%2Ck%2B%3D(o%5Bs%2B1%5D-k)*n%2CF%2B%3D(o%5Bi%2B1%5D-F)*a%7Dconst%20P%3Dt%2Bs%3Bfor(let%20e%3Dt%3Be%3CP%3Be%2B%2B)%7Blet%20t%2Cs%2Ci%3Bif(v%2B%3Dc%2Cg%2B%3Dp%2Ca)t%3Do%5B(0%7Cv)%25h%5D%2Cs%3Do%5B(0%7Cg)%25h%5D%2Ci%3Dt%2Bs%3Belse%7Bconst%20e%3D0%7Cv%2Cn%3D0%7Cg%2Ca%3De%25h%2Cr%3Dn%25h%3Blet%20l%3Do%5Ba%5D%2Cf%3Do%5Br%5D%3Bconst%20m%3Dv-e%2Cd%3Dg-n%3Bl%2B%3D(o%5Ba%2B1%5D-l)*m%2Cf%2B%3D(o%5Br%2B1%5D-f)*d%2Ct%3D(l-k)%2Fc%2Cs%3D(f-F)%2Fp%2Ck%3Dl%2CF%3Df%2Ci%3Dt%2Bs*u%7Dconst%20n%3Dx(i*l%2CM%2Cw%2CS%2Cb)%3Bw%3DM%2CM%3Di*l%2Cc*%3Df%2Cp*%3Dm%3Bconst%20P%3Dn*d%3Bd%2B%3Dy%2Cr%5Be%5D%2B%3DP%7Di.phases%5B0%5D%3Dv%2Fh%2Ci.phases%5B1%5D%3Dg%2Fh%2Ci.phaseDeltas%5B0%5D%3Dc%2Fh%2Ci.phaseDeltas%5B1%5D%3Dp%2Fh%2Ci.expression%3Dd%2Ce.sanitizeFilters(b)%2Ci.initialNoteFilterInput1%3DM%2Ci.initialNoteFilterInput2%3Dw%7Dstatic%20harmonicsSynth(e%2Ct%2Cs%2Ci%2Cn)%7Bconst%20a%3De.tempMonoInstrumentSampleBuffer%2Cr%3Dn.wave%2Co%3Dr.length-1%2Cl%3Di.specialIntervalExpressionMult*n.unisonSign%3B1!%3Dn.unisonVoices%7C%7C0!%3Dn.unisonSpread%7C%7Cn.chord.customInterval%7C%7C(i.phases%5B1%5D%3Di.phases%5B0%5D)%3Blet%20h%3Di.phaseDeltas%5B0%5D*o%2Cu%3Di.phaseDeltas%5B1%5D*o%3Bconst%20c%3D%2Bi.phaseDeltaScales%5B0%5D%2Cp%3D%2Bi.phaseDeltaScales%5B1%5D%3Blet%20f%3D%2Bi.expression%3Bconst%20m%3D%2Bi.expressionDelta%3Blet%20d%3Di.phases%5B0%5D%251*o%2Cy%3Di.phases%5B1%5D%251*o%3Bconst%20v%3Di.noteFilters%2Cg%3D0%7Ci.noteFilterCount%3Blet%20b%3D%2Bi.initialNoteFilterInput1%2CS%3D%2Bi.initialNoteFilterInput2%3Bconst%20M%3Dxe.applyFilters%2Cw%3D0%7Cd%2Cx%3D0%7Cy%2Ck%3Dw%25o%2CF%3Dx%25o%2CP%3Dd-w%2CI%3Dy-x%3Blet%20q%3D%2Br%5Bk%5D%2CT%3D%2Br%5BF%5D%3Bq%2B%3D(r%5Bk%2B1%5D-q)*P%2CT%2B%3D(r%5BF%2B1%5D-T)*I%3Bconst%20D%3Dt%2Bs%3Bfor(let%20e%3Dt%3Be%3CD%3Be%2B%2B)%7Bd%2B%3Dh%2Cy%2B%3Du%3Bconst%20t%3D0%7Cd%2Cs%3D0%7Cy%2Ci%3Dt%25o%2Cn%3Ds%25o%3Blet%20w%3Dr%5Bi%5D%2Cx%3Dr%5Bn%5D%3Bconst%20k%3Dd-t%2CF%3Dy-s%3Bw%2B%3D(r%5Bi%2B1%5D-w)*k%2Cx%2B%3D(r%5Bn%2B1%5D-x)*F%3Bconst%20P%3D(w-q)%2Fh%2CI%3D(x-T)%2Fu%3Bq%3Dw%2CT%3Dx%3Bconst%20D%3DP%2BI*l%2CO%3DM(D%2Cb%2CS%2Cg%2Cv)%3BS%3Db%2Cb%3DD%2Ch*%3Dc%2Cu*%3Dp%3Bconst%20R%3DO*f%3Bf%2B%3Dm%2Ca%5Be%5D%2B%3DR%7Di.phases%5B0%5D%3Dd%2Fo%2Ci.phases%5B1%5D%3Dy%2Fo%2Ci.phaseDeltas%5B0%5D%3Dh%2Fo%2Ci.phaseDeltas%5B1%5D%3Du%2Fo%2Ci.expression%3Df%2Ce.sanitizeFilters(v)%2Ci.initialNoteFilterInput1%3Db%2Ci.initialNoteFilterInput2%3DS%7Dstatic%20pickedStringSynth(e%2Ct%2Cs%2Ci%2Cn)%7Bconst%20a%3Dn.unisonVoices%3Blet%20r%3Dxe.pickedStringFunctionCache%5Ba%5D%3Bif(null%3D%3Dr)%7Blet%20e%3D%22return%20(synth%2C%20bufferIndex%2C%20runLength%2C%20tone%2C%20instrumentState)%20%3D%3E%20%7B%22%3Be%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ctconst%20data%20%3D%20synth.tempMonoInstrumentSampleBuffer%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctlet%20pickedString%23%20%3D%20tone.pickedStrings%5B%23%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20allPassSample%23%20%3D%20%2BpickedString%23.allPassSample%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20allPassPrevInput%23%20%3D%20%2BpickedString%23.allPassPrevInput%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20sustainFilterSample%23%20%3D%20%2BpickedString%23.sustainFilterSample%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20sustainFilterPrevOutput2%23%20%3D%20%2BpickedString%23.sustainFilterPrevOutput2%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20sustainFilterPrevInput1%23%20%3D%20%2BpickedString%23.sustainFilterPrevInput1%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20sustainFilterPrevInput2%23%20%3D%20%2BpickedString%23.sustainFilterPrevInput2%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20fractionalDelaySample%23%20%3D%20%2BpickedString%23.fractionalDelaySample%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20delayLine%23%20%3D%20pickedString%23.delayLine%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20delayBufferMask%23%20%3D%20(delayLine%23.length%20-%201)%20%3E%3E%200%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20delayIndex%23%20%3D%20pickedString%23.delayIndex%7C0%3B%5Cn%5Ct%5Ct%5Ct%5CtdelayIndex%23%20%3D%20(delayIndex%23%20%26%20delayBufferMask%23)%20%2B%20delayLine%23.length%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20delayLength%23%20%3D%20%2BpickedString%23.prevDelayLength%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20delayLengthDelta%23%20%3D%20%2BpickedString%23.delayLengthDelta%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20allPassG%23%20%3D%20%2BpickedString%23.allPassG%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20sustainFilterA1%23%20%3D%20%2BpickedString%23.sustainFilterA1%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20sustainFilterA2%23%20%3D%20%2BpickedString%23.sustainFilterA2%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20sustainFilterB0%23%20%3D%20%2BpickedString%23.sustainFilterB0%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20sustainFilterB1%23%20%3D%20%2BpickedString%23.sustainFilterB1%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20sustainFilterB2%23%20%3D%20%2BpickedString%23.sustainFilterB2%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20allPassGDelta%23%20%3D%20%2BpickedString%23.allPassGDelta%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20sustainFilterA1Delta%23%20%3D%20%2BpickedString%23.sustainFilterA1Delta%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20sustainFilterA2Delta%23%20%3D%20%2BpickedString%23.sustainFilterA2Delta%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20sustainFilterB0Delta%23%20%3D%20%2BpickedString%23.sustainFilterB0Delta%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20sustainFilterB1Delta%23%20%3D%20%2BpickedString%23.sustainFilterB1Delta%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20sustainFilterB2Delta%23%20%3D%20%2BpickedString%23.sustainFilterB2Delta%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctlet%20expression%20%3D%20%2Btone.expression%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20expressionDelta%20%3D%20%2Btone.expressionDelta%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctconst%20unisonSign%20%3D%20tone.specialIntervalExpressionMult%20*%20instrumentState.unisonSign%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20delayResetOffset%23%20%3D%20pickedString%23.delayResetOffset%7C0%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctconst%20filters%20%3D%20tone.noteFilters%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20filterCount%20%3D%20tone.noteFilterCount%7C0%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20initialFilterInput1%20%3D%20%2Btone.initialNoteFilterInput1%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20initialFilterInput2%20%3D%20%2Btone.initialNoteFilterInput2%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20applyFilters%20%3D%20Synth.applyFilters%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctconst%20stopIndex%20%3D%20bufferIndex%20%2B%20runLength%3B%5Cn%5Ct%5Ct%5Ct%5Ctfor%20(let%20sampleIndex%20%3D%20bufferIndex%3B%20sampleIndex%20%3C%20stopIndex%3B%20sampleIndex%2B%2B)%20%7B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20targetSampleTime%23%20%3D%20delayIndex%23%20-%20delayLength%23%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20lowerIndex%23%20%3D%20(targetSampleTime%23%20%2B%200.125)%20%7C%200%3B%20%2F%2F%20Offset%20to%20improve%20stability%20of%20all-pass%20filter.%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20upperIndex%23%20%3D%20lowerIndex%23%20%2B%201%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20fractionalDelay%23%20%3D%20upperIndex%23%20-%20targetSampleTime%23%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20fractionalDelayG%23%20%3D%20(1.0%20-%20fractionalDelay%23)%20%2F%20(1.0%20%2B%20fractionalDelay%23)%3B%20%2F%2F%20Inlined%20version%20of%20FilterCoefficients.prototype.allPass1stOrderFractionalDelay%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20prevInput%23%20%3D%20delayLine%23%5BlowerIndex%23%20%26%20delayBufferMask%23%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20input%23%20%3D%20delayLine%23%5BupperIndex%23%20%26%20delayBufferMask%23%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtfractionalDelaySample%23%20%3D%20fractionalDelayG%23%20*%20input%23%20%2B%20prevInput%23%20-%20fractionalDelayG%23%20*%20fractionalDelaySample%23%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%5CtallPassSample%23%20%3D%20fractionalDelaySample%23%20*%20allPassG%23%20%2B%20allPassPrevInput%23%20-%20allPassG%23%20*%20allPassSample%23%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtallPassPrevInput%23%20%3D%20fractionalDelaySample%23%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20sustainFilterPrevOutput1%23%20%3D%20sustainFilterSample%23%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtsustainFilterSample%23%20%3D%20sustainFilterB0%23%20*%20allPassSample%23%20%2B%20sustainFilterB1%23%20*%20sustainFilterPrevInput1%23%20%2B%20sustainFilterB2%23%20*%20sustainFilterPrevInput2%23%20-%20sustainFilterA1%23%20*%20sustainFilterSample%23%20-%20sustainFilterA2%23%20*%20sustainFilterPrevOutput2%23%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtsustainFilterPrevOutput2%23%20%3D%20sustainFilterPrevOutput1%23%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtsustainFilterPrevInput2%23%20%3D%20sustainFilterPrevInput1%23%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtsustainFilterPrevInput1%23%20%3D%20allPassSample%23%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%5CtdelayLine%23%5BdelayIndex%23%20%26%20delayBufferMask%23%5D%20%2B%3D%20sustainFilterSample%23%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtdelayLine%23%5B(delayIndex%23%20%2B%20delayResetOffset%23)%20%26%20delayBufferMask%23%5D%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtdelayIndex%23%2B%2B%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20inputSample%20%3D%20(%22%3Bconst%20t%3D%5B%5D%3Bfor(let%20e%3D0%3Be%3Ca%3Be%2B%2B)t.push(%22fractionalDelaySample%22%2Be%2B(1%3D%3De%3F%22%20*%20unisonSign%22%3A%22%22))%3Be%2B%3Dt.join(%22%20%2B%20%22)%2Ce%2B%3D%22)%20*%20expression%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20sample%20%3D%20applyFilters(inputSample%2C%20initialFilterInput1%2C%20initialFilterInput2%2C%20filterCount%2C%20filters)%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtinitialFilterInput2%20%3D%20initialFilterInput1%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtinitialFilterInput1%20%3D%20inputSample%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctdata%5BsampleIndex%5D%20%2B%3D%20sample%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctexpression%20%2B%3D%20expressionDelta%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtdelayLength%23%20%2B%3D%20delayLengthDelta%23%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtallPassG%23%20%2B%3D%20allPassGDelta%23%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtsustainFilterA1%23%20%2B%3D%20sustainFilterA1Delta%23%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtsustainFilterA2%23%20%2B%3D%20sustainFilterA2Delta%23%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtsustainFilterB0%23%20%2B%3D%20sustainFilterB0Delta%23%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtsustainFilterB1%23%20%2B%3D%20sustainFilterB1Delta%23%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtsustainFilterB2%23%20%2B%3D%20sustainFilterB2Delta%23%3B%5Cn%5Ct%5Ct%5Ct%5Ct%7D%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%2F%2F%20Avoid%20persistent%20denormal%20or%20NaN%20values%20in%20the%20delay%20buffers%20and%20filter%20history.%5Cn%5Ct%5Ct%5Ct%5Ctconst%20epsilon%20%3D%20(1.0e-24)%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(allPassSample%23)%20%7C%7C%20Math.abs(allPassSample%23)%20%3C%20epsilon)%20allPassSample%23%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(allPassPrevInput%23)%20%7C%7C%20Math.abs(allPassPrevInput%23)%20%3C%20epsilon)%20allPassPrevInput%23%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(sustainFilterSample%23)%20%7C%7C%20Math.abs(sustainFilterSample%23)%20%3C%20epsilon)%20sustainFilterSample%23%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(sustainFilterPrevOutput2%23)%20%7C%7C%20Math.abs(sustainFilterPrevOutput2%23)%20%3C%20epsilon)%20sustainFilterPrevOutput2%23%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(sustainFilterPrevInput1%23)%20%7C%7C%20Math.abs(sustainFilterPrevInput1%23)%20%3C%20epsilon)%20sustainFilterPrevInput1%23%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(sustainFilterPrevInput2%23)%20%7C%7C%20Math.abs(sustainFilterPrevInput2%23)%20%3C%20epsilon)%20sustainFilterPrevInput2%23%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(fractionalDelaySample%23)%20%7C%7C%20Math.abs(fractionalDelaySample%23)%20%3C%20epsilon)%20fractionalDelaySample%23%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5CtpickedString%23.allPassSample%20%3D%20allPassSample%23%3B%5Cn%5Ct%5Ct%5Ct%5CtpickedString%23.allPassPrevInput%20%3D%20allPassPrevInput%23%3B%5Cn%5Ct%5Ct%5Ct%5CtpickedString%23.sustainFilterSample%20%3D%20sustainFilterSample%23%3B%5Cn%5Ct%5Ct%5Ct%5CtpickedString%23.sustainFilterPrevOutput2%20%3D%20sustainFilterPrevOutput2%23%3B%5Cn%5Ct%5Ct%5Ct%5CtpickedString%23.sustainFilterPrevInput1%20%3D%20sustainFilterPrevInput1%23%3B%5Cn%5Ct%5Ct%5Ct%5CtpickedString%23.sustainFilterPrevInput2%20%3D%20sustainFilterPrevInput2%23%3B%5Cn%5Ct%5Ct%5Ct%5CtpickedString%23.fractionalDelaySample%20%3D%20fractionalDelaySample%23%3B%5Cn%5Ct%5Ct%5Ct%5CtpickedString%23.delayIndex%20%3D%20delayIndex%23%3B%5Cn%5Ct%5Ct%5Ct%5CtpickedString%23.prevDelayLength%20%3D%20delayLength%23%3B%5Cn%5Ct%5Ct%5Ct%5CtpickedString%23.allPassG%20%3D%20allPassG%23%3B%5Cn%5Ct%5Ct%5Ct%5CtpickedString%23.sustainFilterA1%20%3D%20sustainFilterA1%23%3B%5Cn%5Ct%5Ct%5Ct%5CtpickedString%23.sustainFilterA2%20%3D%20sustainFilterA2%23%3B%5Cn%5Ct%5Ct%5Ct%5CtpickedString%23.sustainFilterB0%20%3D%20sustainFilterB0%23%3B%5Cn%5Ct%5Ct%5Ct%5CtpickedString%23.sustainFilterB1%20%3D%20sustainFilterB1%23%3B%5Cn%5Ct%5Ct%5Ct%5CtpickedString%23.sustainFilterB2%20%3D%20sustainFilterB2%23%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Cttone.expression%20%3D%20expression%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctsynth.sanitizeFilters(filters)%3B%5Cn%5Ct%5Ct%5Ct%5Cttone.initialNoteFilterInput1%20%3D%20initialFilterInput1%3B%5Cn%5Ct%5Ct%5Ct%5Cttone.initialNoteFilterInput2%20%3D%20initialFilterInput2%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%7D%22%2Ce%3De.replace(%2F%5E.*%5C%23.*%24%2Fgm%2C(e%3D%3E%7Bconst%20t%3D%5B%5D%3Bfor(let%20s%3D0%3Bs%3Ca%3Bs%2B%2B)t.push(e.replace(%2F%5C%23%2Fg%2CString(s)))%3Breturn%20t.join(%22%5Cn%22)%7D))%2Cr%3Dnew%20Function(%22Config%22%2C%22Synth%22%2Ce)(u%2Cxe)%2Cxe.pickedStringFunctionCache%5Ba%5D%3Dr%7Dr(e%2Ct%2Cs%2Ci%2Cn)%7Dstatic%20effectsSynth(e%2Ct%2Cs%2Ci%2Cn%2Ca)%7Bconst%20r%3DI(a.effects)%2Co%3Dq(a.effects)%2Cl%3Da.eqFilterCount%3E0%2Ch%3DT(a.effects)%2Cc%3DD(a.effects)%2Cp%3DO(a.effects)%2Cf%3DR(a.effects)%3Blet%20m%3D0%3Br%26%26(m%7C%3D1)%2Cm%3C%3C%3D1%2Co%26%26(m%7C%3D1)%2Cm%3C%3C%3D1%2Cl%26%26(m%7C%3D1)%2Cm%3C%3C%3D1%2Ch%26%26(m%7C%3D1)%2Cm%3C%3C%3D1%2Cc%26%26(m%7C%3D1)%2Cm%3C%3C%3D1%2Cp%26%26(m%7C%3D1)%2Cm%3C%3C%3D1%2Cf%26%26(m%7C%3D1)%3Blet%20d%3Dxe.effectsFunctionCache%5Bm%5D%3Bif(null%3D%3Dd)%7Blet%20e%3D%22return%20(synth%2C%20outputDataL%2C%20outputDataR%2C%20bufferIndex%2C%20runLength%2C%20instrumentState)%20%3D%3E%20%7B%22%3Bconst%20t%3Dc%7C%7Cf%7C%7Cp%3Be%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ctconst%20tempMonoInstrumentSampleBuffer%20%3D%20synth.tempMonoInstrumentSampleBuffer%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctlet%20mixVolume%20%3D%20%2BinstrumentState.mixVolume%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20mixVolumeDelta%20%3D%20%2BinstrumentState.mixVolumeDelta%3B%22%2Ct%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctlet%20delayInputMult%20%3D%20%2BinstrumentState.delayInputMult%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20delayInputMultDelta%20%3D%20%2BinstrumentState.delayInputMultDelta%3B%22)%2Cr%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctconst%20distortionBaseVolume%20%3D%20%2BConfig.distortionBaseVolume%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20distortion%20%3D%20instrumentState.distortion%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20distortionDelta%20%3D%20instrumentState.distortionDelta%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20distortionDrive%20%3D%20instrumentState.distortionDrive%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20distortionDriveDelta%20%3D%20instrumentState.distortionDriveDelta%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20distortionFractionalResolution%20%3D%204.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20distortionOversampleCompensation%20%3D%20distortionBaseVolume%20%2F%20distortionFractionalResolution%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20distortionFractionalDelay1%20%3D%201.0%20%2F%20distortionFractionalResolution%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20distortionFractionalDelay2%20%3D%202.0%20%2F%20distortionFractionalResolution%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20distortionFractionalDelay3%20%3D%203.0%20%2F%20distortionFractionalResolution%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20distortionFractionalDelayG1%20%3D%20(1.0%20-%20distortionFractionalDelay1)%20%2F%20(1.0%20%2B%20distortionFractionalDelay1)%3B%20%2F%2F%20Inlined%20version%20of%20FilterCoefficients.prototype.allPass1stOrderFractionalDelay%5Cn%5Ct%5Ct%5Ct%5Ctconst%20distortionFractionalDelayG2%20%3D%20(1.0%20-%20distortionFractionalDelay2)%20%2F%20(1.0%20%2B%20distortionFractionalDelay2)%3B%20%2F%2F%20Inlined%20version%20of%20FilterCoefficients.prototype.allPass1stOrderFractionalDelay%5Cn%5Ct%5Ct%5Ct%5Ctconst%20distortionFractionalDelayG3%20%3D%20(1.0%20-%20distortionFractionalDelay3)%20%2F%20(1.0%20%2B%20distortionFractionalDelay3)%3B%20%2F%2F%20Inlined%20version%20of%20FilterCoefficients.prototype.allPass1stOrderFractionalDelay%5Cn%5Ct%5Ct%5Ct%5Ctconst%20distortionNextOutputWeight1%20%3D%20Math.cos(Math.PI%20*%20distortionFractionalDelay1)%20*%200.5%20%2B%200.5%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20distortionNextOutputWeight2%20%3D%20Math.cos(Math.PI%20*%20distortionFractionalDelay2)%20*%200.5%20%2B%200.5%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20distortionNextOutputWeight3%20%3D%20Math.cos(Math.PI%20*%20distortionFractionalDelay3)%20*%200.5%20%2B%200.5%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20distortionPrevOutputWeight1%20%3D%201.0%20-%20distortionNextOutputWeight1%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20distortionPrevOutputWeight2%20%3D%201.0%20-%20distortionNextOutputWeight2%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20distortionPrevOutputWeight3%20%3D%201.0%20-%20distortionNextOutputWeight3%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctlet%20distortionFractionalInput1%20%3D%20%2BinstrumentState.distortionFractionalInput1%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20distortionFractionalInput2%20%3D%20%2BinstrumentState.distortionFractionalInput2%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20distortionFractionalInput3%20%3D%20%2BinstrumentState.distortionFractionalInput3%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20distortionPrevInput%20%3D%20%2BinstrumentState.distortionPrevInput%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20distortionNextOutput%20%3D%20%2BinstrumentState.distortionNextOutput%3B%22)%2Co%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctlet%20bitcrusherPrevInput%20%3D%20%2BinstrumentState.bitcrusherPrevInput%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20bitcrusherCurrentOutput%20%3D%20%2BinstrumentState.bitcrusherCurrentOutput%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20bitcrusherPhase%20%3D%20%2BinstrumentState.bitcrusherPhase%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20bitcrusherPhaseDelta%20%3D%20%2BinstrumentState.bitcrusherPhaseDelta%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20bitcrusherPhaseDeltaScale%20%3D%20%2BinstrumentState.bitcrusherPhaseDeltaScale%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20bitcrusherScale%20%3D%20%2BinstrumentState.bitcrusherScale%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20bitcrusherScaleScale%20%3D%20%2BinstrumentState.bitcrusherScaleScale%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20bitcrusherFoldLevel%20%3D%20%2BinstrumentState.bitcrusherFoldLevel%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20bitcrusherFoldLevelScale%20%3D%20%2BinstrumentState.bitcrusherFoldLevelScale%3B%22)%2Cl%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctlet%20filters%20%3D%20instrumentState.eqFilters%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20filterCount%20%3D%20instrumentState.eqFilterCount%7C0%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20initialFilterInput1%20%3D%20%2BinstrumentState.initialEqFilterInput1%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20initialFilterInput2%20%3D%20%2BinstrumentState.initialEqFilterInput2%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20applyFilters%20%3D%20Synth.applyFilters%3B%22)%2Ce%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctlet%20eqFilterVolume%20%3D%20%2BinstrumentState.eqFilterVolume%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20eqFilterVolumeDelta%20%3D%20%2BinstrumentState.eqFilterVolumeDelta%3B%22%2Ch%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctconst%20panningMask%20%3D%20synth.panningDelayBufferMask%20%3E%3E%3E%200%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20panningDelayLine%20%3D%20instrumentState.panningDelayLine%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20panningDelayPos%20%3D%20instrumentState.panningDelayPos%20%26%20panningMask%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20%20%20panningVolumeL%20%20%20%20%20%20%3D%20%2BinstrumentState.panningVolumeL%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20%20%20panningVolumeR%20%20%20%20%20%20%3D%20%2BinstrumentState.panningVolumeR%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20panningVolumeDeltaL%20%3D%20%2BinstrumentState.panningVolumeDeltaL%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20panningVolumeDeltaR%20%3D%20%2BinstrumentState.panningVolumeDeltaR%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20%20%20panningOffsetL%20%20%20%20%20%20%3D%20%2BinstrumentState.panningOffsetL%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20%20%20panningOffsetR%20%20%20%20%20%20%3D%20%2BinstrumentState.panningOffsetR%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20panningOffsetDeltaL%20%3D%201.0%20-%20instrumentState.panningOffsetDeltaL%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20panningOffsetDeltaR%20%3D%201.0%20-%20instrumentState.panningOffsetDeltaR%3B%22)%2Cc%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusMask%20%3D%20synth.chorusDelayBufferMask%20%3E%3E%3E%200%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusDelayLineL%20%3D%20instrumentState.chorusDelayLineL%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusDelayLineR%20%3D%20instrumentState.chorusDelayLineR%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.chorusDelayLineDirty%20%3D%20true%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20chorusDelayPos%20%3D%20instrumentState.chorusDelayPos%20%26%20chorusMask%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctlet%20chorusVoiceMult%20%3D%20%2BinstrumentState.chorusVoiceMult%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusVoiceMultDelta%20%3D%20%2BinstrumentState.chorusVoiceMultDelta%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20chorusCombinedMult%20%3D%20%2BinstrumentState.chorusCombinedMult%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusCombinedMultDelta%20%3D%20%2BinstrumentState.chorusCombinedMultDelta%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusDuration%20%3D%20%2BConfig.chorusPeriodSeconds%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusAngle%20%3D%20Math.PI%20*%202.0%20%2F%20(chorusDuration%20*%20synth.samplesPerSecond)%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusRange%20%3D%20synth.samplesPerSecond%20*%20Config.chorusDelayRange%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusOffset0%20%3D%20synth.chorusDelayBufferSize%20-%20Config.chorusDelayOffsets%5B0%5D%5B0%5D%20*%20chorusRange%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusOffset1%20%3D%20synth.chorusDelayBufferSize%20-%20Config.chorusDelayOffsets%5B0%5D%5B1%5D%20*%20chorusRange%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusOffset2%20%3D%20synth.chorusDelayBufferSize%20-%20Config.chorusDelayOffsets%5B0%5D%5B2%5D%20*%20chorusRange%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusOffset3%20%3D%20synth.chorusDelayBufferSize%20-%20Config.chorusDelayOffsets%5B1%5D%5B0%5D%20*%20chorusRange%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusOffset4%20%3D%20synth.chorusDelayBufferSize%20-%20Config.chorusDelayOffsets%5B1%5D%5B1%5D%20*%20chorusRange%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusOffset5%20%3D%20synth.chorusDelayBufferSize%20-%20Config.chorusDelayOffsets%5B1%5D%5B2%5D%20*%20chorusRange%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20chorusPhase%20%3D%20instrumentState.chorusPhase%20%25%20(Math.PI%20*%202.0)%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20chorusTap0Index%20%3D%20chorusDelayPos%20%2B%20chorusOffset0%20-%20chorusRange%20*%20Math.sin(chorusPhase%20%2B%20Config.chorusPhaseOffsets%5B0%5D%5B0%5D)%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20chorusTap1Index%20%3D%20chorusDelayPos%20%2B%20chorusOffset1%20-%20chorusRange%20*%20Math.sin(chorusPhase%20%2B%20Config.chorusPhaseOffsets%5B0%5D%5B1%5D)%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20chorusTap2Index%20%3D%20chorusDelayPos%20%2B%20chorusOffset2%20-%20chorusRange%20*%20Math.sin(chorusPhase%20%2B%20Config.chorusPhaseOffsets%5B0%5D%5B2%5D)%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20chorusTap3Index%20%3D%20chorusDelayPos%20%2B%20chorusOffset3%20-%20chorusRange%20*%20Math.sin(chorusPhase%20%2B%20Config.chorusPhaseOffsets%5B1%5D%5B0%5D)%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20chorusTap4Index%20%3D%20chorusDelayPos%20%2B%20chorusOffset4%20-%20chorusRange%20*%20Math.sin(chorusPhase%20%2B%20Config.chorusPhaseOffsets%5B1%5D%5B1%5D)%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20chorusTap5Index%20%3D%20chorusDelayPos%20%2B%20chorusOffset5%20-%20chorusRange%20*%20Math.sin(chorusPhase%20%2B%20Config.chorusPhaseOffsets%5B1%5D%5B2%5D)%3B%5Cn%5Ct%5Ct%5Ct%5CtchorusPhase%20%2B%3D%20chorusAngle%20*%20runLength%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusTap0End%20%3D%20chorusDelayPos%20%2B%20chorusOffset0%20-%20chorusRange%20*%20Math.sin(chorusPhase%20%2B%20Config.chorusPhaseOffsets%5B0%5D%5B0%5D)%20%2B%20runLength%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusTap1End%20%3D%20chorusDelayPos%20%2B%20chorusOffset1%20-%20chorusRange%20*%20Math.sin(chorusPhase%20%2B%20Config.chorusPhaseOffsets%5B0%5D%5B1%5D)%20%2B%20runLength%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusTap2End%20%3D%20chorusDelayPos%20%2B%20chorusOffset2%20-%20chorusRange%20*%20Math.sin(chorusPhase%20%2B%20Config.chorusPhaseOffsets%5B0%5D%5B2%5D)%20%2B%20runLength%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusTap3End%20%3D%20chorusDelayPos%20%2B%20chorusOffset3%20-%20chorusRange%20*%20Math.sin(chorusPhase%20%2B%20Config.chorusPhaseOffsets%5B1%5D%5B0%5D)%20%2B%20runLength%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusTap4End%20%3D%20chorusDelayPos%20%2B%20chorusOffset4%20-%20chorusRange%20*%20Math.sin(chorusPhase%20%2B%20Config.chorusPhaseOffsets%5B1%5D%5B1%5D)%20%2B%20runLength%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusTap5End%20%3D%20chorusDelayPos%20%2B%20chorusOffset5%20-%20chorusRange%20*%20Math.sin(chorusPhase%20%2B%20Config.chorusPhaseOffsets%5B1%5D%5B2%5D)%20%2B%20runLength%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusTap0Delta%20%3D%20(chorusTap0End%20-%20chorusTap0Index)%20%2F%20runLength%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusTap1Delta%20%3D%20(chorusTap1End%20-%20chorusTap1Index)%20%2F%20runLength%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusTap2Delta%20%3D%20(chorusTap2End%20-%20chorusTap2Index)%20%2F%20runLength%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusTap3Delta%20%3D%20(chorusTap3End%20-%20chorusTap3Index)%20%2F%20runLength%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusTap4Delta%20%3D%20(chorusTap4End%20-%20chorusTap4Index)%20%2F%20runLength%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20chorusTap5Delta%20%3D%20(chorusTap5End%20-%20chorusTap5Index)%20%2F%20runLength%3B%22)%2Cp%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctlet%20echoMult%20%3D%20%2BinstrumentState.echoMult%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20echoMultDelta%20%3D%20%2BinstrumentState.echoMultDelta%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctconst%20echoDelayLineL%20%3D%20instrumentState.echoDelayLineL%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20echoDelayLineR%20%3D%20instrumentState.echoDelayLineR%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20echoMask%20%3D%20(echoDelayLineL.length%20-%201)%20%3E%3E%3E%200%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.echoDelayLineDirty%20%3D%20true%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctlet%20echoDelayPos%20%3D%20instrumentState.echoDelayPos%20%26%20echoMask%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20echoDelayOffsetStart%20%3D%20(echoDelayLineL.length%20-%20instrumentState.echoDelayOffsetStart)%20%26%20echoMask%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20echoDelayOffsetEnd%20%20%20%3D%20(echoDelayLineL.length%20-%20instrumentState.echoDelayOffsetEnd)%20%26%20echoMask%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20echoDelayOffsetRatio%20%3D%20%2BinstrumentState.echoDelayOffsetRatio%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20echoDelayOffsetRatioDelta%20%3D%20%2BinstrumentState.echoDelayOffsetRatioDelta%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctconst%20echoShelfA1%20%3D%20%2BinstrumentState.echoShelfA1%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20echoShelfB0%20%3D%20%2BinstrumentState.echoShelfB0%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20echoShelfB1%20%3D%20%2BinstrumentState.echoShelfB1%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20echoShelfSampleL%20%3D%20%2BinstrumentState.echoShelfSampleL%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20echoShelfSampleR%20%3D%20%2BinstrumentState.echoShelfSampleR%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20echoShelfPrevInputL%20%3D%20%2BinstrumentState.echoShelfPrevInputL%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20echoShelfPrevInputR%20%3D%20%2BinstrumentState.echoShelfPrevInputR%3B%22)%2Cf%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctconst%20reverbMask%20%3D%20Config.reverbDelayBufferMask%20%3E%3E%3E%200%3B%20%2F%2FTODO%3A%20Dynamic%20reverb%20buffer%20size.%5Cn%5Ct%5Ct%5Ct%5Ctconst%20reverbDelayLine%20%3D%20instrumentState.reverbDelayLine%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.reverbDelayLineDirty%20%3D%20true%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20reverbDelayPos%20%3D%20instrumentState.reverbDelayPos%20%26%20reverbMask%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctlet%20reverb%20%3D%20%2BinstrumentState.reverbMult%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20reverbDelta%20%3D%20%2BinstrumentState.reverbMultDelta%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctconst%20reverbShelfA1%20%3D%20%2BinstrumentState.reverbShelfA1%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20reverbShelfB0%20%3D%20%2BinstrumentState.reverbShelfB0%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20reverbShelfB1%20%3D%20%2BinstrumentState.reverbShelfB1%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20reverbShelfSample0%20%3D%20%2BinstrumentState.reverbShelfSample0%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20reverbShelfSample1%20%3D%20%2BinstrumentState.reverbShelfSample1%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20reverbShelfSample2%20%3D%20%2BinstrumentState.reverbShelfSample2%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20reverbShelfSample3%20%3D%20%2BinstrumentState.reverbShelfSample3%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20reverbShelfPrevInput0%20%3D%20%2BinstrumentState.reverbShelfPrevInput0%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20reverbShelfPrevInput1%20%3D%20%2BinstrumentState.reverbShelfPrevInput1%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20reverbShelfPrevInput2%20%3D%20%2BinstrumentState.reverbShelfPrevInput2%3B%5Cn%5Ct%5Ct%5Ct%5Ctlet%20reverbShelfPrevInput3%20%3D%20%2BinstrumentState.reverbShelfPrevInput3%3B%22)%2Ce%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctconst%20stopIndex%20%3D%20bufferIndex%20%2B%20runLength%3B%5Cn%5Ct%5Ct%5Ct%5Ctfor%20(let%20sampleIndex%20%3D%20bufferIndex%3B%20sampleIndex%20%3C%20stopIndex%3B%20sampleIndex%2B%2B)%20%7B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctlet%20sample%20%3D%20tempMonoInstrumentSampleBuffer%5BsampleIndex%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CttempMonoInstrumentSampleBuffer%5BsampleIndex%5D%20%3D%200.0%3B%22%2Cr%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20distortionReverse%20%3D%201.0%20-%20distortion%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20distortionNextInput%20%3D%20sample%20*%20distortionDrive%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctsample%20%3D%20distortionNextOutput%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtdistortionNextOutput%20%3D%20distortionNextInput%20%2F%20(distortionReverse%20*%20Math.abs(distortionNextInput)%20%2B%20distortion)%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtdistortionFractionalInput1%20%3D%20distortionFractionalDelayG1%20*%20distortionNextInput%20%2B%20distortionPrevInput%20-%20distortionFractionalDelayG1%20*%20distortionFractionalInput1%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtdistortionFractionalInput2%20%3D%20distortionFractionalDelayG2%20*%20distortionNextInput%20%2B%20distortionPrevInput%20-%20distortionFractionalDelayG2%20*%20distortionFractionalInput2%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtdistortionFractionalInput3%20%3D%20distortionFractionalDelayG3%20*%20distortionNextInput%20%2B%20distortionPrevInput%20-%20distortionFractionalDelayG3%20*%20distortionFractionalInput3%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20distortionOutput1%20%3D%20distortionFractionalInput1%20%2F%20(distortionReverse%20*%20Math.abs(distortionFractionalInput1)%20%2B%20distortion)%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20distortionOutput2%20%3D%20distortionFractionalInput2%20%2F%20(distortionReverse%20*%20Math.abs(distortionFractionalInput2)%20%2B%20distortion)%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20distortionOutput3%20%3D%20distortionFractionalInput3%20%2F%20(distortionReverse%20*%20Math.abs(distortionFractionalInput3)%20%2B%20distortion)%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtdistortionNextOutput%20%2B%3D%20distortionOutput1%20*%20distortionNextOutputWeight1%20%2B%20distortionOutput2%20*%20distortionNextOutputWeight2%20%2B%20distortionOutput3%20*%20distortionNextOutputWeight3%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctsample%20%2B%3D%20distortionOutput1%20*%20distortionPrevOutputWeight1%20%2B%20distortionOutput2%20*%20distortionPrevOutputWeight2%20%2B%20distortionOutput3%20*%20distortionPrevOutputWeight3%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctsample%20*%3D%20distortionOversampleCompensation%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtdistortionPrevInput%20%3D%20distortionNextInput%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctdistortion%20%2B%3D%20distortionDelta%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtdistortionDrive%20%2B%3D%20distortionDriveDelta%3B%22)%2Co%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%5CtbitcrusherPhase%20%2B%3D%20bitcrusherPhaseDelta%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctif%20(bitcrusherPhase%20%3C%201.0)%20%7B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5CtbitcrusherPrevInput%20%3D%20sample%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Ctsample%20%3D%20bitcrusherCurrentOutput%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%7D%20else%20%7B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5CtbitcrusherPhase%20%3D%20bitcrusherPhase%20%25%201.0%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Ctconst%20ratio%20%3D%20bitcrusherPhase%20%2F%20bitcrusherPhaseDelta%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Ctconst%20lerpedInput%20%3D%20sample%20%2B%20(bitcrusherPrevInput%20-%20sample)%20*%20ratio%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5CtbitcrusherPrevInput%20%3D%20sample%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Ctconst%20bitcrusherWrapLevel%20%3D%20bitcrusherFoldLevel%20*%204.0%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Ctconst%20wrappedSample%20%3D%20(((lerpedInput%20%2B%20bitcrusherFoldLevel)%20%25%20bitcrusherWrapLevel)%20%2B%20bitcrusherWrapLevel)%20%25%20bitcrusherWrapLevel%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Ctconst%20foldedSample%20%3D%20bitcrusherFoldLevel%20-%20Math.abs(bitcrusherFoldLevel%20*%202.0%20-%20wrappedSample)%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Ctconst%20scaledSample%20%3D%20foldedSample%20%2F%20bitcrusherScale%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Ctconst%20oldValue%20%3D%20bitcrusherCurrentOutput%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Ctconst%20newValue%20%3D%20(((scaledSample%20%3E%200%20%3F%20scaledSample%20%2B%201%20%3A%20scaledSample)%7C0)-.5)%20*%20bitcrusherScale%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Ctsample%20%3D%20oldValue%20%2B%20(newValue%20-%20oldValue)%20*%20ratio%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5CtbitcrusherCurrentOutput%20%3D%20newValue%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%7D%5Cn%5Ct%5Ct%5Ct%5Ct%5CtbitcrusherPhaseDelta%20*%3D%20bitcrusherPhaseDeltaScale%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtbitcrusherScale%20*%3D%20bitcrusherScaleScale%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtbitcrusherFoldLevel%20*%3D%20bitcrusherFoldLevelScale%3B%22)%2Cl%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20inputSample%20%3D%20sample%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctsample%20%3D%20applyFilters(inputSample%2C%20initialFilterInput1%2C%20initialFilterInput2%2C%20filterCount%2C%20filters)%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtinitialFilterInput2%20%3D%20initialFilterInput1%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtinitialFilterInput1%20%3D%20inputSample%3B%22)%2Ce%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctsample%20*%3D%20eqFilterVolume%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CteqFilterVolume%20%2B%3D%20eqFilterVolumeDelta%3B%22%2Ce%2B%3Dh%3F%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%5CtpanningDelayLine%5BpanningDelayPos%5D%20%3D%20sample%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20panningRatioL%20%20%3D%20panningOffsetL%20%25%201%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20panningRatioR%20%20%3D%20panningOffsetR%20%25%201%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20panningTapLA%20%20%20%3D%20panningDelayLine%5B(panningOffsetL)%20%26%20panningMask%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20panningTapLB%20%20%20%3D%20panningDelayLine%5B(panningOffsetL%20%2B%201)%20%26%20panningMask%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20panningTapRA%20%20%20%3D%20panningDelayLine%5B(panningOffsetR)%20%26%20panningMask%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20panningTapRB%20%20%20%3D%20panningDelayLine%5B(panningOffsetR%20%2B%201)%20%26%20panningMask%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20panningTapL%20%20%20%20%3D%20panningTapLA%20%2B%20(panningTapLB%20-%20panningTapLA)%20*%20panningRatioL%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20panningTapR%20%20%20%20%3D%20panningTapRA%20%2B%20(panningTapRB%20-%20panningTapRA)%20*%20panningRatioR%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctlet%20sampleL%20%3D%20panningTapL%20*%20panningVolumeL%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctlet%20sampleR%20%3D%20panningTapR%20*%20panningVolumeR%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtpanningDelayPos%20%3D%20(panningDelayPos%20%2B%201)%20%26%20panningMask%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtpanningVolumeL%20%2B%3D%20panningVolumeDeltaL%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtpanningVolumeR%20%2B%3D%20panningVolumeDeltaR%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtpanningOffsetL%20%2B%3D%20panningOffsetDeltaL%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtpanningOffsetR%20%2B%3D%20panningOffsetDeltaR%3B%22%3A%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctlet%20sampleL%20%3D%20sample%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctlet%20sampleR%20%3D%20sample%3B%22%2Cc%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap0Ratio%20%3D%20chorusTap0Index%20%25%201%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap1Ratio%20%3D%20chorusTap1Index%20%25%201%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap2Ratio%20%3D%20chorusTap2Index%20%25%201%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap3Ratio%20%3D%20chorusTap3Index%20%25%201%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap4Ratio%20%3D%20chorusTap4Index%20%25%201%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap5Ratio%20%3D%20chorusTap5Index%20%25%201%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap0A%20%3D%20chorusDelayLineL%5B(chorusTap0Index)%20%26%20chorusMask%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap0B%20%3D%20chorusDelayLineL%5B(chorusTap0Index%20%2B%201)%20%26%20chorusMask%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap1A%20%3D%20chorusDelayLineL%5B(chorusTap1Index)%20%26%20chorusMask%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap1B%20%3D%20chorusDelayLineL%5B(chorusTap1Index%20%2B%201)%20%26%20chorusMask%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap2A%20%3D%20chorusDelayLineL%5B(chorusTap2Index)%20%26%20chorusMask%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap2B%20%3D%20chorusDelayLineL%5B(chorusTap2Index%20%2B%201)%20%26%20chorusMask%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap3A%20%3D%20chorusDelayLineR%5B(chorusTap3Index)%20%26%20chorusMask%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap3B%20%3D%20chorusDelayLineR%5B(chorusTap3Index%20%2B%201)%20%26%20chorusMask%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap4A%20%3D%20chorusDelayLineR%5B(chorusTap4Index)%20%26%20chorusMask%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap4B%20%3D%20chorusDelayLineR%5B(chorusTap4Index%20%2B%201)%20%26%20chorusMask%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap5A%20%3D%20chorusDelayLineR%5B(chorusTap5Index)%20%26%20chorusMask%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap5B%20%3D%20chorusDelayLineR%5B(chorusTap5Index%20%2B%201)%20%26%20chorusMask%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap0%20%3D%20chorusTap0A%20%2B%20(chorusTap0B%20-%20chorusTap0A)%20*%20chorusTap0Ratio%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap1%20%3D%20chorusTap1A%20%2B%20(chorusTap1B%20-%20chorusTap1A)%20*%20chorusTap1Ratio%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap2%20%3D%20chorusTap2A%20%2B%20(chorusTap2B%20-%20chorusTap2A)%20*%20chorusTap2Ratio%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap3%20%3D%20chorusTap3A%20%2B%20(chorusTap3B%20-%20chorusTap3A)%20*%20chorusTap3Ratio%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap4%20%3D%20chorusTap4A%20%2B%20(chorusTap4B%20-%20chorusTap4A)%20*%20chorusTap4Ratio%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20chorusTap5%20%3D%20chorusTap5A%20%2B%20(chorusTap5B%20-%20chorusTap5A)%20*%20chorusTap5Ratio%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtchorusDelayLineL%5BchorusDelayPos%5D%20%3D%20sampleL%20*%20delayInputMult%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtchorusDelayLineR%5BchorusDelayPos%5D%20%3D%20sampleR%20*%20delayInputMult%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtsampleL%20%3D%20chorusCombinedMult%20*%20(sampleL%20%2B%20chorusVoiceMult%20*%20(chorusTap1%20-%20chorusTap0%20-%20chorusTap2))%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtsampleR%20%3D%20chorusCombinedMult%20*%20(sampleR%20%2B%20chorusVoiceMult%20*%20(chorusTap4%20-%20chorusTap3%20-%20chorusTap5))%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtchorusDelayPos%20%3D%20(chorusDelayPos%20%2B%201)%20%26%20chorusMask%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtchorusTap0Index%20%2B%3D%20chorusTap0Delta%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtchorusTap1Index%20%2B%3D%20chorusTap1Delta%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtchorusTap2Index%20%2B%3D%20chorusTap2Delta%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtchorusTap3Index%20%2B%3D%20chorusTap3Delta%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtchorusTap4Index%20%2B%3D%20chorusTap4Delta%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtchorusTap5Index%20%2B%3D%20chorusTap5Delta%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtchorusVoiceMult%20%2B%3D%20chorusVoiceMultDelta%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtchorusCombinedMult%20%2B%3D%20chorusCombinedMultDelta%3B%22)%2Cp%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20echoTapStartIndex%20%3D%20(echoDelayPos%20%2B%20echoDelayOffsetStart)%20%26%20echoMask%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20echoTapEndIndex%20%20%20%3D%20(echoDelayPos%20%2B%20echoDelayOffsetEnd%20%20)%20%26%20echoMask%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20echoTapStartL%20%3D%20echoDelayLineL%5BechoTapStartIndex%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20echoTapEndL%20%20%20%3D%20echoDelayLineL%5BechoTapEndIndex%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20echoTapStartR%20%3D%20echoDelayLineR%5BechoTapStartIndex%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20echoTapEndR%20%20%20%3D%20echoDelayLineR%5BechoTapEndIndex%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20echoTapL%20%3D%20(echoTapStartL%20%2B%20(echoTapEndL%20-%20echoTapStartL)%20*%20echoDelayOffsetRatio)%20*%20echoMult%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20echoTapR%20%3D%20(echoTapStartR%20%2B%20(echoTapEndR%20-%20echoTapStartR)%20*%20echoDelayOffsetRatio)%20*%20echoMult%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%5CtechoShelfSampleL%20%3D%20echoShelfB0%20*%20echoTapL%20%2B%20echoShelfB1%20*%20echoShelfPrevInputL%20-%20echoShelfA1%20*%20echoShelfSampleL%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtechoShelfSampleR%20%3D%20echoShelfB0%20*%20echoTapR%20%2B%20echoShelfB1%20*%20echoShelfPrevInputR%20-%20echoShelfA1%20*%20echoShelfSampleR%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtechoShelfPrevInputL%20%3D%20echoTapL%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtechoShelfPrevInputR%20%3D%20echoTapR%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtsampleL%20%2B%3D%20echoShelfSampleL%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtsampleR%20%2B%3D%20echoShelfSampleR%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%5CtechoDelayLineL%5BechoDelayPos%5D%20%3D%20sampleL%20*%20delayInputMult%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtechoDelayLineR%5BechoDelayPos%5D%20%3D%20sampleR%20*%20delayInputMult%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtechoDelayPos%20%3D%20(echoDelayPos%20%2B%201)%20%26%20echoMask%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtechoDelayOffsetRatio%20%2B%3D%20echoDelayOffsetRatioDelta%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtechoMult%20%2B%3D%20echoMultDelta%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22)%2Cf%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%2F%2F%20Reverb%2C%20implemented%20using%20a%20feedback%20delay%20network%20with%20a%20Hadamard%20matrix%20and%20lowpass%20filters.%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%2F%2F%20good%20ratios%3A%20%20%20%200.555235%20%2B%200.618033%20%2B%200.818%20%2B%20%20%201.0%20%3D%202.991268%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%2F%2F%20Delay%20lengths%3A%20%203041%20%20%20%20%20%2B%203385%20%20%20%20%20%2B%204481%20%20%2B%20%205477%20%3D%2016384%20%3D%202%5E14%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%2F%2F%20Buffer%20offsets%3A%203041%20%20%20%20-%3E%206426%20%20%20-%3E%2010907%20-%3E%2016384%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20reverbDelayPos1%20%3D%20(reverbDelayPos%20%2B%20%203041)%20%26%20reverbMask%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20reverbDelayPos2%20%3D%20(reverbDelayPos%20%2B%20%206426)%20%26%20reverbMask%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20reverbDelayPos3%20%3D%20(reverbDelayPos%20%2B%2010907)%20%26%20reverbMask%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20reverbSample0%20%3D%20(reverbDelayLine%5BreverbDelayPos%5D)%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20reverbSample1%20%3D%20reverbDelayLine%5BreverbDelayPos1%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20reverbSample2%20%3D%20reverbDelayLine%5BreverbDelayPos2%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20reverbSample3%20%3D%20reverbDelayLine%5BreverbDelayPos3%5D%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20reverbTemp0%20%3D%20-(reverbSample0%20%2B%20sampleL)%20%2B%20reverbSample1%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20reverbTemp1%20%3D%20-(reverbSample0%20%2B%20sampleR)%20-%20reverbSample1%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20reverbTemp2%20%3D%20-reverbSample2%20%2B%20reverbSample3%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20reverbTemp3%20%3D%20-reverbSample2%20-%20reverbSample3%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20reverbShelfInput0%20%3D%20(reverbTemp0%20%2B%20reverbTemp2)%20*%20reverb%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20reverbShelfInput1%20%3D%20(reverbTemp1%20%2B%20reverbTemp3)%20*%20reverb%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20reverbShelfInput2%20%3D%20(reverbTemp0%20-%20reverbTemp2)%20*%20reverb%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctconst%20reverbShelfInput3%20%3D%20(reverbTemp1%20-%20reverbTemp3)%20*%20reverb%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtreverbShelfSample0%20%3D%20reverbShelfB0%20*%20reverbShelfInput0%20%2B%20reverbShelfB1%20*%20reverbShelfPrevInput0%20-%20reverbShelfA1%20*%20reverbShelfSample0%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtreverbShelfSample1%20%3D%20reverbShelfB0%20*%20reverbShelfInput1%20%2B%20reverbShelfB1%20*%20reverbShelfPrevInput1%20-%20reverbShelfA1%20*%20reverbShelfSample1%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtreverbShelfSample2%20%3D%20reverbShelfB0%20*%20reverbShelfInput2%20%2B%20reverbShelfB1%20*%20reverbShelfPrevInput2%20-%20reverbShelfA1%20*%20reverbShelfSample2%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtreverbShelfSample3%20%3D%20reverbShelfB0%20*%20reverbShelfInput3%20%2B%20reverbShelfB1%20*%20reverbShelfPrevInput3%20-%20reverbShelfA1%20*%20reverbShelfSample3%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtreverbShelfPrevInput0%20%3D%20reverbShelfInput0%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtreverbShelfPrevInput1%20%3D%20reverbShelfInput1%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtreverbShelfPrevInput2%20%3D%20reverbShelfInput2%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtreverbShelfPrevInput3%20%3D%20reverbShelfInput3%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtreverbDelayLine%5BreverbDelayPos1%5D%20%3D%20reverbShelfSample0%20*%20delayInputMult%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtreverbDelayLine%5BreverbDelayPos2%5D%20%3D%20reverbShelfSample1%20*%20delayInputMult%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtreverbDelayLine%5BreverbDelayPos3%5D%20%3D%20reverbShelfSample2%20*%20delayInputMult%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtreverbDelayLine%5BreverbDelayPos%20%5D%20%3D%20reverbShelfSample3%20*%20delayInputMult%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtreverbDelayPos%20%3D%20(reverbDelayPos%20%2B%201)%20%26%20reverbMask%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtsampleL%20%2B%3D%20reverbSample1%20%2B%20reverbSample2%20%2B%20reverbSample3%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtsampleR%20%2B%3D%20reverbSample0%20%2B%20reverbSample2%20-%20reverbSample3%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Ctreverb%20%2B%3D%20reverbDelta%3B%22)%2Ce%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%5CtoutputDataL%5BsampleIndex%5D%20%2B%3D%20sampleL%20*%20mixVolume%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtoutputDataR%5BsampleIndex%5D%20%2B%3D%20sampleR%20*%20mixVolume%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtmixVolume%20%2B%3D%20mixVolumeDelta%3B%22%2Ct%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%5CtdelayInputMult%20%2B%3D%20delayInputMultDelta%3B%22)%2Ce%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%7D%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.mixVolume%20%3D%20mixVolume%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.eqFilterVolume%20%3D%20eqFilterVolume%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ct%2F%2F%20Avoid%20persistent%20denormal%20or%20NaN%20values%20in%20the%20delay%20buffers%20and%20filter%20history.%5Cn%5Ct%5Ct%5Ct%5Ctconst%20epsilon%20%3D%20(1.0e-24)%3B%22%2Ct%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.delayInputMult%20%3D%20delayInputMult%3B%22)%2Cr%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.distortion%20%3D%20distortion%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.distortionDrive%20%3D%20distortionDrive%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(distortionFractionalInput1)%20%7C%7C%20Math.abs(distortionFractionalInput1)%20%3C%20epsilon)%20distortionFractionalInput1%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(distortionFractionalInput2)%20%7C%7C%20Math.abs(distortionFractionalInput2)%20%3C%20epsilon)%20distortionFractionalInput2%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(distortionFractionalInput3)%20%7C%7C%20Math.abs(distortionFractionalInput3)%20%3C%20epsilon)%20distortionFractionalInput3%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(distortionPrevInput)%20%7C%7C%20Math.abs(distortionPrevInput)%20%3C%20epsilon)%20distortionPrevInput%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(distortionNextOutput)%20%7C%7C%20Math.abs(distortionNextOutput)%20%3C%20epsilon)%20distortionNextOutput%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.distortionFractionalInput1%20%3D%20distortionFractionalInput1%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.distortionFractionalInput2%20%3D%20distortionFractionalInput2%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.distortionFractionalInput3%20%3D%20distortionFractionalInput3%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.distortionPrevInput%20%3D%20distortionPrevInput%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.distortionNextOutput%20%3D%20distortionNextOutput%3B%22)%2Co%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctif%20(Math.abs(bitcrusherPrevInput)%20%3C%20epsilon)%20bitcrusherPrevInput%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(Math.abs(bitcrusherCurrentOutput)%20%3C%20epsilon)%20bitcrusherCurrentOutput%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.bitcrusherPrevInput%20%3D%20bitcrusherPrevInput%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.bitcrusherCurrentOutput%20%3D%20bitcrusherCurrentOutput%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.bitcrusherPhase%20%3D%20bitcrusherPhase%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.bitcrusherPhaseDelta%20%3D%20bitcrusherPhaseDelta%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.bitcrusherScale%20%3D%20bitcrusherScale%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.bitcrusherFoldLevel%20%3D%20bitcrusherFoldLevel%3B%22)%2Cl%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctsynth.sanitizeFilters(filters)%3B%5Cn%5Ct%5Ct%5Ct%5Ct%2F%2F%20The%20filter%20input%20here%20is%20downstream%20from%20another%20filter%20so%20we%5Cn%5Ct%5Ct%5Ct%5Ct%2F%2F%20better%20make%20sure%20it's%20safe%20too.%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!(initialFilterInput1%20%3C%20100)%20%7C%7C%20!(initialFilterInput2%20%3C%20100))%20%7B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtinitialFilterInput1%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5CtinitialFilterInput2%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ct%7D%5Cn%5Ct%5Ct%5Ct%5Ctif%20(Math.abs(initialFilterInput1)%20%3C%20epsilon)%20initialFilterInput1%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(Math.abs(initialFilterInput2)%20%3C%20epsilon)%20initialFilterInput2%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.initialEqFilterInput1%20%3D%20initialFilterInput1%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.initialEqFilterInput2%20%3D%20initialFilterInput2%3B%22)%2Ch%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5CtSynth.sanitizeDelayLine(panningDelayLine%2C%20panningDelayPos%2C%20panningMask)%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.panningDelayPos%20%3D%20panningDelayPos%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.panningVolumeL%20%3D%20panningVolumeL%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.panningVolumeR%20%3D%20panningVolumeR%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.panningOffsetL%20%3D%20panningOffsetL%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.panningOffsetR%20%3D%20panningOffsetR%3B%22)%2Cc%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5CtSynth.sanitizeDelayLine(chorusDelayLineL%2C%20chorusDelayPos%2C%20chorusMask)%3B%5Cn%5Ct%5Ct%5Ct%5CtSynth.sanitizeDelayLine(chorusDelayLineR%2C%20chorusDelayPos%2C%20chorusMask)%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.chorusPhase%20%3D%20chorusPhase%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.chorusDelayPos%20%3D%20chorusDelayPos%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.chorusVoiceMult%20%3D%20chorusVoiceMult%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.chorusCombinedMult%20%3D%20chorusCombinedMult%3B%22)%2Cp%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5CtSynth.sanitizeDelayLine(echoDelayLineL%2C%20echoDelayPos%2C%20echoMask)%3B%5Cn%5Ct%5Ct%5Ct%5CtSynth.sanitizeDelayLine(echoDelayLineR%2C%20echoDelayPos%2C%20echoMask)%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.echoDelayPos%20%3D%20echoDelayPos%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.echoMult%20%3D%20echoMult%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.echoDelayOffsetRatio%20%3D%20echoDelayOffsetRatio%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(echoShelfSampleL)%20%7C%7C%20Math.abs(echoShelfSampleL)%20%3C%20epsilon)%20echoShelfSampleL%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(echoShelfSampleR)%20%7C%7C%20Math.abs(echoShelfSampleR)%20%3C%20epsilon)%20echoShelfSampleR%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(echoShelfPrevInputL)%20%7C%7C%20Math.abs(echoShelfPrevInputL)%20%3C%20epsilon)%20echoShelfPrevInputL%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(echoShelfPrevInputR)%20%7C%7C%20Math.abs(echoShelfPrevInputR)%20%3C%20epsilon)%20echoShelfPrevInputR%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.echoShelfSampleL%20%3D%20echoShelfSampleL%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.echoShelfSampleR%20%3D%20echoShelfSampleR%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.echoShelfPrevInputL%20%3D%20echoShelfPrevInputL%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.echoShelfPrevInputR%20%3D%20echoShelfPrevInputR%3B%22)%2Cf%26%26(e%2B%3D%22%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5CtSynth.sanitizeDelayLine(reverbDelayLine%2C%20reverbDelayPos%20%20%20%20%20%20%20%20%2C%20reverbMask)%3B%5Cn%5Ct%5Ct%5Ct%5CtSynth.sanitizeDelayLine(reverbDelayLine%2C%20reverbDelayPos%20%2B%20%203041%2C%20reverbMask)%3B%5Cn%5Ct%5Ct%5Ct%5CtSynth.sanitizeDelayLine(reverbDelayLine%2C%20reverbDelayPos%20%2B%20%206426%2C%20reverbMask)%3B%5Cn%5Ct%5Ct%5Ct%5CtSynth.sanitizeDelayLine(reverbDelayLine%2C%20reverbDelayPos%20%2B%2010907%2C%20reverbMask)%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.reverbDelayPos%20%3D%20reverbDelayPos%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.reverbMult%20%3D%20reverb%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(reverbShelfSample0)%20%7C%7C%20Math.abs(reverbShelfSample0)%20%3C%20epsilon)%20reverbShelfSample0%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(reverbShelfSample1)%20%7C%7C%20Math.abs(reverbShelfSample1)%20%3C%20epsilon)%20reverbShelfSample1%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(reverbShelfSample2)%20%7C%7C%20Math.abs(reverbShelfSample2)%20%3C%20epsilon)%20reverbShelfSample2%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(reverbShelfSample3)%20%7C%7C%20Math.abs(reverbShelfSample3)%20%3C%20epsilon)%20reverbShelfSample3%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(reverbShelfPrevInput0)%20%7C%7C%20Math.abs(reverbShelfPrevInput0)%20%3C%20epsilon)%20reverbShelfPrevInput0%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(reverbShelfPrevInput1)%20%7C%7C%20Math.abs(reverbShelfPrevInput1)%20%3C%20epsilon)%20reverbShelfPrevInput1%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(reverbShelfPrevInput2)%20%7C%7C%20Math.abs(reverbShelfPrevInput2)%20%3C%20epsilon)%20reverbShelfPrevInput2%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5Ctif%20(!Number.isFinite(reverbShelfPrevInput3)%20%7C%7C%20Math.abs(reverbShelfPrevInput3)%20%3C%20epsilon)%20reverbShelfPrevInput3%20%3D%200.0%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.reverbShelfSample0%20%3D%20reverbShelfSample0%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.reverbShelfSample1%20%3D%20reverbShelfSample1%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.reverbShelfSample2%20%3D%20reverbShelfSample2%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.reverbShelfSample3%20%3D%20reverbShelfSample3%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.reverbShelfPrevInput0%20%3D%20reverbShelfPrevInput0%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.reverbShelfPrevInput1%20%3D%20reverbShelfPrevInput1%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.reverbShelfPrevInput2%20%3D%20reverbShelfPrevInput2%3B%5Cn%5Ct%5Ct%5Ct%5CtinstrumentState.reverbShelfPrevInput3%20%3D%20reverbShelfPrevInput3%3B%22)%2Ce%2B%3D%22%7D%22%2Cd%3Dnew%20Function(%22Config%22%2C%22Synth%22%2Ce)(u%2Cxe)%2Cxe.effectsFunctionCache%5Bm%5D%3Dd%7Dd(e%2Ct%2Cs%2Ci%2Cn%2Ca)%7Dstatic%20pulseWidthSynth(e%2Ct%2Cs%2Ci%2Cn)%7Bconst%20a%3De.tempMonoInstrumentSampleBuffer%2Cr%3Di.specialIntervalExpressionMult*n.unisonSign%3B1!%3Dn.unisonVoices%7C%7C0!%3Dn.unisonSpread%7C%7Cn.chord.customInterval%7C%7C(i.phases%5B1%5D%3Di.phases%5B0%5D)%3Blet%20o%3Di.phaseDeltas%5B0%5D%2Cl%3Di.phaseDeltas%5B1%5D%3Bconst%20h%3D%2Bi.phaseDeltaScales%5B0%5D%2Cu%3D%2Bi.phaseDeltaScales%5B1%5D%3Blet%20c%3D%2Bi.expression%3Bconst%20p%3D%2Bi.expressionDelta%3Blet%20f%3Di.phases%5B0%5D%251%2Cm%3Di.phases%5B1%5D%251%2Cd%3Di.pulseWidth%3Bconst%20y%3Di.pulseWidthDelta%2Cv%3Di.noteFilters%2Cg%3D0%7Ci.noteFilterCount%3Blet%20b%3D%2Bi.initialNoteFilterInput1%2CS%3D%2Bi.initialNoteFilterInput2%3Bconst%20M%3Dxe.applyFilters%2Cw%3Dt%2Bs%3Bfor(let%20e%3Dt%3Be%3Cw%3Be%2B%2B)%7Bconst%20t%3Df%251%2Cs%3D(f%2Bd)%251%2Ci%3Dm%251%2Cw%3D(m%2Bd)%251%3Blet%20k%3Ds-t%2CF%3Dw-i%3Bif(!n.aliases)%7Bif(t%3Co)k%2B%3D.5*((x%3Dt%2Fo)%2Bx-x*x-1)%3Belse%20if(t%3E1-o)%7Bk%2B%3D.5*((x%3D(t-1)%2Fo)%2Bx%2Bx*x%2B1)%7Dif(s%3Co)k-%3D.5*((x%3Ds%2Fo)%2Bx-x*x-1)%3Belse%20if(s%3E1-o)%7Bk-%3D.5*((x%3D(s-1)%2Fo)%2Bx%2Bx*x%2B1)%7Dif(i%3Cl)F%2B%3D.5*((x%3Di%2Fl)%2Bx-x*x-1)%3Belse%20if(i%3E1-l)%7BF%2B%3D.5*((x%3D(i-1)%2Fl)%2Bx%2Bx*x%2B1)%7Dif(w%3Cl)F-%3D.5*((x%3Dw%2Fl)%2Bx-x*x-1)%3Belse%20if(w%3E1-l)%7Bvar%20x%3BF-%3D.5*((x%3D(w-1)%2Fl)%2Bx%2Bx*x%2B1)%7D%7Dconst%20P%3Dk%2BF*r%2CI%3DM(P%2Cb%2CS%2Cg%2Cv)%3BS%3Db%2Cb%3DP%2Cf%2B%3Do%2Cm%2B%3Dl%2Co*%3Dh%2Cl*%3Du%2Cd%2B%3Dy%3Bconst%20q%3DI*c%3Bc%2B%3Dp%2Ca%5Be%5D%2B%3Dq%7Di.phases%5B0%5D%3Df%2Ci.phases%5B1%5D%3Dm%2Ci.phaseDeltas%5B0%5D%3Do%2Ci.phaseDeltas%5B1%5D%3Dl%2Ci.expression%3Dc%2Ci.pulseWidth%3Dd%2Ce.sanitizeFilters(v)%2Ci.initialNoteFilterInput1%3Db%2Ci.initialNoteFilterInput2%3DS%7Dstatic%20supersawSynth(e%2Ct%2Cs%2Ci%2Cn)%7Bconst%20a%3De.tempMonoInstrumentSampleBuffer%2Cr%3D0%7Cu.supersawVoiceCount%3Blet%20o%3Di.phaseDeltas%5B0%5D%3Bconst%20l%3D%2Bi.phaseDeltaScales%5B0%5D%3Blet%20h%3D%2Bi.expression%3Bconst%20c%3D%2Bi.expressionDelta%3Blet%20p%3Di.phases%2Cf%3D%2Bi.supersawDynamism%3Bconst%20m%3D%2Bi.supersawDynamismDelta%2Cd%3Di.supersawUnisonDetunes%3Blet%20y%3D%2Bi.supersawShape%3Bconst%20v%3D%2Bi.supersawShapeDelta%3Blet%20g%3D%2Bi.supersawDelayLength%3Bconst%20b%3D%2Bi.supersawDelayLengthDelta%2CS%3Di.supersawDelayLine%2CM%3DS.length-1%3E%3E0%3Blet%20w%3D0%7Ci.supersawDelayIndex%3Bw%3D(w%26M)%2BS.length%3Bconst%20x%3Di.noteFilters%2Ck%3D0%7Ci.noteFilterCount%3Blet%20F%3D%2Bi.initialNoteFilterInput1%2CP%3D%2Bi.initialNoteFilterInput2%3Bconst%20I%3Dxe.applyFilters%2Cq%3Dt%2Bs%3Bfor(let%20e%3Dt%3Be%3Cq%3Be%2B%2B)%7Blet%20t%3D(p%5B0%5D%2Bo)%251%2Cs%3Dt-.5*(1%2B(r-1)*f)%3Bif(!n.aliases)if(t%3Co)s-%3D.5*((T%3Dt%2Fo)%2BT-T*T-1)%3Belse%20if(t%3E1-o)%7Bvar%20T%3Bs-%3D.5*((T%3D(t-1)%2Fo)%2BT%2BT*T%2B1)%7Dp%5B0%5D%3Dt%3Bfor(let%20e%3D1%3Be%3Cr%3Be%2B%2B)%7Bconst%20t%3Do*d%5Be%5D%3Blet%20i%3D(p%5Be%5D%2Bt)%251%3Bif(s%2B%3Di*f%2C!n.aliases)if(i%3Ct)%7Bconst%20e%3Di%2Ft%3Bs-%3D.5*(e%2Be-e*e-1)*f%7Delse%20if(i%3E1-t)%7Bconst%20e%3D(i-1)%2Ft%3Bs-%3D.5*(e%2Be%2Be*e%2B1)*f%7Dp%5Be%5D%3Di%7DS%5Bw%26M%5D%3Ds%3Bconst%20i%3Dw-g%2Cu%3D0%7Ci%2Cq%3Du%2B1%2CD%3Di-u%2CO%3DS%5Bu%26M%5D%3Bw%2B%2B%3Bconst%20R%3Ds-(O%2B(S%5Bq%26M%5D-O)*D)*y%2Cz%3DI(R%2CF%2CP%2Ck%2Cx)%3BP%3DF%2CF%3DR%2Co*%3Dl%2Cf%2B%3Dm%2Cy%2B%3Dv%2Cg%2B%3Db%3Bconst%20A%3Dz*h%3Bh%2B%3Dc%2Ca%5Be%5D%2B%3DA%7Di.phaseDeltas%5B0%5D%3Do%2Ci.expression%3Dh%2Ci.supersawDynamism%3Df%2Ci.supersawShape%3Dy%2Ci.supersawDelayLength%3Dg%2Ci.supersawDelayIndex%3Dw%2Ce.sanitizeFilters(x)%2Ci.initialNoteFilterInput1%3DF%2Ci.initialNoteFilterInput2%3DP%7Dstatic%20noiseSynth(e%2Ct%2Cs%2Ci%2Cn)%7Bconst%20a%3De.tempMonoInstrumentSampleBuffer%2Cr%3Dn.wave%2Co%3Di.specialIntervalExpressionMult*n.unisonSign%3B1!%3Dn.unisonVoices%7C%7C0!%3Dn.unisonSpread%7C%7Cn.chord.customInterval%7C%7C(i.phases%5B1%5D%3Di.phases%5B0%5D)%3Blet%20l%3Di.phaseDeltas%5B0%5D%2Ch%3Di.phaseDeltas%5B1%5D%3Bconst%20c%3D%2Bi.phaseDeltaScales%5B0%5D%2Cp%3D%2Bi.phaseDeltaScales%5B1%5D%3Blet%20f%3D%2Bi.expression%3Bconst%20m%3D%2Bi.expressionDelta%3Blet%20d%3Di.phases%5B0%5D%251*u.chipNoiseLength%2Cy%3Di.phases%5B1%5D%251*u.chipNoiseLength%3B0%3D%3Di.phases%5B0%5D%26%26(d%3DMath.random()*u.chipNoiseLength%2C1!%3Dn.unisonVoices%7C%7C0!%3Dn.unisonSpread%7C%7Cn.chord.customInterval%7C%7C(y%3Dd))%2C0!%3Di.phases%5B1%5D%7C%7C1%3D%3Dn.unisonVoices%26%260%3D%3Dn.unisonSpread%26%26!n.chord.customInterval%7C%7C(y%3DMath.random()*u.chipNoiseLength)%3Bconst%20v%3Du.chipNoiseLength-1%3Blet%20g%3D%2Bi.noiseSampleA%2Cb%3D%2Bi.noiseSampleB%3Bconst%20S%3Di.noteFilters%2CM%3D0%7Ci.noteFilterCount%3Blet%20w%3D%2Bi.initialNoteFilterInput1%2Cx%3D%2Bi.initialNoteFilterInput2%3Bconst%20k%3Dxe.applyFilters%2CF%3DMath.min(1%2Cl*n.noisePitchFilterMult)%2CP%3DMath.min(1%2Ch*n.noisePitchFilterMult)%2CI%3Dt%2Bs%3Bfor(let%20e%3Dt%3Be%3CI%3Be%2B%2B)%7Bg%2B%3D(r%5Bd%26v%5D-g)*F%2Cb%2B%3D(r%5By%26v%5D-b)*P%3Bconst%20t%3Dg%2Bb*o%2Cs%3Dk(t%2Cw%2Cx%2CM%2CS)%3Bx%3Dw%2Cw%3Dt%2Cd%2B%3Dl%2Cy%2B%3Dh%2Cl*%3Dc%2Ch*%3Dp%3Bconst%20i%3Ds*f%3Bf%2B%3Dm%2Ca%5Be%5D%2B%3Di%7Di.phases%5B0%5D%3Dd%2Fu.chipNoiseLength%2Ci.phases%5B1%5D%3Dy%2Fu.chipNoiseLength%2Ci.phaseDeltas%5B0%5D%3Dl%2Ci.phaseDeltas%5B1%5D%3Dh%2Ci.expression%3Df%2Ci.noiseSampleA%3Dg%2Ci.noiseSampleB%3Db%2Ce.sanitizeFilters(S)%2Ci.initialNoteFilterInput1%3Dw%2Ci.initialNoteFilterInput2%3Dx%7Dstatic%20spectrumSynth(e%2Ct%2Cs%2Ci%2Cn)%7Bconst%20a%3De.tempMonoInstrumentSampleBuffer%2Cr%3Dn.wave%2Co%3D128%2Cl%3Di.specialIntervalExpressionMult*n.unisonSign%3B1!%3Dn.unisonVoices%7C%7C0!%3Dn.unisonSpread%7C%7Cn.chord.customInterval%7C%7C(i.phases%5B1%5D%3Di.phases%5B0%5D)%3Blet%20h%3Di.phaseDeltas%5B0%5D*o%2Cc%3Di.phaseDeltas%5B1%5D*o%3Bconst%20p%3D%2Bi.phaseDeltaScales%5B0%5D%2Cf%3D%2Bi.phaseDeltaScales%5B1%5D%3Blet%20m%3D%2Bi.expression%3Bconst%20d%3D%2Bi.expressionDelta%3Blet%20y%3D%2Bi.noiseSampleA%2Cv%3D%2Bi.noiseSampleB%3Bconst%20g%3Di.noteFilters%2Cb%3D0%7Ci.noteFilterCount%3Blet%20S%3D%2Bi.initialNoteFilterInput1%2CM%3D%2Bi.initialNoteFilterInput2%3Bconst%20w%3Dxe.applyFilters%3Blet%20x%3Di.phases%5B0%5D%251*u.spectrumNoiseLength%2Ck%3Di.phases%5B1%5D%251*u.spectrumNoiseLength%3B0%3D%3Di.phases%5B0%5D%26%26(x%3Dxe.findRandomZeroCrossing(r%2Cu.spectrumNoiseLength)%2Bh%2C1!%3Dn.unisonVoices%7C%7C0!%3Dn.unisonSpread%7C%7Cn.chord.customInterval%7C%7C(k%3Dx))%2C0!%3Di.phases%5B1%5D%7C%7C1%3D%3Dn.unisonVoices%26%260%3D%3Dn.unisonSpread%26%26!n.chord.customInterval%7C%7C(k%3Dxe.findRandomZeroCrossing(r%2Cu.spectrumNoiseLength)%2Bc)%3Bconst%20F%3Du.spectrumNoiseLength-1%2CP%3DMath.min(1%2Ch)%2CI%3DMath.min(1%2Cc)%2Cq%3Dt%2Bs%3Bfor(let%20e%3Dt%3Be%3Cq%3Be%2B%2B)%7Bconst%20t%3D0%7Cx%2Cs%3D0%7Ck%2Ci%3Dt%26F%2Cn%3Ds%26F%3Blet%20o%3Dr%5Bi%5D%2Cu%3Dr%5Bn%5D%3Bconst%20q%3Dx-t%2CT%3Dk-s%3Bo%2B%3D(r%5Bi%2B1%5D-o)*q%2Cu%2B%3D(r%5Bn%2B1%5D-u)*T%2Cy%2B%3D(o-y)*P%2Cv%2B%3D(u-v)*I%3Bconst%20D%3Dy%2Bv*l%2CO%3Dw(D%2CS%2CM%2Cb%2Cg)%3BM%3DS%2CS%3DD%2Cx%2B%3Dh%2Ck%2B%3Dc%2Ch*%3Dp%2Cc*%3Df%3Bconst%20R%3DO*m%3Bm%2B%3Dd%2Ca%5Be%5D%2B%3DR%7Di.phases%5B0%5D%3Dx%2Fu.spectrumNoiseLength%2Ci.phases%5B1%5D%3Dk%2Fu.spectrumNoiseLength%2Ci.phaseDeltas%5B0%5D%3Dh%2Fo%2Ci.phaseDeltas%5B1%5D%3Dc%2Fo%2Ci.expression%3Dm%2Ci.noiseSampleA%3Dy%2Ci.noiseSampleB%3Dv%2Ce.sanitizeFilters(g)%2Ci.initialNoteFilterInput1%3DS%2Ci.initialNoteFilterInput2%3DM%7Dstatic%20drumsetSynth(e%2Ct%2Cs%2Ci%2Cn)%7Bconst%20a%3De.tempMonoInstrumentSampleBuffer%3Blet%20r%3Dn.getDrumsetWave(i.drumsetPitch)%3Bconst%20o%3DMe.drumsetIndexReferenceDelta(i.drumsetPitch)%3Blet%20l%3Di.phaseDeltas%5B0%5D%2Fo%3Bconst%20h%3D%2Bi.phaseDeltaScales%5B0%5D%3Blet%20c%3D%2Bi.expression%3Bconst%20p%3D%2Bi.expressionDelta%2Cf%3Di.noteFilters%2Cm%3D0%7Ci.noteFilterCount%3Blet%20d%3D%2Bi.initialNoteFilterInput1%2Cy%3D%2Bi.initialNoteFilterInput2%3Bconst%20v%3Dxe.applyFilters%3Blet%20g%3Di.phases%5B0%5D%251*u.spectrumNoiseLength%3B0%3D%3Di.phases%5B0%5D%26%26(g%3Dxe.findRandomZeroCrossing(r%2Cu.spectrumNoiseLength)%2Bl)%3Bconst%20b%3Du.spectrumNoiseLength-1%2CS%3Dt%2Bs%3Bfor(let%20e%3Dt%3Be%3CS%3Be%2B%2B)%7Bconst%20t%3D0%7Cg%2Cs%3Dt%26b%3Blet%20i%3Dr%5Bs%5D%3Bconst%20n%3Dg-t%3Bi%2B%3D(r%5Bs%2B1%5D-i)*n%3Bconst%20o%3Di%2Cu%3Dv(o%2Cd%2Cy%2Cm%2Cf)%3By%3Dd%2Cd%3Do%2Cg%2B%3Dl%2Cl*%3Dh%3Bconst%20S%3Du*c%3Bc%2B%3Dp%2Ca%5Be%5D%2B%3DS%7Di.phases%5B0%5D%3Dg%2Fu.spectrumNoiseLength%2Ci.phaseDeltas%5B0%5D%3Dl*o%2Ci.expression%3Dc%2Ce.sanitizeFilters(f)%2Ci.initialNoteFilterInput1%3Dd%2Ci.initialNoteFilterInput2%3Dy%7Dstatic%20modSynth(e%2Ct%2Cs%2Ci%2Cn)%7Bif(!e.song)return%3Blet%20a%3Du.modCount-1-i.pitches%5B0%5D%3Bif(n.invalidModulators%5Ba%5D)return%3Blet%20r%3Dn.modulators%5Ba%5D%2Co%3D%5B%5D%3Bif(u.modulators%5Bn.modulators%5Ba%5D%5D.forSong)o.push(0)%3Belse%20if(n.modInstruments%5Ba%5D%3D%3De.song.channels%5Bn.modChannels%5Ba%5D%5D.instruments.length)for(let%20t%3D0%3Bt%3Ce.song.channels%5Bn.modChannels%5Ba%5D%5D.instruments.length%3Bt%2B%2B)o.push(t)%3Belse%20n.modInstruments%5Ba%5D%3Ee.song.channels%5Bn.modChannels%5Ba%5D%5D.instruments.length%3Fnull!%3De.song.getPattern(n.modChannels%5Ba%5D%2Ce.bar)%26%26(o%3De.song.getPattern(n.modChannels%5Ba%5D%2Ce.bar).instruments)%3Ao.push(n.modInstruments%5Ba%5D)%3Bfor(let%20t%3D0%3Bt%3Co.length%3Bt%2B%2B)%7Be.setModValue(i.expression%2Ci.expression%2Bi.expressionDelta%2Cn.modChannels%5Ba%5D%2Co%5Bt%5D%2Cr)%3Bfor(let%20s%3D0%3Bs%3Ce.heldMods.length%3Bs%2B%2B)u.modulators%5Bn.modulators%5Ba%5D%5D.forSong%3Fe.heldMods%5Bs%5D.setting%3D%3Dr%26%26e.setModValue(e.heldMods%5Bs%5D.volume%2Ce.heldMods%5Bs%5D.volume%2Cn.modChannels%5Ba%5D%2Co%5Bt%5D%2Cr)%3Ae.heldMods%5Bs%5D.channelIndex%3D%3Dn.modChannels%5Ba%5D%26%26e.heldMods%5Bs%5D.instrumentIndex%3D%3Do%5Bt%5D%26%26e.heldMods%5Bs%5D.setting%3D%3Dr%26%26e.setModValue(e.heldMods%5Bs%5D.volume%2Ce.heldMods%5Bs%5D.volume%2Cn.modChannels%5Ba%5D%2Co%5Bt%5D%2Cr)%3Bif(r%3D%3Du.modulators.dictionary%5B%22reset%20arp%22%5D.index%26%260%3D%3De.tick%26%26i.noteStartPart%3D%3De.beat*u.partsPerBeat%2Be.part)e.channels%5Bn.modChannels%5Ba%5D%5D.instruments%5Bo%5Bt%5D%5D.arpTime%3D0%3Belse%20if(r%3D%3Du.modulators.dictionary%5B%22next%20bar%22%5D.index)e.wantToSkip%3D!0%3Belse%20if(r%3D%3Du.modulators.dictionary%5B%22eq%20filter%22%5D.index)%7Bconst%20r%3De.song.channels%5Bn.modChannels%5Ba%5D%5D.instruments%5Bo%5Bt%5D%5D%3Bif(!r.eqFilterType)%7Blet%20t%3D0%7Cn.modFilterTypes%5Ba%5D%3Bif(0%3D%3Dt)%7Blet%20t%3D0%3Bconst%20n%3De.getTicksIntoBar()%2Fu.ticksPerPart%3Bfor(%3Bi.note.start%2Bi.note.pins%5Bt%5D.time%3C%3Dn%3B)t%2B%2B%3Blet%20a%3D(n-i.note.start%2Bs%2F(e.getSamplesPerTick()*u.ticksPerPart)*u.ticksPerPart-i.note.pins%5Bt-1%5D.time)%2F(i.note.pins%5Bt%5D.time-i.note.pins%5Bt-1%5D.time)%3Bnull!%3Dr.eqSubFilters%5Bi.note.pins%5Bt-1%5D.size%5D%7C%7Cnull!%3Dr.eqSubFilters%5Bi.note.pins%5Bt%5D.size%5D%3Fr.tmpEqFilterEnd%3Dfe.lerpFilters(r.eqSubFilters%5Bi.note.pins%5Bt-1%5D.size%5D%2Cr.eqSubFilters%5Bi.note.pins%5Bt%5D.size%5D%2Ca)%3Ar.tmpEqFilterEnd%3Dr.eqFilter%7Delse%7Bfor(let%20e%3D0%3Be%3Cu.filterMorphCount%3Be%2B%2B)r.tmpEqFilterEnd%3D%3Dr.eqSubFilters%5Be%5D%26%26null!%3Dr.tmpEqFilterEnd%26%26(r.tmpEqFilterEnd%3Dnew%20fe%2Cr.tmpEqFilterEnd.fromJsonObject(r.eqSubFilters%5Be%5D.toJsonObject()))%3Bnull%3D%3Dr.tmpEqFilterEnd%26%26(r.tmpEqFilterEnd%3Dnew%20fe%2Cr.tmpEqFilterEnd.fromJsonObject(r.eqFilter.toJsonObject()))%2Cr.tmpEqFilterEnd.controlPointCount%3EMath.floor((t-1)%2F2)%26%26(t%252%3Fr.tmpEqFilterEnd.controlPoints%5BMath.floor((t-1)%2F2)%5D.freq%3Di.expression%2Bi.expressionDelta%3Ar.tmpEqFilterEnd.controlPoints%5BMath.floor((t-1)%2F2)%5D.gain%3Di.expression%2Bi.expressionDelta)%7D%7D%7Delse%20if(r%3D%3Du.modulators.dictionary%5B%22note%20filter%22%5D.index)%7Bconst%20r%3De.song.channels%5Bn.modChannels%5Ba%5D%5D.instruments%5Bo%5Bt%5D%5D%3Bif(!r.noteFilterType)%7Blet%20t%3D0%7Cn.modFilterTypes%5Ba%5D%3Bif(0%3D%3Dt)%7Blet%20t%3D0%3Bconst%20n%3De.getTicksIntoBar()%2Fu.ticksPerPart%3Bfor(%3Bi.note.start%2Bi.note.pins%5Bt%5D.time%3C%3Dn%3B)t%2B%2B%3Blet%20a%3D(n-i.note.start%2Bs%2F(e.getSamplesPerTick()*u.ticksPerPart)*u.ticksPerPart-i.note.pins%5Bt-1%5D.time)%2F(i.note.pins%5Bt%5D.time-i.note.pins%5Bt-1%5D.time)%3Bnull!%3Dr.noteSubFilters%5Bi.note.pins%5Bt-1%5D.size%5D%7C%7Cnull!%3Dr.noteSubFilters%5Bi.note.pins%5Bt%5D.size%5D%3Fr.tmpNoteFilterEnd%3Dfe.lerpFilters(r.noteSubFilters%5Bi.note.pins%5Bt-1%5D.size%5D%2Cr.noteSubFilters%5Bi.note.pins%5Bt%5D.size%5D%2Ca)%3Ar.tmpNoteFilterEnd%3Dr.noteFilter%7Delse%7Bfor(let%20e%3D0%3Be%3Cu.filterMorphCount%3Be%2B%2B)r.tmpNoteFilterEnd%3D%3Dr.noteSubFilters%5Be%5D%26%26null!%3Dr.tmpNoteFilterEnd%26%26(r.tmpNoteFilterEnd%3Dnew%20fe%2Cr.tmpNoteFilterEnd.fromJsonObject(r.noteSubFilters%5Be%5D.toJsonObject()))%3Bnull%3D%3Dr.tmpNoteFilterEnd%26%26(r.tmpNoteFilterEnd%3Dnew%20fe%2Cr.tmpNoteFilterEnd.fromJsonObject(r.noteFilter.toJsonObject()))%2Cr.tmpNoteFilterEnd.controlPointCount%3EMath.floor((t-1)%2F2)%26%26(t%252%3Fr.tmpNoteFilterEnd.controlPoints%5BMath.floor((t-1)%2F2)%5D.freq%3Di.expression%2Bi.expressionDelta%3Ar.tmpNoteFilterEnd.controlPoints%5BMath.floor((t-1)%2F2)%5D.gain%3Di.expression%2Bi.expressionDelta)%7D%7D%7D%7D%7Dstatic%20findRandomZeroCrossing(e%2Ct)%7Blet%20s%3DMath.random()*t%3Bconst%20i%3Dt-1%3Blet%20n%3Ds%26i%2Ca%3De%5Bn%5D%3Bfor(let%20r%3D128%3Br%3E0%3Br--)%7Bconst%20r%3Dn%2B16%26i%2Co%3De%5Br%5D%3Bif(a*o%3C%3D0)%7Bfor(let%20r%3D0%3Br%3C16%3Br%2B%2B)%7Bconst%20r%3Dn%2B1%26i%2Co%3De%5Br%5D%3Bif(a*o%3C%3D0)%7Bconst%20e%3Do-a%3Bs%3Dn%2CMath.abs(e)%3E1e-8%26%26(s%2B%3D-a%2Fe)%2Cs%3DMath.max(0%2Cs)%25t%3Bbreak%7Dn%3Dr%2Ca%3Do%7Dbreak%7Dn%3Dr%2Ca%3Do%7Dreturn%20s%7Dstatic%20instrumentVolumeToVolumeMult(e)%7Breturn%20e%3D%3D-u.volumeRange%2F2%3F0%3AMath.pow(2%2Cu.volumeLogScale*e)%7Dstatic%20volumeMultToInstrumentVolume(e)%7Breturn%20e%3C%3D0%3F-u.volumeRange%2F2%3AMath.min(u.volumeRange%2CMath.log(e)%2FMath.LN2%2Fu.volumeLogScale)%7Dstatic%20noteSizeToVolumeMult(e)%7Breturn%20Math.pow(Math.max(0%2Ce)%2Fu.noteSizeMax%2C1.5)%7Dstatic%20volumeMultToNoteSize(e)%7Breturn%20Math.pow(Math.max(0%2Ce)%2C1%2F1.5)*u.noteSizeMax%7Dstatic%20fadeInSettingToSeconds(e)%7Breturn.0125*(.95*e%2B.05*e*e)%7Dstatic%20secondsToFadeInSetting(e)%7Breturn%20%24(0%2Cu.fadeInRange%2CMath.round((-.95%2BMath.sqrt(.9025%2B.2*e%2F.0125))%2F.1))%7Dstatic%20fadeOutSettingToTicks(e)%7Breturn%20u.fadeOutTicks%5Be%5D%7Dstatic%20ticksToFadeOutSetting(e)%7Blet%20t%3Du.fadeOutTicks%5B0%5D%3Bif(e%3C%3Dt)return%200%3Bfor(let%20s%3D1%3Bs%3Cu.fadeOutTicks.length%3Bs%2B%2B)%7Blet%20i%3Du.fadeOutTicks%5Bs%5D%3Bif(e%3C%3Di)return%20e%3C(t%2Bi)%2F2%3Fs-1%3As%3Bt%3Di%7Dreturn%20u.fadeOutTicks.length-1%7Dstatic%20detuneToCents(e)%7Breturn%20e-u.detuneCenter%7Dstatic%20centsToDetune(e)%7Breturn%20e%2Bu.detuneCenter%7Dstatic%20getOperatorWave(e%2Ct)%7Breturn%202!%3De%3Fu.operatorWaves%5Be%5D%3Au.pwmOperatorWaves%5Bt%5D%7DgetSamplesPerTick()%7Bif(null%3D%3Dthis.song)return%200%3Blet%20e%3Dthis.song.getBeatsPerMinute()%3Breturn%20this.isModActive(u.modulators.dictionary.tempo.index)%26%26(e%3Dthis.getModValue(u.modulators.dictionary.tempo.index))%2Cthis.getSamplesPerTickSpecificBPM(e)%7DgetSamplesPerTickSpecificBPM(e)%7Bconst%20t%3De%2F60%2Cs%3Du.partsPerBeat*t%2Ci%3Du.ticksPerPart*s%3Breturn%20this.samplesPerSecond%2Fi%7Dstatic%20fittingPowerOfTwo(e)%7Breturn%201%3C%3C32-Math.clz32(Math.ceil(e)-1)%7DsanitizeFilters(e)%7Blet%20t%3D!1%3Bfor(const%20s%20of%20e)%7Bconst%20e%3DMath.abs(s.output1)%2Ci%3DMath.abs(s.output2)%3Bif(!(e%3C100%26%26i%3C100))%7Bt%3D!0%3Bbreak%7De%3CW%26%26(s.output1%3D0)%2Ci%3CW%26%26(s.output2%3D0)%7Dif(t)for(const%20t%20of%20e)t.output1%3D0%2Ct.output2%3D0%7Dstatic%20sanitizeDelayLine(e%2Ct%2Cs)%7Bfor(%3B%3B)%7Bconst%20i%3D--t%26s%2Cn%3DMath.abs(e%5Bi%5D)%3Bif(Number.isFinite(n)%26%26(0%3D%3Dn%7C%7Cn%3E%3DW))break%3Be%5Bi%5D%3D0%7D%7Dstatic%20applyFilters(e%2Ct%2Cs%2Ci%2Cn)%7Bfor(let%20a%3D0%3Ba%3Ci%3Ba%2B%2B)%7Bconst%20i%3Dn%5Ba%5D%2Cr%3Di.output1%2Co%3Di.output2%2Cl%3Di.a1%2Ch%3Di.a2%2Cu%3Di.b0%2Cc%3Di.b1%2Cp%3Di.b2%3Be%3Du*e%2Bc*t%2Bp*s-l*r-h*o%2Ci.a1%3Dl%2Bi.a1Delta%2Ci.a2%3Dh%2Bi.a2Delta%2Ci.useMultiplicativeInputCoefficients%3F(i.b0%3Du*i.b0Delta%2Ci.b1%3Dc*i.b1Delta%2Ci.b2%3Dp*i.b2Delta)%3A(i.b0%3Du%2Bi.b0Delta%2Ci.b1%3Dc%2Bi.b1Delta%2Ci.b2%3Dp%2Bi.b2Delta)%2Ci.output2%3Dr%2Ci.output1%3De%2Cs%3Do%2Ct%3Dr%7Dreturn%20e%7D%7Dreturn%20xe.tempFilterStartCoefficients%3Dnew%20N%2Cxe.tempFilterEndCoefficients%3Dnew%20N%2Cxe.fmSynthFunctionCache%3D%7B%7D%2Cxe.fm6SynthFunctionCache%3D%7B%7D%2Cxe.effectsFunctionCache%3DArray(128).fill(void%200)%2Cxe.pickedStringFunctionCache%3DArray(3).fill(void%200)%2Cxe.fmSourceTemplate%3D(%22%5Cn%5Ct%5Ctconst%20data%20%3D%20synth.tempMonoInstrumentSampleBuffer%3B%5Cn%5Ct%5Ctconst%20sineWave%20%3D%20Config.sineWave%3B%5Cn%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%2F%2F%20I'm%20adding%201000%20to%20the%20phase%20to%20ensure%20that%20it's%20never%20negative%20even%20when%20modulated%20by%20other%20waves%20because%20negative%20numbers%20don't%20work%20with%20the%20modulus%20operator%20very%20well.%5Cn%5Ct%5Ctlet%20operator%23Phase%20%20%20%20%20%20%20%3D%20%2B((tone.phases%5B%23%5D%20%25%201)%20%2B%201000)%20*%20%22%2Bu.sineWaveLength%2B%22%3B%5Cn%5Ct%5Ctlet%20operator%23PhaseDelta%20%20%3D%20%2Btone.phaseDeltas%5B%23%5D%20*%20%22%2Bu.sineWaveLength%2B%22%3B%5Cn%5Ct%5Ctlet%20operator%23PhaseDeltaScale%20%3D%20%2Btone.phaseDeltaScales%5B%23%5D%3B%5Cn%5Ct%5Ctlet%20operator%23OutputMult%20%20%3D%20%2Btone.operatorExpressions%5B%23%5D%3B%5Cn%5Ct%5Ctconst%20operator%23OutputDelta%20%3D%20%2Btone.operatorExpressionDeltas%5B%23%5D%3B%5Cn%5Ct%5Ctlet%20operator%23Output%20%20%20%20%20%20%3D%20%2Btone.feedbackOutputs%5B%23%5D%3B%5Cn%20%20%20%20%20%20%20%20const%20operator%23Wave%20%20%20%20%20%20%3D%20tone.operatorWaves%5B%23%5D.samples%3B%5Cn%5Ct%5Ctlet%20feedbackMult%20%20%20%20%20%20%20%20%20%3D%20%2Btone.feedbackMult%3B%5Cn%5Ct%5Ctconst%20feedbackDelta%20%20%20%20%20%20%20%20%3D%20%2Btone.feedbackDelta%3B%5Cn%20%20%20%20%20%20%20%20let%20expression%20%3D%20%2Btone.expression%3B%5Cn%5Ct%5Ctconst%20expressionDelta%20%3D%20%2Btone.expressionDelta%3B%5Cn%5Ct%5Ct%5Cn%5Ct%5Ctconst%20filters%20%3D%20tone.noteFilters%3B%5Cn%5Ct%5Ctconst%20filterCount%20%3D%20tone.noteFilterCount%7C0%3B%5Cn%5Ct%5Ctlet%20initialFilterInput1%20%3D%20%2Btone.initialNoteFilterInput1%3B%5Cn%5Ct%5Ctlet%20initialFilterInput2%20%3D%20%2Btone.initialNoteFilterInput2%3B%5Cn%5Ct%5Ctconst%20applyFilters%20%3D%20Synth.applyFilters%3B%5Cn%5Ct%5Ct%5Cn%5Ct%5Ctconst%20stopIndex%20%3D%20bufferIndex%20%2B%20roundedSamplesPerTick%3B%5Cn%5Ct%5Ctfor%20(let%20sampleIndex%20%3D%20bufferIndex%3B%20sampleIndex%20%3C%20stopIndex%3B%20sampleIndex%2B%2B)%20%7B%5Cn%5Ct%5Ct%5Ct%5Ct%2F%2F%20INSERT%20OPERATOR%20COMPUTATION%20HERE%5Cn%5Ct%5Ct%5Ct%5Ctconst%20fmOutput%20%3D%20(%2F*operator%23Scaled*%2F)%3B%20%2F%2F%20CARRIER%20OUTPUTS%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ctconst%20inputSample%20%3D%20fmOutput%3B%5Cn%5Ct%5Ct%5Ctconst%20sample%20%3D%20applyFilters(inputSample%2C%20initialFilterInput1%2C%20initialFilterInput2%2C%20filterCount%2C%20filters)%3B%5Cn%5Ct%5Ct%5CtinitialFilterInput2%20%3D%20initialFilterInput1%3B%5Cn%5Ct%5Ct%5CtinitialFilterInput1%20%3D%20inputSample%3B%5Cn%5Ct%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ct%5CtfeedbackMult%20%2B%3D%20feedbackDelta%3B%5Cn%5Ct%5Ct%5Ct%5Ctoperator%23OutputMult%20%2B%3D%20operator%23OutputDelta%3B%5Cn%5Ct%5Ct%5Ct%5Ctoperator%23Phase%20%2B%3D%20operator%23PhaseDelta%3B%5Cn%5Ct%5Ct%5Ctoperator%23PhaseDelta%20*%3D%20operator%23PhaseDeltaScale%3B%5Cn%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Ctconst%20output%20%3D%20sample%20*%20expression%3B%5Cn%5Ct%5Ct%5Ctexpression%20%2B%3D%20expressionDelta%3B%5Cn%5Cn%5Ct%5Ct%5Ctdata%5BsampleIndex%5D%20%2B%3D%20output%3B%5Cn%5Ct%5Ct%5Ct%7D%5Cn%5Ct%5Ct%5Ct%5Cn%5Ct%5Ct%5Cttone.phases%5B%23%5D%20%3D%20operator%23Phase%20%2F%20%22%2Bu.sineWaveLength%2B%22%3B%5Cn%5Ct%5Ct%5Cttone.phaseDeltas%5B%23%5D%20%3D%20operator%23PhaseDelta%20%2F%20%22%2Bu.sineWaveLength%2B%22%3B%5Cn%5Ct%5Ct%5Cttone.operatorExpressions%5B%23%5D%20%3D%20operator%23OutputMult%3B%5Cn%5Ct%5Ct%20%20%20%20tone.feedbackOutputs%5B%23%5D%20%3D%20operator%23Output%3B%5Cn%5Ct%5Ct%20%20%20%20tone.feedbackMult%20%3D%20feedbackMult%3B%5Cn%5Ct%5Ct%20%20%20%20tone.expression%20%3D%20expression%3B%5Cn%5Ct%5Ct%5Ct%5Cn%5Ct%5Ctsynth.sanitizeFilters(filters)%3B%5Cn%5Ct%5Cttone.initialNoteFilterInput1%20%3D%20initialFilterInput1%3B%5Cn%5Ct%5Cttone.initialNoteFilterInput2%20%3D%20initialFilterInput2%3B%5Cn%5Ct%5Ct%22).split(%22%5Cn%22)%2Cxe.operatorSourceTemplate%3D(%22%5Cn%5Ct%5Ct%5Ct%5Ctconst%20operator%23PhaseMix%20%3D%20operator%23Phase%2F*%20%2B%20operator%40Scaled*%2F%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20operator%23PhaseInt%20%3D%20operator%23PhaseMix%7C0%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20operator%23Index%20%20%20%20%3D%20operator%23PhaseInt%20%26%20%22%2Bu.sineWaveMask%2B%22%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20operator%23Sample%20%20%20%3D%20operator%23Wave%5Boperator%23Index%5D%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20operator%23Output%20%20%20%20%20%20%20%20%20%3D%20operator%23Sample%20%2B%20(operator%23Wave%5Boperator%23Index%20%2B%201%5D%20-%20operator%23Sample)%20*%20(operator%23PhaseMix%20-%20operator%23PhaseInt)%3B%5Cn%5Ct%5Ct%5Ct%5Ctconst%20operator%23Scaled%20%20%20%3D%20operator%23OutputMult%20*%20operator%23Output%3B%5Cn%5Ct%5Ct%22).split(%22%5Cn%22)%2Ce.Channel%3Dye%2Ce.Config%3Du%2Ce.CustomAlgorithm%3Dre%2Ce.CustomFeedBack%3Doe%2Ce.EnvelopeSettings%3Dme%2Ce.FilterControlPoint%3Dpe%2Ce.FilterSettings%3Dfe%2Ce.HarmonicsWave%3Due%2Ce.Instrument%3Dde%2Ce.Note%3Die%2Ce.Operator%3Dae%2Ce.Pattern%3Dne%2Ce.Song%3Dve%2Ce.SpectrumWave%3Dle%2Ce.Synth%3Dxe%2Ce.clamp%3D%24%2Ce.makeNotePin%3Dse%2Ce.parseFloatWithDefault%3DU%2Ce.parseIntWithDefault%3D_%2CObject.defineProperty(e%2C%22Z%22%2C%7Bvalue%3A!0%7D)%2Ce%7D(%7B%7D)%3B%0A%20%20%2F%2Fthe%20above%20minified%20code%20is%20a%20compiled%20version%20of%20https%3A%2F%2Fgithub.com%2FDogeisCut%2Fultraabox-for-turbowarp%2Fblob%2Fmain%2Fsynth%2Fsynth.ts%0A%20%20%2F%2Fwhich%20is%20based%20on%20https%3A%2F%2Fgithub.com%2Fultraabox%2Fultrabox_typescript%2Fblob%2Fmain%2Fsynth%2Fsynth.ts%0A%20%20%2F*%20eslint-enable*%2F%0A%0A%20%20const%20defaultSong%20%3D%0A%20%20%20%20%22j5N0sSuper%2520Mario%2520Bros%2520Themen310s0k7l00e0ft2-a7g0fj07r1O_U00000000i0o443T0v0pu00f160qw42c00Oad030w2h0E0T0v0pu00f160qw42c00Oad030w2h0E0T0v0zu00f160qw42c00Oad030w1h0E0T2v0pu02f1a0qM412c00Oad040w0E0b4z8Ql6hkpUsiczhkp5hDxN8Od5hAl6u74z8Ql6hkpUsp267FAu7k2ewhOl4zG7dWgLFBYAnMp70Asxi8Zgbn5HyM979kyeChSrlAFBZigHi17n8V6Tp8Wd6PbX5yNo8X171At2wpsLF5ZoLHDdW2whQ2exh8WB8zIn3bQB0zE4t2FkeDFAugk2ewhQa171CnicL8y-ibXhvh8Xh78kyfg2RhqMI0hOd8zEAty0I5cLxp2Xn8X17nHSieRjFO-NoIm2eMhM97gE6nbV8LHBZwVLik2ewhQ80zJQOexrcLkk2ewhQaBgWuChWGwhQ2exg8W9BQ3bQ1v95YAnMh7j8V2AhWwm45wxo0zIQyeChOk3patEnQi-EhSi-zgcLj5ZALGkPFZchMhv05ZcLGk2eEhVcnMxvm8WxvkbVczRhvlbWF7lbWFvl8M0%22%3B%0A%0A%20%20var%20url%20%3D%20defaultSong%3B%0A%0A%20%20let%20synths%20%3D%20%5B%5D%3B%0A%20%20%2F%2F%40ts-ignore%0A%20%20var%20synth%20%3D%20new%20beepbox.Synth(url)%3B%0A%20%20synths.push(synth)%3B%0A%20%20synth.volume%20%3D%201%3B%0A%20%20synth.extensionVolume%20%3D%201%3B%0A%0A%20%20var%20targetSynth%20%3D%200%3B%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0A%0A%20%20const%20synthLimit%20%3D%20299%3B%0A%0A%20%20const%20icon%20%3D%0A%20%20%20%20%22data%3Aimage%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAANeSURBVFhHxZddSFRREMdnd0UDMZV8MIpUIoIK%2BgCFCPKjgj4IJIgeKiJ6iMAHJaR6KXoIjB4MIh%2FToCeJUCICqVyxhxSiIqEES0kIikSzD2vbdZv%2F7NzLveu517vbkj8Yd%2Baue2bOnHPmzA1RcEpYGllqWSpZ6licRFkmWAZYelhmWHICnHWyJDMU%2FAa%2F9cUvA5jxJZZmsZQ9629QTUUTJdlFAm6YMI8SCRM9n7xFfW%2FO8PNY6osU11kusxgz4hXAFhbMAJ9UVLCaWuon6Xcc1uLkcTAdg%2Btoem5Mn9BLlpP66cIUAJz2syAD1Nrwh8LhPKgZg8HbHtkukIF6FlcQHKsL23kkvIzO705m7Rxghc7xGPmRYpiYEMaWrFo4A8A%2FIO3i%2FGz9TxkgFzTXTVNh%2Fkqotg8YwBkANpxE19owR6GQ1%2FbIHIzVtPOjWuIDvgTLC47LOJQga977%2Bgi9%2FdStVoq1ZQfo0OZePhERfbKQ%2BWSCrj22x65imbAyIBFht%2Fs5j45doKu8qdKdg3dfHsjg90eO6ZOFILg1pdiHgvhEBrAe0zAu7k16HrX2aDHF4rNqLUaIN9%2B86m5wRK%2F02ctbigygvApezjHz4M5Bkrpf7FfdTdwdVyMCQG2XCufF0ESbasEZn3poLDLg1PYR1agWAUi9Rnk1gQ2XLR1PK1RzU1a4UTWqRAByq6G2mzBtuKDM%2Fvqgmid1CECwLpb%2FjR3AUmEHgCt1KUAA6GTkPjeBCpctRQWrVHPjmGsUbtFGSTNhAuU1W07veK%2Bam6kfo6qlSjF6OOlkTKB8big%2FqlZwypdXc1bz1XJze7haNRpAAGggpY1CmTRxcNMd%2FpvZJjlRM6yaG%2By1WOKbWtQDl%2BhUumChjfICtb1qxT61vMHM0YR4ce%2FVYdXE54w1Lfs6RhfkVxLwA1S49CKDDYc190q7BW5TRa5jZ17bWaQD9pvBv%2BBwjk65BYpz1dE6S8PY3l%2FCpTl3QWCszmdb1RIf8CU4A8BeQOs8E0t8pZuD5jOcDV1D2%2Bjzd5mb7QMGcC6Bhbst3xX3bbMWw5F2Y1tuCgAgCPvFBG3U8eon6c2EJzhq2O2jn%2B%2FqE3Ea%2BMXEAhlY8GqGZsJxn9tgIFQ4FBnHOQe%2Br2ZBWLKX03SQkRy%2FnhP9BQw4Deb2HqWcAAAAAElFTkSuQmCC%22%3B%0A%0A%20%20function%20isValidJSON(str)%20%7B%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20JSON.parse(str)%3B%0A%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20class%20BeepBoxPlayer%20%7B%0A%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20runtime.on(%22PROJECT_STOP_ALL%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.clearSynths()%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20runtime.on(%22PROJECT_START%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20this.clearSynths()%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22dogeiscutbeepboxplayer%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22BeepBox%20Player%22%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%23000000%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%237744FF%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%237744FF%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%3A%20icon%2C%0A%20%20%20%20%20%20%20%20blockIconURI%3A%20icon%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22current%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22current%20%5BWHAT%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WHAT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22CURRENT_MENU%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22song%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22song%20%5BWHAT%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WHAT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22SONG_MENU%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22playingSong%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22playing%20song%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setSong%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20song%20to%20%5BSONG%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SONG%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20defaultSong%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setCurrentValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20current%20%5BWHAT%5D%20to%20%5BVALUE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WHAT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22CURRENT_MENU_LIMITED%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%202%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setSongValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20song%20%5BWHAT%5D%20to%20%5BVALUE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WHAT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22SONG_MENU_LIMITED%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22150%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22whenCurrentChanges%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.HAT%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22when%20current%20%5BWHAT%5D%20of%20synth%20%5BSYNTH%5D%20changes%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WHAT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22CURRENT_MENU%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22bar%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SYNTH%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22SYNTHS_MENU%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22playSong%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22play%20current%20song%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22playSongWait%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22play%20current%20song%20until%20done%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22pauseSong%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22pause%20current%20song%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22stopSong%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22stop%20current%20song%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22restartSong%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22restart%20current%20song%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setSongVolume%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20song%20volume%20to%20%5BVOLUME%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VOLUME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeSongVolume%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22change%20song%20volume%20by%20%5BVOLUME%5D%25%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VOLUME%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2025%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22muteChannel%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22mute%20channel%20%5BCHANNEL%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CHANNEL%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22CHANNELS_MENU%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22unmuteChannel%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22unmute%20channel%20%5BCHANNEL%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20CHANNEL%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22CHANNELS_MENU%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22enableLooping%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22enable%20looping%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22disableLooping%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22disable%20looping%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22looping%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22looping%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22synths%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22synths%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22targetSynth%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22target%20synth%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22createSynth%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22create%20new%20synth%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setTargetSynth%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20target%20synth%20to%20%5BSYNTH%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SYNTH%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22SYNTHS_MENU%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22deleteSynth%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22delete%20synth%20%5BSYNTH%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SYNTH%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22SYNTHS_MENU%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22clearSynths%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22clear%20synths%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20CURRENT_MENU%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22song%22%2C%20%22bar%22%2C%20%22beat%22%2C%20%22part%22%2C%20%22tick%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20SONG_MENU%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22tempo%22%2C%20%22channels%22%2C%20%22volume%22%2C%20%22title%22%2C%20%22json%22%2C%20%22url%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20CURRENT_MENU_LIMITED%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22bar%22%2C%20%22beat%22%2C%20%22part%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20SONG_MENU_LIMITED%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22tempo%22%2C%20%22title%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20SYNTHS_MENU%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%22getSynths%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20CHANNELS_MENU%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%22getChannels%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20caluclateSongCompletionPercentage()%20%7B%0A%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20(synth.bar%20*%2024%20*%20synth.beatsPerBar%20%2B%0A%20%20%20%20%20%20%20%20%20%20synth.beat%20*%2024%20%2B%0A%20%20%20%20%20%20%20%20%20%20synth.part%20%2B%0A%20%20%20%20%20%20%20%20%20%20synth.tick%20%2F%202)%20%2F%0A%20%20%20%20%20%20%20%20(synth.beatsPerBar%20*%2024%20*%20synth.barCount)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20samplesToTime(samples)%20%7B%0A%20%20%20%20%20%20const%20rawSeconds%20%3D%20Math.round(samples%20%2F%20synth.samplesPerSecond)%3B%0A%20%20%20%20%20%20const%20rawSecondsUnrounded%20%3D%20samples%20%2F%20synth.samplesPerSecond%3B%0A%20%20%20%20%20%20const%20seconds%20%3D%20rawSeconds%20%25%2060%3B%0A%20%20%20%20%20%20const%20minutes%20%3D%20Math.floor(rawSeconds%20%2F%2060)%3B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20rawSeconds%3A%20rawSeconds%2C%0A%20%20%20%20%20%20%20%20rawSecondsUnrounded%3A%20rawSecondsUnrounded%2C%0A%20%20%20%20%20%20%20%20minutes%3A%20minutes%2C%0A%20%20%20%20%20%20%20%20fullTimeString%3A%20minutes%20%2B%20%22%3A%22%20%2B%20(seconds%20%3C%2010%20%3F%20%220%22%20%3A%20%22%22)%20%2B%20seconds%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F*menus*%2F%0A%0A%20%20%20%20getSynths()%20%7B%0A%20%20%20%20%20%20const%20gettingSynths%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20for%20(let%20i%20in%20synths)%20%7B%0A%20%20%20%20%20%20%20%20let%20javascriptMoment%20%3D%20Scratch.Cast.toNumber(i)%20%2B%201%3B%0A%20%20%20%20%20%20%20%20gettingSynths.push(%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.Cast.toString(javascriptMoment)%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20Scratch.Cast.toString(javascriptMoment)%2C%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20gettingSynths%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getChannels()%20%7B%0A%20%20%20%20%20%20const%20gettingChannels%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20for%20(let%20i%20in%20synth.song.channels)%20%7B%0A%20%20%20%20%20%20%20%20let%20javascriptMoment%20%3D%20Scratch.Cast.toNumber(i)%20%2B%201%3B%0A%20%20%20%20%20%20%20%20gettingChannels.push(%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.Cast.toString(javascriptMoment)%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20Scratch.Cast.toString(javascriptMoment)%2C%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20gettingChannels.push(%7B%20text%3A%20%22all%22%2C%20value%3A%20%220%22%20%7D)%3B%0A%20%20%20%20%20%20return%20gettingChannels%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20current(args)%20%7B%0A%20%20%20%20%20%20switch%20(args.WHAT)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22song%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20Scratch.Cast.toString(url)%3B%0A%20%20%20%20%20%20%20%20case%20%22bar%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20synth.bar%3B%0A%20%20%20%20%20%20%20%20case%20%22beat%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20synth.beat%3B%0A%20%20%20%20%20%20%20%20case%20%22part%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20synth.part%3B%0A%20%20%20%20%20%20%20%20case%20%22tick%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20synth.tick%3B%0A%20%20%20%20%20%20%20%20case%20%22progress%20ratio%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20this.caluclateSongCompletionPercentage()%3B%0A%20%20%20%20%20%20%20%20case%20%22progress%20seconds%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20this.samplesToTime(synth.getTotalSamples(true%2C%20true%2C%200))%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22rawSecondsUnrounded%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%20*%20this.caluclateSongCompletionPercentage()%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20setCurrentValue(args)%20%7B%0A%20%20%20%20%20%20switch%20(args.WHAT)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22bar%22%3A%0A%20%20%20%20%20%20%20%20%20%20synth.bar%20%3D%20Math.min(Math.max(args.VALUE%2C%200)%2C%20synth.song.barCount)%3B%0A%20%20%20%20%20%20%20%20%20%20synth.snapToBar()%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22beat%22%3A%0A%20%20%20%20%20%20%20%20%20%20synth.beat%20%3D%20Math.min(%0A%20%20%20%20%20%20%20%20%20%20%20%20Math.max(args.VALUE%2C%200)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20synth.song.beatsPerBar%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20synth.part%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20synth.tick%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20synth.tickSampleCountdown%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22part%22%3A%0A%20%20%20%20%20%20%20%20%20%20synth.part%20%3D%20args.VALUE%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20song(args)%20%7B%0A%20%20%20%20%20%20switch%20(args.WHAT)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22tempo%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20synth.song.tempo%3B%0A%20%20%20%20%20%20%20%20case%20%22channels%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20synth.song.getChannelCount()%3B%0A%20%20%20%20%20%20%20%20case%20%22volume%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20synth.volume%20*%20100%3B%0A%20%20%20%20%20%20%20%20case%20%22title%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20synth.song.title%3B%0A%20%20%20%20%20%20%20%20case%20%22json%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20JSON.stringify(synth.song.toJsonObject())%3B%0A%20%20%20%20%20%20%20%20case%20%22url%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20synth.song.toBase64String()%3B%0A%20%20%20%20%20%20%20%20case%20%22samples%20()%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20synth.getTotalSamples%3B%0A%20%20%20%20%20%20%20%20case%20%22length%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20this.samplesToTime(synth.getTotalSamples(true%2C%20true%2C%200))%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22rawSecondsUnrounded%22%0A%20%20%20%20%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20setSongValue(args)%20%7B%0A%20%20%20%20%20%20switch%20(args.WHAT)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22tempo%22%3A%0A%20%20%20%20%20%20%20%20%20%20synth.song.tempo%20%3D%20Math.max(Scratch.Cast.toNumber(args.VALUE)%2C%200)%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20case%20%22title%22%3A%0A%20%20%20%20%20%20%20%20%20%20synth.song.title%20%3D%20Scratch.Cast.toString(args.VALUE)%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F*hats*%2F%0A%0A%20%20%20%20whenCurrentChanges(args)%20%7B%0A%20%20%20%20%20%20let%20changed%20%3D%20false%3B%0A%20%20%20%20%20%20const%20synthIndex%20%3D%20Math.max(%0A%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20Math.min(Scratch.Cast.toNumber(args.SYNTH)%20-%201%2C%20synths.length%20-%201)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20const%20currentSynth%20%3D%20synths%5BsynthIndex%5D%3B%0A%0A%20%20%20%20%20%20if%20(currentSynth%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20switch%20(args.WHAT)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22song%22%3A%0A%20%20%20%20%20%20%20%20%20%20changed%20%3D%20currentSynth.song.title%20!%3D%20this.lastSongTitle%3B%0A%20%20%20%20%20%20%20%20%20%20this.lastSongTitle%20%3D%20currentSynth.song.title%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22bar%22%3A%0A%20%20%20%20%20%20%20%20%20%20changed%20%3D%20currentSynth.bar%20!%3D%20this.lastBar%3B%0A%20%20%20%20%20%20%20%20%20%20this.lastBar%20%3D%20currentSynth.bar%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22beat%22%3A%0A%20%20%20%20%20%20%20%20%20%20changed%20%3D%20currentSynth.beat%20!%3D%20this.lastBeat%3B%0A%20%20%20%20%20%20%20%20%20%20this.lastBeat%20%3D%20currentSynth.beat%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22part%22%3A%0A%20%20%20%20%20%20%20%20%20%20changed%20%3D%20currentSynth.part%20!%3D%20this.lastPart%3B%0A%20%20%20%20%20%20%20%20%20%20this.lastPart%20%3D%20currentSynth.part%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22tick%22%3A%0A%20%20%20%20%20%20%20%20%20%20changed%20%3D%20currentSynth.tick%20!%3D%20this.lastTick%3B%0A%20%20%20%20%20%20%20%20%20%20this.lastTick%20%3D%20currentSynth.tick%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20case%20%22progress%20ratio%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20changed%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.caluclateSongCompletionPercentage()%20!%3D%20this.lastProgressRatio%3B%0A%20%20%20%20%20%20%20%20%20%20this.lastProgressRatio%20%3D%20this.caluclateSongCompletionPercentage()%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20case%20%22progress%20seconds%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20currentProgressSeconds%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.samplesToTime(currentSynth.getTotalSamples(true%2C%20true%2C%200))%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22rawSecondsUnrounded%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%20*%20this.caluclateSongCompletionPercentage()%3B%0A%20%20%20%20%20%20%20%20%20%20changed%20%3D%20currentProgressSeconds%20!%3D%20this.lastProgressSeconds%3B%0A%20%20%20%20%20%20%20%20%20%20this.lastProgressSeconds%20%3D%20currentProgressSeconds%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Trigger%20when%20synth%20first%20starts%20playing%0A%20%20%20%20%20%20if%20(currentSynth.isPlayingSong%20%26%26%20!this.wasPlaying)%20%7B%0A%20%20%20%20%20%20%20%20changed%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.wasPlaying%20%3D%20currentSynth.isPlayingSong%3B%0A%0A%20%20%20%20%20%20return%20changed%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F*blocks*%2F%0A%0A%20%20%20%20playingSong(args)%20%7B%0A%20%20%20%20%20%20return%20synth.isPlayingSong%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setSong(args)%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20let%20song%20%3D%20Scratch.Cast.toString(args.SONG)%3B%0A%20%20%20%20%20%20%20%20song%20%3D%20isValidJSON(song)%20%3F%20song%20%3A%20song.replace(%2F.*%3F%23%2F%2C%20%22%22)%3B%0A%20%20%20%20%20%20%20%20console.log(%22Loaded%20BeepBox%20Song%3A%20%22%20%2B%20song)%3B%0A%20%20%20%20%20%20%20%20url%20%3D%20song%3B%0A%20%20%20%20%20%20%20%20synth.setSong(song)%3B%0A%20%20%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20console.error(%0A%20%20%20%20%20%20%20%20%20%20error%20%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22%2C%20if%20you%20have%20placed%20a%20tinyURL%20link%2C%20they%20are%20not%20supported%20and%20can%20not%20be.%20Please%20use%20the%20full%20link%20or%20JSON.%22%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20playSong(args)%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20synth.activateAudio()%3B%0A%20%20%20%20%20%20%20%20synth.play()%3B%0A%20%20%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20%20%20console.error(error)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20playSongWait(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(synth.waitBlockNotPlay%20%3D%3D%20false%20%7C%7C%20synth.waitBlockNotPlay%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20this.playSong(args)%3B%0A%20%20%20%20%20%20%20%20synth.waitBlockNotPlay%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(synth.isPlayingSong)%20%7B%0A%20%20%20%20%20%20%20%20util.yield()%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20synth.waitBlockNotPlay%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20pauseSong(args)%20%7B%0A%20%20%20%20%20%20synth.pause()%3B%0A%20%20%20%20%7D%0A%20%20%20%20stopSong(args)%20%7B%0A%20%20%20%20%20%20synth.snapToStart()%3B%0A%20%20%20%20%20%20synth.pause()%3B%0A%20%20%20%20%7D%0A%20%20%20%20restartSong()%20%7B%0A%20%20%20%20%20%20synth.snapToStart()%3B%0A%20%20%20%20%20%20synth.activateAudio()%3B%0A%20%20%20%20%20%20synth.play()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setSongVolume(args)%20%7B%0A%20%20%20%20%20%20synth.extensionVolume%20%3D%20Math.max(Math.min(args.VOLUME%20%2F%20100%2C%202)%2C%200)%3B%0A%20%20%20%20%7D%0A%20%20%20%20changeSongVolume(args)%20%7B%0A%20%20%20%20%20%20synth.extensionVolume%20%2B%3D%20args.VOLUME%20%2F%20100%3B%0A%20%20%20%20%20%20synth.extensionVolume%20%3D%0A%20%20%20%20%20%20%20%20Math.max(Math.min(synth.extensionVolume%20*%20100%2C%20200)%2C%200)%20%2F%20100%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20muteChannel(args)%20%7B%0A%20%20%20%20%20%20var%20targetChannel%20%3D%20Scratch.Cast.toNumber(args.CHANNEL)%20-%201%3B%0A%20%20%20%20%20%20if%20(targetChannel%20%3D%3D%20-1)%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20of%20synth.song.channels)%20%7B%0A%20%20%20%20%20%20%20%20%20%20i.muted%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20targetChannel%20%3D%20Math.min(%0A%20%20%20%20%20%20%20%20Math.max(targetChannel%2C%200)%2C%0A%20%20%20%20%20%20%20%20synth.song.getChannelCount()%20-%201%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20synth.song.channels%5BtargetChannel%5D.muted%20%3D%20true%3B%0A%20%20%20%20%7D%0A%20%20%20%20unmuteChannel(args)%20%7B%0A%20%20%20%20%20%20var%20targetChannel%20%3D%20Scratch.Cast.toNumber(args.CHANNEL)%20-%201%3B%0A%20%20%20%20%20%20if%20(targetChannel%20%3D%3D%20-1)%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20of%20synth.song.channels)%20%7B%0A%20%20%20%20%20%20%20%20%20%20i.muted%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20targetChannel%20%3D%20Math.min(%0A%20%20%20%20%20%20%20%20Math.max(targetChannel%2C%200)%2C%0A%20%20%20%20%20%20%20%20synth.song.getChannelCount()%20-%201%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20synth.song.channels%5BtargetChannel%5D.muted%20%3D%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20disableLooping(args)%20%7B%0A%20%20%20%20%20%20synth.loopRepeatCount%20%3D%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20enableLooping(args)%20%7B%0A%20%20%20%20%20%20synth.loopRepeatCount%20%3D%20-1%3B%0A%20%20%20%20%7D%0A%20%20%20%20looping(args)%20%7B%0A%20%20%20%20%20%20return%20synth.loopRepeatCount%20%3D%3D%3D%20-1%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20createSynth(args)%20%7B%0A%20%20%20%20%20%20if%20(synths.length%20%3E%20synthLimit)%20%7B%0A%20%20%20%20%20%20%20%20console.warn(%0A%20%20%20%20%20%20%20%20%20%20%60BeepBox%20Player%3A%20Can't%20create%20more%20than%20%24%7BsynthLimit%20%2B%201%7D%20synths!%60%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%40ts-ignore%0A%20%20%20%20%20%20synth%20%3D%20new%20beepbox.Synth(url)%3B%0A%20%20%20%20%20%20synths.push(synth)%3B%0A%20%20%20%20%20%20synth.volume%20%3D%201%3B%0A%20%20%20%20%20%20synth.extensionVolume%20%3D%201%3B%0A%20%20%20%20%20%20targetSynth%20%3D%20synths.length%20-%201%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20synths(args)%20%7B%0A%20%20%20%20%20%20return%20synths.length%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20targetSynth(args)%20%7B%0A%20%20%20%20%20%20return%20targetSynth%20%2B%201%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setTargetSynth(args)%20%7B%0A%20%20%20%20%20%20let%20length%20%3D%20synths.length%20-%201%3B%0A%20%20%20%20%20%20targetSynth%20%3D%20Math.max(%0A%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20Math.min(Scratch.Cast.toNumber(args.SYNTH)%20-%201%2C%20length)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20synth%20%3D%20synths%5BtargetSynth%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20deleteSynth(args)%20%7B%0A%20%20%20%20%20%20let%20length%20%3D%20synths.length%20-%201%3B%0A%20%20%20%20%20%20let%20index%20%3D%20Math.max(%0A%20%20%20%20%20%20%20%200%2C%0A%20%20%20%20%20%20%20%20Math.min(Scratch.Cast.toNumber(args.SYNTH)%20-%201%2C%20length)%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20if%20(index%20%3E%3D%200%20%26%26%20index%20%3C%3D%20length)%20%7B%0A%20%20%20%20%20%20%20%20synths%5Bindex%5D.deactivateAudio()%3B%0A%20%20%20%20%20%20%20%20synths.splice(index%2C%201)%3B%0A%20%20%20%20%20%20%20%20if%20(targetSynth%20%3E%3D%20synths.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20targetSynth%20%3D%20synths.length%20-%201%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20synth%20%3D%20synths%5BtargetSynth%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(synths.length%20%3D%3D%200)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%40ts-ignore%0A%20%20%20%20%20%20%20%20synth%20%3D%20new%20beepbox.Synth(url)%3B%0A%20%20%20%20%20%20%20%20synths.push(synth)%3B%0A%20%20%20%20%20%20%20%20synth.volume%20%3D%201%3B%0A%20%20%20%20%20%20%20%20synth.extensionVolume%20%3D%201%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20clearSynths(args)%20%7B%0A%20%20%20%20%20%20for%20(let%20i%20of%20synths)%20%7B%0A%20%20%20%20%20%20%20%20i.deactivateAudio()%3B%0A%20%20%20%20%20%20%20%20i%20%3D%20undefined%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20targetSynth%20%3D%200%3B%0A%20%20%20%20%20%20synths%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%2F%2F%40ts-ignore%0A%20%20%20%20%20%20synth%20%3D%20new%20beepbox.Synth(url)%3B%0A%20%20%20%20%20%20synths.push(synth)%3B%0A%20%20%20%20%20%20synth.volume%20%3D%201%3B%0A%20%20%20%20%20%20synth.extensionVolume%20%3D%201%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20runtime.on(%22RUNTIME_PAUSED%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20for%20(let%20i%20of%20synths)%20%7B%0A%20%20%20%20%20%20i.deactivateAudio()%3B%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%0A%20%20runtime.on(%22RUNTIME_UNPAUSED%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20for%20(let%20i%20of%20synths)%20%7B%0A%20%20%20%20%20%20i.activateAudio()%3B%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%0A%20%20Scratch.vm.runtime.on(%22BEFORE_EXECUTE%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20for%20(let%20i%20of%20synths)%20%7B%0A%20%20%20%20%20%20i.volume%20%3D%0A%20%20%20%20%20%20%20%20i.extensionVolume%20*%20Scratch.vm.runtime.audioEngine.inputNode.gain.value%3B%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%0A%20%20%2F%2F%40ts-ignore%0A%20%20Scratch.extensions.register(new%20BeepBoxPlayer())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Text%0A%2F%2F%20ID%3A%20strings%0A%2F%2F%20Description%3A%20Manipulate%20characters%20and%20text.%0A%2F%2F%20By%3A%20CST1229%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FCST1229%2F%3E%0A%2F%2F%20By%3A%20BludIsAnLemon%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FBludIsAnLemon%2F%3E%0A%2F%2F%20By%3A%20Man-o-Valor%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2Fman-o-valor%2F%3E%0A%2F%2F%20License%3A%20MIT%20AND%20MPL-2.0%0A%0A%2F*%20generated%20l10n%20code%20*%2FScratch.translate.setup(%7B%22es%22%3A%7B%22_Text%22%3A%22Texto%22%7D%2C%22fi%22%3A%7B%22_Exactly%20Title%20Case%22%3A%22Alkukirjaimet%20Tarkasti%20Isolla%22%2C%22_MiXeD%20CaSe%22%3A%22IsOt%20jA%20PiEnEt%20kIrJaImEt%20sEkAiSiN%22%2C%22_RAndoMCaSe%22%3A%22SATuNnaiNEn%20KirJaInKoKO%22%2C%22_Sentence%20case%22%3A%22Virkkeen%20alkukirjain%20isolla%22%2C%22_Text%22%3A%22Teksti%22%2C%22_Title%20Case%22%3A%22Alkukirjaimet%20Isolla%22%2C%22_UPPERCASE%22%3A%22ISOT%20KIRJAIMET%22%2C%22_%5BSTRING%5D%20matches%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%3F%22%3A%22vastaako%20%5BSTRING%5D%20s%C3%A4%C3%A4nn%C3%B6llist%C3%A4%20lauseketta%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%3F%22%2C%22_apple%22%3A%22omena%22%2C%22_both%20sides%22%3A%22molemmilta%20puolilta%22%2C%22_camelCase%22%3A%22karavaaniTyyli%22%2C%22_convert%20%5BSTRING%5D%20to%20%5BTEXTCASE%5D%22%3A%22muunna%20%5BSTRING%5D%20muotoon%20%5BTEXTCASE%5D%22%2C%22_count%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%3A%22merkkien%20%5BSUBSTRING%5D%20m%C3%A4%C3%A4r%C3%A4%20merkkijonossa%20%5BSTRING%5D%22%2C%22_count%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20in%20%5BSTRING%5D%22%3A%22laske%20s%C3%A4%C3%A4nn%C3%B6llinen%20lauseke%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20merkkijonossa%20%5BSTRING%5D%22%2C%22_index%20of%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%3A%22merkkijonon%20%5BSUBSTRING%5D%20j%C3%A4rjestysnumero%20merkkijonossa%20%5BSTRING%5D%22%2C%22_is%20%5BOPERAND1%5D%20identical%20to%20%5BOPERAND2%5D%3F%22%3A%22onko%20%5BOPERAND1%5D%20t%C3%A4ysin%20sama%20kuin%20%5BOPERAND2%5D%3F%22%2C%22_is%20%5BSTRING%5D%20%5BTEXTCASE%5D%3F%22%3A%22onko%20%5BSTRING%5D%20muodossa%20%5BTEXTCASE%5D%3F%22%2C%22_item%20%5BITEM%5D%20of%20%5BSTRING%5D%20matched%20by%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%22%3A%22merkkijonon%20%5BSTRING%5D%20%5BITEM%5D.%20kohde%2C%20joka%20vastaa%20s%C3%A4%C3%A4nn%C3%B6llist%C3%A4%20lauseketta%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%22%2C%22_item%20%5BITEM%5D%20of%20%5BSTRING%5D%20split%20by%20%5BSPLIT%5D%22%3A%22%5BITEM%5D.%20kohde%20merkkijonosta%20%5BSTRING%5D%20jaettuna%20merkill%C3%A4%20%5BSPLIT%5D%22%2C%22_letters%20%5BLETTER1%5D%20to%20%5BLETTER2%5D%20of%20%5BSTRING%5D%22%3A%22merkkijonon%20%5BSTRING%5D%20merkit%20%5BLETTER1%5D%20%E2%80%93%20%5BLETTER2%5D%22%2C%22_lowercase%22%3A%22pienet%20kirjaimet%22%2C%22_repeat%20%5BSTRING%5D%20%5BREPEAT%5D%20times%22%3A%22toista%20%5BSTRING%5D%20%5BREPEAT%5D%20kertaa%22%2C%22_replace%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%3A%22korvaa%20%5BSUBSTRING%5D%20merkkijonossa%20%5BSTRING%5D%20merkkijonolla%20%5BREPLACE%5D%22%2C%22_replace%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20in%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%3A%22korvaa%20s%C3%A4%C3%A4nn%C3%B6llinen%20lauseke%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20merkkijonossa%20%5BSTRING%5D%20lausekkeella%20%5BREPLACE%5D%22%2C%22_reverse%20text%20%5BSTRING%5D%22%3A%22teksti%20%5BSTRING%5D%20k%C3%A4%C3%A4nteisen%C3%A4%22%2C%22_the%20end%22%3A%22lopusta%22%2C%22_the%20start%22%3A%22alusta%22%2C%22_trim%20whitespace%20%5BSTRING%5D%20from%20%5BMETHOD%5D%22%3A%22poista%20turhat%20sanav%C3%A4lit%20merkkijonon%20%5BSTRING%5D%20%5BMETHOD%5D%22%2C%22_unicode%20%5BNUM%5D%20as%20letter%22%3A%22Unicode-koodi%20%5BNUM%5D%20merkkijonona%22%2C%22_unicode%20of%20%5BSTRING%5D%22%3A%22merkkijonon%20%5BSTRING%5D%20Unicode-koodi%22%7D%2C%22he%22%3A%7B%22_Text%22%3A%22%D7%98%D7%A7%D7%A1%D7%98%22%7D%2C%22hu%22%3A%7B%22_Text%22%3A%22Sz%C3%B6veg%22%7D%2C%22it%22%3A%7B%22_Exactly%20Title%20Case%22%3A%22Maiuscolo%20stile%20Titolo%20Esatto%22%2C%22_MiXeD%20CaSe%22%3A%22MaIuScOlO%20MiSto%22%2C%22_RAndoMCaSe%22%3A%22MaiUSCoLoCaSUaLe%22%2C%22_Sentence%20case%22%3A%22Maiuscolo%20come%20frase%22%2C%22_Text%22%3A%22Testo%22%2C%22_Title%20Case%22%3A%22Maiuscolo%20stile%20TItolo%22%2C%22_UPPERCASE%22%3A%22MAIUSCOLO%22%2C%22_%5BSTRING%5D%20%5BPOSITION%5D%20with%20%5BSUBSTRING%5D%3F%22%3A%22%5BSTRING%5D%20%5BPOSITION%5D%20con%20%5BSUBSTRING%5D%22%2C%22_%5BSTRING%5D%20matches%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%3F%22%3A%22%5BSTRING%5D%20corrisponde%20a%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%22%2C%22_apple%22%3A%22mela%22%2C%22_both%20sides%22%3A%22entrambi%20i%20lati%22%2C%22_camelCase%22%3A%22maiuscoleInterne%22%2C%22_convert%20%5BSTRING%5D%20to%20%5BTEXTCASE%5D%22%3A%22converti%20%5BSTRING%5D%20in%20%5BTEXTCASE%5D%22%2C%22_count%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%3A%22occorrenze%20di%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%2C%22_count%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20in%20%5BSTRING%5D%22%3A%22numero%20occorrenze%20di%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20in%20%5BSTRING%5D%22%2C%22_ends%22%3A%22finisce%22%2C%22_index%20of%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%3A%22posizione%20di%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%2C%22_is%20%5BOPERAND1%5D%20identical%20to%20%5BOPERAND2%5D%3F%22%3A%22%5BOPERAND1%5D%20%C3%A8%20identico%20a%20%5BOPERAND2%5D%22%2C%22_is%20%5BSTRING%5D%20%5BTEXTCASE%5D%3F%22%3A%22%5BSTRING%5D%20%C3%A8%20%5BTEXTCASE%5D%22%2C%22_item%20%5BITEM%5D%20of%20%5BSTRING%5D%20matched%20by%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%22%3A%22elemento%20%5BITEM%5D%20di%20%5BSTRING%5D%20corrispondente%20a%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%22%2C%22_item%20%5BITEM%5D%20of%20%5BSTRING%5D%20split%20by%20%5BSPLIT%5D%22%3A%22elemento%20%5BITEM%5D%20di%20%5BSTRING%5D%20spezzata%20da%20%5BSPLIT%5D%22%2C%22_letters%20%5BLETTER1%5D%20to%20%5BLETTER2%5D%20of%20%5BSTRING%5D%22%3A%22lettere%20da%20%5BLETTER1%5D%20a%20%5BLETTER2%5D%20di%20%5BSTRING%5D%22%2C%22_lowercase%22%3A%22minuscolo%22%2C%22_matches%20of%20%5BSTRING%5D%20using%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20as%20array%22%3A%22corrispondenze%20di%20%5BSTRING%5D%20usando%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20come%20array%22%2C%22_repeat%20%5BSTRING%5D%20%5BREPEAT%5D%20times%22%3A%22ripeti%20%5BSTRING%5D%20%5BREPEAT%5D%20volte%22%2C%22_replace%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%3A%22sostituisci%20%5BSUBSTRING%5D%20con%20%5BREPLACE%5Din%20%5BSTRING%5D%22%2C%22_replace%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20in%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%3A%22sostituisci%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20in%20%5BSTRING%5D%20con%20%5BREPLACE%5D%22%2C%22_reverse%20text%20%5BSTRING%5D%22%3A%22inverti%20testo%20%5BSTRING%5D%22%2C%22_starts%22%3A%22inizia%22%2C%22_the%20end%22%3A%22la%20fine%22%2C%22_the%20start%22%3A%22l'inizio%22%2C%22_trim%20whitespace%20%5BSTRING%5D%20from%20%5BMETHOD%5D%22%3A%22Rimuovi%20spazi%20bianchi%20di%20%5BSTRING%5D%20da%20%5BMETHOD%5D%22%2C%22_unicode%20%5BNUM%5D%20as%20letter%22%3A%22%5BNUM%5D%20unicode%20come%20lettera%22%2C%22_unicode%20of%20%5BSTRING%5D%22%3A%22unicode%20di%20%5BSTRING%5D%22%7D%2C%22ja%22%3A%7B%22_Exactly%20Title%20Case%22%3A%22%E6%AD%A3%E7%A2%BA%E3%81%AA%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB%E3%82%B1%E3%83%BC%E3%82%B9%22%2C%22_MiXeD%20CaSe%22%3A%22%E3%83%9F%E3%83%83%E3%82%AF%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9%22%2C%22_Text%22%3A%22%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%22%2C%22_Title%20Case%22%3A%22%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB%E3%82%B1%E3%83%BC%E3%82%B9%22%2C%22_UPPERCASE%22%3A%22%E5%A4%A7%E6%96%87%E5%AD%97%22%2C%22_apple%22%3A%22%E3%82%8A%E3%82%93%E3%81%94%22%2C%22_convert%20%5BSTRING%5D%20to%20%5BTEXTCASE%5D%22%3A%22%5BSTRING%5D%E3%82%92%5BTEXTCASE%5D%E3%81%AB%E5%A4%89%E6%8F%9B%E3%81%99%E3%82%8B%22%2C%22_count%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%3A%22%5BSTRING%5D%E3%81%AB%5BSUBSTRING%5D%E3%81%8C%E5%87%BA%E3%81%A6%E3%81%8D%E3%81%9F%E5%9B%9E%E6%95%B0%22%2C%22_index%20of%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%3A%22%5BSTRING%5D%E3%81%AE%5BSUBSTRING%5D%E3%81%AE%E5%A0%B4%E6%89%80%22%2C%22_is%20%5BOPERAND1%5D%20identical%20to%20%5BOPERAND2%5D%3F%22%3A%22%5BOPERAND1%5D%E3%81%A8%5BOPERAND2%5D%E3%81%8C%E5%90%8C%E4%B8%80%22%2C%22_is%20%5BSTRING%5D%20%5BTEXTCASE%5D%3F%22%3A%22%5BSTRING%5D%E3%81%8C%5BTEXTCASE%5D%22%2C%22_item%20%5BITEM%5D%20of%20%5BSTRING%5D%20split%20by%20%5BSPLIT%5D%22%3A%22%5BSTRING%5D%E3%82%92%5BSPLIT%5D%E3%81%A7%E5%8C%BA%E5%88%87%E3%81%A3%E3%81%9F%E3%81%A8%E3%81%8D%E3%81%AE%5BITEM%5D%E7%95%AA%E7%9B%AE%22%2C%22_letters%20%5BLETTER1%5D%20to%20%5BLETTER2%5D%20of%20%5BSTRING%5D%22%3A%22%5BSTRING%5D%E3%81%AE%5BLETTER1%5D%E3%81%8B%E3%82%89%5BLETTER2%5D%E6%96%87%E5%AD%97%E7%9B%AE%22%2C%22_lowercase%22%3A%22%E5%B0%8F%E6%96%87%E5%AD%97%22%2C%22_repeat%20%5BSTRING%5D%20%5BREPEAT%5D%20times%22%3A%22%5BSTRING%5D%E3%82%92%5BREPEAT%5D%E5%9B%9E%E7%B9%B0%E3%82%8A%E8%BF%94%E3%81%99%22%2C%22_replace%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%3A%22%5BSTRING%5D%E3%81%AE%5BSUBSTRING%5D%E3%82%92%5BREPLACE%5D%E3%81%A7%E7%BD%AE%E3%81%8D%E6%8F%9B%E3%81%88%E3%82%8B%22%2C%22_unicode%20%5BNUM%5D%20as%20letter%22%3A%22Unicode%5BNUM%5D%E3%81%AE%E6%96%87%E5%AD%97%22%2C%22_unicode%20of%20%5BSTRING%5D%22%3A%22%5BSTRING%5D%E3%81%AEUnicode%22%7D%2C%22ko%22%3A%7B%22_Exactly%20Title%20Case%22%3A%22%EC%A0%95%ED%99%95%ED%95%9C%20%EC%A0%9C%EB%AA%A9%20%ED%91%9C%EA%B8%B0%EB%B2%95%20(Abc%20Abc)%22%2C%22_MiXeD%20CaSe%22%3A%22%EC%84%9E%EC%9D%B8%20%ED%91%9C%EA%B8%B0%EB%B2%95%20(AbC%20AbCd)%22%2C%22_Text%22%3A%22%ED%85%8D%EC%8A%A4%ED%8A%B8%22%2C%22_Title%20Case%22%3A%22%EC%A0%9C%EB%AA%A9%20%ED%91%9C%EA%B8%B0%EB%B2%95%20(Abc%20Abc)%22%2C%22_UPPERCASE%22%3A%22%EB%8C%80%EB%AC%B8%EC%9E%90%20%ED%91%9C%EA%B8%B0%EB%B2%95%20(ABC)%22%2C%22_%5BSTRING%5D%20matches%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%3F%22%3A%22%5BSTRING%5D%EC%9D%B4(%EA%B0%80)%20%EC%A0%95%EA%B7%9C%ED%91%9C%ED%98%84%EC%8B%9D%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20%EC%97%90%20%EC%9D%BC%EC%B9%98%ED%95%98%EB%8A%94%EA%B0%80%3F%22%2C%22_convert%20%5BSTRING%5D%20to%20%5BTEXTCASE%5D%22%3A%22%5BSTRING%5D%EC%9D%84(%EB%A5%BC)%20%5BTEXTCASE%5D(%EC%9C%BC)%EB%A1%9C%20%EB%B3%80%ED%99%98%ED%95%98%EA%B8%B0%22%2C%22_count%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%3A%22%5BSTRING%5D%EC%97%90%EC%84%9C%20%5BSUBSTRING%5D%EC%9D%98%20%EA%B0%9C%EC%88%98%22%2C%22_count%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20in%20%5BSTRING%5D%22%3A%22%5BSTRING%5D%EC%97%90%EC%84%9C%20%EC%A0%95%EA%B7%9C%ED%91%9C%ED%98%84%EC%8B%9D%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20%EC%9D%98%20%EA%B2%B0%EA%B3%BC%20%EA%B0%9C%EC%88%98%22%2C%22_index%20of%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%3A%22%5BSTRING%5D%EC%97%90%EC%84%9C%20%5BSUBSTRING%5D%EC%9D%98%20%EB%B2%88%EC%A7%B8%22%2C%22_is%20%5BOPERAND1%5D%20identical%20to%20%5BOPERAND2%5D%3F%22%3A%22%5BOPERAND1%5D%EC%9D%B4(%EA%B0%80)%20%5BOPERAND2%5D%EC%99%80(%EA%B3%BC)%20%EC%A0%95%ED%99%95%ED%9E%88%20%EA%B0%99%EC%A7%80%20%EC%95%8A%EC%9D%80%EA%B0%80%3F%22%2C%22_is%20%5BSTRING%5D%20%5BTEXTCASE%5D%3F%22%3A%22%5BSTRING%5D%EC%9D%B4(%EA%B0%80)%20%5BTEXTCASE%5D%EC%9D%B8%EA%B0%80%3F%22%2C%22_item%20%5BITEM%5D%20of%20%5BSTRING%5D%20matched%20by%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%22%3A%22%5BSTRING%5D%EC%97%90%EC%84%9C%20%EC%A0%95%EA%B7%9C%ED%91%9C%ED%98%84%EC%8B%9D%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20%EC%9D%98%20%5BITEM%5D%EB%B2%88%EC%A7%B8%20%EA%B2%B0%EA%B3%BC%22%2C%22_item%20%5BITEM%5D%20of%20%5BSTRING%5D%20split%20by%20%5BSPLIT%5D%22%3A%22%5BSTRING%5D%EC%9D%84(%EB%A5%BC)%20%5BSPLIT%5D(%EC%9C%BC)%EB%A1%9C%20%EB%82%98%EB%88%88%20%EA%B2%83%EC%9D%98%20%5BITEM%5D%EB%B2%88%EC%A7%B8%22%2C%22_letters%20%5BLETTER1%5D%20to%20%5BLETTER2%5D%20of%20%5BSTRING%5D%22%3A%22%5BSTRING%5D%EC%9D%98%20%5BSTART%5D%EB%B6%80%ED%84%B0%20%5BEND%5D%EA%B9%8C%EC%A7%80%EC%9D%98%20%EA%B8%80%EC%9E%90%22%2C%22_lowercase%22%3A%22%EC%86%8C%EB%AC%B8%EC%9E%90%20%ED%91%9C%EA%B8%B0%EB%B2%95%20(abc)%22%2C%22_repeat%20%5BSTRING%5D%20%5BREPEAT%5D%20times%22%3A%22%5BSTRING%5D%20%EB%AC%B8%EC%9E%90%EC%97%B4%20%5BREPEAT%5D%EB%B2%88%20%EB%B0%98%EB%B3%B5%22%2C%22_replace%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%3A%22%5BSTRING%5D%EC%9D%98%20%5BSUBSTRING%5D%EC%9D%84(%EB%A5%BC)%20%5BREPLACE%5D(%EC%9C%BC)%EB%A1%9C%20%EB%B0%94%EA%BE%B8%EA%B8%B0%22%2C%22_replace%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20in%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%3A%22%EC%A0%95%EA%B7%9C%ED%91%9C%ED%98%84%EC%8B%9D%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20(%EC%9C%BC)%EB%A1%9C%20%5BSTRING%5D%EC%9D%84(%EB%A5%BC)%20%5BREPLACE%5D(%EC%9C%BC)%EB%A1%9C%20%EB%B0%94%EA%BE%B8%EA%B8%B0%22%2C%22_unicode%20%5BNUM%5D%20as%20letter%22%3A%22%EC%9C%A0%EB%8B%88%EC%BD%94%EB%93%9C%20%EB%AC%B8%EC%9E%90%20%5BNUM%5D%22%2C%22_unicode%20of%20%5BSTRING%5D%22%3A%22%5BSTRING%5D%EC%9D%98%20%EC%9C%A0%EB%8B%88%EC%BD%94%EB%93%9C%22%7D%2C%22nb%22%3A%7B%22_Text%22%3A%22Tekst%22%7D%2C%22nl%22%3A%7B%22_Exactly%20Title%20Case%22%3A%22Alleen%20Beginhoofdletters%22%2C%22_MiXeD%20CaSe%22%3A%22DoOr%20eLkAaR%22%2C%22_Text%22%3A%22Tekst%22%2C%22_Title%20Case%22%3A%22Alles%20Met%20Beginhoofdletter%22%2C%22_UPPERCASE%22%3A%22HOOFDLETTERS%22%2C%22_%5BSTRING%5D%20matches%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%3F%22%3A%22%5BSTRING%5D%20komt%20overeen%20met%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%3F%22%2C%22_apple%22%3A%22appel%22%2C%22_convert%20%5BSTRING%5D%20to%20%5BTEXTCASE%5D%22%3A%22zet%20%5BSTRING%5D%20om%20naar%20%5BTEXTCASE%5D%22%2C%22_count%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%3A%22aantal%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%2C%22_count%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20in%20%5BSTRING%5D%22%3A%22aantal%20overeenkomsten%20van%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20met%20%5BSTRING%5D%22%2C%22_index%20of%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%3A%22positie%20van%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%2C%22_is%20%5BOPERAND1%5D%20identical%20to%20%5BOPERAND2%5D%3F%22%3A%22%5BOPERAND1%5D%20identiek%20aan%20%5BOPERAND2%5D%3F%22%2C%22_item%20%5BITEM%5D%20of%20%5BSTRING%5D%20matched%20by%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%22%3A%22item%20%5BITEM%5D%20van%20%5BSTRING%5D%20waarmee%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20overeenkomt%22%2C%22_item%20%5BITEM%5D%20of%20%5BSTRING%5D%20split%20by%20%5BSPLIT%5D%22%3A%22item%20%5BITEM%5D%20van%20%5BSTRING%5D%20gesplitst%20door%20%5BSPLIT%5D%22%2C%22_letters%20%5BLETTER1%5D%20to%20%5BLETTER2%5D%20of%20%5BSTRING%5D%22%3A%22letters%20%5BLETTER1%5D%20t%2Fm%20%5BLETTER2%5D%20van%20%5BSTRING%5D%22%2C%22_lowercase%22%3A%22kleine%20letters%22%2C%22_repeat%20%5BSTRING%5D%20%5BREPEAT%5D%20times%22%3A%22herhaal%20%5BSTRING%5D%20%5BREPEAT%5D%20keer%22%2C%22_replace%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%3A%22vervang%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%20door%20%5BREPLACE%5D%22%2C%22_replace%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20in%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%3A%22vervang%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20in%20%5BSTRING%5D%20door%20%5BREPLACE%5D%22%2C%22_unicode%20%5BNUM%5D%20as%20letter%22%3A%22unicode%20%5BNUM%5D%20als%20letter%22%2C%22_unicode%20of%20%5BSTRING%5D%22%3A%22unicode%20van%20%5BSTRING%5D%22%7D%2C%22pl%22%3A%7B%22_Text%22%3A%22Tekst%22%7D%2C%22pt-br%22%3A%7B%22_Text%22%3A%22Texto%22%7D%2C%22ru%22%3A%7B%22_Exactly%20Title%20Case%22%3A%22%D0%9D%D0%B0%D1%81%D1%82%D0%BE%D1%8F%D1%89%D0%B8%D0%B9%20%D0%A2%D0%B0%D0%B9%D1%82%D0%BB%20%D0%9A%D0%B5%D0%B9%D1%81%22%2C%22_MiXeD%20CaSe%22%3A%22%D0%A1%D0%BC%D0%95%D1%88%D0%90%D0%BD%D0%9D%D1%8B%D0%99%20%D0%9A%D0%B5%D0%99%D1%81%22%2C%22_RAndoMCaSe%22%3A%22%D0%A1%D0%9B%D1%83%D0%A7%D0%B0%D0%B9%D0%BD%D0%AB%D0%99%D0%A0%D0%B5%D0%93%D0%B8%D1%81%D0%A2%D0%A0%22%2C%22_Sentence%20case%22%3A%22%D0%A1%D0%BC%D1%8B%D1%81%D0%BB%D0%BE%D0%B2%D0%BE%D0%B9%20%D1%80%D0%B5%D0%B3%D0%B8%D1%81%D1%82%D1%80%22%2C%22_Text%22%3A%22%D0%A2%D0%B5%D0%BA%D1%81%D1%82%22%2C%22_Title%20Case%22%3A%22%D0%A2%D0%B0%D0%B9%D1%82%D0%BB%20%D0%9A%D0%B5%D0%B9%D1%81%22%2C%22_UPPERCASE%22%3A%22%D0%92%D0%95%D0%A0%D0%A5%D0%9D%D0%98%D0%99%20%D0%A0%D0%95%D0%93%D0%98%D0%A1%D0%A2%D0%A0%22%2C%22_%5BSTRING%5D%20%5BPOSITION%5D%20with%20%5BSUBSTRING%5D%3F%22%3A%22%5BSTRING%5D%20%5BPOSITION%5D%20%D0%BD%D0%B0%20%5BSUBSTRING%5D%3F%22%2C%22_%5BSTRING%5D%20matches%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%3F%22%3A%22%5BSTRING%5D%20%D1%81%D0%BE%D0%B2%D0%BF%D0%B0%D0%B4%D0%B0%D0%B5%D1%82%20%D1%81%20regex'%D0%BE%D0%BC%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%3F%22%2C%22_apple%22%3A%22%D1%8F%D0%B1%D0%BB%D0%BE%D0%BA%D0%BE%22%2C%22_both%20sides%22%3A%22%D0%BE%D0%B1%D0%B5%20%D1%81%D1%82%D0%BE%D1%80%D0%BE%D0%BD%D1%8B%22%2C%22_camelCase%22%3A%22%D0%A0%D0%B5%D0%B3%D0%B8%D1%81%D1%82%D1%80%20%D0%B2%D0%B5%D1%80%D0%B1%D0%BB%D1%8E%D0%B4%D0%B0%22%2C%22_convert%20%5BSTRING%5D%20to%20%5BTEXTCASE%5D%22%3A%22%D1%81%D0%BA%D0%BE%D0%BD%D0%B2%D0%B5%D1%80%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C%20%D1%81%D1%82%D1%80%D0%BE%D0%BA%D1%83%20%5BSTRING%5D%20%D0%B2%20%5BTEXTCASE%5D%22%2C%22_count%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%3A%22%D0%BA%D0%BE%D0%BB%D0%B8%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%BE%20%5BSUBSTRING%5D%20%D0%B2%20%5BSTRING%5D%22%2C%22_count%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20in%20%5BSTRING%5D%22%3A%22%D0%BF%D0%BE%D1%81%D1%87%D0%B8%D1%82%D0%B0%D1%82%D1%8C%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20%D0%B2%20%5BSTRING%5D%22%2C%22_ends%22%3A%22%D0%B7%D0%B0%D0%BA%D0%B0%D0%BD%D1%87%D0%B8%D0%B2%D0%B0%D0%B5%D1%82%D1%81%D1%8F%22%2C%22_index%20of%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%3A%22%D0%B8%D0%BD%D0%B4%D0%B5%D0%BA%D1%81%20%5BSUBSTRING%5D%20%D0%B2%20%5BSTRING%5D%22%2C%22_is%20%5BOPERAND1%5D%20identical%20to%20%5BOPERAND2%5D%3F%22%3A%22%5BOPERAND1%5D%20%D0%B8%D0%B4%D0%B5%D0%BD%D1%82%D0%B8%D1%87%D0%BD%D1%8B%D0%B9%20%D1%81%20%5BOPERAND2%5D%3F%22%2C%22_is%20%5BSTRING%5D%20%5BTEXTCASE%5D%3F%22%3A%22%D1%81%D1%82%D1%80%D0%BE%D0%BA%D0%B0%20%5BSTRING%5D%20%D1%8D%D1%82%D0%BE%20%5BTEXTCASE%5D%3F%22%2C%22_item%20%5BITEM%5D%20of%20%5BSTRING%5D%20matched%20by%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%22%3A%22%D0%BF%D1%80%D0%B5%D0%B4%D0%BC%D0%B5%D1%82%20%5BITEM%5D%20%D1%81%D1%82%D1%80%D0%BE%D0%BA%D0%B8%20%5BSTRING%5D%20%D1%81%D0%BE%D0%B2%D0%BF%D0%B0%D0%B4%D0%B0%D1%8E%D1%89%D0%B8%D0%B9%20regex'%D0%BE%D0%BC%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%22%2C%22_item%20%5BITEM%5D%20of%20%5BSTRING%5D%20split%20by%20%5BSPLIT%5D%22%3A%22%D0%BF%D1%80%D0%B5%D0%B4%D0%BC%D0%B5%D1%82%20%5BITEM%5D%20%D1%81%D1%82%D1%80%D0%BE%D0%BA%D0%B8%20%5BSTRING%5D%20%D1%80%D0%B0%D1%81%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D1%91%D0%BD%D0%BD%D1%8B%D0%B9%20%5BSPLIT%5D%22%2C%22_letters%20%5BLETTER1%5D%20to%20%5BLETTER2%5D%20of%20%5BSTRING%5D%22%3A%22%D0%B1%D1%83%D0%BA%D0%B2%D1%8B%20%D1%81%20%5BLETTER1%5D%20%D0%B4%D0%BE%20%5BLETTER2%5D%20%D1%81%D1%82%D1%80%D0%BE%D0%BA%D0%B8%20%5BSTRING%5D%22%2C%22_lowercase%22%3A%22%D0%BD%D0%B8%D0%B6%D0%BD%D0%B8%D0%B9%20%D1%80%D0%B5%D0%B3%D0%B8%D1%81%D1%82%D1%80%22%2C%22_repeat%20%5BSTRING%5D%20%5BREPEAT%5D%20times%22%3A%22%D0%BF%D0%BE%D0%B2%D1%82%D0%BE%D1%80%D0%B8%D1%82%D1%8C%20%5BSTRING%5D%20%5BREPEAT%5D%20%D1%80%D0%B0%D0%B7%22%2C%22_replace%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%3A%22%D0%B7%D0%B0%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20%5BSUBSTRING%5D%20%D0%B2%20%5BSTRING%5D%20%D0%BD%D0%B0%20%5BREPLACE%5D%22%2C%22_replace%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20in%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%3A%22%D0%B7%D0%B0%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20%D0%B2%20%5BSTRING%5D%20%D0%BD%D0%B0%20%5BREPLACE%5D%22%2C%22_reverse%20text%20%5BSTRING%5D%22%3A%22%D0%BF%D0%B5%D1%80%D0%B5%D0%B2%D0%B5%D1%80%D0%BD%D1%83%D1%82%D1%8C%20%D1%82%D0%B5%D0%BA%D1%81%D1%82%20%5BSTRING%5D%22%2C%22_starts%22%3A%22%D0%BD%D0%B0%D1%87%D0%B8%D0%BD%D0%B0%D0%B5%D1%82%D1%81%D1%8F%22%2C%22_the%20end%22%3A%22%D0%BA%D0%BE%D0%BD%D1%86%D0%B0%22%2C%22_the%20start%22%3A%22%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D0%B0%22%2C%22_trim%20whitespace%20%5BSTRING%5D%20from%20%5BMETHOD%5D%22%3A%22%D0%BE%D0%B1%D1%80%D0%B5%D0%B7%D0%B0%D1%82%D1%8C%20%D0%BF%D1%80%D0%BE%D0%B1%D0%B5%D0%BB%D1%8B%20%5BSTRING%5D%20%D0%B8%D0%B7%20%5BMETHOD%5D%22%2C%22_unicode%20%5BNUM%5D%20as%20letter%22%3A%22%D1%8E%D0%BD%D0%B8%D0%BA%D0%BE%D0%B4%20%5BNUM%5D%20%D0%BA%D0%B0%D0%BA%20%D0%B1%D1%83%D0%BA%D0%B2%D1%83%22%2C%22_unicode%20of%20%5BSTRING%5D%22%3A%22%D1%8E%D0%BD%D0%B8%D0%BA%D0%BE%D0%B4%20%5BSTRING%5D%22%7D%2C%22sl%22%3A%7B%22_Text%22%3A%22Besedilo%22%7D%2C%22tr%22%3A%7B%22_Text%22%3A%22Metin%22%7D%2C%22uk%22%3A%7B%22_Exactly%20Title%20Case%22%3A%22%D0%A2%D0%BE%D1%87%D0%BD%D0%BE%20%D0%97%D0%B0%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D0%BA%D0%BE%D0%BC%22%2C%22_MiXeD%20CaSe%22%3A%22%D0%9C%D1%96%D0%A8%D0%B0%D0%9D%D0%B8%D0%9C%D0%B8%22%2C%22_RAndoMCaSe%22%3A%22%D0%92%D0%98%D0%BF%D0%B0%D0%B4%D0%9A%D0%BE%D0%92%D0%98%D0%9C%D0%B8%22%2C%22_Sentence%20case%22%3A%22%D0%A0%D0%B5%D1%87%D0%B5%D0%BD%D0%BD%D1%8F%22%2C%22_Text%22%3A%22%D0%A2%D0%B5%D0%BA%D1%81%D1%82%22%2C%22_Title%20Case%22%3A%22%D0%97%D0%B0%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D0%BA%D0%BE%D0%BC%22%2C%22_UPPERCASE%22%3A%22%D0%92%D0%95%D0%9B%D0%98%D0%9A%D0%98%D0%9C%D0%98%20%D0%91%D0%A3%D0%9A%D0%92%D0%90%D0%9C%D0%98%22%2C%22_both%20sides%22%3A%22%D0%BE%D0%B1%D0%BE%D1%85%20%D1%81%D1%82%D0%BE%D1%80%D1%96%D0%BD%22%2C%22_convert%20%5BSTRING%5D%20to%20%5BTEXTCASE%5D%22%3A%22%D0%B7%D1%80%D0%BE%D0%B1%D0%B8%D1%82%D0%B8%20%5BSTRING%5D%20%5BTEXTCASE%5D%22%2C%22_count%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%3A%22%D0%BA%D1%96%D0%BB%D1%8C%D0%BA%D1%96%D1%81%D1%82%D1%8C%20%5BSUBSTRING%5D%20%D1%83%20%5BSTRING%5D%22%2C%22_index%20of%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%3A%22%D0%BD%D0%BE%D0%BC%D0%B5%D1%80%20%5BSUBSTRING%5D%20%D1%83%20%5BSTRING%5D%22%2C%22_is%20%5BOPERAND1%5D%20identical%20to%20%5BOPERAND2%5D%3F%22%3A%22%5BOPERAND1%5D%20%D1%96%D0%B4%D0%B5%D0%BD%D1%82%D0%B8%D1%87%D0%BD%D0%B0%20%D0%B4%D0%BE%20%5BOPERAND2%5D%3F%22%2C%22_is%20%5BSTRING%5D%20%5BTEXTCASE%5D%3F%22%3A%22%5BSTRING%5D%20%D1%94%20%5BTEXTCASE%5D%3F%22%2C%22_item%20%5BITEM%5D%20of%20%5BSTRING%5D%20split%20by%20%5BSPLIT%5D%22%3A%22%D0%B5%D0%BB%D0%B5%D0%BC%D0%B5%D0%BD%D1%82%20%5BITEM%5D%20%D1%83%20%5BSTRING%5D%20%D1%80%D0%BE%D0%B7%D0%B4%D1%96%D0%BB%D0%B5%D0%BD%D0%BE%D0%B3%D0%BE%20%D1%87%D0%B5%D1%80%D0%B5%D0%B7%20%5BSPLIT%5D%22%2C%22_letters%20%5BLETTER1%5D%20to%20%5BLETTER2%5D%20of%20%5BSTRING%5D%22%3A%22%D0%B1%D1%83%D0%BA%D0%B2%D0%B8%20%D0%B7%20%5BLETTER1%5D%20%D0%BF%D0%BE%20%5BLETTER2%5D%20%D1%83%20%5BSTRING%5D%22%2C%22_lowercase%22%3A%22%D0%BC%D0%B0%D0%BB%D0%B8%D0%BC%D0%B8%20%D0%B1%D1%83%D0%BA%D0%B2%D0%B0%D0%BC%D0%B8%22%2C%22_repeat%20%5BSTRING%5D%20%5BREPEAT%5D%20times%22%3A%22%D0%BF%D0%BE%D0%B2%D1%82%D0%BE%D1%80%D0%B8%D1%82%D0%B8%20%5BSTRING%5D%20%5BREPEAT%5D%20%D1%80%D0%B0%D0%B7%D0%B8%22%2C%22_replace%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%3A%22%D0%B7%D0%B0%D0%BC%D1%96%D0%BD%D0%B8%D1%82%D0%B8%20%5BSUBSTRING%5D%20%D1%83%20%5BSTRING%5D%20%D0%BD%D0%B0%20%5BREPLACE%5D%22%2C%22_reverse%20text%20%5BSTRING%5D%22%3A%22%D1%80%D0%BE%D0%B7%D0%B2%D0%B5%D1%80%D0%BD%D1%83%D1%82%D0%B8%20%5BSTRING%5D%22%2C%22_the%20end%22%3A%22%D0%BF%D0%BE%D1%87%D0%B0%D1%82%D0%BA%D1%83%22%2C%22_the%20start%22%3A%22%D0%BA%D1%96%D0%BD%D1%86%D1%8F%22%2C%22_trim%20whitespace%20%5BSTRING%5D%20from%20%5BMETHOD%5D%22%3A%22%D0%BE%D1%87%D0%B8%D1%81%D1%82%D0%B8%D1%82%D0%B8%20%D0%BF%D1%80%D0%BE%D0%B1%D1%96%D0%BB%D0%B8%20%D1%83%20%5BSTRING%5D%20%D0%B7%20%5BMETHOD%5D%22%2C%22_unicode%20%5BNUM%5D%20as%20letter%22%3A%22%D1%81%D0%B8%D0%BC%D0%B2%D0%BE%D0%BB%20%D1%8E%D0%BD%D1%96%D0%BA%D0%BE%D0%B4%D1%83%20%5BNUM%5D%20%22%2C%22_unicode%20of%20%5BSTRING%5D%22%3A%22%D1%8E%D0%BD%D1%96%D0%BA%D0%BE%D0%B4%20%5BSTRING%5D%22%7D%2C%22zh-cn%22%3A%7B%22_Exactly%20Title%20Case%22%3A%22%E7%B2%BE%E7%A1%AE%E6%A0%87%E9%A2%98%22%2C%22_MiXeD%20CaSe%22%3A%22%E6%B7%B7%E5%90%88%E5%A4%A7%E5%B0%8F%E5%86%99%22%2C%22_RAndoMCaSe%22%3A%22%E9%9A%8F%E6%9C%BA%E5%A4%A7%E5%B0%8F%E5%86%99%22%2C%22_Sentence%20case%22%3A%22%E5%8F%A5%E9%A6%96%E5%A4%A7%E5%86%99%22%2C%22_Text%22%3A%22%E6%96%87%E6%9C%AC%22%2C%22_Title%20Case%22%3A%22%E6%A0%87%E9%A2%98%22%2C%22_UPPERCASE%22%3A%22%E5%A4%A7%E5%86%99%22%2C%22_%5BSTRING%5D%20%5BPOSITION%5D%20with%20%5BSUBSTRING%5D%3F%22%3A%22%5BSTRING%5D%E4%BB%A5%5BSUBSTRING%5D%5BPOSITION%5D%EF%BC%9F%22%2C%22_%5BSTRING%5D%20matches%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%3F%22%3A%22%5BSTRING%5D%20%E6%BB%A1%E8%B6%B3%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%EF%BC%9F%22%2C%22_apple%22%3A%22%E8%8B%B9%E6%9E%9C%22%2C%22_both%20sides%22%3A%22%E4%B8%A4%E8%BE%B9%22%2C%22_camelCase%22%3A%22%E9%A9%BC%E5%B3%B0%E5%BC%8F%E5%91%BD%E5%90%8D%22%2C%22_convert%20%5BSTRING%5D%20to%20%5BTEXTCASE%5D%22%3A%22%E8%BD%AC%E6%8D%A2%5BSTRING%5D%E4%B8%BA%5BTEXTCASE%5D%22%2C%22_count%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%3A%22%5BSTRING%5D%E4%B8%AD%5BSUBSTRING%5D%E7%9A%84%E6%95%B0%E9%87%8F%22%2C%22_count%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20in%20%5BSTRING%5D%22%3A%22%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20%E5%9C%A8%20%5BSTRING%5D%20%E5%8C%B9%E9%85%8D%E7%9A%84%E6%95%B0%E9%87%8F%22%2C%22_ends%22%3A%22%E7%BB%93%E5%B0%BE%22%2C%22_index%20of%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%3A%22%5BSTRING%5D%E4%B8%AD%5BSUBSTRING%5D%E7%9A%84%E4%BD%8D%E7%BD%AE%22%2C%22_is%20%5BOPERAND1%5D%20identical%20to%20%5BOPERAND2%5D%3F%22%3A%22%5BOPERAND1%5D%3D%3D%3D%5BOPERAND2%5D%22%2C%22_is%20%5BSTRING%5D%20%5BTEXTCASE%5D%3F%22%3A%22%5BSTRING%5D%E6%98%AF%5BTEXTCASE%5D%EF%BC%9F%22%2C%22_item%20%5BITEM%5D%20of%20%5BSTRING%5D%20matched%20by%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%22%3A%22%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%E5%8C%B9%E9%85%8D%5BSTRING%5D%E7%9A%84%E7%AC%AC%5BITEM%5D%E4%B8%AA%E5%86%85%E5%AE%B9%22%2C%22_item%20%5BITEM%5D%20of%20%5BSTRING%5D%20split%20by%20%5BSPLIT%5D%22%3A%22%E4%BB%A5%5BSPLIT%5D%E5%88%86%E5%89%B2%5BSTRING%5D%E5%90%8E%E7%9A%84%E7%AC%AC%5BITEM%5D%E9%A1%B9%22%2C%22_letters%20%5BLETTER1%5D%20to%20%5BLETTER2%5D%20of%20%5BSTRING%5D%22%3A%22%5BSTRING%5D%E7%9A%84%E7%AC%AC%5BLETTER1%5D%E5%88%B0%E7%AC%AC%5BLETTER2%5D%E4%BD%8D%22%2C%22_lowercase%22%3A%22%E5%B0%8F%E5%86%99%22%2C%22_repeat%20%5BSTRING%5D%20%5BREPEAT%5D%20times%22%3A%22%E9%87%8D%E5%A4%8D%5BREPEAT%5D%E4%B8%AA%5BSTRING%5D%22%2C%22_replace%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%3A%22%E6%9B%BF%E6%8D%A2%5BSTRING%5D%E4%B8%AD%E7%9A%84%5BSUBSTRING%5D%E4%B8%BA%5BREPLACE%5D%22%2C%22_replace%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20in%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%3A%22%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20%E5%9C%A8%20%5BSTRING%5D%E4%B8%AD%E6%9B%BF%E6%8D%A2%E4%B8%BA%20%20%5BREPLACE%5D%22%2C%22_reverse%20text%20%5BSTRING%5D%22%3A%22%E5%8F%8D%E8%BD%AC%E6%96%87%E6%9C%AC%5BSTRING%5D%22%2C%22_starts%22%3A%22%E5%BC%80%E5%A4%B4%22%2C%22_the%20end%22%3A%22%E6%9C%AB%E5%B0%BE%22%2C%22_the%20start%22%3A%22%E5%BC%80%E5%A4%B4%22%2C%22_trim%20whitespace%20%5BSTRING%5D%20from%20%5BMETHOD%5D%22%3A%22%E5%8E%BB%E9%99%A4%5BSTRING%5D%E4%B8%AD%5BMETHOD%5D%E7%9A%84%E7%A9%BA%E6%A0%BC%22%2C%22_unicode%20%5BNUM%5D%20as%20letter%22%3A%22unicode%5BNUM%5D%E5%AF%B9%E5%BA%94%E7%9A%84%E5%AD%97%E7%AC%A6%22%2C%22_unicode%20of%20%5BSTRING%5D%22%3A%22%5BSTRING%5D%E7%9A%84unicode%22%7D%7D)%3B%2F*%20end%20generated%20l10n%20code%20*%2F(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%0A%20%20const%20CaseParam%20%3D%20%7B%0A%20%20%20%20LOWERCASE%3A%20%22lowercase%22%2C%0A%20%20%20%20UPPERCASE%3A%20%22uppercase%22%2C%0A%20%20%20%20MIXEDCASE%3A%20%22mixedcase%22%2C%0A%20%20%20%20TITLECASE%3A%20%22titlecase%22%2C%0A%20%20%20%20EXACTTITLECASE%3A%20%22exacttitlecase%22%2C%0A%20%20%20%20RANDOMCASE%3A%20%22randomcase%22%2C%0A%20%20%20%20SENTENCECASE%3A%20%22sentencecase%22%2C%0A%20%20%20%20CAMELCASE%3A%20%22camelcase%22%2C%0A%20%20%7D%3B%0A%0A%20%20let%20splitCache%3B%0A%20%20let%20matchCache%3B%0A%0A%20%20class%20StringsExt%20%7B%0A%20%20%20%20constructor()%20%7B%7D%0A%0A%20%20%20%20_initCaseMenu()%20%7B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22lowercase%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22If%20your%20language%20has%20lowercase%2C%20style%20it%20accordingly%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20CaseParam.LOWERCASE%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22UPPERCASE%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22If%20your%20language%20has%20uppercase%2C%20style%20it%20accordingly%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20CaseParam.UPPERCASE%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22Sentence%20case%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Starts%20words%20after%20.%2C%20!%2C%20and%20%3F%20with%20captialized%20letters%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20CaseParam.SENTENCECASE%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22Title%20Case%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22If%20your%20language%20has%20Title%20Case%2C%20style%20it%20accordingly.%20'Abc'%20is%20title%20case%20and%20exactly%20title%20case%20but%20'ABC'%20is%20only%20title%20case.%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20CaseParam.TITLECASE%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22Exactly%20Title%20Case%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22If%20your%20language%20has%20Title%20Case%2C%20style%20it%20accordingly.%20'Abc'%20is%20title%20case%20and%20exactly%20title%20case%20but%20'ABC'%20is%20only%20title%20case.%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20CaseParam.EXACTTITLECASE%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22MiXeD%20CaSe%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22If%20your%20language%20has%20mixed%20case%2C%20style%20it%20accordingly%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20CaseParam.MIXEDCASE%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22RAndoMCaSe%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22If%20your%20language%20has%20randomcase%2C%20style%20it%20accordingly%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20CaseParam.RANDOMCASE%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22camelCase%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Removes%20all%20spaces%20and%20capitalizes%20all%20words%20after%20the%20first%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20value%3A%20CaseParam.CAMELCASE%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20id%20%22text%22%20would%20conflict%20with%20Scratch%20Lab's%20Animated%20Text%20(lab%2Ftext.js)%0A%20%20%20%20%20%20%20%20id%3A%20%22strings%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%22Text%22)%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22letters_of%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22letters%20%5BLETTER1%5D%20to%20%5BLETTER2%5D%20of%20%5BSTRING%5D%22%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20LETTER1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%202%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20LETTER2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%204%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22apple%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22split%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22item%20%5BITEM%5D%20of%20%5BSTRING%5D%20split%20by%20%5BSPLIT%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ITEM%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%203%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22apple%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPLIT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22p%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22count%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22count%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Counts%20how%20many%20time%20%5BSUBSTRING%5D%20appears%20in%20%5BSTRING%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SUBSTRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22p%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22apple%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22indexof%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22index%20of%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Reports%20where%20%5BSUBSTRING%5D%20appears%20in%20%5BSTRING%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SUBSTRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22p%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22apple%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22replace%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22replace%20%5BSUBSTRING%5D%20in%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SUBSTRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22world%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22Hello%20world!%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REPLACE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22fellow%20Scratchers%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22repeat%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22repeat%20%5BSTRING%5D%20%5BREPEAT%5D%20times%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22apple%20%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REPEAT%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%203%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22unicodeof%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22unicode%20of%20%5BSTRING%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22A%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22unicodefrom%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22unicode%20%5BNUM%5D%20as%20letter%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2065%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22replaceRegex%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22replace%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20in%20%5BSTRING%5D%20with%20%5BREPLACE%5D%22%0A%20%20%20%20%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REGEX%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22.%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FLAGS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22g%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22Hello%20world!%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REPLACE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%24%26%24%26%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22matchRegex%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22item%20%5BITEM%5D%20of%20%5BSTRING%5D%20matched%20by%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22%2F%5BREGEX%5D%2F%20is%20supposed%20to%20match%20the%20syntax%20that%20some%20actual%20programming%20languages%20used%20for%20regular%20expressions.%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ITEM%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22Hello%20world!%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REGEX%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22(.)%20(.%7B2%7D)%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FLAGS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22g%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22matchRegexJSON%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22matches%20of%20%5BSTRING%5D%20using%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20as%20array%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22%2F%5BREGEX%5D%2F%20is%20supposed%20to%20match%20the%20syntax%20that%20some%20actual%20programming%20languages%20used%20for%20regular%20expressions.%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22Hello%20world!%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REGEX%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22(.)%20(.%7B2%7D)%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FLAGS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22g%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22testRegex%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22%5BSTRING%5D%20matches%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22%2F%5BREGEX%5D%2F%20is%20supposed%20to%20match%20the%20syntax%20that%20some%20actual%20programming%20languages%20used%20for%20regular%20expressions.%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22Hello%20world!%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REGEX%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22hello%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FLAGS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22i%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22countRegex%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22count%20regex%20%2F%5BREGEX%5D%2F%5BFLAGS%5D%20in%20%5BSTRING%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22%2F%5BREGEX%5D%2F%20is%20supposed%20to%20match%20the%20syntax%20that%20some%20actual%20programming%20languages%20used%20for%20regular%20expressions.%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22Hello%20world!%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20REGEX%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22%5BAEIOU%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FLAGS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22i%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22identical%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22is%20%5BOPERAND1%5D%20identical%20to%20%5BOPERAND2%5D%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20OPERAND1%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22A%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20OPERAND2%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22a%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22isCase%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22is%20%5BSTRING%5D%20%5BTEXTCASE%5D%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%20%22Example%20block%20context%3A%20%3Cis%20%5Bhello%5D%20%5Blowercase%5D%20%3F%3E%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22apple%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TEXTCASE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22textCase%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20CaseParam.LOWERCASE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22toCase%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22convert%20%5BSTRING%5D%20to%20%5BTEXTCASE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Example%20block%20context%3A%20(convert%20%5BHELLO%5D%20to%20%5Blowercase%5D)%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22apple%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TEXTCASE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22textCase%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20CaseParam.UPPERCASE%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22posWith%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20default%3A%20%22%5BSTRING%5D%20%5BPOSITION%5D%20with%20%5BSUBSTRING%5D%3F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20description%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22%5BPOSITION%5D%20is%20a%20dropdown%20with%20'starts'%20and%20'ends'.%20The%20block%20then%20takes%20the%20form%20'%5BSTRING%5D%20starts%20with%20%5BSUBSTRING%5D%3F'%20or%20'%5BSTRING%5D%20ends%20with%20%5BSUBSTRING%5D%3F'%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22turbowarp%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20POSITION%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22positions%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SUBSTRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%22turbo%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22reverse%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22reverse%20text%20%5BSTRING%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20Scratch.translate(%22apple%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22trim%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22trim%20whitespace%20%5BSTRING%5D%20from%20%5BMETHOD%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20%60%20%20%20%20%24%7BScratch.translate(%22apple%22)%7D%20%20%20%20%60%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20METHOD%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22trimMethod%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20textCase%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20this._initCaseMenu()%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20positions%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22starts%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22starts%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22ends%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22ends%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20trimMethod%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22both%20sides%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22both%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22the%20end%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22end%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22the%20start%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20%22start%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20identical(args%2C%20util)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Purposefully%20no%20casting%2C%20because%0A%20%20%20%20%20%20%2F%2F%20types%20ARE%20differentiated%20in%20this%20block%0A%20%20%20%20%20%20return%20args.OPERAND1%20%3D%3D%3D%20args.OPERAND2%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20unicodeof(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20chars%20%3D%20Array.from(Scratch.Cast.toString(args.STRING))%3B%0A%20%20%20%20%20%20return%20chars.map((char)%20%3D%3E%20char.charCodeAt(0)).join(%22%20%22)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20unicodefrom(args%2C%20util)%20%7B%0A%20%20%20%20%20%20return%20String.fromCharCode(Number(args.NUM)%20%7C%7C%200)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20letters_of(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20string%20%3D%20Scratch.Cast.toString(args.STRING)%3B%0A%20%20%20%20%20%20const%20letter1%20%3D%20Scratch.Cast.toNumber(args.LETTER1)%3B%0A%20%20%20%20%20%20const%20letter2%20%3D%20Scratch.Cast.toNumber(args.LETTER2)%3B%0A%20%20%20%20%20%20return%20string.substring(letter1%20-%201%2C%20letter2)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20_caseInsensitiveRegex(str)%20%7B%0A%20%20%20%20%20%20return%20new%20RegExp(str.replaceAll(%2F%5B%5Ea-zA-Z0-9%5D%2Fg%2C%20%22%5C%5C%24%26%22)%2C%20%22gi%22)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20split(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20string%20%3D%20Scratch.Cast.toString(args.STRING)%3B%0A%20%20%20%20%20%20const%20split%20%3D%20Scratch.Cast.toString(args.SPLIT)%3B%0A%20%20%20%20%20%20const%20item%20%3D%20Scratch.Cast.toNumber(args.ITEM)%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Cache%20the%20last%20split%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20!(%0A%20%20%20%20%20%20%20%20%20%20splitCache%20%26%26%0A%20%20%20%20%20%20%20%20%20%20splitCache.string%20%3D%3D%3D%20string%20%26%26%0A%20%20%20%20%20%20%20%20%20%20splitCache.split%20%3D%3D%3D%20split%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20const%20regex%20%3D%20this._caseInsensitiveRegex(split)%3B%0A%0A%20%20%20%20%20%20%20%20splitCache%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20string%2C%0A%20%20%20%20%20%20%20%20%20%20split%2C%0A%20%20%20%20%20%20%20%20%20%20arr%3A%20string.split(regex)%2C%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20splitCache.arr%5Bitem%20-%201%5D%20%7C%7C%20%22%22%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20count(args%2C%20util)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Fill%20cache%0A%20%20%20%20%20%20this.split(%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20SPLIT%3A%20args.SUBSTRING%2C%0A%20%20%20%20%20%20%20%20%20%20STRING%3A%20args.STRING%2C%0A%20%20%20%20%20%20%20%20%20%20ITEM%3A%200%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20util%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20return%20splitCache.arr.length%20-%201%20%7C%7C%200%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20replace(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20string%20%3D%20Scratch.Cast.toString(args.STRING)%3B%0A%20%20%20%20%20%20const%20substring%20%3D%20Scratch.Cast.toString(args.SUBSTRING)%3B%0A%20%20%20%20%20%20const%20replace%20%3D%20Scratch.Cast.toString(args.REPLACE)%3B%0A%0A%20%20%20%20%20%20const%20regex%20%3D%20this._caseInsensitiveRegex(substring)%3B%0A%0A%20%20%20%20%20%20return%20string.replace(regex%2C%20replace)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20indexof(args%2C%20util)%20%7B%0A%20%20%20%20%20%20%2F%2F%20.toLowerCase()%20for%20case%20insensitivity%0A%20%20%20%20%20%20const%20string%20%3D%20Scratch.Cast.toString(args.STRING).toLowerCase()%3B%0A%20%20%20%20%20%20const%20substring%20%3D%20Scratch.Cast.toString(args.SUBSTRING).toLowerCase()%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Since%20both%20arguments%20are%20casted%20to%20strings%20beforehand%2C%0A%20%20%20%20%20%20%2F%2F%20we%20don't%20have%20to%20worry%20about%20type%20differences%0A%20%20%20%20%20%20%2F%2F%20like%20in%20the%20item%20number%20of%20in%20list%20block%0A%20%20%20%20%20%20const%20found%20%3D%20string.indexOf(substring)%3B%0A%0A%20%20%20%20%20%20%2F%2F%20indexOf%20returns%20-1%20when%20no%20matches%20are%20found%2C%20we%20can%20just%20%2B1%0A%20%20%20%20%20%20return%20found%20%2B%201%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20repeat(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20string%20%3D%20Scratch.Cast.toString(args.STRING)%3B%0A%20%20%20%20%20%20const%20repeat%20%3D%20Scratch.Cast.toNumber(args.REPEAT)%3B%0A%20%20%20%20%20%20return%20string.repeat(repeat)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20replaceRegex(args%2C%20util)%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20const%20string%20%3D%20Scratch.Cast.toString(args.STRING)%3B%0A%20%20%20%20%20%20%20%20const%20replacer%20%3D%20Scratch.Cast.toString(args.REPLACE)%3B%0A%20%20%20%20%20%20%20%20const%20regex%20%3D%20Scratch.Cast.toString(args.REGEX)%3B%0A%20%20%20%20%20%20%20%20const%20flags%20%3D%20Scratch.Cast.toString(args.FLAGS)%3B%0A%0A%20%20%20%20%20%20%20%20return%20string.replace(new%20RegExp(regex%2C%20flags)%2C%20replacer)%3B%0A%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20console.error(e)%3B%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20matchRegex(args%2C%20util)%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20const%20string%20%3D%20Scratch.Cast.toString(args.STRING)%3B%0A%20%20%20%20%20%20%20%20const%20uncleanRegex%20%3D%20Scratch.Cast.toString(args.REGEX)%3B%0A%20%20%20%20%20%20%20%20const%20flags%20%3D%20Scratch.Cast.toString(args.FLAGS)%3B%0A%20%20%20%20%20%20%20%20const%20item%20%3D%20Scratch.Cast.toNumber(args.ITEM)%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Cache%20the%20last%20matched%20string%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20!(%0A%20%20%20%20%20%20%20%20%20%20%20%20matchCache%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20matchCache.string%20%3D%3D%3D%20string%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20matchCache.regex%20%3D%3D%3D%20uncleanRegex%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20matchCache.flags%20%3D%3D%3D%20flags%0A%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20newFlags%20%3D%20flags.includes(%22g%22)%20%3F%20flags%20%3A%20flags%20%2B%20%22g%22%3B%0A%20%20%20%20%20%20%20%20%20%20const%20regex%20%3D%20new%20RegExp(uncleanRegex%2C%20newFlags)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20matchCache%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20string%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20regex%3A%20uncleanRegex%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20flags%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arr%3A%20string.match(regex)%20%7C%7C%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20matchCache.arr%5Bitem%20-%201%5D%20%7C%7C%20%22%22%3B%0A%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20console.error(e)%3B%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20matchRegexJSON(args%2C%20util)%20%7B%0A%20%20%20%20%20%20%2F%2F%20matchRegex%20but%20it%20returns%20an%20array%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20const%20string%20%3D%20Scratch.Cast.toString(args.STRING)%3B%0A%20%20%20%20%20%20%20%20const%20uncleanRegex%20%3D%20Scratch.Cast.toString(args.REGEX)%3B%0A%20%20%20%20%20%20%20%20const%20flags%20%3D%20Scratch.Cast.toString(args.FLAGS)%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Cache%20the%20last%20matched%20string%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20!(%0A%20%20%20%20%20%20%20%20%20%20%20%20matchCache%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20matchCache.string%20%3D%3D%3D%20string%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20matchCache.regex%20%3D%3D%3D%20uncleanRegex%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20matchCache.flags%20%3D%3D%3D%20flags%0A%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20newFlags%20%3D%20flags.includes(%22g%22)%20%3F%20flags%20%3A%20flags%20%2B%20%22g%22%3B%0A%20%20%20%20%20%20%20%20%20%20const%20regex%20%3D%20new%20RegExp(uncleanRegex%2C%20newFlags)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20matchCache%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20string%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20regex%3A%20uncleanRegex%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20flags%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arr%3A%20string.match(regex)%20%7C%7C%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20JSON.stringify(matchCache.arr)%20%7C%7C%20%22%5B%5D%22%3B%0A%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20console.error(e)%3B%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20countRegex(args%2C%20util)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Fill%20cache%0A%20%20%20%20%20%20%2F%2F%20(ITEM%20is%20casted%20into%200%2C%0A%20%20%20%20%20%20%2F%2F%20but%20we%20don't%20care%20about%20the%20return%20value)%0A%20%20%20%20%20%20this.matchRegex(args%2C%20util)%3B%0A%20%20%20%20%20%20return%20matchCache.arr.length%20%7C%7C%200%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20testRegex(args%2C%20util)%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20const%20string%20%3D%20Scratch.Cast.toString(args.STRING)%3B%0A%20%20%20%20%20%20%20%20const%20regex%20%3D%20Scratch.Cast.toString(args.REGEX)%3B%0A%20%20%20%20%20%20%20%20const%20flags%20%3D%20Scratch.Cast.toString(args.FLAGS)%3B%0A%0A%20%20%20%20%20%20%20%20return%20new%20RegExp(regex%2C%20flags).test(string)%3B%0A%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20console.error(e)%3B%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20isCase(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20string%20%3D%20Scratch.Cast.toString(args.STRING)%3B%0A%20%20%20%20%20%20const%20textCase%20%3D%20Scratch.Cast.toString(args.TEXTCASE)%3B%0A%20%20%20%20%20%20switch%20(textCase)%20%7B%0A%20%20%20%20%20%20%20%20case%20CaseParam.LOWERCASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20string.toLowerCase()%20%3D%3D%3D%20string%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.UPPERCASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20string.toUpperCase()%20%3D%3D%3D%20string%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.MIXEDCASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20!(%0A%20%20%20%20%20%20%20%20%20%20%20%20string.toUpperCase()%20%3D%3D%3D%20string%20%7C%7C%20string.toLowerCase()%20%3D%3D%3D%20string%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.TITLECASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20string.split(%2F%5Cb%2Fg).every((word)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!word)%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20titleCased%20%3D%20word%5B0%5D.toUpperCase()%20%2B%20word.substring(1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20word%20%3D%3D%3D%20titleCased%3B%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.EXACTTITLECASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20string.split(%2F%5Cb%2Fg).every((word)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!word)%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20titleCased%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20word%5B0%5D.toUpperCase()%20%2B%20word.substring(1).toLowerCase()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20word%20%3D%3D%3D%20titleCased%3B%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.CAMELCASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20%2F%5E%5B%5EA-Z%5Cs%5D%5B%5E%5Cs%5D*%24%2F.test(string)%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.RANDOMCASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.SENTENCECASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20%2F%5E%5BA-Z%5D%5B%5E%3F.!%5D*(%3F%3A%5B%3F.!%5D%5Cs%2B%5BA-Z%5D%5B%5E%3F.!%5D*)*%24%2F.test(string)%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20toCase(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20string%20%3D%20Scratch.Cast.toString(args.STRING)%3B%0A%20%20%20%20%20%20const%20textCase%20%3D%20Scratch.Cast.toString(args.TEXTCASE)%3B%0A%20%20%20%20%20%20let%20workingText%20%3D%20%22%22%3B%0A%20%20%20%20%20%20let%20sentenceCapitalFlag%20%3D%20false%3B%0A%20%20%20%20%20%20switch%20(textCase)%20%7B%0A%20%20%20%20%20%20%20%20case%20CaseParam.LOWERCASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20string.toLowerCase()%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.UPPERCASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20string.toUpperCase()%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.MIXEDCASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20Array.from(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20.map((char%2C%20index)%20%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20index%20%25%202%20%3D%3D%3D%200%20%3F%20char.toUpperCase()%20%3A%20char.toLowerCase()%0A%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20.join(%22%22)%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.TITLECASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20string%0A%20%20%20%20%20%20%20%20%20%20%20%20.split(%2F%5Cb%2Fg)%0A%20%20%20%20%20%20%20%20%20%20%20%20.map((word)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!word)%20return%20%22%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20word%5B0%5D.toUpperCase()%20%2B%20word.substring(1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20.join(%22%22)%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.EXACTTITLECASE%3A%0A%20%20%20%20%20%20%20%20%20%20return%20string%0A%20%20%20%20%20%20%20%20%20%20%20%20.split(%2F%5Cb%2Fg)%0A%20%20%20%20%20%20%20%20%20%20%20%20.map((word)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!word)%20return%20%22%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20word%5B0%5D.toUpperCase()%20%2B%20word.substring(1).toLowerCase()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20.join(%22%22)%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.SENTENCECASE%3A%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20string.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%5E%5Cs*%24%2F.test(string%5Bi%20-%201%5D%20%3F%3F%20%22%20%22)%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20!sentenceCapitalFlag%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20string%5Bi%5D.toUpperCase()%20!%3D%20string%5Bi%5D.toLowerCase()%0A%20%20%20%20%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20workingText%20%2B%3D%20string%5Bi%5D.toUpperCase()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20sentenceCapitalFlag%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(string%5Bi%5D%20%3D%3D%20%22.%22%20%7C%7C%20string%5Bi%5D%20%3D%3D%20%22!%22%20%7C%7C%20string%5Bi%5D%20%3D%3D%20%22%3F%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sentenceCapitalFlag%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20workingText%20%2B%3D%20string%5Bi%5D.toLowerCase()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20workingText%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.RANDOMCASE%3A%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20string.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(Math.random()%20%3E%200.5)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20workingText%20%2B%3D%20string%5Bi%5D.toUpperCase()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20workingText%20%2B%3D%20string%5Bi%5D.toLowerCase()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20workingText%3B%0A%20%20%20%20%20%20%20%20case%20CaseParam.CAMELCASE%3A%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20string.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(%2F%5E%5Cs*%24%2F.test(string%5Bi%20-%201%5D%20%3F%3F%20%22x%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20workingText%20%2B%3D%20string%5Bi%5D.toUpperCase()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20workingText%20%2B%3D%20string%5Bi%5D.toLowerCase()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20workingText.replace(%2F%5Cs%2Fg%2C%20%22%22)%3B%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20return%20string%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20posWith(args)%20%7B%0A%20%20%20%20%20%20const%20STRING%20%3D%20Scratch.Cast.toString(args.STRING)%3B%0A%20%20%20%20%20%20const%20SUBSTRING%20%3D%20Scratch.Cast.toString(args.SUBSTRING)%3B%0A%20%20%20%20%20%20if%20(Scratch.Cast.toString(args.POSITION)%20%3D%3D%3D%20%22starts%22)%20%7B%0A%20%20%20%20%20%20%20%20return%20STRING.startsWith(SUBSTRING)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20STRING.endsWith(SUBSTRING)%3B%0A%20%20%20%20%7D%0A%20%20%20%20reverse(args)%20%7B%0A%20%20%20%20%20%20return%20Array.from(Scratch.Cast.toString(args.STRING)).reverse().join(%22%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20trim(args)%20%7B%0A%20%20%20%20%20%20const%20STRING%20%3D%20Scratch.Cast.toString(args.STRING)%3B%0A%20%20%20%20%20%20switch%20(Scratch.Cast.toString(args.METHOD))%20%7B%0A%20%20%20%20%20%20%20%20case%20%22start%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20STRING.trimStart()%3B%0A%20%20%20%20%20%20%20%20case%20%22end%22%3A%0A%20%20%20%20%20%20%20%20%20%20return%20STRING.trimEnd()%3B%0A%20%20%20%20%20%20%20%20case%20%22both%22%3A%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20return%20STRING.trim()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20StringsExt())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Looks%20Expanded%0A%2F%2F%20ID%3A%20SPlooksExpanded%0A%2F%2F%20Description%3A%20Expansion%20of%20the%20Looks%20Category%0A%2F%2F%20By%3A%20SharkPool%0A%2F%2F%20By%3A%20CST1229%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FCST1229%2F%3E%0A%2F%2F%20Licence%3A%20MIT%0A%0A%2F%2F%20Version%20V.1.0.4%0A%0A(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20throw%20new%20Error(%22Looks%20Expanded%20must%20run%20unsandboxed!%22)%3B%0A%0A%20%20const%20menuIconURI%20%3D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5Ny43MzkiIGhlaWdodD0iOTcuNzM5IiB2aWV3Qm94PSIwIDAgOTcuNzM5IDk3LjczOSI%2BPGcgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIj48cGF0aCBkPSJNMCA0OC44N0MwIDIxLjg4IDIxLjg4IDAgNDguODcgMHM0OC44NyAyMS44OCA0OC44NyA0OC44Ny0yMS44OCA0OC44Ny00OC44NyA0OC44N1MwIDc1Ljg2IDAgNDguODciIGZpbGw9IiM2MzQyYTYiLz48cGF0aCBkPSJNNS43ODIgNDguODdjMC0yMy43OTcgMTkuMjkxLTQzLjA4OCA0My4wODgtNDMuMDg4UzkxLjk1OCAyNS4wNzMgOTEuOTU4IDQ4Ljg3IDcyLjY2NyA5MS45NTggNDguODcgOTEuOTU4IDUuNzgyIDcyLjY2NyA1Ljc4MiA0OC44NyIgZmlsbD0iIzk2ZiIvPjxwYXRoIGQ9Ik0xNi4xODYgNDQuOTk2YzQuNTMyLTUuMzEgMTYuMjE4LTE2Ljg3NCAzMi4xNzYtMTcuMDM0IDE3LjExNy0uMTcyIDI5LjMzNCAxMi41MzkgMzMuNTIgMTcuNjA0IDEuMDM5IDEuMjU4IDEuMSAyLjc2NC4xNjcgMy45MjctMy45MzUgNC45MDEtMTUuODk4IDE3LjY4Mi0zMy42ODcgMTcuNzY3LTE2Ljk1Ni4wOC0yOC43My0xMi41OS0zMi43MzYtMTcuNjI0LS45OTMtMS4yNDctLjc5My0zLjA1NC41Ni00LjY0IiBmaWxsPSIjZmZmIi8%2BPHBhdGggZD0iTTM1LjE0NiA0Ny42MWMwLTcuNTM2IDYuMTEtMTMuNjQ1IDEzLjY0NS0xMy42NDUgNy41MzYgMCAxMy42NDUgNi4xMSAxMy42NDUgMTMuNjQ1IDAgNy41MzYtNi4xMSAxMy42NDUtMTMuNjQ1IDEzLjY0NS03LjUzNiAwLTEzLjY0NS02LjExLTEzLjY0NS0xMy42NDUiIGZpbGw9IiM5NmYiLz48cGF0aCBkPSJNNDEuMzQyIDQ3LjYxYTcuNDQ5IDcuNDQ5IDAgMSAxIDE0Ljg5OCAwIDcuNDQ5IDcuNDQ5IDAgMCAxLTE0Ljg5OCAwIiBmaWxsPSIjZmZmIi8%2BPHBhdGggZD0iTTY1LjY1IDc4Ljc5YTIuOTIgMi45MiAwIDAgMS0yLjkxOC0yLjkydi02LjcxMmgtNi43MTNhMi45MiAyLjkyIDAgMCAxLTIuOTE5LTIuOTE5VjY0LjA1YTIuOTIgMi45MiAwIDAgMSAyLjkxOS0yLjkxOGg2LjcxM3YtNi43MTNBMi45MiAyLjkyIDAgMCAxIDY1LjY1IDUxLjVoMi4xOWEyLjkyIDIuOTIgMCAwIDEgMi45MTggMi45MTl2Ni43MTNoNi43MTNhMi45MiAyLjkyIDAgMCAxIDIuOTE5IDIuOTE4djIuMTlhMi45MiAyLjkyIDAgMCAxLTIuOTIgMi45MThoLTYuNzEydjYuNzEzYTIuOTIgMi45MiAwIDAgMS0yLjkxOSAyLjkxOXoiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzk2ZiIgc3Ryb2tlLXdpZHRoPSI4Ii8%2BPHBhdGggZD0iTTY1LjY1IDc4Ljc5YTIuOTIgMi45MiAwIDAgMS0yLjkxOC0yLjkydi02LjcxMmgtNi43MTNhMi45MiAyLjkyIDAgMCAxLTIuOTE5LTIuOTE5VjY0LjA1YTIuOTIgMi45MiAwIDAgMSAyLjkxOS0yLjkxOGg2LjcxM3YtNi43MTNBMi45MiAyLjkyIDAgMCAxIDY1LjY1IDUxLjVoMi4xOWEyLjkyIDIuOTIgMCAwIDEgMi45MTggMi45MTl2Ni43MTNoNi43MTNhMi45MiAyLjkyIDAgMCAxIDIuOTE5IDIuOTE4djIuMTlhMi45MiAyLjkyIDAgMCAxLTIuOTIgMi45MThoLTYuNzEydjYuNzEzYTIuOTIgMi45MiAwIDAgMS0yLjkxOSAyLjkxOXoiIGZpbGw9IiNmZmYiLz48L2c%2BPC9zdmc%2B%22%3B%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20Cast%20%3D%20Scratch.Cast%3B%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0A%20%20const%20looksCore%20%3D%20runtime.ext_scratch3_looks%3B%0A%20%20const%20isPM%20%3D%20Scratch.extensions.isPenguinMod%3B%0A%0A%20%20const%20render%20%3D%20vm.renderer%3B%0A%20%20const%20twgl%20%3D%20render.exports.twgl%3B%0A%0A%20%20const%20drawableKey%20%3D%20Symbol(%22SPlooksKey%22)%3B%0A%20%20const%20MAX_REPLACERS%20%3D%2015%3B%0A%0A%20%20const%20newSingleEffects%20%3D%20%7B%0A%20%20%20%20saturation%3A%201%2C%20opaque%3A%200%2C%20contrast%3A%201%2C%0A%20%20%20%20posterize%3A%200%2C%20sepia%3A%200%2C%20bloom%3A%200%0A%20%20%7D%3B%0A%20%20const%20genEffectFactory%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20warp%3A%20%5B0.5%2C%20-0.5%2C%20-0.5%2C%20-0.5%2C%20-0.5%2C%200.5%2C%200.5%2C%200.5%5D%2C%0A%20%20%20%20%20%20tint%3A%20%5B1%2C%201%2C%201%2C%201%5D%2C%0A%20%20%20%20%20%20replacers%3A%20%5B%5D%2C%0A%20%20%20%20%20%20maskTexture%3A%20%22%22%2C%0A%20%20%20%20%20%20oldMask%3A%20%22%22%2C%0A%20%20%20%20%20%20shouldMask%3A%200%2C%0A%20%20%20%20%20%20newEffects%3A%20%7B%20...newSingleEffects%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%7D%3B%0A%0A%20%20const%20defaultWarpCache%20%3D%20%220.5%2C-0.5%2C-0.5%2C-0.5%2C-0.5%2C0.5%2C0.5%2C0.5%22%3B%0A%20%20const%20replaceFrom%20%3D%20new%20Float32Array(MAX_REPLACERS%20*%203).fill(0)%3B%0A%20%20const%20replaceTo%20%3D%20new%20Float32Array(MAX_REPLACERS%20*%204).fill(0)%3B%0A%20%20const%20replaceThresh%20%3D%20new%20Float32Array(MAX_REPLACERS).fill(1)%3B%0A%0A%20%20%2F*%20patch%20for%20new%20effects%20*%2F%0A%20%20function%20initDrawable(drawable)%20%7B%0A%20%20%20%20if%20(!drawable%5BdrawableKey%5D)%20drawable%5BdrawableKey%5D%20%3D%20genEffectFactory()%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Clear%20the%20renderer's%20shader%20cache%20since%20we're%20patching%20shaders%0A%20%20for%20(const%20cache%20of%20Object.values(render._shaderManager._shaderCache))%20%7B%0A%20%20%20%20for%20(const%20programInfo%20of%20cache)%20%7B%0A%20%20%20%20%20%20if%20(programInfo)%20render.gl.deleteProgram(programInfo.program)%3B%0A%20%20%20%20%7D%0A%20%20%20%20cache.length%20%3D%200%3B%0A%20%20%7D%0A%0A%20%20let%20patchShaders%20%3D%20false%3B%0A%20%20const%20ogCreateProgramInfo%20%3D%20twgl.createProgramInfo%3B%0A%20%20twgl.createProgramInfo%20%3D%20function%20(...args)%20%7B%0A%20%20%20%20%2F%2F%20perform%20a%20string%20find-and-replace%20on%20the%20shader%20text%0A%20%20%20%20if%20(patchShaders%20%26%26%20args%5B1%5D%20%26%26%20args%5B1%5D%5B0%5D%20%26%26%20args%5B1%5D%5B1%5D)%20%7B%0A%20%20%20%20%20%20args%5B1%5D%5B0%5D%20%3D%20args%5B1%5D%5B0%5D%0A%20%20%20%20%20%20%20%20%2F%2F%20replace%20attribute%20properties%20with%20variables%20we%20can%20modify%0A%20%20%20%20%20%20%20%20.replaceAll(%22vec4(a_position%22%2C%20%22vec4(positionSP%22)%0A%20%20%20%20%20%20%20%20.replace(%22v_texCoord%20%3D%20a_texCoord%3B%22%2C%20%22%22)%0A%20%20%20%20%20%20%20%20.replace(%22%23if%20!(defined(DRAW_MODE_line)%20%7C%7C%20defined(DRAW_MODE_background))%22%2C%20%22%23if%201%22)%0A%20%20%20%20%20%20%20%20.replace(%60void%20main()%20%7B%60%2C%0A%20%20%20%20%20%20%20%20%60uniform%20vec2%20u_warpSP%5B4%5D%3B%0A%0Avoid%20main()%20%7B%0A%20%20vec2%20positionSP%20%3D%20a_position%3B%0A%20%20%23ifndef%20DRAW_MODE_background%0A%20%20v_texCoord%20%3D%20a_texCoord%3B%0A%20%20%23endif%0A%0A%20%20float%20u%20%3D%20v_texCoord.x%3B%0A%20%20float%20v%20%3D%20v_texCoord.y%3B%0A%0A%20%20%2F%2F%20apply%20position%20warp%20(bilinear)%0A%20%20vec2%20warpedPos%20%3D%20%0A%20%20%20%20(1.0%20-%20u)%20*%20(1.0%20-%20v)%20*%20u_warpSP%5B0%5D%20%2B%20u%20*%20(1.0%20-%20v)%20*%20u_warpSP%5B1%5D%20%2B%0A%20%20%20%20u%20*%20v%20*%20u_warpSP%5B2%5D%20%2B%20(1.0%20-%20u)%20*%20v%20*%20u_warpSP%5B3%5D%3B%0A%0A%20%20%2F%2F%20compute%20w%20for%20perspective%20correction%0A%20%20float%20w%20%3D%20(1.0%20-%20u)%20*%20(1.0%20-%20v)%20%2B%20u%20*%20(1.0%20-%20v)%20%2B%20u%20*%20v%20%2B%20(1.0%20-%20u)%20*%20v%3B%0A%0A%20%20positionSP%20%3D%20warpedPos%20%2F%20max(w%2C%201e-5)%3B%0A%0A%20%20%23ifdef%20DRAW_MODE_background%0A%20%20gl_Position%20%3D%20vec4(positionSP%20*%202.0%2C%200%2C%201)%3B%0A%20%20%23else%0A%20%20gl_Position%20%3D%20u_projectionMatrix%20*%20u_modelMatrix%20*%20vec4(positionSP%2C%200%2C%201)%3B%0A%20%20%23endif%60%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20if%20(isPM)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20penguinmod%20has%20skewing%2C%20which%20we%20have%20to%20disable%20for%20warping%20to%20work%0A%20%20%20%20%20%20%20%20args%5B1%5D%5B0%5D%20%3D%20args%5B1%5D%5B0%5D.replace(%0A%20%20%20%20%20%20%20%20%20%20%60gl_Position%20%3D%20u_projectionMatrix%20*%20u_modelMatrix%20*%20vec4(x%2Cy%2C%200%2C%201)%3B%60%2C%0A%20%20%20%20%20%20%20%20%20%20%60gl_Position%20%3D%20u_projectionMatrix%20*%20u_modelMatrix%20*%20vec4(positionSP%2C%200%2C%201)%3B%60%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20args%5B1%5D%5B1%5D%20%3D%20args%5B1%5D%5B1%5D.replace(%0A%20%20%20%20%20%20%20%20%60uniform%20sampler2D%20u_skin%3B%60%2C%0A%20%20%20%20%20%20%20%20%60uniform%20sampler2D%20u_skin%3B%0Auniform%20sampler2D%20u_maskTextureSP%3B%0Auniform%20float%20u_shouldMaskSP%3B%0A%0A%23define%20MAX_REPLACERS%2015%0Auniform%20vec3%20u_replaceColorFromSP%5BMAX_REPLACERS%5D%3B%0Auniform%20vec4%20u_replaceColorToSP%5BMAX_REPLACERS%5D%3B%0Auniform%20float%20u_replaceThresholdSP%5BMAX_REPLACERS%5D%3B%0Auniform%20int%20u_numReplacersSP%3B%0A%0Auniform%20vec4%20u_tintColorSP%3B%0Auniform%20float%20u_saturateSP%3B%0Auniform%20float%20u_opaqueSP%3B%0Auniform%20float%20u_contrastSP%3B%0Auniform%20float%20u_posterizeSP%3B%0Auniform%20float%20u_sepiaSP%3B%0Auniform%20float%20u_bloomSP%3B%0A%0Avec3%20spRGB2HSV(vec3%20c)%20%7B%0A%20%20vec4%20K%20%3D%20vec4(0.0%2C%20-1.0%20%2F%203.0%2C%202.0%20%2F%203.0%2C%20-1.0)%3B%0A%20%20vec4%20p%20%3D%20mix(vec4(c.bg%2C%20K.wz)%2C%20vec4(c.gb%2C%20K.xy)%2C%20step(c.b%2C%20c.g))%3B%0A%20%20vec4%20q%20%3D%20mix(vec4(p.xyw%2C%20c.r)%2C%20vec4(c.r%2C%20p.yzx)%2C%20step(p.x%2C%20c.r))%3B%0A%0A%20%20float%20d%20%3D%20q.x%20-%20min(q.w%2C%20q.y)%3B%0A%20%20float%20e%20%3D%201.0e-10%3B%0A%20%20return%20vec3(abs(q.z%20%2B%20(q.w%20-%20q.y)%20%2F%20(6.0%20*%20d%20%2B%20e))%2C%20d%20%2F%20(q.x%20%2B%20e)%2C%20q.x)%3B%0A%7D%0Avec3%20spHSV2RGB(vec3%20c)%20%7B%0A%20%20vec4%20K%20%3D%20vec4(1.0%2C%202.0%20%2F%203.0%2C%201.0%20%2F%203.0%2C%203.0)%3B%0A%20%20vec3%20p%20%3D%20abs(fract(c.xxx%20%2B%20K.xyz)%20*%206.0%20-%20K.www)%3B%0A%20%20return%20c.z%20*%20mix(K.xxx%2C%20clamp(p%20-%20K.xxx%2C%200.0%2C%201.0)%2C%20c.y)%3B%0A%7D%60%0A%20%20%20%20%20%20).replace(%0A%20%20%20%20%20%20%20%20%60gl_FragColor.rgb%20%3D%20clamp(gl_FragColor.rgb%20%2F%20(gl_FragColor.a%20%2B%20epsilon)%2C%200.0%2C%201.0)%3B%60%2C%0A%20%20%20%20%20%20%20%20%60gl_FragColor.rgb%20%3D%20clamp(gl_FragColor.rgb%20%2F%20(gl_FragColor.a%20%2B%20epsilon)%2C%200.0%2C%201.0)%3B%0Avec3%20finalColor%20%3D%20gl_FragColor.rgb%3B%0Afloat%20finalAlpha%20%3D%20gl_FragColor.a%3B%0A%0Aif%20(u_shouldMaskSP%20%3E%200.5%20%26%26%20finalAlpha%20%3E%200.0)%20%7B%0A%20%20vec4%20maskColor%20%3D%20texture2D(u_maskTextureSP%2C%20texcoord0)%3B%0A%20%20maskColor.rgb%20%3D%20clamp(maskColor.rgb%20%2F%20(maskColor.a%20%2B%20epsilon)%2C%200.0%2C%201.0)%3B%0A%20%20finalAlpha%20*%3D%20maskColor.a%3B%0A%7D%0A%0Aif%20(u_numReplacersSP%20%3E%200)%20for%20(int%20i%20%3D%200%3B%20i%20%3C%20MAX_REPLACERS%3B%20i%2B%2B)%20%7B%0A%20%20if%20(i%20%3E%3D%20u_numReplacersSP)%20break%3B%0A%0A%20%20float%20dist%20%3D%20distance(finalColor%2C%20u_replaceColorFromSP%5Bi%5D)%3B%0A%20%20if%20(dist%20%3C%3D%20u_replaceThresholdSP%5Bi%5D)%20%7B%0A%20%20%20%20float%20strength%20%3D%201.0%20-%20(dist%20%2F%20(u_replaceThresholdSP%5Bi%5D%20%2B%201.0))%3B%0A%20%20%20%20finalColor%20%3D%20mix(finalColor%2C%20u_replaceColorToSP%5Bi%5D.rgb%2C%20strength)%3B%0A%20%20%20%20if%20(u_replaceColorToSP%5Bi%5D.a%20%3C%201.0%20%26%26%20strength%20%3E%200.01)%20%7B%0A%20%20%20%20%20%20finalAlpha%20%3D%20clamp(mix(finalAlpha%2C%20u_replaceColorToSP%5Bi%5D.a%2C%20strength)%2C%200.0%2C%201.0)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%0A%0Aif%20(u_saturateSP%20%3E%201.0%20%7C%7C%20u_saturateSP%20%3C%201.0)%20%7B%0A%20%20vec3%20hsv%20%3D%20spRGB2HSV(finalColor)%3B%0A%20%20if%20(u_saturateSP%20%3C%200.0)%20%7B%0A%20%20%20%20hsv.x%20%3D%20mod(hsv.x%20%2B%200.5%2C%201.0)%3B%0A%20%20%20%20hsv.y%20*%3D%20-u_saturateSP%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20hsv.y%20*%3D%20u_saturateSP%3B%0A%20%20%7D%0A%20%20finalColor%20%3D%20spHSV2RGB(hsv)%3B%0A%7D%0AfinalColor%20%3D%20(finalColor%20-%200.5)%20*%20u_contrastSP%20%2B%200.5%3B%0Aif%20(u_posterizeSP%20%3E%200.0)%20finalColor%20%3D%20floor(finalColor%20*%20u_posterizeSP)%20%2F%20u_posterizeSP%3B%0A%0Aif%20(u_sepiaSP%20%3E%200.0)%20%7B%0A%20%20vec3%20sepiaColor%20%3D%20vec3(%0A%20%20%20%20dot(finalColor%2C%20vec3(0.393%2C%200.769%2C%200.189))%2C%0A%20%20%20%20dot(finalColor%2C%20vec3(0.349%2C%200.686%2C%200.168))%2C%0A%20%20%20%20dot(finalColor%2C%20vec3(0.272%2C%200.534%2C%200.131))%0A%20%20)%3B%0A%20%20finalColor%20%3D%20mix(finalColor%2C%20sepiaColor%2C%20u_sepiaSP)%3B%0A%7D%0Aif%20(u_bloomSP%20%3E%200.0)%20%7B%0A%20%20vec3%20bloom%20%3D%20max(finalColor%20-%200.4%2C%200.0)%3B%0A%0A%20%20bloom%20%2B%3D%20texture2D(u_skin%2C%20v_texCoord%20%2B%20vec2(%200.001%2C%20%200.001)).rgb%3B%0A%20%20bloom%20%2B%3D%20texture2D(u_skin%2C%20v_texCoord%20%2B%20vec2(-0.001%2C%20%200.001)).rgb%3B%0A%20%20bloom%20%2B%3D%20texture2D(u_skin%2C%20v_texCoord%20%2B%20vec2(%200.001%2C%20-0.001)).rgb%3B%0A%20%20bloom%20%2B%3D%20texture2D(u_skin%2C%20v_texCoord%20%2B%20vec2(-0.001%2C%20-0.001)).rgb%3B%0A%20%20bloom%20*%3D%200.25%3B%0A%0A%20%20finalColor%20%2B%3D%20bloom%20*%20u_bloomSP%3B%0A%20%20finalColor%20%3D%20clamp(finalColor%2C%200.0%2C%201.0)%3B%0A%7D%0A%0Agl_FragColor.rgb%20%3D%20finalColor%20*%20u_tintColorSP.rgb%3B%0Afloat%20baseAlpha%20%3D%20finalAlpha%3B%0Aif%20(baseAlpha%20%3E%200.0%20%26%26%20baseAlpha%20%3C%201.0)%20baseAlpha%20%3D%20mix(baseAlpha%2C%201.0%2C%20u_opaqueSP)%3B%0Agl_FragColor.a%20%3D%20baseAlpha%3B%60%0A%20%20%20%20%20%20).replaceAll(%0A%20%20%20%20%20%20%20%20%2F%2F%20The%20unpremultiply%20code%20will%20now%20always%20run%20due%20to%20palette%20replacement%20stuff.%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20is%20a%20bit%20more%20inefficient%2C%20but%20whatever.%0A%20%20%20%20%20%20%20%20%22%23if%20defined(ENABLE_color)%20%7C%7C%20defined(ENABLE_brightness)%22%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20i%20have%20no%20idea%20how%20webgl%20works%2C%20and%20i%20don%22t%20want%20to%20have%20to%20remove%20the%20%23endif%20somehow%0A%20%20%20%20%20%20%20%20%2F%2F%20just%20do%20something%20that%20will%20always%20be%20true%20-CST%0A%20%20%20%20%20%20%20%20%22%23if%20defined(MAX_REPLACERS)%22%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20ogCreateProgramInfo.apply(this%2C%20args)%3B%0A%20%20%7D%3B%0A%20%20const%20ogBuildShader%20%3D%20render._shaderManager._buildShader%3B%0A%20%20render._shaderManager._buildShader%20%3D%20function%20(...args)%20%7B%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20patchShaders%20%3D%20true%3B%0A%20%20%20%20%20%20return%20ogBuildShader.apply(this%2C%20args)%3B%0A%20%20%20%20%7D%20finally%20%7B%0A%20%20%20%20%20%20patchShaders%20%3D%20false%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20const%20ogGetUniforms%20%3D%20render.exports.Drawable.prototype.getUniforms%3B%0A%20%20render.exports.Drawable.prototype.getUniforms%20%3D%20function%20()%20%7B%0A%20%20%20%20const%20gl%20%3D%20render.gl%3B%0A%20%20%20%20const%20uniforms%20%3D%20ogGetUniforms.call(this)%3B%0A%0A%20%20%20%20initDrawable(this)%3B%0A%20%20%20%20const%20effectData%20%3D%20this%5BdrawableKey%5D%3B%0A%20%20%20%20const%20replacers%20%3D%20effectData.replacers%3B%0A%0A%20%20%20%20if%20(replacers.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20Math.min(replacers.length%2C%20MAX_REPLACERS)%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20replaceFrom.set(replacers%5Bi%5D.targetVert%2C%20i%20*%203)%3B%0A%20%20%20%20%20%20%20%20replaceTo.set(replacers%5Bi%5D.replaceVert%2C%20i%20*%204)%3B%0A%20%20%20%20%20%20%20%20replaceThresh%5Bi%5D%20%3D%20replacers%5Bi%5D.soft%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20newEffects%20%3D%20effectData.newEffects%3B%0A%20%20%20%20uniforms.u_replaceColorFromSP%20%3D%20replaceFrom%3B%0A%20%20%20%20uniforms.u_replaceColorToSP%20%3D%20replaceTo%3B%0A%20%20%20%20uniforms.u_replaceThresholdSP%20%3D%20replaceThresh%3B%0A%20%20%20%20uniforms.u_numReplacersSP%20%3D%20replacers%20%3F%20Math.min(replacers.length%2C%20MAX_REPLACERS)%20%3A%200%3B%0A%20%20%20%20uniforms.u_tintColorSP%20%3D%20effectData.tint%3B%0A%20%20%20%20uniforms.u_warpSP%20%3D%20effectData.warp%3B%0A%20%20%20%20uniforms.u_shouldMaskSP%20%3D%20effectData.shouldMask%3B%0A%20%20%20%20uniforms.u_saturateSP%20%3D%20newEffects.saturation%3B%0A%20%20%20%20uniforms.u_opaqueSP%20%3D%20newEffects.opaque%3B%0A%20%20%20%20uniforms.u_contrastSP%20%3D%20newEffects.contrast%3B%0A%20%20%20%20uniforms.u_posterizeSP%20%3D%20newEffects.posterize%3B%0A%20%20%20%20uniforms.u_sepiaSP%20%3D%20newEffects.sepia%3B%0A%20%20%20%20uniforms.u_bloomSP%20%3D%20newEffects.bloom%3B%0A%0A%20%20%20%20if%20(effectData.shouldMask)%20%7B%0A%20%20%20%20%20%20uniforms%5B%22u_maskTextureSP%22%5D%20%3D%20effectData._maskTexture%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20uniforms%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20reset%20on%20stop%2Fstart%2Fclear%0A%20%20const%20ogClearEffects%20%3D%20vm.exports.RenderedTarget.prototype.clearEffects%3B%0A%20%20vm.exports.RenderedTarget.prototype.clearEffects%20%3D%20function%20()%20%7B%0A%20%20%20%20const%20drawable%20%3D%20render._allDrawables%5Bthis.drawableID%5D%3B%0A%20%20%20%20drawable%5BdrawableKey%5D%20%3D%20genEffectFactory()%3B%0A%20%20%20%20ogClearEffects.call(this)%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20manipulate%20bounds%20for%20warping%0A%20%20const%20radianConverter%20%3D%20Math.PI%20%2F%20180%3B%0A%20%20function%20rotatePoint(x%2C%20y%2C%20cx%2C%20cy%2C%20rads)%20%7B%0A%20%20%20%20const%20cos%20%3D%20Math.cos(rads)%2C%20sin%20%3D%20Math.sin(rads)%3B%0A%20%20%20%20const%20dx%20%3D%20x%20-%20cx%2C%20dy%20%3D%20y%20-%20cy%3B%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20x%3A%20cx%20%2B%20dx%20*%20cos%20-%20dy%20*%20sin%2C%0A%20%20%20%20%20%20y%3A%20cy%20%2B%20dx%20*%20sin%20%2B%20dy%20*%20cos%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20function%20warpBounds(drawable%2C%20bounds)%20%7B%0A%20%20%20%20if%20(!drawable%5BdrawableKey%5D)%20return%20bounds%3B%0A%0A%20%20%20%20let%20warpVals%20%3D%20drawable%5BdrawableKey%5D.warp%3B%0A%20%20%20%20if%20(warpVals.join(%22%2C%22)%20%3D%3D%3D%20defaultWarpCache)%20return%20bounds%3B%0A%0A%20%20%20%20%2F%2F%20original%20getBounds%20already%20accounts%20for%20rotation%2C%20so%20we%20have%20to%20make%20our%20own%20system%0A%20%20%20%20%2F%2F%20for%20getting%20the%20non-rotated%20scale%20and%20position%0A%20%20%20%20warpVals%20%3D%20warpVals.map((v%2C%20i)%20%3D%3E%20i%20%3E%200%20%26%26%20i%20%3C%205%20%3F%20v%20*%20-1%20%3A%20v)%3B%0A%20%20%20%20const%20angle%20%3D%20(drawable._direction%20-%2090)%20*%20radianConverter%3B%0A%20%20%20%20const%20%5Bx%2C%20y%5D%20%3D%20drawable._position%3B%0A%20%20%20%20const%20width%20%3D%20drawable.skin.size%5B0%5D%20*%20(drawable.scale%5B0%5D%20%2F%20200)%3B%0A%20%20%20%20const%20height%20%3D%20drawable.skin.size%5B1%5D%20*%20(drawable.scale%5B1%5D%20%2F%20200)%3B%0A%0A%20%20%20%20const%20points%20%3D%20%5B%0A%20%20%20%20%20%20%7B%20x%3A%20(warpVals%5B0%5D%20*%202)%20*%20-width%20%2B%20x%2C%20y%3A%20(warpVals%5B1%5D%20*%20-2)%20*%20height%20-%20y%20%7D%2C%0A%20%20%20%20%20%20%7B%20x%3A%20(warpVals%5B2%5D%20*%202)%20*%20width%20%2B%20x%2C%20y%3A%20(warpVals%5B3%5D%20*%20-2)%20*%20height%20-%20y%20%7D%2C%0A%20%20%20%20%20%20%7B%20x%3A%20(warpVals%5B4%5D%20*%202)%20*%20width%20%2B%20x%2C%20y%3A%20(warpVals%5B5%5D%20*%20-2)%20*%20-height%20-%20y%20%7D%2C%0A%20%20%20%20%20%20%7B%20x%3A%20(warpVals%5B6%5D%20*%202)%20*%20-width%20%2B%20x%2C%20y%3A%20(warpVals%5B7%5D%20*%20-2)%20*%20-height%20-%20y%20%7D%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20const%20rotatedPoints%20%3D%20points.map(p%20%3D%3E%20rotatePoint(p.x%2C%20p.y%2C%20x%2C%20-y%2C%20angle))%3B%0A%20%20%20%20const%20xs%20%3D%20rotatedPoints.map(p%20%3D%3E%20p.x)%3B%0A%20%20%20%20const%20ys%20%3D%20rotatedPoints.map(p%20%3D%3E%20p.y)%3B%0A%0A%20%20%20%20bounds.left%20%3D%20Math.min(...xs)%3B%0A%20%20%20%20bounds.top%20%3D%20-Math.min(...ys)%3B%0A%20%20%20%20bounds.right%20%3D%20Math.max(...xs)%3B%0A%20%20%20%20bounds.bottom%20%3D%20-Math.max(...ys)%3B%0A%20%20%20%20return%20bounds%3B%0A%20%20%7D%0A%0A%20%20const%20ogGetBounds%20%3D%20render.exports.Drawable.prototype.getBounds%3B%0A%20%20render.exports.Drawable.prototype.getBounds%20%3D%20function()%20%7B%0A%20%20%20%20return%20warpBounds(this%2C%20ogGetBounds.call(this))%3B%0A%20%20%7D%3B%0A%20%20const%20ogGetAABB%20%3D%20render.exports.Drawable.prototype.getAABB%3B%0A%20%20render.exports.Drawable.prototype.getAABB%20%3D%20function()%20%7B%0A%20%20%20%20return%20warpBounds(this%2C%20ogGetAABB.call(this))%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20update%20the%20pen%20shader%0A%20%20if%20(runtime.ext_pen%20%26%26%20runtime.ext_pen._penSkinId%20%3E%20-1)%20%7B%0A%20%20%20%20const%20penSkin%20%3D%20render._allSkins%5Bruntime.ext_pen._penSkinId%5D%3B%0A%20%20%20%20const%20gl%20%3D%20render.gl%3B%0A%20%20%20%20penSkin._lineShader%20%3D%20render._shaderManager.getShader(%22line%22%2C%200)%3B%0A%20%20%20%20penSkin._drawTextureShader%20%3D%20render._shaderManager.getShader(%22default%22%2C%200)%3B%0A%20%20%20%20penSkin.a_position_loc%20%3D%20gl.getAttribLocation(penSkin._lineShader.program%2C%20%22a_position%22)%3B%0A%20%20%20%20penSkin.a_lineColor_loc%20%3D%20gl.getAttribLocation(penSkin._lineShader.program%2C%20%22a_lineColor%22)%3B%0A%20%20%20%20penSkin.a_lineThicknessAndLength_loc%20%3D%20gl.getAttribLocation(penSkin._lineShader.program%2C%20%22a_lineThicknessAndLength%22)%3B%0A%20%20%20%20penSkin.a_penPoints_loc%20%3D%20gl.getAttribLocation(penSkin._lineShader.program%2C%20%22a_penPoints%22)%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20this%20will%20allow%20clones%20to%20inherit%20parent%20effects%0A%20%20const%20ogInitDrawable%20%3D%20vm.exports.RenderedTarget.prototype.initDrawable%3B%0A%20%20vm.exports.RenderedTarget.prototype.initDrawable%20%3D%20function(layerGroup)%20%7B%0A%20%20%20%20ogInitDrawable.call(this%2C%20layerGroup)%3B%0A%20%20%20%20if%20(this.isOriginal)%20return%3B%0A%20%0A%20%20%20%20const%20parentSprite%20%3D%20this.sprite.clones%5B0%5D%3B%20%2F%2F%20clone%5B0%5D%20is%20always%20the%20original%0A%20%20%20%20const%20parentDrawable%20%3D%20render._allDrawables%5BparentSprite.drawableID%5D%3B%0A%20%20%20%20const%20parentEffects%20%3D%20parentDrawable%5BdrawableKey%5D%3B%0A%20%20%20%20if%20(!parentEffects)%20return%3B%0A%0A%20%20%20%20const%20drawable%20%3D%20render._allDrawables%5Bthis.drawableID%5D%3B%0A%20%20%20%20const%20effects%20%3D%20genEffectFactory()%3B%0A%20%20%20%20effects.maskTexture%20%3D%20parentEffects.maskTexture%3B%0A%20%20%20%20effects.oldMask%20%3D%20parentEffects.oldMask%3B%0A%20%20%20%20effects.shouldMask%20%3D%20parentEffects.shouldMask%3B%0A%20%20%20%20effects.warp%20%3D%20%5B...parentEffects.warp%5D%3B%0A%20%20%20%20effects.tint%20%3D%20%5B...parentEffects.tint%5D%3B%0A%20%20%20%20effects.newEffects%20%3D%20%7B%20...parentEffects.newEffects%20%7D%3B%0A%20%20%20%20drawable%5BdrawableKey%5D%20%3D%20effects%3B%0A%20%20%7D%3B%0A%0A%20%20%2F*%20patch%20for%20%22when%20costume%20switches%22%20event%20*%2F%0A%20%20const%20ogSetCoreCostume%20%3D%20looksCore.constructor.prototype._setCostume%3B%0A%20%20ogSetCoreCostume.constructor.prototype._setCostume%20%3D%20function%20(target%2C%20requestedCostume%2C%20optZeroIndex)%20%7B%0A%20%20%20%20ogSetCoreCostume.call(this%2C%20target%2C%20requestedCostume%2C%20optZeroIndex)%3B%0A%20%20%20%20runtime.startHats(%0A%20%20%20%20%20%20%22SPlooksExpanded_whenCostumeSwitch%22%2C%0A%20%20%20%20%20%20%7B%20COSTUME%3A%20target.getCurrentCostume()%3F.name%20%7C%7C%20%22%22%20%7D%0A%20%20%20%20)%3B%0A%20%20%7D%3B%0A%20%20const%20ogSetSpriteCostume%20%3D%20vm.exports.RenderedTarget.prototype.setCostume%3B%0A%20%20vm.exports.RenderedTarget.prototype.setCostume%20%3D%20function%20(index)%20%7B%0A%20%20%20%20ogSetSpriteCostume.call(this%2C%20index)%3B%0A%20%20%20%20runtime.startHats(%0A%20%20%20%20%20%20%22SPlooksExpanded_whenCostumeSwitch%22%2C%0A%20%20%20%20%20%20%7B%20COSTUME%3A%20this.getCurrentCostume()%3F.name%20%7C%7C%20%22%22%20%7D%0A%20%20%20%20)%3B%0A%20%20%7D%3B%0A%0A%20%20class%20SPlooksExpanded%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22SPlooksExpanded%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%22Looks%20Expanded%22)%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%239966FF%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%23855CD6%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%23774DCB%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getSpeech%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22speech%20from%20%5BTARGET%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22costumeCnt%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%23%20of%20costumes%20in%20%5BTARGET%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22costumeInfo%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BINFO%5D%20of%20costume%20%23%20%5BNUM%5D%20in%20%5BTARGET%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INFO%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22COSTUME_DATA%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NUM%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%201%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setTargetCostume%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22switch%20costume%20of%20%5BTARGET%5D%20to%20%5BVALUE%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22...%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22whenCostumeSwitch%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.EVENT%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_event%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22when%20costume%20switches%20to%20%5BCOSTUME%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COSTUME%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22COSTUMES%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setSpriteEffect%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20%5BEFFECT%5D%20of%20%5BTARGET%5D%20to%20%5BVALUE%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22EFFECT_MENU%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22effectValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BEFFECT%5D%20effect%20of%20%5BTARGET%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22EFFECT_MENU%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22tintSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20tint%20of%20%5BTARGET%5D%20to%20%5BCOLOR%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22replaceColor%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22replace%20%5BCOLOR1%5D%20with%20%5BCOLOR2%5D%20in%20%5BTARGET%5D%20softness%20%5BVALUE%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR1%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR2%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%2010%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22resetColor%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22reset%20%5BCOLOR1%5D%20replacer%20in%20%5BTARGET%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR1%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22resetReplacers%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22colours_looks%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22reset%20color%20replacers%20in%20%5BTARGET%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.XML%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20xml%3A%20%60%3Csep%20gap%3D%2224%22%2F%3E%3Clabel%20text%3D%22%24%7BScratch.translate(%22Warping%20and%20Masking%20does%20NOT%22)%7D%22%2F%3E%3Csep%20gap%3D%220%22%2F%3E%60%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.XML%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20xml%3A%20%60%3Csep%20gap%3D%22-12%22%2F%3E%3Clabel%20text%3D%22%20%24%7BScratch.translate(%22affect%20Touching%20Blocks%22)%7D%22%2F%3E%3Csep%20gap%3D%226%22%2F%3E%60%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22warpSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22warp%20%5BTARGET%5D%20to%20x1%3A%20%5Bx1%5D%20y1%3A%20%5By1%5D%20x2%3A%20%5Bx2%5D%20y2%3A%20%5By2%5D%20x3%3A%20%5Bx3%5D%20y3%3A%20%5By3%5D%20x4%3A%20%5Bx4%5D%20y4%3A%20%5By4%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x1%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20-100%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y1%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x2%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y2%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x3%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20-100%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y3%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20-100%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x4%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y4%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20-100%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22maskSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22mask%20%5BTARGET%5D%20with%20image%20%5BIMAGE%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20IMAGE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22https%3A%2F%2Fextensions.turbowarp.org%2Fdango.png%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22showSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22show%20%5BTARGET%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22hideSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22hide%20%5BTARGET%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spriteShowing%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BTARGET%5D%20%5BTYPE%5D%20%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22DISPLAY_TYPES%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spriteProperty%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BPROP%5D%20of%20%5BTARGET%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PROP%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22SPRITE_PROPS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TARGET%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20COSTUMES%3A%20%7B%20acceptReporters%3A%20false%2C%20items%3A%20%22getCostumes%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20TARGETS%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20%22getTargets%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20EFFECT_MENU%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20%22getEffects%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20DISPLAY_TYPES%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22showing%22)%2C%20value%3A%20%22showing%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22visible%22)%2C%20value%3A%20%22visible%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20COSTUME_DATA%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22name%22)%2C%20value%3A%20%22name%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22type%22)%2C%20value%3A%20%22type%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22width%22)%2C%20value%3A%20%22width%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22height%22)%2C%20value%3A%20%22height%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22rotation%20center%20x%22)%2C%20value%3A%20%22rotation%20center%20x%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22rotation%20center%20y%22)%2C%20value%3A%20%22rotation%20center%20y%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22content%22)%2C%20value%3A%20%22content%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22data.uri%22)%2C%20value%3A%20%22data.uri%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20SPRITE_PROPS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22width%22)%2C%20value%3A%20%22width%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22height%22)%2C%20value%3A%20%22height%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22layer%20%23%22)%2C%20value%3A%20%22layer%20%23%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Helper%20Funcs%0A%20%20%20%20getTargets()%20%7B%0A%20%20%20%20%20%20const%20spriteNames%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22myself%22)%2C%20value%3A%20%22_myself_%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22Stage%22)%2C%20value%3A%20%22_stage_%22%20%7D%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20const%20targets%20%3D%20runtime.targets%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20targets.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20targets%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20(target.isOriginal)%20spriteNames.push(%7B%20text%3A%20target.getName()%2C%20value%3A%20target.getName()%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20spriteNames.length%20%3E%200%20%3F%20spriteNames%20%3A%20%5B%22%22%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getCostumes()%20%7B%0A%20%20%20%20%20%20let%20costumeNames%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20if%20(vm.editingTarget)%20costumeNames%20%3D%20vm.editingTarget.getCostumes().map((e)%20%3D%3E%20%7B%20return%20e.name%20%7D)%3B%0A%20%20%20%20%20%20return%20costumeNames.length%20%3E%200%20%3F%20costumeNames%20%3A%20%5B%22%22%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getEffects()%20%7B%0A%20%20%20%20%20%20const%20effects%20%3D%20Object.keys(vm.editingTarget%3F.effects%20%7C%7C%20%7B%7D)%3B%0A%20%20%20%20%20%20if%20(!isPM)%20effects.push(%22saturation%22%2C%20%22opaque%22)%3B%0A%20%20%20%20%20%20effects.push(%22contrast%22%2C%20%22posterize%22%2C%20%22sepia%22%2C%20%22bloom%22)%3B%0A%20%20%20%20%20%20effects.map((effect)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20return%20%7B%20text%3A%20Scratch.translate(effect)%2C%20value%3A%20effect%20%7D%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20return%20effects.length%20%3E%200%20%3F%20effects%20%3A%20%5B%22%22%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getTarget(name%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(name%20%3D%3D%3D%20%22_myself_%22)%20return%20util.target%3B%0A%20%20%20%20%20%20if%20(name%20%3D%3D%3D%20%22_stage_%22)%20return%20runtime.getTargetForStage()%3B%0A%20%20%20%20%20%20return%20runtime.getSpriteTargetByName(name)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20exportCostume(costume%2C%20keepBase64)%20%7B%0A%20%20%20%20%20%20const%20asset%20%3D%20costume.asset%3B%0A%20%20%20%20%20%20if%20(runtime.isPackaged)%20%7B%0A%20%20%20%20%20%20%20%20const%20skin%20%3D%20render._allSkins%5Bcostume.skinId%5D%3B%0A%20%20%20%20%20%20%20%20let%20type%20%3D%20costume.dataFormat%3B%0A%20%20%20%20%20%20%20%20if%20(type%20%3D%3D%3D%20%22svg%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20svgText%20%3D%20decodeURIComponent(skin._svgImage.src.split(%22%2C%22)%5B1%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(keepBase64)%20return%20%60data%3Aimage%2Fsvg%2Bxml%3Bbase64%2C%24%7Bbtoa(svgText)%7D%60%3B%0A%20%20%20%20%20%20%20%20%20%20else%20return%20svgText%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20always%20return%20base%2064%2C%20theres%20literally%20no%20point%0A%20%20%20%20%20%20%20%20%20%20const%20gl%20%3D%20render.gl%3B%0A%20%20%20%20%20%20%20%20%20%20const%20width%20%3D%20skin.size%5B0%5D%20*%202%3B%0A%20%20%20%20%20%20%20%20%20%20const%20height%20%3D%20skin.size%5B1%5D%20*%202%3B%0A%0A%20%20%20%20%20%20%20%20%20%20const%20fbo%20%3D%20twgl.createFramebufferInfo(%0A%20%20%20%20%20%20%20%20%20%20%20%20gl%2C%20%5B%7B%20attachment%3A%20skin._texture%20%7D%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20width%2C%20height%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%20%20twgl.bindFramebufferInfo(gl%2C%20fbo)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20pixels%20%3D%20new%20Uint8Array(width%20*%20height%20*%204)%3B%0A%20%20%20%20%20%20%20%20%20%20gl.readPixels(0%2C%200%2C%20width%2C%20height%2C%20gl.RGBA%2C%20gl.UNSIGNED_BYTE%2C%20pixels)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0A%20%20%20%20%20%20%20%20%20%20canvas.width%20%3D%20width%3B%20canvas.height%20%3D%20height%3B%0A%20%20%20%20%20%20%20%20%20%20const%20ctx%20%3D%20canvas.getContext(%222d%22)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20imageData%20%3D%20ctx.createImageData(width%2C%20height)%3B%0A%20%20%20%20%20%20%20%20%20%20imageData.data.set(pixels)%3B%0A%20%20%20%20%20%20%20%20%20%20ctx.putImageData(imageData%2C%200%2C%200)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20canvas.toDataURL(%22image%2Fpng%22)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(keepBase64)%20return%20asset.encodeDataURI()%3B%0A%20%20%20%20%20%20%20%20else%20return%20asset.decodeText()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20hex2Vec4(hex)%20%7B%0A%20%20%20%20%20%20hex%20%3D%20hex.startsWith(%22%23%22)%20%3F%20hex.slice(1)%20%3A%20hex%3B%0A%20%20%20%20%20%20let%20a%20%3D%20255%3B%0A%20%20%20%20%20%20if%20(hex.length%20%3D%3D%3D%208)%20a%20%3D%20parseInt(hex.slice(6%2C%208)%2C%2016)%3B%0A%20%20%20%20%20%20return%20%5B%0A%20%20%20%20%20%20%20%20parseInt(hex.slice(0%2C%202)%2C%2016)%20%2F%20255%2C%0A%20%20%20%20%20%20%20%20parseInt(hex.slice(2%2C%204)%2C%2016)%20%2F%20255%2C%0A%20%20%20%20%20%20%20%20parseInt(hex.slice(4%2C%206)%2C%2016)%20%2F%20255%2C%0A%20%20%20%20%20%20%20%20a%20%2F%20255%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20arrayMatches(arr1%2C%20arr2)%20%7B%0A%20%20%20%20%20%20return%20arr1.every((val%2C%20i)%20%3D%3E%20val%20%3D%3D%3D%20arr2%5Bi%5D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Block%20Funcs%0A%20%20%20%20getSpeech(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%20%22%22%3B%0A%20%20%20%20%20%20return%20target._customState%5B%22Scratch.looks%22%5D%3F.text%20%7C%7C%20%22%22%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20costumeCnt(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%200%3B%0A%20%20%20%20%20%20return%20target.sprite.costumes.length%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20costumeInfo(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%20%22%22%3B%0A%0A%20%20%20%20%20%20const%20costumes%20%3D%20target.getCostumes()%3B%0A%20%20%20%20%20%20const%20index%20%3D%20Cast.toNumber(args.NUM)%20-%201%3B%0A%20%20%20%20%20%20const%20costume%20%3D%20costumes%5Bindex%5D%3B%0A%20%20%20%20%20%20if%20(!costume)%20return%20%22%22%3B%0A%0A%20%20%20%20%20%20switch%20(args.INFO)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22name%22%3A%20return%20costume.name%3B%0A%20%20%20%20%20%20%20%20case%20%22width%22%3A%20return%20costume.size%5B0%5D%3B%0A%20%20%20%20%20%20%20%20case%20%22height%22%3A%20return%20costume.size%5B1%5D%3B%0A%20%20%20%20%20%20%20%20case%20%22type%22%3A%20return%20costume.dataFormat%3B%0A%20%20%20%20%20%20%20%20case%20%22rotation%20center%20x%22%3A%20return%20costume.rotationCenterX%3B%0A%20%20%20%20%20%20%20%20case%20%22rotation%20center%20y%22%3A%20return%20costume.rotationCenterY%3B%0A%20%20%20%20%20%20%20%20case%20%22content%22%3A%20return%20this.exportCostume(costume%2C%20false)%3B%0A%20%20%20%20%20%20%20%20case%20%22data.uri%22%3A%20return%20this.exportCostume(costume%2C%20true)%3B%0A%20%20%20%20%20%20%20%20default%3A%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setTargetCostume(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(target)%20%7B%0A%20%20%20%20%20%20%20%20if%20(target.isStage)%20runtime.ext_scratch3_looks._setBackdrop(target%2C%20args.VALUE)%3B%0A%20%20%20%20%20%20%20%20else%20runtime.ext_scratch3_looks._setCostume(target%2C%20args.VALUE)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20setSpriteEffect(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(target)%20%7B%0A%20%20%20%20%20%20%20%20const%20name%20%3D%20Cast.toString(args.EFFECT)%3B%0A%20%20%20%20%20%20%20%20let%20value%20%3D%20Cast.toNumber(args.VALUE)%3B%0A%20%20%20%20%20%20%20%20if%20(name%20!%3D%3D%20%22posterize%22%20%26%26%20!(isPM%20%26%26%20name%20%3D%3D%3D%20%22saturation%22))%20value%20%2F%3D%20100%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20name%20%3D%3D%3D%20%22contrast%22%20%7C%7C%20name%20%3D%3D%3D%20%22posterize%22%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20name%20%3D%3D%3D%20%22sepia%22%20%7C%7C%20name%20%3D%3D%3D%20%22bloom%22%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20(!isPM%20%26%26%20(name%20%3D%3D%3D%20%22saturation%22%20%7C%7C%20name%20%3D%3D%3D%20%22opaque%22))%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20drawable%20%3D%20render._allDrawables%5Btarget.drawableID%5D%3B%0A%20%20%20%20%20%20%20%20%20%20initDrawable(drawable)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20oldValue%20%3D%20drawable%5BdrawableKey%5D.newEffects%5Bname%5D%3B%0A%20%20%20%20%20%20%20%20%20%20drawable%5BdrawableKey%5D.newEffects%5Bname%5D%20%3D%20value%0A%20%20%20%20%20%20%20%20%20%20if%20(oldValue%20!%3D%3D%20value)%20render.dirty%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20target.setEffect(name%2C%20value)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20effectValue(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%200%3B%0A%0A%20%20%20%20%20%20const%20effects%20%3D%20target.effects%3B%0A%20%20%20%20%20%20const%20name%20%3D%20Cast.toString(args.EFFECT)%3B%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20name%20%3D%3D%3D%20%22contrast%22%20%7C%7C%20name%20%3D%3D%3D%20%22posterize%22%20%7C%7C%0A%20%20%20%20%20%20%20%20name%20%3D%3D%3D%20%22sepia%22%20%7C%7C%20name%20%3D%3D%3D%20%22bloom%22%20%7C%7C%0A%20%20%20%20%20%20%20%20(!isPM%20%26%26%20(name%20%3D%3D%3D%20%22saturation%22%20%7C%7C%20name%20%3D%3D%3D%20%22opaque%22))%0A%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20const%20drawable%20%3D%20render._allDrawables%5Btarget.drawableID%5D%3B%0A%20%20%20%20%20%20%20%20initDrawable(drawable)%3B%0A%20%20%20%20%20%20%20%20const%20value%20%3D%20drawable%5BdrawableKey%5D.newEffects%5Bname%5D%3B%0A%20%20%20%20%20%20%20%20return%20name%20%3D%3D%3D%20%22posterize%22%20%3F%20value%20%3A%20value%20*%20100%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(Object.prototype.hasOwnProperty.call(effects%2C%20name))%20return%20effects%5Bname%5D%3B%0A%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20tintSprite(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%3B%0A%0A%20%20%20%20%20%20const%20drawable%20%3D%20render._allDrawables%5Btarget.drawableID%5D%3B%0A%20%20%20%20%20%20initDrawable(drawable)%3B%0A%20%20%20%20%20%20const%20oldTint%20%3D%20drawable%5BdrawableKey%5D.tint%3B%0A%20%20%20%20%20%20drawable%5BdrawableKey%5D.tint%20%3D%20this.hex2Vec4(args.COLOR)%3B%0A%20%20%20%20%20%20if%20(!this.arrayMatches(oldTint%2C%20drawable%5BdrawableKey%5D.tint))%20render.dirty%20%3D%20true%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20replaceColor(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%3B%0A%0A%20%20%20%20%20%20this.resetColor(args%2C%20util)%3B%0A%20%20%20%20%20%20const%20drawable%20%3D%20render._allDrawables%5Btarget.drawableID%5D%3B%0A%20%20%20%20%20%20initDrawable(drawable)%3B%0A%20%20%20%20%20%20drawable%5BdrawableKey%5D.replacers.push(%7B%0A%20%20%20%20%20%20%20%20targetHex%3A%20args.COLOR1%2C%0A%20%20%20%20%20%20%20%20targetVert%3A%20this.hex2Vec4(args.COLOR1)%2C%0A%20%20%20%20%20%20%20%20replaceVert%3A%20this.hex2Vec4(args.COLOR2)%2C%0A%20%20%20%20%20%20%20%20soft%3A%20Math.max(Cast.toNumber(args.VALUE)%2C%201)%20%2F%20100%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20render.dirty%20%3D%20true%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20resetColor(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%3B%0A%0A%20%20%20%20%20%20const%20drawable%20%3D%20render._allDrawables%5Btarget.drawableID%5D%3B%0A%20%20%20%20%20%20initDrawable(drawable)%3B%0A%20%20%20%20%20%20const%20index%20%3D%20drawable%5BdrawableKey%5D.replacers.findIndex((i)%20%3D%3E%20%7B%20return%20i.targetHex%20%3D%3D%3D%20args.COLOR1%20%7D)%3B%0A%20%20%20%20%20%20if%20(index%20%3E%20-1)%20drawable%5BdrawableKey%5D.replacers.splice(index%2C%201)%3B%0A%20%20%20%20%20%20render.dirty%20%3D%20true%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20resetReplacers(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%3B%0A%0A%20%20%20%20%20%20const%20drawable%20%3D%20render._allDrawables%5Btarget.drawableID%5D%3B%0A%20%20%20%20%20%20initDrawable(drawable)%3B%0A%20%20%20%20%20%20if%20(drawable%5BdrawableKey%5D.replacers.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20drawable%5BdrawableKey%5D.replacers%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20render.dirty%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20warpSprite(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%3B%0A%0A%20%20%20%20%20%20const%20drawable%20%3D%20render._allDrawables%5Btarget.drawableID%5D%3B%0A%20%20%20%20%20%20initDrawable(drawable)%3B%0A%20%20%20%20%20%20const%20oldWarp%20%3D%20drawable%5BdrawableKey%5D.warp%3B%0A%20%20%20%20%20%20drawable%5BdrawableKey%5D.warp%20%3D%20%5B%0A%20%20%20%20%20%20%20%20Cast.toNumber(args.x1)%20%2F%20-200%2C%20Cast.toNumber(args.y1)%20%2F%20-200%2C%0A%20%20%20%20%20%20%20%20Cast.toNumber(args.x2)%20%2F%20-200%2C%20Cast.toNumber(args.y2)%20%2F%20-200%2C%0A%20%20%20%20%20%20%20%20Cast.toNumber(args.x4)%20%2F%20-200%2C%20Cast.toNumber(args.y4)%20%2F%20-200%2C%0A%20%20%20%20%20%20%20%20Cast.toNumber(args.x3)%20%2F%20-200%2C%20Cast.toNumber(args.y3)%20%2F%20-200%0A%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20if%20(!this.arrayMatches(oldWarp%2C%20drawable%5BdrawableKey%5D.warp))%20render.dirty%20%3D%20true%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20maskSprite(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%3B%0A%0A%20%20%20%20%20%20const%20drawable%20%3D%20render._allDrawables%5Btarget.drawableID%5D%3B%0A%20%20%20%20%20%20initDrawable(drawable)%3B%0A%0A%20%20%20%20%20%20const%20url%20%3D%20Cast.toString(args.IMAGE)%3B%0A%20%20%20%20%20%20if%20(drawable%5BdrawableKey%5D.oldMask%20%3D%3D%3D%20url)%20return%3B%0A%20%20%20%20%20%20if%20(!url%20%7C%7C%20!(url.startsWith(%22data%3Aimage%2F%22)%20%7C%7C%20url.startsWith(%22https%3A%2F%2F%22)))%20%7B%0A%20%20%20%20%20%20%20%20drawable%5BdrawableKey%5D.maskTexture%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20drawable%5BdrawableKey%5D.oldMask%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20drawable%5BdrawableKey%5D.shouldMask%20%3D%200%3B%0A%20%20%20%20%20%20%20%20render.dirty%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20gl%20%3D%20render._gl%3B%0A%20%20%20%20%20%20%20%20if%20(!drawable%5BdrawableKey%5D._maskTexture)%20%7B%0A%20%20%20%20%20%20%20%20%20%20drawable%5BdrawableKey%5D._maskTexture%20%3D%20gl.createTexture()%3B%0A%20%20%20%20%20%20%20%20%20%20gl.bindTexture(gl.TEXTURE_2D%2C%20drawable%5BdrawableKey%5D._maskTexture)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_MIN_FILTER%2C%20gl.NEAREST)%3B%0A%20%20%20%20%20%20%20%20%20%20gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_MAG_FILTER%2C%20gl.NEAREST)%3B%0A%20%20%20%20%20%20%20%20%20%20gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_WRAP_S%2C%20gl.CLAMP_TO_EDGE)%3B%0A%20%20%20%20%20%20%20%20%20%20gl.texParameteri(gl.TEXTURE_2D%2C%20gl.TEXTURE_WRAP_T%2C%20gl.CLAMP_TO_EDGE)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20eslint-disable-next-line%0A%20%20%20%20%20%20%20%20const%20image%20%3D%20new%20Image()%3B%0A%20%20%20%20%20%20%20%20image.crossOrigin%20%3D%20%22Anonymous%22%3B%0A%20%20%20%20%20%20%20%20image.onload%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20gl.bindTexture(gl.TEXTURE_2D%2C%20drawable%5BdrawableKey%5D._maskTexture)%3B%0A%20%20%20%20%20%20%20%20%20%20gl.texImage2D(gl.TEXTURE_2D%2C%200%2C%20gl.RGBA%2C%20gl.RGBA%2C%20gl.UNSIGNED_BYTE%2C%20image)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20drawable%5BdrawableKey%5D.maskTexture%20%3D%20drawable%5BdrawableKey%5D._maskTexture%3B%0A%20%20%20%20%20%20%20%20%20%20drawable%5BdrawableKey%5D.shouldMask%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20drawable%5BdrawableKey%5D.oldMask%20%3D%20url%3B%0A%20%20%20%20%20%20%20%20%20%20render.dirty%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20image.onerror%20%3D%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20console.warn(e)%3B%0A%20%20%20%20%20%20%20%20%20%20resolve()%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20image.src%20%3D%20url%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20showSprite(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(target)%20target.setVisible(true)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20hideSprite(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(target)%20target.setVisible(false)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20spriteShowing(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20if%20(!target%20%7C%7C%20!target.visible)%20return%20false%3B%0A%20%20%20%20%20%20if%20(args.TYPE%20%3D%3D%3D%20%22showing%22)%20return%20true%3B%0A%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20check%20if%20sprite%20is%20visible%0A%20%20%20%20%20%20%20%20if%20(target.effects.ghost%20%3D%3D%3D%20100)%20return%20false%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20check%20if%20sprite%20is%20on-screen%0A%20%20%20%20%20%20%20%20const%20bounds%20%3D%20target.getBounds()%3B%0A%20%20%20%20%20%20%20%20if%20(bounds.left%20%3E%20runtime.stageWidth%20%2F%202%20%7C%7C%20bounds.right%20%3C%20runtime.stageWidth%20%2F%20-2)%20return%20false%3B%0A%20%20%20%20%20%20%20%20if%20(bounds.bottom%20%3E%20runtime.stageHeight%20%2F%202%20%7C%7C%20bounds.top%20%3C%20runtime.stageHeight%20%2F%20-2)%20return%20false%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20check%20if%20sprite%20is%20being%20covered%0A%20%20%20%20%20%20%20%20const%20layerInd%20%3D%20target.getLayerOrder()%20%2B%201%3B%0A%20%20%20%20%20%20%20%20const%20rangeIds%20%3D%20new%20Array(render._allDrawables.length%20-%20layerInd)%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20rangeIds.length%3B%20i%2B%2B)%20%7B%20rangeIds%5Bi%5D%20%3D%20layerInd%20%2B%20i%20%7D%0A%20%20%20%20%20%20%20%20return%20!render.isTouchingDrawables(target.drawableID%2C%20rangeIds)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20spriteProperty(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.TARGET%2C%20util)%3B%0A%20%20%20%20%20%20switch%20(args.PROP)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22width%22%3A%20return%20target.getBounds().width%3B%0A%20%20%20%20%20%20%20%20case%20%22height%22%3A%20return%20target.getBounds().height%3B%0A%20%20%20%20%20%20%20%20case%20%22layer%20%23%22%3A%20return%20target.getLayerOrder()%3B%0A%20%20%20%20%20%20%20%20default%3A%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20SPlooksExpanded())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Hyper%20Sense%20V2%0A%2F%2F%20ID%3A%20HyperSense2SP%0A%2F%2F%20Description%3A%20Cool%20New%20Sensing%20Blocks%0A%2F%2F%20By%3A%20SharkPool%0A%2F%2F%20License%3A%20MIT%0A%0A%2F%2F%20Version%202.0.01%0A%0A(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20throw%20new%20Error(%22Hyper%20Sense%20must%20run%20unsandboxed%22)%3B%0A%0A%20%20const%20menuIconURI%20%3D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDUuMjkzIiBoZWlnaHQ9IjE0NS4yOTMiIHZpZXdCb3g9IjAgMCAxNDUuMjkzIDE0NS4yOTMiPjxnIHN0cm9rZS1taXRlcmxpbWl0PSIxMCI%2BPHBhdGggZD0iTTAgNzIuNjQ3QzAgMzIuNTI1IDMyLjUyNSAwIDcyLjY0NyAwczcyLjY0NyAzMi41MjUgNzIuNjQ3IDcyLjY0Ny0zMi41MjUgNzIuNjQ3LTcyLjY0NyA3Mi42NDdTMCAxMTIuNzY5IDAgNzIuNjQ3IiBmaWxsPSIjNDI3Zjk5Ii8%2BPHBhdGggZD0iTTguMDkxIDcyLjY0N2MwLTM1LjY1MyAyOC45MDMtNjQuNTU2IDY0LjU1Ni02NC41NTZzNjQuNTU2IDI4LjkwMyA2NC41NTYgNjQuNTU2LTI4LjkwMyA2NC41NTYtNjQuNTU2IDY0LjU1NlM4LjA5MSAxMDguMyA4LjA5MSA3Mi42NDciIGZpbGw9IiM1Y2IxZDYiLz48cGF0aCBkPSJNMTA2LjIxNSAxMDguODg0YTIuNjcgMi42NyAwIDAgMS0xLjg4Ni0uNzhMMzcuNzUgNDEuNTIyYTIuNjcgMi42NyAwIDAgMSAwLTMuNzcyIDIuNjcgMi42NyAwIDAgMSAzLjc3MiAwbDY2LjU4IDY2LjU4YTIuNjY5IDIuNjY5IDAgMCAxLTEuODg3IDQuNTU0IiBmaWxsPSIjZmZmIi8%2BPHBhdGggZD0iTTY1Ljc1NCA1MS4wODNjMCA4LjEwMy02LjU2OCAxNC42NzEtMTQuNjcxIDE0LjY3MXMtMTQuNjcxLTYuNTY4LTE0LjY3MS0xNC42N2MwLTguMTA0IDYuNTY4LTE0LjY3MiAxNC42Ny0xNC42NzIgOC4xMDQgMCAxNC42NzIgNi41NjggMTQuNjcyIDE0LjY3MSIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik02My43MiA4MS4zNzFjLTcuODg1LTEuODYyLTEyLjc2OS05Ljc2NC0xMC45MDYtMTcuNjVzOS43NjQtMTIuNzY5IDE3LjY1LTEwLjkwNyAxMi43NjkgOS43NjUgMTAuOTA3IDE3LjY1Yy0xLjg2MiA3Ljg4Ni05Ljc2NSAxMi43Ny0xNy42NSAxMC45MDciIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNOTcuNzY3IDgzLjA5NGMwIDguMTAyLTYuNTcgMTQuNjczLTE0LjY3MyAxNC42NzNzLTE0LjY3Mi02LjU3LTE0LjY3Mi0xNC42NzMgNi41NjktMTQuNjcxIDE0LjY3Mi0xNC42NzFjOC4xMDIgMCAxNC42NzMgNi41NyAxNC42NzMgMTQuNjciIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNMTA2LjIxNSAxMDguODg0YTIuNjcgMi42NyAwIDAgMS0xLjg4Ni0uNzhsLTE2LjM0LTE2LjM0YTIuNjY1IDIuNjY1IDAgMCAxIDAtMy43NzMgMi42NyAyLjY3IDAgMCAxIDMuNzcyIDBsMTYuMzQgMTYuMzRhMi42NyAyLjY3IDAgMCAxIDAgMy43NzMgMi42OCAyLjY4IDAgMCAxLTEuODg2Ljc4IiBmaWxsPSIjZmZmIi8%2BPHBhdGggZD0iTTE1LjMxNSA3Mi42NDcgMjguMTIyIDU5Ljg0djI1LjYxNHptNzAuMTM5LTQ0LjUyNUg1OS44NGwxMi44MDctMTIuODA3em00NC41MjUgNDQuNTI1LTEyLjgwNyAxMi44MDdWNTkuODR6TTU5Ljg0IDExNy4xNzJoMjUuNjE0bC0xMi44MDcgMTIuODA3eiIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjEuNSIvPjwvZz48L3N2Zz4%3D%22%3B%0A%0A%20%20const%20Cast%20%3D%20Scratch.Cast%3B%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0A%20%20const%20render%20%3D%20vm.renderer%3B%0A%20%20const%20sensingCore%20%3D%20runtime.ext_scratch3_sensing%3B%0A%20%20const%20isPackaged%20%3D%20typeof%20scaffolding%20!%3D%3D%20%22undefined%22%3B%0A%0A%20%20const%20translatedKeys%20%3D%20%5B%0A%20%20%20%20%22any%22%2C%20%22a%22%2C%20%22b%22%2C%20%22c%22%2C%20%22d%22%2C%20%22e%22%2C%20%22f%22%2C%20%22g%22%2C%20%22h%22%2C%20%22i%22%2C%20%22j%22%2C%0A%20%20%20%20%22k%22%2C%20%22l%22%2C%20%22m%22%2C%20%22n%22%2C%20%22o%22%2C%20%22p%22%2C%20%22q%22%2C%20%22r%22%2C%20%22s%22%2C%20%22t%22%2C%20%22u%22%2C%0A%20%20%20%20%22v%22%2C%20%22w%22%2C%20%22x%22%2C%20%22y%22%2C%20%22z%22%2C%0A%20%20%20%20%220%22%2C%20%221%22%2C%20%222%22%2C%20%223%22%2C%20%224%22%2C%20%225%22%2C%20%226%22%2C%20%227%22%2C%20%228%22%2C%20%229%22%2C%0A%20%20%20%20%22up%20arrow%22%2C%20%22down%20arrow%22%2C%20%22left%20arrow%22%2C%20%22right%20arrow%22%2C%0A%20%20%20%20%22space%22%2C%20%22enter%22%2C%20%22shift%22%2C%20%22control%22%2C%20%22alt%22%2C%20%22meta%22%2C%20%22escape%22%2C%0A%20%20%20%20%22backspace%22%2C%20%22tab%22%2C%20%22caps%20lock%22%2C%20%22insert%22%2C%20%22delete%22%2C%20%22page%20up%22%2C%20%22page%20down%22%2C%0A%20%20%20%20%22%60%22%2C%20%22~%22%2C%20%22!%22%2C%20%22%3F%22%2C%20%22%40%22%2C%20%22%23%22%2C%20%22%24%22%2C%20%22%25%22%2C%20%22%5E%22%2C%20%22%26%22%2C%20%22*%22%2C%20%22-%22%2C%20%22_%22%2C%20%22%2B%22%2C%20%22%3D%22%2C%0A%20%20%20%20%22(%22%2C%20%22)%22%2C%20%22%5B%22%2C%20%22%5D%22%2C%20%22%7B%22%2C%20%22%7D%22%2C%20%22%5C%5C%22%2C%20%22%7C%22%2C%20%22%2F%22%2C%20%22%3C%22%2C%20%22%3E%22%2C%20%22%2C%22%2C%20%22.%22%2C%0A%20%20%20%20%22f1%22%2C%20%22f2%22%2C%20%22f3%22%2C%20%22f4%22%2C%20%22f5%22%2C%20%22f6%22%2C%20%22f7%22%2C%20%22f8%22%2C%20%22f9%22%2C%20%22f10%22%2C%20%22f11%22%2C%20%22f12%22%20%0A%20%20%5D.map((key)%20%3D%3E%20%7B%0A%20%20%20%20if%20(%2F%5E%5Ba-z0-9%20%5D%2B%24%2Fi.test(key))%20return%20%7B%20text%3A%20Scratch.translate(key)%2C%20value%3A%20key%20%7D%3B%0A%20%20%20%20else%20return%20%7B%20text%3A%20key%2C%20value%3A%20key%20%7D%3B%0A%20%20%7D)%3B%0A%0A%20%20const%20keyData%20%3D%20%7B%0A%20%20%20%20curKey%3A%20%22%22%2C%0A%20%20%20%20lastKey%3A%20%22%22%2C%0A%20%20%20%20keys%3A%20%5B%5D%2C%0A%20%20%20%20keyTimers%3A%20new%20Map()%2C%0A%20%20%20%20keyBlockers%3A%20new%20Set()%0A%20%20%7D%3B%0A%0A%20%20const%20mouseData%20%3D%20%7B%0A%20%20%20%20client%3A%20%5B0%2C%200%5D%2C%0A%20%20%20%20velocity%3A%20%5B0%2C%200%5D%2C%0A%20%20%20%20scroll%3A%20%5B0%2C%200%5D%2C%0A%20%20%20%20scrollVelocity%3A%20%5B0%2C%200%5D%0A%20%20%7D%3B%0A%0A%20%20%2F*%20undefined%20is%20default%20values%20*%2F%0A%20%20const%20askBoxSettings%20%3D%20%7B%0A%20%20%20%20x%3A%20undefined%2C%20y%3A%20undefined%2C%0A%20%20%20%20width%3A%20undefined%2C%0A%20%20%20%20input%3A%20%7B%0A%20%20%20%20%20%20type%3A%20undefined%2C%0A%20%20%20%20%20%20value%3A%20undefined%0A%20%20%20%20%7D%2C%0A%20%20%7D%3B%0A%0A%20%20const%20validInputs%20%3D%20%5B%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22text%22)%2C%20value%3A%20%22text%22%20%7D%2C%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22password%22)%2C%20value%3A%20%22password%22%20%7D%2C%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22number%22)%2C%20value%3A%20%22number%22%20%7D%2C%0A%20%20%20%20%7B%20text%3A%20Scratch.translate(%22color%22)%2C%20value%3A%20%22color%22%20%7D%0A%20%20%5D%3B%0A%0A%20%20let%20loudnessCache%20%3D%20%5B%5D%3B%0A%0A%20%20class%20HyperSense2SP%20%7B%0A%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20runtime.on(%22BEFORE_EXECUTE%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20key%20operations%0A%20%20%20%20%20%20%20%20const%20keyTimers%20%3D%20keyData.keyTimers%3B%0A%20%20%20%20%20%20%20%20keyTimers.forEach((value%2C%20key)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20keyTimers.set(key%2C%20value%20%2B%200.1)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20runtime.startHats(%22HyperSense2SP_whenKey%22)%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20velocity%20application%0A%20%20%20%20%20%20%20%20const%20%7B%20velocity%2C%20scrollVelocity%20%7D%20%3D%20mouseData%3B%0A%20%20%20%20%20%20%20%20mouseData.velocity%5B0%5D%20%2B%3D%20(0%20-%20velocity%5B0%5D)%20%2F%203%3B%0A%20%20%20%20%20%20%20%20mouseData.velocity%5B1%5D%20%2B%3D%20(0%20-%20velocity%5B1%5D)%20%2F%203%3B%0A%0A%20%20%20%20%20%20%20%20mouseData.scrollVelocity%5B0%5D%20%2B%3D%20(0%20-%20scrollVelocity%5B0%5D)%20%2F%204%3B%0A%20%20%20%20%20%20%20%20mouseData.scrollVelocity%5B1%5D%20%2B%3D%20(0%20-%20scrollVelocity%5B1%5D)%20%2F%204%3B%0A%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20window.addEventListener(%22keydown%22%2C%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20key%20%3D%20this.toProperKey(e%2C%20false)%3B%0A%20%20%20%20%20%20%20%20keyData.curKey%20%3D%20key%3B%0A%20%20%20%20%20%20%20%20keyData.lastKey%20%3D%20key%3B%0A%20%20%20%20%20%20%20%20if%20(!keyData.keyTimers.has(key))%20%7B%0A%20%20%20%20%20%20%20%20%20%20keyData.keys.push(key)%3B%0A%20%20%20%20%20%20%20%20%20%20keyData.keyTimers.set(key%2C%200)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20if%20this%20is%20a%20blocked%20key%2C%20prevent%20default%0A%20%20%20%20%20%20%20%20if%20(keyData.keyBlockers.has(%22any%22)%20%7C%7C%20keyData.keyBlockers.has(key))%20%7B%0A%20%20%20%20%20%20%20%20%20%20e.preventDefault()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20window.addEventListener(%22keyup%22%2C%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20key%20%3D%20this.toProperKey(e%2C%20false)%3B%0A%20%20%20%20%20%20%20%20const%20index%20%3D%20keyData.keys.indexOf(key)%3B%0A%0A%20%20%20%20%20%20%20%20keyData.keyTimers.delete(key)%3B%0A%20%20%20%20%20%20%20%20keyData.keys.splice(index%2C%201)%3B%0A%20%20%20%20%20%20%20%20keyData.curKey%20%3D%20keyData.keys%5B0%5D%20%7C%7C%20%22%22%3B%0A%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20document.addEventListener(%22wheel%22%2C%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20oldScroll%20%3D%20mouseData.scroll%3B%0A%20%20%20%20%20%20%20%20mouseData.scroll%20%3D%20%5BoldScroll%5B0%5D%20%2B%20e.deltaX%2C%20oldScroll%5B1%5D%20%2B%20e.deltaY%5D%3B%0A%20%20%20%20%20%20%20%20mouseData.scrollVelocity%20%3D%20%5Be.deltaX%2C%20e.deltaY%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20(e.deltaX%20%3E%201)%20runtime.startHats(%22HyperSense2SP_whenScrolled%22%2C%20%7B%20DIR%3A%20%22right%22%20%7D)%3B%0A%20%20%20%20%20%20%20%20else%20if%20(e.deltaX%20%3C%20-1)%20runtime.startHats(%22HyperSense2SP_whenScrolled%22%2C%20%7B%20DIR%3A%20%22left%22%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(e.deltaY%20%3E%201)%20runtime.startHats(%22HyperSense2SP_whenScrolled%22%2C%20%7B%20DIR%3A%20%22up%22%20%7D)%3B%0A%20%20%20%20%20%20%20%20else%20if%20(e.deltaY%20%3C%20-1)%20runtime.startHats(%22HyperSense2SP_whenScrolled%22%2C%20%7B%20DIR%3A%20%22down%22%20%7D)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20document.addEventListener(%22mousemove%22%2C%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20mouseData.client%20%3D%20%5Be.clientX%2C%20e.clientY%5D%3B%0A%20%20%20%20%20%20%20%20mouseData.velocity%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20runtime.ioDevices.mouse.getScratchX()%2C%0A%20%20%20%20%20%20%20%20%20%20runtime.ioDevices.mouse.getScratchY()%0A%20%20%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22HyperSense2SP%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20Scratch.translate(%22Hyper%20Sense%20V2%22)%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%235cb1d6%22%2C%0A%20%20%20%20%20%20%20%20color2%3A%20%22%2347a8d1%22%2C%0A%20%20%20%20%20%20%20%20color3%3A%20%22%232e8eb8%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20Scratch.translate(%22Scroll%20Dectection%22)%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22scrollValue%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22scroll%20%5BTYPE%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22SCROLL_TYPES%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setScrollDist%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20scroll%20distance%20%5BPOS%5D%20to%20%5BAMT%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20POS%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22POSITION%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20AMT%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22changeScrollDist%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22change%20scroll%20distance%20%5BPOS%5D%20by%20%5BAMT%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20POS%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22POSITION%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20AMT%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20100%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22whenScrolled%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.EVENT%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22when%20scrolled%20%5BDIR%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIR%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22SCROLL_EVENTS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22isScrolled%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22is%20scrolling%20%5BTYPE%5D%20%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20disableMonitor%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22SCROLL_EVENTS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20Scratch.translate(%22Mouse%20Detection%22)%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22mouseClick%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22is%20mouse%20%5BBUTTON%5D%20down%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20BUTTON%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22MOUSE_BUTTONS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22realMouse%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22real%20mouse%20%5BPOS%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20POS%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22POSITION%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22mouseVelocity%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22mouse%20velocity%20%5BPOS%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20POS%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22POSITION%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20Scratch.translate(%22Key%20Detection%22)%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22whenKey%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.HAT%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22when%20%5BKEY%5D%20key%20%5BTYPE%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20KEY%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22KEYS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22KEY_PRESS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22isKey%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22key%20%5BKEY%5D%20%5BTYPE%5D%20%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20KEY%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22KEYS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22KEY_PRESS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22currentKey%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22%5BTYPE%5D%20pressed%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22KEY_LISTS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22timeKeyPressed%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22seconds%20%5BKEY%5D%20key%20pressed%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20KEY%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22KEYS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setKeyBlock%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22block%20default%20behaviour%20of%20key%20%5BKEY%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20KEY%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22KEYS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22resetKeyBlocks%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22reset%20blocked%20key%20behaviours%22)%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getKeyBlockers%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22blocked%20keys%22)%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20Scratch.translate(%22Touching%20Expanded%22)%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spritePointing%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22is%20%5BSPRITE1%5D%20pointing%20towards%20%5BSPRITE2%5D%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22ALL_TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22OBJECTS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spriteTouchingSprite%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22is%20%5BSPRITE1%5D%20touching%20%5BSPRITE2%5D%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22OBJECTS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22ALL_TARGETS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spriteTouchingSpriteType%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22is%20%5BSPRITE1%5D%20touching%20%5BTYPE%5D%20of%20%5BSPRITE2%5D%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22ALL_OBJECTS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGET_TYPE%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spriteTouchingClone%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22is%20%5BSPRITE1%5D%20touching%20clone%20of%20%5BSPRITE2%5D%20with%20%5BVAR%5D%20set%20to%20%5BVAL%5D%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE1%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22ALL_OBJECTS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE2%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAR%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20Scratch.translate(%22my%20variable%22)%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VAL%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spritesTouching%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22sprites%20touching%20%5BSPRITE%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22ALL_OBJECTS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getNeighbors%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22neighbors%20of%20%5BSPRITE%5D%20in%20range%20%5BDIAMETER%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22ALL_OBJECTS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIAMETER%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22objTouchingColor%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22color%20touching%20%5BSPRITE%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22ALL_OBJECTS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22colorAtPosition%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22color%20at%20x%20%5Bx%5D%20y%20%5By%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spriteDragMode%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20drag%20mode%20of%20%5BSPRITE%5D%20to%20%5BDRAG%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22ALL_TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DRAG%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22DRAG_MODES%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22spriteDraggable%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22is%20%5BSPRITE%5D%20%5BDRAG%5D%20%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SPRITE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22ALL_TARGETS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DRAG%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22DRAG_TYPE%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20Scratch.translate(%22Asking%22)%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22advancedAsk%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22ask%20%5BQUESTION%5D%20as%20%5BTYPE%5D%20and%20%5BWAIT%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20QUESTION%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20Scratch.translate(%22what%20is%20your%20name%3F%22)%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22ASK_TYPE%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WAIT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22WAIT_TYPES%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22askReporter%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22ask%20%5BQUESTION%5D%20as%20%5BTYPE%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20QUESTION%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20Scratch.translate(%22what%20is%20your%20name%3F%22)%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22ASK_TYPE%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22stopAsking%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22stop%20asking%20question%22)%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22currentTyped%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22typed%20answer%22)%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22isAsking%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22is%20asking%20question%3F%22)%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setAskDisplay%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20ask%20monitor%20x%3A%20%5Bx%5D%20y%3A%20%5By%5D%20width%3A%20%5Bwidth%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20x%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20y%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200%2C%20exemptFromNormalization%3A%20true%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20width%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%20480%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setAskType%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20ask%20box%20input%20to%20%5BTYPE%5D%20default%20value%20%5BTEXT%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22ASK_INPUTS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TEXT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22...%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setAskList%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22set%20ask%20box%20input%20to%20dropdown%20with%20items%20in%20array%20%5BLIST%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20LIST%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22%5B%5C%22option%201%5C%22%2C%20%5C%22option%202%5C%22%5D%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20Scratch.translate(%22Miscellaneous%22)%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22isScreen%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22is%20%5BSCREEN%5D%20%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SCREEN%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22SCREENS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22screenOff%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22stage%20%5BTYPE%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22STAGE_SCALES%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22averageMicVolume%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22average%20loudness%22)%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getSpriteName%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22my%20sprite%20name%22)%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22allLayers%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22max%20sprite%20layers%22)%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22boolean%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22is%20%5BSTRING%5D%20real%3F%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20exemptFromNormalization%3A%20true%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getAllString%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20Scratch.translate(%22get%20%5BTEXT%5D%20in%20%5BSTRING%5D%22)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STRING%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20Scratch.translate(%22rotating%20a%206%20makes%20a%209!%22)%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TEXT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22string_types%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20OBJECTS%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20this._getObjects(true%2C%20false)%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20ALL_OBJECTS%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20this._getObjects(true%2C%20true)%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20TARGETS%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20this._getObjects(false%2C%20false)%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20ALL_TARGETS%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20this._getObjects(false%2C%20true)%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20POSITION%3A%20%5B%22x%22%2C%20%22y%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20WAIT_TYPES%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22wait%22)%2C%20value%3A%20%22wait%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22continue%22)%2C%20value%3A%20%22continue%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20SCROLL_TYPES%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22distance%20x%22)%2C%20value%3A%20%22distanceX%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22distance%20y%22)%2C%20value%3A%20%22distanceY%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22velocity%20x%22)%2C%20value%3A%20%22velocityX%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22velocity%20y%22)%2C%20value%3A%20%22velocityY%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20SCROLL_EVENTS%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22up%22)%2C%20value%3A%20%22up%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22down%22)%2C%20value%3A%20%22down%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22left%22)%2C%20value%3A%20%22left%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22right%22)%2C%20value%3A%20%22right%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20MOUSE_BUTTONS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22left%22)%2C%20value%3A%20%220%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22scroll%20wheel%22)%2C%20value%3A%20%221%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22right%22)%2C%20value%3A%20%222%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22back%22)%2C%20value%3A%20%223%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22foward%22)%2C%20value%3A%20%224%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20KEY_PRESS%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22pressed%22)%2C%20value%3A%20%22pressed%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22hit%22)%2C%20value%3A%20%22hit%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20KEY_LISTS%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22current%20key%22)%2C%20value%3A%20%22press%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22keys%22)%2C%20value%3A%20%22pressed%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22last%20key%22)%2C%20value%3A%20%22lastPress%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20KEYS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20translatedKeys%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20TARGET_TYPE%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22parent%22)%2C%20value%3A%20%22parent%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22clone%22)%2C%20value%3A%20%22clone%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20DRAG_TYPE%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22draggable%22)%2C%20value%3A%20%22draggable%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22being%20dragged%22)%2C%20value%3A%20%22being%20dragged%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20DRAG_MODES%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22draggable%22)%2C%20value%3A%20%22draggable%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22not%20draggable%22)%2C%20value%3A%20%22not%20draggable%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20ASK_TYPE%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22stage%22)%2C%20value%3A%20%22stage%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22sprite%22)%2C%20value%3A%20%22sprite%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20ASK_INPUTS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20validInputs%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20SCREENS%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22fullscreen%22)%2C%20value%3A%20%22fullscreen%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22smallscreen%22)%2C%20value%3A%20%22smallscreen%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20STAGE_SCALES%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22width%22)%2C%20value%3A%20%22width%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22display%20width%22)%2C%20value%3A%20%22display%20width%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22height%22)%2C%20value%3A%20%22height%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22display%20height%22)%2C%20value%3A%20%22display%20height%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22size%20ratio%22)%2C%20value%3A%20%22ratio%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20string_types%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22numbers%22)%2C%20value%3A%20%22numbers%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22letters%22)%2C%20value%3A%20%22letters%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20text%3A%20Scratch.translate(%22special%20characters%22)%2C%20value%3A%20%22special%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Helper%20Funcs%0A%20%20%20%20_getObjects(mouse%2C%20myself)%20%7B%0A%20%20%20%20%20%20const%20spriteNames%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20if%20(mouse)%20%7B%20spriteNames.push(%7B%20text%3A%20Scratch.translate(%22mouse-pointer%22)%2C%20value%3A%20%22_mouse_%22%20%7D)%20%7D%0A%20%20%20%20%20%20if%20(myself)%20%7B%20spriteNames.push(%7B%20text%3A%20Scratch.translate(%22myself%22)%2C%20value%3A%20%22_myself_%22%20%7D)%20%7D%0A%20%20%20%20%20%20const%20targets%20%3D%20runtime.targets%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20targets.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20targets%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20(target.isOriginal)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20targetName%20%3D%20target.getName()%3B%0A%20%20%20%20%20%20%20%20%20%20spriteNames.push(%7B%20text%3A%20targetName%2C%20value%3A%20targetName%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20spriteNames.length%20%3E%200%20%3F%20spriteNames%20%3A%20%5B%22%22%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20toProperKey(event%2C%20reverse)%20%7B%0A%20%20%20%20%20%20let%20key%20%3D%20event.key%3B%0A%20%20%20%20%20%20if%20(key%20%3D%3D%3D%20%22%20%22)%20return%20%22space%22%3B%0A%20%20%20%20%20%20else%20if%20(key.length%20%3E%201)%20key%20%3D%20key.toLowerCase()%3B%0A%0A%20%20%20%20%20%20if%20(key.startsWith(%22arrow%22))%20key%20%3D%20key.replace(%22arrow%22%2C%20%22%22)%20%2B%20%22%20arrow%22%3B%0A%20%20%20%20%20%20else%20if%20(key.startsWith(%22page%22))%20key%20%3D%20key.replace(%22page%22%2C%20%22page%20%22)%3B%0A%20%20%20%20%20%20else%20if%20(key%20%3D%3D%3D%20%22capslock%22)%20key%20%3D%20%22caps%20lock%22%3B%0A%20%20%20%20%20%20else%20if%20(key%20%3D%3D%3D%20%22contextmenu%22)%20key%20%3D%20%22context%20menu%22%3B%0A%20%20%20%20%20%20return%20key%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20keyCheckHandler(key%2C%20hitOnly)%20%7B%0A%20%20%20%20%20%20const%20%7B%20keyTimers%2C%20curKey%20%7D%20%3D%20keyData%3B%0A%20%20%20%20%20%20if%20(key%20%3D%3D%3D%20%22any%22%20%26%26%20curKey%20!%3D%3D%20%22%22)%20return%20hitOnly%20%3F%20keyTimers.get(curKey)%20%3C%3D%200.1%20%3A%20true%3B%0A%20%20%20%20%20%20if%20(keyTimers.has(key))%20return%20hitOnly%20%3F%20keyTimers.get(key)%20%3C%3D%200.1%20%3A%20true%3B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20colorAtPos(x%2C%20y)%20%7B%0A%20%20%20%20%20%20const%20clientX%20%3D%20Math.round((((runtime.stageWidth%20%2F%202)%20%2B%20x)%20%2F%20runtime.stageWidth)%20*%20render._gl.canvas.clientWidth)%3B%0A%20%20%20%20%20%20const%20clientY%20%3D%20Math.round((((runtime.stageHeight%20%2F%202)%20-%20y)%20%2F%20runtime.stageHeight)%20*%20render._gl.canvas.clientHeight)%3B%0A%20%20%20%20%20%20const%20rgb%20%3D%20render.extractColor(clientX%2C%20clientY%2C%2020).color%3B%0A%20%20%20%20%20%20return%20%60%23%24%7Brgb.r.toString(16).padStart(2%2C%20%220%22)%7D%24%7Brgb.g.toString(16).padStart(2%2C%20%220%22)%7D%24%7Brgb.b.toString(16).padStart(2%2C%20%220%22)%7D%60%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getTarget(name%2C%20util%2C%20checkMouse%2C%20checkMyself)%20%7B%0A%20%20%20%20%20%20if%20(checkMouse%20%26%26%20name%20%3D%3D%3D%20%22_mouse_%22)%20return%20%22_mouse_%22%3B%0A%20%20%20%20%20%20if%20(checkMyself%20%26%26%20name%20%3D%3D%3D%20%22_myself_%22)%20return%20util.target%3B%0A%20%20%20%20%20%20return%20runtime.getSpriteTargetByName(name)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20updateAskMonitor()%20%7B%0A%20%20%20%20%20%20let%20box%20%3D%20document.querySelector(%60div%5Bclass*%3D%22question%22%5D%60)%3B%0A%20%20%20%20%20%20if%20(!box)%20return%3B%0A%0A%20%20%20%20%20%20if%20(isPackaged)%20box%20%3D%20box.firstElementChild%3B%0A%20%20%20%20%20%20else%20box%20%3D%20box.firstElementChild.firstElementChild%3B%0A%20%20%20%20%20%20const%20%7B%20x%2C%20y%2C%20width%2C%20input%20%7D%20%3D%20askBoxSettings%3B%0A%0A%20%20%20%20%20%20if%20(x%20!%3D%3D%20undefined%20%7C%7C%20y%20!%3D%3D%20undefined%20%7C%7C%20width%20!%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20const%20canvasBounds%20%3D%20render.canvas.getBoundingClientRect()%3B%0A%20%20%20%20%20%20%20%20const%20ratio%20%3D%20canvasBounds.width%20%2F%20runtime.stageWidth%3B%0A%0A%20%20%20%20%20%20%20%20const%20widthCSS%20%3D%20%60width%3A%20calc(%24%7Bwidth%20%3F%20%60%24%7Bwidth%20*%20ratio%7Dpx%60%20%3A%20%22100%25%22%7D%20-%201rem)%3B%60%3B%0A%20%20%20%20%20%20%20%20const%20positionCSS%20%3D%20%60transform%3A%20translate(calc(-50%25%20%2B%20%24%7Bx%20%3F%3F%200%7Dpx)%2C%20calc(-50%25%20%2B%20%24%7By%20%3F%3F%20isPackaged%20%3F%20-55%20%3A%20100%7Dpx))%3B%60%3B%0A%20%20%20%20%20%20%20%20box.setAttribute(%22style%22%2C%20%60margin%3A%200%3B%20position%3A%20absolute%3B%20left%3A%2050%25%3B%20top%3A%2050%25%3B%20%24%7BwidthCSS%7D%20%24%7BpositionCSS%7D%60)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(input.type%20%3D%3D%3D%20undefined)%20return%3B%0A%20%20%20%20%20%20const%20askInput%20%3D%20document.querySelector(isPackaged%20%3F%20%60input%5Bclass%3D%22sc-question-input%22%5D%60%20%3A%20%60div%5Bclass*%3D%22question%22%5D%20%5Bclass%5E%3D%22input_input-form%22%5D%60)%3B%0A%20%20%20%20%20%20const%20element%20%3D%20box.querySelector(%60select%5Bid%3D%22SP-input_select%22%5D%60)%3B%0A%20%20%20%20%20%20if%20(element)%20element.remove()%3B%0A%0A%20%20%20%20%20%20if%20(input.type%20%3D%3D%3D%20%22dropdown%22)%20%7B%0A%20%20%20%20%20%20%20%20const%20dropdown%20%3D%20document.createElement(%22select%22)%3B%0A%20%20%20%20%20%20%20%20dropdown.id%20%3D%20%22SP-input_select%22%3B%0A%20%20%20%20%20%20%20%20dropdown.setAttribute(%22class%22%2C%20askInput.getAttribute(%22class%22))%3B%0A%20%20%20%20%20%20%20%20dropdown.setAttribute(%22style%22%2C%20%60width%3A%20100%25%3B%20background%3A%20%23fff%3B%20color%3A%20%23505050%3B%20border-color%3A%20%23D9D9D9%3B%60)%3B%0A%20%20%20%20%20%20%20%20input.value.forEach(item%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20option%20%3D%20document.createElement(%22option%22)%3B%0A%20%20%20%20%20%20%20%20%20%20option.value%20%3D%20item%3B%20option.text%20%3D%20item%3B%0A%20%20%20%20%20%20%20%20%20%20dropdown.appendChild(option)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20askInput.parentNode.appendChild(dropdown)%3B%0A%20%20%20%20%20%20%20%20askInput.style.display%20%3D%20%22none%22%3B%0A%20%20%20%20%20%20%20%20askInput.value%20%3D%20dropdown.value%3B%0A%20%20%20%20%20%20%20%20dropdown.addEventListener(%22change%22%2C%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20askInput.value%20%3D%20dropdown.value%3B%0A%20%20%20%20%20%20%20%20%20%20e.stopPropagation()%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20const%20button%20%3D%20box.querySelector(%60button%5Bclass*%3D%22question-submit-button%22%5D%60)%3B%0A%20%20%20%20%20%20%20%20button.addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20setTimeout(()%20%3D%3E%20%7B%20sensingCore._answer%20%3D%20askInput.value%20%7D%2C%2010)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20if%20(input.value)%20askInput.value%20%3D%20input.value%3B%0A%20%20%20%20%20%20%20%20askInput.type%20%3D%20input.type%3B%0A%20%20%20%20%20%20%20%20askInput.pattern%20%3D%20input.type%20%3D%3D%3D%20%22number%22%20%3F%20%22%5B0-9%5D*%22%20%3A%20%22none%22%3B%0A%20%20%20%20%20%20%20%20askInput.style.display%20%3D%20%22block%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Block%20Funcs%0A%20%20%20%20scrollValue(args)%20%7B%0A%20%20%20%20%20%20const%20type%20%3D%20Cast.toString(args.TYPE)%3B%0A%20%20%20%20%20%20const%20index%20%3D%20type.endsWith(%22X%22)%20%3F%200%20%3A%201%3B%0A%20%20%20%20%20%20if%20(type.startsWith(%22distance%22))%20return%20mouseData.scroll%5Bindex%5D%3B%0A%20%20%20%20%20%20else%20return%20mouseData.scrollVelocity%5Bindex%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setScrollDist(args)%20%7B%0A%20%20%20%20%20%20const%20index%20%3D%20args.POS%20%3D%3D%3D%20%22x%22%20%3F%200%20%3A%201%3B%0A%20%20%20%20%20%20mouseData.scroll%5Bindex%5D%20%3D%20Cast.toNumber(args.AMT)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20changeScrollDist(args)%20%7B%0A%20%20%20%20%20%20const%20index%20%3D%20args.POS%20%3D%3D%3D%20%22x%22%20%3F%200%20%3A%201%3B%0A%20%20%20%20%20%20mouseData.scroll%5Bindex%5D%20%2B%3D%20Cast.toNumber(args.AMT)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20isScrolled(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20type%20%3D%20Cast.toString(args.TYPE)%3B%0A%20%20%20%20%20%20const%20isX%20%3D%20type%20%3D%3D%3D%20%22left%22%20%7C%7C%20type%20%3D%3D%3D%20%22right%22%3B%0A%20%20%20%20%20%20const%20scrollDist%20%3D%20mouseData.scroll%5BisX%20%3F%200%20%3A%201%5D%3B%0A%20%20%20%20%20%20const%20stackName%20%3D%20%60SPscrollCheck%24%7BisX%20%3F%20%22X%22%20%3A%20%22Y%22%7D%60%3B%0A%0A%20%20%20%20%20%20if%20(util.thread.stackFrames%5B0%5D%5BstackName%5D%20%3D%3D%3D%20undefined)%20util.thread.stackFrames%5B0%5D%5BstackName%5D%20%3D%200%3B%0A%20%20%20%20%20%20const%20testerVal%20%3D%20util.thread.stackFrames%5B0%5D%5BstackName%5D%3B%0A%0A%20%20%20%20%20%20const%20status%20%3D%20type%20%3D%3D%3D%20%22down%22%20%7C%7C%20type%20%3D%3D%3D%20%22left%22%20%3F%0A%20%20%20%20%20%20%20%20scrollDist%20%3E%20testerVal%20%3A%20scrollDist%20%3C%20testerVal%3B%0A%0A%20%20%20%20%20%20if%20(status)%20util.thread.stackFrames%5B0%5D%5BstackName%5D%20%3D%20scrollDist%3B%0A%20%20%20%20%20%20return%20Cast.toBoolean(status)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20mouseClick(args%2C%20util)%20%7B%0A%20%20%20%20%20%20return%20util.ioQuery(%22mouse%22%2C%20%22getButtonIsDown%22%2C%20%5BCast.toNumber(args.BUTTON)%5D)%0A%20%20%20%20%7D%0A%0A%20%20%20%20realMouse(args)%20%7B%0A%20%20%20%20%20%20return%20mouseData.client%5Bargs.POS%20%3D%3D%3D%20%22x%22%20%3F%200%20%3A%201%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20mouseVelocity(args)%20%7B%0A%20%20%20%20%20%20return%20mouseData.velocity%5Bargs.POS%20%3D%3D%3D%20%22x%22%20%3F%200%20%3A%201%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20whenKey(args)%20%7B%0A%20%20%20%20%20%20const%20key%20%3D%20Cast.toString(args.KEY)%3B%0A%20%20%20%20%20%20const%20isHit%20%3D%20Cast.toString(args.TYPE)%20%3D%3D%3D%20%22hit%22%3B%0A%20%20%20%20%20%20return%20this.keyCheckHandler(key%2C%20isHit)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20isKey(args)%20%7B%0A%20%20%20%20%20%20%2F%2F%20really%20nothing%20special%20here%0A%20%20%20%20%20%20return%20this.whenKey(args)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20currentKey(args)%20%7B%0A%20%20%20%20%20%20const%20type%20%3D%20Cast.toString(args.TYPE)%3B%0A%20%20%20%20%20%20switch%20(type)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22press%22%3A%20return%20keyData.curKey%3B%0A%20%20%20%20%20%20%20%20case%20%22pressed%22%3A%20return%20JSON.stringify(keyData.keys)%3B%0A%20%20%20%20%20%20%20%20case%20%22lastPress%22%3A%20return%20keyData.lastKey%3B%0A%20%20%20%20%20%20%20%20default%3A%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20timeKeyPressed(args)%20%7B%0A%20%20%20%20%20%20const%20key%20%3D%20Cast.toString(args.KEY).toLowerCase()%3B%0A%20%20%20%20%20%20if%20(key%20%3D%3D%3D%20%22any%22)%20return%20Math.max(0%2C%20...keyData.keyTimers.values().toArray())%3B%0A%20%20%20%20%20%20else%20return%20keyData.keyTimers.get(key)%20%3F%3F%200%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setKeyBlock(args)%20%7B%0A%20%20%20%20%20%20const%20key%20%3D%20Cast.toString(args.KEY)%3B%0A%20%20%20%20%20%20keyData.keyBlockers.add(key)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20resetKeyBlocks()%20%7B%0A%20%20%20%20%20%20keyData.keyBlockers.clear()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getKeyBlockers()%20%7B%0A%20%20%20%20%20%20return%20JSON.stringify(keyData.keyBlockers.values().toArray())%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20spritePointing(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.SPRITE1%2C%20util%2C%20false%2C%20true)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%20false%3B%0A%20%20%20%20%20%20const%20oldDir%20%3D%20target.direction%3B%0A%20%20%20%20%20%20runtime.ext_scratch3_motion.pointTowards(%7B%20TOWARDS%3A%20args.SPRITE2%20%7D%2C%20%7B%20...util%2C%20target%2C%20ioQuery%3A%20util.ioQuery%20%7D)%3B%0A%20%20%20%20%20%20const%20newDir%20%3D%20target.direction%3B%0A%20%20%20%20%20%20target.setDirection(oldDir)%3B%0A%20%20%20%20%20%20return%20Math.round(newDir)%20%3D%3D%3D%20Math.round(oldDir)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20spriteTouchingSprite(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.SPRITE2%2C%20util%2C%20false%2C%20true)%3B%0A%20%20%20%20%20%20if%20(!target)%20return%20false%3B%0A%20%20%20%20%20%20return%20target.sprite.clones.some((t)%20%3D%3E%20t.isTouchingObject(args.SPRITE1))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20spriteTouchingSpriteType(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target1%20%3D%20this.getTarget(args.SPRITE1%2C%20util%2C%20true%2C%20true)%3B%0A%20%20%20%20%20%20const%20target2%20%3D%20runtime.getSpriteTargetByName(args.SPRITE2)%3B%0A%20%20%20%20%20%20if%20(!target1%20%7C%7C%20!target2)%20return%20false%3B%0A%20%20%20%20%20%20if%20(args.TYPE%20%3D%3D%3D%20%22parent%22)%20%7B%0A%20%20%20%20%20%20%20%20if%20(target1%20%3D%3D%3D%20%22_mouse_%22)%20return%20target2.isTouchingObject(%22_mouse_%22)%3B%0A%20%20%20%20%20%20%20%20else%20return%20render.isTouchingDrawables(target1.drawableID%2C%20%5Btarget2.drawableID%5D)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20const%20clones%20%3D%20target2.sprite.clones%3B%0A%20%20%20%20%20%20%20%20if%20(target1%20%3D%3D%3D%20%22_mouse_%22)%20return%20clones.some((c)%20%3D%3E%20!c.isOriginal%20%26%26%20c.isTouchingObject(%22_mouse_%22))%3B%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20cloneIds%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%201%3B%20i%20%3C%20clones.length%3B%20i%2B%2B)%20cloneIds.push(clones%5Bi%5D.drawableID)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20render.isTouchingDrawables(target1.drawableID%2C%20cloneIds)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20spriteTouchingClone(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target1%20%3D%20this.getTarget(args.SPRITE1%2C%20util%2C%20true%2C%20true)%3B%0A%20%20%20%20%20%20const%20target2%20%3D%20runtime.getSpriteTargetByName(args.SPRITE2)%3B%0A%20%20%20%20%20%20if%20(!target1%20%7C%7C%20!target2)%20return%20false%3B%0A%0A%20%20%20%20%20%20const%20clones%20%3D%20target2.sprite.clones%3B%0A%20%20%20%20%20%20for%20(var%20i%20%3D%201%3B%20i%20%3C%20clones.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20variable%20%3D%20clones%5Bi%5D.lookupVariableByNameAndType(args.VAR%2C%20%22%22%2C%20clones%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20if%20(variable%20%26%26%20Cast.toString(variable.value)%20%3D%3D%3D%20Cast.toString(args.VAL))%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(target1%20%3D%3D%3D%20%22_mouse_%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(clones%5Bi%5D.isTouchingObject(%22_mouse_%22))%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(render.isTouchingDrawables(target1.drawableID%2C%20%5Bclones%5Bi%5D.drawableID%5D))%20return%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20spritesTouching(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20list%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20const%20thisSprite%20%3D%20this.getTarget(args.SPRITE%2C%20util%2C%20true%2C%20true)%3B%0A%20%20%20%20%20%20if%20(!thisSprite)%20return%20%22%5B%5D%22%3B%0A%20%20%20%20%20%20const%20targets%20%3D%20runtime.targets%3B%0A%20%20%20%20%20%20if%20(thisSprite%20%3D%3D%3D%20%22_mouse_%22)%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20targets.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20target%20%3D%20targets%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20const%20name%20%3D%20%60%24%7Btarget.getName()%7D%24%7Btarget.isOriginal%20%3F%20%22%22%20%3A%20%22%20(Clone)%22%7D%60%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(target.isTouchingObject(thisSprite))%20list.push(name)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20targets.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20target%20%3D%20targets%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(target.id%20%3D%3D%3D%20thisSprite.id)%20continue%3B%0A%0A%20%20%20%20%20%20%20%20%20%20const%20name%20%3D%20%60%24%7Btarget.getName()%7D%24%7Btarget.isOriginal%20%3F%20%22%22%20%3A%20%22%20(Clone)%22%7D%60%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(render.isTouchingDrawables(thisSprite.drawableID%2C%20%5Btarget.drawableID%5D))%20list.push(name)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20JSON.stringify(list)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getNeighbors(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20circ%20%3D%20Cast.toNumber(args.DIAMETER)%3B%0A%20%20%20%20%20%20let%20list%20%3D%20%5B%5D%2C%20pos%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_mouse_%22)%20pos%20%3D%20%5Butil.ioQuery(%22mouse%22%2C%20%22getScratchX%22)%2C%20util.ioQuery(%22mouse%22%2C%20%22getScratchY%22)%2C%20%22%22%5D%3B%0A%20%20%20%20%20%20else%20if%20(args.SPRITE%20%3D%3D%3D%20%22_myself_%22)%20pos%20%3D%20%5Butil.target.x%2C%20util.target.y%2C%20util.target.id%5D%3B%0A%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20const%20nameTarget%20%3D%20runtime.getSpriteTargetByName(args.SPRITE)%3B%0A%20%20%20%20%20%20%20%20if%20(!nameTarget)%20return%20%22%5B%5D%22%3B%0A%20%20%20%20%20%20%20%20pos%20%3D%20%5BnameTarget.x%2C%20nameTarget.y%2C%20nameTarget.id%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20targets%20%3D%20runtime.targets%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20targets.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20targets%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20const%20dx%20%3D%20pos%5B0%5D%20-%20target.x%3B%0A%20%20%20%20%20%20%20%20const%20dy%20%3D%20pos%5B1%5D%20-%20target.y%3B%0A%20%20%20%20%20%20%20%20if%20(Math.sqrt((dx%20*%20dx)%20%2B%20(dy%20*%20dy))%20%3C%3D%20circ%20%26%26%20target.id%20!%3D%3D%20pos%5B2%5D)%20list.push(%60%24%7Btarget.getName()%7D%24%7Btarget.isOriginal%20%3F%20%22%22%20%3A%20%22%20(Clone)%22%7D%60)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20JSON.stringify(list)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20colorAtPosition(args)%20%7B%20return%20this.colorAtPos(Cast.toNumber(args.x)%2C%20Cast.toNumber(args.y))%20%7D%0A%20%20%20%20objTouchingColor(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(args.SPRITE%20%3D%3D%3D%20%22_mouse_%22)%20return%20this.colorAtPos(util.ioQuery(%22mouse%22%2C%20%22getScratchX%22)%2C%20util.ioQuery(%22mouse%22%2C%20%22getScratchY%22))%3B%0A%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.SPRITE%2C%20util%2C%20false%2C%20true)%3B%0A%20%20%20%20%20%20%20%20if%20(!target)%20return%20%22%22%3B%0A%20%20%20%20%20%20%20%20const%20wasVisible%20%3D%20target.visible%3B%0A%20%20%20%20%20%20%20%20target.setVisible(false)%3B%0A%20%20%20%20%20%20%20%20const%20hex%20%3D%20this.colorAtPos(target.x%2C%20target.y)%3B%0A%20%20%20%20%20%20%20%20target.setVisible(wasVisible)%3B%0A%20%20%20%20%20%20%20%20return%20hex%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20spriteDragMode(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.SPRITE%2C%20util%2C%20false%2C%20true)%3B%0A%20%20%20%20%20%20if%20(target)%20target.setDraggable(args.DRAG%20%3D%3D%3D%20%22draggable%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20spriteDraggable(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20this.getTarget(args.SPRITE%2C%20util%2C%20false%2C%20true)%3B%0A%20%20%20%20%20%20if%20(target)%20return%20target%5Bargs.DRAG%20%3D%3D%3D%20%22draggable%22%20%3F%20%22draggable%22%20%3A%20%22dragging%22%5D%3B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20advancedAsk(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20wasVisible%20%3D%20util.target.visible%3B%0A%20%20%20%20%20%20if%20(!util.target.isStage%20%26%26%20args.TYPE%20%3D%3D%3D%20%22stage%22)%20util.target.setVisible(false)%3B%0A%0A%20%20%20%20%20%20return%20new%20Promise(resolve%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20sensingCore.askAndWait(args%2C%20util)%3B%0A%20%20%20%20%20%20%20%20if%20(!util.target.isStage%20%26%26%20wasVisible)%20util.target.setVisible(true)%3B%0A%20%20%20%20%20%20%20%20this.updateAskMonitor()%3B%0A%0A%20%20%20%20%20%20%20%20if%20(args.WAIT%20%3D%3D%3D%20%22continue%22)%20resolve()%3B%0A%20%20%20%20%20%20%20%20else%20runtime.once(%22ANSWER%22%2C%20()%20%3D%3E%20resolve())%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20askReporter(args%2C%20util)%20%7B%0A%20%20%20%20%20%20return%20this.advancedAsk(args%2C%20util).then(()%20%3D%3E%20%7B%20return%20sensingCore.getAnswer()%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20stopAsking()%20%7B%0A%20%20%20%20%20%20runtime.emit(%22ANSWER%22%2C%20this.currentTyped())%3B%0A%20%20%20%20%20%20runtime.emit(%22QUESTION%22%2C%20null)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20currentTyped()%20%7B%0A%20%20%20%20%20%20let%20box%20%3D%20document.querySelector(isPackaged%20%3F%20%60input%5Bclass%3D%22sc-question-input%22%5D%60%20%3A%20%60div%5Bclass*%3D%22question%22%5D%20%5Bclass%5E%3D%22input_input-form%22%5D%60)%3B%0A%20%20%20%20%20%20return%20box%20%3F%20box.value%20%3A%20%22%22%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20isAsking()%20%7B%20return%20Cast.toBoolean(document.querySelector(%60div%5Bclass*%3D%22question-input%22%5D%60))%20%7D%0A%0A%20%20%20%20setAskDisplay(args)%20%7B%0A%20%20%20%20%20%20askBoxSettings.width%20%3D%20Cast.toNumber(args.width)%3B%0A%20%20%20%20%20%20if%20(askBoxSettings.width%20%3C%200)%20askBoxSettings.width%20%3D%20undefined%3B%0A%0A%20%20%20%20%20%20askBoxSettings.x%20%3D%20Cast.toNumber(args.x)%3B%0A%20%20%20%20%20%20askBoxSettings.y%20%3D%20isNaN(args.y)%20%3F%20undefined%20%3A%20Cast.toNumber(args.y)%20*%20-1%3B%0A%20%20%20%20%20%20if%20(isNaN(args.y))%20askBoxSettings.y%20%3D%20undefined%3B%0A%20%20%20%20%20%20this.updateAskMonitor()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setAskType(args)%20%7B%0A%20%20%20%20%20%20const%20inputType%20%3D%20Cast.toString(args.TYPE)%3B%0A%20%20%20%20%20%20askBoxSettings.input%20%3D%20%7B%0A%20%20%20%20%20%20%20%20type%3A%20validInputs.find((i)%20%3D%3E%20i.value%20%3D%3D%3D%20inputType)%20%3F%20inputType%20%3A%20%22text%22%2C%0A%20%20%20%20%20%20%20%20value%3A%20args.TEXT%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20this.updateAskMonitor()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setAskList(args)%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20const%20array%20%3D%20JSON.parse(args.LIST)%3B%0A%20%20%20%20%20%20%20%20if%20(Array.isArray(array)%20%26%26%20array.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20askBoxSettings.input%20%3D%20%7B%20type%3A%20%22dropdown%22%2C%20value%3A%20array%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20this.updateAskMonitor()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20catch%20%7B%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20isScreen(args)%20%7B%0A%20%20%20%20%20%20const%20values%20%3D%20%5Brender.canvas.getBoundingClientRect().width%2C%20runtime.stageWidth%5D%3B%0A%20%20%20%20%20%20return%20args.SCREEN%20%3D%3D%3D%20%22fullscreen%22%20%3F%20values%5B0%5D%20%3E%20values%5B1%5D%20%3A%20values%5B0%5D%20%3C%20values%5B1%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20screenOff(args)%20%7B%0A%20%20%20%20%20%20const%20type%20%3D%20Cast.toString(args.TYPE)%3B%0A%20%20%20%20%20%20const%20canvasBounds%20%3D%20type.startsWith(%22display%22)%20%7C%7C%20type%20%3D%3D%3D%20%22ratio%22%20%3F%0A%20%20%20%20%20%20%20%20render.canvas.getBoundingClientRect()%20%3A%20%7B%7D%3B%0A%20%20%20%20%20%20switch%20(type)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22width%22%3A%20return%20runtime.stageWidth%3B%0A%20%20%20%20%20%20%20%20case%20%22height%22%3A%20return%20runtime.stageHeight%3B%0A%20%20%20%20%20%20%20%20case%20%22display%20width%22%3A%20return%20canvasBounds.width%3B%0A%20%20%20%20%20%20%20%20case%20%22display%20height%22%3A%20return%20canvasBounds.height%3B%0A%20%20%20%20%20%20%20%20case%20%22ratio%22%3A%20return%20canvasBounds.width%20%2F%20runtime.stageWidth%3B%0A%20%20%20%20%20%20%20%20default%3A%20return%200%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20averageMicVolume()%20%7B%0A%20%20%20%20%20%20if%20(loudnessCache.length%20%3E%3D%2030)%20loudnessCache%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20loudnessCache.push(sensingCore.getLoudness())%3B%0A%20%20%20%20%20%20let%20sum%20%3D%20loudnessCache.reduce((accumulator%2C%20curValue)%20%3D%3E%20accumulator%20%2B%20curValue%2C%200)%3B%0A%20%20%20%20%20%20return%20Math.round((sum%20%2F%20loudnessCache.length)%20*%20100)%20%2F%20100%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getSpriteName(_%2C%20util)%20%7B%20return%20util.target.getName()%20%7D%0A%0A%20%20%20%20allLayers()%20%7B%20return%20render._drawList.length%20-%201%20%7D%0A%0A%20%20%20%20boolean(args)%20%7B%0A%20%20%20%20%20%20return%20Cast.toBoolean(args.STRING)%20%26%26%20args.STRING%20!%3D%3D%20undefined%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getAllString(args)%20%7B%0A%20%20%20%20%20%20let%20regex%3B%0A%20%20%20%20%20%20switch%20(args.TEXT)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22numbers%22%3A%20%7Bregex%20%3D%20%2F%5B%5E0-9%5D%2Fg%3B%20break%20%7D%0A%20%20%20%20%20%20%20%20case%20%22special%20characters%22%3A%20%7Bregex%20%3D%20%2F%5BA-Za-z0-9%5D%2Fg%3B%20break%20%7D%0A%20%20%20%20%20%20%20%20default%3A%20regex%20%3D%20%2F%5B%5EA-Za-z%5D%2Fg%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20Cast.toString(args.STRING).replace(regex%2C%20%22%22)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20HyperSense2SP())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Sound%20Waves%0D%0A%2F%2F%20ID%3A%20SPsoundWaves%0D%0A%2F%2F%20Description%3A%20Make%20sounds%20with%20oscillators!%0D%0A%2F%2F%20By%3A%20SharkPool%0D%0A%2F%2F%20License%3A%20MIT%0D%0A%0D%0A%2F%2F%20Version%20V.2.1.3%0D%0A%0D%0A(function%20(Scratch)%20%7B%0D%0A%20%20%22use%20strict%22%3B%0D%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20throw%20new%20Error(%22Sound%20Waves%20must%20run%20unsandboxed%22)%3B%0D%0A%0D%0A%20%20const%20menuIconURI%20%3D%0D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTAuODgyIiBoZWlnaHQ9IjExMC44ODIiIHZpZXdCb3g9IjAgMCAxMTAuODgyIDExMC44ODIiPjxwYXRoIGQ9Ik0wIDU1LjQ0MUMwIDI0LjgyMSAyNC44MjEgMCA1NS40NCAwYzMwLjYyIDAgNTUuNDQxIDI0LjgyMSA1NS40NDEgNTUuNDQgMCAzMC42Mi0yNC44MjEgNTUuNDQxLTU1LjQ0IDU1LjQ0MUMyNC44MjEgMTEwLjg4MSAwIDg2LjA2IDAgNTUuNDQxIiBmaWxsPSIjMmJiMzlhIi8%2BPHBhdGggZD0ibTEyLjg2MiA2Mi41MyA5LjAzLTE0LjU2NkwzNy42MjMgNzUuOTNsMTcuNDc5LTQxLjY1OCAxNy43NyA0MS4wNzUgMTMuNjkyLTI3LjA5Mkw5Ny4zNDMgNjIuNTMiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSI3LjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjwvc3ZnPg%3D%3D%22%3B%0D%0A%20%20const%20blockIconURI%20%3D%0D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTEuNDI5IiBoZWlnaHQ9Ijc4IiB2aWV3Qm94PSIwIDAgMTExLjQyOSA3OCI%2BPHBhdGggZD0iTTI2Ny4xNiAyMTloLTI2LjQ2NGE2LjI3IDYuMjcgMCAwIDEtNi4yNjctNi4yNjh2LTYwLjU5aC0xNi43MTV2MjcuMTYyYTYuMjcgNi4yNyAwIDAgMS02LjI2OCA2LjI2N2gtMjQuMzc1YTIuNzg2IDIuNzg2IDAgMCAxLTIuNzg1LTIuNzg1di01LjU3MmEyLjc4NiAyLjc4NiAwIDAgMSAyLjc4NS0yLjc4NWgxOS41di0yNy4xNjFBNi4yNyA2LjI3IDAgMCAxIDIxMi44NCAxNDFoMjYuNDY1YTYuMjcgNi4yNyAwIDAgMSA2LjI2NyA2LjI2OHY2MC41OWgxNi43MTV2LTI3LjE2MmE2LjI3IDYuMjcgMCAwIDEgNi4yNjgtNi4yNjdoMjQuMzc1YTIuNzg2IDIuNzg2IDAgMCAxIDIuNzg1IDIuNzg1djUuNTcyYTIuNzg2IDIuNzg2IDAgMCAxLTIuNzg1IDIuNzg1aC0xOS41djI3LjE2MWE2LjI3IDYuMjcgMCAwIDEtNi4yNyA2LjI2OCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE4NC4yODYgLTE0MSkiIGZpbGw9IiNmZmYiIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTpub3JtYWwiLz48L3N2Zz4%3D%22%3B%0D%0A%0D%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0D%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0D%0A%0D%0A%20%20const%20waves%20%3D%20%5B%22triangle%22%2C%20%22sine%22%2C%20%22square%22%2C%20%22sawtooth%22%5D%3B%0D%0A%20%20const%20notes%20%3D%20%5B%0D%0A%20%20%20%20%22C%22%2C%20%22C%23%22%2C%20%22D%22%2C%20%22D%23%22%2C%20%22E%22%2C%20%22F%22%2C%0D%0A%20%20%20%20%22F%23%22%2C%20%22G%22%2C%20%22G%23%22%2C%20%22A%22%2C%20%22A%23%22%2C%20%22B%22%0D%0A%20%20%5D%3B%0D%0A%20%20const%20normalVolumeMap%20%3D%20%7B%0D%0A%20%20%20%20sine%3A%201.0%2C%0D%0A%20%20%20%20triangle%3A%201.2%2C%0D%0A%20%20%20%20square%3A%200.5%2C%0D%0A%20%20%20%20sawtooth%3A%200.4%0D%0A%20%20%7D%3B%0D%0A%0D%0A%20%20class%20SPsoundWaves%20%7B%0D%0A%20%20%20%20constructor()%20%7B%0D%0A%20%20%20%20%20%20this.audioContext%20%3D%20runtime.audioEngine.audioContext%3B%0D%0A%20%20%20%20%20%20this.audioNode%20%3D%20runtime.audioEngine.inputNode%3B%0D%0A%20%20%20%20%20%20this.gainNode%20%3D%20this.audioContext.createGain()%3B%0D%0A%20%20%20%20%20%20this.gainNode.gain.value%20%3D%201%3B%0D%0A%20%20%20%20%20%20this.gainNode.connect(this.audioNode)%3B%0D%0A%0D%0A%20%20%20%20%20%20this.currentNote%20%3D%20%22C2%22%3B%0D%0A%20%20%20%20%20%20this.keyPressed%20%3D%20false%3B%0D%0A%20%20%20%20%20%20this.keyPressedTime%20%3D%200%3B%0D%0A%20%20%20%20%20%20this.playingNote%20%3D%20false%3B%0D%0A%20%20%20%20%20%20this.oscillators%20%3D%20new%20Map()%3B%0D%0A%20%20%20%20%20%20this.gainNodes%20%3D%20new%20Map()%3B%0D%0A%20%20%20%20%20%20this.playingStatus%20%3D%20new%20Map()%3B%0D%0A%20%20%20%20%20%20%2F*%20Deprecation%20Marker%20*%2F%0D%0A%20%20%20%20%20%20this.registerKeyEvents()%3B%0D%0A%20%20%20%20%20%20%2F*%20Marker%20End%20*%2F%0D%0A%20%20%20%20%20%20runtime.on(%22PROJECT_STOP_ALL%22%2C%20()%20%3D%3E%20this.stopNote())%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20getInfo()%20%7B%0D%0A%20%20%20%20%20%20return%20%7B%0D%0A%20%20%20%20%20%20%20%20id%3A%20%22SPsoundWaves%22%2C%0D%0A%20%20%20%20%20%20%20%20name%3A%20%22Sound%20Waves%22%2C%0D%0A%20%20%20%20%20%20%20%20color1%3A%20%22%232BB39A%22%2C%0D%0A%20%20%20%20%20%20%20%20menuIconURI%2C%0D%0A%20%20%20%20%20%20%20%20blockIconURI%2C%0D%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22playNoteV2%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22play%20%5BWAVE%5D%20note%20%5BNOTE%5D%20for%20%5BDURATION%5D%20seconds%20with%20ID%20%5BID%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WAVE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22WAVES%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NOTE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NOTE%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2060%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DURATION%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200.5%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22playNoteContinuouslyV2%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22play%20%5BWAVE%5D%20note%20%5BNOTE%5D%20continuously%20with%20ID%20%5BID%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WAVE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menu%3A%20%22WAVES%22%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NOTE%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NOTE%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%2060%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22stopID%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22stop%20note%20with%20ID%20%5BID%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22stopNote%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22stop%20all%20notes%22%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Volume%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setVolume%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20volume%20of%20note%20with%20ID%20%5BID%5D%20to%20%5BVOLUME%5D%25%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VOLUME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getVol%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22volume%20of%20note%20with%20ID%20%5BID%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setAllVolume%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20volume%20for%20all%20IDs%20to%20%5BVOLUME%5D%25%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VOLUME%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%20100%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Pitch%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setPitch%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20pitch%20of%20note%20with%20ID%20%5BID%5D%20to%20%5BPITCH%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PITCH%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getPitch%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22pitch%20of%20note%20with%20ID%20%5BID%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setAllPitch%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20pitch%20for%20all%20notes%20to%20%5BPITCH%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PITCH%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.NUMBER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%200%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Operators%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22isPlaying%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22is%20ID%20%5BID%5D%20playing%3F%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%3A%20Scratch.ArgumentType.STRING%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20defaultValue%3A%201%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22convertPressedKeyToNote%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22pressed%20key%20to%20note%22%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%2F*%20Deprecation%20Marker%20*%2F%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getKeyPressedDuration%22%2C%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22pressed%20key%20duration%22%2C%20hideFromPalette%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22playNote%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22play%20%5BWAVE%5D%20note%20%5BNOTE%5D%20for%20%5BDURATION%5D%20seconds%20with%20ID%20%5BID%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WAVE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22WAVES2%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NOTE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NOTE%2C%20defaultValue%3A%2060%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DURATION%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%200.5%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%201%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22playNoteContinuously%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22play%20%5BWAVE%5D%20note%20%5BNOTE%5D%20continuously%20with%20ID%20%5BID%5D%22%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20true%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20WAVE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22WAVES2%22%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20NOTE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NOTE%2C%20defaultValue%3A%2060%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%201%20%7D%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%2F*%20Marker%20End%20*%2F%0D%0A%20%20%20%20%20%20%20%20%5D%2C%0D%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%2F*%20Deprecation%20Marker%20*%2F%0D%0A%20%20%20%20%20%20%20%20%20%20WAVES2%3A%20waves%2C%0D%0A%20%20%20%20%20%20%20%20%20%20%2F*%20Marker%20End%20*%2F%0D%0A%20%20%20%20%20%20%20%20%20%20WAVES%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20waves%20%7D%0D%0A%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%2F%2F%20Helper%20Funcs%0D%0A%20%20%20%20convertScratchNoteToRealNote(scratchNote)%20%7B%0D%0A%20%20%20%20%20%20const%20octave%20%3D%20Math.floor(scratchNote%20%2F%2012)%20-%201%3B%0D%0A%20%20%20%20%20%20const%20noteName%20%3D%20notes%5BscratchNote%20%25%2012%5D%3B%0D%0A%20%20%20%20%20%20return%20%60%24%7BnoteName%7D%24%7Boctave%7D%60%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20noteToFrequency(note)%20%7B%0D%0A%20%20%20%20%20%20return%20440%20*%20Math.pow(2%2C%20(this.noteToMIDI(note)%20-%2069)%20%2F%2012)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20noteToMIDI(note)%20%7B%0D%0A%20%20%20%20%20%20const%20noteName%20%3D%20note.substring(0%2C%20note.length%20-%201)%3B%0D%0A%20%20%20%20%20%20const%20octave%20%3D%20parseInt(note.charAt(note.length%20-%201))%3B%0D%0A%20%20%20%20%20%20return%20notes.indexOf(noteName)%20%2B%20(octave%20%2B%201)%20*%2012%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20playSound(frequency%2C%20duration%2C%20waveform%2C%20ID)%20%7B%0D%0A%20%20%20%20%20%20const%20oscillator%20%3D%20this.audioContext.createOscillator()%3B%0D%0A%20%20%20%20%20%20const%20gainNode%20%3D%20this.audioContext.createGain()%3B%0D%0A%20%20%20%20%20%20oscillator.type%20%3D%20waves.includes(waveform)%20%3F%20waveform%20%3A%20%22square%22%3B%0D%0A%20%20%20%20%20%20oscillator.frequency.setValueAtTime(frequency%2C%20this.audioContext.currentTime)%3B%0D%0A%20%20%20%20%20%20gainNode.gain.setValueAtTime(%0D%0A%20%20%20%20%20%20%20%20normalVolumeMap%5Bwaveform%5D%20%3F%3F%201%2C%0D%0A%20%20%20%20%20%20%20%20this.audioContext.currentTime%0D%0A%20%20%20%20%20%20)%3B%0D%0A%0D%0A%20%20%20%20%20%20oscillator.connect(gainNode)%3B%0D%0A%20%20%20%20%20%20gainNode.connect(this.gainNode)%3B%0D%0A%20%20%20%20%20%20oscillator.start()%3B%0D%0A%0D%0A%20%20%20%20%20%20this.oscillators.set(ID%2C%20oscillator)%3B%0D%0A%20%20%20%20%20%20this.gainNodes.set(ID%2C%20gainNode)%3B%0D%0A%20%20%20%20%20%20this.playingStatus.set(ID%2C%20true)%3B%0D%0A%20%20%20%20%20%20if%20(duration%20!%3D%3D%20Infinity)%20%7B%0D%0A%20%20%20%20%20%20%20%20setTimeout(()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20this.stopID(%7B%20ID%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%2C%20duration%20*%201000)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20removeOscillator(oscillator)%20%7B%0D%0A%20%20%20%20%20%20const%20index%20%3D%20this.oscillators.indexOf(oscillator)%3B%0D%0A%20%20%20%20%20%20if%20(index%20!%3D%3D%20-1)%20this.oscillators.splice(index%2C%201)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%2F*%20Deprecation%20Marker%20*%2F%0D%0A%20%20%20%20registerKeyEvents()%20%7B%0D%0A%20%20%20%20%20%20document.addEventListener(%22keydown%22%2C%20(event)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(!this.keyPressed)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20this.keyPressed%20%3D%20true%3B%0D%0A%20%20%20%20%20%20%20%20%20%20this.keyPressedTime%20%3D%20this.audioContext.currentTime%3B%0D%0A%20%20%20%20%20%20%20%20%20%20this.convertAndReportNoteFromKeyPressed(event.key)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%20%20document.addEventListener(%22keyup%22%2C%20()%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20this.keyPressed%20%3D%20false%3B%0D%0A%20%20%20%20%20%20%20%20this.keyPressedTime%20%3D%200%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20%2F*%20Marker%20End%20*%2F%0D%0A%0D%0A%20%20%20%20convertAndReportNoteFromKeyPressed(key)%20%7B%0D%0A%20%20%20%20%20%20const%20keysToNotes%20%3D%20%7B%0D%0A%20%20%20%20%20%20%20%20Z%3A%2048%2C%20X%3A%2050%2C%20C%3A%2052%2C%20V%3A%2053%2C%0D%0A%20%20%20%20%20%20%20%20B%3A%2055%2C%20N%3A%2057%2C%20M%3A%2059%2C%20%22%2C%22%3A%2060%2C%0D%0A%20%20%20%20%20%20%20%20A%3A%2049%2C%20S%3A%2051%2C%20D%3A%2053%2C%20F%3A%2054%2C%0D%0A%20%20%20%20%20%20%20%20G%3A%2056%2C%20H%3A%2058%2C%20J%3A%2060%2C%20K%3A%2062%2C%0D%0A%20%20%20%20%20%20%20%20L%3A%2064%2C%20Q%3A%2060%2C%20W%3A%2062%2C%20E%3A%2064%2C%0D%0A%20%20%20%20%20%20%20%20R%3A%2065%2C%20T%3A%2067%2C%20Y%3A%2069%2C%20U%3A%2071%2C%0D%0A%20%20%20%20%20%20%20%20I%3A%2072%2C%20P%3A%2072%2C%201%3A%2062%2C%202%3A%2064%2C%0D%0A%20%20%20%20%20%20%20%203%3A%2065%2C%204%3A%2067%2C%205%3A%2069%2C%206%3A%2071%2C%0D%0A%20%20%20%20%20%20%20%207%3A%2072%2C%208%3A%2074%2C%209%3A%2076%2C%200%3A%20this.currentNote%2C%0D%0A%20%20%20%20%20%20%20%20O%3A%20this.currentNote%0D%0A%20%20%20%20%20%20%7D%3B%0D%0A%20%20%20%20%20%20const%20note%20%3D%20keysToNotes%5Bkey.toUpperCase()%5D%20%7C%7C%200%3B%0D%0A%20%20%20%20%20%20this.currentNote%20%3D%20note%3B%0D%0A%20%20%20%20%20%20return%20note%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20%2F%2F%20Block%20Funcs%0D%0A%20%20%20%20playNoteV2(args)%20%7B%20this.playNote(args)%20%7D%0D%0A%20%20%20%20playNote(%7B%20WAVE%2C%20NOTE%2C%20DURATION%2C%20ID%20%7D)%20%7B%0D%0A%20%20%20%20%20%20this.stopID(%7B%20ID%20%7D)%3B%0D%0A%20%20%20%20%20%20const%20realNote%20%3D%20this.convertScratchNoteToRealNote(Math.round(NOTE))%3B%0D%0A%20%20%20%20%20%20const%20frequency%20%3D%20this.noteToFrequency(realNote)%3B%0D%0A%20%20%20%20%20%20this.playSound(frequency%2C%20DURATION%2C%20WAVE%2C%20ID)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20playNoteContinuouslyV2(args)%20%7B%20this.playNoteContinuously(args)%20%7D%0D%0A%20%20%20%20playNoteContinuously(%7B%20WAVE%2C%20NOTE%2C%20ID%20%7D)%20%7B%0D%0A%20%20%20%20%20%20this.stopID(%7B%20ID%20%7D)%3B%0D%0A%20%20%20%20%20%20const%20realNote%20%3D%20this.convertScratchNoteToRealNote(Math.round(NOTE))%3B%0D%0A%20%20%20%20%20%20const%20frequency%20%3D%20this.noteToFrequency(realNote)%3B%0D%0A%20%20%20%20%20%20this.playingNote%20%3D%20true%3B%0D%0A%20%20%20%20%20%20this.noteStopTime%20%3D%20Infinity%3B%0D%0A%20%20%20%20%20%20this.playSound(frequency%2C%20this.noteStopTime%2C%20WAVE%2C%20ID)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20stopID(%7B%20ID%20%7D)%20%7B%0D%0A%20%20%20%20%20%20const%20oscillator%20%3D%20this.oscillators.get(ID)%3B%0D%0A%20%20%20%20%20%20if%20(oscillator)%20%7B%0D%0A%20%20%20%20%20%20%20%20oscillator.stop()%3B%0D%0A%20%20%20%20%20%20%20%20this.oscillators.delete(ID)%3B%0D%0A%20%20%20%20%20%20%20%20this.playingStatus.set(ID%2C%20false)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20stopNote()%20%7B%0D%0A%20%20%20%20%20%20this.oscillators.forEach((oscillator)%20%3D%3E%20%7B%20oscillator.stop()%20%7D)%3B%0D%0A%20%20%20%20%20%20this.oscillators.clear()%3B%0D%0A%20%20%20%20%20%20this.playingNote%20%3D%20false%3B%0D%0A%20%20%20%20%20%20this.playingStatus.forEach((value%2C%20key)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20this.playingStatus.set(key%2C%20false)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getVol(%7B%20ID%20%7D)%20%7B%0D%0A%20%20%20%20%20%20const%20gainNode%20%3D%20this.gainNodes.get(ID)%3B%0D%0A%20%20%20%20%20%20if%20(gainNode)%20return%20gainNode.gain.value%20*%20100%3B%0D%0A%20%20%20%20%20%20return%20100%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setVolume(%7B%20ID%2C%20VOLUME%20%7D)%20%7B%0D%0A%20%20%20%20%20%20const%20gainNode%20%3D%20this.gainNodes.get(ID)%3B%0D%0A%20%20%20%20%20%20if%20(gainNode)%20%7B%0D%0A%20%20%20%20%20%20%20%20gainNode.gain.setValueAtTime(%0D%0A%20%20%20%20%20%20%20%20%20%20VOLUME%20%2F%20100%2C%20this.audioContext.currentTime%0D%0A%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setAllVolume(%7B%20VOLUME%20%7D)%20%7B%0D%0A%20%20%20%20%20%20let%20gainNode%20%3D%20%22%22%3B%0D%0A%20%20%20%20%20%20this.gainNodes.forEach((value%2C%20key)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20gainNode%20%3D%20this.gainNodes.get(key)%3B%0D%0A%20%20%20%20%20%20%20%20if%20(gainNode)%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20gainNode.gain.setValueAtTime(%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20VOLUME%20%2F%20100%2C%20this.audioContext.currentTime%0D%0A%20%20%20%20%20%20%20%20%20%20)%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setPitch(%7B%20ID%2C%20PITCH%20%7D)%20%7B%0D%0A%20%20%20%20%20%20const%20oscillator%20%3D%20this.oscillators.get(ID)%3B%0D%0A%20%20%20%20%20%20if%20(oscillator)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20pitchFactor%20%3D%20Math.pow(2%2C%20PITCH%20%2F%2012)%3B%0D%0A%20%20%20%20%20%20%20%20const%20newFrequency%20%3D%20440%20*%20pitchFactor%3B%0D%0A%20%20%20%20%20%20%20%20oscillator.frequency.setValueAtTime(newFrequency%2C%20this.audioContext.currentTime)%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20setAllPitch(%7B%20PITCH%20%7D)%20%7B%0D%0A%20%20%20%20%20%20const%20pitchFactor%20%3D%20Math.pow(2%2C%20PITCH%20%2F%2012)%3B%0D%0A%20%20%20%20%20%20this.oscillators.forEach((oscillator%2C%20ID)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20newFrequency%20%3D%20440%20*%20pitchFactor%3B%0D%0A%20%20%20%20%20%20%20%20oscillator.frequency.setValueAtTime(newFrequency%2C%20this.audioContext.currentTime)%3B%0D%0A%20%20%20%20%20%20%7D)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20getPitch(%7B%20ID%20%7D)%20%7B%0D%0A%20%20%20%20%20%20const%20oscillator%20%3D%20this.oscillators.get(ID)%3B%0D%0A%20%20%20%20%20%20if%20(oscillator)%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20currentFrequency%20%3D%20oscillator.frequency.value%3B%0D%0A%20%20%20%20%20%20%20%20const%20pitchFactor%20%3D%20currentFrequency%20%2F%20440%3B%0D%0A%20%20%20%20%20%20%20%20return%20Math.round(12%20*%20Math.log2(pitchFactor))%3B%0D%0A%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%20%20return%200%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20isPlaying(%7B%20ID%20%7D)%20%7B%20return%20this.playingStatus.get(ID)%20!%3D%3D%20undefined%20%26%26%20this.playingStatus.get(ID)%20%7D%0D%0A%0D%0A%20%20%20%20convertPressedKeyToNote()%20%7B%20return%20this.keyPressed%20%3F%20this.currentNote%20%3A%200%20%7D%0D%0A%0D%0A%20%20%20%20%2F*%20Deprecation%20Marker%20*%2F%0D%0A%20%20%20%20getKeyPressedDuration()%20%7B%20return%20this.keyPressed%20%3F%20this.audioContext.currentTime%20-%20this.keyPressedTime%20%3A%200%20%7D%0D%0A%20%20%20%20%2F*%20Marker%20End%20*%2F%0D%0A%20%20%7D%0D%0A%0D%0A%20%20Scratch.extensions.register(new%20SPsoundWaves())%3B%0D%0A%7D)(Scratch)%3B%0D%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20My%20Blocks%2B%0A%2F%2F%20ID%3A%20SPmbpCST%0A%2F%2F%20Description%3A%20Create%20Better%20Custom%20Blocks%0A%2F%2F%20By%3A%20SharkPool%0A%2F%2F%20By%3A%20CST1229%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FCST1229%2F%3E%0A%2F%2F%20By%3A%200znzw%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2F0znzw%2F%3E%0A%2F%2F%20License%3A%20MIT%0A%0A%2F%2F%20Version%20V.1.2.64%0A%0A(function(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20throw%20new%20Error(%22My%20Blocks%2B%20must%20run%20unsandboxed!%22)%3B%0A%0A%20%20const%20menuIconURI%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0Ny45NDgiIGhlaWdodD0iNDcuOTQ4IiB2aWV3Qm94PSIwIDAgNDcuOTQ4IDQ3Ljk0OCI%2BPHBhdGggZD0iTTAgMjMuOTc0QzAgMTAuNzM0IDEwLjczMyAwIDIzLjk3NCAwczIzLjk3NCAxMC43MzMgMjMuOTc0IDIzLjk3NC0xMC43MzMgMjMuOTc0LTIzLjk3NCAyMy45NzRTMCAzNy4yMTUgMCAyMy45NzQiIGZpbGw9IiNjYzUyNjYiLz48cGF0aCBkPSJNMi4yMTEgMjMuOTc0YzAtMTIuMDIgOS43NDQtMjEuNzYzIDIxLjc2My0yMS43NjNzMjEuNzYzIDkuNzQ0IDIxLjc2MyAyMS43NjMtOS43NDQgMjEuNzYzLTIxLjc2MyAyMS43NjNTMi4yMTEgMzUuOTkzIDIuMjExIDIzLjk3NCIgZmlsbD0iI2ZmNjY4MCIvPjxwYXRoIGQ9Ik0zOS4xNTIgMTQuNDU1djE5LjAzOGExLjEyIDEuMTIgMCAwIDEtLjY1IDEuMDE5bC0xNC41NTggNi43MTlhMS4xMiAxLjEyIDAgMCAxLS45NCAwbC0xNC41NTgtNi43MmExLjEyIDEuMTIgMCAwIDEtLjY1LTEuMDE4VjE0LjQ1NGExLjEyIDEuMTIgMCAwIDEgLjY1LTEuMDE5bDE0LjU1OC02LjcxOWExLjEyIDEuMTIgMCAwIDEgLjk0IDBsMTQuNTU4IDYuNzJjLjM5Ny4xODMuNjUxLjU4LjY1IDEuMDE4bS0yNy41NiAwIDExLjg4MiA1LjQ4OCAxMS44ODItNS40ODgtMTEuODgyLTUuNDg3em0tMS41NTYgMTguMzIxIDEyLjMxOCA1LjY4OVYyMS44OWwtMTIuMzE4LTUuNjg5em0yNi44NzYgMFYxNi4yMDFsLTEyLjMxOCA1LjY5djE2LjU3M3oiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNMzIuMzQ2IDM2LjE2OXYtMi42NzhoLTIuNjc4Yy0xLjM2NSAwLTIuNDcyLS45NTMtMi40NzItMi4xMjhzMS4xMDctMi4xMjggMi40NzItMi4xMjhoMi42Nzh2LTIuNjc4YzAtMS4zNjUuOTUzLTIuNDcyIDIuMTI4LTIuNDcyczIuMTI4IDEuMTA3IDIuMTI4IDIuNDcydjIuNjc4aDIuNjc4YzEuMzY1IDAgMi40NzIuOTUyIDIuNDcyIDIuMTI4IDAgMS4xNzUtMS4xMDcgMi4xMjgtMi40NzIgMi4xMjhoLTIuNjc4djIuNjc4YzAgMS4zNjUtLjk1MyAyLjQ3Mi0yLjEyOCAyLjQ3MnMtMi4xMjgtMS4xMDctMi4xMjgtMi40NzJ6IiBmaWxsPSJub25lIiBzdHJva2U9IiNmZjY2ODAiIHN0cm9rZS13aWR0aD0iNCIvPjxwYXRoIGQ9Ik0zMi4zNDYgMzYuMTY5di0yLjY3OGgtMi42NzhjLTEuMzY1IDAtMi40NzItLjk1My0yLjQ3Mi0yLjEyOHMxLjEwNy0yLjEyOSAyLjQ3Mi0yLjEyOWgyLjY3OHYtMi42NzdjMC0xLjM2NS45NTMtMi40NzIgMi4xMjgtMi40NzJzMi4xMjggMS4xMDcgMi4xMjggMi40NzJ2Mi42NzdoMi42NzhjMS4zNjUgMCAyLjQ3Mi45NTMgMi40NzIgMi4xMjkgMCAxLjE3NS0xLjEwNyAyLjEyOC0yLjQ3MiAyLjEyOGgtMi42Nzh2Mi42NzhjMCAxLjM2NS0uOTUyIDIuNDcyLTIuMTI4IDIuNDcyLTEuMTc1IDAtMi4xMjgtMS4xMDctMi4xMjgtMi40NzIiIGZpbGw9IiNmZmYiLz48L3N2Zz4%3D%22%3B%0A%0A%20%20const%20guiURIs%20%3D%20(name)%20%3D%3E%20%7B%0A%20%20%20%20const%20start%20%3D%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI%22%3B%0A%20%20%20%20return%20start%20%2B%20%7B%0A%20%20%20%20%20%20%22dropdwn%22%3A%20%221NyIgaGVpZ2h0PSI0OSIgdmlld0JveD0iMCAwIDU3IDQ5Ij48ZyBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiPjxwYXRoIGQ9Ik00LjUgNDguNWE0IDQgMCAwIDEtNC00di00MGE0IDQgMCAwIDEgNC00aDQ4YTQgNCAwIDAgMSA0IDR2NDBhNCA0IDAgMCAxLTQgNHoiIGZpbGw9IiNmZjY2ODAiIHN0cm9rZT0iI2YzNSIvPjxwYXRoIGQ9Ik0xMi4xMjMgMzkuODNjLTEuNTA3IDAtMi43My0xLjE0NC0yLjczLTIuNTU1di0yNS41NWMwLTEuNDExIDEuMjIzLTIuNTU1IDIuNzMtMi41NTVoMzIuNzU0YzEuNTA3IDAgMi43MyAxLjE0NCAyLjczIDIuNTU1djI1LjU1YzAgMS40MTEtMS4yMjMgMi41NTUtMi43MyAyLjU1NXoiIGZpbGw9IiNmZjRkNmEiIHN0cm9rZT0iI2YzNSIvPjxwYXRoIGQ9Ik0zNi4wODQgMjIuMTY3YTIuODggMi44OCAwIDAgMS0uODQ4IDIuMDUzbC00LjY3NyA0LjY3N2EyLjkyNCAyLjkyNCAwIDAgMS00LjExOCAwbC00LjY2NS00LjY3N2EyLjkgMi45IDAgMCAxLS44Ni0yLjA1MyAyLjk2IDIuOTYgMCAwIDEgLjg0OC0yLjA2NGMuMzQ2LS4yODcuODU5LS44NDggNi43NDItLjg0OHM2LjQzMi41NSA2LjczLjg0OGMuNTQ2LjU0OC44NSAxLjI5Ljg0OCAyLjA2NCIgZmlsbD0iI2YzNSIvPjxwYXRoIGQ9Ik0yOC41MDYgMjguNTUxYTEuNyAxLjcgMCAwIDEtMS4xOTMtLjVsLTQuNzAyLTQuNjc5YTEuNzIgMS43MiAwIDAgMSAwLTIuMzg2Yy42NjgtLjY2OSAxMS4xMS0uNjY5IDExLjc3OCAwIC42NDMuNjY1LjY0MyAxLjcyIDAgMi4zODZsLTQuNjc4IDQuNjc4Yy0uMzIuMzItLjc1My41LTEuMjA1LjUwMSIgZmlsbD0iI2ZmZiIvPjwvZz48L3N2Zz4%3D%22%2C%0A%20%20%20%20%20%20%22colorPkr%22%3A%20%22yMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iLTIgLTMgMjAgMjAiPjxwYXRoIGQ9Ik0xMS4wNjQgNS41NjIgOS40MDkgMy45MDhsLTMuOTQgMy45MmMtLjEyLjEzNy0uMjA1LjI3NC0uMjQuNDEtLjE4Ny44NTItLjgxOCAxLjUtMS41MTcgMS43MjJhMSAxIDAgMCAwLS41OC41MTFsLS44MzYgMS43OWMtLjA1MS4xMi0uMDUxLjE4OC0uMDUxLjIwNWwuMjczLjI1NWEuNi42IDAgMCAwIC4xODctLjA1bDEuNzc0LS44MzZjLjI0LS4xMi40Ni0uMzU4LjUzLS41OC4yMDQtLjY5OS44Ny0xLjMzIDEuNTY4LTEuNDgzLjI3My0uMDY4LjQyNy0uMTUzLjU0Ni0uMjl6bTIuMDMtMS43OS4xMzYuMTM2LjU4LjU4YS44ODQuODg0IDAgMCAxIDAgMS4yNDRsLS42NjUuNjQ4YS44NDcuODQ3IDAgMCAxLTEuMTYuMDY4bC0zLjk1OCAzLjkzOGEyLjA3IDIuMDcgMCAwIDEtMS4wMDYuNTk3Yy0uNDEuMDg1LS43MTYuMzc1LS43ODUuNjQ3LS4xNy41NjMtLjY0OCAxLjA5MS0xLjIxIDEuMzY0bC0xLjc5Mi44MzZjLS4yMzkuMTAyLS40OTUuMTctLjcxNi4xN2ExLjIgMS4yIDAgMCAxLS44Ny0uMzRsLS4zNDEtLjM0MmMtLjM3Ni0uMzkyLS40NDQtMS4wMDYtLjE3MS0xLjYwMmwuODM2LTEuNzczYy4yNTYtLjU2My44MDItMS4wNCAxLjM2NC0xLjIxLjI3My0uMDg2LjU2My0uMzc2LjYxNS0uNjMxLjExOS0uNTEyLjMyNC0uODcuNjE0LTEuMTc3bDMuOTU3LTMuOTM3Yy0uMjktLjM0MS0uMjczLS44MzYuMDUxLTEuMTc3bC42NjUtLjY0OGEuODg2Ljg4NiAwIDAgMSAxLjI0NiAwbC41NDYuNTQ2LjE3LjE3TDEyLjY4NC4zOTZhMS4zMyAxLjMzIDAgMCAxIDEuODk0IDBjLjI1Ni4yNTYuMzkyLjU5Ny4zOTIuOTM4cy0uMTM2LjY5OS0uMzkyLjk1NXoiIGZpbGw9Im5vbmUiIHN0cm9rZS1vcGFjaXR5PSIuMjUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIzIi8%2BPHBhdGggZD0iTTExLjA2NCA1LjU2MiA5LjQwOSAzLjkwOGwtMy45NCAzLjkyYy0uMTIuMTM3LS4yMDUuMjc0LS4yNC40MS0uMTg3Ljg1Mi0uODE4IDEuNS0xLjUxNyAxLjcyMmExIDEgMCAwIDAtLjU4LjUxMWwtLjgzNiAxLjc5Yy0uMDUxLjEyLS4wNTEuMTg4LS4wNTEuMjA1bC4yNzMuMjU1YS42LjYgMCAwIDAgLjE4Ny0uMDVsMS43NzQtLjgzNmMuMjQtLjEyLjQ2LS4zNTguNTMtLjU4LjIwNC0uNjk5Ljg3LTEuMzMgMS41NjktMS40ODMuMjcyLS4wNjguNDI2LS4xNTMuNTQ1LS4yOXptMi4wMy0xLjc5LjEzNi4xMzYuNTguNThhLjg4NC44ODQgMCAwIDEgMCAxLjI0NGwtLjY2NS42NDhhLjg0Ny44NDcgMCAwIDEtMS4xNi4wNjhsLTMuOTU4IDMuOTM4YTIuMDcgMi4wNyAwIDAgMS0xLjAwNi41OTdjLS40MS4wODUtLjcxNi4zNzUtLjc4NS42NDctLjE3LjU2My0uNjQ4IDEuMDkxLTEuMjEgMS4zNjRsLTEuNzkyLjgzNmMtLjIzOS4xMDItLjQ5NS4xNy0uNzE2LjE3YTEuMiAxLjIgMCAwIDEtLjg3LS4zNDFsLS4zNDEtLjM0Yy0uMzc2LS4zOTMtLjQ0NC0xLjAwNy0uMTcxLTEuNjAzbC44MzYtMS43NzNjLjI1Ni0uNTYzLjgwMi0xLjA0IDEuMzY0LTEuMjEuMjczLS4wODYuNTYzLS4zNzYuNjE1LS42MzEuMTE5LS41MTIuMzI0LS44Ny42MTQtMS4xNzdsMy45NTctMy45MzhjLS4yOS0uMzQtLjI3My0uODM1LjA1MS0xLjE3NmwuNjY2LS42NDhhLjg4Ni44ODYgMCAwIDEgMS4yNDUgMGwuNTQ2LjU0Ni4xNy4xN0wxMi42ODQuMzk2YTEuMzMgMS4zMyAwIDAgMSAxLjg5NCAwYy4yNTYuMjU2LjM5Mi41OTcuMzkyLjkzOHMtLjEzNi42OTktLjM5Mi45NTV6IiBmaWxsPSIjZmZmIi8%2BPC9zdmc%2B%22%2C%0A%20%20%20%20%20%20%22branchStart%22%3A%20%22yMC4zOTkiIGhlaWdodD0iMjEuNDIyIiB2aWV3Qm94PSIwIDAgMjAuMzk5IDIxLjQyMiI%2BPHBhdGggZD0iTTEzLjY1IDE2Ljc0NmMtLjY1NS0uMjgtMS0uOS0xLTEuNXYtMS42Yy0xLjMtLjEtMi41LS41LTMuNi0xLjFsLS4xNDYtLjA3OGMuMDU0LjY0Ni4wODcgMS4wOC4wOTYgMS4yMDRoMS42Yy42IDAgMS4yMTguMzQgMS41IDFzLjA5NiAxLjE4Ni0uMyAxLjhjLS4wNjMuMDk4LTQuNSA0LjUtNC41IDQuNS0uNy42LTEuNy42LTIuNCAwbC00LjQtNC40Yy0uMy0uMy0uNS0uOC0uNS0xLjIgMC0xIC44LTEuNyAxLjctMS43aDEuNWMwLS4xODMuMjU4LTMuOTgzLjQ4LTcuNDE2LjEyMy0xLjkwOC4yMzUtMy43NzIuMjg1LTQuNzY5LjAxMy0uMDY2LjAzLS4yMDEuMDUyLS4yNjQuMTY0LS43MDYuODIyLTEuMjEgMS42Ny0xLjIxLjg4LS4xMjIgMS44ODEuNjE0IDEuOSAxLjY0cS4wMjIuMDQyLjAyOC4wNjVjLjE2NS44NTYuMzIgMS44NTMuNDYyIDIuOS4yNy41MDcuNjQ4Ljk4My45ODEgMS40MjguOCAxLjEgMi4xOTEgMS44IDMuNTkxIDEuOHYtMS41YzAtLjkuNy0xLjcgMS43LTEuNy40IDAgLjkuMiAxLjIuNWw0LjQgNC40Yy42LjcuNiAxLjcgMCAyLjRsLTQuNSA0LjVzLTEuMTQ1LjU4LTEuOC4zIiBmaWxsLW9wYWNpdHk9Ii4yIi8%2BPHBhdGggZD0iTTQuNjY5IDIuMDc5QzQuNTg1IDEuNDgyIDUuMDk3LjkwNSA1LjgwNy45MDZjLjU5Ni0uMDg0IDEuMjc2LjQyOCAxLjI3NSAxLjEzOCAwIC4wMTMuMTE0IDEuMDY3LjI2IDIuNTgzYTcgNyAwIDAgMCAuOTI1IDEuNzcxYy42LjkgMS41OTIgMS42IDIuNjkyIDIgLjkuMyAxLjguNCAyLjguMnYtMi40YzAtLjQuMy0uNy43LS43LjIgMCAuMy4xLjQuMmw0LjQgNC40Yy4zLjMuMy43IDAgLjlsLTQuNCA0LjRjLS4zLjMtLjQ1OC40MzEtLjgzMi4zNjlzLS4zNjgtLjU2OS0uMzY4LS41Njl2LTIuNmMtMS41IDAtMi45LS4zLTQuMi0xYTguMyA4LjMgMCAwIDEtMS41Ny0xLjAyNGMuMTUxIDIuMTg4LjI1NCAzLjg4Mi4yNTQgNC4xNDhoMi42cy40NjIuMDc2LjUuMyAwIC42LS4zLjlsLTQuNCA0LjRjLS4yLjMtLjYuMy0uOSAwbC00LjQtNC40Yy0uMS0uMS0uMi0uMi0uMi0uNCAwLS40LjMtLjcuNy0uN2gyLjM5OGMuMDU0LTEuNTk3LjE0NS00LjIyLjIzOS02LjY2NC4wMi0uNTkuMDQxLTEuMTg2LjA2My0xLjc3NnEuMDAzLS4wOTkuMDE1LS4xOTJjLjA1LTEuMTgzLjIxLTQuMTExLjIxLTQuMTExIiBmaWxsPSIjZmZmIi8%2BPC9zdmc%2B%22%2C%0A%20%20%20%20%20%20%22addImg%22%3A%20%22yMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDIwIDIwIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIHN0cm9rZT0iI0ZGRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2Utd2lkdGg9IjEuNSI%2BPHBhdGggZD0ibTE2LjE0NCAxMi43OC0yLjQ1OC0yLjUzMWEuOTcuOTcgMCAwIDAtMS4zNDctLjA2TDkuMjk1IDEyLjY2Yy0uNDY5LjM2Mi0xLjExMy4zMDItMS40NjQtLjE4bC0uMjkzLS4zNjNjLS4zNS0uNDgyLTEuMDUzLS41NDMtMS40NjMtLjE4TDMuODUgMTMuODA1aDBjMCAuODUyLjY5IDEuNTQzIDEuNTQzIDEuNTQzaDguODFhMiAyIDAgMCAwIDItMnYtLjU2OHoiIGZpbGw9IiNGRkYiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48cGF0aCBkPSJNMTYuMjAzIDguMTh2NS4yOTRjMCAuOTc0LS43OSAxLjc2NC0xLjc2NSAxLjc2NEg1LjYxNWMtLjk3NSAwLTEuNzY1LS43OS0xLjc2NS0xLjc2NHYtNy4wNmMwLS45NzQuNzktMS43NjQgMS43NjUtMS43NjRoNy4wNTkiLz48L2c%2BPHBhdGggZD0iTTE2Ljg5NyAzLjk4NWguNjYyYS42NjIuNjYyIDAgMSAxIDAgMS4zMjRoLS42NjJ2LjY2MmEuNjYyLjY2MiAwIDEgMS0xLjMyMyAwdi0uNjYyaC0uNjYyYS42NjIuNjYyIDAgMCAxIDAtMS4zMjRoLjY2MnYtLjY2MWEuNjYyLjY2MiAwIDAgMSAxLjMyMyAweiIgZmlsbD0iI0ZGRiIvPjxwYXRoIHN0cm9rZT0iI0ZGRiIgc3Ryb2tlLXdpZHRoPSIuMiIgZD0iTTE2Ljk0NyAzLjkzNWguNjEyYS43MTIuNzEyIDAgMSAxIDAgMS40MjRsLS42MTItLjA1di42NjJhLjcxMi43MTIgMCAxIDEtMS40MjMgMGwuMDUtLjYxMmgtLjY2MmEuNzEyLjcxMiAwIDEgMSAwLTEuNDI0bC42MTIuMDV2LS42NjFhLjcxMi43MTIgMCAxIDEgMS40MjMgMHoiLz48L2c%2BPC9zdmc%2B%22%0A%20%20%20%20%7D%5Bname%5D%3B%0A%20%20%7D%3B%0A%20%20const%20inputURIs%20%3D%20(name)%20%3D%3E%20%7B%0A%20%20%20%20let%20start%20%3D%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ij%22%3B%0A%20%20%20%20if%20(name%20%3D%3D%3D%20%22brc%22)%20return%20start%20%2B%20%22IxMS41IDE1NS41IDU3IDQ5Ij48cGF0aCBkPSJNMjE2IDIwNGE0IDQgMCAwIDEtNC00di00MGE0IDQgMCAwIDEgNC00bDQ4LjY1MS4wNTNBNCA0IDAgMCAxIDI2OCAxNjB2OC4xMjhjMCAxLjMtMi4xODQgMy4zODMtMy44NzcgMy4zODNoLTEzLjk4MmMtMS4xMDUgMC0xLjY1Ny41NTItMi4yMSAxLjEwNWwtMi4yMDkgMi4yMDljLS41NTIuNTUyLTEuMTA1IDEuMTA1LTIuMjEgMS4xMDVoLTYuNjI3Yy0xLjEwNSAwLTEuNjU3LS41NTMtMi4yMS0xLjEwNWwtMi4yMDktMi4yMWMtLjU1Mi0uNTUyLTEuMTA1LTEuMTA0LTIuMjEtMS4xMDRoLTQuNDE4Yy0xLjIyIDAtMi4yMS45OS0yLjIxIDIuMjF2MTIuNTU0YzAgMS4yMi45OSAyLjIwOCAyLjIxIDIuMjA4aDQuNDE5YzEuMTA0IDAgMS42NTcuNTUzIDIuMjEgMS4xMDVsMi4yMDggMi4yMWMuNTUzLjU1MiAxLjEwNSAxLjEwNCAyLjIxIDEuMTA0aDYuNjI4YzEuMTA0IDAgMS42NTctLjU1MiAyLjIwOS0xLjEwNWwyLjIxLTIuMjA5Yy41NTItLjU1MiAxLjEwNC0xLjEwNSAyLjIwOS0xLjEwNWgxMy45ODJjMS42OTMgMCAzLjg3NyAyLjEwNCAzLjg3NyAzLjUwMlYyMDBhNCA0IDAgMCAxLTQgNHoiIHN0eWxlPSJmaWxsOiNmZjY2ODA7c3Ryb2tlOiNmMzUiLz48L3N2Zz4%3D%22%3B%0A%20%20%20%20else%20if%20(name%20%3D%3D%3D%20%22img%22)%20return%20start%20%2B%20%22AgMCA1NyA0OSI%2BPHBhdGggZD0iTTQuNSA0OC41YTQgNCAwIDAgMS00LTR2LTQwYTQgNCAwIDAgMSA0LTRoNDhhNCA0IDAgMCAxIDQgNHY0MGE0IDQgMCAwIDEtNCA0eiIgZmlsbD0iI2ZmNjY4MCIgc3Ryb2tlPSIjZjM1Ii8%2BPHBhdGggZD0iTTM5LjMyIDE2LjM0MnYxMC40MjRjMCAuNDUzLS4xMTMuNzkzLS40NTMgMS4wMi0zLjE3MiAyLjYwNi03LjgxOCAyLjYwNi0xMS4xMDMgMGE2LjE1IDYuMTUgMCAwIDAtMy44NTMtMS4zNmMtMS40NzMuMTEzLTIuNzE5LjY4LTMuODUyIDEuNDczdjcuMjUxYzAgLjU2Ny0uNTY3IDEuMTMzLTEuMTMzIDEuMTMzaC0uMTEzYy0uNTY3IDAtMS4xMzMtLjU2Ni0xLjEzMy0xLjEzM3YtMjEuM2MwLS42OC41NjYtMS4xMzQgMS4xMzMtMS4xMzQuNTY2IDAgMS4xMzMuNDU0IDEuMTMzIDEuMTM0di40NTNjMy4wNTktMS40NzMgNi43OTgtMS4wMiA5LjQwNCAxLjEzM2E2LjE0IDYuMTQgMCAwIDAgNy43MDQgMGMuMzQtLjM0LjkwNy0uNDUzIDEuMzYtLjIyNy41NjYuMTEzLjkwNi41NjcuOTA2IDEuMTMzbS0xLjEzMyAwLS4xMTMtLjExM2gtLjIyN2MtMi43MTkgMi4xNTMtNi40NTggMi4xNTMtOS4xNzcgMC0yLjQ5My0xLjkyNi01Ljg5Mi0yLjI2Ni04LjcyNC0uNjh2MTAuOTljMS4yNDYtLjY4IDIuNDkyLTEuMTMzIDMuODUyLTEuMjQ2IDEuNyAwIDMuMjg2LjU2NyA0LjUzMiAxLjU4NmE3LjY4NSA3LjY4NSAwIDAgMCA5Ljc0NC0uMTEzeiIgZmlsbD0iIzQ1OTkzZCIvPjxwYXRoIGQ9Im0zOC4xODcgMTYuNDU1LS4xMTMgMTAuMzExdi4xMTNjLTIuODMyIDIuMjY2LTYuOTExIDIuMjY2LTkuNzQ0IDAtMS4yNDYtMS4wMi0yLjgzMy0xLjU4Ni00LjUzMi0xLjU4Ni0xLjM2LjExMy0yLjYwNi41NjctMy44NTIgMS4yNDZ2LTEwLjk5YzIuODMyLTEuNTg2IDYuMjMxLTEuMjQ2IDguNzI0LjY4IDIuNzIgMi4xNTMgNi40NTggMi4xNTMgOS4xNzcgMGguMjI3YzAgLjExMy4xMTMuMTEzLjExMy4yMjYiIGZpbGw9IiM0Y2JmNTYiLz48L3N2Zz4%3D%22%3B%0A%0A%20%20%20%20start%20%2B%3D%20%22AgMCA1NyA0OSI%2BPHJlY3QgeD0iLjUiIHk9Ii41IiB3aWR0aD0iNTYiIGhlaWdodD0iNDgiIHJ4PSI0IiByeT0iNCIgc3R5bGU9ImZpbGw6I2ZmNjY4MDtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2U6I2YzNSIvPjxyZWN0IHg9IjguNSIgeT0iOC41IiB3aWR0aD0iNDAiIGhlaWdodD0iMzIiIHJ4PSIxNiIgcnk9IjE2IiBzdHlsZT0ic3Ryb2tlOiNm%22%3B%0A%20%20%20%20return%20start%20%2B%20%7B%0A%20%20%20%20%20%20%22norm%22%3A%20%22MzU7ZmlsbDojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIvPjx0ZXh0IHN0eWxlPSJmb250LXNpemU6MTJweDtmaWxsOiM2ZTc0ODg7Zm9udC1mYW1pbHk6SGVsdmV0aWNhTmV1ZS1Cb2xkLCBIZWx2ZXRpY2EgTmV1ZSwgc2Fucy1zZXJpZjtmb250LXdlaWdodDo3MDA7bGV0dGVyLXNwYWNpbmc6MGVtOyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTcuNSAyOSkiPnRleHQ8L3RleHQ%2BPC9zdmc%2B%22%2C%0A%20%20%20%20%20%20%22num%22%3A%20%22MzU7ZmlsbDojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIvPjx0ZXh0IHN0eWxlPSJmb250LXNpemU6MTJweDtmaWxsOiM2ZTc0ODg7Zm9udC1mYW1pbHk6SGVsdmV0aWNhTmV1ZS1Cb2xkLEhlbHZldGljYSBOZXVlLHNhbnMtc2VyaWY7Zm9udC13ZWlnaHQ6NzAwO2xldHRlci1zcGFjaW5nOjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI1IDI5KSI%2BMDwvdGV4dD48L3N2Zz4%3D%22%2C%0A%20%20%20%20%20%20%22col%22%3A%20%22ZmY7ZmlsbDojMGYwO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIvPjwvc3ZnPg%3D%3D%22%2C%0A%20%20%20%20%20%20%22ang%22%3A%20%22ZmY7ZmlsbDojNDQ4OGU2O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIvPjxwYXRoIGQ9Ik0xNi4xNTQgMjQuNWMwLTYuNzggNS40OTYtMTIuMjc2IDEyLjI3Ni0xMi4yNzZTNDAuNzA1IDE3LjcyIDQwLjcwNSAyNC41IDM1LjIxIDM2Ljc3NiAyOC40MyAzNi43NzYgMTYuMTU0IDMxLjI4IDE2LjE1NCAyNC41eiIgZmlsbD0iIzQyODBkNyIgc3Ryb2tlPSIjMzM3M2NjIiBzdHJva2Utd2lkdGg9Ii41Ii8%2BPHBhdGggZD0iTTI4LjQzIDI0LjVWMTIuNTA0YzYuNjI1IDAgMTEuOTk2IDUuMzcgMTEuOTk2IDExLjk5NnoiIGZpbGwtb3BhY2l0eT0iLjIiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNMjguNDMgMjQuNWgxMi4yNzUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8%2BPHBhdGggZD0iTTI4LjQzIDI0LjVWMTIuNDQ4IiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iLjUiLz48cGF0aCBkPSJNMzcuMzEgMjQuNWgxLjU2N20tLjM1NiAyLjcwNC0xLjUxMy0uNDA2bS0uODg4IDIuMTQyIDEuMzU4Ljc4NE0zNC43MSAzMC43OGwxLjEwNyAxLjEwN20tMi45NDcuMzAzLjc4NCAxLjM1OG0tMi45MjYtLjQ3LjQwNiAxLjUxM20tMi43MDQuMzU2VjMzLjM4bS0yLjI5OC0uMzAyLS40MDYgMS41MTNtLTIuNTItMS4wNDMuNzg0LTEuMzU4bS0xLjg0LTEuNDEtMS4xMDcgMS4xMDdtLS4zMDMtMi45NDctMS4zNTguNzg0bS40Ny0yLjkyNi0xLjUxMy40MDZNMTkuNTUgMjQuNWgtMS41NjdtMS44NjktMi4yOTgtMS41MTMtLjQwNm0xLjA0My0yLjUyIDEuMzU3Ljc4NG0xLjQxMS0xLjg0LTEuMTA3LTEuMTA3bTIuOTQ3LS4zMDMtLjc4NC0xLjM1OG0yLjkyNi40Ny0uNDA2LTEuNTEzbTIuNzA0IDEuMjExdi0xLjU2N20yLjcwNC4zNTYtLjQwNiAxLjUxM20yLjkyNi0uNDctLjc4NCAxLjM1OG0xLjg0IDEuNDEgMS4xMDctMS4xMDdtMS42NjEgMi4xNjMtMS4zNTguNzg0bS44ODggMi4xNDIgMS41MTMtLjQwNiIgc3Ryb2tlLW9wYWNpdHk9Ii41IiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iLjI1Ii8%2BPHBhdGggZD0iTTI3LjkwOCAyNC41YS41MjIuNTIyIDAgMSAxIDEuMDQ0IDAgLjUyMi41MjIgMCAwIDEtMS4wNDQgMHoiIGZpbGw9IiNmZmYiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIuNSIvPjxwYXRoIGQ9Ik0zOC41NTUgMjQuNWEyLjYxMiAyLjYxMiAwIDEgMSA1LjIyMyAwIDIuNjEyIDIuNjEyIDAgMCAxLTUuMjIzIDB6IiBmaWxsPSIjZmZmIiBzdHJva2Utb3BhY2l0eT0iLjI1IiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMiIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMTEuNSAtMTU1LjUpIiBmaWxsPSIjNGM5N2ZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBkPSJNNDEuMTcxIDIzLjcxNWMwLS4xNDQuMDkzLS4xOS4yMS0uMTAzbDEgLjc0OWMuMTE2LjA4Ni4xMTcuMjI0LS4wMDMuMzFsLS45OTQuNzJjLS4xMTguMDg0LS4yMTMuMDM1LS4yMTMtLjEwN3YtLjQzNmwtMS4xNzgtLjE5NmEuMTYuMTYgMCAwIDEtLjEyOC0uMTUyYzAtLjA3My4wNi0uMTQuMTI4LS4xNTJsMS4xNzgtLjE5N3oiIGZpbGw9IiM0Yzk3ZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg%3D%3D%22%2C%0A%20%20%20%20%20%20%22note%22%3A%20%22MzU7ZmlsbDojZmZmIi8%2BPHBhdGggZD0iTTM1Ljc0IDI4LjMwNGMuMjk2IDEuNDc5LTEuMDggMi42NzMtMy4wNzMgMi42NzMtMS45ODkgMC0zLjgzNi0xLjE5NC00LjEyNy0yLjY3My0uMjk3LTEuNDggMS4wNzgtMi42NzggMy4wNzItMi42NzguNDE5IDAgLjgzLjA1NCAxLjIyNC4xNTEuMjE5LjA1Ni40MTIuMTE3LjYwNy4xOTYuNTY0LS4wMTMtLjA2Ny0xLjQ4Ni0xLjE4OC03LjkyLTEuMzgyLTcuOTY4IDEuOTgxLTEuMjEyIDUuNjc4LTEuNzgzIDMuNjk3LS41NzMuMDUgMy4xMjEtMi4zNjQgMi40OS0yLjQxMi0uNjQtMy4wMTEtNC42MzMuMTcgOS41NDR6bS0xMS4wMDggMy44OGMuMjkgMS40OC0xLjA4NSAyLjY3OS0zLjA3MSAyLjY3OS0xLjk4OCAwLTMuODM1LTEuMi00LjEzMi0yLjY4LS4yOS0xLjQ3OCAxLjA4NC0yLjY3NyAzLjA3Ni0yLjY3Ny42NSAwIDEuMjguMTI3IDEuODUuMzUyLjUzMi0uMDM2LS4wOTgtMS41NC0xLjIwNy03LjkyLTEuMzgtNy45NjggMS45ODItMS4yMTEgNS42NzYtMS43ODMgMy42OTYtLjU3OS4wNSAzLjEyMi0yLjM2MiAyLjQ4My0yLjQxMi0uNjQtMy4wMTItNC42MzIuMTcgOS41NDV6IiBmaWxsPSIjNmU3NDg4Ii8%2BPC9zdmc%2B%22%2C%0A%20%20%20%20%20%20%22mat%22%3A%20%22MzU7ZmlsbDojMGRhNTdhIi8%2BPHBhdGggZD0iTTE3LjUgMTYuNWExIDEgMCAwIDEtMS0xdi0yYTEgMSAwIDAgMSAxLTFoMmExIDEgMCAwIDEgMSAxdjJhMSAxIDAgMCAxLTEgMXptNSAwYTEgMSAwIDAgMS0xLTF2LTJhMSAxIDAgMCAxIDEtMWgyYTEgMSAwIDAgMSAxIDF2MmExIDEgMCAwIDEtMSAxeiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0yNy41IDE2LjVhMSAxIDAgMCAxLTEtMXYtMmExIDEgMCAwIDEgMS0xaDJhMSAxIDAgMCAxIDEgMXYyYTEgMSAwIDAgMS0xIDF6IiBmaWxsPSIjMGZiZDhjIi8%2BPHBhdGggZD0iTTMyLjUgMTYuNWExIDEgMCAwIDEtMS0xdi0yYTEgMSAwIDAgMSAxLTFoMmExIDEgMCAwIDEgMSAxdjJhMSAxIDAgMCAxLTEgMXptNSAwYTEgMSAwIDAgMS0xLTF2LTJhMSAxIDAgMCAxIDEtMWgyYTEgMSAwIDAgMSAxIDF2MmExIDEgMCAwIDEtMSAxem0tMjAgNWExIDEgMCAwIDEtMS0xdi0yYTEgMSAwIDAgMSAxLTFoMmExIDEgMCAwIDEgMSAxdjJhMSAxIDAgMCAxLTEgMXptNSAwYTEgMSAwIDAgMS0xLTF2LTJhMSAxIDAgMCAxIDEtMWgyYTEgMSAwIDAgMSAxIDF2MmExIDEgMCAwIDEtMSAxem01IDBhMSAxIDAgMCAxLTEtMXYtMmExIDEgMCAwIDEgMS0xaDJhMSAxIDAgMCAxIDEgMXYyYTEgMSAwIDAgMS0xIDF6bTUgMGExIDEgMCAwIDEtMS0xdi0yYTEgMSAwIDAgMSAxLTFoMmExIDEgMCAwIDEgMSAxdjJhMSAxIDAgMCAxLTEgMXptNSAwYTEgMSAwIDAgMS0xLTF2LTJhMSAxIDAgMCAxIDEtMWgyYTEgMSAwIDAgMSAxIDF2MmExIDEgMCAwIDEtMSAxem0tMjAgNWExIDEgMCAwIDEtMS0xdi0yYTEgMSAwIDAgMSAxLTFoMmExIDEgMCAwIDEgMSAxdjJhMSAxIDAgMCAxLTEgMXoiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNMjIuNSAyNi41YTEgMSAwIDAgMS0xLTF2LTJhMSAxIDAgMCAxIDEtMWgyYTEgMSAwIDAgMSAxIDF2MmExIDEgMCAwIDEtMSAxeiIgZmlsbD0iIzBmYmQ4YyIvPjxwYXRoIGQ9Ik0yNy41IDI2LjVhMSAxIDAgMCAxLTEtMXYtMmExIDEgMCAwIDEgMS0xaDJhMSAxIDAgMCAxIDEgMXYyYTEgMSAwIDAgMS0xIDF6IiBmaWxsPSIjZmZmIi8%2BPHBhdGggZD0iTTMyLjUgMjYuNWExIDEgMCAwIDEtMS0xdi0yYTEgMSAwIDAgMSAxLTFoMmExIDEgMCAwIDEgMSAxdjJhMSAxIDAgMCAxLTEgMXoiIGZpbGw9IiMwZmJkOGMiLz48cGF0aCBkPSJNMzcuNSAyNi41YTEgMSAwIDAgMS0xLTF2LTJhMSAxIDAgMCAxIDEtMWgyYTEgMSAwIDAgMSAxIDF2MmExIDEgMCAwIDEtMSAxem0tMjAgNWExIDEgMCAwIDEtMS0xdi0yYTEgMSAwIDAgMSAxLTFoMmExIDEgMCAwIDEgMSAxdjJhMSAxIDAgMCAxLTEgMXoiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNMjIuNSAzMS41YTEgMSAwIDAgMS0xLTF2LTJhMSAxIDAgMCAxIDEtMWgyYTEgMSAwIDAgMSAxIDF2MmExIDEgMCAwIDEtMSAxem01IDBhMSAxIDAgMCAxLTEtMXYtMmExIDEgMCAwIDEgMS0xaDJhMSAxIDAgMCAxIDEgMXYyYTEgMSAwIDAgMS0xIDF6bTUgMGExIDEgMCAwIDEtMS0xdi0yYTEgMSAwIDAgMSAxLTFoMmExIDEgMCAwIDEgMSAxdjJhMSAxIDAgMCAxLTEgMXoiIGZpbGw9IiMwZmJkOGMiLz48cGF0aCBkPSJNMzcuNSAzMS41YTEgMSAwIDAgMS0xLTF2LTJhMSAxIDAgMCAxIDEtMWgyYTEgMSAwIDAgMSAxIDF2MmExIDEgMCAwIDEtMSAxem0tMjAgNWExIDEgMCAwIDEtMS0xdi0yYTEgMSAwIDAgMSAxLTFoMmExIDEgMCAwIDEgMSAxdjJhMSAxIDAgMCAxLTEgMXptNSAwYTEgMSAwIDAgMS0xLTF2LTJhMSAxIDAgMCAxIDEtMWgyYTEgMSAwIDAgMSAxIDF2MmExIDEgMCAwIDEtMSAxeiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0yNy41IDM2LjVhMSAxIDAgMCAxLTEtMXYtMmExIDEgMCAwIDEgMS0xaDJhMSAxIDAgMCAxIDEgMXYyYTEgMSAwIDAgMS0xIDF6IiBmaWxsPSIjMGZiZDhjIi8%2BPHBhdGggZD0iTTMyLjUgMzYuNWExIDEgMCAwIDEtMS0xdi0yYTEgMSAwIDAgMSAxLTFoMmExIDEgMCAwIDEgMSAxdjJhMSAxIDAgMCAxLTEgMXptNSAwYTEgMSAwIDAgMS0xLTF2LTJhMSAxIDAgMCAxIDEtMWgyYTEgMSAwIDAgMSAxIDF2MmExIDEgMCAwIDEtMSAxeiIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg%3D%3D%22%2C%0A%20%20%20%20%20%20%22emp%22%3A%20%22MzU7ZmlsbDojZmY0ZDZhO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZCIvPjwvc3ZnPg%3D%3D%22%0A%20%20%20%20%7D%5Bname%5D%3B%0A%20%20%7D%3B%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0A%20%20const%20isPM%20%3D%20Scratch.extensions.isPenguinMod%3B%0A%0A%20%20const%20TEMP_BLOCK_OPCODE%20%3D%20%22SPmbpCST_%24-%2C.___SPmbpCST_TEMP_BLOCK%22%3B%20%2F%2F%20opcode%20of%20the%20temporary%20block%20added%20to%20keep%20the%20extension%20in%20the%20project%0A%20%20const%20CUSTOM_MENU_ID%20%3D%20%22SP0zMenuMaker_menu_%22%3B%0A%20%20const%20targetProcData%20%3D%20Symbol(%22MBPprocedureData%22)%3B%20%2F%2F%20place%20to%20store%20important%20global%20procedure%20data%0A%0A%20%20let%20proceduresXML%20%3D%20%22%22%2C%20tempStore%20%3D%20%7B%7D%2C%20storage%20%3D%20%7B%7D%3B%0A%20%20let%20globalBlocksCache%20%3D%20%7B%7D%3B%0A%20%20let%20globalTargetFocus%20%3D%20undefined%3B%20%2F%2F%20not%20to%20be%20confused%20with%20globalBlocksCache%2C%20this%20helps%20find%20block%20IDs%20in%20stacks%0A%0A%20%20let%20imgStorage%20%3D%20%7B%7D%2C%20imgStoreSize%20%3D%200%3B%0A%0A%20%20let%20extensionRemovable%20%3D%20false%3B%0A%20%20let%20ext%3B%20%2F%2F%20extension%20object%0A%20%20let%20execute%2C%20Thread%3B%20%2F%2F%20set%20by%20exports%0A%0A%20%20function%20themeifyColor(hex)%20%7B%0A%20%20%20%20if%20(isPM)%20return%20%5Bhex%5D%3B%0A%20%20%20%20const%20themeObj%20%3D%20ReduxStore.getState().scratchGui.theme.theme.getCustomExtensionColors()%3B%0A%20%20%20%20return%20Object.keys(themeObj).length%20%3D%3D%3D%200%20%3F%20%5Bhex%5D%20%3A%20%5B%0A%20%20%20%20%20%20themeObj.primary(hex)%2C%20themeObj.secondary(hex)%2C%20themeObj.tertiary(hex)%0A%20%20%20%20%5D%3B%0A%20%20%7D%0A%0A%20%20const%20inputTypes%20%3D%20%7B%0A%20%20%20%20col%3A%20%7B%20opcode%3A%20%22colour_picker%22%2C%20fieldName%3A%20%22COLOUR%22%2C%20defaultValue%3A%20(()%20%3D%3E%20%60%23%24%7BMath.floor(Math.random()%20*%20Math.pow(2%2C%2024)).toString(16).padStart(6%2C%20%220%22)%7D%60)%20%7D%2C%0A%20%20%20%20note%3A%20%7B%20opcode%3A%20%22note%22%2C%20fieldName%3A%20%22NOTE%22%2C%20defaultValue%3A%20%2260%22%20%7D%2C%0A%20%20%20%20mat%3A%20%7B%20opcode%3A%20%22matrix%22%2C%20fieldName%3A%20%22MATRIX%22%2C%20defaultValue%3A%20isPM%20%3F%20%221111001010011100100011000%22%20%3A%20%221111110101001000010001110%22%20%7D%2C%0A%20%20%20%20ang%3A%20%7B%20opcode%3A%20%22math_angle%22%2C%20fieldName%3A%20%22NUM%22%2C%20defaultValue%3A%20%2290%22%20%7D%2C%0A%20%20%20%20%2F%2F%20%25n%20technically%20already%20exists%20but%20some%20parts%20of%20scratch-blocks%20replace%20it%20with%20%25s%20so%20we%20can't%20use%20it%0A%20%20%20%20num%3A%20%7B%20opcode%3A%20%22math_number%22%2C%20fieldName%3A%20%22NUM%22%2C%20defaultValue%3A%20%220%22%20%7D%2C%0A%20%20%20%20emp%3A%20%7B%20opcode%3A%20%22emp%22%2C%20fieldName%3A%20%22EMPTY%22%7D%2C%0A%20%20%20%20brc%3A%20%7B%20opcode%3A%20%22brc%22%2C%20fieldName%3A%20%22SUBSTACK%22%20%7D%2C%0A%20%20%20%20img%3A%20%7B%20opcode%3A%20%22img%22%2C%20fieldName%3A%20%22IMAGE%22%20%7D%0A%20%20%7D%3B%0A%20%20function%20getInputData(input)%20%7B%0A%20%20%20%20if%20(input.isDrop)%20return%20%7B%20opcode%3A%20input.type%2C%20fieldName%3A%20null%2C%20defaultValue%3A%20null%20%7D%3B%0A%20%20%20%20if%20(!Object.prototype.hasOwnProperty.call(inputTypes%2C%20input.type))%20return%20%7B%7D%3B%0A%20%20%20%20return%20inputTypes%5Binput.type%5D%3B%0A%20%20%7D%0A%20%20%2F%2F%20Used%20for%20setting%20inputs%20to%20the%20correct%20block%20color%0A%20%20function%20isNormalInput(opcode)%20%7B%0A%20%20%20%20return%20opcode%20%3D%3D%3D%20%22note%22%20%7C%7C%20opcode%20%3D%3D%3D%20%22matrix%22%20%7C%7C%20opcode%20%3D%3D%3D%20%22colour_picker%22%0A%20%20%20%20%20%20%7C%7C%20opcode%20%3D%3D%3D%20%22math_angle%22%20%7C%7C%20opcode%20%3D%3D%3D%20%22math_number%22%20%7C%7C%20opcode%20%3D%3D%3D%20%22text%22%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20if%20true%2C%20scrolling%20to%20My%20Blocks%20will%20scroll%20to%20My%20Blocks%2B%20instead%0A%20%20%2F%2F%20used%20to%20make%20the%20Make%20a%20Block%20dialog%20scroll%20to%20the%20MB%2B%20category%0A%20%20let%20shouldScrollToMBP%20%3D%20false%3B%0A%0A%20%20%2F%2F%20refresh%20the%20block%20list%20if%20true%20when%20called%2C%20otherwise%20does%20nothing%0A%20%20let%20listNeedsRefresh%20%3D%20false%2C%20suspendRemoval%20%3D%20false%2C%20oldListLength%20%3D%200%3B%0A%0A%20%20%2F%2F%20Custom%20Block%20Modal%0A%20%20const%20returnTypeError%20%3D%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20used%20for%20PenguinMod%0A%20%20%20%20const%20modal%20%3D%20document.querySelector(%60div%5Bclass%3D%22ReactModalPortal%22%5D%60)%3B%0A%20%20%20%20if%20(modal%3F.parentNode)%20%7B%0A%20%20%20%20%20%20console.warn(%22Ignore%20the%20following%20Error%20about%20'connectionDBList'%2C%20it%20fixes%20itself%22)%3B%0A%20%20%20%20%20%20modal.querySelector(%60%5Bclass%5E%3D%22close-button_close-button_%22%5D%60).click()%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20Clean%20nonexistent%20inputs%20from%20the%20inputs%20object%0A%20%20function%20cleanupBlockInputs(inputs%2C%20args)%20%7B%0A%20%20%20%20for%20(const%20inputId%20in%20inputs)%20%7B%0A%20%20%20%20%20%20if%20(!args.includes(inputId))%20delete%20inputs%5BinputId%5D%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20openBlockMaker(workspace%2C%20isEditing)%20%7B%0A%20%20%20%20if%20(extensionRemovable)%20return%3B%0A%20%20%20%20listNeedsRefresh%20%3D%20true%3B%0A%20%20%20%20shouldScrollToMBP%20%3D%20true%3B%0A%20%20%20%20const%20isDark%20%3D%20isPM%20%3F%20document.body.getAttribute(%22theme%22)%20%3D%3D%3D%20%22dark%22%20%3A%20ReduxStore.getState().scratchGui.theme.theme.gui%20%3D%3D%3D%20%22dark%22%3B%0A%20%20%20%20%2F%2F%20Scratch%20creates%20a%20new%20workspace%20for%20Custom%20Blocks%2C%20we%20need%20to%20capture%20it%0A%20%20%20%20const%20newWorkspace%20%3D%20ScratchBlocks.mainWorkspace%3B%0A%20%20%20%20const%20modal%20%3D%20document.querySelector(%60div%5Bclass%3D%22ReactModalPortal%22%5D%60)%3B%0A%20%20%20%20modal.querySelector(%60div%5Bclass*%3D%22modal_header-item-title%22%5D%60).textContent%20%3D%20%22Make%20a%20Block%2B%22%3B%0A%20%20%20%20if%20(!isPM)%20modal.querySelector(%60div%5Bclass*%3D%22modal_modal-overlay_%22%5D%60).style.top%20%3D%20%22-25px%22%3B%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20const%20optionRow%20%3D%20modal.querySelectorAll(%60%5Bclass%5E%3D%22custom-procedures_options-row_%22%5D%60)%3B%0A%20%20%20%20%20%20const%20returnCheck%20%3D%20modal.querySelectorAll(%60input%5Btype%3D%22checkbox%22%5D%60)%3B%0A%0A%20%20%20%20%20%20const%20innerModal%20%3D%20modal.firstChild%3B%0A%20%20%20%20%20%20innerModal.style.overflow%20%3D%20%22auto%22%3B%0A%20%20%20%20%20%20let%20ogTop%3B%0A%20%20%20%20%20%20innerModal.addEventListener(%22scroll%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20activeInput%20%3D%20document.querySelector(%60div%5Bclass%5E%3D%22blocklyWidgetDiv%22%5D%5Bclass*%3D%22fieldTextInput%22%5D%60)%3B%0A%20%20%20%20%20%20%20%20if%20(activeInput)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(!ogTop)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20modalRect%20%3D%20innerModal.getBoundingClientRect()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20inputRect%20%3D%20activeInput.getBoundingClientRect()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ogTop%20%3D%20inputRect.top%20-%20modalRect.top%20%2B%20innerModal.scrollTop%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20activeInput.style.top%20%3D%20%60%24%7BogTop%20-%20innerModal.scrollTop%7Dpx%60%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20modal.querySelector(%60%5Bclass%5E%3D%22custom-procedures_color-picker-area_%22%5D%60).style.display%20%3D%20%22none%22%3B%0A%20%20%20%20%20%20if%20(optionRow%5B1%5D)%20optionRow%5B1%5D.style.display%20%3D%20%22none%22%3B%0A%20%20%20%20%20%20if%20(returnCheck%5B1%5D)%20returnCheck%5B1%5D.parentNode.addEventListener(%22click%22%2C%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20optionRow%5B1%5D.style.display%20%3D%20e.target.checked%20%3F%20%22%22%20%3A%20%22none%22%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%20%20const%20row%20%3D%20modal.querySelector(%60%5Bclass%5E%3D%22custom-procedures_options-row_%22%5D%60)%3B%0A%20%20%20%20const%20blockEditor%20%3D%20newWorkspace.getBlockById(modal.querySelector(%22g%5Bdata-id%5D%22).getAttribute(%22data-id%22))%3B%0A%20%20%20%20const%20oldProc%20%3D%20blockEditor.procCode_%3B%0A%20%20%20%20tempStore%20%3D%20structuredClone(storeGet(oldProc))%20%7C%7C%20%7B%7D%3B%20%2F%2F%20Reset%0A%20%20%20%20blockEditor.SPmbpCST_store%20%3D%20tempStore%3B%0A%0A%20%20%20%20attachInputBtns(row%2C%20blockEditor%2C%20isDark%2C%20workspace)%3B%0A%20%20%20%20attachColors(row%2C%20isDark%2C%20blockEditor)%3B%0A%20%20%20%20attachCheckboxes(modal%2C%20blockEditor%2C%20isEditing%2C%20oldProc)%3B%0A%0A%20%20%20%20%2F%2F%20Attach%20Okay%20Button%20Listener%0A%20%20%20%20const%20okBtn%20%3D%20modal.querySelector(%60button%5Bclass%5E%3D%22custom-procedures_ok-button_%22%5D%60)%3B%0A%20%20%20%20okBtn.addEventListener(%22click%22%2C%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%2F%2F%20prevent%20proccode%20conflicts%0A%20%20%20%20%20%20const%20newProc%20%3D%20blockEditor.procCode_%3B%0A%20%20%20%20%20%20let%20protoExists%20%3D%20ScratchBlocks.Procedures.getPrototypeBlock(newProc%2C%20workspace)%3B%0A%20%20%20%20%20%20if%20(!protoExists)%20%7B%0A%20%20%20%20%20%20%20%20refreshGlobalBlocksCache()%3B%0A%20%20%20%20%20%20%20%20const%20thisID%20%3D%20vm.editingTarget.id%3B%0A%20%20%20%20%20%20%20%20for%20(const%20target%20of%20runtime.targets)%20%7B%0A%20%20%20%20%20%20%20%20%20%20protoExists%20%3D%20target.blocks.getProcedureDefinition(newProc)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(protoExists)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(thisID%20%3D%3D%3D%20globalBlocksCache%5BnewProc%5D%3F.id)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20protoExists%20%3D%20undefined%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(thisID%20%3D%3D%3D%20target.id%20%26%26%20isEditing)%20protoExists%20%3D%20undefined%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20((protoExists%20%26%26%20(!isEditing%20%7C%7C%20oldProc%20!%3D%3D%20newProc)))%20%7B%0A%20%20%20%20%20%20%20%20alert(%22A%20custom%20block%20with%20this%20text%20already%20exists!%22)%3B%0A%20%20%20%20%20%20%20%20e.stopImmediatePropagation()%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20cleanupBlockInputs(tempStore.inputs%2C%20blockEditor.argumentIds_)%3B%0A%20%20%20%20%20%20storeSet(newProc%2C%20tempStore)%3B%0A%20%20%20%20%20%20if%20(isEditing%20%26%26%20oldProc%20!%3D%3D%20newProc)%20storeDel(oldProc)%3B%0A%20%20%20%20%20%20refreshGlobalBlocksCache()%3B%0A%0A%20%20%20%20%20%20%2F%2F%20update%20all%20global%20blocks%20outside%20this%20target%0A%20%20%20%20%20%20if%20(isPM%20%26%26%20isEditing%20%26%26%20oldProc%20!%3D%3D%20newProc)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20TODO%20make%20this%20work%20in%20Turbowarp%0A%20%20%20%20%20%20%20%20const%20defaults%20%3D%20blockEditor.argumentDefaults_%3B%0A%20%20%20%20%20%20%20%20const%20argList%20%3D%20blockEditor.argumentIds_%3B%0A%20%20%20%20%20%20%20%20const%20argListString%20%3D%20JSON.stringify(argList)%3B%0A%20%20%20%20%20%20%20%20const%20warp%20%3D%20blockEditor.getWarp()%3B%0A%20%20%20%20%20%20%20%20for%20(const%20target%20of%20runtime.targets)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(target.id%20%3D%3D%3D%20vm.editingTarget.id)%20continue%3B%0A%0A%20%20%20%20%20%20%20%20%20%20const%20blockCache%20%3D%20target.blocks%3B%0A%20%20%20%20%20%20%20%20%20%20const%20procCallers%20%3D%20Object.values(blockCache._blocks).filter((b)%20%3D%3E%20b.opcode%20%3D%3D%3D%20%22procedures_call%22)%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(const%20block%20of%20procCallers)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(block.mutation.proccode%20!%3D%3D%20oldProc)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20block.mutation.proccode%20%3D%20newProc%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20block.mutation.argumentids%20%3D%20argListString%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20block.mutation.warp%20%3D%20Scratch.Cast.toString(warp)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20inject%20missing%20inputs%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20inputs%20%3D%20Object.values(block.inputs)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20missing%20%3D%20argList.filter((a)%20%3D%3E%20inputs.findIndex((i)%20%3D%3E%20i.name%20%3D%3D%3D%20a)%20%3C%200)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(const%20input%20of%20missing)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20type%20%3D%20tempStore%3F.inputs%3F.%5Binput%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(type)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(type.isDrop)%20type%20%3D%20type.type%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type%20%3D%20getInputData(type)%3F.opcode%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!isNormalInput(type))%20type%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20defaultValue%20%3D%20defaults%5BargList.indexOf(input)%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(defaultValue%20%3D%3D%3D%20%22%22)%20type%20%3D%20%22text%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20else%20%22false%22%20-%3E%20boolean%2C%20leave%20undefined%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(type)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20tempBlock%20%3D%20newWorkspace.newBlock(type)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(type%20%3D%3D%3D%20%22text%22)%20tempBlock.setFieldValue(%22%22%2C%20%22TEXT%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20id%20%3D%20tempBlock.id%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20shadow%20%3D%20blockCache.XMLToBlock(%7B%20xml%3A%20ScratchBlocks.Xml.blockToDom(tempBlock)%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shadow%5B0%5D.parent%20%3D%20block.id%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shadow%5B0%5D.shadow%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tempBlock.dispose()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blockCache.createBlock(shadow%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20block.inputs%5Bid%5D%20%3D%20%7B%20name%3A%20input%2C%20block%3A%20id%2C%20shadow%3A%20id%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(isPM)%20%7B%0A%20%20%20%20%20%20%20%20window.removeEventListener(%22error%22%2C%20returnTypeError%2C%20%7B%20once%3A%20true%20%7D)%3B%0A%20%20%20%20%20%20%20%20window.addEventListener(%22error%22%2C%20returnTypeError%2C%20%7B%20once%3A%20true%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%0A%20%20function%20genDrpButton(container%2C%20opts%2C%20defaultValue%2C%20isDark%2C%20isLabel%2C%20changeFunc%2C%20setFunc)%20%7B%0A%20%20%20%20const%20img%20%3D%20container.childNodes%5B0%5D%2C%20btn%20%3D%20container.childNodes%5B2%5D%3B%0A%20%20%20%20img.src%20%3D%20defaultValue%3B%0A%20%20%20%20if%20(isLabel)%20container.childNodes%5B1%5D.firstChild.textContent%20%3D%20%22Add%20a%20label%22%3B%0A%0A%20%20%20%20%2F%2F%20replace%20text%20with%20dropdown%20input%0A%20%20%20%20let%20drpdown%20%3D%20document.createElement(%22select%22)%3B%0A%20%20%20%20drpdown.setAttribute(%22style%22%2C%20%60%24%7BisLabel%20%3F%20%22width%3A%20100%25%3B%20%22%20%3A%20%22%22%7D%20border-radius%3A%205px%3B%20text-align%3A%20center%3B%20background%3A%20%24%7BisDark%20%3F%20%22%231e1e1e%22%20%3A%20%22%23fff%22%7D%3B%20border%3A%202px%20solid%20var(--ui-black-transparent%2C%20rgba(0%2C%200%2C%200%2C%200.15))%3B%60)%3B%0A%20%20%20%20for%20(const%20%5Btxt%2C%20val%5D%20of%20opts)%20%7B%0A%20%20%20%20%20%20let%20opt%20%3D%20document.createElement(%22option%22)%3B%0A%20%20%20%20%20%20opt.text%20%3D%20txt%3B%20opt.value%20%3D%20val%3B%0A%20%20%20%20%20%20drpdown.appendChild(opt)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20btn.replaceChild(drpdown%2C%20btn.querySelector(%22span%22))%3B%0A%0A%20%20%20%20%2F%2F%20on%20Firefox%2C%20the%20%22click%22%20event%20will%20propagate%20to%20the%20button%2C%20which%20will%20add%20another%20input.%20don't%20do%20that%0A%20%20%20%20drpdown.addEventListener(%22click%22%2C%20(e)%20%3D%3E%20e.stopPropagation())%3B%0A%20%20%20%20drpdown.addEventListener(%22change%22%2C%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20changeFunc(e.target.value%2C%20img)%3B%0A%20%20%20%20%20%20container.click()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20container.addEventListener(%22click%22%2C%20(e)%20%3D%3E%20setFunc(e%2C%20drpdown))%3B%0A%20%20%20%20return%20container%3B%0A%20%20%7D%0A%0A%20%20function%20attachInputBtns(row%2C%20editor%2C%20isDark%2C%20workspace)%20%7B%0A%20%20%20%20const%20oldBoolURL%20%3D%20row.childNodes%5B1%5D.childNodes%5B0%5D.src%3B%0A%20%20%20%20const%20oldLabelURL%20%3D%20row.childNodes%5BisPM%20%3F%203%20%3A%202%5D.childNodes%5B0%5D.src%3B%0A%0A%20%20%20%20%2F%2F%20dropdown%20btn%0A%20%20%20%20const%20dropBtn%20%3D%20row.childNodes%5B1%5D.cloneNode(true)%3B%0A%20%20%20%20dropBtn.childNodes%5B0%5D.src%20%3D%20guiURIs(%22dropdwn%22)%3B%0A%20%20%20%20dropBtn.childNodes%5B2%5D.textContent%20%3D%20%22dropdown%22%3B%0A%20%20%20%20row.insertBefore(dropBtn%2C%20row.childNodes%5B2%5D)%3B%0A%20%20%20%20dropBtn.addEventListener(%22click%22%2C%20()%20%3D%3E%20openMenuSelector(editor%2C%20isDark%2C%20workspace))%3B%0A%0A%20%20%20%20%2F%2F%20branch%20btn%0A%20%20%20%20const%20branchBtn%20%3D%20row.childNodes%5B1%5D.cloneNode(true)%3B%0A%20%20%20%20branchBtn.childNodes%5B0%5D.src%20%3D%20inputURIs(%22brc%22)%3B%0A%20%20%20%20branchBtn.childNodes%5B2%5D.textContent%20%3D%20%22branch%22%3B%0A%20%20%20%20if%20(isPM)%20branchBtn.style.display%20%3D%20%22none%22%3B%0A%20%20%20%20row.insertBefore(branchBtn%2C%20row.childNodes%5B3%5D)%3B%0A%20%20%20%20if%20(!isPM)%20%7B%0A%20%20%20%20%20%20branchBtn.addEventListener(%22click%22%2C%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20editor.addStringNumberExternal()%3B%0A%20%20%20%20%20%20%20%20e.stopImmediatePropagation()%3B%0A%0A%20%20%20%20%20%20%20%20const%20args%20%3D%20editor.argumentIds_%3B%0A%20%20%20%20%20%20%20%20const%20id%20%3D%20args%5Bargs.length%20-%201%5D%3B%0A%20%20%20%20%20%20%20%20const%20inputs%20%3D%20tempStore.inputs%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20inputs%5Bid%5D%20%3D%20%7B%20type%3A%20%22brc%22%2C%20isDrop%3A%20false%20%7D%3B%0A%20%20%20%20%20%20%20%20tempStore.inputs%20%3D%20inputs%3B%0A%20%20%20%20%20%20%20%20cleanupBlockInputs(inputs%2C%20args)%3B%0A%0A%20%20%20%20%20%20%20%20editor.displayNames_%5Bargs.length%20-%201%5D%20%3D%20%22branch%22%3B%0A%20%20%20%20%20%20%20%20editor.updateDisplay_()%3B%0A%20%20%20%20%20%20%20%20editor.focusLastEditor_()%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20dynamic%20btns%0A%20%20%20%20const%20labPaths%20%3D%20%5B%5B%22text%22%2C%20%22text%22%5D%2C%20%5B%22image%22%2C%20%22img%22%5D%5D%3B%0A%20%20%20%20const%20inpPaths%20%3D%20%5B%0A%20%20%20%20%20%20%5B%22number%20or%20text%22%2C%20%22norm%22%5D%2C%20%5B%22number%22%2C%20%22num%22%5D%2C%20%5B%22boolean%22%2C%20%22bool%22%5D%2C%20%5B%22angle%22%2C%20%22ang%22%5D%2C%0A%20%20%20%20%20%20%5B%22color%22%2C%20%22col%22%5D%2C%20%5B%22piano%22%2C%20%22note%22%5D%2C%20%5B%22matrix%22%2C%20%22mat%22%5D%2C%20%5B%22empty%22%2C%20%22emp%22%5D%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20const%20tempBtn%20%3D%20row.childNodes%5B1%5D%3B%0A%20%20%20%20row.replaceChild(genDrpButton(%0A%20%20%20%20%20%20tempBtn.cloneNode(true)%2C%20inpPaths%2C%20inputURIs(%22norm%22)%2C%20isDark%2C%20false%2C%0A%20%20%20%20%20%20(value%2C%20img)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20img.src%20%3D%20value%20%3D%3D%3D%20%22bool%22%20%3F%20oldBoolURL%20%3A%20inputURIs(value)%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20(e%2C%20drpdown)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(e.target%20%3D%3D%3D%20drpdown)%20return%3B%0A%20%20%20%20%20%20%20%20if%20(drpdown.value%20%3D%3D%3D%20%22bool%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20editor.addBooleanExternal()%3B%0A%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20editor.addStringNumberExternal()%3B%0A%20%20%20%20%20%20%20%20e.stopImmediatePropagation()%3B%20%2F%2F%20don't%20run%20the%20old%20add%20event%0A%20%20%20%20%20%20%20%20if%20(drpdown.value%20%3D%3D%3D%20%22norm%22)%20return%3B%0A%0A%20%20%20%20%20%20%20%20const%20args%20%3D%20editor.argumentIds_%3B%0A%20%20%20%20%20%20%20%20const%20id%20%3D%20args%5Bargs.length%20-%201%5D%3B%0A%20%20%20%20%20%20%20%20const%20inputs%20%3D%20tempStore.inputs%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20inputs%5Bid%5D%20%3D%20%7B%20type%3A%20drpdown.value%2C%20isDrop%3A%20false%20%7D%3B%0A%20%20%20%20%20%20%20%20tempStore.inputs%20%3D%20inputs%3B%0A%20%20%20%20%20%20%20%20cleanupBlockInputs(inputs%2C%20args)%3B%0A%0A%20%20%20%20%20%20%20%20editor.displayNames_%5Bargs.length%20-%201%5D%20%3D%20drpdown.selectedOptions%5B0%5D.textContent%3B%0A%20%20%20%20%20%20%20%20editor.updateDisplay_()%3B%0A%20%20%20%20%20%20%20%20editor.focusLastEditor_()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20)%2C%20row.childNodes%5B0%5D)%3B%0A%20%20%20%20row.replaceChild(genDrpButton(%0A%20%20%20%20%20%20tempBtn.cloneNode(true)%2C%20labPaths%2C%20oldLabelURL%2C%20isDark%2C%20true%2C%0A%20%20%20%20%20%20(value%2C%20img)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20img.src%20%3D%20value%20%3D%3D%3D%20%22text%22%20%3F%20oldLabelURL%20%3A%20inputURIs(value)%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20(e%2C%20drpdown)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(e.target%20%3D%3D%3D%20drpdown)%20return%3B%0A%20%20%20%20%20%20%20%20if%20(drpdown.value%20%3D%3D%3D%20%22text%22)%20editor.addLabelExternal()%3B%0A%20%20%20%20%20%20%20%20else%20openImgSelector(editor%2C%20isDark%2C%20workspace)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20)%2C%20row.childNodes%5BisPM%20%3F%205%20%3A%204%5D)%3B%0A%20%20%20%20row.childNodes%5B1%5D.style.display%20%3D%20%22none%22%3B%0A%20%20%7D%0A%0A%20%20function%20attachCheckboxes(modal%2C%20editor%2C%20isEditing%2C%20ogProcode)%20%7B%0A%20%20%20%20const%20checkRow%20%3D%20isPM%20%3F%20modal.querySelector(%60div%5Bclass%5E%3D%22custom-procedures_button-row_%22%5D%60).previousSibling%0A%20%20%20%20%20%20%3A%20modal.querySelector(%60%5Bclass%5E%3D%22custom-procedures_checkbox-row%22%5D%60)%3B%0A%20%20%20%20const%20makeBox%20%3D%20(txt%2C%20val%2C%20func)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20box%20%3D%20checkRow.firstChild.cloneNode(true)%3B%0A%20%20%20%20%20%20box.childNodes%5B1%5D.textContent%20%3D%20txt%3B%0A%20%20%20%20%20%20box.childNodes%5B0%5D.checked%20%3D%20val%3B%0A%20%20%20%20%20%20box.addEventListener(%22click%22%2C%20()%20%3D%3E%20func(box.childNodes%5B0%5D.checked))%3B%0A%20%20%20%20%20%20return%20box%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20if%20(isEditing%20%26%26%20isPM)%20%7B%0A%20%20%20%20%20%20const%20isReturner%20%3D%20editor.getReturns()%3B%0A%20%20%20%20%20%20const%20returnType%20%3D%20makeBox(%0A%20%20%20%20%20%20%20%20%22Boolean%22%2C%20editor.outputType%20%3D%3D%3D%20%22boolean%22%2C%0A%20%20%20%20%20%20%20%20(val)%20%3D%3E%20%7B%20editor.setType(val%20%3F%20%22boolean%22%20%3A%20%22string%22)%20%7D%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20returnType.style.display%20%3D%20isReturner%20%3F%20%22%22%20%3A%20%22none%22%3B%0A%20%20%20%20%20%20returnType.style.marginLeft%20%3D%20%225px%22%3B%0A%20%20%20%20%20%20const%20returnCheck%20%3D%20makeBox(%0A%20%20%20%20%20%20%20%20%22Returns%20a%20value%22%2C%20isReturner%2C%0A%20%20%20%20%20%20%20%20(val)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20editor.setReturns(val)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(val)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20editor.setType(%22string%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20returnType.childNodes%5B0%5D.checked%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20returnType.style.display%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20editor.setType(%22statement%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20returnType.style.display%20%3D%20%22none%22%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20checkRow.append(returnCheck%2C%20returnType)%3B%0A%20%20%20%20%7D%0A%20%20%20%20checkRow.append(isPM%20%26%26%20!isEditing%20%3F%20%22%22%20%3A%20document.createElement(%22br%22)%2C%20makeBox(%0A%20%20%20%20%20%20%22Cap%20block%22%2C%20tempStore.isTerminal%20!%3D%3D%20undefined%20%3F%20tempStore.isTerminal%20%3A%20false%2C%0A%20%20%20%20%20%20(val)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20editor.setNextStatement(!val)%3B%0A%20%20%20%20%20%20%20%20tempStore.isTerminal%20%3D%20val%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20))%3B%0A%20%20%20%20checkRow.append(document.createElement(%22br%22)%2C%20makeBox(%0A%20%20%20%20%20%20%22Available%20for%20all%20sprites%22%2C%20tempStore.global%20!%3D%3D%20undefined%20%3F%20tempStore.global%20%3A%20false%2C%0A%20%20%20%20%20%20(val)%20%3D%3E%20%7B%20tempStore.global%20%3D%20val%20%7D%0A%20%20%20%20))%3B%0A%20%20%7D%0A%0A%20%20function%20attachColors(row%2C%20isDark%2C%20editor)%20%7B%0A%20%20%20%20const%20colorUtil%20%3D%20ScratchBlocks.goog.color%3B%0A%20%20%20%20const%20bounceAnim%20%3D%20(circ)%20%3D%3E%20%7B%0A%20%20%20%20%20%20circ.animate(%0A%20%20%20%20%20%20%20%20%5B%7B%20transform%3A%20%22scale(0.75)%22%20%7D%2C%20%7B%20transform%3A%20%22scale(1)%22%20%7D%5D%2C%20%7B%20duration%3A%20200%2C%20easing%3A%20%22ease-in-out%22%20%7D%0A%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20const%20setCol%20%3D%20(col)%20%3D%3E%20%7B%0A%20%20%20%20%20%20tempStore.color%20%3D%20col%3B%0A%20%20%20%20%20%20const%20rgb%20%3D%20colorUtil.hexToRgb(col)%3B%0A%20%20%20%20%20%20if%20(isPM)%20%7B%0A%20%20%20%20%20%20%20%20editor.setColor(%0A%20%20%20%20%20%20%20%20%20%20col%2C%0A%20%20%20%20%20%20%20%20%20%20colorUtil.rgbArrayToHex(colorUtil.darken(rgb%2C%200.1))%2C%0A%20%20%20%20%20%20%20%20%20%20colorUtil.rgbArrayToHex(colorUtil.darken(rgb%2C%200.2))%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20editor.setColour(...themeifyColor(col))%3B%0A%20%20%20%20%20%20%20%20editor.updateDisplay_()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20const%20colorDiv%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20colorDiv.setAttribute(%22style%22%2C%20%22display%3A%20flex%3B%20justify-content%3A%20center%3B%20align-items%3A%20center%3B%20margin-top%3A%2015px%3B%20border-radius%3A%2010px%3B%22)%3B%0A%20%20%20%20if%20(isPM)%20colorDiv.style.marginBottom%20%3D%20%2215px%22%3B%0A%20%20%20%20colorDiv.style.border%20%3D%20%60solid%20%24%7BisDark%20%3F%20%22%23343434%22%20%3A%20%22%23D9D9D9%22%7D%202.5px%60%3B%0A%0A%20%20%20%20const%20colorList%20%3D%20isPM%20%3F%20ScratchBlocks.Colours%20%3A%20ReduxStore.getState().scratchGui.theme.theme.getStageBlockColors()%3B%0A%20%20%20%20const%20colors%20%3D%20%5B%0A%20%20%20%20%20%20colorList.motion.primary%2C%20colorList.looks.primary%2C%20colorList.sounds.primary%2C%0A%20%20%20%20%20%20colorList.event.primary%2C%20colorList.control.primary%2C%20colorList.sensing.primary%2C%0A%20%20%20%20%20%20colorList.operators.primary%2C%20colorList.data.primary%2C%20colorList.data_lists.primary%2C%0A%20%20%20%20%20%20colorList.more.primary%2C%20colorList.pen.primary%2C%20%22red%22%2C%0A%20%20%20%20%5D%3B%0A%20%20%20%20colors.forEach(color%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20circle%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20%20%20circle.setAttribute(%22style%22%2C%20%22width%3A%2035px%3B%20height%3A%2035px%3B%20border-radius%3A%2050%25%3B%20border%3A%202.5px%20solid%20rgba(0%2C%200%2C%200%2C%200.13)%3B%20margin%3A%207px%3B%20cursor%3A%20pointer%3B%22)%3B%0A%20%20%20%20%20%20circle.style.backgroundColor%20%3D%20color%3B%0A%20%20%20%20%20%20circle.style.boxShadow%20%3D%20%600px%200px%200px%202.5px%20%24%7BisDark%20%3F%20%22%23343434%22%20%3A%20%22%23D9D9D9%22%7D%60%3B%0A%20%20%20%20%20%20colorDiv.appendChild(circle)%3B%0A%20%20%20%20%20%20if%20(color%20%3D%3D%3D%20%22red%22)%20%7B%0A%20%20%20%20%20%20%20%20const%20innerImg%20%3D%20document.createElement(%22img%22)%3B%0A%20%20%20%20%20%20%20%20innerImg.src%20%3D%20guiURIs(%22colorPkr%22)%3B%0A%20%20%20%20%20%20%20%20innerImg.setAttribute(%22style%22%2C%20%22width%3A%2025px%3B%20height%3A%2025px%3B%20position%3A%20relative%3B%20padding%3A%202px%3B%20left%3A%2050%25%3B%20top%3A%2050%25%3B%20transform%3A%20translate(-50%25%2C%20-50%25)%3B%22)%3B%0A%20%20%20%20%20%20%20%20circle.addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20bounceAnim(circle)%3B%0A%20%20%20%20%20%20%20%20%20%20colInp.click()%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20const%20colInp%20%3D%20document.createElement(%22input%22)%3B%0A%20%20%20%20%20%20%20%20colInp.type%20%3D%20%22color%22%3B%0A%20%20%20%20%20%20%20%20colInp.setAttribute(%22style%22%2C%20%22opacity%3A%200%3B%20cursor%3A%20pointer%3B%20width%3A%201px%3B%20height%3A%201px%3B%20transform%3A%20translate(15px%2C%20-25px)%3B%22)%3B%0A%20%20%20%20%20%20%20%20circle.append(innerImg%2C%20colInp)%3B%0A%20%20%20%20%20%20%20%20colInp.addEventListener(%22input%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20circle.style.backgroundColor%20%3D%20colInp.value%3B%0A%20%20%20%20%20%20%20%20%20%20setCol(colInp.value)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20circle.addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20bounceAnim(circle)%3B%0A%20%20%20%20%20%20%20%20%20%20setCol(color)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%20%20if%20(!tempStore.color)%20setCol(colors%5B9%5D)%3B%0A%20%20%20%20row.parentNode.insertBefore(colorDiv%2C%20row.parentNode.lastChild.previousSibling)%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Custom%20Mini%20Modals%0A%20%20function%20openModal(titleName%2C%20workerFn%2C%20callbackFn)%20%7B%0A%20%20%20%20const%20modalStorage%20%3D%20%7B%7D%3B%0A%20%20%20%20ScratchBlocks.prompt(%0A%20%20%20%20%20%20%22%22%2C%20%22%22%2C%20()%20%3D%3E%20callbackFn(modalStorage.value)%2C%0A%20%20%20%20%20%20titleName%2C%20%22broadcast_msg%22%0A%20%20%20%20)%3B%0A%0A%20%20%20%20let%20modal%20%3D%20document.querySelectorAll(%60div%5Bclass%3D%22ReactModalPortal%22%5D%60)%3B%0A%20%20%20%20modal%20%3D%20modal%5Bmodal.length%20-%201%5D%3B%0A%20%20%20%20modal.style.position%20%3D%20%22relative%22%3B%20modal.style.zIndex%20%3D%20%2299999%22%3B%0A%20%20%20%20const%20boxModal%20%3D%20modal.querySelector(%22input%22).parentNode%3B%0A%20%20%20%20boxModal.previousSibling.remove()%3B%20boxModal.firstChild.remove()%3B%0A%20%20%20%20workerFn(boxModal%2C%20modalStorage)%3B%0A%20%20%7D%0A%0A%20%20function%20openMenuSelector(editor%2C%20isDark%2C%20ogWorkspace)%20%7B%0A%20%20%20%20const%20arrowIcon%20%3D%20isPM%20%3F%20%22static%2Fblocks-media%2Fdropdown-arrow%22%20%3A%20%22%2Fstatic%2Fblocks-media%2Fdefault%2Fdropdown-arrow%22%3B%0A%0A%20%20%20%20%2F%2F%20Get%20All%20Dropdowns%0A%20%20%20%20const%20avoid%20%3D%20%5B%22looks_costumenumbername%22%2C%20%22extension_wedo_tilt_menu%22%2C%20%22lmsMoreEvents_menu_state%22%5D%3B%0A%20%20%20%20let%20allBlocks%20%3D%20Object.keys(ScratchBlocks.Blocks)%3B%0A%20%20%20%20allBlocks%20%3D%20allBlocks.filter((i)%20%3D%3E%20i.includes(%22menu%22)%20%26%26%20!avoid.includes(i))%3B%0A%20%20%20%20allBlocks.unshift(%22looks_costume%22%2C%20%22looks_backdrops%22%2C%20%22sensing_keyoptions%22)%3B%0A%20%20%20%20allBlocks.forEach((e%2C%20i)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(e.startsWith(CUSTOM_MENU_ID))%20%7B%0A%20%20%20%20%20%20%20%20allBlocks.unshift(e)%3B%0A%20%20%20%20%20%20%20%20allBlocks.splice(i%20%2B%201%2C%201)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20openModal(%0A%20%20%20%20%20%20%22Select%20a%20Dropdown%22%2C%0A%20%20%20%20%20%20(modal%2C%20modalStorage)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20modalStorage.value%20%3D%20allBlocks%5B0%5D%3B%0A%20%20%20%20%20%20%20%20const%20dropDiv%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20%20%20%20%20dropDiv.setAttribute(%22style%22%2C%20%60width%3A%20100%25%3B%20height%3A%20200px%3B%20margin-bottom%3A%2015px%3B%20overflow%3A%20scroll%3B%20border%3A%20solid%20%24%7BisDark%20%3F%20%22%23343434%22%20%3A%20%22%23D9D9D9%22%7D%202px%3B%20border-radius%3A%2010px%3B%60)%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20allBlocks.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20dropItem%20%3D%20document.createElement(%22div%22)%2C%20text%20%3D%20document.createElement(%22div%22)%2C%20prev%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20%20%20%20%20%20%20dropItem.setAttribute(%22style%22%2C%20%60cursor%3A%20pointer%3B%20padding%3A%208px%3B%20width%3A%20100%25%3B%20height%3A%20max-content%3B%20display%3A%20flex%3B%20flex-direction%3A%20column%3B%20align-items%3A%20center%3B%20justify-content%3A%20center%3B%60)%3B%0A%20%20%20%20%20%20%20%20%20%20dropItem.append(prev%2C%20text)%3B%0A%20%20%20%20%20%20%20%20%20%20text.textContent%20%3D%20allBlocks%5Bi%5D.replace(CUSTOM_MENU_ID%2C%20%22%22)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20const%20isCustom%20%3D%20allBlocks%5Bi%5D.includes(CUSTOM_MENU_ID)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20block%20%3D%20ogWorkspace.getBlockById(allBlocks%5Bi%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20let%20prevTxt%20%3D%20block%20%3F%20block.inputList%5B0%5D.fieldRow%5B0%5D.text_.substring(0%2C%2017)%20%3A%20%22%22%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(prevTxt.length%20%3D%3D%3D%2017)%20prevTxt%20%2B%3D%20%22...%22%3B%0A%20%20%20%20%20%20%20%20%20%20prev.outerHTML%20%3D%20%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20style%3D%22color%3A%20%23fff%3B%20background%3A%20%24%7BisCustom%20%3F%20%22%23FF6680%22%20%3A%20block%20%3F%20block.colour_%20%3A%20%22%23505050%22%7D%3B%20border-radius%3A%20%24%7Bblock%20%3F%2050%20%3A%205%7Dpx%3B%20width%3A%20max-content%3B%20text-align%3A%20center%3B%20margin-bottom%3A%205px%3B%20padding%3A%205px%2010px%205px%2010px%3B%20font-weight%3A%20500%3B%20border%3A%20solid%201px%20rgba(0%2C0%2C0%2C0.3)%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3E%24%7Bblock%20%3F%20prevTxt%20%3A%20%22%3F%3F%3F%22%7D%3C%2Fspan%3E%3Cimg%20style%3D%22margin-left%3A%205px%3B%22%20src%3D%22%24%7BarrowIcon%7D.svg%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%60%3B%0A%0A%20%20%20%20%20%20%20%20%20%20const%20bgColor%20%3D%20i%20%25%202%20%3D%3D%3D%200%20%3F%20isCustom%20%3F%20%22%23cc526640%22%20%3A%20%22%23aaa3%22%20%3A%20isCustom%20%3F%20%22%23cc526680%22%20%3A%20%22transparent%22%3B%0A%20%20%20%20%20%20%20%20%20%20dropItem.style.backgroundColor%20%3D%20%60var(--selected-color%2C%20%24%7BbgColor%7D)%60%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(i%20%3D%3D%3D%200)%20dropItem.style.setProperty(%22--selected-color%22%2C%20isCustom%20%3F%20%22%23f7889a99%22%20%3A%20%22%23aaaa%22)%3B%0A%20%20%20%20%20%20%20%20%20%20dropDiv.appendChild(dropItem)%3B%0A%20%20%20%20%20%20%20%20%20%20dropItem.addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Array.from(dropDiv.children).forEach(c%20%3D%3E%20c.style.removeProperty(%22--selected-color%22))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dropItem.style.setProperty(%22--selected-color%22%2C%20isCustom%20%3F%20%22%23f7889a99%22%20%3A%20%22%23aaaa%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20modalStorage.value%20%3D%20allBlocks%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20modal.insertBefore(dropDiv%2C%20modal.lastChild)%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20(value)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20editor.addStringNumberExternal()%3B%0A%20%20%20%20%20%20%20%20const%20args%20%3D%20editor.argumentIds_%3B%0A%20%20%20%20%20%20%20%20const%20id%20%3D%20args%5Bargs.length%20-%201%5D%3B%0A%20%20%20%20%20%20%20%20editor.displayNames_%5Bargs.length%20-%201%5D%20%3D%20value.replace(CUSTOM_MENU_ID%2C%20%22%22)%3B%0A%20%20%20%20%20%20%20%20editor.updateDisplay_()%3B%0A%20%20%20%20%20%20%20%20editor.focusLastEditor_()%3B%0A%0A%20%20%20%20%20%20%20%20const%20inputs%20%3D%20tempStore.inputs%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20inputs%5Bid%5D%20%3D%20%7B%20type%3A%20value%2C%20isDrop%3A%20true%20%7D%3B%0A%20%20%20%20%20%20%20%20tempStore.inputs%20%3D%20inputs%3B%0A%20%20%20%20%20%20%20%20cleanupBlockInputs(inputs%2C%20args)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20)%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Image%20Modal%0A%20%20function%20openImgSelector(editor%2C%20isDark%2C%20ogWorkspace)%20%7B%0A%20%20%20%20%2F%2F%20Get%20All%20Images%0A%20%20%20%20const%20images%20%3D%20new%20Set()%3B%0A%20%20%20%20const%20extractImage%20%3D%20(block)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(!block.init)%20return%3B%0A%20%20%20%20%20%20let%20json%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20const%20jsonInit%20%3D%20(json0)%20%3D%3E%20%7B%20json%20%3D%20json0%3B%20%7D%3B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20block.init.call(%7B%20jsonInit%20%7D)%3B%0A%20%20%20%20%20%20%7D%20catch%20%7B%20return%20%7D%0A%0A%20%20%20%20%20%20for%20(const%20key%20in%20json)%20%7B%0A%20%20%20%20%20%20%20%20if%20(key.startsWith(%22args%22))%20for%20(const%20arg%20of%20json%5Bkey%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(arg.type%20%3D%3D%3D%20%22field_image%22%20%26%26%20arg.src)%20images.add(arg.src)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20Object.values(ScratchBlocks.Blocks).forEach(extractImage)%3B%0A%0A%20%20%20%20const%20selectBtn%20%3D%20(dropDiv%2C%20btn)%20%3D%3E%20%7B%0A%20%20%20%20%20%20Array.from(dropDiv.children).forEach(c%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20c.style.backgroundColor%20%3D%20%22var(--default-bg)%22%3B%0A%20%20%20%20%20%20%20%20c.style.border%20%3D%20%22solid%20var(--default-border)%202px%22%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20btn.style.backgroundColor%20%3D%20%22var(--looks-transparent%2C%20hsla(194%2C%20100%25%2C%2050%25%2C%200.35))%22%3B%0A%20%20%20%20%20%20btn.style.border%20%3D%20%22solid%20var(--looks-secondary%2C%20hsl(194%2C%20100%25%2C%2050%25))%202px%22%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20openModal(%0A%20%20%20%20%20%20%22Select%20an%20Image%22%2C%0A%20%20%20%20%20%20(modal%2C%20modalStorage)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20flexConst%20%3D%20%22display%3A%20flex%3B%20flex-wrap%3A%20wrap%3B%20align-items%3A%20center%3B%20justify-content%3A%20center%3B%22%3B%0A%20%20%20%20%20%20%20%20const%20borderConst%20%3D%20%60border%3A%20solid%20var(--default-border)%202px%3B%20border-radius%3A%2010px%3B%60%3B%0A%20%20%20%20%20%20%20%20const%20itemCSS%20%3D%20%60cursor%3A%20pointer%3B%20width%3A%2075px%3B%20height%3A%2075px%3B%20%24%7BflexConst%7D%20padding%3A%205px%3B%20background-color%3A%20var(--default-bg)%3B%20margin%3A%207px%3B%20%24%7BborderConst%7D%20--default-border%3A%20%24%7BisDark%20%3F%20%22%23343434%22%20%3A%20%22%23D9D9D9%22%7D%3B%20--default-bg%3A%20%24%7BisDark%20%3F%20%22%231f1f1f%22%20%3A%20%22%23f5f5f5%22%7D%3B%60%3B%0A%0A%20%20%20%20%20%20%20%20const%20dropDiv%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20%20%20%20%20dropDiv.setAttribute(%22style%22%2C%20%60width%3A%20100%25%3B%20height%3A%20200px%3B%20%24%7BflexConst%7D%20overflow%3A%20hidden%20scroll%3B%20margin-bottom%3A%2015px%3B%20%24%7BborderConst%7D%20--default-border%3A%20%24%7BisDark%20%3F%20%22%23343434%22%20%3A%20%22%23D9D9D9%22%7D%3B%60)%3B%0A%0A%20%20%20%20%20%20%20%20const%20dropItem%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20%20%20%20%20dropItem.setAttribute(%22style%22%2C%20itemCSS)%3B%0A%20%20%20%20%20%20%20%20const%20img%20%3D%20document.createElement(%22img%22)%3B%0A%20%20%20%20%20%20%20%20img.setAttribute(%22style%22%2C%20%22width%3A%2075%25%3B%20height%3A%2075%25%3B%22)%3B%0A%20%20%20%20%20%20%20%20img.src%20%3D%20guiURIs(%22addImg%22)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20const%20text%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20%20%20%20%20text.setAttribute(%22style%22%2C%20%22text-wrap%3A%20nowrap%3B%20font-size%3A%2060%25%3B%22)%3B%0A%20%20%20%20%20%20%20%20text.textContent%20%3D%20%22Custom%20Image%22%3B%0A%20%20%20%20%20%20%20%20dropItem.append(img%2C%20text)%3B%0A%0A%20%20%20%20%20%20%20%20dropDiv.appendChild(dropItem)%3B%0A%20%20%20%20%20%20%20%20dropItem.addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20src%20%3D%20prompt(%22Enter%20the%20URL%20or%20Data.URI%20of%20your%20image%3A%22)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(src)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20modalStorage.value%20%3D%20src%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20selectBtn(dropDiv%2C%20dropItem)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%20%20%20%20images.forEach((image%2C%20i%2C%20d)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20dropItem%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20%20%20%20%20%20%20dropItem.setAttribute(%22style%22%2C%20itemCSS)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20img%20%3D%20document.createElement(%22img%22)%3B%0A%20%20%20%20%20%20%20%20%20%20img.setAttribute(%22style%22%2C%20%22width%3A%20100%25%3B%20height%3A%20100%25%3B%22)%3B%0A%20%20%20%20%20%20%20%20%20%20img.src%20%3D%20image%3B%0A%20%20%20%20%20%20%20%20%20%20dropItem.appendChild(img)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20dropDiv.appendChild(dropItem)%3B%0A%20%20%20%20%20%20%20%20%20%20dropItem.addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20selectBtn(dropDiv%2C%20dropItem)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20modalStorage.value%20%3D%20image%3B%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20modal.insertBefore(dropDiv%2C%20modal.lastChild)%3B%0A%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20(value)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(!value)%20return%3B%0A%20%20%20%20%20%20%20%20editor.addStringNumberExternal()%3B%0A%20%20%20%20%20%20%20%20const%20args%20%3D%20editor.argumentIds_%3B%0A%20%20%20%20%20%20%20%20const%20id%20%3D%20args%5Bargs.length%20-%201%5D%3B%0A%20%20%20%20%20%20%20%20editor.displayNames_%5Bargs.length%20-%201%5D%20%3D%20%22image%22%3B%0A%20%20%20%20%20%20%20%20editor.updateDisplay_()%3B%0A%20%20%20%20%20%20%20%20editor.focusLastEditor_()%3B%0A%0A%20%20%20%20%20%20%20%20const%20inputs%20%3D%20tempStore.inputs%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20inputs%5Bid%5D%20%3D%20%7B%20type%3A%20%22img%22%2C%20isDrop%3A%20false%2C%20src%3A%20storeImage(value)%20%7D%3B%0A%20%20%20%20%20%20%20%20tempStore.inputs%20%3D%20inputs%3B%0A%20%20%20%20%20%20%20%20cleanupBlockInputs(inputs%2C%20args)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20)%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Compiler%20Patches%0A%20%20function%20getExports()%20%7B%0A%20%20%20%20if%20(vm.exports.i_will_not_ask_for_help_when_these_break)%20return%20vm.exports.i_will_not_ask_for_help_when_these_break()%3B%0A%20%20%20%20else%20if%20(vm.exports.JSGenerator%20%26%26%20vm.exports.IRGenerator%3F.exports)%20return%20%7B%0A%20%20%20%20%20%20...vm.exports%2C%20ScriptTreeGenerator%3A%20vm.exports.IRGenerator.exports.ScriptTreeGenerator%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20const%20exports%20%3D%20getExports()%3B%0A%20%20if%20(exports)%20%7B%0A%20%20%20%20const%20sanitize%20%3D%20string%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(typeof%20string%20!%3D%3D%20%22string%22)%20%7B%0A%20%20%20%20%20%20%20%20console.warn(%60sanitize%20got%20unexpected%20type%3A%20%24%7Btypeof%20string%7D%60)%3B%0A%20%20%20%20%20%20%20%20string%20%3D%20%22%22%20%2B%20string%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20JSON.stringify(string).slice(1%2C%20-1)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20Thread%20%3D%20exports.Thread%3B%20execute%20%3D%20exports.execute%3B%0A%20%20%20%20const%20%7B%20JSGenerator%2C%20ScriptTreeGenerator%20%7D%20%3D%20exports%3B%0A%20%20%20%20const%20exp%20%3D%20JSGenerator.exports%20%3D%3D%3D%20undefined%20%3F%20JSGenerator.unstable_exports%20%3A%20JSGenerator.exports%3B%0A%20%20%20%20if%20(!isPM)%20%7B%0A%20%20%20%20%20%20JSGenerator.prototype.isLastBlockInLoop%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%20this.frames.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20frame%20%3D%20this.frames%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(frame.mbpRunningBranch)%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!frame.isLastBlock)%20return%20false%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(frame.isLoop)%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20const%20_ogIRdescendStack%20%3D%20ScriptTreeGenerator.prototype.descendStackedBlock%3B%0A%20%20%20%20ScriptTreeGenerator.prototype.descendStackedBlock%20%3D%20function(block)%20%7B%0A%20%20%20%20%20%20switch%20(block.opcode)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22procedures_call%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20proc%20%3D%20block.mutation.proccode%3B%0A%20%20%20%20%20%20%20%20%20%20const%20store%20%3D%20storeGet(proc%2C%20this.target.sprite.clones%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!this.thread%5BtargetProcData%5D)%20this.thread%5BtargetProcData%5D%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20%20%20this.thread%5BtargetProcData%5D%5Bproc%5D%20%3D%20%7B%20block%2C%20store%20%7D%3B%20%2F%2F%20attach%20some%20data%20we%20need%0A%20%20%20%20%20%20%20%20%20%20if%20(!store%20%7C%7C%20!store.inputs)%20return%20_ogIRdescendStack.call(this%2C%20block)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20ignore%20branches%20temporarily%0A%20%20%20%20%20%20%20%20%20%20const%20argIds%20%3D%20JSON.parse(block.mutation.argumentids)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20appenders%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20const%20tempBlock%20%3D%20structuredClone(block)%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20argIds.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20input%20%3D%20block.inputs%5BargIds%5Bi%5D%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(store.inputs%5Binput%3F.name%5D%3F.type%20%3D%3D%3D%20%22brc%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20appenders.push(%5Bi%2C%20input.block%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20delete%20tempBlock.inputs%5Binput.name%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20this.thread%5BtargetProcData%5D%5Bproc%5D.appenders%20%3D%20appenders%3B%0A%20%20%20%20%20%20%20%20%20%20const%20node%20%3D%20_ogIRdescendStack.call(this%2C%20tempBlock)%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20appenders.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20node.arguments%5Bappenders%5Bi%5D%5B0%5D%5D%20%3D%20%7B%20kind%3A%20%22constant%22%2C%20mbpKey%3A%20true%2C%20value%3A%20this.walkStack(appenders%5Bi%5D%5B1%5D)%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20node%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20case%20%22SPmbpCST_setParam%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20paramIndex%20%3D%20this.script.arguments.lastIndexOf(block.fields.PARAM.value)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(paramIndex%20%3D%3D%3D%20-1)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20paramIndex%20%3D%20this.script.arguments.length%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.script.arguments.push(block.fields.PARAM.value)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20kind%3A%20%22SPmbpCST.setParam%22%2C%20paramIndex%2C%20val%3A%20this.descendInputOfBlock(block%2C%20%22VALUE%22)%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20case%20%22SPmbpCST_evalParam%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20node%20%3D%20%7B%20kind%3A%20%22SPmbpCST.evalParam%22%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!this.thread%5BtargetProcData%5D)%20return%20node%3B%0A%20%20%20%20%20%20%20%20%20%20const%20procData%20%3D%20this.thread%5BtargetProcData%5D%5Bthis.script.procedureCode%5D%3B%0A%20%20%20%20%20%20%20%20%20%20const%20procedureBlock%20%3D%20procData%3F.block%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(procedureBlock)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20paramIndex%20%3D%20this.script.arguments.lastIndexOf(block.fields.PARAM.value)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20argIds%20%3D%20JSON.parse(procedureBlock.mutation.argumentids)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(paramIndex%20%3E%20-1)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20arg%20%3D%20procedureBlock.inputs%5BargIds%5BparamIndex%5D%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(arg%3F.block%20!%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20input%20%3D%20this.target.blocks.getBlock(arg.block)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20node%5B%22input%22%5D%20%3D%20this.descendInput(input)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20node%5B%22index%22%5D%20%3D%20paramIndex%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20node%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20case%20%22SPmbpCST_runBranch%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20node%20%3D%20%7B%20kind%3A%20%22SPmbpCST.runBranch%22%2C%20index%3A%20this.descendInputOfBlock(block%2C%20%22INDEX%22)%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!this.thread%5BtargetProcData%5D)%20return%20node%3B%0A%20%20%20%20%20%20%20%20%20%20const%20procData%20%3D%20this.thread%5BtargetProcData%5D%5Bthis.script.procedureCode%5D%3B%0A%20%20%20%20%20%20%20%20%20%20const%20procedureBlock%20%3D%20procData%3F.block%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(procedureBlock)%20node.appenders%20%3D%20procData.appenders%3B%0A%20%20%20%20%20%20%20%20%20%20return%20node%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20default%3A%20return%20_ogIRdescendStack.call(this%2C%20block)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20const%20_ogIRdescendInp%20%3D%20ScriptTreeGenerator.prototype.descendInput%3B%0A%20%20%20%20ScriptTreeGenerator.prototype.descendInput%20%3D%20function(block)%20%7B%0A%20%20%20%20%20%20if%20(block.opcode%20%3D%3D%3D%20%22SPmbpCST_getParam%22)%20return%20%7B%20kind%3A%20%22SPmbpCST.getParam%22%2C%20param%3A%20this.descendInputOfBlock(block%2C%20%22PARAM%22)%20%7D%3B%0A%20%20%20%20%20%20else%20return%20_ogIRdescendInp.call(this%2C%20block)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20const%20_ogJSdescendStack%20%3D%20JSGenerator.prototype.descendStackedBlock%3B%0A%20%20%20%20JSGenerator.prototype.descendStackedBlock%20%3D%20function(node)%20%7B%0A%20%20%20%20%20%20switch%20(node.kind)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22procedures.call%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20This%20also%20gets%20Global%20Procedures%20to%20work%20for%20some%20reason%0A%20%20%20%20%20%20%20%20%20%20const%20argIndexes%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20let%20forceYield%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20const%20ogSource%20%3D%20this.source%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20node.arguments.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20arg%20%3D%20node.arguments%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!arg.value%20%7C%7C%20!arg.mbpKey)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.source%20%3D%20%22%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.currentFrame.mbpRunningBranch%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.descendStack(arg.value%2C%20new%20exp.Frame(false%2C%20%22control.if%22%2C%20true))%3B%20%2F%2F%203rd%20param%20used%20by%20PM%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.script.yields)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20arg.value%20%3D%20%60function*%20()%20%7B%20%24%7Bthis.source%7D%20%7D%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20forceYield%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20arg.value%20%3D%20%60()%20%3D%3E%20%7B%20%24%7Bthis.source%7D%20%7D%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20argIndexes.push(i)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20this.source%20%3D%20ogSource%3B%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(argIndexes.length)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20transform%20the%20branch%20string%20to%20a%20function%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20modified%20from%20https%3A%2F%2Fgithub.com%2FTurboWarp%2Fscratch-vm%2Fblob%2Fdevelop%2Fsrc%2Fcompiler%2Fjsgen.js%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20procedureCode%20%3D%20node.code%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20procedureVariant%20%3D%20node.variant%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20procedureData%20%3D%20this.ir.procedures%5BprocedureVariant%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(procedureData.stack%20%3D%3D%3D%20null)%20break%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20yieldForRecursion%20%3D%20!this.isWarp%20%26%26%20procedureCode%20%3D%3D%3D%20this.script.procedureCode%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(yieldForRecursion)%20this.yieldNotWarp()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(procedureData.yields%20%7C%7C%20forceYield)%20this.source%20%2B%3D%20%22yield*%20%22%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20this.source%20%2B%3D%20%60thread.procedures%5B%22%24%7Bsanitize(procedureVariant)%7D%22%5D(%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20args%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20node.arguments.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20input%20%3D%20node.arguments%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(argIndexes.indexOf(i)%20%3E%20-1)%20args.push(input.value)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20args.push(this.descendInput(input).asSafe())%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.source%20%2B%3D%20args.join(%22%2C%22)%20%2B%20%22)%3B%5Cn%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.resetVariableInputs()%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(forceYield)%20this.ir.procedures%5BprocedureVariant%5D.yields%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20return%20_ogJSdescendStack.call(this%2C%20node)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20case%20%22SPmbpCST.setParam%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20val%20%3D%20this.descendInput(node.val)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20i%20%3D%20node.paramIndex%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(i%20!%3D%3D%20undefined%20%26%26%20i%20!%3D%3D%20-1)%20this.source%20%2B%3D%20%60p%24%7Bi%7D%20%3D%20%24%7Bval.asSafe()%7D%3B%5Cn%60%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20case%20%22SPmbpCST.evalParam%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(node.input%20%3D%3D%3D%20undefined)%20break%3B%0A%20%20%20%20%20%20%20%20%20%20const%20val%20%3D%20this.descendInput(node.input)%3B%0A%20%20%20%20%20%20%20%20%20%20this.source%20%2B%3D%20%60p%24%7Bnode.index%7D%20%3D%20%24%7Bval.asUnknown()%7D%3B%5Cn%60%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20case%20%22SPmbpCST.runBranch%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(this.isProcedure)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20index%20%3D%20this.localVariables.next()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.source%20%2B%3D%20%60const%20%24%7Bindex%7D%20%3D%20%24%7Bthis.descendInput(node.index).asNumber()%7D%20-%201%3B%5Cn%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.source%20%2B%3D%20%60switch%20(%24%7Bindex%7D.toString())%20%7B%5Cn%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20node.appenders.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20argInd%20%3D%20node.appenders%5Bi%5D%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.source%20%2B%3D%20%60case%20%22%24%7Bi%7D%22%3A%20%7B%5Cn%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.script.yields)%20this.source%20%2B%3D%20%60yield*%20p%24%7BargInd%7D()%3B%5Cn%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20this.source%20%2B%3D%20%60p%24%7BargInd%7D()%3B%5Cn%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.source%20%2B%3D%20%60break%3B%5Cn%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.source%20%2B%3D%20%60%7D%5Cn%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.source%20%2B%3D%20%60%7D%5Cn%60%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20default%3A%20return%20_ogJSdescendStack.call(this%2C%20node)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20const%20_ogJSdescendInp%20%3D%20JSGenerator.prototype.descendInput%3B%0A%20%20%20%20JSGenerator.prototype.descendInput%20%3D%20function(node)%20%7B%0A%20%20%20%20%20%20if%20(node.kind%20%3D%3D%3D%20%22SPmbpCST.getParam%22)%20%7B%0A%20%20%20%20%20%20%20%20const%20val%20%3D%20this.descendInput(node.param).asSafe()%3B%0A%20%20%20%20%20%20%20%20return%20new%20exp.TypedInput(%60(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20a%20%3D%20%24%7BJSON.stringify(this.script.arguments)%7D%2C%20v%20%3D%20%24%7Bval%7D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(typeof%20v%20!%3D%3D%20'string')%20v%20%3D%20(v).toString()%3B%0A%20%20%20%20%20%20%20%20%20%20const%20i%20%3D%20a.indexOf(v)%3B%0A%20%20%20%20%20%20%20%20%20%20return%20i%20%3E%20-1%20%3F%20arguments%5Bi%5D.toString()%20%3A%20%22%22%3B%0A%20%20%20%20%20%20%20%20%7D)()%60%2C%20exp.TYPE_STRING)%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(node.kind%20%3D%3D%3D%20%22procedures.call%22)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20gets%20Global%20Procedures%20to%20work%20for%20some%20reason%0A%20%20%20%20%20%20%20%20return%20_ogJSdescendInp.call(this%2C%20node)%3B%0A%20%20%20%20%20%20%7D%20else%20return%20_ogJSdescendInp.call(this%2C%20node)%3B%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20ScratchBlocks%20and%20Editor%20Patches%0A%20%20function%20syncFieldColors(block)%20%7B%0A%20%20%20%20for%20(const%20input%20of%20block.inputList)%20%7B%0A%20%20%20%20%20%20for%20(const%20field%20of%20input%3F.fieldRow)%20%7B%0A%20%20%20%20%20%20%20%20if%20(field.arrow_)%20%7B%20%2F%2F%20dropdown%20fields%0A%20%20%20%20%20%20%20%20%20%20if%20(field.sourceBlock_.isShadow())%20field.sourceBlock_.clearShadowColour()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(field.box_)%20%7B%20%2F%2F%20text%20input%20fields%20and%20round%20dropdowns%0A%20%20%20%20%20%20%20%20%20%20field.box_.setAttribute(%22fill%22%2C%20field.sourceBlock_.getColour())%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(field.box_.hasAttribute(%22stroke%22))%20field.box_.setAttribute(%22stroke%22%2C%20field.sourceBlock_.getColourTertiary())%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%20for%20shadow%20blocks%2C%20inherit%20the%20tertiary%20color%0A%20%20%20%20%20%20if%20(input%3F.connection%3F.targetConnection%3F.sourceBlock_)%20%7B%0A%20%20%20%20%20%20%20%20const%20otherBlock%20%3D%20input%3F.connection%3F.targetConnection%3F.sourceBlock_%3B%0A%20%20%20%20%20%20%20%20if%20(otherBlock.isShadow())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20penguinmod%20doesnt%20have%20quaternary%20colors%20yet%0A%20%20%20%20%20%20%20%20%20%20if%20(isPM)%20otherBlock.setColour(otherBlock.getColour()%2C%20otherBlock.getColourSecondary()%2C%20block.getColourTertiary())%3B%0A%20%20%20%20%20%20%20%20%20%20else%20otherBlock.setColour(otherBlock.getColour()%2C%20otherBlock.getColourSecondary()%2C%20block.getColourTertiary()%2C%20otherBlock.getColourQuaternary())%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20if%20(Scratch.gui)%20Scratch.gui.getBlockly().then(SB%20%3D%3E%20%7B%0A%20%20%20%20const%20recolorables%20%3D%20%5B%0A%20%20%20%20%20%20%22argument_reporter_string_number%22%2C%20%22argument_reporter_boolean%22%2C%0A%20%20%20%20%20%20%22SPmbpCST_setParam%22%2C%20%22SPmbpCST_getParam%22%2C%20%22SPmbpCST_runBranch%22%2C%0A%20%20%20%20%20%20%22SPmbpCST_evalParam%22%2C%20%22procedures_return%22%2C%0A%20%20%20%20%20%20%2F%2F%20penguinmod%0A%20%20%20%20%20%20%22procedures_definition_return%22%2C%20%22procedures_set%22%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20let%20domToBlockXml%20%3D%20null%3B%0A%20%20%20%20const%20oldDTBH%20%3D%20SB.Xml.domToBlockHeadless_%3B%0A%20%20%20%20SB.Xml.domToBlockHeadless_%20%3D%20function(...args)%20%7B%0A%20%20%20%20%20%20domToBlockXml%20%3D%20args%5B0%5D%3B%0A%20%20%20%20%20%20const%20returnValue%20%3D%20oldDTBH.apply(this%2C%20args)%3B%0A%20%20%20%20%20%20domToBlockXml%20%3D%20null%3B%0A%20%20%20%20%20%20return%20returnValue%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20oldScrollToCategory%20%3D%20SB.Toolbox.prototype.scrollToCategoryById%3B%0A%20%20%20%20SB.Toolbox.prototype.scrollToCategoryById%20%3D%20function(id)%20%7B%0A%20%20%20%20%20%20if%20(id%20%3D%3D%3D%20%22myBlocks%22%20%26%26%20shouldScrollToMBP)%20%7B%0A%20%20%20%20%20%20%20%20shouldScrollToMBP%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20id%20%3D%20%22SPmbpCST%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20oldScrollToCategory.call(this%2C%20id)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20utils%20%3D%20SB.ScratchBlocks.ProcedureUtils%3B%0A%20%20%20%20const%20ogUpdateDisplay%20%3D%20utils.updateDisplay_%3B%0A%20%20%20%20utils.updateDisplay_%20%3D%20function()%20%7B%0A%20%20%20%20%20%20if%20(extensionRemovable)%20return%20ogUpdateDisplay.call(this)%3B%0A%20%20%20%20%20%20const%20store%20%3D%20this.SPmbpCST_store%20%7C%7C%20storeGet(this.procCode_)%3B%0A%20%20%20%20%20%20if%20(store.color%20%26%26%20!this.isInsertionMarker())%20%7B%0A%20%20%20%20%20%20%20%20const%20blockColor%20%3D%20themeifyColor(store.color)%3B%0A%20%20%20%20%20%20%20%20this.setColour(...blockColor)%3B%0A%20%20%20%20%20%20%20%20if%20(isPM)%20this.color%20%3D%20blockColor%0A%20%20%20%20%20%20%20%20if%20(this.type%20%3D%3D%3D%20%22procedures_prototype%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Recolor%20argument%20reporters%20and%20the%20define%20block%20to%20the%20block%20color%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Disable%20branch%20inputs%0A%20%20%20%20%20%20%20%20%20%20this.setColour(...themeifyColor(store.color))%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20ScratchBlocks%20ways%20of%20getting%20the%20parent%20block%20won't%20work%20while%20the%20blocks%20are%20being%20created%0A%20%20%20%20%20%20%20%20%20%20queueMicrotask(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20defineBlock%20%3D%20this.getParent()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!defineBlock)%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20defineBlock.setColour(...themeifyColor(store.color))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20syncFieldColors(defineBlock)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20children%20%3D%20this.inputList.filter((item%2C%20i)%20%3D%3E%20item.connection%20!%3D%3D%20null)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20children.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!children%5Bi%5D.connection)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20child%20%3D%20children%5Bi%5D.connection.targetBlock()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(store.inputs)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20type%20%3D%20store.inputs%5Bthis.argumentIds_%5Bi%5D%5D%3F.type%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(type%20%3D%3D%3D%20%22brc%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20child.setOutputShape(3)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20child.setNextStatement(false)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20child.setMovable(false)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20child%5BtargetProcData%5D%20%3D%20%22branchDrag%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(recolorables.includes(child.type))%20updateArgumentReporterColor(child%2C%20defineBlock)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20Recolor%20dropdowns%20to%20the%20block%20color%0A%20%20%20%20%20%20%20%20if%20(this.type%20%3D%3D%3D%20%22procedures_call%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20queueMicrotask(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(const%20child%20of%20this.getChildren())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(child.isShadow()%20%26%26%20child.outputConnection%20%26%26%20!isNormalInput(child.type))%20child.setColour(...themeifyColor(store.color))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F%20Disconnect%20and%20reconnect%20the%20prototype%20from%20the%20define%20block%20when%0A%20%20%20%20%20%20%2F%2F%20changing%20the%20output%20type%20in%20PM%20because%20otherwise%20errors%20will%20happen%0A%20%20%20%20%20%20%2F%2F%20we%20have%20to%20create%20a%20new%20define%20block%20to%20change%20its%20type%0A%20%20%20%20%20%20let%20defineBlock%20%3D%20(%0A%20%20%20%20%20%20%20%20isPM%20%26%26%20this.type%20%3D%3D%3D%20%22procedures_prototype%22%20%26%26%20this.getParent()%3F.type%3F.startsWith(%22procedures_definition%22)%0A%20%20%20%20%20%20)%20%3F%20this.getParent()%20%3A%20null%3B%0A%20%20%20%20%20%20let%20savedDefConnect%20%3D%20null%2C%20savedShadow%20%3D%20null%3B%0A%20%20%20%20%20%20const%20newOpcode%20%3D%20this.output_%20%3F%20%22procedures_definition_return%22%20%3A%20%22procedures_definition%22%3B%0A%20%20%20%20%20%20if%20(isPM%20%26%26%20defineBlock%20%26%26%20defineBlock.type%20!%3D%3D%20newOpcode)%20%7B%0A%20%20%20%20%20%20%20%20savedDefConnect%20%3D%20(this.previousConnection%20%7C%7C%20this.outputConnection).targetConnection%3B%0A%20%20%20%20%20%20%20%20savedShadow%20%3D%20savedDefConnect.getShadowDom()%3B%0A%20%20%20%20%20%20%20%20const%20savedNextConnect%20%3D%20defineBlock.nextConnection%3F.targetConnection%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Remove%20the%20shadow%20DOM%2C%20then%20disconnect%20the%20block.%20%20Otherwise%20a%20shadow%20block%0A%20%20%20%20%20%20%20%20%2F%2F%20will%20respawn%20instantly%2C%20and%20we'd%20have%20to%20remove%20it%20when%20we%20remove%20the%20input.%0A%20%20%20%20%20%20%20%20savedNextConnect%3F.disconnect()%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Recreate%20the%20define%20block%20with%20a%20changed%20type%0A%20%20%20%20%20%20%20%20const%20ws%20%3D%20defineBlock.workspace%3B%0A%20%20%20%20%20%20%20%20const%20xml%20%3D%20SB.Xml.blockToDom(defineBlock)%3B%0A%20%20%20%20%20%20%20%20const%20position%20%3D%20defineBlock.getRelativeToSurfaceXY()%3B%0A%20%20%20%20%20%20%20%20xml.setAttribute(%22type%22%2C%20newOpcode)%3B%0A%20%20%20%20%20%20%20%20defineBlock.dispose()%3B%0A%20%20%20%20%20%20%20%20defineBlock%20%3D%20SB.Xml.domToBlock(xml%2C%20ws)%3B%0A%20%20%20%20%20%20%20%20defineBlock.moveBy(position.x%2C%20position.y)%3B%0A%20%20%20%20%20%20%20%20if%20(savedNextConnect)%20savedNextConnect.connect(defineBlock.nextConnection)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20ogUpdateDisplay.call(this)%3B%0A%0A%20%20%20%20%20%20%2F%2F%20turn%20branch%20and%20image%20inputs%20into%20branches%20and%20images%0A%20%20%20%20%20%20%2F%2F%20(doing%20it%20in%20attachShadow%20makes%20it%20not%20work%20on%20further%20updates)%0A%20%20%20%20%20%20if%20(store%3F.inputs%20%26%26%20this.type%20!%3D%3D%20%22procedures_declaration%22)%20for%20(let%20i%20%3D%20this.inputList.length%3B%20i--%3B)%20%7B%0A%20%20%20%20%20%20%20%20const%20input%20%3D%20this.inputList%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20const%20type%20%3D%20store.inputs%5Binput.name%5D%3F.type%3B%0A%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20(input.type%20!%3D%3D%20SB.NEXT_STATEMENT%20%26%26%20type%20%3D%3D%3D%20%22brc%22)%20%7C%7C%20(input.type%20!%3D%3D%20SB.DUMMY_INPUT%20%26%26%20type%20%3D%3D%3D%20%22img%22)%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20for%20Prototype%20blocks%20we%20just%20use%20a%20static%20square%20block%20as%20a%20visual%20representation%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20for%20branch%20inputs%2C%20this%20is%20done%20in%20'updateDisplay_'%0A%20%20%20%20%20%20%20%20%20%20if%20(type%20%3D%3D%3D%20%22brc%22%20%26%26%20this.type%20%3D%3D%3D%20%22procedures_prototype%22)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20let%20connection%2C%20newInput%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(type%20%3D%3D%3D%20%22brc%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20connection%20%3D%20this.makeConnection_(SB.NEXT_STATEMENT)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(isPM)%20connection.setCheck(%22normal%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20newInput%20%3D%20new%20SB.Input(SB.NEXT_STATEMENT%2C%20input.name%2C%20this%2C%20connection)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20imageURL%20%3D%20getStoredImage(store.inputs%5Binput.name%5D.src)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20newInput%20%3D%20new%20SB.Input(SB.DUMMY_INPUT%2C%20%22%22%2C%20this)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20newInput.appendField(new%20ScratchBlocks.FieldImage(imageURL%2C%2025%2C%2025))%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Remove%20the%20old%20input...%0A%20%20%20%20%20%20%20%20%20%20if%20(input.connection%20%26%26%20input.connection.isConnected())%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20input.connection.setShadowDom(null)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20block%20%3D%20input.connection.targetBlock()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(block.isShadow())%20block.dispose()%3B%20%2F%2F%20Destroy%20any%20attached%20shadow%20block%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20block.unplug()%3B%20%2F%2F%20Disconnect%20any%20attached%20normal%20block%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20input.dispose()%3B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20...but%20replace%20it%20with%20the%20new%20one%20in%20place%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20(calling%20removeInput()%20shifts%20all%20elements%20of%20inputList%20which%20is%20a%20bit%20slower)%0A%20%20%20%20%20%20%20%20%20%20if%20(type%20%3D%3D%3D%20%22brc%22%20%26%26%20(isPM%20%3F%20this.output_%20%3A%20this.getReturn()))%20this.inputList.splice(i%2C%201)%3B%0A%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(i%20%7C%7C%20type%20%3D%3D%3D%20%22img%22)%20this.inputList%5Bi%5D%20%3D%20newInput%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20fix%20weird%20visual%20glitch%20with%20a%20branch%20as%20the%20first%20input%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.inputList%5Bi%5D%20%3D%20this.appendDummyInput()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.inputList.push(newInput)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(savedDefConnect)%20%7B%0A%20%20%20%20%20%20%20%20savedDefConnect%20%3D%20defineBlock.getInput(%22custom_block%22).connection%3B%0A%20%20%20%20%20%20%20%20(this.previousConnection%20%7C%7C%20this.outputConnection).connect(savedDefConnect)%3B%0A%20%20%20%20%20%20%20%20savedDefConnect.setShadowDom(savedShadow)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(!this.isInsertionMarker())%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20ScratchBlocks%20ways%20of%20getting%20the%20next%20block%20won't%20work%20while%20the%20blocks%20are%20being%20created%0A%20%20%20%20%20%20%20%20const%20actualNextBlock%20%3D%20this.getNextBlock()%20%7C%7C%20vm%3F.editingTarget%3F.blocks%3F.getBlock(this.id)%3F.next%20%7C%7C%20(domToBlockXml%20%26%26%20domToBlockXml.querySelector(%22next%22))%3B%0A%20%20%20%20%20%20%20%20const%20isReturner%20%3D%20isPM%20%3F%20this.output_%20%3A%20this.return_%3B%0A%20%20%20%20%20%20%20%20if%20(!store.isTerminal%20!%3D%3D%20undefined%20%26%26%20!isReturner%20%26%26%20!actualNextBlock)%20%7B%0A%20%20%20%20%20%20%20%20%20%20this.setNextStatement(%0A%20%20%20%20%20%20%20%20%20%20%20%20!store.isTerminal%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20this.type%20%3D%3D%3D%20%22procedures_prototype%22%20%3F%20true%20%3A%20isPM%20%3F%20%22normal%22%20%3A%20undefined%0A%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20The%20insertion%20marker%20should%20copy%20the%20terminal-ness%20of%20the%20source%20block%2C%0A%20%20%20%20%20%20%20%20%2F%2F%20otherwise%20Blockly%20will%20throw%20an%20error%0A%20%20%20%20%20%20%20%20const%20targetBlock%20%3D%20this.workspace%3F.currentGesture_%3F.targetBlock_%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20targetBlock%20doesn't%20exist%20when%20dragging%20to%20the%20start%20of%20a%20stack%0A%20%20%20%20%20%20%20%20%2F%2F%20In%20this%20case%2C%20it%20should%20always%20be%20a%20stack%20block%0A%20%20%20%20%20%20%20%20this.setNextStatement(targetBlock%20%3F%20!!targetBlock%3F.nextConnection%20%3A%20true%2C%20isPM%20%3F%20%22normal%22%20%3A%20undefined)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20for%20(const%20opcode%20of%20%5B%22procedures_call%22%2C%20%22procedures_prototype%22%2C%20%22procedures_declaration%22%5D)%20%7B%0A%20%20%20%20%20%20SB.Blocks%5Bopcode%5D.updateDisplay_%20%3D%20utils.updateDisplay_%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20ogAttachShadow%20%3D%20utils.attachShadow_%3B%0A%20%20%20%20utils.attachShadow_%20%3D%20function(input%2C%20argumentType)%20%7B%0A%20%20%20%20%20%20if%20(extensionRemovable)%20return%20ogAttachShadow.call(this%2C%20input%2C%20argumentType)%3B%0A%20%20%20%20%20%20const%20store%20%3D%20this.SPmbpCST_store%20%7C%7C%20storeGet(this.getProcCode())%3B%0A%20%20%20%20%20%20if%20(!store%20%7C%7C%20!store.inputs%20%7C%7C%20!store.inputs%5Binput.name%5D)%20return%20ogAttachShadow.call(this%2C%20input%2C%20argumentType)%3B%0A%20%20%20%20%20%20const%20%7B%20opcode%2C%20fieldName%2C%20defaultValue%20%7D%20%3D%20getInputData(store.inputs%5Binput.name%5D)%3B%0A%20%20%20%20%20%20if%20(!opcode)%20return%20ogAttachShadow.call(this%2C%20input%2C%20argumentType)%3B%0A%20%20%20%20%20%20if%20(opcode%20%3D%3D%3D%20%22brc%22%20%7C%7C%20opcode%20%3D%3D%3D%20%22emp%22%20%7C%7C%20opcode%20%3D%3D%3D%20%22img%22)%20return%3B%20%2F%2F%20these%20are%20special%0A%0A%20%20%20%20%20%20%2F%2F%20Add%20custom%20inputs%0A%20%20%20%20%20%20const%20blockType%20%3D%20opcode%3B%0A%20%20%20%20%20%20SB.Events.disable()%3B%0A%20%20%20%20%20%20let%20newBlock%3B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20newBlock%20%3D%20this.workspace.newBlock(blockType)%3B%0A%20%20%20%20%20%20%20%20if%20(fieldName)%20newBlock.setFieldValue(defaultValue%20instanceof%20Function%20%3F%20defaultValue()%20%3A%20defaultValue%2C%20fieldName)%3B%0A%20%20%20%20%20%20%20%20newBlock.setShadow(true)%3B%0A%20%20%20%20%20%20%20%20if%20(!this.isInsertionMarker())%20%7B%0A%20%20%20%20%20%20%20%20%20%20newBlock.initSvg()%3B%0A%20%20%20%20%20%20%20%20%20%20newBlock.render(false)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20finally%20%7B%0A%20%20%20%20%20%20%20%20SB.Events.enable()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(SB.Events.isEnabled())%20SB.Events.fire(new%20SB.Events.BlockCreate(newBlock))%3B%0A%20%20%20%20%20%20newBlock%3F.outputConnection%3F.connect(input.connection)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20SB.Blocks%5B%22procedures_call%22%5D.attachShadow_%20%3D%20utils.attachShadow_%3B%0A%0A%20%20%20%20const%20ogPopArg%20%3D%20utils.populateArgumentOnCaller_%3B%0A%20%20%20%20utils.populateArgumentOnCaller_%20%3D%20function(type%2C%20index%2C%20connectionMap%2C%20id%2C%20input)%20%7B%0A%20%20%20%20%20%20%2F%2F%20https%3A%2F%2Fgithub.com%2FTurboWarp%2Fscratch-blocks%2Fblob%2Fdevelop%2Fblocks_vertical%2Fprocedures.js%23L445%0A%20%20%20%20%20%20var%20oldBlock%20%3D%20null%2C%20oldShadow%20%3D%20null%3B%0A%20%20%20%20%20%20if%20(connectionMap%20%26%26%20(id%20in%20connectionMap))%20%7B%0A%20%20%20%20%20%20%20%20var%20saveInfo%20%3D%20connectionMap%5Bid%5D%3B%0A%20%20%20%20%20%20%20%20oldBlock%20%3D%20saveInfo%5B%22block%22%5D%3B%0A%20%20%20%20%20%20%20%20oldShadow%20%3D%20saveInfo%5B%22shadow%22%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(connectionMap%20%26%26%20oldBlock)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Reattach%20the%20old%20block%20and%20shadow%20DOM.%0A%20%20%20%20%20%20%20%20connectionMap%5Binput.name%5D%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20if%20(oldShadow%20%3D%3D%3D%20null%20%26%26%20oldBlock.outputConnection%20%3D%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20this%20is%20a%20branch%0A%20%20%20%20%20%20%20%20%20%20const%20parent%20%3D%20input.connection.sourceBlock_%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(isPM%20%26%26%20this.output_)%20return%3B%0A%20%20%20%20%20%20%20%20%20%20const%20branchIndex%20%3D%20parent.inputList.indexOf(input)%3B%0A%20%20%20%20%20%20%20%20%20%20parent.inputList%5BbranchIndex%5D.connection.type%20%3D%203%3B%0A%20%20%20%20%20%20%20%20%20%20parent.inputList%5BbranchIndex%5D.type%20%3D%203%3B%0A%20%20%20%20%20%20%20%20%20%20parent.inputList%5BbranchIndex%5D.connection.connect(oldBlock.previousConnection)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20oldBlock.outputConnection.connect(input.connection)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(type%20!%3D%20%22b%22%20%26%26%20this.generateShadows_)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20shadowDom%20%3D%20oldShadow%20%7C%7C%20this.buildShadowDom_(type)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20input.connection.setShadowDom(shadowDom)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20if%20(this.generateShadows_)%20%7B%0A%20%20%20%20%20%20%20%20this.attachShadow_(input%2C%20type)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20SB.Blocks%5B%22procedures_call%22%5D.populateArgument_%20%3D%20utils.populateArgumentOnCaller_%3B%0A%0A%20%20%20%20function%20updateArgumentReporterColor(block%2C%20defineBlock%20%3D%20null)%20%7B%0A%20%20%20%20%20%20%2F%2F%20Just%20stopped%20dragging%20(and%20dropping)%2C%20update%20color%20according%20to%20the%20top%20define%20block%0A%20%20%20%20%20%20if%20(extensionRemovable)%20return%3B%0A%20%20%20%20%20%20if%20(!defineBlock)%20%7B%0A%20%20%20%20%20%20%20%20defineBlock%20%3D%20block%3B%0A%20%20%20%20%20%20%20%20while%20(defineBlock%3F.getParent())%20%7B%20defineBlock%20%3D%20defineBlock%3F.getParent()%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(defineBlock%3F.type.startsWith(%22procedures_definition%22))%20%7B%0A%20%20%20%20%20%20%20%20if%20(block%5BtargetProcData%5D%20%3D%3D%3D%20%22branchDrag%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20block.setColour(defineBlock.colourSecondary_%2C%20defineBlock.colourSecondary_%2C%20defineBlock.colourTertiary_)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20block.setColour(defineBlock.colour_%2C%20defineBlock.colourSecondary_%2C%20defineBlock.colourTertiary_)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20block.setColour(...Object.values(SB.Colours.more))%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20syncFieldColors(block)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20ogSetDragging%20%3D%20SB.BlockSvg.prototype.setDragging%3B%0A%20%20%20%20const%20argumentReporterSetDragging%20%3D%20function(adding)%20%7B%0A%20%20%20%20%20%20if%20(!adding%20%26%26%20!extensionRemovable%20%26%26%20this.svgGroup_.classList.contains(%22blocklyDragging%22))%20%7B%0A%20%20%20%20%20%20%20%20queueMicrotask(()%20%3D%3E%20updateArgumentReporterColor(this))%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20ogSetDragging.call(this%2C%20adding)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%2F%2F%20this%20would%20run%20when%20the%20block%20is%20added%20to%20the%20workspace%0A%20%20%20%20const%20ogSetParent%20%3D%20SB.BlockSvg.prototype.setParent%3B%0A%20%20%20%20const%20argumentReporterSetParent%20%3D%20function(newParent)%20%7B%0A%20%20%20%20%20%20if%20(newParent%20%26%26%20!extensionRemovable)%20queueMicrotask(()%20%3D%3E%20updateArgumentReporterColor(this))%3B%0A%20%20%20%20%20%20ogSetParent.call(this%2C%20newParent)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20for%20(const%20opcode%20of%20recolorables)%20%7B%0A%20%20%20%20%20%20if%20(!SB.Blocks%5Bopcode%5D)%20continue%3B%0A%20%20%20%20%20%20SB.Blocks%5Bopcode%5D.setDragging%20%3D%20argumentReporterSetDragging%3B%0A%20%20%20%20%20%20SB.Blocks%5Bopcode%5D.setParent%20%3D%20argumentReporterSetParent%3B%0A%20%20%20%20%7D%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20SB.Extensions.register(%22SPmbpCST_defineColored%22%2C%20function()%20%7B%0A%20%20%20%20%20%20%20%20this.setDragging%20%3D%20argumentReporterSetDragging%3B%0A%20%20%20%20%20%20%20%20this.setParent%20%3D%20argumentReporterSetParent%3B%0A%20%20%20%20%20%20%20%20updateArgumentReporterColor(this)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%20catch%20%7B%2F*%20already%20defined%20*%2F%7D%0A%0A%20%20%20%20%2F%2F%20Turn%20procedure%20calls%20marked%20as%20cap%20blocks%20into%20cap%20blocks%20if%20they%20can%20be%20turned%20into%20cap%20blocks%0A%20%20%20%20function%20checkCapBlock(block)%20%7B%0A%20%20%20%20%20%20if%20(!block.isInsertionMarker())%20%7B%0A%20%20%20%20%20%20%20%20const%20store%20%3D%20storeGet(block.procCode_)%3B%0A%20%20%20%20%20%20%20%20if%20(store%20%26%26%20store.isTerminal%20%26%26%20block.nextConnection%20%26%26%20!block.getNextBlock())%0A%20%20%20%20%20%20%20%20%20%20block.setNextStatement(!store.isTerminal%2C%20isPM%20%3F%20%22normal%22%20%3A%20undefined)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20The%20insertion%20marker%20should%20copy%20the%20next%20connection%20of%20the%20source%20block%0A%20%20%20%20%20%20%20%20block.setNextStatement(Boolean(block.getNextBlock())%2C%20isPM%20%3F%20%22normal%22%20%3A%20undefined)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20For%20the%20previous%20block%20when%20starting%20a%20drag%20of%20the%20current%20block%0A%20%20%20%20const%20ogUnplug%20%3D%20SB.Block.prototype.unplug%3B%0A%20%20%20%20const%20procCallUnplug%20%3D%20function(opt_healStack)%20%7B%0A%20%20%20%20%20%20if%20(extensionRemovable%20%7C%7C%20this.isInsertionMarker()%20%7C%7C%20this.getParent()%3F.isInsertionMarker())%20return%20ogUnplug.call(this%2C%20opt_healStack)%3B%0A%20%20%20%20%20%20const%20parent%20%3D%20this.getParent()%3B%0A%20%20%20%20%20%20ogUnplug.call(this%2C%20opt_healStack)%3B%0A%20%20%20%20%20%20checkCapBlock(this)%3B%0A%20%20%20%20%20%20if%20(parent)%20checkCapBlock(parent)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20SB.Blocks%5B%22procedures_call%22%5D.unplug%20%3D%20procCallUnplug%3B%0A%0A%20%20%20%20%2F%2F%20Copy%20the%20define%20block's%20argument%20color%20when%20dragging%20an%20argument%20reporter%0A%20%20%20%20const%20oldDuplicateOnDrag_%20%3D%20SB.Gesture.prototype.duplicateOnDrag_%3B%0A%20%20%20%20SB.Gesture.prototype.duplicateOnDrag_%20%3D%20function()%20%7B%0A%20%20%20%20%20%20const%20source%20%3D%20this.targetBlock_%3B%0A%20%20%20%20%20%20oldDuplicateOnDrag_.call(this)%3B%0A%20%20%20%20%20%20const%20duplicated%20%3D%20this.targetBlock_%3B%0A%20%20%20%20%20%20if%20(source%20%26%26%20duplicated%20%26%26%20source.type.startsWith(%22argument_reporter_%22))%0A%20%20%20%20%20%20%20%20duplicated.setColour(source.colour_%2C%20source.colourSecondary_%2C%20source.colourTertiary_)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Disable%20branch%20argument%20reporter%20dragging%0A%20%20%20%20const%20oldstartDragging_%20%3D%20SB.Gesture.prototype.startDraggingBlock_%3B%0A%20%20%20%20SB.Gesture.prototype.startDraggingBlock_%20%3D%20function()%20%7B%0A%20%20%20%20%20%20const%20source%20%3D%20this.targetBlock_%3B%0A%20%20%20%20%20%20if%20(source%5BtargetProcData%5D%20%3D%3D%3D%20%22branchDrag%22)%20%7B%0A%20%20%20%20%20%20%20%20this.isDraggingBlock_%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20this.dispose()%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20oldstartDragging_.call(this)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Patch%20Procedure%20Edit%20and%20Create%20to%20also%20open%20our%20Modal%0A%20%20%20%20const%20procs%20%3D%20SB.Procedures%3B%0A%20%20%20%20const%20ogCreateCall%20%3D%20procs.createProcedureDefCallback_%3B%0A%20%20%20%20if%20(runtime.SPmbpCSTOldStorage%20%3D%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20procs.createProcedureDefCallback_%20%3D%20function(workspace)%20%7B%0A%20%20%20%20%20%20%20%20const%20sharedWork%20%3D%20SB.mainWorkspace%3B%0A%20%20%20%20%20%20%20%20ogCreateCall.call(this%2C%20workspace)%3B%0A%20%20%20%20%20%20%20%20openBlockMaker(sharedWork%2C%20false)%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20const%20ogEditCall%20%3D%20procs.editProcedureCallback_%3B%0A%20%20%20%20%20%20procs.editProcedureCallback_%20%3D%20function(block)%20%7B%0A%20%20%20%20%20%20%20%20if%20(block.type%20%3D%3D%3D%20%22procedures_call%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20isGlobal%20%3D%20globalBlocksCache%5Bblock.procCode_%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(isGlobal%20%26%26%20isGlobal.id%20!%3D%3D%20vm.editingTarget.id)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20vm.once(%22workspaceUpdate%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20blockId%20%3D%20vm.editingTarget.blocks.getProcedureDefinition(block.procCode_)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20block%20%3D%20SB.mainWorkspace.getBlockById(blockId)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20procs.editProcedureCallback_.call(this%2C%20block)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20vm.setEditingTarget(isGlobal.id)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%20%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20sharedWork%20%3D%20SB.mainWorkspace%3B%0A%20%20%20%20%20%20%20%20const%20val%20%3D%20ogEditCall.call(this%2C%20block)%3B%0A%20%20%20%20%20%20%20%20openBlockMaker(sharedWork%2C%20true)%3B%0A%20%20%20%20%20%20%20%20return%20val%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20Patch%20Procedure%20Flyout%20to%20also%20interact%20with%20the%20extension%0A%20%20%20%20const%20ogFlyoutCall%20%3D%20procs.flyoutCategory%3B%0A%20%20%20%20procs.flyoutCategory%20%3D%20function(workspace)%20%7B%0A%20%20%20%20%20%20const%20val%20%3D%20ogFlyoutCall.call(this%2C%20workspace)%3B%0A%20%20%20%20%20%20if%20(val.length%20!%3D%3D%20oldListLength)%20listNeedsRefresh%20%3D%20true%3B%0A%20%20%20%20%20%20compileProcedures(val%2C%20workspace%2C%20procs)%3B%0A%20%20%20%20%20%20return%20val%3B%0A%20%20%20%20%7D%0A%20%20%7D)%0A%0A%20%20%2F%2F%20Other%20patches%0A%20%20function%20patchTarget()%20%7B%0A%20%20%20%20%2F%2F%20create%20a%20target%20to%20patch%20Target.Blocks%0A%20%20%20%20const%20target%20%3D%20new%20vm.exports.RenderedTarget(%7Bblocks%3A%20null%7D%2C%20runtime)%3B%0A%0A%20%20%20%20const%20Blocks%20%3D%20target.blocks.constructor%3B%0A%20%20%20%20const%20oldGetProcDef%20%3D%20Blocks.prototype.getProcedureDefinition%3B%0A%20%20%20%20Blocks.prototype.getProcedureDefinition%20%3D%20function(name)%20%7B%0A%20%20%20%20%20%20const%20definition%20%3D%20oldGetProcDef.call(this%2C%20name)%3B%0A%20%20%20%20%20%20if%20(!definition%20%26%26%20globalBlocksCache%5Bname%5D%20%26%26%20globalBlocksCache%5Bname%5D.blocks%20!%3D%3D%20this)%20%7B%0A%20%20%20%20%20%20%20%20return%20globalBlocksCache%5Bname%5D.blocks.getProcedureDefinition(name)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20definition%3B%0A%20%20%20%20%7D%0A%20%20%20%20const%20oldGetBlock%20%3D%20Blocks.prototype.getBlock%3B%0A%20%20%20%20Blocks.prototype.getBlock%20%3D%20function(name)%20%7B%0A%20%20%20%20%20%20let%20thisBlock%3B%0A%0A%20%20%20%20%20%20%2F%2F%20globals%20take%20priority%0A%20%20%20%20%20%20if%20(globalTargetFocus)%20%7B%0A%20%20%20%20%20%20%20%20thisBlock%20%3D%20oldGetBlock.call(globalTargetFocus.blocks%2C%20name)%3B%0A%20%20%20%20%20%20%20%20if%20(!thisBlock%20%7C%7C%20thisBlock.next%20%3D%3D%3D%20null)%20globalTargetFocus%20%3D%20undefined%3B%0A%20%20%20%20%20%20%20%20if%20(thisBlock)%20return%20thisBlock%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20thisBlock%20%3D%20oldGetBlock.call(this%2C%20name)%3B%0A%20%20%20%20%20%20if%20(thisBlock)%20return%20thisBlock%3B%0A%0A%20%20%20%20%20%20let%20focusTarget%3B%0A%20%20%20%20%20%20for%20(const%20target%20of%20this.runtime.targets)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!target.isOriginal%20%7C%7C%20target.blocks%20%3D%3D%3D%20this)%20continue%3B%0A%20%20%20%20%20%20%20%20thisBlock%20%3D%20oldGetBlock.call(target.blocks%2C%20name)%3B%0A%20%20%20%20%20%20%20%20if%20(thisBlock)%20%7B%0A%20%20%20%20%20%20%20%20%20%20focusTarget%20%3D%20target%3B%0A%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(thisBlock%20%26%26%20globalTargetFocus%20%3D%3D%3D%20undefined)%20globalTargetFocus%20%3D%20focusTarget%3B%0A%20%20%20%20%20%20else%20if%20(!thisBlock%20%7C%7C%20thisBlock.next%20%3D%3D%3D%20null)%20globalTargetFocus%20%3D%20undefined%3B%0A%20%20%20%20%20%20return%20thisBlock%3B%0A%20%20%20%20%7D%0A%20%20%20%20const%20oldGetBranch%20%3D%20Blocks.prototype.getBranch%3B%0A%20%20%20%20Blocks.prototype.getBranch%20%3D%20function(id%2C%20branchNum)%20%7B%0A%20%20%20%20%20%20const%20thisBlock%20%3D%20oldGetBranch.call(this%2C%20id%2C%20branchNum)%3B%0A%20%20%20%20%20%20if%20(thisBlock)%20return%20thisBlock%3B%0A%20%20%20%20%20%20for%20(const%20target%20of%20this.runtime.targets)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!target.isOriginal%20%7C%7C%20target.blocks%20%3D%3D%3D%20this)%20continue%3B%0A%20%20%20%20%20%20%20%20const%20targetBlock%20%3D%20oldGetBranch.call(target.blocks%2C%20id%2C%20branchNum)%3B%0A%20%20%20%20%20%20%20%20if%20(targetBlock)%20return%20targetBlock%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20undefined%3B%0A%20%20%20%20%7D%0A%20%20%20%20const%20oldPopProcCache%20%3D%20Blocks.prototype.populateProcedureCache%3B%0A%20%20%20%20Blocks.prototype.populateProcedureCache%20%3D%20function()%20%7B%0A%20%20%20%20%20%20oldPopProcCache.call(this)%3B%0A%20%20%20%20%20%20refreshGlobalBlocksCache()%3B%0A%20%20%20%20%20%20for%20(const%20proccode%20of%20Object.keys(globalBlocksCache))%20%7B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20globalBlocksCache%5Bproccode%5D%3B%0A%20%20%20%20%20%20%20%20if%20(target.blocks%20%3D%3D%3D%20this)%20continue%3B%0A%20%20%20%20%20%20%20%20oldPopProcCache.call(target.blocks)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20add%20global%20blocks%20to%20this%20cache%20if%20they%20aren't%20present%20already%0A%20%20%20%20%20%20%20%20this._cache.procedureParamNames%5Bproccode%5D%20%3D%20target.blocks._cache.procedureParamNames%5Bproccode%5D%3B%0A%20%20%20%20%20%20%20%20this._cache.procedureDefinitions%5Bproccode%5D%20%3D%20target.blocks._cache.procedureDefinitions%5Bproccode%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20const%20oldGetInputs%20%3D%20Blocks.prototype.getInputs%3B%0A%20%20%20%20Blocks.prototype.getInputs%20%3D%20function(block)%20%7B%0A%20%20%20%20%20%20if%20(block.opcode%20!%3D%3D%20%22procedures_call%22)%20return%20oldGetInputs.call(this%2C%20block)%3B%0A%0A%20%20%20%20%20%20if%20(typeof%20block%20%3D%3D%3D%20%22undefined%22)%20return%20null%3B%0A%20%20%20%20%20%20let%20inputs%20%3D%20this._cache.inputs%5Bblock.id%5D%3B%0A%20%20%20%20%20%20if%20(typeof%20inputs%20!%3D%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20inputs%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20let%20storeTarget%20%3D%20vm.editingTarget%3B%0A%20%20%20%20%20%20for%20(const%20target%20of%20this.runtime.targets)%20%7B%0A%20%20%20%20%20%20%20%20if%20(!target.isOriginal%20%7C%7C%20target.blocks%20!%3D%3D%20this)%20continue%3B%0A%20%20%20%20%20%20%20%20storeTarget%20%3D%20target%3B%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20const%20store%20%3D%20storeGet(block.mutation.proccode%2C%20storeTarget)%3B%0A%20%20%20%20%20%20inputs%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20for%20(const%20input%20in%20block.inputs)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Ignore%20blocks%20prefixed%20with%20branch%20prefix%2C%20and%20custom%20branch%20inputs.%0A%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20!store.inputs%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20input.substring(0%2C%20Blocks.BRANCH_INPUT_PREFIX.length)%20!%3D%3D%20Blocks.BRANCH_INPUT_PREFIX%0A%20%20%20%20%20%20%20%20%20%20%20%20%26%26%20!(store.inputs%5Binput%5D%20%26%26%20store.inputs%5Binput%5D.type%20%3D%3D%3D%20%22brc%22)%0A%20%20%20%20%20%20%20%20%20%20)%20inputs%5Binput%5D%20%3D%20block.inputs%5Binput%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this._cache.inputs%5Bblock.id%5D%20%3D%20inputs%3B%0A%20%20%20%20%20%20return%20inputs%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20patchTarget()%3B%0A%0A%20%20if%20(runtime.targets.length)%20%7B%0A%20%20%20%20%2F%2F%20Make%20the%20extension%20stay%20by%20adding%20a%20dummy%20block%0A%20%20%20%20const%20blocks%20%3D%20runtime.targets%5B0%5D.blocks%3B%0A%20%20%20%20blocks._blocks%5BTEMP_BLOCK_OPCODE%5D%20%3D%20%7B%0A%20%20%20%20%20%20opcode%3A%20TEMP_BLOCK_OPCODE%2C%20id%3A%20TEMP_BLOCK_OPCODE%2C%20fields%3A%20%7B%7D%2C%0A%20%20%20%20%20%20next%3A%20null%2C%20parent%3A%20null%2C%20shadow%3A%20true%2C%20toLevel%3A%20true%2C%0A%20%20%20%20%20%20x%3A%20undefined%2C%20y%3A%20undefined%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F%2F%20project%20loaded%2C%20add%20in%20the%20temp%20block%20if%20it%20isnt%20there%0A%20%20runtime.once(%22PROJECT_LOADED%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20for%20(const%20target%20of%20runtime.targets)%20%7B%0A%20%20%20%20%20%20const%20blocks%20%3D%20Object.values(target.blocks._blocks)%0A%20%20%20%20%20%20if%20(blocks.some(block%20%3D%3E%20block.opcode%20%3D%3D%3D%20TEMP_BLOCK_OPCODE))%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20const%20blocks%20%3D%20runtime.targets%5B0%5D.blocks%3B%0A%20%20%20%20blocks._blocks%5BTEMP_BLOCK_OPCODE%5D%20%3D%20%7B%0A%20%20%20%20%20%20opcode%3A%20TEMP_BLOCK_OPCODE%2C%20id%3A%20TEMP_BLOCK_OPCODE%2C%20fields%3A%20%7B%7D%2C%0A%20%20%20%20%20%20next%3A%20null%2C%20parent%3A%20null%2C%20shadow%3A%20true%2C%20toLevel%3A%20true%2C%0A%20%20%20%20%20%20x%3A%20undefined%2C%20y%3A%20undefined%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%20%20const%20oldToJSON%20%3D%20vm.constructor.prototype.toJSON%3B%0A%20%20vm.constructor.prototype.toJSON%20%3D%20function(...args)%20%7B%0A%20%20%20%20if%20(extensionRemovable)%20return%20oldToJSON.apply(this%2C%20args)%3B%0A%20%20%20%20if%20(!isPM)%20%7B%0A%20%20%20%20%20%20%2F%2F%20penguinmod%20automatically%20does%20this%0A%20%20%20%20%20%20suspendRemoval%20%3D%20false%3B%0A%20%20%20%20%20%20removeUnusedProcs()%3B%0A%20%20%20%20%20%20removeUnusedImages()%3B%0A%20%20%20%20%20%20ext%3F.serialize()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20jsonStr%20%3D%20oldToJSON.apply(this%2C%20args)%3B%0A%20%20%20%20return%20jsonStr%3B%0A%20%20%7D%0A%0A%20%20const%20oldGetOpcode%20%3D%20runtime.getOpcodeFunction%3B%0A%20%20runtime.constructor.prototype.getOpcodeFunction%20%3D%20function(opcode)%20%7B%0A%20%20%20%20if%20(opcode%20%3D%3D%3D%20%22procedures_call%22)%20return%20patchedCallFunc%3B%0A%20%20%20%20return%20oldGetOpcode.call(this%2C%20opcode)%3B%0A%20%20%7D%0A%0A%20%20const%20patchedCallFunc%20%3D%20(args%2C%20util)%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20Patched%20Block%20code%20from%3A%0A%20%20%20%20%2F%2F%20https%3A%2F%2Fgithub.com%2FTurboWarp%2Fscratch-vm%2Fblob%2Fdevelop%2Fsrc%2Fblocks%2Fscratch3_procedures.js%23L28-L82%0A%20%20%20%20const%20thread%20%3D%20util.thread%3B%0A%20%20%20%20const%20stackFrame%20%3D%20util.stackFrame%3B%0A%20%20%20%20const%20isReporter%20%3D%20!!args.mutation.return%3B%0A%20%20%20%20if%20(stackFrame.executed)%20%7B%0A%20%20%20%20%20%20if%20(thread.isMBPPatched)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20patch%20this%20function%20for%20the%20thread%0A%20%20%20%20%20%20%20%20thread.isMBPPatched%20%3D%20undefined%3B%0A%20%20%20%20%20%20%20%20thread.target.blocks.getNextBlock%20%3D%20thread%5BtargetProcData%5D.ogNext%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(isReporter)%20%7B%0A%20%20%20%20%20%20%20%20const%20returnValue%20%3D%20stackFrame.returnValue%3B%0A%20%20%20%20%20%20%20%20const%20threadStackFrame%20%3D%20thread.peekStackFrame()%3B%0A%20%20%20%20%20%20%20%20threadStackFrame.params%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20delete%20stackFrame.returnValue%3B%0A%20%20%20%20%20%20%20%20delete%20stackFrame.executed%3B%0A%20%20%20%20%20%20%20%20return%20returnValue%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20procedureCode%20%3D%20args.mutation.proccode%3B%0A%20%20%20%20let%20isGlobal%20%3D%20globalBlocksCache%5BprocedureCode%5D%3B%0A%20%20%20%20if%20(isGlobal%20%26%26%20isGlobal.id%20%3D%3D%3D%20util.target.sprite.clones%5B0%5D.id)%20isGlobal%20%3D%20undefined%3B%0A%0A%20%20%20%20const%20paramNamesIdsAndDefaults%20%3D%20(isGlobal%20%3F%20isGlobal.blocks%20%3A%20util).getProcedureParamNamesIdsAndDefaults(procedureCode)%3B%0A%20%20%20%20if%20(paramNamesIdsAndDefaults%20%3D%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20if%20(isReporter)%20return%20%22%22%3B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20%5BparamNames%2C%20paramIds%2C%20paramDefaults%5D%20%3D%20paramNamesIdsAndDefaults%3B%0A%20%20%20%20util.initParams()%3B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20paramIds.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20if%20(Object.prototype.hasOwnProperty.call(args%2C%20paramIds%5Bi%5D))%20util.pushParam(paramNames%5Bi%5D%2C%20args%5BparamIds%5Bi%5D%5D)%3B%0A%20%20%20%20%20%20else%20util.pushParam(paramNames%5Bi%5D%2C%20paramDefaults%5Bi%5D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20addonBlock%20%3D%20util.runtime.getAddonBlock(procedureCode)%3B%0A%20%20%20%20if%20(addonBlock)%20%7B%0A%20%20%20%20%20%20const%20result%20%3D%20addonBlock.callback(thread.getAllparams()%2C%20util)%3B%0A%20%20%20%20%20%20if%20(thread.status%20%3D%3D%3D%201)%20stackFrame.executed%20%3D%20true%3B%0A%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20stackFrame.executed%20%3D%20true%3B%0A%20%20%20%20const%20frame%20%3D%20thread.peekStackFrame()%3B%0A%20%20%20%20if%20(isReporter)%20%7B%0A%20%20%20%20%20%20frame.waitingReporter%20%3D%20true%3B%0A%20%20%20%20%20%20stackFrame.returnValue%20%3D%20%22%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20thread%5BtargetProcData%5D%20%3D%20%7B%0A%20%20%20%20%20%20ogNext%3A%20thread.target.blocks.getNextBlock%2C%0A%20%20%20%20%20%20block%3A%20frame.op%2C%20frame%2C%0A%20%20%20%20%20%20params%3A%20paramNamesIdsAndDefaults%0A%20%20%20%20%7D%3B%0A%20%20%20%20util.startProcedure(%7B%20proc%3A%20procedureCode%2C%20isGlobal%20%7D)%3B%0A%20%20%7D%3B%0A%0A%20%20const%20oldStep2Proc%20%3D%20runtime.sequencer.stepToProcedure%3B%0A%20%20runtime.sequencer.constructor.prototype.stepToProcedure%20%3D%20function(thread%2C%20procedureCode)%20%7B%0A%20%20%20%20if%20(procedureCode.isGlobal%20%3D%3D%3D%20undefined)%20oldStep2Proc.call(this%2C%20thread%2C%20procedureCode.proc)%3B%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20const%20ogTarget%20%3D%20procedureCode.isGlobal%3B%0A%20%20%20%20%20%20const%20def%20%3D%20ogTarget.blocks.getProcedureDefinition(procedureCode.proc)%3B%0A%20%20%20%20%20%20if%20(!def)%20return%3B%0A%20%20%20%20%20%20if%20(thread.isMBPPatched%20%3D%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20patch%20this%20function%20for%20the%20thread%0A%20%20%20%20%20%20%20%20thread.isMBPPatched%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20const%20ogGetNext%20%3D%20thread.target.blocks.getNextBlock%3B%0A%20%20%20%20%20%20%20%20thread.target.blocks.getNextBlock%20%3D%20function(id)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20block%20%3D%20ogGetNext.call(this%2C%20id)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(block)%20return%20block%3B%0A%20%20%20%20%20%20%20%20%20%20else%20return%20ogTarget.blocks.getNextBlock(id)%20%3F%3F%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20isRecursive%20%3D%20thread.isRecursiveCall(procedureCode.proc)%3B%0A%20%20%20%20%20%20thread.pushStack(def)%3B%0A%20%20%20%20%20%20if%20(thread.peekStackFrame().warpMode%20%26%26%20thread.warpTimer.timeElapsed()%20%3E%20Sequencer.WARP_TIME)%20thread.status%20%3D%20Thread.STATUS_YIELD%3B%0A%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20const%20defBlock%20%3D%20ogTarget.blocks.getBlock(def)%3B%0A%20%20%20%20%20%20%20%20const%20innerBlock%20%3D%20ogTarget.blocks.getBlock(defBlock.inputs.custom_block.block)%3B%0A%20%20%20%20%20%20%20%20let%20doWarp%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20if%20(innerBlock%20%26%26%20innerBlock.mutation)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20warp%20%3D%20innerBlock.mutation.warp%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(typeof%20warp%20%3D%3D%3D%20%22boolean%22)%20doWarp%20%3D%20warp%3B%0A%20%20%20%20%20%20%20%20%20%20else%20if%20(typeof%20warp%20%3D%3D%3D%20%22string%22)%20doWarp%20%3D%20JSON.parse(warp)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(doWarp)%20thread.peekStackFrame().warpMode%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20else%20if%20(isRecursive)%20thread.status%20%3D%20Thread.STATUS_YIELD%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%20Internals%0A%20%20%2F%2F%20Remove%20unused%20procedures%20before%20saving%0A%20%20function%20removeUnusedProcs()%20%7B%0A%20%20%20%20if%20(suspendRemoval)%20return%3B%0A%20%20%20%20for%20(const%20target%20of%20runtime.targets)%20%7B%0A%20%20%20%20%20%20for%20(const%20proccode%20of%20Object.keys(storage%5Btarget.id%5D%20%7C%7C%20%7B%7D))%20%7B%0A%20%20%20%20%20%20%20%20if%20(!target.blocks.getProcedureDefinition(proccode))%20delete%20storage%5Btarget.id%5D%5Bproccode%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%20Remove%20unused%20images%20before%20saving%0A%20%20function%20removeUnusedImages()%20%7B%0A%20%20%20%20if%20(suspendRemoval)%20return%3B%0A%20%20%20%20const%20usedIds%20%3D%20new%20Set()%3B%0A%20%20%20%20Object.values(storage).forEach(proc%20%3D%3E%20Object.values(proc%20%3F%3F%20%7B%7D).forEach(data%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(!data.inputs)%20return%3B%0A%20%20%20%20%20%20Object.values(data.inputs).forEach(input%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(input.type%20%3D%3D%3D%20%22img%22)%20usedIds.add(input.src)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D))%3B%0A%0A%20%20%20%20for%20(let%20i%20%3D%201%3B%20i%20%3C%20imgStoreSize%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20if%20(!usedIds.has(i))%20delete%20imgStorage%5Bi%5D%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%20reset%20the%20compiled%20code%20cache%20for%20global%20blocks%20that%20get%20changed%0A%20%20let%20cachePatched%20%3D%20false%3B%0A%20%20function%20patchCache()%20%7B%0A%20%20%20%20cachePatched%20%3D%20true%3B%0A%20%20%20%20const%20ogResetCache%20%3D%20vm.runtime.targets%5B0%5D.blocks.constructor.prototype.resetCache%3B%0A%20%20%20%20vm.runtime.targets%5B0%5D.blocks.constructor.prototype.resetCache%20%3D%20function(ignoreGlobal)%20%7B%0A%20%20%20%20%20%20if%20(ignoreGlobal)%20%7B%0A%20%20%20%20%20%20%20%20ogResetCache.call(this)%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20globalProcs%20%3D%20Object.keys(globalBlocksCache)%3B%0A%20%20%20%20%20%20const%20compiledProcs%20%3D%20Object.keys(this._cache.compiledProcedures)%0A%20%20%20%20%20%20%20%20.map((p)%20%3D%3E%20p.substring(1%2C%20p.length))%3B%0A%0A%20%20%20%20%20%20if%20(globalProcs.some(p%20%3D%3E%20compiledProcs.includes(p)))%20%7B%0A%20%20%20%20%20%20%20%20for%20(const%20target%20of%20runtime.targets)%20target.blocks.resetCache(true)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20ogResetCache.call(this)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F%2F%20Is-in-Editor%20Checker%0A%20%20let%20startedEditorWorker%20%3D%20false%3B%0A%20%20function%20startEditorListener()%20%7B%0A%20%20%20%20refreshGlobalBlocksCache()%3B%0A%20%20%20%20if%20(startedEditorWorker)%20return%3B%0A%20%20%20%20startedEditorWorker%20%3D%20false%3B%0A%20%20%20%20if%20(Scratch.gui)%20Scratch.gui.getBlockly().then(SB%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20workspace%20%3D%20SB.mainWorkspace%3B%0A%20%20%20%20%20%20if%20(!isPM)%20workspace.enableProcedureReturns()%3B%0A%20%20%20%20%20%20vm.on(%22workspaceUpdate%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(!extensionRemovable)%20%7B%0A%20%20%20%20%20%20%20%20%20%20listNeedsRefresh%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(workspace%3F.rendered)%20SB.Procedures.flyoutCategory(workspace)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!cachePatched)%20patchCache()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Block%20Events%20Handler%0A%20%20function%20initBlockEvents()%20%7B%0A%20%20%20%20if%20(Scratch.gui)%20Scratch.gui.getBlockly().then(SB%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20%7B%20Events%2C%20mainWorkspace%20%7D%20%3D%20SB%3B%0A%20%20%20%20%20%20if%20(!mainWorkspace%3F.rendered)%20return%3B%0A%20%20%20%20%20%20let%20patched%20%3D%20false%3B%0A%20%20%20%20%20%20const%20workspaceEvents%20%3D%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(mainWorkspace.id%20%3D%3D%3D%20e.workspaceId)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(!isPM%20%26%26%20!patched)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20ogReturnsWillChange%20%3D%20mainWorkspace.procedureReturnsWillChange%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20mainWorkspace.procedureReturnsWillChange%20%3D%20function()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ogReturnsWillChange.call(this)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20listNeedsRefresh%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20patched%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20switch%20(e.type)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20Events.CHANGE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20block%20%3D%20mainWorkspace.getBlockById(e.blockId)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20while%20(block%20!%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(block%20%26%26%20block.type%20%3D%3D%3D%20%22procedures_definition%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20proto%20%3D%20block.getInput(%22custom_block%22)%3F.connection%3F.targetBlock()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!proto)%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20store%20%3D%20storeGet(proto.procCode_)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20block%20%3D%20block.getParent()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20Events.MOVE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20block%20%3D%20mainWorkspace.getBlockById(e.blockId)%2C%20parent%20%3D%20mainWorkspace.getBlockById(e.newParentId)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20fix%20field%20colours%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e.newInputName%20%26%26%20block%3F.category_%20%3D%3D%3D%20null%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20block.inputList%5B0%5D.fieldRow%5B0%5D%3F.arrow_%20!%3D%3D%20undefined%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parent%3F.type%20%3D%3D%3D%20%22procedures_call%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%20block.setColour(parent.colour_)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20update%20global%20block%20cache%20for%20returns%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!isPM)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(parent%3F.type%20%3D%3D%3D%20%22procedures_return%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20block%20%3D%20parent%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parent%20%3D%20block.getParent()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20changeGlobalReturn%20%3D%20(parent%2C%20returns)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20while%20(parent%20!%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(parent%20%26%26%20parent.type%20%3D%3D%3D%20%22procedures_definition%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20proto%20%3D%20parent.getInput(%22custom_block%22)%3F.connection%3F.targetBlock()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!proto)%20return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20store%20%3D%20storeGet(proto.procCode_)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(block%3F.type%20%3D%3D%3D%20%22procedures_return%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20vmProto%20%3D%20vm.editingTarget.blocks.getBlock(proto.id)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(returns)%20vmProto.mutation.return%20%3D%20SB.Procedures.getBlockReturnType(parent)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20vmProto.mutation.return%20%3D%200%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20listNeedsRefresh%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(store.global)%20store.return%20%3D%20vmProto.mutation.return%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20parent%20%3D%20parent.getParent()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20changeGlobalReturn(parent%2C%20true)%3B%20%2F%2F%20handle%20new%20definition%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(e.oldParentId%20!%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20oldParent%20%3D%20mainWorkspace.getBlockById(e.oldParentId)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20changeGlobalReturn(oldParent%2C%20false)%3B%20%2F%2F%20handle%20old%20definition%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20mainWorkspace.addChangeListener(workspaceEvents)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20function%20startBlockListener()%20%7B%0A%20%20%20%20runtime.on(%22BLOCK_DRAG_END%22%2C%20(newStack%2C%20oldID)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%2F%2F%20append%20old%20data%20to%20new%20blocks%0A%20%20%20%20%20%20if%20(newStack%5B0%5D.opcode%20!%3D%3D%20%22procedures_definition%22)%20return%3B%0A%20%20%20%20%20%20const%20proccode%20%3D%20newStack%5B1%5D.mutation.proccode%3B%0A%20%20%20%20%20%20const%20thisTarget%20%3D%20vm.editingTarget%3B%0A%20%20%20%20%20%20const%20copyStore%20%3D%20storeGet(proccode%2C%20thisTarget)%3B%0A%20%20%20%20%20%20if%20(copyStore)%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20timeout%20works%20better%20than%20queueMicrotask%20for%20this%3F%0A%20%20%20%20%20%20%20%20for%20(const%20target%20of%20runtime.targets)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(!target.isOriginal%20%7C%7C%20target.id%20%3D%3D%3D%20thisTarget.id)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20const%20def%20%3D%20target.blocks.getProcedureDefinition(proccode)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(def)%20storeSet(proccode%2C%20structuredClone(copyStore)%2C%20target)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%2010)%3B%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20const%20checkInEditor%20%3D%20()%20%3D%3E%20!ReduxStore.getState().scratchGui.mode.isPlayerOnly%3B%0A%20%20%20%20let%20inEditor%20%3D%20checkInEditor()%3B%0A%20%20%20%20if%20(inEditor)%20initBlockEvents()%3B%0A%20%20%20%20ReduxStore.subscribe(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20currentInEditor%20%3D%20checkInEditor()%3B%0A%20%20%20%20%20%20if%20(inEditor%20!%3D%3D%20currentInEditor)%20%7B%0A%20%20%20%20%20%20%20%20inEditor%20%3D%20currentInEditor%3B%0A%20%20%20%20%20%20%20%20if%20(inEditor)%20initBlockEvents()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20if%20(typeof%20scaffolding%20%3D%3D%3D%20%22undefined%22)%20startBlockListener()%3B%0A%0A%20%20%2F%2F%20Custom%20Blocks%20Internals%0A%20%20function%20storeGet(name%2C%20target%20%3D%20null)%20%7B%0A%20%20%20%20%2F%2F%20first%20check%20if%20its%20a%20global%20block%20proccode%0A%20%20%20%20const%20globalStore%20%3D%20globalBlocksCache%5Bname%5D%3B%0A%20%20%20%20if%20(globalStore%20!%3D%3D%20undefined)%20return%20storage%5BglobalStore.id%5D%3F.%5Bname%5D%20%3F%3F%20%7B%7D%3B%0A%0A%20%20%20%20const%20id%20%3D%20(target%20%7C%7C%20vm.editingTarget)%3F.id%3B%0A%20%20%20%20return%20storage%5Bid%5D%3F.%5Bname%5D%20%3F%3F%20%7B%7D%3B%0A%20%20%7D%0A%20%20function%20storeDel(name%2C%20target%20%3D%20null)%20%7B%0A%20%20%20%20const%20id%20%3D%20(target%20%7C%7C%20vm.editingTarget).id%3B%0A%20%20%20%20delete%20storage%5Bid%5D%5Bname%5D%3B%0A%20%20%7D%0A%20%20function%20storeSet(name%2C%20value%2C%20target%20%3D%20null)%20%7B%0A%20%20%20%20const%20id%20%3D%20(target%20%7C%7C%20vm.editingTarget).id%3B%0A%20%20%20%20if%20(!storage%5Bid%5D)%20storage%5Bid%5D%20%3D%20%7B%7D%3B%0A%20%20%20%20storage%5Bid%5D%5Bname%5D%20%3D%20value%3B%0A%20%20%20%20runtime.SPmbpCSTOldStorage%20%3D%20storage%3B%0A%20%20%7D%0A%0A%20%20function%20storeImage(url)%20%7B%0A%20%20%20%20const%20urlExists%20%3D%20Object.values(imgStorage).indexOf(url)%3B%0A%20%20%20%20if%20(urlExists%20%3E%20-1)%20return%20urlExists%20%2B%201%3B%0A%0A%20%20%20%20imgStoreSize%2B%2B%3B%0A%20%20%20%20imgStorage%5BimgStoreSize%5D%20%3D%20url%3B%0A%20%20%20%20return%20imgStoreSize%3B%0A%20%20%7D%0A%20%20function%20getStoredImage(index)%20%7B%0A%20%20%20%20return%20imgStorage%5Bindex%5D%20%3F%3F%20%22%22%3B%0A%20%20%7D%0A%0A%20%20function%20deserializeStorage(data)%20%7B%0A%20%20%20%20if%20(isPM)%20%7B%0A%20%20%20%20%20%20storage%20%3D%20data.SPmbpCST%20%7C%7C%20%7B%7D%3B%0A%20%20%20%20%20%20imgStorage%20%3D%20data.SPmbpCST%3F.imgStorage%20%3F%3F%20%7B%7D%3B%0A%20%20%20%20%20%20imgStoreSize%20%3D%20Object.keys(imgStorage).length%3B%0A%20%20%20%20%20%20startEditorListener()%3B%0A%20%20%20%20%20%20if%20(Scratch.gui)%20Scratch.gui.getBlockly().then(SB%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20runtime.once(%22PROJECT_LOADED%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(SB.mainWorkspace.rendered)%20SB.Procedures.flyoutCategory(SB.mainWorkspace)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20suspendRemoval%20%3D%20true%3B%0A%0A%20%20%20%20%20%20imgStorage%20%3D%20runtime.extensionStorage%5B%22SPmbpCST%22%5D.imgStorage%20%3F%3F%20%7B%7D%3B%0A%20%20%20%20%20%20imgStoreSize%20%3D%20Object.keys(imgStorage).length%3B%0A%20%20%20%20%20%20storage%20%3D%20%7B%7D%3B%20%2F%2F%20target%20ID's%20change%20when%20saving%20%3A(%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20runtime.targets.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20runtime.targets%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20const%20store%20%3D%20target.extensionStorage%3F.SPmbpCST%3B%0A%20%20%20%20%20%20%20%20if%20(store%20!%3D%3D%20undefined)%20storage%5Btarget.id%5D%20%3D%20%7B%20...store%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20const%20tempStore%20%3D%20structuredClone(storage)%3B%0A%20%20%20%20%20%20runtime.SPmbpCSTOldStorage%20%3D%20tempStore%3B%0A%20%20%20%20%20%20startEditorListener()%3B%0A%20%20%20%20%20%20vm.once(%22workspaceUpdate%22%2C%20()%20%3D%3E%20%7B%20storage%20%3D%20tempStore%20%7D)%3B%0A%20%20%20%20%20%20vm.emitWorkspaceUpdate()%3B%0A%20%20%20%20%20%20if%20(Scratch.gui)%20Scratch.gui.getBlockly().then(SB%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20SB.Procedures.flyoutCategory(SB.mainWorkspace)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%2F%2F%20use%20existing%20storage%20when%20loaded%20twice%0A%20%20storage%20%3D%20runtime.SPmbpCSTOldStorage%20%7C%7C%20%7B%7D%3B%0A%20%20if%20(!isPM)%20runtime.once(%22PROJECT_LOADED%22%2C%20()%20%3D%3E%20deserializeStorage())%3B%0A%0A%20%20function%20refreshGlobalBlocksCache()%20%7B%0A%20%20%20%20globalBlocksCache%20%3D%20%7B%7D%3B%0A%20%20%20%20vm.globalBlocksCache%20%3D%20globalBlocksCache%3B%0A%20%20%20%20for%20(const%20targetId%20of%20Object.keys(storage))%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20runtime.getTargetById(targetId)%3B%0A%20%20%20%20%20%20if%20(!target)%20continue%3B%0A%20%20%20%20%20%20for%20(const%20proccode%20of%20Object.keys(storage%5BtargetId%5D%20%3F%3F%20%7B%7D))%20%7B%0A%20%20%20%20%20%20%20%20if%20(storage%5BtargetId%5D%5Bproccode%5D%3F.global)%20globalBlocksCache%5Bproccode%5D%20%3D%20target%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20getBlockPrototype(target%2C%20proccode)%20%7B%0A%20%20%20%20for%20(const%20id%20in%20target.blocks._blocks)%20%7B%0A%20%20%20%20%20%20if%20(!Object.prototype.hasOwnProperty.call(target.blocks._blocks%2C%20id))%20continue%3B%0A%20%20%20%20%20%20const%20block%20%3D%20target.blocks._blocks%5Bid%5D%3B%0A%20%20%20%20%20%20if%20(block.opcode%20%3D%3D%3D%20%22procedures_prototype%22%20%26%26%20block.mutation%20%26%26%20block.mutation.proccode%20%3D%3D%3D%20proccode)%20%7B%0A%20%20%20%20%20%20%20%20return%20block%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%3B%0A%20%20%7D%0A%0A%20%20function%20compileProcedures(xmlList%2C%20workspace%2C%20utils)%20%7B%0A%20%20%20%20if%20(!listNeedsRefresh)%20return%3B%0A%20%20%20%20const%20returnables%20%3D%20isPM%20%3F%20%7B%7D%20%3A%20utils.getAllProcedureReturnTypes(workspace)%3B%0A%20%20%20%20refreshGlobalBlocksCache()%3B%0A%0A%20%20%20%20%2F%2F%20get%20private%20procedures%0A%20%20%20%20proceduresXML%20%3D%20%22%22%3B%0A%20%20%20%20const%20globalProcs%20%3D%20new%20Set(Object.keys(globalBlocksCache))%3B%0A%20%20%20%20const%20tempCache%20%3D%20%7B%7D%3B%0A%20%20%20%20oldListLength%20%3D%20xmlList.length%3B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20oldListLength%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20const%20proc%20%3D%20xmlList%5Bi%5D%3B%0A%20%20%20%20%20%20if%20(proc.getAttribute(%22type%22)%20%3D%3D%3D%20%22procedures_call%22)%20%7B%0A%20%20%20%20%20%20%20%20const%20proccode%20%3D%20proc.firstChild.getAttribute(%22proccode%22)%3B%0A%20%20%20%20%20%20%20%20if%20(globalProcs.has(proccode))%20tempCache%5Bproccode%5D%20%3D%20proc.outerHTML%3B%0A%20%20%20%20%20%20%20%20else%20proceduresXML%20%2B%3D%20proc.outerHTML%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(globalProcs.size%20%3E%200)%20%7B%0A%20%20%20%20%20%20let%20tempList%20%3D%20%60%3Csep%20gap%3D%2212%22%2F%3E%3Clabel%20text%3D%22Global%20Blocks%22%2F%3E%3Csep%20gap%3D%226%22%2F%3E%60%3B%0A%20%20%20%20%20%20for%20(const%20proccode%20of%20globalProcs)%20%7B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20globalBlocksCache%5Bproccode%5D%3B%0A%20%20%20%20%20%20%20%20if%20(target.id%20%3D%3D%3D%20vm.editingTarget%3F.id)%20%7B%0A%20%20%20%20%20%20%20%20%20%20tempList%20%2B%3D%20tempCache%5Bproccode%5D%3B%0A%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20const%20proto%20%3D%20getBlockPrototype(target%2C%20proccode)%3B%0A%20%20%20%20%20%20%20%20if%20(proto)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(proto.mutation.return%20%3D%3D%3D%20undefined)%20proto.mutation.return%20%3D%20storeGet(proccode).return%3B%0A%20%20%20%20%20%20%20%20%20%20const%20newMutation%20%3D%20%7B...proto.mutation%7D%3B%0A%20%20%20%20%20%20%20%20%20%20newMutation.generateshadows%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20tempList%20%2B%3D%20%60%3Cblock%20type%3D%22procedures_call%22%20gap%3D%2212%22%3E%24%7Btarget.blocks.mutationToXML(newMutation)%7D%3C%2Fblock%3E%60%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20tempList%20%2B%3D%20%60%3Csep%20gap%3D%226%22%2F%3E%3Clabel%20text%3D%22Private%20Blocks%22%2F%3E%3Csep%20gap%3D%226%22%2F%3E%60%3B%0A%20%20%20%20%20%20proceduresXML%20%3D%20tempList%20%2B%20proceduresXML%3B%0A%20%20%20%20%7D%0A%20%20%20%20vm.extensionManager.refreshBlocks(%22SPmbpCST%22)%3B%0A%20%20%20%20listNeedsRefresh%20%3D%20false%3B%0A%20%20%7D%0A%0A%20%20function%20removeExtension()%20%7B%0A%20%20%20%20extensionRemovable%20%3D%20true%3B%0A%20%20%20%20shouldScrollToMBP%20%3D%20false%3B%20%2F%2F%20just%20in%20case%0A%20%20%20%20for%20(const%20target%20of%20runtime.targets)%20%7B%0A%20%20%20%20%20%20for%20(const%20block%20of%20Object.values(target.blocks._blocks))%20%7B%0A%20%20%20%20%20%20%20%20if%20(block.opcode.startsWith(%22SPmbpCST_%22))%20deleteBlock(target%2C%20block.id)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20for%20(const%20key%20in%20storage)%20delete%20storage%5Bkey%5D%3B%0A%20%20%20%20for%20(const%20key%20in%20tempStore)%20delete%20tempStore%5Bkey%5D%3B%0A%20%20%20%20runtime.SPmbpCSTOldStorage%20%3D%20storage%3B%0A%20%20%20%20vm.refreshWorkspace()%3B%0A%20%20%20%20alert(%22Save%20and%20reload%20the%20project%20for%20the%20extension%20to%20fully%20be%20removed.%22)%3B%0A%20%20%7D%0A%0A%20%20function%20deleteBlock(target%2C%20blockId)%20%7B%0A%20%20%20%20if%20(target%20%3D%3D%3D%20vm.editingTarget%20%26%26%20Scratch.gui)%20%7B%0A%20%20%20%20%20%20Scratch.gui.getBlockly().then(SB%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20SB.getMainWorkspace().getBlockById(blockId)%3F.dispose(true%2C%20false)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20target.blocks.deleteBlock(blockId)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20const%20ogDupSprite%20%3D%20vm.duplicateSprite%3B%0A%20%20vm.duplicateSprite%20%3D%20function(targetId)%20%7B%0A%20%20%20%20return%20ogDupSprite.call(this%2C%20targetId).then(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20newTarget%20%3D%20this.runtime.targets%5Bthis.runtime.targets.length%20-%201%5D%3B%0A%20%20%20%20%20%20if%20(!storage%5BnewTarget.id%5D)%20%7B%0A%20%20%20%20%20%20%20%20storage%5BnewTarget.id%5D%20%3D%20structuredClone(storage%5BtargetId%5D)%3B%0A%20%20%20%20%20%20%20%20this.emitWorkspaceUpdate()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20newTarget%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%0A%20%20%2F*%20Backpack%20Support%20(BLOCKS)%20*%2F%0A%20%20const%20handleCustomInputExports%20%3D%20(inputs)%20%3D%3E%20%7B%0A%20%20%20%20%2F%2F%20TODO%20export%20images%20too%0A%20%20%20%20if%20(!runtime.extensionManager.isExtensionLoaded(%22SP0zMenuMaker%22))%20return%3B%0A%0A%20%20%20%20const%20menuMaker%20%3D%20runtime.ext_SP0zMenuMaker%3B%0A%20%20%20%20const%20allMenus%20%3D%20menuMaker.getMenus()%3B%0A%20%20%20%20const%20values%20%3D%20Object.values(inputs)%3B%0A%0A%20%20%20%20let%20output%20%3D%20%7B%20menus%3A%20%7B%7D%20%7D%3B%0A%20%20%20%20for%20(const%20input%20of%20values)%20%7B%0A%20%20%20%20%20%20%2F*%20custom%20menu%20support%20*%2F%0A%20%20%20%20%20%20if%20(input.isDrop%20%26%26%20input.type.startsWith(CUSTOM_MENU_ID))%20%7B%0A%20%20%20%20%20%20%20%20const%20name%20%3D%20input.type.substring(CUSTOM_MENU_ID.length%2C%20input.type.length)%3B%0A%20%20%20%20%20%20%20%20output.menus%5Bname%5D%20%3D%20allMenus%5Bname%5D.items%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20output%3B%0A%20%20%7D%3B%0A%20%20const%20ogExportBlocks%20%3D%20vm.exportStandaloneBlocks%3B%0A%20%20vm.exportStandaloneBlocks%20%3D%20function(blockObjects)%20%7B%0A%20%20%20%20const%20exported%20%3D%20ogExportBlocks.call(this%2C%20blockObjects)%3B%0A%20%20%20%20let%20stack%3B%0A%0A%20%20%20%20%2F%2F%20append%20custom%20block%20data%20for%20importing%20if%20theres%20a%20definition%0A%20%20%20%20if%20(exported.constructor%3F.name%20%3D%3D%3D%20%22Object%22)%20stack%20%3D%20exported.blocks%3B%0A%20%20%20%20else%20stack%20%3D%20exported%3B%0A%20%20%20%20for%20(const%20block%20of%20stack)%20%7B%0A%20%20%20%20%20%20if%20(block.opcode%20!%3D%3D%20%22procedures_prototype%22)%20continue%3B%0A%20%20%20%20%20%20const%20store%20%3D%20storeGet(block.mutation.proccode)%3B%0A%20%20%20%20%20%20if%20(!store)%20continue%3B%0A%20%20%20%20%20%20block.MyBlocksPlusData%20%3D%20store%3B%0A%20%20%20%20%20%20block.MyBlocksPlusExternals%20%3D%20handleCustomInputExports(store.inputs)%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20exported%3B%0A%20%20%7D%0A%0A%20%20const%20handleCustomInputImports%20%3D%20(externals)%20%3D%3E%20%7B%0A%20%20%20%20if%20(!runtime.extensionManager.isExtensionLoaded(%22SP0zMenuMaker%22))%20return%3B%0A%0A%20%20%20%20const%20menuMaker%20%3D%20runtime.ext_SP0zMenuMaker%3B%0A%20%20%20%20const%20menus%20%3D%20Object.entries(externals.menus)%3B%0A%20%20%20%20for%20(const%20%5Bname%2C%20items%5D%20of%20menus)%20%7B%0A%20%20%20%20%20%20menuMaker.setMenus(name%2C%20items)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20menuMaker.refreshCategory()%3B%0A%20%20%7D%3B%0A%20%20const%20ogShareBlocks%20%3D%20vm.shareBlocksToTarget%3B%0A%20%20vm.shareBlocksToTarget%20%3D%20function(blocks%2C%20targetId%2C%20optFromTargetId)%20%7B%0A%20%20%20%20%2F%2F%20load%20potential%20custom%20block%20data%0A%20%20%20%20let%20realBlocks%3B%0A%20%20%20%20if%20(blocks.constructor%3F.name%20%3D%3D%3D%20%22Object%22)%20realBlocks%20%3D%20blocks.blocks%3B%0A%20%20%20%20else%20realBlocks%20%3D%20blocks%3B%0A%0A%20%20%20%20let%20hasProcBlock%20%3D%20false%3B%0A%20%20%20%20for%20(const%20block%20of%20realBlocks)%20%7B%0A%20%20%20%20%20%20if%20(block.opcode%20!%3D%3D%20%22procedures_prototype%22)%20continue%3B%0A%20%20%20%20%20%20const%20mbpData%20%3D%20block%3F.MyBlocksPlusData%3B%0A%20%20%20%20%20%20if%20(mbpData)%20%7B%0A%20%20%20%20%20%20%20%20const%20target%20%3D%20runtime.getTargetById(targetId)%3B%0A%20%20%20%20%20%20%20%20storeSet(block.mutation.proccode%2C%20mbpData%2C%20target)%3B%0A%20%20%20%20%20%20%20%20handleCustomInputImports(block.MyBlocksPlusExternals)%3B%0A%20%20%20%20%20%20%20%20hasProcBlock%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20shared%20%3D%20ogShareBlocks.call(this%2C%20blocks%2C%20targetId%2C%20optFromTargetId)%3B%0A%20%20%20%20if%20(hasProcBlock%20%26%26%20Scratch.gui)%20Scratch.gui.getBlockly().then(SB%20%3D%3E%20%7B%0A%20%20%20%20%20%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20workspace%20%3D%20SB.mainWorkspace%3B%0A%20%20%20%20%20%20%20%20listNeedsRefresh%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20SB.Procedures.flyoutCategory(workspace)%3B%0A%20%20%20%20%20%20%7D%2C%2010)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20return%20shared%3B%0A%20%20%7D%0A%20%20%2F*%20Backpack%2FImport%2FExport%20Support%20(SPRITES)%20*%2F%0A%20%20const%20ogExportSprite%20%3D%20vm.exportSprite%3B%0A%20%20vm.exportSprite%20%3D%20function(...args)%20%7B%0A%20%20%20%20%2F%2F%20inject%20our%20dummy%20block%20to%20prevent%20extension%20deletion%0A%20%20%20%20const%20targetID%20%3D%20args%5B0%5D%3B%0A%20%20%20%20if%20(storage%5BtargetID%5D)%20%7B%0A%20%20%20%20%20%20const%20target%20%3D%20runtime.getTargetById(targetID)%3B%0A%20%20%20%20%20%20target.blocks._blocks%5BTEMP_BLOCK_OPCODE%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20opcode%3A%20TEMP_BLOCK_OPCODE%2C%20id%3A%20TEMP_BLOCK_OPCODE%2C%20fields%3A%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20next%3A%20null%2C%20parent%3A%20null%2C%20shadow%3A%20true%2C%20toLevel%3A%20true%2C%0A%20%20%20%20%20%20%20%20x%3A%20undefined%2C%20y%3A%20undefined%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20ogExportSprite.call(this%2C%20...args)%3B%0A%20%20%7D%0A%20%20const%20ogImportSprite%20%3D%20vm._addSprite3%3B%0A%20%20vm._addSprite3%20%3D%20function(...args)%20%7B%0A%20%20%20%20const%20importTarget%20%3D%20args%5B0%5D%3B%0A%20%20%20%20%2F%2F%20remove%20dummy%20block%20if%20present%2C%20this%20is%20never%20the%20stage%20(where%20its%20saved)%20so%20nothing%20bad%20should%20happen%0A%20%20%20%20delete%20importTarget.blocks%5BTEMP_BLOCK_OPCODE%5D%3B%0A%0A%20%20%20%20%2F%2F%20extract%20storage%20to%20copy%20over%0A%20%20%20%20let%20stored%3B%0A%20%20%20%20if%20(isPM)%20%7B%0A%20%20%20%20%20%20stored%20%3D%20importTarget.extensionData%3F.%5B%22SPmbpCST%22%5D%3F.SPmbpCST%3B%0A%20%20%20%20%20%20if%20(stored)%20%7B%0A%20%20%20%20%20%20%20%20const%20ogStore%20%3D%20storage%5BimportTarget.id%5D%3B%0A%20%20%20%20%20%20%20%20runtime.once(%22targetWasCreated%22%2C%20(target)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(Scratch.gui)%20Scratch.gui.getBlockly().then(SB%20%3D%3E%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20storage%5Btarget.id%5D%20%3D%20stored%5BimportTarget.id%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20storage%5BimportTarget.id%5D%20%3D%20ogStore%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20listNeedsRefresh%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20SB.Procedures.flyoutCategory(SB.mainWorkspace)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20queueMicrotask(()%20%3D%3E%20vm.emitWorkspaceUpdate())%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%20100))%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20runtime.once(%22targetWasCreated%22%2C%20(target)%20%3D%3E%20queueMicrotask(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20stored%20%3D%20target.extensionStorage%5B%22SPmbpCST%22%5D%3B%0A%20%20%20%20%20%20%20%20if%20(stored)%20%7B%0A%20%20%20%20%20%20%20%20%20%20storage%5Btarget.id%5D%20%3D%20stored%3B%0A%20%20%20%20%20%20%20%20%20%20listNeedsRefresh%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20let%20hasGlobal%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(const%20proc%20of%20Object.values(stored))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(proc.global%20%3D%3D%3D%20true)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20hasGlobal%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(hasGlobal%20%26%26%20Scratch.gui)%20Scratch.gui.getBlockly().then(SB%20%3D%3E%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20listNeedsRefresh%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20SB.Procedures.flyoutCategory(SB.mainWorkspace)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%20100))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20ogImportSprite.call(this%2C%20...args)%3B%0A%20%20%7D%0A%0A%20%20class%20SPmbpCST%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22SPmbpCST%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22My%20Blocks%2B%22%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%23FF6680%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22createBlock%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BUTTON%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20extensionRemovable%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Make%20a%20Block%2B%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22removeExt%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BUTTON%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20extensionRemovable%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Remove%20This%20Extension%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setParam%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20%5BPARAM%5D%20to%20%5BVALUE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22SPmbpCST_defineColored%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20extensionRemovable%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PARAM%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22procedureParamMenu%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22value%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22evalParam%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22reevaluate%20%5BPARAM%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22SPmbpCST_defineColored%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20extensionRemovable%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PARAM%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22procedureParamMenu%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getParam%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22get%20%5BPARAM%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22SPmbpCST_defineColored%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20allowDropAnywhere%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20extensionRemovable%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20PARAM%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22parameter%20name%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22runBranch%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22start%20branch%20%5BINDEX%5D%20%5BICON%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22SPmbpCST_defineColored%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20isPM%20%7C%7C%20extensionRemovable%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20INDEX%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%201%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20ICON%3A%20%7B%20type%3A%20Scratch.ArgumentType.IMAGE%2C%20dataURI%3A%20guiURIs(%22branchStart%22)%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22stopCallerScript%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22stop%20caller%20script%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20extensions%3A%20%5B%22SPmbpCST_defineColored%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20isTerminal%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20extensionRemovable%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.XML%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20hideFromPalette%3A%20extensionRemovable%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20xml%3A%20%60%3Cblock%20type%3D%22procedures_return%22%3E%3Cvalue%20name%3D%22%24%7BisPM%20%3F%20%22return%22%20%3A%20%22VALUE%22%7D%22%3E%3Cshadow%20type%3D%22text%22%3E%3Cfield%20name%3D%22TEXT%22%3E%3C%2Ffield%3E%3C%2Fshadow%3E%3C%2Fvalue%3E%3C%2Fblock%3E%60%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.XML%2C%20xml%3A%20proceduresXML%2C%20hideFromPalette%3A%20extensionRemovable%20%7D%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20procedureParamMenu%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20false%2C%20items%3A%20%22getProcedureParamMenu%22%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20createBlock()%20%7B%0A%20%20%20%20%20%20const%20workspace%20%3D%20ScratchBlocks.mainWorkspace%3B%0A%20%20%20%20%20%20ScratchBlocks.Procedures.createProcedureDefCallback_(workspace)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20removeExt()%20%7B%0A%20%20%20%20%20%20if%20(confirm(%22Remove%20this%20extension%3F%20This%20will%20remove%20all%20new%20features%20attributed%20to%20My%20Blocks%2B%22))%0A%20%20%20%20%20%20%20%20removeExtension()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getProcedureParamMenu()%20%7B%0A%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20!ScratchBlocks%20%7C%7C%20!ScratchBlocks.selected%20%7C%7C%20ScratchBlocks.selected.isInFlyout%20%7C%7C%0A%20%20%20%20%20%20%20%20(ScratchBlocks.selected.type%20!%3D%3D%20%22SPmbpCST_setParam%22%20%26%26%20ScratchBlocks.selected.type%20!%3D%3D%20%22SPmbpCST_evalParam%22)%0A%20%20%20%20%20%20)%20return%20%5B%22parameter%20name%22%5D%3B%0A%20%20%20%20%20%20let%20topBlock%20%3D%20ScratchBlocks.selected%2C%20parent%20%3D%20null%3B%0A%20%20%20%20%20%20while%20((parent%20%3D%20topBlock%3F.getParent()))%20%7B%20topBlock%20%3D%20parent%20%7D%0A%20%20%20%20%20%20if%20(!topBlock%20%7C%7C%20!topBlock.type.startsWith(%22procedures_definition%22))%20return%20%5B%22(not%20in%20a%20define%20script!)%22%5D%3B%0A%20%20%20%20%20%20const%20innerBlock%20%3D%20topBlock.getInput(%22custom_block%22)%3F.connection%3F.targetBlock()%3B%0A%20%20%20%20%20%20if%20(!innerBlock%20%7C%7C%20!innerBlock.type%20%3D%3D%20%22procedures_prototype%22)%20return%20%5B%22(invalid%20define%20block!)%22%5D%3B%0A%0A%20%20%20%20%20%20if%20(innerBlock.displayNames_.length)%20%7B%0A%20%20%20%20%20%20%20%20const%20store%20%3D%20storeGet(innerBlock.procCode_)%3B%0A%20%20%20%20%20%20%20%20if%20(!store%20%7C%7C%20!store.inputs)%20return%20innerBlock.displayNames_%3B%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20names%20%3D%20structuredClone(innerBlock.displayNames_)%3B%0A%20%20%20%20%20%20%20%20%20%20const%20allInputs%20%3D%20Object.entries(store.inputs)%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20allInputs.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(allInputs%5Bi%5D%5B1%5D.type%20%3D%3D%3D%20%22brc%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20index%20%3D%20innerBlock.argumentIds_.indexOf(allInputs%5Bi%5D%5B0%5D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20names.splice(index%2C%201)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20return%20names.length%20%3F%20names%20%3A%20%5B%22%22%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%5B%22%22%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setParam(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20thread%20%3D%20util.thread%3B%0A%20%20%20%20%20%20const%20param%20%3D%20Scratch.Cast.toString(args.PARAM)%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%20thread.stackFrames.length%20-%201%3B%20i%20%3E%3D%200%3B%20i--)%20%7B%0A%20%20%20%20%20%20%20%20const%20frame%20%3D%20thread.stackFrames%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20if%20(frame.params%20%3D%3D%3D%20null)%20continue%3B%0A%20%20%20%20%20%20%20%20frame.params%5Bparam%5D%20%3D%20args.VALUE%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%2F%2F%20Parameters%20not%20present.%20Probably%20a%20lone%20script%20or%20a%20stack-clicked%20define%20block.%0A%20%20%20%20%20%20%2F%2F%20In%20this%20case%2C%20add%20the%20params%20to%20the%20bottom%20of%20the%20stack%0A%20%20%20%20%20%20%2F%2F%20(and%20push%20the%20current%20block%20to%20it%20so%20they%20aren't%20reset%20for%20some%20reason)%0A%20%20%20%20%20%20thread.stackFrames%5B0%5D.params%20%3D%20%7B%20%5Bparam%5D%3A%20args.VALUE%20%7D%3B%0A%20%20%20%20%20%20thread.pushStack(thread.peekStack())%3B%0A%20%20%20%20%20%20%2F%2F%20Make%20the%20bottom%20of%20the%20stack%20point%20to%20a%20nonexistent%20block%20so%20the%20script%20just%20ends%0A%20%20%20%20%20%20%2F%2F%20instead%20of%20running%20part%20of%20it%20again%0A%20%20%20%20%20%20thread.stack%5B0%5D%20%3D%20%22%22%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20evalParam(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(!Thread%20%7C%7C%20!execute)%20%7B%0A%20%20%20%20%20%20%20%20console.error(%22My%20Blocks%2B%20could%20not%20access%20Exports!%22)%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20thread%20%3D%20util.thread%3B%0A%20%20%20%20%20%20if%20(!thread%5BtargetProcData%5D)%20return%3B%0A%0A%20%20%20%20%20%20const%20%7B%20params%2C%20block%2C%20frame%20%7D%20%3D%20thread%5BtargetProcData%5D%3B%0A%20%20%20%20%20%20const%20param%20%3D%20Scratch.Cast.toString(args.PARAM)%3B%0A%20%20%20%20%20%20const%20index%20%3D%20params%5B0%5D.indexOf(param)%3B%0A%20%20%20%20%20%20if%20(index%20%3D%3D%3D%20-1)%20return%3B%0A%0A%20%20%20%20%20%20const%20blockValue%20%3D%20block.inputs%5Bparams%5B1%5D%5Bindex%5D%5D%3B%0A%20%20%20%20%20%20if%20(!blockValue)%20return%3B%0A%0A%20%20%20%20%20%20const%20tempThread%20%3D%20new%20Thread%3B%0A%20%20%20%20%20%20tempThread.topBlock%20%3D%20blockValue.block%3B%0A%20%20%20%20%20%20tempThread.pushStack(blockValue.block)%0A%20%20%20%20%20%20tempThread.blockContainer%20%3D%20thread.blockContainer%3B%0A%20%20%20%20%20%20tempThread.target%20%3D%20thread.target%3B%0A%20%20%20%20%20%20tempThread.pushReportedValue%20%3D%20(value)%20%3D%3E%20%7B%20frame.params%5Bparam%5D%20%3D%20value%20%7D%3B%0A%20%20%20%20%20%20execute(runtime.sequencer%2C%20tempThread)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getParam(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20param%20%3D%20util.thread.getParam(Scratch.Cast.toString(args.PARAM))%3B%0A%20%20%20%20%20%20return%20param%20%3F%3F%20%22%22%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20stopCallerScript(_%2C%20util)%20%7B%0A%20%20%20%20%20%20%2F%2F%20stops%20threads%20entirely%2C%20including%20custom%20blocks%20contexts%0A%20%20%20%20%20%20%2F%2F%20more%20powerful%20than%20'util.stopThisScript()'%0A%20%20%20%20%20%20util.thread.status%20%3D%204%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20runBranch(args%2C%20util)%20%7B%0A%20%20%20%20%20%20const%20thread%20%3D%20util.thread%3B%0A%20%20%20%20%20%20if%20(!util.thread%5BtargetProcData%5D)%20return%3B%0A%0A%20%20%20%20%20%20const%20procBlock%20%3D%20util.thread%5BtargetProcData%5D.block%3B%0A%20%20%20%20%20%20const%20store%20%3D%20storeGet(procBlock.mutation.proccode%2C%20thread.target)%3B%0A%20%20%20%20%20%20if%20(!store%20%7C%7C%20!store.inputs)%20return%3B%0A%0A%20%20%20%20%20%20const%20allInputs%20%3D%20util.thread%5BtargetProcData%5D.params%5B1%5D%3B%0A%20%20%20%20%20%20const%20branches%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20allInputs.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20if%20(store.inputs%5BallInputs%5Bi%5D%5D%3F.type%20%3D%3D%3D%20%22brc%22)%20branches.push(allInputs%5Bi%5D)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(branches.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20const%20index%20%3D%20Scratch.Cast.toNumber(args.INDEX)%20-%201%3B%0A%20%20%20%20%20%20%20%20const%20realProcBlock%20%3D%20thread.blockContainer.getBlock(procBlock.id)%3B%0A%20%20%20%20%20%20%20%20const%20branch%20%3D%20realProcBlock.inputs%5Bbranches%5Bindex%5D%5D%3F.block%3B%0A%20%20%20%20%20%20%20%20if%20(branch)%20util.thread.pushStack(branch)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Storage%20set%2Fget%0A%20%20%20%20serialize()%20%7B%0A%20%20%20%20%20%20if%20(isPM)%20%7B%0A%20%20%20%20%20%20%20%20suspendRemoval%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20removeUnusedProcs()%3B%0A%20%20%20%20%20%20%20%20removeUnusedImages()%3B%0A%20%20%20%20%20%20%20%20return%20%7B%20SPmbpCST%3A%20%7B%20...storage%2C%20imgStorage%20%7D%20%7D%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20target%20ID's%20change%20when%20saving%20%3A(%0A%20%20%20%20%20%20%20%20runtime.extensionStorage%5B%22SPmbpCST%22%5D%20%3D%20%7B%20loaded%3A%20true%2C%20imgStorage%20%7D%3B%0A%20%20%20%20%20%20%20%20for%20(const%20%5Bid%2C%20procs%5D%20of%20Object.entries(storage))%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20target%20%3D%20runtime.getTargetById(id)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(!target)%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20target.extensionStorage%5B%22SPmbpCST%22%5D%20%3D%20%7B%20...procs%20%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20deserialize(data)%20%7B%0A%20%20%20%20%20%20deserializeStorage(data)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20ext%20%3D%20new%20SPmbpCST()%3B%0A%20%20Scratch.extensions.register(ext)%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Dropdown%20Maker%0A%2F%2F%20ID%3A%20SP0zMenuMaker%0A%2F%2F%20Description%3A%20Create%20Custom%20Dropdowns%0A%2F%2F%20By%3A%20SharkPool%0A%2F%2F%20By%3A%200znzw%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2F0znzw%2F%3E%0A%2F%2F%20By%3A%20CST1229%20%3Chttps%3A%2F%2Fscratch.mit.edu%2Fusers%2FCST1229%2F%3E%0A%2F%2F%20License%3A%20MIT%20AND%20LGPLv3%0A%0A%2F%2F%20Version%20V.1.0.11%0A%0A(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20throw%20new%20Error(%22Menu%20Maker%20needs%20to%20run%20unsandboxed!%22)%3B%0A%0A%20%20const%20deleteSVG%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzOS43MzYiIGhlaWdodD0iMzkuNzM2IiB2aWV3Qm94PSIwIDAgMzkuNzM2IDM5LjczNiI%2BPHBhdGggZD0iTTEyLjU0MSAzNS4xOTVhOCA4IDAgMCAxLTgtOFYxMi41NDFhOCA4IDAgMCAxIDgtOGgxNC42NTRhOCA4IDAgMCAxIDggOHYxNC42NTRhOCA4IDAgMCAxLTggOHoiIGZpbGw9IiNmZjRkNGQiLz48cGF0aCBkPSJNMCAzOS43MzZWMGgzOS43MzZ2MzkuNzM2eiIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik0xMi41NDEgMzUuMTk1YTggOCAwIDAgMS04LThWMTIuNTQxYTggOCAwIDAgMSA4LThoMTQuNjU0YTggOCAwIDAgMSA4IDh2MTQuNjU0YTggOCAwIDAgMS04IDh6IiBmaWxsPSJub25lIiBzdHJva2Utb3BhY2l0eT0iLjI1MSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjUiLz48cGF0aCBkPSJNMTMuMTA4IDIyLjU5OWEyLjY3IDIuNjcgMCAwIDEtMi42Ny0yLjY3di0uMTIyYTIuNjcgMi42NyAwIDAgMSAyLjY3LTIuNjdoMTMuNTJhMi42NyAyLjY3IDAgMCAxIDIuNjcgMi42N3YuMTIyYTIuNjcgMi42NyAwIDAgMS0yLjY3IDIuNjd6IiBmaWxsPSIjZmZmIi8%2BPC9zdmc%2B%22%3B%0A%20%20const%20addSVG%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzOS43MzYiIGhlaWdodD0iMzkuNzM2IiB2aWV3Qm94PSIwIDAgMzkuNzM2IDM5LjczNiI%2BPHBhdGggZD0iTTEyLjU0MSAzNS4xOTVhOCA4IDAgMCAxLTgtOFYxMi41NDFhOCA4IDAgMCAxIDgtOGgxNC42NTRhOCA4IDAgMCAxIDggOHYxNC42NTRhOCA4IDAgMCAxLTggOHoiIGZpbGw9IiM1MmZmM2UiLz48cGF0aCBkPSJNMTIuNTQxIDM1LjE5NWE4IDggMCAwIDEtOC04VjEyLjU0MWE4IDggMCAwIDEgOC04aDE0LjY1NGE4IDggMCAwIDEgOCA4djE0LjY1NGE4IDggMCAwIDEtOCA4eiIgZmlsbD0ibm9uZSIgc3Ryb2tlLW9wYWNpdHk9Ii4yNTEiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSI1Ii8%2BPHBhdGggZD0iTTEzLjEwOCAyMi41OTlhMi42NyAyLjY3IDAgMCAxLTIuNjctMi42N3YtLjEyMmEyLjY3IDIuNjcgMCAwIDEgMi42Ny0yLjY3aDEzLjUyYTIuNjcgMi42NyAwIDAgMSAyLjY3IDIuNjd2LjEyMmEyLjY3IDIuNjcgMCAwIDEtMi42NyAyLjY3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xNy4xMzcgMTMuMTA4YTIuNjcgMi42NyAwIDAgMSAyLjY3LTIuNjdoLjEyMmEyLjY3IDIuNjcgMCAwIDEgMi42NyAyLjY3djEzLjUyYTIuNjcgMi42NyAwIDAgMS0yLjY3IDIuNjdoLS4xMjJhMi42NyAyLjY3IDAgMCAxLTIuNjctMi42N3oiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNMCAzOS43MzZWMGgzOS43MzZ2MzkuNzM2eiIgZmlsbD0ibm9uZSIvPjwvc3ZnPg%3D%3D%22%3B%0A%20%20const%20editSVG%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzOS43MzYiIGhlaWdodD0iMzkuNzM2IiB2aWV3Qm94PSIwIDAgMzkuNzM2IDM5LjczNiI%2BPHBhdGggZD0iTTEyLjU0MSAzNS4xOTVhOCA4IDAgMCAxLTgtOFYxMi41NDFhOCA4IDAgMCAxIDgtOGgxNC42NTRhOCA4IDAgMCAxIDggOHYxNC42NTRhOCA4IDAgMCAxLTggOHoiIGZpbGw9IiM0MGQ4ZmYiLz48cGF0aCBkPSJNMTIuNTQxIDM1LjE5NWE4IDggMCAwIDEtOC04VjEyLjU0MWE4IDggMCAwIDEgOC04aDE0LjY1NGE4IDggMCAwIDEgOCA4djE0LjY1NGE4IDggMCAwIDEtOCA4eiIgZmlsbD0ibm9uZSIgc3Ryb2tlLW9wYWNpdHk9Ii4yNTEiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSI1Ii8%2BPHBhdGggZD0iTTEyLjU4NyAyMy4wOThjLjEwMi0uNDMuMzc3LS44Ni43MzQtMS4yLjMyMS0uMzA1IDQuODM4IDQuMTY4IDQuNTQ4IDQuNDgzLS4zNDQuMzczLS43ODguNjYzLTEuMjMxLjc2OGwtMy44NC45MTZjLS44MTcuMTk0LTEuMzIxLS4zMS0xLjEyNy0xLjEyNnptMTEuMTE4LTEwLjAzNmExLjA5NSAxLjA5NSAwIDAgMSAwLTEuNTQ4bC45NjYtLjk2N2ExLjA5NSAxLjA5NSAwIDAgMSAxLjU0OSAwbDIuOTY5IDIuOTdjLjQyNy40MjcuNDI3IDEuMTIgMCAxLjU0OGwtLjk2Ny45NjZhMS4wOTUgMS4wOTUgMCAwIDEtMS41NDggMHptLTguMzkxIDguMzkxYTEuMDk1IDEuMDk1IDAgMCAxIDAtMS41NDhsNi4wMS02LjAxYTEuMDk1IDEuMDk1IDAgMCAxIDEuNTQ4IDBsMi45NjkgMi45NjljLjQyOC40MjguNDI4IDEuMTIgMCAxLjU0OGwtNi4wMSA2LjAxYTEuMDk1IDEuMDk1IDAgMCAxLTEuNTQ4IDB6IiBmaWxsPSIjZmZmIi8%2BPHBhdGggZD0iTTAgMzkuNzM2VjBoMzkuNzM2djM5LjczNnoiIGZpbGw9Im5vbmUiLz48L3N2Zz4%3D%22%3B%0A%20%20const%20menuIconURI%20%3D%0A%20%20%20%20%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDYuNDE5IiBoZWlnaHQ9IjEwNi40MTkiIHZpZXdCb3g9IjAgMCAxMDYuNDE5IDEwNi40MTkiPjxwYXRoIGQ9Ik0yLjUgNTMuMjFDMi41IDI1LjIwNCAyNS4yMDQgMi41IDUzLjIxIDIuNXM1MC43MSAyMi43MDQgNTAuNzEgNTAuNzEtMjIuNzA0IDUwLjcxLTUwLjcxIDUwLjcxUzIuNSA4MS4yMTYgMi41IDUzLjIxeiIgZmlsbD0iIzBmYmQ4YyIgc3Ryb2tlPSIjMGE4MDVlIiBzdHJva2Utd2lkdGg9IjUiLz48cGF0aCBkPSJNMTkuOTIgNTMuMjFjMC0xOC4zODYgMTQuOTA0LTMzLjI5IDMzLjI5LTMzLjI5Uzg2LjUgMzQuODI0IDg2LjUgNTMuMjEgNzEuNTk2IDg2LjUgNTMuMjEgODYuNSAxOS45MiA3MS41OTYgMTkuOTIgNTMuMjF6IiBmaWxsPSIjMGM5OTcxIiBzdHJva2U9IiMwYTgwNWUiIHN0cm9rZS13aWR0aD0iNC41Ii8%2BPHBhdGggZD0iTTY3LjM0OCA0OS44MDJhNS4zNiA1LjM2IDAgMCAxLTEuNTggMy44MjdsLTguNzIgOC43MmE1LjQ1IDUuNDUgMCAwIDEtNy42NzYgMGwtOC42OTgtOC43MmE1LjM4IDUuMzggMCAwIDEtMS42MDItMy44MjcgNS41MiA1LjUyIDAgMCAxIDEuNTgtMy44NDljLjY0NS0uNTM0IDEuNjAxLTEuNTggMTIuNTctMS41OCAxMC45NjcgMCAxMS45OSAxLjAyNCAxMi41NDYgMS41OGE1LjQzIDUuNDMgMCAwIDEgMS41OCAzLjg1eiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMGE4MDVlIiBzdHJva2Utd2lkdGg9IjcuNSIvPjxwYXRoIGQ9Ik02Ny4zNDggNDkuODAyYTUuMzYgNS4zNiAwIDAgMS0xLjU4IDMuODI3bC04LjcyIDguNzJhNS40NSA1LjQ1IDAgMCAxLTcuNjc2IDBsLTguNjk4LTguNzJhNS4zOCA1LjM4IDAgMCAxLTEuNjAyLTMuODI3IDUuNTIgNS41MiAwIDAgMSAxLjU4LTMuODQ5Yy42NDUtLjUzNCAxLjYwMS0xLjU4IDEyLjU3LTEuNTggMTAuOTY3IDAgMTEuOTkgMS4wMjQgMTIuNTQ2IDEuNThhNS40MyA1LjQzIDAgMCAxIDEuNTggMy44NSIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg%3D%3D%22%3B%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20runtime%20%3D%20vm.runtime%3B%0A%20%20const%20isPM%20%3D%20Scratch.extensions.isPenguinMod%3B%0A%20%20const%20TEMP_BLOCK_OPCODE%20%3D%20%22SP0zMenuMaker___SP0zMenuMaker_TEMP_BLOCK%22%3B%20%2F%2F%20opcode%20of%20the%20temporary%20block%20added%20to%20keep%20the%20extension%20in%20the%20project%0A%0A%20%20let%20extRevmovable%20%3D%20false%2C%20extensionInstance%3B%20%2F%2F%20created%20when%20the%20extension%20is%20%22registered%22%0A%20%20let%20menusXML%20%3D%20%60%3Clabel%20text%3D%22Try%20creating%20some%20menus!%22%20%2F%3E%60%3B%0A%20%20let%20customMenus%20%3D%20%7B%0A%20%20%20%20%22new-menu-1%22%3A%20%7B%20items%3A%20%5B%7B%20text%3A%20%22foo%22%2C%20value%3A%20%22bar%22%20%7D%5D%2C%20acceptReporters%3A%20false%20%7D%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20Helper%20Funcs%0A%20%20const%20hasOwn%20%3D%20(obj%2C%20key)%20%3D%3E%20Object.prototype.hasOwnProperty.call(obj%2C%20key)%3B%0A%0A%20%20const%20xmlEscape%20%3D%20function%20(unsafe)%20%7B%0A%20%20%20%20return%20Scratch.Cast.toString(unsafe).replace(%2F%5B%3C%3E%26'%22%5D%2Fg%2C%20c%20%3D%3E%20%7B%0A%20%20%20%20%20%20switch%20(c)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22%3C%22%3A%20return%20%22%26lt%3B%22%3B%0A%20%20%20%20%20%20%20%20case%20%22%3E%22%3A%20return%20%22%26gt%3B%22%3B%0A%20%20%20%20%20%20%20%20case%20%22%26%22%3A%20return%20%22%26amp%3B%22%3B%0A%20%20%20%20%20%20%20%20case%20%22'%22%3A%20return%20%22%26apos%3B%22%3B%0A%20%20%20%20%20%20%20%20case%20%22%5C%22%22%3A%20return%20%22%26quot%3B%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%7D%3B%0A%0A%20%20function%20refreshMagic()%20%7B%0A%20%20%20%20menusXML%20%3D%20Object.keys(customMenus).map(menuName%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20menuBlock%20%3D%20%60SP0zMenuMaker_menu_%24%7BxmlEscape(menuName)%7D%60%3B%0A%20%20%20%20%20%20return%20%60%3Cblock%20type%3D%22%24%7BmenuBlock%7D%22%20id%3D%22%24%7BmenuBlock%7D%22%3E%3C%2Fblock%3E%60%3B%0A%20%20%20%20%7D).join(%22%22)%20%7C%7C%20%60%3Clabel%20text%3D%22Try%20creating%20some%20menus!%22%20%2F%3E%60%3B%0A%0A%20%20%20%20if%20(vm.extensionManager._loadedExtensions.has(%22SP0zMenuMaker%22))%20%7B%0A%20%20%20%20%20%20vm.extensionManager.refreshBlocks(%22SP0zMenuMaker%22).then(()%20%3D%3E%20vm.refreshWorkspace())%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20patchDivColor(container%2C%20isDark)%20%7B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20container.childNodes.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20const%20child%20%3D%20container.childNodes%5Bi%5D%3B%0A%20%20%20%20%20%20child.style.background%20%3D%20i%20%25%202%20!%3D%3D%200%20%3F%20%60radial-gradient(circle%2C%20%24%7BisDark%20%3F%20%22%23343434%22%20%3A%20%22%23D9D9D9%22%7D%2080%25%2C%20rgba(0%2C0%2C0%2C0))%60%20%3A%20%22%22%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20patchName(name%2C%20array)%20%7B%0A%20%20%20%20if%20(array.indexOf(name)%20%3E%20-1)%20%7B%0A%20%20%20%20%20%20const%20appearance%20%3D%20array.filter((v)%20%3D%3E%20v%20%3D%3D%3D%20name).length%3B%0A%20%20%20%20%20%20const%20lastDash%20%3D%20name.lastIndexOf(%22-%22)%3B%0A%20%20%20%20%20%20let%20newName%20%3D%20%60%24%7Bname%7D-%24%7Bappearance%7D%60%3B%0A%20%20%20%20%20%20if%20(lastDash%20!%3D%3D%20-1)%20%7B%0A%20%20%20%20%20%20%20%20const%20lastPart%20%3D%20name.slice(lastDash%20%2B%201)%3B%0A%20%20%20%20%20%20%20%20if%20(!isNaN(parseInt(lastPart)))%20newName%20%3D%20name.slice(0%2C%20lastDash)%20%2B%20%60-%24%7BparseInt(lastPart)%20%2B%20appearance%7D%60%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20array.indexOf(newName)%20%3E%20-1%20%3F%20patchName(newName%2C%20array)%20%3A%20newName%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20name%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20GUI%0A%20%20function%20makeTitle(txt)%20%7B%0A%20%20%20%20const%20title%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20title.textContent%20%3D%20txt%3B%0A%20%20%20%20title.setAttribute(%22style%22%2C%20%22display%3A%20inline-block%3B%20text-align%3A%20center%3B%20width%3A%2047%25%3B%20margin-right%3A%208px%3B%20margin-left%3A%208px%3B%20padding%3A%200px%200px%2020px%3B%22)%3B%0A%20%20%20%20return%20title%3B%0A%20%20%7D%0A%0A%20%20function%20makeLabel(txt)%20%7B%0A%20%20%20%20const%20label%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20label.textContent%20%3D%20txt%3B%0A%20%20%20%20label.setAttribute(%22style%22%2C%20%22margin%3A%205px%3B%20display%3A%20inline-block%3B%20transform%3A%20translate(0%25%2C%20-55%25)%3B%22)%3B%0A%20%20%20%20return%20label%3B%0A%20%20%7D%0A%0A%20%20function%20createContain(clasS%2C%20darkGUI)%20%7B%0A%20%20%20%20const%20box%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20box.classList.add(clasS)%3B%0A%20%20%20%20box.setAttribute(%22style%22%2C%20%22overflow%3A%20hidden%20scroll%3B%20display%3A%20inline-block%3B%20width%3A%2047%25%3B%20height%3A%20200px%3B%20padding%3A%202px%3B%20margin-right%3A%208px%3B%20margin-left%3A%208px%3B%20border-radius%3A%205px%3B%22)%3B%0A%20%20%20%20box.style.border%20%3D%20%60solid%20%24%7BdarkGUI%20%3F%20%22%23343434%22%20%3A%20%22%23D9D9D9%22%7D%202px%60%3B%0A%20%20%20%20return%20box%3B%0A%20%20%7D%0A%0A%20%20function%20makeButton(img%2C%20clasS)%20%7B%0A%20%20%20%20const%20button%20%3D%20document.createElement(%22img%22)%3B%0A%20%20%20%20button.classList.add(clasS)%3B%0A%20%20%20%20button.src%20%3D%20img%3B%0A%20%20%20%20button.width%20%3D%20%2232%22%3B%0A%20%20%20%20button.style.cursor%20%3D%20%22pointer%22%3B%0A%20%20%20%20return%20button%3B%0A%20%20%7D%0A%0A%20%20function%20makeInput(type%2C%20defaultV%2C%20opts)%20%7B%0A%20%20%20%20const%20input%20%3D%20document.createElement(%22input%22)%3B%0A%20%20%20%20input.type%20%3D%20type%3B%0A%20%20%20%20input.value%20%3D%20defaultV%3B%0A%20%20%20%20input.style.width%20%3D%20opts%3F.width%20%3F%3F%20%22130px%22%3B%0A%20%20%20%20input.style.transform%20%3D%20%22translate(0%25%2C%20-45%25)%22%3B%0A%20%20%20%20input.style.cursor%20%3D%20%22pointer%22%3B%0A%20%20%20%20return%20input%3B%0A%20%20%7D%0A%0A%20%20function%20ghostInputRemove(selector)%20%7B%0A%20%20%20%20%2F%2F%20Block%20Text%20input%20Doesnt%20show%20immediately%20%3A(%0A%20%20%20%20const%20element%20%3D%20document.querySelector(selector)%3B%0A%20%20%20%20if%20(element)%20element.style.opacity%20%3D%200%3B%0A%20%20%20%20else%20setTimeout(()%20%3D%3E%20ghostInputRemove(selector)%2C%205)%3B%0A%20%20%7D%0A%0A%20%20function%20makeMenuNameRow(name%2C%20namesArray%2C%20isDark%2C%20contain)%20%7B%0A%20%20%20%20const%20rowDiv%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20rowDiv.style.height%20%3D%20%2217%25%22%3B%0A%20%20%20%20if%20(namesArray.indexOf(name)%20%25%202%20!%3D%3D%200)%20rowDiv.style.background%20%3D%20%60radial-gradient(circle%2C%20%24%7BisDark%20%3F%20%22%23343434%22%20%3A%20%22%23D9D9D9%22%7D%2080%25%2C%20rgba(0%2C0%2C0%2C0))%60%3B%0A%0A%20%20%20%20%2F%2F%20Delete%20Button%0A%20%20%20%20const%20del%20%3D%20makeButton(deleteSVG%2C%20%22delete%22)%3B%0A%20%20%20%20rowDiv.appendChild(del)%3B%0A%20%20%20%20del.addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%2F%2F%20Super%20secret%20comment%20from%20ashime%20%3C3%0A%20%20%20%20%20%20delete%20customMenus%5Bname%5D%3B%0A%20%20%20%20%20%20namesArray.splice(namesArray.indexOf(name)%2C%201)%3B%0A%20%20%20%20%20%20rowDiv.parentNode.removeChild(rowDiv)%3B%0A%20%20%20%20%20%20patchDivColor(contain%2C%20isDark)%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Remove%20Items%20Container%0A%20%20%20%20%20%20const%20itemCon%20%3D%20document.querySelector(%60%5Bclass%3D%22items%22%5D%60)%3B%0A%20%20%20%20%20%20itemCon.innerHTML%20%3D%20%22%22%3B%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%2F%2F%20Edit%20Button%0A%20%20%20%20const%20edit%20%3D%20makeButton(editSVG%2C%20%22edit%22)%3B%0A%20%20%20%20rowDiv.appendChild(edit)%3B%0A%20%20%20%20edit.addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20patchDivColor(contain%2C%20isDark)%3B%0A%20%20%20%20%20%20rowDiv.style.background%20%3D%20%60radial-gradient(circle%2C%20%23a3a3a3%2080%25%2C%20rgba(0%2C0%2C0%2C0))%60%3B%0A%20%20%20%20%20%20renderItemList(customMenus%5Bname%5D%2C%20isDark%2C%20name)%3B%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%2F%2F%20Text%20%26%20Input%0A%20%20%20%20const%20listItem%20%3D%20makeInput(%22text%22%2C%20name)%3B%0A%20%20%20%20listItem.addEventListener(%22change%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20oldValue%20%3D%20customMenus%5Bname%5D%3B%0A%20%20%20%20%20%20delete%20customMenus%5Bname%5D%3B%0A%20%20%20%20%20%20const%20newName%20%3D%20patchName(listItem.value%2C%20namesArray)%3B%0A%20%20%20%20%20%20customMenus%5BnewName%5D%20%3D%20oldValue%3B%0A%20%20%20%20%20%20namesArray%5BnamesArray.indexOf(name)%5D%20%3D%20newName%3B%0A%0A%20%20%20%20%20%20%2F%2F%20refresh%20modal%20(will%20bug%20out%20if%20not%20refreshed)%0A%20%20%20%20%20%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20parent%20%3D%20rowDiv.parentNode.parentNode%3B%0A%20%20%20%20%20%20%20%20for%20(let%20i%20%3D%20parent.childNodes.length%20-%201%3B%20i--%3B%20)%20parent.childNodes%5Bi%5D.remove()%3B%0A%20%20%20%20%20%20%20%20createMenuList(Object.keys(customMenus)%2C%20parent%2C%20isDark)%3B%0A%20%20%20%20%20%20%7D%2C%205)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20listItem.addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20patchDivColor(contain%2C%20isDark)%3B%0A%20%20%20%20%20%20rowDiv.style.background%20%3D%20%60radial-gradient(circle%2C%20%23a3a3a3%2080%25%2C%20rgba(0%2C0%2C0%2C0))%60%3B%0A%20%20%20%20%20%20renderItemList(customMenus%5Bname%5D%2C%20isDark%2C%20name)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20rowDiv.append(makeLabel(%22Name%3A%22)%2C%20listItem)%3B%0A%20%20%20%20return%20rowDiv%3B%0A%20%20%7D%0A%0A%20%20function%20makeItemRow(item%2C%20index%2C%20isDark%2C%20contain%2C%20name)%20%7B%0A%20%20%20%20const%20rowDiv%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20rowDiv.style.height%20%3D%20%2217%25%22%3B%0A%20%20%20%20if%20(index%20%25%202%20!%3D%3D%200)%20rowDiv.style.background%20%3D%20%60radial-gradient(circle%2C%20%24%7BisDark%20%3F%20%22%23343434%22%20%3A%20%22%23D9D9D9%22%7D%2080%25%2C%20rgba(0%2C0%2C0%2C0))%60%3B%0A%0A%20%20%20%20%2F%2F%20Delete%20Button%0A%20%20%20%20const%20del%20%3D%20makeButton(deleteSVG%2C%20%22delete%22)%3B%0A%20%20%20%20rowDiv.appendChild(del)%3B%0A%20%20%20%20del.addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20customMenus%5Bname%5D.items.splice(index%2C%201)%3B%0A%20%20%20%20%20%20renderItemList(customMenus%5Bname%5D%2C%20isDark%2C%20name)%3B%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%2F%2F%20Text%20%26%20Input%0A%20%20%20%20const%20text%20%3D%20makeInput(%22text%22%2C%20item.text%2C%20%7B%20width%3A%20%2265px%22%20%7D)%3B%0A%20%20%20%20text.addEventListener(%22change%22%2C%20()%20%3D%3E%20%7B%20customMenus%5Bname%5D.items%5Bindex%5D.text%20%3D%20text.value%20%7D)%3B%0A%20%20%20%20const%20value%20%3D%20makeInput(%22text%22%2C%20item.value%2C%20%7B%20width%3A%20%2265px%22%20%7D)%3B%0A%20%20%20%20value.addEventListener(%22change%22%2C%20()%20%3D%3E%20%7B%20customMenus%5Bname%5D.items%5Bindex%5D.value%20%3D%20value.value%20%7D)%3B%0A%20%20%20%20rowDiv.append(makeLabel(%22Text%3A%22)%2C%20text%2C%20makeLabel(%22Value%3A%22)%2C%20value)%3B%0A%20%20%20%20return%20rowDiv%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Internal%20GUI%0A%20%20function%20createMenuList(namesArray%2C%20parent%2C%20isDark)%20%7B%0A%20%20%20%20%2F%2F%20Inner%20Titles%20and%20Containers%0A%20%20%20%20const%20title1%20%3D%20makeTitle(%22Created%20Dropdowns%22)%2C%20title2%20%3D%20makeTitle(%22Items%20in%20Dropdown%22)%3B%0A%20%20%20%20const%20listCon%20%3D%20createContain(%22menus%22%2C%20isDark)%3B%0A%20%20%20%20namesArray.forEach((name)%20%3D%3E%20%7B%0A%20%20%20%20%20%20listCon.appendChild(makeMenuNameRow(name%2C%20namesArray%2C%20isDark%2C%20listCon))%3B%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%2F%2F%20Add%20Button%0A%20%20%20%20const%20add%20%3D%20makeButton(addSVG%2C%20%22add%22)%3B%0A%20%20%20%20add.addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20newN%20%3D%20patchName(%60new-menu-%24%7BnamesArray.length%20%2B%201%7D%60%2C%20namesArray)%3B%0A%20%20%20%20%20%20customMenus%5BnewN%5D%20%3D%20%7B%20items%3A%20%5B%7B%20text%3A%20%22foo%22%2C%20value%3A%20%22bar%22%20%7D%5D%2C%20acceptReporters%3A%20false%20%7D%3B%0A%20%20%20%20%20%20namesArray.push(newN)%3B%0A%20%20%20%20%20%20listCon.insertBefore(makeMenuNameRow(newN%2C%20namesArray%2C%20isDark%2C%20listCon)%2C%20add)%3B%0A%20%20%20%20%20%20patchDivColor(listCon%2C%20isDark)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20listCon.appendChild(add)%3B%0A%0A%20%20%20%20%2F%2F%20Menu%20Items%20Container%20(Initially%20Blank)%0A%20%20%20%20parent.insertBefore(createContain(%22items%22%2C%20isDark)%2C%20parent.children%5B0%5D)%3B%0A%20%20%20%20parent.insertBefore(listCon%2C%20parent.children%5B0%5D)%3B%0A%20%20%20%20parent.insertBefore(title2%2C%20parent.children%5B0%5D)%3B%0A%20%20%20%20parent.insertBefore(title1%2C%20parent.children%5B0%5D)%3B%0A%20%20%7D%0A%0A%20%20function%20renderItemList(items%2C%20isDark%2C%20key)%20%7B%0A%20%20%20%20const%20itemCon%20%3D%20document.querySelector(%60%5Bclass%3D%22items%22%5D%60)%3B%0A%20%20%20%20itemCon.innerHTML%20%3D%20%22%22%3B%20%2F%2F%20cleanse%20items%0A%20%20%20%20items%20%3D%20items.items%3B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20items.length%3B%20i%2B%2B)%20itemCon.appendChild(makeItemRow(items%5Bi%5D%2C%20i%2C%20isDark%2C%20itemCon%2C%20key))%3B%0A%0A%20%20%20%20%2F%2F%20Add%20Button%0A%20%20%20%20const%20add%20%3D%20makeButton(addSVG%2C%20%22addItem%22)%3B%0A%20%20%20%20add.addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20customMenus%5Bkey%5D.items.push(%7B%20text%3A%20%22new%20item%22%2C%20value%3A%20%22new%20value%22%20%7D)%3B%0A%20%20%20%20%20%20renderItemList(customMenus%5Bkey%5D%2C%20isDark%2C%20key)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20itemCon.appendChild(add)%3B%0A%20%20%7D%0A%0A%20%20function%20initMenuMaker()%20%7B%0A%20%20%20%20extRevmovable%20%3D%20false%3B%0A%20%20%20%20const%20allBlocks%20%3D%20ScratchBlocks.mainWorkspace.blockDB_%3B%20%2F%2F%20Custom%20Block%20Modal%20Overrides%20BlockDB%0A%20%20%20%20ScratchBlocks.Procedures.createProcedureDefCallback_()%3B%0A%20%20%20%20const%20isDark%20%3D%20isPM%20%3F%20document.body.getAttribute(%22theme%22)%20%3D%3D%3D%20%22dark%22%20%3A%20ReduxStore.getState().scratchGui.theme.theme.gui%20%3D%3D%3D%20%22dark%22%3B%0A%0A%20%20%20%20%2F%2F%20Clean%20Modal%0A%20%20%20%20const%20blockSpace%20%3D%20document.querySelector(%60%5Bclass%5E%3D%22custom-procedures_workspace_%22%5D%60)%3B%0A%20%20%20%20blockSpace.remove()%3B%0A%20%20%20%20const%20buttons%20%3D%20document.querySelector(%60%5Bclass*%3D%22custom-procedures_body_%22%5D%60)%3B%0A%20%20%20%20for%20(let%20i%20%3D%20buttons.children.length%20-%201%3B%20i--%3B)%20buttons.removeChild(buttons.firstChild)%3B%0A%0A%20%20%20%20%2F%2F%20New%20Title%0A%20%20%20%20const%20title%20%3D%20document.querySelector(%60%5Bclass*%3D%22modal_header-item-title_%22%5D%60)%3B%0A%20%20%20%20title.textContent%20%3D%20%22Make%20a%20Dropdown%22%3B%0A%0A%20%20%20%20createMenuList(Object.keys(customMenus)%2C%20buttons%2C%20isDark)%3B%0A%20%20%20%20ghostInputRemove(%60%5Bclass*%3D%22removableTextInput%22%5D%60)%3B%0A%0A%20%20%20%20%2F%2F%20Override%20%22OK%22%20Button%0A%20%20%20%20const%20okBtn%20%3D%20document.querySelector(%60%5Bclass%5E%3D%22custom-procedures_ok-button_%22%5D%60)%3B%0A%20%20%20%20const%20clonedOkBtn%20%3D%20okBtn.cloneNode(true)%3B%0A%20%20%20%20okBtn.replaceWith(clonedOkBtn)%3B%0A%20%20%20%20clonedOkBtn.addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%2F%2F%20All%20Menus%20should%20Have%20At%20least%201%20in%20a%20Menu%0A%20%20%20%20%20%20for%20(const%20%5Bkey%2C%20menu%5D%20of%20Object.entries(customMenus))%20%7B%0A%20%20%09if%20(menu.items.length%20%3D%3D%3D%200)%20menu.items%20%3D%20%5B%7B%20text%3A%20%22foo%22%2C%20value%3A%20%22bar%22%20%7D%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20document.querySelector(%60%5Bclass%5E%3D%22close-button_close-button_%22%5D%60).click()%3B%0A%20%20%20%20%20%20refreshMagic()%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Remove%20Menu%20Blocks%20that%20no%20Longer%20Exist%0A%20%20%20%20%20%20const%20menuNames%20%3D%20Object.keys(customMenus)%3B%0A%20%20%20%20%20%20for%20(const%20%5Bkey%2C%20block%5D%20of%20Object.entries(allBlocks))%20%7B%0A%20%20%20%20%20%20%20%20if%20(block.type.startsWith(%22SP0zMenuMaker_menu_%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(menuNames.indexOf(block.type.replace(%22SP0zMenuMaker_menu_%22%2C%20%22%22))%20%3D%3D%3D%20-1)%20block.dispose()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%0A%20%20%2F%2F%20Menu%20Block%20Color%20Setters%0A%20%20function%20updateMenuColor(id%2C%20mainWorkspace%2C%20tree)%20%7B%0A%20%20%20%20const%20block%20%3D%20mainWorkspace.getBlockById(id)%3B%0A%20%20%20%20if%20(!block%20%7C%7C%20!block.type.startsWith(%22SP0zMenuMaker_menu%22))%20%7B%0A%20%20%20%20%20%20if%20(block%20%26%26%20tree%20%26%26%20block.childBlocks_)%20%7B%0A%20%20%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20block.childBlocks_.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20child%20%3D%20block.childBlocks_%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(child.type.startsWith(%22SP0zMenuMaker_menu%22))%20updateMenuColor(child.id%2C%20mainWorkspace%2C%20false)%3B%0A%20%20%20%20%20%20%20%20%20%20else%20if%20(child.childBlocks_)%20updateMenuColor(child.id%2C%20mainWorkspace%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20const%20parent%20%3D%20block.parentBlock_%3B%0A%20%20%20%20const%20box%20%3D%20block.inputList%5B0%5D%3F.fieldRow%5B0%5D%3F.box_%3B%0A%20%20%20%20if%20(!box)%20return%3B%0A%20%20%20%20if%20(parent)%20%7B%0A%20%20%20%20%20%20block.setColour(parent.colour_%2C%20parent.colourSecondary_%2C%20parent.colourTertiary_)%3B%0A%20%20%20%20%20%20box.setAttribute(%22fill%22%2C%20parent.colour_)%3B%0A%20%20%20%20%20%20box.setAttribute(%22stroke%22%2C%20parent.colourTertiary_)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20block.setColour(%22%230FBD8C%22%2C%20%22%230eaa7e%22%2C%20%22%230c9770%22)%3B%0A%20%20%20%20%20%20box.setAttribute(%22fill%22%2C%20%22%230FBD8C%22)%3B%0A%20%20%20%20%20%20box.setAttribute(%22stroke%22%2C%20%22%230c9770%22)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20function%20attachEvents()%20%7B%0A%20%20%20%20if%20(Scratch.gui)%20Scratch.gui.getBlockly().then(SB%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20mainWorkspace%20%3D%20SB.mainWorkspace%3B%0A%20%20%20%20%20%20if%20(!mainWorkspace%3F.rendered)%20return%3B%0A%20%20%20%20%20%20const%20workspaceEvents%20%3D%20(e)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(e.type%20%3D%3D%20SB.Events.END_DRAG%20%26%26%20Object.hasOwn(e%2C%20%22blockId%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(mainWorkspace.id%20%3D%3D%3D%20e.workspaceId)%20updateMenuColor(e.blockId%2C%20mainWorkspace%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20mainWorkspace.addChangeListener(workspaceEvents)%3B%0A%20%20%20%20%20%20const%20updateAllBlocks%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20for%20(const%20%5Bkey%2C%20block%5D%20of%20Object.entries(mainWorkspace.blockDB_))%20updateMenuColor(block.id%2C%20mainWorkspace%2C%20false)%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20vm.on(%22workspaceUpdate%22%2C%20updateAllBlocks)%3B%0A%20%20%20%20%20%20updateAllBlocks()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20function%20startListenerWorker()%20%7B%0A%20%20%20%20if%20(typeof%20ReduxStore%20%3D%3D%3D%20%22undefined%22)%20return%3B%0A%20%20%20%20const%20checkInEditor%20%3D%20()%20%3D%3E%20!ReduxStore.getState().scratchGui.mode.isPlayerOnly%3B%0A%20%20%20%20let%20inEditor%20%3D%20checkInEditor()%3B%0A%20%20%20%20if%20(inEditor)%20attachEvents()%3B%0A%20%20%20%20ReduxStore.subscribe(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20currentlyInEditor%20%3D%20checkInEditor()%3B%0A%20%20%20%20%20%20if%20(inEditor%20!%3D%3D%20currentlyInEditor)%20%7B%0A%20%20%20%20%20%20%20%20inEditor%20%3D%20currentlyInEditor%3B%0A%20%20%20%20%20%20%20%20if%20(inEditor)%20attachEvents()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20if%20(typeof%20scaffolding%20%3D%3D%3D%20%22undefined%22)%20startListenerWorker()%3B%0A%0A%20%20class%20SP0zMenuMaker%20%7B%0A%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20%2F*%20used%20by%20My%20Blocks%2B%20*%2F%0A%20%20%20%20%20%20this.refreshCategory%20%3D%20refreshMagic%3B%0A%20%20%20%20%20%20this.getMenus%20%3D%20()%20%3D%3E%20customMenus%3B%0A%20%20%20%20%20%20this.setMenus%20%3D%20(menu%2C%20value)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(customMenus%5Bmenu%5D)%20customMenus%5Bmenu%5D.items%20%3D%20value%3B%0A%20%20%20%20%20%20%20%20else%20customMenus%5Bmenu%5D%20%3D%20%7B%20items%3A%20value%2C%20acceptReporters%3A%20false%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20const%20self%20%3D%20this%3B%20%2F%2F%20To%20avoid%20slow%20writes%20every%20time%20a%20menu%20is%20changed%0A%20%20%20%20%20%20const%20oldToJSON%20%3D%20vm.constructor.prototype.toJSON%3B%0A%20%20%20%20%20%20vm.constructor.prototype.toJSON%20%3D%20function%20(...args)%20%7B%0A%20%20%20%20%20%20%20%20if%20(extRevmovable)%20return%20oldToJSON.apply(this%2C%20args)%3B%0A%20%20%20%20%20%20%20%20if%20(!isPM)%20runtime.extensionStorage.SP0zMenuMaker%20%3D%20self.serialize().SP0zMenuMaker%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Make%20the%20extension%20stay%20by%20adding%20a%20dummy%20block%0A%20%20%20%20%20%20%20%20const%20blocks%20%3D%20runtime.targets%5B0%5D.blocks%3B%0A%20%20%20%20%20%20%20%20blocks._blocks%5BTEMP_BLOCK_OPCODE%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20opcode%3A%20TEMP_BLOCK_OPCODE%2C%20id%3A%20TEMP_BLOCK_OPCODE%2C%20fields%3A%20%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20next%3A%20null%2C%20parent%3A%20null%2C%20shadow%3A%20false%2C%20toLevel%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20x%3A%20undefined%2C%20y%3A%20undefined%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20jsonStr%20%3D%20oldToJSON.apply(this%2C%20args)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20Block%20IDs%20may%20have%20been%20compressed%20at%20this%20point%0A%20%20%20%20%20%20%20%20const%20tempBlockId%20%3D%20Object.values(blocks._blocks).find(o%20%3D%3E%20o.opcode%20%3D%3D%3D%20TEMP_BLOCK_OPCODE)%3F.id%3B%0A%20%20%20%20%20%20%20%20if%20(tempBlockId)%20delete%20blocks._blocks%5BtempBlockId%5D%3B%0A%20%20%20%20%20%20%20%20return%20jsonStr%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20const%20oldinstallTargets%20%3D%20vm.installTargets%3B%0A%20%20%20%20%20%20vm.installTargets%20%3D%20function%20(...args)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Remove%20the%20dummy%20block%0A%20%20%20%20%20%20%20%20if%20(args%5B0%5D%20%26%26%20args%5B0%5D%5B0%5D)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20tempBlockId%20%3D%20Object.values(args%5B0%5D%5B0%5D.blocks._blocks).find(o%20%3D%3E%20o.opcode%20%3D%3D%3D%20TEMP_BLOCK_OPCODE)%3F.id%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(tempBlockId)%20delete%20args%5B0%5D%5B0%5D.blocks._blocks%5BtempBlockId%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20oldinstallTargets.apply(this%2C%20args)%3B%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Load%20the%20menus%0A%20%20%20%20%20%20this.refreshStorage()%3B%0A%20%20%20%20%20%20vm.runtime.on(%22PROJECT_LOADED%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20refreshWorkspace%20%3D%20vm.refreshWorkspace%3B%0A%20%20%20%20%20%20%20%20vm.refreshWorkspace%20%3D%20()%20%3D%3E%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20this.refreshStorage()%3B%0A%20%20%20%20%20%20%20%20vm.extensionManager.refreshBlocks(%22SP0zMenuMaker%22)%3B%0A%20%20%20%20%20%20%20%20vm.refreshWorkspace%20%3D%20refreshWorkspace%3B%0A%20%20%20%20%20%20%20%20vm.once(%22BEFORE_EXECUTE%22%2C%20()%20%3D%3E%20vm.refreshWorkspace())%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20refreshStorage()%20%7B%20%2F%2F%20TurboWarp%20support%0A%20%20%20%20%20%20if%20(!isPM)%20this.deserialize(runtime.extensionStorage)%3B%0A%20%20%20%20%7D%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20%2F%2F%20Used%20to%20Load%20the%20Menus%0A%20%20%20%20%20%20if%20(this.needsRefresh)%20%7B%0A%20%20%20%20%20%20%20%20this.needsRefresh%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20setTimeout(()%20%3D%3E%20refreshMagic()%2C%200)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22SP0zMenuMaker%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22Dropdown%20Maker%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22makeMenu%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BUTTON%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Open%20Menu%20Editor%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20func%3A%20%22removeExt%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BUTTON%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22Remove%20this%20Extension%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22importMenus%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22import%20custom%20dropdown%20JSON%20%5BMENUS%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20MENUS%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%60%7B%20%22myMenu-1%22%3A%20%7B%20%22items%22%3A%20%5B%7B%20%22text%22%3A%20%22one%22%2C%20%22value%22%3A%20%221%22%20%7D%5D%20%7D%20%7D%60%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22exportMenus%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22custom%20dropdowns%20JSON%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22My%20Menus%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.XML%2C%20xml%3A%20menusXML%20%7D%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20customMenus%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20makeMenu()%20%7B%20initMenuMaker()%20%7D%0A%0A%20%20%20%20removeExt()%20%7B%0A%20%20%20%20%20%20extRevmovable%20%3D%20true%3B%0A%20%20%20%20%20%20const%20deleteBlock%20%3D%20(target%2C%20blockId)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(target%20%3D%3D%3D%20vm.editingTarget%20%26%26%20Scratch.gui)%20Scratch.gui.getBlockly().then(SB%20%3D%3E%20SB.getMainWorkspace().getBlockById(blockId)%3F.dispose(true%2C%20false))%3B%0A%20%20%20%20%20%20%20%20else%20target.blocks.deleteBlock(blockId)%3B%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20customMenus%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20menusXML%20%3D%20%60%3Clabel%20text%3D%22Try%20creating%20some%20menus!%22%20%2F%3E%60%3B%0A%20%20%20%20%20%20for%20(const%20target%20of%20runtime.targets)%20%7B%0A%20%20%20%20%20%20%20%20for%20(const%20block%20of%20Object.values(target.blocks._blocks))%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(block.opcode.startsWith(%22SP0zMenuMaker_%22))%20deleteBlock(target%2C%20block.id)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20vm.extensionManager.refreshBlocks(%22SP0zMenuMaker%22)%3B%0A%20%20%20%20%20%20alert(%22Save%20and%20reload%20the%20project%20for%20the%20extension%20to%20fully%20be%20removed.%22)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20importMenus(args)%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20const%20menus%20%3D%20JSON.parse(args.MENUS)%3B%0A%20%20%20%20%20%20%20%20if%20(typeof%20menus%20!%3D%3D%20%22object%22%20%7C%7C%20menus%20%3D%3D%3D%20null%20%7C%7C%20Array.isArray(menus))%20return%20alert(%22Imported%20JSON%20Must%20be%20an%20Object%22)%3B%0A%20%20%20%20%20%20%20%20for%20(const%20key%20in%20menus)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(hasOwn(menus%2C%20key))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20innerObject%20%3D%20menus%5Bkey%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!hasOwn(innerObject%2C%20%22items%22))%20return%20alert(%60%24%7Bkey%7D%20Menu%20Needs%20an%20%22items%22%20Key%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(const%20innerKey%20in%20innerObject)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(hasOwn(innerObject%2C%20innerKey)%20%26%26%20innerKey%20!%3D%3D%20%22items%22)%20delete%20innerObject%5BinnerKey%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20menus%5Bkey%5D.acceptReporters%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20items%20%3D%20innerObject.items%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!Array.isArray(items))%20return%20alert(%60%22items%22%20key%20in%20%24%7Bkey%7D%20Menu%20Must%20be%20an%20Array%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(items.length%20%3D%3D%3D%200)%20return%20alert(%60%22items%22%20key%20in%20%24%7Bkey%7D%20Menu%20Must%20have%20at%20Least%201%20Item%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(const%20item%20of%20items)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20item%20!%3D%3D%20%22object%22%20%7C%7C%20item%20%3D%3D%3D%20null%20%7C%7C%20Array.isArray(item))%20return%20alert(%60items%20in%20%22items%22%20key%20in%20%24%7Bkey%7D%20Menu%20Must%20be%20Objects%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20keys%20%3D%20Object.keys(item)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(keys.length%20!%3D%3D%202%20%7C%7C%20!keys.includes(%22text%22)%20%7C%7C%20!keys.includes(%22value%22))%20return%20alert(%60items%20in%20%22items%22%20key%20in%20%24%7Bkey%7D%20Menu%20Must%20have%202%20keys%2C%20%22text%22%20and%20%22value%22%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(typeof%20item.text%20!%3D%3D%20%22string%22%20%7C%7C%20typeof%20item.value%20!%3D%3D%20%22string%22)%20return%20alert(%60%22item%22%20values%20in%20%24%7Bkey%7D%20Menu%20Must%20be%20Strings%60)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20customMenus%20%3D%20menus%3B%0A%20%20%20%20%20%20%20%20refreshMagic()%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Remove%20Menu%20Blocks%20that%20no%20Longer%20Exist%0A%20%20%20%20%20%20%20%20const%20menuNames%20%3D%20Object.keys(customMenus)%3B%0A%20%20%20%20%20%20%20%20if%20(Scratch.gui)%20Scratch.gui.getBlockly().then(SB%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20allBlocks%20%3D%20SB.mainWorkspace.blockDB_%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(const%20block%20of%20Object.values(allBlocks))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(block.type.startsWith(%22SP0zMenuMaker_menu_%22))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(menuNames.indexOf(block.type.replace(%22SP0zMenuMaker_menu_%22%2C%20%22%22))%20%3D%3D%3D%20-1)%20block.dispose()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20if%20(typeof%20scaffolding%20%3D%3D%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(const%20target%20of%20runtime.targets)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20blockCache%20%3D%20target.blocks%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(const%20block%20of%20Object.values(blockCache._blocks))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20block.opcode.startsWith(%22SP0zMenuMaker_menu_%22)%20%26%26%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20menuNames.indexOf(block.opcode.replace(%22SP0zMenuMaker_menu_%22%2C%20%22%22))%20%3D%3D%3D%20-1%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%20blockCache.deleteBlock(block.id%2C%20true)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20catch%20%7B%20alert(%22Couldnt%20Parse%20Imported%20Custom%20Menu%20JSON%22)%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20exportMenus()%20%7B%20return%20JSON.stringify(customMenus)%20%7D%0A%0A%20%20%20%20%2F%2F%20PenguinMod%20%2B%20IntermediaryTW%20Storage%0A%20%20%20%20serialize()%20%7B%20return%20%7B%20SP0zMenuMaker%20%3A%20%7B%20menus%20%3A%20customMenus%20%7D%20%7D%20%7D%0A%20%20%20%20deserialize(data)%20%7B%0A%20%20%20%20%20%20if%20(data.SP0zMenuMaker%20!%3D%3D%20undefined)%20customMenus%20%3D%20data.SP0zMenuMaker.menus%3B%0A%20%20%20%20%20%20else%20startListenerWorker()%3B%0A%20%20%20%20%20%20this.needsRefresh%20%3D%20true%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20Scratch.extensions.register((extensionInstance%20%3D%20new%20SP0zMenuMaker()))%3B%0A%20%20if%20(isPM%20%26%26%20typeof%20scaffolding%20%3D%3D%3D%20%22undefined%22)%20%7B%0A%20%20%20%20refreshMagic()%3B%0A%20%20%20%20startListenerWorker()%3B%0A%20%20%7D%0A%20%20runtime.ext_SP0zMenuMaker%20%3D%20extensionInstance%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Fetch%2B%0A%2F%2F%20ID%3A%20SPprogress%0A%2F%2F%20Description%3A%20Fetch%20the%20content%20and%20progress%20of%20URLs%20in%20different%20encoded%20formats.%0A%2F%2F%20By%3A%20SharkPool%0A%2F%2F%20License%3A%20MIT%0A%0A%2F%2F%20Version%20V.2.0.02%0A%0A(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20throw%20new%20Error(%22Fetch%2B%20must%20run%20unsandboxed!%22)%3B%0A%0A%20%20const%20menuIconURI%20%3D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMS41NjUiIGhlaWdodD0iMzEuNTY1IiB2aWV3Qm94PSIwIDAgMzEuNTY1IDMxLjU2NSI%2BPHBhdGggZD0iTS43NSAxNS43ODJDLjc1IDcuNDggNy40OC43NSAxNS43ODIuNzVzMTUuMDMyIDYuNzMgMTUuMDMyIDE1LjAzMi02LjczIDE1LjAzMi0xNS4wMzIgMTUuMDMyUy43NSAyNC4wODQuNzUgMTUuNzgyeiIgZmlsbD0iIzAwYmUxZSIgc3Ryb2tlPSIjMDA4MDEzIiBzdHJva2Utd2lkdGg9IjEuNSIvPjxwYXRoIGQ9Ik0yMy40MTcgMTQuNDY5YTguOTUgOC45NSAwIDAgMS04Ljk0OCA4Ljk0OCA4Ljk1IDguOTUgMCAxIDEgOC45NDgtOC45NDgiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjxwYXRoIGQ9Ik0xOS4wNzEgMTQuNDc0YzAgMS45NDItLjMxNiAzLjczOS0uODY1IDUuMjA0LS44MyAyLjI2Mi0yLjE5NiAzLjczOC0zLjczOSAzLjczOHMtMi45MDQtMS40NzYtMy43MzktMy43MzhjLS41NDMtMS40NjUtLjg2LTMuMjYyLS44Ni01LjIwNCAwLTEuOTQ0LjMxNy0zLjc0Ljg2LTUuMjA1LjgzNS0yLjI3MyAyLjE5Ny0zLjc1IDMuNzQtMy43NSAxLjU0MiAwIDIuOTA4IDEuNDc3IDMuNzM4IDMuNzUuNTQ5IDEuNDY2Ljg2NCAzLjI2MS44NjQgNS4yMDVNNS45NTYgMTcuMDQ4aDE3LjAyNU01Ljk1NiAxMS44OTJoMTcuMDI1TTE0LjQ2OSAyMy40MlY1LjUyMSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8%2BPGcgc3Ryb2tlLXdpZHRoPSIwIj48cGF0aCBkPSJtMjUuMDAyIDI1LjExNy00Ljc4Mi00Ljc4MiAyLjI1Ny0yLjI1NyA0LjgxNyA0LjgxN2MuNDEyLjQxMi4yNDMgMS4zNzEtLjI5NyAxLjkyOHMtMS42MjQuNjY2LTEuOTk1LjI5NCIgZmlsbD0iIzAwYmUxZSIvPjxwYXRoIGQ9Ik0xNi44MjggMjAuOTQ5YTQuNDI4IDQuNDI4IDAgMSAxIDYuMjYyLTYuMjYzIDQuNDI4IDQuNDI4IDAgMCAxLTYuMjYyIDYuMjYzIiBmaWxsPSIjMDBiZTFlIi8%2BPHBhdGggZD0iTTE3LjU4MiAyMC4xOTVhMy4zNjMgMy4zNjMgMCAxIDEgNC43NTUtNC43NTUgMy4zNjMgMy4zNjMgMCAwIDEtNC43NTUgNC43NTUiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNMTguMzgyIDE5LjM5NWEyLjIzIDIuMjMgMCAxIDEgMy4xNTUtMy4xNTUgMi4yMyAyLjIzIDAgMCAxLTMuMTU1IDMuMTU1IiBmaWxsPSIjMDBiZTFlIi8%2BPHBhdGggZD0ibTI1LjMxMiAyNC4xMTUtNC4wMTMtNC4wMTIuOTQ2LS45NDUgMy45NzcgMy45NzdjLjI0NC4yNDQuMzExLjY2LjA0Ljk1MmEuNjc1LjY3NSAwIDAgMS0uOTUuMDI4IiBmaWxsPSIjZmZmIi8%2BPC9nPjwvc3ZnPg%3D%3D%22%3B%0A%0A%20%20const%20runtime%20%3D%20Scratch.vm.runtime%3B%0A%0A%20%20let%20fetchQueue%20%3D%200%3B%0A%20%20let%20fetchInfo%20%3D%20%7B%0A%20%20%20%20response%3A%20%22%22%2C%20status%3A%20%22%22%2C%0A%20%20%20%20fileSize%3A%200%2C%20progress%3A%200%0A%20%20%7D%3B%0A%0A%20%20runtime.on(%22PROJECT_STOP_ALL%22%2C%20()%20%3D%3E%20%7B%20fetchQueue%20%3D%200%20%7D)%3B%0A%20%20runtime.on(%22PROJECT_START%22%2C%20()%20%3D%3E%20%7B%20fetchQueue%20%3D%200%20%7D)%3B%0A%0A%20%20class%20SPprogress%20%7B%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22SPprogress%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22Fetch%2B%22%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%2300be1e%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22get%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22fetch%20%5BURL%5D%20as%20%5BTYPE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20URL%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22https%3A%2F%2Fextensions.turbowarp.org%2Fhello.txt%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22ENCODING%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22fetchThis2%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22fetch%20%5BURL%5D%20as%20%5BTYPE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20URL%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20%22https%3A%2F%2Fextensions.turbowarp.org%2Fhello.txt%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22ENCODING%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%2F*%20Deprecation%20Marker%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22fetchThis%22%2C%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22fetch%20%5BURL%5D%20as%20%5BTYPE%5D%20with%20size%20%5BSIZE%5D%20bytes%20as%20%5BTYPE%5D%22%2C%20hideFromPalette%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20URL%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SIZE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20TYPE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22ENCODING%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%2F*%20Marker%20End%20*%2F%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22whenFetched%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.EVENT%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22when%20fetch%20finishes%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22inProgress%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22fetch%20in%20progress%3F%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getProgress%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22progress%20of%20fetch%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getStatus%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22status%20of%20fetch%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getSize%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22file%20size%20of%20fetch%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getResponse%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22last%20fetch%20data%22%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20ENCODING%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22text%22%2C%20%22data%3A%20URL%22%2C%20%22base64%22%2C%20%22hex%22%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Helper%20Funcs%0A%20%20%20%20removeQueue()%20%7B%0A%20%20%20%20%20%20fetchQueue--%3B%0A%20%20%20%20%20%20runtime.startHats(%22SPprogress_whenFetched%22)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20blob2Data(blob%2C%20type)%20%7B%0A%20%20%20%20%20%20return%20new%20Promise((resolve)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20reader%20%3D%20new%20FileReader()%3B%0A%20%20%20%20%20%20%20%20reader.onloadend%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20base64%20%3D%20reader.result.split(%22%2C%22)%5B1%5D%3B%0A%20%20%20%20%20%20%20%20%20%20switch%20(type)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22data%3A%20URL%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20resolve(reader.result)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22base64%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20resolve(base64)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22hex%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20hexArray%20%3D%20%5B...atob(base64)%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.map((ch)%20%3D%3E%20ch.charCodeAt(0).toString(16).padStart(2%2C%20%220%22)).join(%22%20%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20resolve(hexArray)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20blob.text().then((text)%20%3D%3E%20resolve(text))%3B%20%2F%2F%20return%20text%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20reader.readAsDataURL(blob)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Block%20Funcs%0A%20%20%20%20async%20get(args)%20%7B%0A%20%20%20%20%20%20const%20url%20%3D%20args.URL%3B%0A%20%20%20%20%20%20if%20(!url.includes(%22http%22))%20return%20%22%22%3B%0A%20%20%20%20%20%20fetchInfo.progress%20%3D%200%3B%0A%20%20%20%20%20%20fetchQueue%2B%2B%3B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20let%20fileSize%3B%0A%20%20%20%20%20%20%20%20const%20headResponse%20%3D%20await%20Scratch.fetch(url%2C%20%7B%20method%3A%20%22HEAD%22%20%7D)%3B%0A%20%20%20%20%20%20%20%20if%20(headResponse.ok)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20contentLength%20%3D%20headResponse.headers.get(%22Content-Length%22)%3B%0A%20%20%20%20%20%20%20%20%20%20fileSize%20%3D%20contentLength%20%3F%20parseInt(contentLength%2C%2010)%20%3A%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20const%20response%20%3D%20await%20Scratch.fetch(url)%3B%0A%20%20%20%20%20%20%20%20fetchInfo.status%20%3D%20response.status%3B%0A%20%20%20%20%20%20%20%20if%20(!response.ok)%20throw%20new%20Error(%22Failed%20to%20get%20content%22)%3B%0A%20%20%20%20%20%20%20%20const%20blob%20%3D%20await%20response.blob()%3B%0A%20%20%20%20%20%20%20%20fetchInfo.fileSize%20%3D%20fileSize%20%7C%7C%20blob.size%3B%0A%20%20%20%20%20%20%20%20const%20result%20%3D%20this.blob2Data(blob%2C%20args.TYPE)%3B%0A%20%20%20%20%20%20%20%20fetchInfo.response%20%3D%20result%3B%0A%20%20%20%20%20%20%20%20fetchInfo.progress%20%3D%20100%3B%0A%20%20%20%20%20%20%20%20this.removeQueue()%3B%0A%20%20%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%20%20%7D%20catch%20%7B%0A%20%20%20%20%20%20%20%20fetchInfo%20%3D%20%7B%20response%3A%20%22%22%2C%20status%3A%20%22Fetch%20Failed%2C%20check%20Console%22%2C%20fileSize%3A%200%2C%20progress%3A%20-1%20%7D%3B%0A%20%20%20%20%20%20%20%20this.removeQueue()%3B%0A%20%20%20%20%20%20%20%20return%20%22%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20fetchThis2(args)%20%7B%20return%20await%20this.fetchThis(args)%20%7D%0A%20%20%20%20async%20fetchThis(args)%20%7B%0A%20%20%20%20%20%20let%20url%20%3D%20args.URL%3B%0A%20%20%20%20%20%20url%20%3D%20%60%24%7Burl%7D%24%7B(url.includes(%22%3F%22)%20%26%26%20url.lastIndexOf(%22%2F%22)%20%3C%3D%20url.lastIndexOf(%22%3F%22))%20%3F%20%22%26%22%20%3A%20%22%3F%22%7Dcache%3D%24%7BMath.random()%7D%60%3B%0A%20%20%20%20%20%20if%20(!url.includes(%22http%22))%20return%3B%0A%20%20%0A%20%20%20%20%20%20const%20approxSize%20%3D%20Scratch.Cast.toNumber(args.SIZE)%3B%0A%20%20%20%20%20%20fetchInfo.progress%20%3D%200%3B%0A%20%20%20%20%20%20fetchQueue%2B%2B%3B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20let%20fileSize%3B%0A%20%20%20%20%20%20%20%20const%20headResponse%20%3D%20await%20Scratch.fetch(url%2C%20%7B%20method%3A%20%22HEAD%22%20%7D)%3B%0A%20%20%20%20%20%20%20%20if%20(headResponse.ok)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20contentLength%20%3D%20headResponse.headers.get(%22Content-Length%22)%3B%0A%20%20%20%20%20%20%20%20%20%20fileSize%20%3D%20contentLength%20%3F%20parseInt(contentLength%2C%2010)%20%3A%20Scratch.Cast.toNumber(args.SIZE)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20const%20xhr%20%3D%20new%20XMLHttpRequest()%3B%0A%20%20%20%20%20%20%20%20xhr.responseType%20%3D%20%22blob%22%3B%0A%20%20%20%20%20%20%20%20xhr.onload%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(xhr.status%20%3D%3D%3D%20200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fetchInfo%20%3D%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20response%3A%20this.blob2Data(xhr.response%2C%20args.TYPE)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20status%3A%20xhr.status%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20fileSize%3A%20xhr.response.size%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20progress%3A%20100%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fetchInfo%20%3D%20%7B%20response%3A%20%22%22%2C%20status%3A%20%22Fetch%20Failed%2C%20check%20Console%22%2C%20fileSize%3A%200%2C%20progress%3A%20-1%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20this.removeQueue()%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20xhr.onerror%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20fetchInfo%20%3D%20%7B%20response%3A%20%22%22%2C%20status%3A%20%22Fetch%20Failed%2C%20check%20Console%22%2C%20fileSize%3A%200%2C%20progress%3A%20-1%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20this.removeQueue()%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20xhr.onprogress%20%3D%20(event)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20total%20%3D%20event.total%20%3D%3D%3D%200%20%3F%20fileSize%20%3A%20event.total%3B%0A%20%20%20%20%20%20%20%20%20%20fetchInfo.progress%20%3D%20Math.round((event.loaded%20%2F%20total)%20*%20100)%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20xhr.open(%22GET%22%2C%20url%2C%20true)%3B%0A%20%20%20%20%20%20%20%20xhr.send()%3B%0A%20%20%20%20%20%20%7D%20catch%20%7B%0A%20%20%20%20%20%20%20%20fetchInfo%20%3D%20%7B%20response%3A%20%22%22%2C%20status%3A%20%22Fetch%20Failed%2C%20check%20Console%22%2C%20fileSize%3A%200%2C%20progress%3A%20-1%20%7D%3B%0A%20%20%20%20%20%20%20%20this.removeQueue()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getStatus()%20%7B%20return%20fetchInfo.status%20%7D%0A%20%20%20%20getResponse()%20%7B%20return%20fetchInfo.response%20%7D%0A%20%20%20%20getSize()%20%7B%20return%20fetchInfo.fileSize%20%7D%0A%20%20%20%20inProgress()%20%7B%20return%20fetchQueue%20%3E%200%20%7D%0A%20%20%20%20getProgress()%20%7B%20return%20%60%24%7BfetchInfo.progress%7D%25%60%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20SPprogress())%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B","data:text/javascript;,(function(Scratch)%20%7B%20%2F%2F%20Name%3A%20Captchas%0A%2F%2F%20ID%3A%20SPcaptcha%0A%2F%2F%20Description%3A%20Captchas%20to%20Check%20if%20Users%20are%20Human%20or%20not%0A%2F%2F%20By%3A%20SharkPool%0A%0A%2F%2F%20Version%20V.1.0.2%0A%0A(function%20(Scratch)%20%7B%0A%20%20%22use%20strict%22%3B%0A%20%20if%20(!Scratch.extensions.unsandboxed)%20throw%20new%20Error(%22Captchas%20Extension%20must%20run%20unsandboxed!%22)%3B%0A%0A%20%20const%20menuIconURI%20%3D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxMzUuMTM4NjUiIGhlaWdodD0iMTM1LjEzODY1IiB2aWV3Qm94PSIwLDAsMTM1LjEzODY1LDEzNS4xMzg2NSI%2BPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE3Mi40MzA2NywtMTEyLjQzMDY3KSI%2BPGcgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aXNQYWludGluZ0xheWVyJnF1b3Q7OnRydWV9IiBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZS1saW5lY2FwPSJidXR0IiBzdHJva2UtbGluZWpvaW49Im1pdGVyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1kYXNoYXJyYXk9IiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjAiIHN0eWxlPSJtaXgtYmxlbmQtbW9kZTogbm9ybWFsIj48cGF0aCBkPSJNMTc1LjkzMDY3LDE4MGMwLC0zNS4zODQ1MSAyOC42ODQ4MSwtNjQuMDY5MzMgNjQuMDY5MzMsLTY0LjA2OTMzYzM1LjM4NDUxLDAgNjQuMDY5MzMsMjguNjg0ODEgNjQuMDY5MzMsNjQuMDY5MzNjMCwzNS4zODQ1MSAtMjguNjg0ODEsNjQuMDY5MzMgLTY0LjA2OTMzLDY0LjA2OTMzYy0zNS4zODQ1MSwwIC02NC4wNjkzMywtMjguNjg0ODEgLTY0LjA2OTMzLC02NC4wNjkzM3oiIGZpbGw9IiM2MDZlOTAiIHN0cm9rZT0iIzMzM2E0ZCIgc3Ryb2tlLXdpZHRoPSI3Ii8%2BPHBhdGggZD0iTTI4MS45OTg1NSwxNzkuOTM4NThjLTYuNDE0LC0wLjA5MyAtMjIuMDE1LC0wLjA2MTIgLTM1LjgyNSwtMC4wMDdsMTAuOTAzLC0xMC45MDNjLTMuMzMzLC01LjIzMDkgLTguOTkzNiwtOC44MzQ4NyAtMTUuNTI0LC05LjM1MDNjLTAuMzYxMSwtMC4xNDAxOCAtMC44NTI1NiwtMC4yMTQ1OCAtMS40ODkzLC0wLjIxNDU4Yy01LjI3MDcsMCAtOS4wODA5LDEuNzE1OCAtMTEuNzcsMy44MTQzYy0yLjU4NTYsMS44MTEgLTQuNzMsNC4yMDg4IC02LjIzOTUsNy4wMDA1bC0xNS40MDMsLTE1LjU2NWM3LjY1OSwtMTAuMDgxMyAxOS43NzUsLTE2LjU5MSAzMy40MTMsLTE2LjU5MWMxMy4xMDUsMCAyNC44MDUsNi4wMTI5IDMyLjQ5NiwxNS40MjdsOS4zOTcxLC05LjM5NzF2MzMuOTkxYzAuMDI3LDAuNTk2MiAwLjA0MDksMS4xOTUyOCAwLjA0MjksMS43OTc2IiBmaWxsPSIjMWMzYWE5IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIvPjxwYXRoIGQ9Ik0yMzkuODE2MzMsMTM4LjEyNTJjLTAuMDkzMSw2LjQxNCAtMC4wNjEyLDIyLjAxNSAtMC4wMDcsMzUuODI1bC0xMC45MDMsLTEwLjkwM2MtNS4yMzA5LDMuMzMzIC04LjgzNDg3LDguOTkzNiAtOS4zNTAzLDE1LjUyNGMtMC4xNDAxOCwwLjM2MTEgLTAuMjE0NTgsMC44NTI1NiAtMC4yMTQ1OCwxLjQ4OTNjMCw1LjI3MDcgMS43MTU5LDkuMDgwOSAzLjgxNDMsMTEuNzdjMS44MTEsMi41ODU2IDQuMjA4OCw0LjczIDcuMDAwNSw2LjIzOTVsLTE1LjU2NSwxNS40MDNjLTEwLjA4MTIsLTcuNjU5IC0xNi41OTEsLTE5Ljc3NSAtMTYuNTkxLC0zMy40MTNjMCwtMTMuMTA1IDYuMDEyOSwtMjQuODA1IDE1LjQyNywtMzIuNDk2bC05LjM5NzEsLTkuMzk3MWgzMy45OTFjMC41OTYyLC0wLjAyNyAxLjE5NTI4LC0wLjA0MDkgMS43OTc2LC0wLjA0MjkiIGZpbGw9IiM0Mjg1ZjQiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIi8%2BPHBhdGggZD0iTTE5OC4wMDI5NSwxODAuMDYxNDJjNi40MTQsMC4wOTMgMjIuMDE1LDAuMDYxMiAzNS44MjUsMC4wMDdsLTEwLjkwMywxMC45MDNjMy4zMzMsNS4yMzA5IDguOTkzNiw4LjgzNDg3IDE1LjUyNCw5LjM1MDNjMC4zNjExLDAuMTQwMTggMC44NTI1NiwwLjIxNDU4IDEuNDg5MywwLjIxNDU4YzUuMjcwNywwIDkuMDgwOSwtMS43MTU4IDExLjc3LC0zLjgxNDNjMi41ODU2LC0xLjgxMSA0LjczLC00LjIwODggNi4yMzk1LC03LjAwMDVsMTUuNDAzLDE1LjU2NWMtNy42NTksMTAuMDgxMyAtMTkuNzc1LDE2LjU5MSAtMzMuNDEzLDE2LjU5MWMtMTMuMTA1LDAgLTI0LjgwNSwtNi4wMTI5IC0zMi40OTYsLTE1LjQyN2wtOS4zOTcxLDkuMzk3MXYtMzMuOTkxYy0wLjAyNywtMC41OTYyIC0wLjA0MDksLTEuMTk1MjggLTAuMDQyOSwtMS43OTc2IiBmaWxsPSIjYWJhYmFiIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIvPjwvZz48L2c%2BPC9zdmc%2B%22%3B%0A%0A%20%20const%20blockIconURI%20%3D%0A%22data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxMTcuNTE0MDkiIGhlaWdodD0iMTE3LjUxNDA5IiB2aWV3Qm94PSIwLDAsMTE3LjUxNDA5LDExNy41MTQwOSI%2BPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE4MS4yNDI5NSwtMTIxLjI0Mjk1KSI%2BPGcgZGF0YS1wYXBlci1kYXRhPSJ7JnF1b3Q7aXNQYWludGluZ0xheWVyJnF1b3Q7OnRydWV9IiBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9ImJ1dHQiIHN0cm9rZS1saW5lam9pbj0ibWl0ZXIiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWRhc2hhcnJheT0iIiBzdHJva2UtZGFzaG9mZnNldD0iMCIgc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBub3JtYWwiPjxwYXRoIGQ9Ik0xODEuMjQyOTUsMjM4Ljc1NzA1di0xMTcuNTE0MDloMTE3LjUxNDA5djExNy41MTQwOXoiIGZpbGw9Im5vbmUiIHN0cm9rZS13aWR0aD0iMCIvPjxwYXRoIGQ9Ik0yODEuOTk4NTUsMTc5LjkzODU4Yy02LjQxNCwtMC4wOTMgLTIyLjAxNSwtMC4wNjEyIC0zNS44MjUsLTAuMDA3bDEwLjkwMywtMTAuOTAzYy0zLjMzMywtNS4yMzA5IC04Ljk5MzYsLTguODM0ODcgLTE1LjUyNCwtOS4zNTAzYy0wLjM2MTEsLTAuMTQwMTggLTAuODUyNTYsLTAuMjE0NTggLTEuNDg5MywtMC4yMTQ1OGMtNS4yNzA3LDAgLTkuMDgwOSwxLjcxNTggLTExLjc3LDMuODE0M2MtMi41ODU2LDEuODExIC00LjczLDQuMjA4OCAtNi4yMzk1LDcuMDAwNWwtMTUuNDAzLC0xNS41NjVjNy42NTksLTEwLjA4MTMgMTkuNzc1LC0xNi41OTEgMzMuNDEzLC0xNi41OTFjMTMuMTA1LDAgMjQuODA1LDYuMDEyOSAzMi40OTYsMTUuNDI3bDkuMzk3MSwtOS4zOTcxdjMzLjk5MWMwLjAyNywwLjU5NjIgMC4wNDA5LDEuMTk1MjggMC4wNDI5LDEuNzk3NiIgZmlsbD0iIzFjM2FhOSIgc3Ryb2tlLXdpZHRoPSIxIi8%2BPHBhdGggZD0iTTIzOS44MTYzMywxMzguMTI1MmMtMC4wOTMxLDYuNDE0IC0wLjA2MTIsMjIuMDE1IC0wLjAwNywzNS44MjVsLTEwLjkwMywtMTAuOTAzYy01LjIzMDksMy4zMzMgLTguODM0ODcsOC45OTM2IC05LjM1MDMsMTUuNTI0Yy0wLjE0MDE4LDAuMzYxMSAtMC4yMTQ1OCwwLjg1MjU2IC0wLjIxNDU4LDEuNDg5M2MwLDUuMjcwNyAxLjcxNTksOS4wODA5IDMuODE0MywxMS43N2MxLjgxMSwyLjU4NTYgNC4yMDg4LDQuNzMgNy4wMDA1LDYuMjM5NWwtMTUuNTY1LDE1LjQwM2MtMTAuMDgxMiwtNy42NTkgLTE2LjU5MSwtMTkuNzc1IC0xNi41OTEsLTMzLjQxM2MwLC0xMy4xMDUgNi4wMTI5LC0yNC44MDUgMTUuNDI3LC0zMi40OTZsLTkuMzk3MSwtOS4zOTcxaDMzLjk5MWMwLjU5NjIsLTAuMDI3IDEuMTk1MjgsLTAuMDQwOSAxLjc5NzYsLTAuMDQyOSIgZmlsbD0iIzQyODVmNCIgc3Ryb2tlLXdpZHRoPSIxIi8%2BPHBhdGggZD0iTTE5OC4wMDI5NSwxODAuMDYxNDJjNi40MTQsMC4wOTMgMjIuMDE1LDAuMDYxMiAzNS44MjUsMC4wMDdsLTEwLjkwMywxMC45MDNjMy4zMzMsNS4yMzA5IDguOTkzNiw4LjgzNDg3IDE1LjUyNCw5LjM1MDNjMC4zNjExLDAuMTQwMTggMC44NTI1NiwwLjIxNDU4IDEuNDg5MywwLjIxNDU4YzUuMjcwNywwIDkuMDgwOSwtMS43MTU4IDExLjc3LC0zLjgxNDNjMi41ODU2LC0xLjgxMSA0LjczLC00LjIwODggNi4yMzk1LC03LjAwMDVsMTUuNDAzLDE1LjU2NWMtNy42NTksMTAuMDgxMyAtMTkuNzc1LDE2LjU5MSAtMzMuNDEzLDE2LjU5MWMtMTMuMTA1LDAgLTI0LjgwNSwtNi4wMTI5IC0zMi40OTYsLTE1LjQyN2wtOS4zOTcxLDkuMzk3MXYtMzMuOTkxYy0wLjAyNywtMC41OTYyIC0wLjA0MDksLTEuMTk1MjggLTAuMDQyOSwtMS43OTc2IiBmaWxsPSIjYWJhYmFiIiBzdHJva2Utd2lkdGg9IjEiLz48L2c%2BPC9nPjwvc3ZnPg%3D%3D%22%3B%0A%0A%20%20const%20vm%20%3D%20Scratch.vm%3B%0A%20%20const%20render%20%3D%20vm.renderer%3B%0A%0A%20%20const%20fontMenu%20%3D%20%5B%0A%20%20%20%20%22Sans%20Serif%22%2C%20%22Serif%22%2C%20%22Handwriting%22%2C%0A%20%20%20%20%22Marker%22%2C%20%22Curly%22%2C%20%22Pixel%22%0A%20%20%5D%3B%0A%0A%20%20const%20allElements%20%3D%20%5B%0A%20%20%20%20%22image%20frame%22%2C%20%22image%20background%22%2C%0A%20%20%20%20%22input%20frame%22%2C%20%22input%20background%22%2C%20%22input%20text%22%2C%0A%20%20%20%20%22button%20frame%22%2C%20%22button%20background%20(hover)%22%2C%20%22button%20background%20(normal)%22%2C%20%22button%20text%22%0A%20%20%5D%3B%0A%0A%20%20const%20xmlEscape%20%3D%20function%20(unsafe)%20%7B%0A%20%20%20%20unsafe%20%3D%20String(unsafe)%3B%0A%20%20%20%20return%20unsafe.replace(%2F%5B%3C%3E%26'%22%5D%2Fg%2C%20c%20%3D%3E%20%7B%0A%20%20%20%20%20%20switch%20(c)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22%3C%22%3A%20return%20%22%26lt%3B%22%3B%0A%20%20%20%20%20%20%20%20case%20%22%3E%22%3A%20return%20%22%26gt%3B%22%3B%0A%20%20%20%20%20%20%20%20case%20%22%26%22%3A%20return%20%22%26amp%3B%22%3B%0A%20%20%20%20%20%20%20%20case%20%22'%22%3A%20return%20%22%26apos%3B%22%3B%0A%20%20%20%20%20%20%20%20case%20%22%5C%22%22%3A%20return%20%22%26quot%3B%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%7D%3B%0A%0A%20%20%2F%2F%20Security%20Stuff%0A%20%20let%20internalUserPass%2C%20internalUserAnswer%2C%20internalAnswer%3B%0A%0A%20%20let%20currentCaptcha%20%3D%20null%3B%0A%20%20let%20captchaInfo%20%3D%20%7B%0A%20%20%20%20passed%3A%20false%2C%20difficulty%3A%20%22easy%22%2C%0A%20%20%20%20answer%3A%20%22%22%2C%20userAnswer%3A%20%22%22%2C%0A%20%20%20%20lastImg%3A%20%22%22%0A%20%20%7D%3B%0A%20%20let%20visSetting%20%3D%20%7B%0A%20%20%20%20%2F%2F%20Functions%0A%20%20%20%20autoClose%3A%20true%2C%20focusMode%3A%20true%2C%0A%0A%20%20%20%20%2F%2F%20Visuals%0A%20%20%20%20font%3A%20%22Inherit%22%2C%0A%20%20%20%20%22image%20frame%22%20%3A%20%22%23cccccc%22%2C%20%22image%20background%22%20%3A%20%22%23000000%22%2C%0A%20%20%20%20%22input%20frame%22%20%3A%20%22%23cccccc%22%2C%20%22input%20background%22%20%3A%20%22linear-gradient(%23ffffff%2C%20%23b3b3b3)%22%2C%20%22input%20text%22%20%3A%20%22%23000000%22%2C%0A%20%20%20%20%22button%20frame%22%20%3A%20%22%23cccccc%22%2C%20%22button%20text%22%20%3A%20%22%23000000%22%2C%0A%20%20%20%20%22button%20background%20(hover)%22%20%3A%20%22linear-gradient(%23b3b3b3%2C%20%23ffffff)%22%2C%20%22button%20background%20(normal)%22%20%3A%20%22linear-gradient(%23ffffff%2C%20%23b3b3b3)%22%2C%0A%0A%20%20%20%20%2F%2F%20Effects%3A%20Item%200%3A%20value%2C%20Item%201%2C%20HTML%20unit%0A%20%20%20%20blur%3A%20%5B0%2C%20%22px%22%5D%2C%20brightness%3A%20%5B0%2C%20%22%22%5D%2C%0A%20%20%20%20contrast%3A%20%5B0%2C%20%22%22%5D%2C%20%22hue-rotate%22%3A%20%5B0%2C%20%22deg%22%5D%2C%0A%20%20%20%20invert%3A%20%5B0%2C%20%22%22%5D%2C%20opacity%3A%20%5B0%2C%20%22%22%5D%2C%0A%20%20%20%20saturate%3A%20%5B100%2C%20%22%22%5D%2C%20sepia%3A%20%5B0%2C%20%22%22%5D%2C%0A%20%20%20%20scale%3A%20%5B100%2C%20%22%22%2C%20100%2C%20%22%22%5D%2C%20%20rotate%3A%20%5B90%2C%20%22deg%22%5D%2C%0A%20%20%20%20skewX%3A%20%5B0%2C%20%22deg%22%5D%2C%20skewY%3A%20%5B0%2C%20%22deg%22%5D%0A%20%20%7D%3B%0A%0A%20%20function%20generateCaptchaText(DIFF)%20%7B%0A%20%20%20%20const%20chars%20%3D%20%22ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%22%3B%0A%20%20%20%20let%20captchaText%20%3D%20%22%22%3B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%204%20%2B%20((DIFF%20-%201)%20*%202)%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20captchaText%20%2B%3D%20chars.charAt(Math.floor(Math.random()%20*%20chars.length))%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20captchaText%3B%0A%20%20%7D%0A%0A%20%20function%20randomHex(DIFF)%20%7B%0A%20%20%20%20const%20rngCom%20%3D%20()%20%3D%3E%20Math.floor(Math.random()%20*%20256)%3B%0A%20%20%20%20let%20darkAmt%20%3D%2035%20*%20(DIFF%20-%201)%3B%0A%20%20%20%20const%20color%20%3D%20%7B%20r%3A%20rngCom()%2C%20g%3A%20rngCom()%2C%20b%3A%20rngCom()%20%7D%3B%0A%20%20%20%20if%20(color.r%20%3C%2080%20%26%26%20color.g%20%3C%2080%20%26%26%20color.b%20%3C%2080)%20darkAmt%20%2B%3D%2080%3B%0A%20%20%20%20color.r%20%3D%20Math.max(50%2C%20color.r%20-%20darkAmt)%3B%0A%20%20%20%20color.g%20%3D%20Math.max(50%2C%20color.g%20-%20darkAmt)%3B%0A%20%20%20%20color.b%20%3D%20Math.max(50%2C%20color.b%20-%20darkAmt)%3B%0A%20%20%20%20return%20RGBA2hex(color)%3B%0A%20%20%7D%0A%20%20function%20RGBA2hex(rgb)%20%7B%0A%20%20%20%20const%20alphaHex%20%3D%20rgb.a%20!%3D%3D%20undefined%20%3F%20Math.round(rgb.a).toString(16).padStart(2%2C%20'0')%20%3A%20''%3B%0A%20%20%20%20return%20%60%23%24%7B(1%20%3C%3C%2024%20%7C%20rgb.r%20%3C%3C%2016%20%7C%20rgb.g%20%3C%3C%208%20%7C%20rgb.b).toString(16).slice(1)%7D%24%7BalphaHex%7D%60%3B%0A%20%20%7D%0A%0A%20%20function%20drawCaptcha()%20%7B%0A%20%20%20%20captchaInfo.userAnswer%20%3D%20%22%22%3B%0A%20%20%20%20%2F%2F%20Easy%20to%20Read%2FDistinguishable%20Fonts%0A%20%20%20%20const%20fonts%20%3D%20%5B%0A%20%20%20%20%20%20%22Arial%22%2C%20%22Helvetica%22%2C%20%22Verdana%22%2C%0A%20%20%20%20%20%20%22Georgia%22%2C%20%22Palatino%22%2C%20%22Comic%20Sans%20MS%22%2C%20%22Arial%20Black%22%2C%20%22Impact%22%2C%0A%20%20%20%20%20%20%22Sans%20Serif%22%2C%20%22Serif%22%2C%20%22Handwriting%22%2C%20%22Marker%22%2C%20%22Curly%22%2C%20%22Pixel%22%0A%20%20%20%20%5D%3B%0A%0A%20%20%20%20const%20container%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20container.style.cssText%20%3D%20%60width%3A%20100%25%3B%20height%3A%20100%25%3B%20background-color%3A%20rgba(0%2C%200%2C%200%2C%20%24%7BvisSetting.focusMode%20%3F%200.5%20%3A%200%7D)%3B%60%3B%0A%20%20%20%20container.id%20%3D%20%22SPcaptchaBox%22%3B%0A%20%20%20%20container.style.position%20%3D%20%22fixed%22%3B%0A%20%20%20%20container.style.transform%20%3D%20%22translate(-50%25%2C%20-50%25)%22%3B%0A%20%20%20%20container.style.pointerEvents%20%3D%20%22auto%22%3B%0A%20%20%20%20container.style.fontFamily%20%3D%20visSetting.font%3B%0A%0A%20%20%20%20const%20canvas%20%3D%20document.createElement(%22canvas%22)%3B%0A%20%20%20%20canvas.width%20%3D%20200%3B%0A%20%20%20%20canvas.height%20%3D%20100%3B%0A%20%20%20%20const%20ctx%20%3D%20canvas.getContext(%222d%22)%3B%0A%20%20%20%20const%20capTxt%20%3D%20generateCaptchaText(captchaInfo.difficulty)%3B%0A%0A%20%20%20%20%2F%2F%20Draw%20Lines%0A%20%20%20%20for%20(let%20l%20%3D%200%3B%20l%20%3C%20captchaInfo.difficulty%20*%203%3B%20l%2B%2B)%20%7B%0A%20%20%20%20%20%20ctx.strokeStyle%20%3D%20randomHex(6%20-%20captchaInfo.difficulty)%3B%0A%20%20%20%20%20%20ctx.lineWidth%20%3D%20Math.random()%20*%201.5%20%2B%201%3B%0A%20%20%20%20%20%20ctx.beginPath()%3B%0A%20%20%20%20%20%20ctx.moveTo(Math.random()%20*%20canvas.width%2C%20Math.random()%20*%20canvas.height)%3B%0A%20%20%20%20%20%20ctx.lineTo(Math.random()%20*%20canvas.width%2C%20Math.random()%20*%20canvas.height)%3B%0A%20%20%20%20%20%20ctx.stroke()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Draw%20Letters%0A%20%20%20%20const%20startX%20%3D%20100%20-%20(capTxt.length%20*%2010)%3B%0A%20%20%20%20const%20startY%20%3D%20canvas.height%20%2F%202%3B%0A%20%20%20%20const%20spacing%20%3D%20(80%20-%20(capTxt.length%20*%205))%20%2F%202%3B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20capTxt.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20const%20convertDiff%20%3D%20captchaInfo.difficulty%20*%2020%3B%0A%20%20%20%20%20%20const%20xPos%20%3D%20startX%20%2B%20i%20*%20spacing%20%2B%20Math.random()%20*%2010%20-%205%3B%0A%20%20%20%20%20%20const%20yPos%20%3D%20startY%20%2B%20Math.random()%20*%20convertDiff%20-%20(convertDiff%20%2F%202)%3B%0A%20%20%20%20%0A%20%20%20%20%20%20const%20fontSize%20%3D%20Math.floor(Math.random()%20*%2020)%20%2B%2020%3B%0A%20%20%20%20%20%20const%20font%20%3D%20fonts%5BMath.floor(Math.random()%20*%20fonts.length)%5D%3B%0A%20%20%20%20%20%20ctx.font%20%3D%20%60%24%7BfontSize%7Dpx%20%24%7Bfont%7D%60%3B%0A%20%20%20%20%20%20ctx.fillStyle%20%3D%20randomHex(captchaInfo.difficulty)%3B%0A%20%20%20%20%20%20ctx.textBaseline%20%3D%20%22middle%22%3B%0A%20%20%20%20%20%20ctx.textAlign%20%3D%20%22center%22%3B%0A%20%20%20%20%20%20ctx.save()%3B%0A%20%20%20%20%20%20ctx.translate(xPos%2C%20yPos)%3B%0A%20%20%20%20%20%20const%20diffRange%20%3D%20%7B%201%3A%20Math.PI%20%2F%208%2C%202%3A%20Math.PI%20%2F%206%2C%203%3A%20Math.PI%20%2F%205%20%7D%3B%0A%20%20%20%20%20%20const%20rotRange%20%3D%20diffRange%5BcaptchaInfo.difficulty%5D%3B%0A%20%20%20%20%20%20ctx.rotate(Math.random()%20*%20rotRange%20*%202%20-%20rotRange)%3B%0A%20%20%20%20%20%20ctx.fillText(capTxt%5Bi%5D%2C%200%2C%200)%3B%0A%20%20%20%20%20%20ctx.restore()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20imgContain%20%3D%20document.createElement(%22div%22)%3B%0A%20%20%20%20imgContain.style.position%20%3D%20%22absolute%22%3B%0A%20%20%20%20imgContain.style.top%20%3D%20%2240%25%22%3B%0A%20%20%20%20imgContain.style.left%20%3D%20%2250%25%22%3B%0A%20%20%20%20imgContain.style.transform%20%3D%20%22translate(-50%25%2C%20-60%25)%22%3B%0A%20%20%20%20imgContain.style.backgroundColor%20%3D%20visSetting%5B%22image%20background%22%5D%3B%0A%20%20%20%20imgContain.style.zIndex%20%3D%20%223%22%3B%0A%20%20%20%20imgContain.style.border%20%3D%20%605px%20solid%20%24%7BvisSetting%5B%22image%20frame%22%5D%7D%60%3B%0A%20%20%20%20imgContain.style.borderRadius%20%3D%20%2215px%22%3B%0A%0A%20%20%20%20const%20captchaImage%20%3D%20document.createElement(%22img%22)%3B%0A%20%20%20%20const%20captchaURI%20%3D%20canvas.toDataURL()%3B%0A%20%20%20%20captchaInfo.lastImg%20%3D%20captchaURI%3B%0A%20%20%20%20captchaImage.src%20%3D%20captchaURI%3B%0A%20%20%20%20captchaImage.style.userDrag%20%3D%20%22none%22%3B%0A%20%20%20%20captchaImage.style.webkitUserDrag%20%3D%20%22none%22%3B%0A%20%20%20%20captchaImage.style.userSelect%20%3D%20%22none%22%3B%0A%20%20%20%20captchaImage.style.mozUserSelect%20%3D%20%22none%22%3B%0A%20%20%20%20captchaImage.style.webkitUserSelect%20%3D%20%22none%22%3B%0A%20%20%20%20captchaImage.style.msUserSelect%20%3D%20%22none%22%3B%0A%20%20%20%20imgContain.appendChild(captchaImage)%3B%0A%20%20%20%20container.appendChild(imgContain)%3B%0A%0A%20%20%20%20const%20input%20%3D%20document.createElement(%22input%22)%3B%0A%20%20%20%20input.type%20%3D%20%22text%22%3B%0A%20%20%20%20input.placeholder%20%3D%20%22Enter%20CAPTCHA%22%3B%0A%20%20%20%20input.style.position%20%3D%20%22absolute%22%3B%0A%20%20%20%20input.style.top%20%3D%20%2260%25%22%3B%0A%20%20%20%20input.style.left%20%3D%20%2250%25%22%3B%0A%20%20%20%20input.style.transform%20%3D%20%22translate(-50%25%2C%20-50%25)%22%3B%0A%20%20%20%20input.style.width%20%3D%20%22200px%22%3B%0A%20%20%20%20input.style.zIndex%20%3D%20%222%22%3B%0A%20%20%20%20input.style.textAlign%20%3D%20%22center%22%3B%0A%20%20%20%20input.style.borderRadius%20%3D%20%2210px%22%3B%0A%20%20%20%20input.style.padding%20%3D%20%225px%2015px%22%3B%0A%20%20%20%20input.style.border%20%3D%20%605px%20solid%20%24%7BvisSetting%5B%22input%20frame%22%5D%7D%60%3B%0A%20%20%20%20input.style.background%20%3D%20visSetting%5B%22input%20background%22%5D%3B%0A%20%20%20%20input.style.color%20%3D%20visSetting%5B%22input%20text%22%5D%3B%0A%20%20%20%20container.appendChild(input)%3B%0A%0A%20%20%20%20const%20submitButton%20%3D%20document.createElement(%22button%22)%3B%0A%20%20%20%20submitButton.textContent%20%3D%20%22Submit%22%3B%0A%20%20%20%20submitButton.style.position%20%3D%20%22absolute%22%3B%0A%20%20%20%20submitButton.style.top%20%3D%20%2270%25%22%3B%0A%20%20%20%20submitButton.style.left%20%3D%20%2250%25%22%3B%0A%20%20%20%20submitButton.style.transform%20%3D%20%22translate(-50%25%2C%20-20%25)%22%3B%0A%20%20%20%20submitButton.style.background%20%3D%20visSetting%5B%22button%20background%20(normal)%22%5D%3B%0A%20%20%20%20submitButton.style.border%20%3D%20%605px%20solid%20%24%7BvisSetting%5B%22button%20frame%22%5D%7D%60%3B%0A%20%20%20%20submitButton.style.zIndex%20%3D%20%222%22%3B%0A%20%20%20%20submitButton.style.borderRadius%20%3D%20%2210px%22%3B%0A%20%20%20%20submitButton.style.padding%20%3D%20%225px%2015px%22%3B%0A%20%20%20%20submitButton.style.fontWeight%20%3D%20%22600%22%3B%0A%20%20%20%20submitButton.style.color%20%3D%20visSetting%5B%22button%20text%22%5D%3B%0A%20%20%20%20container.appendChild(submitButton)%3B%0A%20%20%0A%20%20%20%20function%20handleSubmit()%20%7B%0A%20%20%20%20%20%20container.style.pointerEvents%20%3D%20%22none%22%3B%0A%20%20%20%20%20%20captchaInfo.userAnswer%20%3D%20input.value%3B%0A%20%20%20%20%20%20captchaInfo.passed%20%3D%20input.value%20%3D%3D%3D%20capTxt%3B%0A%20%20%20%20%20%20if%20(visSetting.autoClose)%20%7B%0A%20%20%20%20%20%20%20%20render.removeOverlay(container)%3B%0A%20%20%20%20%20%20%20%20captchaInfo.answer%20%3D%20capTxt%3B%0A%20%20%20%20%20%20%20%20currentCaptcha%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20vm.runtime.startHats(%22SPcaptcha_whenAnswered%22)%3B%0A%20%20%20%20%7D%0A%20%20%20%20submitButton.addEventListener(%22click%22%2C%20handleSubmit)%3B%0A%20%20%20%20submitButton.addEventListener(%22mouseenter%22%2C%20function()%20%7B%20submitButton.style.background%20%3D%20visSetting%5B%22button%20background%20(hover)%22%5D%20%7D)%3B%0A%20%20%20%20submitButton.addEventListener(%22mouseleave%22%2C%20function()%20%7B%20submitButton.style.background%20%3D%20visSetting%5B%22button%20background%20(normal)%22%5D%20%7D)%3B%0A%20%20%20%20input.addEventListener(%22keydown%22%2C%20function(event)%20%7B%0A%20%20%20%20%20%20if%20(event.key%20%3D%3D%3D%20%22Enter%22)%20%7B%0A%20%20%20%20%20%20%20%20event.preventDefault()%3B%0A%20%20%20%20%20%20%20%20handleSubmit()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%20%20render.addOverlay(container%2C%20%22scale-centered%22)%3B%0A%20%20%20%20input.focus()%3B%0A%20%20%20%20currentCaptcha%20%3D%20container%3B%0A%20%20%7D%0A%0A%20%20class%20SPcaptcha%20%7B%0A%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20vm.runtime.on(%22PROJECT_START%22%2C%20()%20%3D%3E%20%7B%20this.closeCaptcha()%20%7D)%3B%0A%20%20%20%20%20%20vm.runtime.on(%22PROJECT_STOP_ALL%22%2C%20()%20%3D%3E%20%7B%20this.closeCaptcha()%20%7D)%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Helper%20Function%20to%20Prevent%20Users%20from%20auto-passing%20Captchas%0A%20%20%20%20%20%20%2F%2F%20Of%20course%2C%20theyre%20might%20be%20other%20workarounds%20but%20%3A%2F%0A%20%20%20%20%20%20vm.runtime.on(%22BEFORE_EXECUTE%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Currently%20I%20just%20reset%20the%20function%2C%20perhaps%20we%20could%20stop%20the%20project%2C%20but%20whatever%0A%20%20%20%20%20%20%20%20const%20openUserPass%20%3D%20vm.runtime._primitives.SPcaptcha_userPassed.toString()%3B%0A%20%20%20%20%20%20%20%20if%20(internalUserPass%20%26%26%20openUserPass%20!%3D%3D%20internalUserPass.toString())%20%7B%0A%20%20%20%20%20%20%20%20%20%20vm.runtime._primitives.SPcaptcha_userPassed%20%3D%20eval(internalUserPass.toString())%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20const%20openAnswer%20%3D%20vm.runtime._primitives.SPcaptcha_getAnswer.toString()%3B%0A%20%20%20%20%20%20%20%20if%20(internalAnswer%20%26%26%20openAnswer%20!%3D%3D%20internalAnswer.toString())%20%7B%0A%20%20%20%20%20%20%20%20%20%20vm.runtime._primitives.SPcaptcha_getAnswer%20%3D%20eval(internalAnswer.toString())%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20const%20openUserAnswer%20%3D%20vm.runtime._primitives.SPcaptcha_getResponse.toString()%3B%0A%20%20%20%20%20%20%20%20if%20(internalUserAnswer%20%26%26%20openUserAnswer%20!%3D%3D%20internalUserAnswer.toString())%20%7B%0A%20%20%20%20%20%20%20%20%20%20vm.runtime._primitives.SPcaptcha_getResponse%20%3D%20eval(internalUserAnswer.toString())%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%22SPcaptcha%22%2C%0A%20%20%20%20%20%20%20%20name%3A%20%22Captchas%22%2C%0A%20%20%20%20%20%20%20%20color1%3A%20%22%23606E90%22%2C%0A%20%20%20%20%20%20%20%20menuIconURI%2C%0A%20%20%20%20%20%20%20%20blockIconURI%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22openCaptcha%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22open%20%5BDIFF%5D%20Captcha%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIFF%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22DIFFICULTY%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22openCaptchaWait%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22open%20%5BDIFF%5D%20Captcha%20and%20wait%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DIFF%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22DIFFICULTY%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22closeCaptcha%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22close%20Captchas%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22whenAnswered%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.EVENT%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20isEdgeActivated%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22when%20Captcha%20answered%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22captchaOpen%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22is%20Captcha%20open%3F%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22userPassed%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22last%20Captcha%20passed%3F%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getAnswer%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22last%20Captcha%20answer%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getResponse%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22last%20Submitted%20answer%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getDiff%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22current%20Captcha%20difficulty%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22lastImage%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22last%20Captcha%20image%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%20blockType%3A%20Scratch.BlockType.LABEL%2C%20text%3A%20%22Visuals%20and%20Colors%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22toggleFunction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22toggle%20%5BFUNC%5D%20%5BSETTING%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FUNC%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22FUNCTIONS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20SETTING%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22TOGGLE%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22resetColors%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22reset%20Captcha%20visuals%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setFont%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20Captcha%20font%20to%20%5BFONT%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FONT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22FONTS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setColor%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20%5BTHING%5D%20to%20%5BCOLOR%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20THING%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22ELEMENTS%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20COLOR%3A%20%7B%20type%3A%20Scratch.ArgumentType.COLOR%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%22---%22%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22resetEffect%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22reset%20Captcha%20effects%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22setEffect%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22set%20%5BEFFECT%5D%20of%20Captcha%20to%20%5BVALUE%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20VALUE%3A%20%7B%20type%3A%20Scratch.ArgumentType.NUMBER%2C%20defaultValue%3A%205%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22EFFECTS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20%22getEffect%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20%22current%20%5BEFFECT%5D%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20EFFECT%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20%22EFFECTS%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20FONTS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%22allFonts%22%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20DIFFICULTY%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22easy%22%2C%20%22medium%22%2C%20%22hard%22%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20TOGGLE%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22on%22%2C%20%22off%22%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20FUNCTIONS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%22focus%20mode%22%2C%20%22auto%20close%22%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20ELEMENTS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20allElements%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20EFFECTS%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22blur%22%2C%20%22saturation%22%2C%20%22contrast%22%2C%20%22brightness%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22hue%22%2C%20%22opacity%22%2C%20%22sepia%22%2C%20%22invert%22%2C%20%22direction%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22scale%20x%22%2C%20%22scale%20y%22%2C%20%22skew%20x%22%2C%20%22skew%20y%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20allFonts()%20%7B%0A%20%20%20%20%20%20const%20customFonts%20%3D%20Scratch.vm.runtime.fontManager%20%3F%20Scratch.vm.runtime.fontManager.getFonts().map((i)%20%3D%3E%20(%7B%20text%3A%20i.name%2C%20value%3A%20i.family%20%7D))%20%3A%20%5B%5D%3B%0A%20%20%20%20%20%20return%20%5B...fontMenu%2C%20...customFonts%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20openCaptcha(args%2C%20util)%20%7B%0A%20%20%20%20%20%20%2F%2F%20remove%20any%20existing%20Captchas%0A%20%20%20%20%20%20render.removeOverlay(currentCaptcha)%3B%0A%20%20%20%20%20%20currentCaptcha%20%3D%20%22pending%22%3B%20%2F%2F%20Immediately%20Do%20this%20to%20Yield%20the%20Block%0A%20%20%20%20%20%20captchaInfo.difficulty%20%3D%20args.DIFF%20%3D%3D%3D%20%22easy%22%20%3F%201%20%3A%20args.DIFF%20%3D%3D%3D%20%22medium%22%20%3F%202%20%3A%203%3B%0A%20%20%20%20%20%20drawCaptcha()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20openCaptchaWait(args%2C%20util)%20%7B%0A%20%20%20%20%20%20if%20(typeof%20util.stackFrame.captchaWait%20%3D%3D%3D%20%22undefined%22)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20remove%20any%20existing%20Captchas%0A%20%20%20%20%20%20%20%20render.removeOverlay(currentCaptcha)%3B%0A%20%20%20%20%20%20%20%20util.stackFrame.captchaWait%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20currentCaptcha%20%3D%20%22pending%22%3B%20%2F%2F%20Immediately%20Do%20this%20to%20Yield%20the%20Block%0A%20%20%20%20%20%20%20%20captchaInfo.difficulty%20%3D%20args.DIFF%20%3D%3D%3D%20%22easy%22%20%3F%201%20%3A%20args.DIFF%20%3D%3D%3D%20%22medium%22%20%3F%202%20%3A%203%3B%0A%20%20%20%20%20%20%20%20drawCaptcha()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(currentCaptcha)%20util.yield()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20closeCaptcha()%20%7B%0A%20%20%20%20%20%20captchaInfo%20%3D%20%7B%20...captchaInfo%2C%20passed%3A%20false%20%7D%3B%0A%20%20%20%20%20%20render.removeOverlay(currentCaptcha)%3B%0A%20%20%20%20%20%20currentCaptcha%20%3D%20null%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20userPassed()%20%7B%20return%20captchaInfo.passed%20%7D%0A%20%20%20%20getAnswer()%20%7B%20return%20captchaInfo.answer%20%7D%0A%20%20%20%20getResponse()%20%7B%20return%20captchaInfo.userAnswer%20%7D%0A%20%20%20%20getDiff()%20%7B%0A%20%20%20%20%20%20const%20diff%20%3D%20captchaInfo.difficulty%3B%0A%20%20%20%20%20%20return%20diff%20%3D%3D%3D%201%20%3F%20%22easy%22%20%3A%20diff%20%3D%3D%3D%202%20%3F%20%22medium%22%20%3A%20%22hard%22%3B%0A%20%20%20%20%7D%0A%20%20%20%20captchaOpen()%20%7B%20return%20Scratch.Cast.toBoolean(currentCaptcha)%20%7D%0A%20%20%20%20lastImage()%20%7B%20return%20captchaInfo.lastImg%20%7D%0A%0A%20%20%20%20toggleFunction(args)%20%7B%0A%20%20%20%20%20%20const%20con%20%3D%20args.SETTING%20%3D%3D%3D%20%22on%22%3B%0A%20%20%20%20%20%20switch%20(args.FUNC)%20%7B%0A%20%20%20%20%20%20%20%20case%20%22focus%20mode%22%3A%20%7B%20visSetting.focusMode%20%3D%20con%3B%20break%20%7D%0A%20%20%20%20%20%20%20%20case%20%22auto%20close%22%3A%20%7B%20visSetting.autoClose%20%3D%20con%3B%20break%20%7D%0A%20%20%20%20%20%20%20%20default%3A%20%2F*%20prolly%20will%20add%20more%20later%20*%2F%20break%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20if%20(currentCaptcha)%20this.updateCaptchaHtml()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20resetEffect(args)%20%7B%0A%20%20%20%20%20%20visSetting%20%3D%20%7B%0A%20%20%20%20%20%20%20%20...visSetting%2C%0A%20%20%20%20%20%20%20%20blur%3A%20%5B0%2C%20%22px%22%5D%2C%20brightness%3A%20%5B0%2C%20%22%22%5D%2C%0A%20%20%20%20%20%20%20%20contrast%3A%20%5B0%2C%20%22%22%5D%2C%20%22hue-rotate%22%3A%20%5B0%2C%20%22deg%22%5D%2C%0A%20%20%20%20%20%20%20%20invert%3A%20%5B0%2C%20%22%22%5D%2C%20opacity%3A%20%5B0%2C%20%22%22%5D%2C%0A%20%20%20%20%20%20%20%20saturate%3A%20%5B100%2C%20%22%22%5D%2C%20sepia%3A%20%5B0%2C%20%22%22%5D%2C%0A%20%20%20%20%20%20%20%20scale%3A%20%5B100%2C%20%22%22%2C%20100%2C%20%22%22%5D%2C%20%20rotate%3A%20%5B90%2C%20%22deg%22%5D%2C%0A%20%20%20%20%20%20%20%20skewX%3A%20%5B0%2C%20%22deg%22%5D%2C%20skewY%3A%20%5B0%2C%20%22deg%22%5D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20if%20(!currentCaptcha)%20return%3B%0A%20%20%20%20%20%20currentCaptcha.style.transform%20%3D%20this.callVisUpdate(%22transform%22)%3B%0A%20%20%20%20%20%20currentCaptcha.style.filter%20%3D%20this.callVisUpdate(%22filter%22)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setEffect(args)%20%7B%0A%20%20%20%20%20%20if%20(!currentCaptcha)%20return%3B%0A%20%20%20%20%20%20let%20effect%20%3D%20args.EFFECT%3B%0A%20%20%20%20%20%20if%20(effect%20%3D%3D%3D%20%22direction%22)%20effect%20%3D%20%22rotate%22%3B%0A%20%20%20%20%20%20if%20(effect%20%3D%3D%3D%20%22saturation%22)%20effect%20%3D%20%22saturate%22%3B%0A%20%20%20%20%20%20if%20(effect%20%3D%3D%3D%20%22skew%20x%22)%20effect%20%3D%20%22skewX%22%3B%0A%20%20%20%20%20%20if%20(effect%20%3D%3D%3D%20%22skew%20y%22)%20effect%20%3D%20%22skewY%22%3B%0A%20%20%20%20%20%20if%20(effect.startsWith(%22scale%22))%20effect%20%3D%20%22scale%22%3B%0A%20%20%20%20%20%20const%20key%20%3D%20visSetting%5Beffect%5D%3B%0A%20%20%20%20%20%20if%20(key%20!%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20%20%20key%5Bargs.EFFECT%20%3D%3D%3D%20%22scale%20y%22%20%3F%202%20%3A%200%5D%20%3D%20Scratch.Cast.toNumber(args.VALUE)%0A%20%20%20%20%20%20%20%20currentCaptcha.style.transform%20%3D%20this.callVisUpdate(%22transform%22)%3B%0A%20%20%20%20%20%20%20%20currentCaptcha.style.filter%20%3D%20this.callVisUpdate(%22filter%22)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20resetColors(args)%20%7B%0A%20%20%20%20%20%20visSetting%20%3D%20%7B%0A%20%20%20%20%20%20%20%20...visSetting%2C%0A%20%20%20%20%20%20%20%20%22image%20frame%22%20%3A%20%22%23cccccc%22%2C%20%22image%20background%22%20%3A%20%22%23000000%22%2C%0A%20%20%20%20%20%20%20%20%22input%20frame%22%20%3A%20%22%23cccccc%22%2C%20%22input%20background%22%20%3A%20%22linear-gradient(%23ffffff%2C%20%23b3b3b3)%22%2C%20%22input%20text%22%20%3A%20%22%23000000%22%2C%0A%20%20%20%20%20%20%20%20%22button%20frame%22%20%3A%20%22%23cccccc%22%2C%20%22button%20text%22%20%3A%20%22%23000000%22%2C%0A%20%20%20%20%20%20%20%20%22button%20background%20(hover)%22%20%3A%20%22linear-gradient(%23b3b3b3%2C%20%23ffffff)%22%2C%20%22button%20background%20(normal)%22%20%3A%20%22linear-gradient(%23ffffff%2C%20%23b3b3b3)%22%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20if%20(currentCaptcha)%20this.updateCaptchaHtml()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setFont(args)%20%7B%0A%20%20%20%20%20%20visSetting.font%20%3D%20xmlEscape(args.FONT)%3B%0A%20%20%20%20%20%20if%20(currentCaptcha)%20this.updateCaptchaHtml()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setColor(args)%20%7B%0A%20%20%20%20%20%20if%20(allElements.indexOf(args.THING)%20%3D%3D%3D%20-1)%20return%3B%0A%20%20%20%20%20%20visSetting%5Bargs.THING%5D%20%3D%20xmlEscape(args.COLOR)%3B%0A%20%20%20%20%20%20if%20(currentCaptcha)%20this.updateCaptchaHtml()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Helper%20function%20to%20update%20visuals%2Fcolors%0A%20%20%20%20updateCaptchaHtml()%20%7B%0A%20%20%20%20%20%20currentCaptcha.style.fontFamily%20%3D%20visSetting.font%3B%0A%20%20%20%20%20%20currentCaptcha.style.backgroundColor%20%3D%20%60rgba(0%2C%200%2C%200%2C%20%24%7BvisSetting.focusMode%20%3F%200.5%20%3A%200%7D)%60%3B%0A%20%20%20%20%20%20const%20children%20%3D%20currentCaptcha.childNodes%3B%0A%20%20%20%20%20%20%2F%2F%20Image%0A%20%20%20%20%20%20children%5B0%5D.style.backgroundColor%20%3D%20visSetting%5B%22image%20background%22%5D%3B%0A%20%20%20%20%20%20children%5B0%5D.style.border%20%3D%20%605px%20solid%20%24%7BvisSetting%5B%22image%20frame%22%5D%7D%60%3B%0A%20%20%20%20%20%20%2F%2F%20Input%0A%20%20%20%20%20%20children%5B1%5D.style.border%20%3D%20%605px%20solid%20%24%7BvisSetting%5B%22input%20frame%22%5D%7D%60%3B%0A%20%20%20%20%20%20children%5B1%5D.style.background%20%3D%20visSetting%5B%22input%20background%22%5D%3B%0A%20%20%20%20%20%20children%5B1%5D.style.color%20%3D%20visSetting%5B%22input%20text%22%5D%3B%0A%20%20%20%20%20%20%2F%2F%20Submit%0A%20%20%20%20%20%20children%5B2%5D.style.background%20%3D%20visSetting%5B%22button%20background%20(normal)%22%5D%3B%0A%20%20%20%20%20%20children%5B2%5D.style.border%20%3D%20%605px%20solid%20%24%7BvisSetting%5B%22button%20frame%22%5D%7D%60%3B%0A%20%20%20%20%20%20children%5B2%5D.style.color%20%3D%20visSetting%5B%22button%20text%22%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Helper%20function%20to%20write%20the%20Effects%20as%20a%20HTML%20string%0A%20%20%20%20callVisUpdate(type)%20%7B%0A%20%20%20%20%20%20let%20array%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20let%20string%20%3D%20%22%22%3B%0A%20%20%20%20%20%20if%20(type%20%3D%3D%3D%20%22transform%22)%20%7B%0A%20%20%20%20%20%20%20%20array%20%3D%20%5B%22scale%22%2C%20%22rotate%22%2C%20%22skewX%22%2C%20%22skewY%22%5D%3B%0A%20%20%20%20%20%20%20%20string%20%2B%3D%20%22translate(-50%25%2C%20-50%25)%20%22%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%20array%20%3D%20%5B%22blur%22%2C%20%22brightness%22%2C%20%22contrast%22%2C%20%22hue-rotate%22%2C%20%22invert%22%2C%20%22opacity%22%2C%20%22saturate%22%2C%20%22sepia%22%5D%20%7D%0A%20%20%20%20%20%20for%20(var%20i%20%3D%200%3B%20i%20%3C%20array.length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20const%20name%20%3D%20array%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20const%20key%20%3D%20visSetting%5Bname%5D%3B%0A%0A%20%20%20%20%20%20%20%20let%20value%20%3D%20key%5B0%5D%3B%0A%20%20%20%20%20%20%20%20if%20(name%20%3D%3D%3D%20%22opacity%22)%20value%20%3D%201%20-%20(value%20%2F%20100)%3B%0A%20%20%20%20%20%20%20%20if%20(name%20%3D%3D%3D%20%22saturate%22%20%7C%7C%20name%20%3D%3D%3D%20%22invert%22%20%7C%7C%20name%20%3D%3D%3D%20%22sepia%22)%20value%20%3D%20value%20%2F%20100%3B%0A%20%20%20%20%20%20%20%20if%20(name%20%3D%3D%3D%20%22contrast%22%20%7C%7C%20name%20%3D%3D%3D%20%22brightness%22)%20value%20%3D%20(value%20%2B%20100)%20%2F%20100%3B%0A%20%20%20%20%20%20%20%20if%20(name%20%3D%3D%3D%20%22rotate%22)%20value%20%3D%20value%20-%2090%3B%0A%20%20%20%20%20%20%20%20if%20(name%20%3D%3D%3D%20%22scale%22)%20value%20%3D%20%60%24%7Bvalue%20%2F%20100%7D%2C%20%24%7Bkey%5B2%5D%20%2F%20100%7D%60%3B%0A%20%20%20%20%20%20%20%20string%20%2B%3D%20%60%24%7Bname%7D(%24%7Bvalue%7D%24%7Bkey%5B1%5D%7D)%20%60%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20string%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getEffect(args)%20%7B%0A%20%20%20%20%20%20let%20effect%20%3D%20args.EFFECT%3B%0A%20%20%20%20%20%20if%20(effect%20%3D%3D%3D%20%22direction%22)%20effect%20%3D%20%22rotate%22%3B%0A%20%20%20%20%20%20if%20(effect%20%3D%3D%3D%20%22saturation%22)%20effect%20%3D%20%22saturate%22%3B%0A%20%20%20%20%20%20if%20(effect%20%3D%3D%3D%20%22skew%20x%22)%20effect%20%3D%20%22skewX%22%3B%0A%20%20%20%20%20%20if%20(effect%20%3D%3D%3D%20%22skew%20y%22)%20effect%20%3D%20%22skewY%22%3B%0A%20%20%20%20%20%20if%20(effect.startsWith(%22scale%22))%20effect%20%3D%20%22scale%22%3B%0A%20%20%20%20%20%20return%20visSetting%5Beffect%5D%5Bargs.EFFECT%20%3D%3D%3D%20%22scale%20y%22%20%3F%202%20%3A%200%5D%20%3F%3F%20%22%22%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20SPcaptcha())%3B%0A%0A%20%20%2F%2F%20Security%20Feature%20Enabler%0A%20%20function%20checkPrimitives()%20%7B%0A%20%20%20%20internalUserPass%20%3D%20vm.runtime._primitives.SPcaptcha_userPassed%3B%0A%20%20%20%20internalUserAnswer%20%3D%20vm.runtime._primitives.SPcaptcha_getResponse%3B%0A%20%20%20%20internalAnswer%20%3D%20vm.runtime._primitives.SPcaptcha_getAnswer%3B%0A%20%20%20%20if%20(internalUserPass%20%3D%3D%3D%20undefined%20%7C%7C%20internalUserAnswer%20%3D%3D%3D%20undefined%20%7C%7C%20internalAnswer%20%3D%3D%3D%20undefined)%20%7B%0A%20%20%20%20%20%20setTimeout(checkPrimitives%2C%2010)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20checkPrimitives()%3B%0A%7D)(Scratch)%3B%0A%20%7D)(Scratch)%3B"]) {
        vm.extensionManager.loadExtensionURL(extension);
      }

      vm.runtime.isProjectPermissionManagerDisabled = true;
      vm.runtime.extensionRuntimeOptions.javascriptUnsandboxed = true;

    } catch (e) {
      handleError(e);
    }
  </script>
  
  
    <script>
      const getProjectData = (function() {
        const storage = scaffolding.storage;
        storage.onprogress = (total, loaded) => {
          setProgress(interpolate(0.2, 0.98, loaded / total));
        };
        
        storage.addWebStore(
          [
            storage.AssetType.ImageVector,
            storage.AssetType.ImageBitmap,
            storage.AssetType.Sound,
            storage.AssetType.Font
          ].filter(i => i),
          (asset) => new URL('./assets/' + asset.assetId + '.' + asset.dataFormat, location).href
        );
        return () => new Promise((resolve, reject) => {
        const xhr = new XMLHttpRequest();
        xhr.onload = () => {
          resolve(xhr.response);
        };
        xhr.onerror = () => {
          if (location.protocol === 'file:') {
            reject(new Error('Zip environment must be used from a website, not from a file URL.'));
          } else {
            reject(new Error('Request to load project data failed.'));
          }
        };
        xhr.onprogress = (e) => {
          if (e.lengthComputable) {
            setProgress(interpolate(0.1, 0.2, e.loaded / e.total));
          }
        };
        xhr.responseType = 'arraybuffer';
        xhr.open('GET', "./assets/project.json");
        xhr.send();
      });
      })();
    </script>
  <script>
    const run = async () => {
      const projectData = await getProjectData();
      await scaffolding.loadProject(projectData);
      setProgress(1);
      loadingScreen.hidden = true;
      if (true) {
        scaffolding.start();
      } else {
        launchScreen.hidden = false;
        launchScreen.addEventListener('click', () => {
          launchScreen.hidden = true;
          scaffolding.start();
        });
        launchScreen.focus();
      }
    };
    run().catch(handleError);
  </script>
</body>
</html>
